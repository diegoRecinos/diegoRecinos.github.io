function QL(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const d=Object.getOwnPropertyDescriptor(r,s);d&&Object.defineProperty(e,s,d.get?d:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const d of s)if(d.type==="childList")for(const p of d.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&r(p)}).observe(document,{childList:!0,subtree:!0});function n(s){const d={};return s.integrity&&(d.integrity=s.integrity),s.referrerPolicy&&(d.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?d.credentials="include":s.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(s){if(s.ep)return;s.ep=!0;const d=n(s);fetch(s.href,d)}})();var zd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var eN={exports:{}},B1={},tN={exports:{}},Ci={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var py=Symbol.for("react.element"),R7=Symbol.for("react.portal"),O7=Symbol.for("react.fragment"),A7=Symbol.for("react.strict_mode"),D7=Symbol.for("react.profiler"),$7=Symbol.for("react.provider"),k7=Symbol.for("react.context"),z7=Symbol.for("react.forward_ref"),L7=Symbol.for("react.suspense"),N7=Symbol.for("react.memo"),F7=Symbol.for("react.lazy"),W3=Symbol.iterator;function B7(e){return e===null||typeof e!="object"?null:(e=W3&&e[W3]||e["@@iterator"],typeof e=="function"?e:null)}var nN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rN=Object.assign,iN={};function Cm(e,t,n){this.props=e,this.context=t,this.refs=iN,this.updater=n||nN}Cm.prototype.isReactComponent={};Cm.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Cm.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function oN(){}oN.prototype=Cm.prototype;function sM(e,t,n){this.props=e,this.context=t,this.refs=iN,this.updater=n||nN}var lM=sM.prototype=new oN;lM.constructor=sM;rN(lM,Cm.prototype);lM.isPureReactComponent=!0;var G3=Array.isArray,aN=Object.prototype.hasOwnProperty,cM={current:null},sN={key:!0,ref:!0,__self:!0,__source:!0};function lN(e,t,n){var r,s={},d=null,p=null;if(t!=null)for(r in t.ref!==void 0&&(p=t.ref),t.key!==void 0&&(d=""+t.key),t)aN.call(t,r)&&!sN.hasOwnProperty(r)&&(s[r]=t[r]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var x=Array(i),S=0;S<i;S++)x[S]=arguments[S+2];s.children=x}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)s[r]===void 0&&(s[r]=i[r]);return{$$typeof:py,type:e,key:d,ref:p,props:s,_owner:cM.current}}function j7(e,t){return{$$typeof:py,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function uM(e){return typeof e=="object"&&e!==null&&e.$$typeof===py}function V7(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var q3=/\/+/g;function YC(e,t){return typeof e=="object"&&e!==null&&e.key!=null?V7(""+e.key):t.toString(36)}function vb(e,t,n,r,s){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var p=!1;if(e===null)p=!0;else switch(d){case"string":case"number":p=!0;break;case"object":switch(e.$$typeof){case py:case R7:p=!0}}if(p)return p=e,s=s(p),e=r===""?"."+YC(p,0):r,G3(s)?(n="",e!=null&&(n=e.replace(q3,"$&/")+"/"),vb(s,t,n,"",function(S){return S})):s!=null&&(uM(s)&&(s=j7(s,n+(!s.key||p&&p.key===s.key?"":(""+s.key).replace(q3,"$&/")+"/")+e)),t.push(s)),1;if(p=0,r=r===""?".":r+":",G3(e))for(var i=0;i<e.length;i++){d=e[i];var x=r+YC(d,i);p+=vb(d,t,n,x,s)}else if(x=B7(e),typeof x=="function")for(e=x.call(e),i=0;!(d=e.next()).done;)d=d.value,x=r+YC(d,i++),p+=vb(d,t,n,x,s);else if(d==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return p}function Px(e,t,n){if(e==null)return e;var r=[],s=0;return vb(e,r,"","",function(d){return t.call(n,d,s++)}),r}function H7(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var is={current:null},yb={transition:null},U7={ReactCurrentDispatcher:is,ReactCurrentBatchConfig:yb,ReactCurrentOwner:cM};function cN(){throw Error("act(...) is not supported in production builds of React.")}Ci.Children={map:Px,forEach:function(e,t,n){Px(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Px(e,function(){t++}),t},toArray:function(e){return Px(e,function(t){return t})||[]},only:function(e){if(!uM(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ci.Component=Cm;Ci.Fragment=O7;Ci.Profiler=D7;Ci.PureComponent=sM;Ci.StrictMode=A7;Ci.Suspense=L7;Ci.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U7;Ci.act=cN;Ci.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=rN({},e.props),s=e.key,d=e.ref,p=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,p=cM.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(x in t)aN.call(t,x)&&!sN.hasOwnProperty(x)&&(r[x]=t[x]===void 0&&i!==void 0?i[x]:t[x])}var x=arguments.length-2;if(x===1)r.children=n;else if(1<x){i=Array(x);for(var S=0;S<x;S++)i[S]=arguments[S+2];r.children=i}return{$$typeof:py,type:e.type,key:s,ref:d,props:r,_owner:p}};Ci.createContext=function(e){return e={$$typeof:k7,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:$7,_context:e},e.Consumer=e};Ci.createElement=lN;Ci.createFactory=function(e){var t=lN.bind(null,e);return t.type=e,t};Ci.createRef=function(){return{current:null}};Ci.forwardRef=function(e){return{$$typeof:z7,render:e}};Ci.isValidElement=uM;Ci.lazy=function(e){return{$$typeof:F7,_payload:{_status:-1,_result:e},_init:H7}};Ci.memo=function(e,t){return{$$typeof:N7,type:e,compare:t===void 0?null:t}};Ci.startTransition=function(e){var t=yb.transition;yb.transition={};try{e()}finally{yb.transition=t}};Ci.unstable_act=cN;Ci.useCallback=function(e,t){return is.current.useCallback(e,t)};Ci.useContext=function(e){return is.current.useContext(e)};Ci.useDebugValue=function(){};Ci.useDeferredValue=function(e){return is.current.useDeferredValue(e)};Ci.useEffect=function(e,t){return is.current.useEffect(e,t)};Ci.useId=function(){return is.current.useId()};Ci.useImperativeHandle=function(e,t,n){return is.current.useImperativeHandle(e,t,n)};Ci.useInsertionEffect=function(e,t){return is.current.useInsertionEffect(e,t)};Ci.useLayoutEffect=function(e,t){return is.current.useLayoutEffect(e,t)};Ci.useMemo=function(e,t){return is.current.useMemo(e,t)};Ci.useReducer=function(e,t,n){return is.current.useReducer(e,t,n)};Ci.useRef=function(e){return is.current.useRef(e)};Ci.useState=function(e){return is.current.useState(e)};Ci.useSyncExternalStore=function(e,t,n){return is.current.useSyncExternalStore(e,t,n)};Ci.useTransition=function(){return is.current.useTransition()};Ci.version="18.3.1";tN.exports=Ci;var _=tN.exports;const Ft=hl(_),my=QL({__proto__:null,default:Ft},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W7=_,G7=Symbol.for("react.element"),q7=Symbol.for("react.fragment"),K7=Object.prototype.hasOwnProperty,X7=W7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Z7={key:!0,ref:!0,__self:!0,__source:!0};function uN(e,t,n){var r,s={},d=null,p=null;n!==void 0&&(d=""+n),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(p=t.ref);for(r in t)K7.call(t,r)&&!Z7.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:G7,type:e,key:d,ref:p,props:s,_owner:X7.current}}B1.Fragment=q7;B1.jsx=uN;B1.jsxs=uN;eN.exports=B1;var he=eN.exports,dN={exports:{}},Vs={},hN={exports:{}},fN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(fe,me){var Ie=fe.length;fe.push(me);e:for(;0<Ie;){var Me=Ie-1>>>1,Be=fe[Me];if(0<s(Be,me))fe[Me]=me,fe[Ie]=Be,Ie=Me;else break e}}function n(fe){return fe.length===0?null:fe[0]}function r(fe){if(fe.length===0)return null;var me=fe[0],Ie=fe.pop();if(Ie!==me){fe[0]=Ie;e:for(var Me=0,Be=fe.length,$e=Be>>>1;Me<$e;){var ze=2*(Me+1)-1,Je=fe[ze],yt=ze+1,at=fe[yt];if(0>s(Je,Ie))yt<Be&&0>s(at,Je)?(fe[Me]=at,fe[yt]=Ie,Me=yt):(fe[Me]=Je,fe[ze]=Ie,Me=ze);else if(yt<Be&&0>s(at,Ie))fe[Me]=at,fe[yt]=Ie,Me=yt;else break e}}return me}function s(fe,me){var Ie=fe.sortIndex-me.sortIndex;return Ie!==0?Ie:fe.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var p=Date,i=p.now();e.unstable_now=function(){return p.now()-i}}var x=[],S=[],T=1,M=null,$=3,L=!1,N=!1,V=!1,B=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function W(fe){for(var me=n(S);me!==null;){if(me.callback===null)r(S);else if(me.startTime<=fe)r(S),me.sortIndex=me.expirationTime,t(x,me);else break;me=n(S)}}function X(fe){if(V=!1,W(fe),!N)if(n(x)!==null)N=!0,de(ee);else{var me=n(S);me!==null&&pe(X,me.startTime-fe)}}function ee(fe,me){N=!1,V&&(V=!1,j(re),re=-1),L=!0;var Ie=$;try{for(W(me),M=n(x);M!==null&&(!(M.expirationTime>me)||fe&&!ce());){var Me=M.callback;if(typeof Me=="function"){M.callback=null,$=M.priorityLevel;var Be=Me(M.expirationTime<=me);me=e.unstable_now(),typeof Be=="function"?M.callback=Be:M===n(x)&&r(x),W(me)}else r(x);M=n(x)}if(M!==null)var $e=!0;else{var ze=n(S);ze!==null&&pe(X,ze.startTime-me),$e=!1}return $e}finally{M=null,$=Ie,L=!1}}var J=!1,Y=null,re=-1,se=5,ae=-1;function ce(){return!(e.unstable_now()-ae<se)}function Ce(){if(Y!==null){var fe=e.unstable_now();ae=fe;var me=!0;try{me=Y(!0,fe)}finally{me?we():(J=!1,Y=null)}}else J=!1}var we;if(typeof H=="function")we=function(){H(Ce)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,ve=ge.port2;ge.port1.onmessage=Ce,we=function(){ve.postMessage(null)}}else we=function(){B(Ce,0)};function de(fe){Y=fe,J||(J=!0,we())}function pe(fe,me){re=B(function(){fe(e.unstable_now())},me)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(fe){fe.callback=null},e.unstable_continueExecution=function(){N||L||(N=!0,de(ee))},e.unstable_forceFrameRate=function(fe){0>fe||125<fe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<fe?Math.floor(1e3/fe):5},e.unstable_getCurrentPriorityLevel=function(){return $},e.unstable_getFirstCallbackNode=function(){return n(x)},e.unstable_next=function(fe){switch($){case 1:case 2:case 3:var me=3;break;default:me=$}var Ie=$;$=me;try{return fe()}finally{$=Ie}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(fe,me){switch(fe){case 1:case 2:case 3:case 4:case 5:break;default:fe=3}var Ie=$;$=fe;try{return me()}finally{$=Ie}},e.unstable_scheduleCallback=function(fe,me,Ie){var Me=e.unstable_now();switch(typeof Ie=="object"&&Ie!==null?(Ie=Ie.delay,Ie=typeof Ie=="number"&&0<Ie?Me+Ie:Me):Ie=Me,fe){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=Ie+Be,fe={id:T++,callback:me,priorityLevel:fe,startTime:Ie,expirationTime:Be,sortIndex:-1},Ie>Me?(fe.sortIndex=Ie,t(S,fe),n(x)===null&&fe===n(S)&&(V?(j(re),re=-1):V=!0,pe(X,Ie-Me))):(fe.sortIndex=Be,t(x,fe),N||L||(N=!0,de(ee))),fe},e.unstable_shouldYield=ce,e.unstable_wrapCallback=function(fe){var me=$;return function(){var Ie=$;$=me;try{return fe.apply(this,arguments)}finally{$=Ie}}}})(fN);hN.exports=fN;var Y7=hN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J7=_,Bs=Y7;function qn(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pN=new Set,P0={};function nf(e,t){tm(e,t),tm(e+"Capture",t)}function tm(e,t){for(P0[e]=t,e=0;e<t.length;e++)pN.add(t[e])}var Qc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zE=Object.prototype.hasOwnProperty,Q7=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,K3={},X3={};function e9(e){return zE.call(X3,e)?!0:zE.call(K3,e)?!1:Q7.test(e)?X3[e]=!0:(K3[e]=!0,!1)}function t9(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function n9(e,t,n,r){if(t===null||typeof t>"u"||t9(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function os(e,t,n,r,s,d,p){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=p}var Ia={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ia[e]=new os(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ia[t]=new os(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ia[e]=new os(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ia[e]=new os(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ia[e]=new os(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ia[e]=new os(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ia[e]=new os(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ia[e]=new os(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ia[e]=new os(e,5,!1,e.toLowerCase(),null,!1,!1)});var dM=/[\-:]([a-z])/g;function hM(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(dM,hM);Ia[t]=new os(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(dM,hM);Ia[t]=new os(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(dM,hM);Ia[t]=new os(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ia[e]=new os(e,1,!1,e.toLowerCase(),null,!1,!1)});Ia.xlinkHref=new os("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ia[e]=new os(e,1,!1,e.toLowerCase(),null,!0,!0)});function fM(e,t,n,r){var s=Ia.hasOwnProperty(t)?Ia[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(n9(t,n,s,r)&&(n=null),r||s===null?e9(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var su=J7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rx=Symbol.for("react.element"),Rp=Symbol.for("react.portal"),Op=Symbol.for("react.fragment"),pM=Symbol.for("react.strict_mode"),LE=Symbol.for("react.profiler"),mN=Symbol.for("react.provider"),gN=Symbol.for("react.context"),mM=Symbol.for("react.forward_ref"),NE=Symbol.for("react.suspense"),FE=Symbol.for("react.suspense_list"),gM=Symbol.for("react.memo"),ld=Symbol.for("react.lazy"),vN=Symbol.for("react.offscreen"),Z3=Symbol.iterator;function Lv(e){return e===null||typeof e!="object"?null:(e=Z3&&e[Z3]||e["@@iterator"],typeof e=="function"?e:null)}var ko=Object.assign,JC;function n0(e){if(JC===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);JC=t&&t[1]||""}return`
`+JC+e}var QC=!1;function e2(e,t){if(!e||QC)return"";QC=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(S){var r=S}Reflect.construct(e,[],t)}else{try{t.call()}catch(S){r=S}e.call(t.prototype)}else{try{throw Error()}catch(S){r=S}e()}}catch(S){if(S&&r&&typeof S.stack=="string"){for(var s=S.stack.split(`
`),d=r.stack.split(`
`),p=s.length-1,i=d.length-1;1<=p&&0<=i&&s[p]!==d[i];)i--;for(;1<=p&&0<=i;p--,i--)if(s[p]!==d[i]){if(p!==1||i!==1)do if(p--,i--,0>i||s[p]!==d[i]){var x=`
`+s[p].replace(" at new "," at ");return e.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",e.displayName)),x}while(1<=p&&0<=i);break}}}finally{QC=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?n0(e):""}function r9(e){switch(e.tag){case 5:return n0(e.type);case 16:return n0("Lazy");case 13:return n0("Suspense");case 19:return n0("SuspenseList");case 0:case 2:case 15:return e=e2(e.type,!1),e;case 11:return e=e2(e.type.render,!1),e;case 1:return e=e2(e.type,!0),e;default:return""}}function BE(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Op:return"Fragment";case Rp:return"Portal";case LE:return"Profiler";case pM:return"StrictMode";case NE:return"Suspense";case FE:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case gN:return(e.displayName||"Context")+".Consumer";case mN:return(e._context.displayName||"Context")+".Provider";case mM:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gM:return t=e.displayName||null,t!==null?t:BE(e.type)||"Memo";case ld:t=e._payload,e=e._init;try{return BE(e(t))}catch{}}return null}function i9(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return BE(t);case 8:return t===pM?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Rd(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function yN(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function o9(e){var t=yN(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,d=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(p){r=""+p,d.call(this,p)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(p){r=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ox(e){e._valueTracker||(e._valueTracker=o9(e))}function _N(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=yN(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ub(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function jE(e,t){var n=t.checked;return ko({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Y3(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Rd(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function xN(e,t){t=t.checked,t!=null&&fM(e,"checked",t,!1)}function VE(e,t){xN(e,t);var n=Rd(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?HE(e,t.type,n):t.hasOwnProperty("defaultValue")&&HE(e,t.type,Rd(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function J3(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function HE(e,t,n){(t!=="number"||Ub(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var r0=Array.isArray;function Wp(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Rd(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function UE(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(qn(91));return ko({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Q3(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(qn(92));if(r0(n)){if(1<n.length)throw Error(qn(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Rd(n)}}function bN(e,t){var n=Rd(t.value),r=Rd(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function eD(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function wN(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function WE(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?wN(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ax,SN=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ax=Ax||document.createElement("div"),Ax.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ax.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function R0(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var d0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},a9=["Webkit","ms","Moz","O"];Object.keys(d0).forEach(function(e){a9.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),d0[t]=d0[e]})});function CN(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||d0.hasOwnProperty(e)&&d0[e]?(""+t).trim():t+"px"}function EN(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=CN(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var s9=ko({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function GE(e,t){if(t){if(s9[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(qn(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(qn(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(qn(61))}if(t.style!=null&&typeof t.style!="object")throw Error(qn(62))}}function qE(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var KE=null;function vM(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var XE=null,Gp=null,qp=null;function tD(e){if(e=yy(e)){if(typeof XE!="function")throw Error(qn(280));var t=e.stateNode;t&&(t=W1(t),XE(e.stateNode,e.type,t))}}function TN(e){Gp?qp?qp.push(e):qp=[e]:Gp=e}function IN(){if(Gp){var e=Gp,t=qp;if(qp=Gp=null,tD(e),t)for(e=0;e<t.length;e++)tD(t[e])}}function MN(e,t){return e(t)}function PN(){}var t2=!1;function RN(e,t,n){if(t2)return e(t,n);t2=!0;try{return MN(e,t,n)}finally{t2=!1,(Gp!==null||qp!==null)&&(PN(),IN())}}function O0(e,t){var n=e.stateNode;if(n===null)return null;var r=W1(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(qn(231,t,typeof n));return n}var ZE=!1;if(Qc)try{var Nv={};Object.defineProperty(Nv,"passive",{get:function(){ZE=!0}}),window.addEventListener("test",Nv,Nv),window.removeEventListener("test",Nv,Nv)}catch{ZE=!1}function l9(e,t,n,r,s,d,p,i,x){var S=Array.prototype.slice.call(arguments,3);try{t.apply(n,S)}catch(T){this.onError(T)}}var h0=!1,Wb=null,Gb=!1,YE=null,c9={onError:function(e){h0=!0,Wb=e}};function u9(e,t,n,r,s,d,p,i,x){h0=!1,Wb=null,l9.apply(c9,arguments)}function d9(e,t,n,r,s,d,p,i,x){if(u9.apply(this,arguments),h0){if(h0){var S=Wb;h0=!1,Wb=null}else throw Error(qn(198));Gb||(Gb=!0,YE=S)}}function rf(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ON(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function nD(e){if(rf(e)!==e)throw Error(qn(188))}function h9(e){var t=e.alternate;if(!t){if(t=rf(e),t===null)throw Error(qn(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var d=s.alternate;if(d===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===d.child){for(d=s.child;d;){if(d===n)return nD(s),e;if(d===r)return nD(s),t;d=d.sibling}throw Error(qn(188))}if(n.return!==r.return)n=s,r=d;else{for(var p=!1,i=s.child;i;){if(i===n){p=!0,n=s,r=d;break}if(i===r){p=!0,r=s,n=d;break}i=i.sibling}if(!p){for(i=d.child;i;){if(i===n){p=!0,n=d,r=s;break}if(i===r){p=!0,r=d,n=s;break}i=i.sibling}if(!p)throw Error(qn(189))}}if(n.alternate!==r)throw Error(qn(190))}if(n.tag!==3)throw Error(qn(188));return n.stateNode.current===n?e:t}function AN(e){return e=h9(e),e!==null?DN(e):null}function DN(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=DN(e);if(t!==null)return t;e=e.sibling}return null}var $N=Bs.unstable_scheduleCallback,rD=Bs.unstable_cancelCallback,f9=Bs.unstable_shouldYield,p9=Bs.unstable_requestPaint,Go=Bs.unstable_now,m9=Bs.unstable_getCurrentPriorityLevel,yM=Bs.unstable_ImmediatePriority,kN=Bs.unstable_UserBlockingPriority,qb=Bs.unstable_NormalPriority,g9=Bs.unstable_LowPriority,zN=Bs.unstable_IdlePriority,j1=null,vc=null;function v9(e){if(vc&&typeof vc.onCommitFiberRoot=="function")try{vc.onCommitFiberRoot(j1,e,void 0,(e.current.flags&128)===128)}catch{}}var Fl=Math.clz32?Math.clz32:x9,y9=Math.log,_9=Math.LN2;function x9(e){return e>>>=0,e===0?32:31-(y9(e)/_9|0)|0}var Dx=64,$x=4194304;function i0(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Kb(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,d=e.pingedLanes,p=n&268435455;if(p!==0){var i=p&~s;i!==0?r=i0(i):(d&=p,d!==0&&(r=i0(d)))}else p=n&~s,p!==0?r=i0(p):d!==0&&(r=i0(d));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,d=t&-t,s>=d||s===16&&(d&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Fl(t),s=1<<n,r|=e[n],t&=~s;return r}function b9(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function w9(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,d=e.pendingLanes;0<d;){var p=31-Fl(d),i=1<<p,x=s[p];x===-1?(!(i&n)||i&r)&&(s[p]=b9(i,t)):x<=t&&(e.expiredLanes|=i),d&=~i}}function JE(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function LN(){var e=Dx;return Dx<<=1,!(Dx&4194240)&&(Dx=64),e}function n2(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gy(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Fl(t),e[t]=n}function S9(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Fl(n),d=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~d}}function _M(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Fl(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var no=0;function NN(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var FN,xM,BN,jN,VN,QE=!1,kx=[],xd=null,bd=null,wd=null,A0=new Map,D0=new Map,dd=[],C9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iD(e,t){switch(e){case"focusin":case"focusout":xd=null;break;case"dragenter":case"dragleave":bd=null;break;case"mouseover":case"mouseout":wd=null;break;case"pointerover":case"pointerout":A0.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":D0.delete(t.pointerId)}}function Fv(e,t,n,r,s,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:d,targetContainers:[s]},t!==null&&(t=yy(t),t!==null&&xM(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function E9(e,t,n,r,s){switch(t){case"focusin":return xd=Fv(xd,e,t,n,r,s),!0;case"dragenter":return bd=Fv(bd,e,t,n,r,s),!0;case"mouseover":return wd=Fv(wd,e,t,n,r,s),!0;case"pointerover":var d=s.pointerId;return A0.set(d,Fv(A0.get(d)||null,e,t,n,r,s)),!0;case"gotpointercapture":return d=s.pointerId,D0.set(d,Fv(D0.get(d)||null,e,t,n,r,s)),!0}return!1}function HN(e){var t=zh(e.target);if(t!==null){var n=rf(t);if(n!==null){if(t=n.tag,t===13){if(t=ON(n),t!==null){e.blockedOn=t,VN(e.priority,function(){BN(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _b(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=eT(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);KE=r,n.target.dispatchEvent(r),KE=null}else return t=yy(n),t!==null&&xM(t),e.blockedOn=n,!1;t.shift()}return!0}function oD(e,t,n){_b(e)&&n.delete(t)}function T9(){QE=!1,xd!==null&&_b(xd)&&(xd=null),bd!==null&&_b(bd)&&(bd=null),wd!==null&&_b(wd)&&(wd=null),A0.forEach(oD),D0.forEach(oD)}function Bv(e,t){e.blockedOn===t&&(e.blockedOn=null,QE||(QE=!0,Bs.unstable_scheduleCallback(Bs.unstable_NormalPriority,T9)))}function $0(e){function t(s){return Bv(s,e)}if(0<kx.length){Bv(kx[0],e);for(var n=1;n<kx.length;n++){var r=kx[n];r.blockedOn===e&&(r.blockedOn=null)}}for(xd!==null&&Bv(xd,e),bd!==null&&Bv(bd,e),wd!==null&&Bv(wd,e),A0.forEach(t),D0.forEach(t),n=0;n<dd.length;n++)r=dd[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<dd.length&&(n=dd[0],n.blockedOn===null);)HN(n),n.blockedOn===null&&dd.shift()}var Kp=su.ReactCurrentBatchConfig,Xb=!0;function I9(e,t,n,r){var s=no,d=Kp.transition;Kp.transition=null;try{no=1,bM(e,t,n,r)}finally{no=s,Kp.transition=d}}function M9(e,t,n,r){var s=no,d=Kp.transition;Kp.transition=null;try{no=4,bM(e,t,n,r)}finally{no=s,Kp.transition=d}}function bM(e,t,n,r){if(Xb){var s=eT(e,t,n,r);if(s===null)h2(e,t,r,Zb,n),iD(e,r);else if(E9(s,e,t,n,r))r.stopPropagation();else if(iD(e,r),t&4&&-1<C9.indexOf(e)){for(;s!==null;){var d=yy(s);if(d!==null&&FN(d),d=eT(e,t,n,r),d===null&&h2(e,t,r,Zb,n),d===s)break;s=d}s!==null&&r.stopPropagation()}else h2(e,t,r,null,n)}}var Zb=null;function eT(e,t,n,r){if(Zb=null,e=vM(r),e=zh(e),e!==null)if(t=rf(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ON(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zb=e,null}function UN(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(m9()){case yM:return 1;case kN:return 4;case qb:case g9:return 16;case zN:return 536870912;default:return 16}default:return 16}}var fd=null,wM=null,xb=null;function WN(){if(xb)return xb;var e,t=wM,n=t.length,r,s="value"in fd?fd.value:fd.textContent,d=s.length;for(e=0;e<n&&t[e]===s[e];e++);var p=n-e;for(r=1;r<=p&&t[n-r]===s[d-r];r++);return xb=s.slice(e,1<r?1-r:void 0)}function bb(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function zx(){return!0}function aD(){return!1}function Hs(e){function t(n,r,s,d,p){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=d,this.target=p,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(d):d[i]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?zx:aD,this.isPropagationStopped=aD,this}return ko(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zx)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zx)},persist:function(){},isPersistent:zx}),t}var Em={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},SM=Hs(Em),vy=ko({},Em,{view:0,detail:0}),P9=Hs(vy),r2,i2,jv,V1=ko({},vy,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:CM,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==jv&&(jv&&e.type==="mousemove"?(r2=e.screenX-jv.screenX,i2=e.screenY-jv.screenY):i2=r2=0,jv=e),r2)},movementY:function(e){return"movementY"in e?e.movementY:i2}}),sD=Hs(V1),R9=ko({},V1,{dataTransfer:0}),O9=Hs(R9),A9=ko({},vy,{relatedTarget:0}),o2=Hs(A9),D9=ko({},Em,{animationName:0,elapsedTime:0,pseudoElement:0}),$9=Hs(D9),k9=ko({},Em,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),z9=Hs(k9),L9=ko({},Em,{data:0}),lD=Hs(L9),N9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},F9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},B9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function j9(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=B9[e])?!!t[e]:!1}function CM(){return j9}var V9=ko({},vy,{key:function(e){if(e.key){var t=N9[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=bb(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?F9[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:CM,charCode:function(e){return e.type==="keypress"?bb(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bb(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),H9=Hs(V9),U9=ko({},V1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cD=Hs(U9),W9=ko({},vy,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:CM}),G9=Hs(W9),q9=ko({},Em,{propertyName:0,elapsedTime:0,pseudoElement:0}),K9=Hs(q9),X9=ko({},V1,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Z9=Hs(X9),Y9=[9,13,27,32],EM=Qc&&"CompositionEvent"in window,f0=null;Qc&&"documentMode"in document&&(f0=document.documentMode);var J9=Qc&&"TextEvent"in window&&!f0,GN=Qc&&(!EM||f0&&8<f0&&11>=f0),uD=" ",dD=!1;function qN(e,t){switch(e){case"keyup":return Y9.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KN(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ap=!1;function Q9(e,t){switch(e){case"compositionend":return KN(t);case"keypress":return t.which!==32?null:(dD=!0,uD);case"textInput":return e=t.data,e===uD&&dD?null:e;default:return null}}function eW(e,t){if(Ap)return e==="compositionend"||!EM&&qN(e,t)?(e=WN(),xb=wM=fd=null,Ap=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return GN&&t.locale!=="ko"?null:t.data;default:return null}}var tW={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hD(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!tW[e.type]:t==="textarea"}function XN(e,t,n,r){TN(r),t=Yb(t,"onChange"),0<t.length&&(n=new SM("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var p0=null,k0=null;function nW(e){a4(e,0)}function H1(e){var t=kp(e);if(_N(t))return e}function rW(e,t){if(e==="change")return t}var ZN=!1;if(Qc){var a2;if(Qc){var s2="oninput"in document;if(!s2){var fD=document.createElement("div");fD.setAttribute("oninput","return;"),s2=typeof fD.oninput=="function"}a2=s2}else a2=!1;ZN=a2&&(!document.documentMode||9<document.documentMode)}function pD(){p0&&(p0.detachEvent("onpropertychange",YN),k0=p0=null)}function YN(e){if(e.propertyName==="value"&&H1(k0)){var t=[];XN(t,k0,e,vM(e)),RN(nW,t)}}function iW(e,t,n){e==="focusin"?(pD(),p0=t,k0=n,p0.attachEvent("onpropertychange",YN)):e==="focusout"&&pD()}function oW(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return H1(k0)}function aW(e,t){if(e==="click")return H1(t)}function sW(e,t){if(e==="input"||e==="change")return H1(t)}function lW(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ul=typeof Object.is=="function"?Object.is:lW;function z0(e,t){if(Ul(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!zE.call(t,s)||!Ul(e[s],t[s]))return!1}return!0}function mD(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gD(e,t){var n=mD(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mD(n)}}function JN(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?JN(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function QN(){for(var e=window,t=Ub();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ub(e.document)}return t}function TM(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function cW(e){var t=QN(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&JN(n.ownerDocument.documentElement,n)){if(r!==null&&TM(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,d=Math.min(r.start,s);r=r.end===void 0?d:Math.min(r.end,s),!e.extend&&d>r&&(s=r,r=d,d=s),s=gD(n,d);var p=gD(n,r);s&&p&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==p.node||e.focusOffset!==p.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),d>r?(e.addRange(t),e.extend(p.node,p.offset)):(t.setEnd(p.node,p.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var uW=Qc&&"documentMode"in document&&11>=document.documentMode,Dp=null,tT=null,m0=null,nT=!1;function vD(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nT||Dp==null||Dp!==Ub(r)||(r=Dp,"selectionStart"in r&&TM(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),m0&&z0(m0,r)||(m0=r,r=Yb(tT,"onSelect"),0<r.length&&(t=new SM("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Dp)))}function Lx(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var $p={animationend:Lx("Animation","AnimationEnd"),animationiteration:Lx("Animation","AnimationIteration"),animationstart:Lx("Animation","AnimationStart"),transitionend:Lx("Transition","TransitionEnd")},l2={},e4={};Qc&&(e4=document.createElement("div").style,"AnimationEvent"in window||(delete $p.animationend.animation,delete $p.animationiteration.animation,delete $p.animationstart.animation),"TransitionEvent"in window||delete $p.transitionend.transition);function U1(e){if(l2[e])return l2[e];if(!$p[e])return e;var t=$p[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in e4)return l2[e]=t[n];return e}var t4=U1("animationend"),n4=U1("animationiteration"),r4=U1("animationstart"),i4=U1("transitionend"),o4=new Map,yD="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ld(e,t){o4.set(e,t),nf(t,[e])}for(var c2=0;c2<yD.length;c2++){var u2=yD[c2],dW=u2.toLowerCase(),hW=u2[0].toUpperCase()+u2.slice(1);Ld(dW,"on"+hW)}Ld(t4,"onAnimationEnd");Ld(n4,"onAnimationIteration");Ld(r4,"onAnimationStart");Ld("dblclick","onDoubleClick");Ld("focusin","onFocus");Ld("focusout","onBlur");Ld(i4,"onTransitionEnd");tm("onMouseEnter",["mouseout","mouseover"]);tm("onMouseLeave",["mouseout","mouseover"]);tm("onPointerEnter",["pointerout","pointerover"]);tm("onPointerLeave",["pointerout","pointerover"]);nf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nf("onBeforeInput",["compositionend","keypress","textInput","paste"]);nf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var o0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fW=new Set("cancel close invalid load scroll toggle".split(" ").concat(o0));function _D(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,d9(r,t,void 0,e),e.currentTarget=null}function a4(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var d=void 0;if(t)for(var p=r.length-1;0<=p;p--){var i=r[p],x=i.instance,S=i.currentTarget;if(i=i.listener,x!==d&&s.isPropagationStopped())break e;_D(s,i,S),d=x}else for(p=0;p<r.length;p++){if(i=r[p],x=i.instance,S=i.currentTarget,i=i.listener,x!==d&&s.isPropagationStopped())break e;_D(s,i,S),d=x}}}if(Gb)throw e=YE,Gb=!1,YE=null,e}function wo(e,t){var n=t[sT];n===void 0&&(n=t[sT]=new Set);var r=e+"__bubble";n.has(r)||(s4(t,e,2,!1),n.add(r))}function d2(e,t,n){var r=0;t&&(r|=4),s4(n,e,r,t)}var Nx="_reactListening"+Math.random().toString(36).slice(2);function L0(e){if(!e[Nx]){e[Nx]=!0,pN.forEach(function(n){n!=="selectionchange"&&(fW.has(n)||d2(n,!1,e),d2(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Nx]||(t[Nx]=!0,d2("selectionchange",!1,t))}}function s4(e,t,n,r){switch(UN(t)){case 1:var s=I9;break;case 4:s=M9;break;default:s=bM}n=s.bind(null,t,n,e),s=void 0,!ZE||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function h2(e,t,n,r,s){var d=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var p=r.tag;if(p===3||p===4){var i=r.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(p===4)for(p=r.return;p!==null;){var x=p.tag;if((x===3||x===4)&&(x=p.stateNode.containerInfo,x===s||x.nodeType===8&&x.parentNode===s))return;p=p.return}for(;i!==null;){if(p=zh(i),p===null)return;if(x=p.tag,x===5||x===6){r=d=p;continue e}i=i.parentNode}}r=r.return}RN(function(){var S=d,T=vM(n),M=[];e:{var $=o4.get(e);if($!==void 0){var L=SM,N=e;switch(e){case"keypress":if(bb(n)===0)break e;case"keydown":case"keyup":L=H9;break;case"focusin":N="focus",L=o2;break;case"focusout":N="blur",L=o2;break;case"beforeblur":case"afterblur":L=o2;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=sD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=O9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=G9;break;case t4:case n4:case r4:L=$9;break;case i4:L=K9;break;case"scroll":L=P9;break;case"wheel":L=Z9;break;case"copy":case"cut":case"paste":L=z9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=cD}var V=(t&4)!==0,B=!V&&e==="scroll",j=V?$!==null?$+"Capture":null:$;V=[];for(var H=S,W;H!==null;){W=H;var X=W.stateNode;if(W.tag===5&&X!==null&&(W=X,j!==null&&(X=O0(H,j),X!=null&&V.push(N0(H,X,W)))),B)break;H=H.return}0<V.length&&($=new L($,N,null,n,T),M.push({event:$,listeners:V}))}}if(!(t&7)){e:{if($=e==="mouseover"||e==="pointerover",L=e==="mouseout"||e==="pointerout",$&&n!==KE&&(N=n.relatedTarget||n.fromElement)&&(zh(N)||N[eu]))break e;if((L||$)&&($=T.window===T?T:($=T.ownerDocument)?$.defaultView||$.parentWindow:window,L?(N=n.relatedTarget||n.toElement,L=S,N=N?zh(N):null,N!==null&&(B=rf(N),N!==B||N.tag!==5&&N.tag!==6)&&(N=null)):(L=null,N=S),L!==N)){if(V=sD,X="onMouseLeave",j="onMouseEnter",H="mouse",(e==="pointerout"||e==="pointerover")&&(V=cD,X="onPointerLeave",j="onPointerEnter",H="pointer"),B=L==null?$:kp(L),W=N==null?$:kp(N),$=new V(X,H+"leave",L,n,T),$.target=B,$.relatedTarget=W,X=null,zh(T)===S&&(V=new V(j,H+"enter",N,n,T),V.target=W,V.relatedTarget=B,X=V),B=X,L&&N)t:{for(V=L,j=N,H=0,W=V;W;W=yp(W))H++;for(W=0,X=j;X;X=yp(X))W++;for(;0<H-W;)V=yp(V),H--;for(;0<W-H;)j=yp(j),W--;for(;H--;){if(V===j||j!==null&&V===j.alternate)break t;V=yp(V),j=yp(j)}V=null}else V=null;L!==null&&xD(M,$,L,V,!1),N!==null&&B!==null&&xD(M,B,N,V,!0)}}e:{if($=S?kp(S):window,L=$.nodeName&&$.nodeName.toLowerCase(),L==="select"||L==="input"&&$.type==="file")var ee=rW;else if(hD($))if(ZN)ee=sW;else{ee=oW;var J=iW}else(L=$.nodeName)&&L.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(ee=aW);if(ee&&(ee=ee(e,S))){XN(M,ee,n,T);break e}J&&J(e,$,S),e==="focusout"&&(J=$._wrapperState)&&J.controlled&&$.type==="number"&&HE($,"number",$.value)}switch(J=S?kp(S):window,e){case"focusin":(hD(J)||J.contentEditable==="true")&&(Dp=J,tT=S,m0=null);break;case"focusout":m0=tT=Dp=null;break;case"mousedown":nT=!0;break;case"contextmenu":case"mouseup":case"dragend":nT=!1,vD(M,n,T);break;case"selectionchange":if(uW)break;case"keydown":case"keyup":vD(M,n,T)}var Y;if(EM)e:{switch(e){case"compositionstart":var re="onCompositionStart";break e;case"compositionend":re="onCompositionEnd";break e;case"compositionupdate":re="onCompositionUpdate";break e}re=void 0}else Ap?qN(e,n)&&(re="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(re="onCompositionStart");re&&(GN&&n.locale!=="ko"&&(Ap||re!=="onCompositionStart"?re==="onCompositionEnd"&&Ap&&(Y=WN()):(fd=T,wM="value"in fd?fd.value:fd.textContent,Ap=!0)),J=Yb(S,re),0<J.length&&(re=new lD(re,e,null,n,T),M.push({event:re,listeners:J}),Y?re.data=Y:(Y=KN(n),Y!==null&&(re.data=Y)))),(Y=J9?Q9(e,n):eW(e,n))&&(S=Yb(S,"onBeforeInput"),0<S.length&&(T=new lD("onBeforeInput","beforeinput",null,n,T),M.push({event:T,listeners:S}),T.data=Y))}a4(M,t)})}function N0(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yb(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,d=s.stateNode;s.tag===5&&d!==null&&(s=d,d=O0(e,n),d!=null&&r.unshift(N0(e,d,s)),d=O0(e,t),d!=null&&r.push(N0(e,d,s))),e=e.return}return r}function yp(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function xD(e,t,n,r,s){for(var d=t._reactName,p=[];n!==null&&n!==r;){var i=n,x=i.alternate,S=i.stateNode;if(x!==null&&x===r)break;i.tag===5&&S!==null&&(i=S,s?(x=O0(n,d),x!=null&&p.unshift(N0(n,x,i))):s||(x=O0(n,d),x!=null&&p.push(N0(n,x,i)))),n=n.return}p.length!==0&&e.push({event:t,listeners:p})}var pW=/\r\n?/g,mW=/\u0000|\uFFFD/g;function bD(e){return(typeof e=="string"?e:""+e).replace(pW,`
`).replace(mW,"")}function Fx(e,t,n){if(t=bD(t),bD(e)!==t&&n)throw Error(qn(425))}function Jb(){}var rT=null,iT=null;function oT(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var aT=typeof setTimeout=="function"?setTimeout:void 0,gW=typeof clearTimeout=="function"?clearTimeout:void 0,wD=typeof Promise=="function"?Promise:void 0,vW=typeof queueMicrotask=="function"?queueMicrotask:typeof wD<"u"?function(e){return wD.resolve(null).then(e).catch(yW)}:aT;function yW(e){setTimeout(function(){throw e})}function f2(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),$0(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);$0(t)}function Sd(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function SD(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Tm=Math.random().toString(36).slice(2),gc="__reactFiber$"+Tm,F0="__reactProps$"+Tm,eu="__reactContainer$"+Tm,sT="__reactEvents$"+Tm,_W="__reactListeners$"+Tm,xW="__reactHandles$"+Tm;function zh(e){var t=e[gc];if(t)return t;for(var n=e.parentNode;n;){if(t=n[eu]||n[gc]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=SD(e);e!==null;){if(n=e[gc])return n;e=SD(e)}return t}e=n,n=e.parentNode}return null}function yy(e){return e=e[gc]||e[eu],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function kp(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(qn(33))}function W1(e){return e[F0]||null}var lT=[],zp=-1;function Nd(e){return{current:e}}function So(e){0>zp||(e.current=lT[zp],lT[zp]=null,zp--)}function mo(e,t){zp++,lT[zp]=e.current,e.current=t}var Od={},Va=Nd(Od),gs=Nd(!1),Kh=Od;function nm(e,t){var n=e.type.contextTypes;if(!n)return Od;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},d;for(d in n)s[d]=t[d];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function vs(e){return e=e.childContextTypes,e!=null}function Qb(){So(gs),So(Va)}function CD(e,t,n){if(Va.current!==Od)throw Error(qn(168));mo(Va,t),mo(gs,n)}function l4(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(qn(108,i9(e)||"Unknown",s));return ko({},n,r)}function e1(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Od,Kh=Va.current,mo(Va,e),mo(gs,gs.current),!0}function ED(e,t,n){var r=e.stateNode;if(!r)throw Error(qn(169));n?(e=l4(e,t,Kh),r.__reactInternalMemoizedMergedChildContext=e,So(gs),So(Va),mo(Va,e)):So(gs),mo(gs,n)}var Gc=null,G1=!1,p2=!1;function c4(e){Gc===null?Gc=[e]:Gc.push(e)}function bW(e){G1=!0,c4(e)}function Fd(){if(!p2&&Gc!==null){p2=!0;var e=0,t=no;try{var n=Gc;for(no=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Gc=null,G1=!1}catch(s){throw Gc!==null&&(Gc=Gc.slice(e+1)),$N(yM,Fd),s}finally{no=t,p2=!1}}return null}var Lp=[],Np=0,t1=null,n1=0,rl=[],il=0,Xh=null,Kc=1,Xc="";function Dh(e,t){Lp[Np++]=n1,Lp[Np++]=t1,t1=e,n1=t}function u4(e,t,n){rl[il++]=Kc,rl[il++]=Xc,rl[il++]=Xh,Xh=e;var r=Kc;e=Xc;var s=32-Fl(r)-1;r&=~(1<<s),n+=1;var d=32-Fl(t)+s;if(30<d){var p=s-s%5;d=(r&(1<<p)-1).toString(32),r>>=p,s-=p,Kc=1<<32-Fl(t)+s|n<<s|r,Xc=d+e}else Kc=1<<d|n<<s|r,Xc=e}function IM(e){e.return!==null&&(Dh(e,1),u4(e,1,0))}function MM(e){for(;e===t1;)t1=Lp[--Np],Lp[Np]=null,n1=Lp[--Np],Lp[Np]=null;for(;e===Xh;)Xh=rl[--il],rl[il]=null,Xc=rl[--il],rl[il]=null,Kc=rl[--il],rl[il]=null}var Ns=null,ks=null,Io=!1,Nl=null;function d4(e,t){var n=ol(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function TD(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ns=e,ks=Sd(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ns=e,ks=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Xh!==null?{id:Kc,overflow:Xc}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ol(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ns=e,ks=null,!0):!1;default:return!1}}function cT(e){return(e.mode&1)!==0&&(e.flags&128)===0}function uT(e){if(Io){var t=ks;if(t){var n=t;if(!TD(e,t)){if(cT(e))throw Error(qn(418));t=Sd(n.nextSibling);var r=Ns;t&&TD(e,t)?d4(r,n):(e.flags=e.flags&-4097|2,Io=!1,Ns=e)}}else{if(cT(e))throw Error(qn(418));e.flags=e.flags&-4097|2,Io=!1,Ns=e}}}function ID(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ns=e}function Bx(e){if(e!==Ns)return!1;if(!Io)return ID(e),Io=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!oT(e.type,e.memoizedProps)),t&&(t=ks)){if(cT(e))throw h4(),Error(qn(418));for(;t;)d4(e,t),t=Sd(t.nextSibling)}if(ID(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(qn(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ks=Sd(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ks=null}}else ks=Ns?Sd(e.stateNode.nextSibling):null;return!0}function h4(){for(var e=ks;e;)e=Sd(e.nextSibling)}function rm(){ks=Ns=null,Io=!1}function PM(e){Nl===null?Nl=[e]:Nl.push(e)}var wW=su.ReactCurrentBatchConfig;function Vv(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(qn(309));var r=n.stateNode}if(!r)throw Error(qn(147,e));var s=r,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(p){var i=s.refs;p===null?delete i[d]:i[d]=p},t._stringRef=d,t)}if(typeof e!="string")throw Error(qn(284));if(!n._owner)throw Error(qn(290,e))}return e}function jx(e,t){throw e=Object.prototype.toString.call(t),Error(qn(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function MD(e){var t=e._init;return t(e._payload)}function f4(e){function t(j,H){if(e){var W=j.deletions;W===null?(j.deletions=[H],j.flags|=16):W.push(H)}}function n(j,H){if(!e)return null;for(;H!==null;)t(j,H),H=H.sibling;return null}function r(j,H){for(j=new Map;H!==null;)H.key!==null?j.set(H.key,H):j.set(H.index,H),H=H.sibling;return j}function s(j,H){return j=Id(j,H),j.index=0,j.sibling=null,j}function d(j,H,W){return j.index=W,e?(W=j.alternate,W!==null?(W=W.index,W<H?(j.flags|=2,H):W):(j.flags|=2,H)):(j.flags|=1048576,H)}function p(j){return e&&j.alternate===null&&(j.flags|=2),j}function i(j,H,W,X){return H===null||H.tag!==6?(H=b2(W,j.mode,X),H.return=j,H):(H=s(H,W),H.return=j,H)}function x(j,H,W,X){var ee=W.type;return ee===Op?T(j,H,W.props.children,X,W.key):H!==null&&(H.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===ld&&MD(ee)===H.type)?(X=s(H,W.props),X.ref=Vv(j,H,W),X.return=j,X):(X=Mb(W.type,W.key,W.props,null,j.mode,X),X.ref=Vv(j,H,W),X.return=j,X)}function S(j,H,W,X){return H===null||H.tag!==4||H.stateNode.containerInfo!==W.containerInfo||H.stateNode.implementation!==W.implementation?(H=w2(W,j.mode,X),H.return=j,H):(H=s(H,W.children||[]),H.return=j,H)}function T(j,H,W,X,ee){return H===null||H.tag!==7?(H=Wh(W,j.mode,X,ee),H.return=j,H):(H=s(H,W),H.return=j,H)}function M(j,H,W){if(typeof H=="string"&&H!==""||typeof H=="number")return H=b2(""+H,j.mode,W),H.return=j,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Rx:return W=Mb(H.type,H.key,H.props,null,j.mode,W),W.ref=Vv(j,null,H),W.return=j,W;case Rp:return H=w2(H,j.mode,W),H.return=j,H;case ld:var X=H._init;return M(j,X(H._payload),W)}if(r0(H)||Lv(H))return H=Wh(H,j.mode,W,null),H.return=j,H;jx(j,H)}return null}function $(j,H,W,X){var ee=H!==null?H.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return ee!==null?null:i(j,H,""+W,X);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case Rx:return W.key===ee?x(j,H,W,X):null;case Rp:return W.key===ee?S(j,H,W,X):null;case ld:return ee=W._init,$(j,H,ee(W._payload),X)}if(r0(W)||Lv(W))return ee!==null?null:T(j,H,W,X,null);jx(j,W)}return null}function L(j,H,W,X,ee){if(typeof X=="string"&&X!==""||typeof X=="number")return j=j.get(W)||null,i(H,j,""+X,ee);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case Rx:return j=j.get(X.key===null?W:X.key)||null,x(H,j,X,ee);case Rp:return j=j.get(X.key===null?W:X.key)||null,S(H,j,X,ee);case ld:var J=X._init;return L(j,H,W,J(X._payload),ee)}if(r0(X)||Lv(X))return j=j.get(W)||null,T(H,j,X,ee,null);jx(H,X)}return null}function N(j,H,W,X){for(var ee=null,J=null,Y=H,re=H=0,se=null;Y!==null&&re<W.length;re++){Y.index>re?(se=Y,Y=null):se=Y.sibling;var ae=$(j,Y,W[re],X);if(ae===null){Y===null&&(Y=se);break}e&&Y&&ae.alternate===null&&t(j,Y),H=d(ae,H,re),J===null?ee=ae:J.sibling=ae,J=ae,Y=se}if(re===W.length)return n(j,Y),Io&&Dh(j,re),ee;if(Y===null){for(;re<W.length;re++)Y=M(j,W[re],X),Y!==null&&(H=d(Y,H,re),J===null?ee=Y:J.sibling=Y,J=Y);return Io&&Dh(j,re),ee}for(Y=r(j,Y);re<W.length;re++)se=L(Y,j,re,W[re],X),se!==null&&(e&&se.alternate!==null&&Y.delete(se.key===null?re:se.key),H=d(se,H,re),J===null?ee=se:J.sibling=se,J=se);return e&&Y.forEach(function(ce){return t(j,ce)}),Io&&Dh(j,re),ee}function V(j,H,W,X){var ee=Lv(W);if(typeof ee!="function")throw Error(qn(150));if(W=ee.call(W),W==null)throw Error(qn(151));for(var J=ee=null,Y=H,re=H=0,se=null,ae=W.next();Y!==null&&!ae.done;re++,ae=W.next()){Y.index>re?(se=Y,Y=null):se=Y.sibling;var ce=$(j,Y,ae.value,X);if(ce===null){Y===null&&(Y=se);break}e&&Y&&ce.alternate===null&&t(j,Y),H=d(ce,H,re),J===null?ee=ce:J.sibling=ce,J=ce,Y=se}if(ae.done)return n(j,Y),Io&&Dh(j,re),ee;if(Y===null){for(;!ae.done;re++,ae=W.next())ae=M(j,ae.value,X),ae!==null&&(H=d(ae,H,re),J===null?ee=ae:J.sibling=ae,J=ae);return Io&&Dh(j,re),ee}for(Y=r(j,Y);!ae.done;re++,ae=W.next())ae=L(Y,j,re,ae.value,X),ae!==null&&(e&&ae.alternate!==null&&Y.delete(ae.key===null?re:ae.key),H=d(ae,H,re),J===null?ee=ae:J.sibling=ae,J=ae);return e&&Y.forEach(function(Ce){return t(j,Ce)}),Io&&Dh(j,re),ee}function B(j,H,W,X){if(typeof W=="object"&&W!==null&&W.type===Op&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case Rx:e:{for(var ee=W.key,J=H;J!==null;){if(J.key===ee){if(ee=W.type,ee===Op){if(J.tag===7){n(j,J.sibling),H=s(J,W.props.children),H.return=j,j=H;break e}}else if(J.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===ld&&MD(ee)===J.type){n(j,J.sibling),H=s(J,W.props),H.ref=Vv(j,J,W),H.return=j,j=H;break e}n(j,J);break}else t(j,J);J=J.sibling}W.type===Op?(H=Wh(W.props.children,j.mode,X,W.key),H.return=j,j=H):(X=Mb(W.type,W.key,W.props,null,j.mode,X),X.ref=Vv(j,H,W),X.return=j,j=X)}return p(j);case Rp:e:{for(J=W.key;H!==null;){if(H.key===J)if(H.tag===4&&H.stateNode.containerInfo===W.containerInfo&&H.stateNode.implementation===W.implementation){n(j,H.sibling),H=s(H,W.children||[]),H.return=j,j=H;break e}else{n(j,H);break}else t(j,H);H=H.sibling}H=w2(W,j.mode,X),H.return=j,j=H}return p(j);case ld:return J=W._init,B(j,H,J(W._payload),X)}if(r0(W))return N(j,H,W,X);if(Lv(W))return V(j,H,W,X);jx(j,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,H!==null&&H.tag===6?(n(j,H.sibling),H=s(H,W),H.return=j,j=H):(n(j,H),H=b2(W,j.mode,X),H.return=j,j=H),p(j)):n(j,H)}return B}var im=f4(!0),p4=f4(!1),r1=Nd(null),i1=null,Fp=null,RM=null;function OM(){RM=Fp=i1=null}function AM(e){var t=r1.current;So(r1),e._currentValue=t}function dT(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Xp(e,t){i1=e,RM=Fp=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ms=!0),e.firstContext=null)}function sl(e){var t=e._currentValue;if(RM!==e)if(e={context:e,memoizedValue:t,next:null},Fp===null){if(i1===null)throw Error(qn(308));Fp=e,i1.dependencies={lanes:0,firstContext:e}}else Fp=Fp.next=e;return t}var Lh=null;function DM(e){Lh===null?Lh=[e]:Lh.push(e)}function m4(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,DM(t)):(n.next=s.next,s.next=n),t.interleaved=n,tu(e,r)}function tu(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var cd=!1;function $M(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function g4(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Yc(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Cd(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Fi&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,tu(e,n)}return s=r.interleaved,s===null?(t.next=t,DM(r)):(t.next=s.next,s.next=t),r.interleaved=t,tu(e,n)}function wb(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,_M(e,n)}}function PD(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,d=null;if(n=n.firstBaseUpdate,n!==null){do{var p={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};d===null?s=d=p:d=d.next=p,n=n.next}while(n!==null);d===null?s=d=t:d=d.next=t}else s=d=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:d,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function o1(e,t,n,r){var s=e.updateQueue;cd=!1;var d=s.firstBaseUpdate,p=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var x=i,S=x.next;x.next=null,p===null?d=S:p.next=S,p=x;var T=e.alternate;T!==null&&(T=T.updateQueue,i=T.lastBaseUpdate,i!==p&&(i===null?T.firstBaseUpdate=S:i.next=S,T.lastBaseUpdate=x))}if(d!==null){var M=s.baseState;p=0,T=S=x=null,i=d;do{var $=i.lane,L=i.eventTime;if((r&$)===$){T!==null&&(T=T.next={eventTime:L,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var N=e,V=i;switch($=t,L=n,V.tag){case 1:if(N=V.payload,typeof N=="function"){M=N.call(L,M,$);break e}M=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=V.payload,$=typeof N=="function"?N.call(L,M,$):N,$==null)break e;M=ko({},M,$);break e;case 2:cd=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,$=s.effects,$===null?s.effects=[i]:$.push(i))}else L={eventTime:L,lane:$,tag:i.tag,payload:i.payload,callback:i.callback,next:null},T===null?(S=T=L,x=M):T=T.next=L,p|=$;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;$=i,i=$.next,$.next=null,s.lastBaseUpdate=$,s.shared.pending=null}}while(!0);if(T===null&&(x=M),s.baseState=x,s.firstBaseUpdate=S,s.lastBaseUpdate=T,t=s.shared.interleaved,t!==null){s=t;do p|=s.lane,s=s.next;while(s!==t)}else d===null&&(s.shared.lanes=0);Yh|=p,e.lanes=p,e.memoizedState=M}}function RD(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(qn(191,s));s.call(r)}}}var _y={},yc=Nd(_y),B0=Nd(_y),j0=Nd(_y);function Nh(e){if(e===_y)throw Error(qn(174));return e}function kM(e,t){switch(mo(j0,t),mo(B0,e),mo(yc,_y),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:WE(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=WE(t,e)}So(yc),mo(yc,t)}function om(){So(yc),So(B0),So(j0)}function v4(e){Nh(j0.current);var t=Nh(yc.current),n=WE(t,e.type);t!==n&&(mo(B0,e),mo(yc,n))}function zM(e){B0.current===e&&(So(yc),So(B0))}var Do=Nd(0);function a1(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var m2=[];function LM(){for(var e=0;e<m2.length;e++)m2[e]._workInProgressVersionPrimary=null;m2.length=0}var Sb=su.ReactCurrentDispatcher,g2=su.ReactCurrentBatchConfig,Zh=0,$o=null,oa=null,pa=null,s1=!1,g0=!1,V0=0,SW=0;function za(){throw Error(qn(321))}function NM(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ul(e[n],t[n]))return!1;return!0}function FM(e,t,n,r,s,d){if(Zh=d,$o=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Sb.current=e===null||e.memoizedState===null?IW:MW,e=n(r,s),g0){d=0;do{if(g0=!1,V0=0,25<=d)throw Error(qn(301));d+=1,pa=oa=null,t.updateQueue=null,Sb.current=PW,e=n(r,s)}while(g0)}if(Sb.current=l1,t=oa!==null&&oa.next!==null,Zh=0,pa=oa=$o=null,s1=!1,t)throw Error(qn(300));return e}function BM(){var e=V0!==0;return V0=0,e}function pc(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pa===null?$o.memoizedState=pa=e:pa=pa.next=e,pa}function ll(){if(oa===null){var e=$o.alternate;e=e!==null?e.memoizedState:null}else e=oa.next;var t=pa===null?$o.memoizedState:pa.next;if(t!==null)pa=t,oa=e;else{if(e===null)throw Error(qn(310));oa=e,e={memoizedState:oa.memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},pa===null?$o.memoizedState=pa=e:pa=pa.next=e}return pa}function H0(e,t){return typeof t=="function"?t(e):t}function v2(e){var t=ll(),n=t.queue;if(n===null)throw Error(qn(311));n.lastRenderedReducer=e;var r=oa,s=r.baseQueue,d=n.pending;if(d!==null){if(s!==null){var p=s.next;s.next=d.next,d.next=p}r.baseQueue=s=d,n.pending=null}if(s!==null){d=s.next,r=r.baseState;var i=p=null,x=null,S=d;do{var T=S.lane;if((Zh&T)===T)x!==null&&(x=x.next={lane:0,action:S.action,hasEagerState:S.hasEagerState,eagerState:S.eagerState,next:null}),r=S.hasEagerState?S.eagerState:e(r,S.action);else{var M={lane:T,action:S.action,hasEagerState:S.hasEagerState,eagerState:S.eagerState,next:null};x===null?(i=x=M,p=r):x=x.next=M,$o.lanes|=T,Yh|=T}S=S.next}while(S!==null&&S!==d);x===null?p=r:x.next=i,Ul(r,t.memoizedState)||(ms=!0),t.memoizedState=r,t.baseState=p,t.baseQueue=x,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do d=s.lane,$o.lanes|=d,Yh|=d,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function y2(e){var t=ll(),n=t.queue;if(n===null)throw Error(qn(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,d=t.memoizedState;if(s!==null){n.pending=null;var p=s=s.next;do d=e(d,p.action),p=p.next;while(p!==s);Ul(d,t.memoizedState)||(ms=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),n.lastRenderedState=d}return[d,r]}function y4(){}function _4(e,t){var n=$o,r=ll(),s=t(),d=!Ul(r.memoizedState,s);if(d&&(r.memoizedState=s,ms=!0),r=r.queue,jM(w4.bind(null,n,r,e),[e]),r.getSnapshot!==t||d||pa!==null&&pa.memoizedState.tag&1){if(n.flags|=2048,U0(9,b4.bind(null,n,r,s,t),void 0,null),ma===null)throw Error(qn(349));Zh&30||x4(n,t,s)}return s}function x4(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=$o.updateQueue,t===null?(t={lastEffect:null,stores:null},$o.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function b4(e,t,n,r){t.value=n,t.getSnapshot=r,S4(t)&&C4(e)}function w4(e,t,n){return n(function(){S4(t)&&C4(e)})}function S4(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ul(e,n)}catch{return!0}}function C4(e){var t=tu(e,1);t!==null&&Bl(t,e,1,-1)}function OD(e){var t=pc();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:H0,lastRenderedState:e},t.queue=e,e=e.dispatch=TW.bind(null,$o,e),[t.memoizedState,e]}function U0(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=$o.updateQueue,t===null?(t={lastEffect:null,stores:null},$o.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function E4(){return ll().memoizedState}function Cb(e,t,n,r){var s=pc();$o.flags|=e,s.memoizedState=U0(1|t,n,void 0,r===void 0?null:r)}function q1(e,t,n,r){var s=ll();r=r===void 0?null:r;var d=void 0;if(oa!==null){var p=oa.memoizedState;if(d=p.destroy,r!==null&&NM(r,p.deps)){s.memoizedState=U0(t,n,d,r);return}}$o.flags|=e,s.memoizedState=U0(1|t,n,d,r)}function AD(e,t){return Cb(8390656,8,e,t)}function jM(e,t){return q1(2048,8,e,t)}function T4(e,t){return q1(4,2,e,t)}function I4(e,t){return q1(4,4,e,t)}function M4(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function P4(e,t,n){return n=n!=null?n.concat([e]):null,q1(4,4,M4.bind(null,t,e),n)}function VM(){}function R4(e,t){var n=ll();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&NM(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function O4(e,t){var n=ll();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&NM(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function A4(e,t,n){return Zh&21?(Ul(n,t)||(n=LN(),$o.lanes|=n,Yh|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ms=!0),e.memoizedState=n)}function CW(e,t){var n=no;no=n!==0&&4>n?n:4,e(!0);var r=g2.transition;g2.transition={};try{e(!1),t()}finally{no=n,g2.transition=r}}function D4(){return ll().memoizedState}function EW(e,t,n){var r=Td(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$4(e))k4(t,n);else if(n=m4(e,t,n,r),n!==null){var s=ts();Bl(n,e,r,s),z4(n,t,r)}}function TW(e,t,n){var r=Td(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($4(e))k4(t,s);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var p=t.lastRenderedState,i=d(p,n);if(s.hasEagerState=!0,s.eagerState=i,Ul(i,p)){var x=t.interleaved;x===null?(s.next=s,DM(t)):(s.next=x.next,x.next=s),t.interleaved=s;return}}catch{}finally{}n=m4(e,t,s,r),n!==null&&(s=ts(),Bl(n,e,r,s),z4(n,t,r))}}function $4(e){var t=e.alternate;return e===$o||t!==null&&t===$o}function k4(e,t){g0=s1=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function z4(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,_M(e,n)}}var l1={readContext:sl,useCallback:za,useContext:za,useEffect:za,useImperativeHandle:za,useInsertionEffect:za,useLayoutEffect:za,useMemo:za,useReducer:za,useRef:za,useState:za,useDebugValue:za,useDeferredValue:za,useTransition:za,useMutableSource:za,useSyncExternalStore:za,useId:za,unstable_isNewReconciler:!1},IW={readContext:sl,useCallback:function(e,t){return pc().memoizedState=[e,t===void 0?null:t],e},useContext:sl,useEffect:AD,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Cb(4194308,4,M4.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Cb(4194308,4,e,t)},useInsertionEffect:function(e,t){return Cb(4,2,e,t)},useMemo:function(e,t){var n=pc();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=pc();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=EW.bind(null,$o,e),[r.memoizedState,e]},useRef:function(e){var t=pc();return e={current:e},t.memoizedState=e},useState:OD,useDebugValue:VM,useDeferredValue:function(e){return pc().memoizedState=e},useTransition:function(){var e=OD(!1),t=e[0];return e=CW.bind(null,e[1]),pc().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=$o,s=pc();if(Io){if(n===void 0)throw Error(qn(407));n=n()}else{if(n=t(),ma===null)throw Error(qn(349));Zh&30||x4(r,t,n)}s.memoizedState=n;var d={value:n,getSnapshot:t};return s.queue=d,AD(w4.bind(null,r,d,e),[e]),r.flags|=2048,U0(9,b4.bind(null,r,d,n,t),void 0,null),n},useId:function(){var e=pc(),t=ma.identifierPrefix;if(Io){var n=Xc,r=Kc;n=(r&~(1<<32-Fl(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=V0++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=SW++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},MW={readContext:sl,useCallback:R4,useContext:sl,useEffect:jM,useImperativeHandle:P4,useInsertionEffect:T4,useLayoutEffect:I4,useMemo:O4,useReducer:v2,useRef:E4,useState:function(){return v2(H0)},useDebugValue:VM,useDeferredValue:function(e){var t=ll();return A4(t,oa.memoizedState,e)},useTransition:function(){var e=v2(H0)[0],t=ll().memoizedState;return[e,t]},useMutableSource:y4,useSyncExternalStore:_4,useId:D4,unstable_isNewReconciler:!1},PW={readContext:sl,useCallback:R4,useContext:sl,useEffect:jM,useImperativeHandle:P4,useInsertionEffect:T4,useLayoutEffect:I4,useMemo:O4,useReducer:y2,useRef:E4,useState:function(){return y2(H0)},useDebugValue:VM,useDeferredValue:function(e){var t=ll();return oa===null?t.memoizedState=e:A4(t,oa.memoizedState,e)},useTransition:function(){var e=y2(H0)[0],t=ll().memoizedState;return[e,t]},useMutableSource:y4,useSyncExternalStore:_4,useId:D4,unstable_isNewReconciler:!1};function $l(e,t){if(e&&e.defaultProps){t=ko({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function hT(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ko({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var K1={isMounted:function(e){return(e=e._reactInternals)?rf(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ts(),s=Td(e),d=Yc(r,s);d.payload=t,n!=null&&(d.callback=n),t=Cd(e,d,s),t!==null&&(Bl(t,e,s,r),wb(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ts(),s=Td(e),d=Yc(r,s);d.tag=1,d.payload=t,n!=null&&(d.callback=n),t=Cd(e,d,s),t!==null&&(Bl(t,e,s,r),wb(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ts(),r=Td(e),s=Yc(n,r);s.tag=2,t!=null&&(s.callback=t),t=Cd(e,s,r),t!==null&&(Bl(t,e,r,n),wb(t,e,r))}};function DD(e,t,n,r,s,d,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,d,p):t.prototype&&t.prototype.isPureReactComponent?!z0(n,r)||!z0(s,d):!0}function L4(e,t,n){var r=!1,s=Od,d=t.contextType;return typeof d=="object"&&d!==null?d=sl(d):(s=vs(t)?Kh:Va.current,r=t.contextTypes,d=(r=r!=null)?nm(e,s):Od),t=new t(n,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=K1,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=d),t}function $D(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&K1.enqueueReplaceState(t,t.state,null)}function fT(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},$M(e);var d=t.contextType;typeof d=="object"&&d!==null?s.context=sl(d):(d=vs(t)?Kh:Va.current,s.context=nm(e,d)),s.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(hT(e,t,d,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&K1.enqueueReplaceState(s,s.state,null),o1(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function am(e,t){try{var n="",r=t;do n+=r9(r),r=r.return;while(r);var s=n}catch(d){s=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:s,digest:null}}function _2(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function pT(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var RW=typeof WeakMap=="function"?WeakMap:Map;function N4(e,t,n){n=Yc(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){u1||(u1=!0,CT=r),pT(e,t)},n}function F4(e,t,n){n=Yc(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){pT(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(n.callback=function(){pT(e,t),typeof r!="function"&&(Ed===null?Ed=new Set([this]):Ed.add(this));var p=t.stack;this.componentDidCatch(t.value,{componentStack:p!==null?p:""})}),n}function kD(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new RW;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=UW.bind(null,e,t,n),t.then(e,e))}function zD(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function LD(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Yc(-1,1),t.tag=2,Cd(n,t,1))),n.lanes|=1),e)}var OW=su.ReactCurrentOwner,ms=!1;function es(e,t,n,r){t.child=e===null?p4(t,null,n,r):im(t,e.child,n,r)}function ND(e,t,n,r,s){n=n.render;var d=t.ref;return Xp(t,s),r=FM(e,t,n,r,d,s),n=BM(),e!==null&&!ms?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,nu(e,t,s)):(Io&&n&&IM(t),t.flags|=1,es(e,t,r,s),t.child)}function FD(e,t,n,r,s){if(e===null){var d=n.type;return typeof d=="function"&&!ZM(d)&&d.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=d,B4(e,t,d,r,s)):(e=Mb(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!(e.lanes&s)){var p=d.memoizedProps;if(n=n.compare,n=n!==null?n:z0,n(p,r)&&e.ref===t.ref)return nu(e,t,s)}return t.flags|=1,e=Id(d,r),e.ref=t.ref,e.return=t,t.child=e}function B4(e,t,n,r,s){if(e!==null){var d=e.memoizedProps;if(z0(d,r)&&e.ref===t.ref)if(ms=!1,t.pendingProps=r=d,(e.lanes&s)!==0)e.flags&131072&&(ms=!0);else return t.lanes=e.lanes,nu(e,t,s)}return mT(e,t,n,r,s)}function j4(e,t,n){var r=t.pendingProps,s=r.children,d=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},mo(jp,$s),$s|=n;else{if(!(n&1073741824))return e=d!==null?d.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,mo(jp,$s),$s|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=d!==null?d.baseLanes:n,mo(jp,$s),$s|=r}else d!==null?(r=d.baseLanes|n,t.memoizedState=null):r=n,mo(jp,$s),$s|=r;return es(e,t,s,n),t.child}function V4(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function mT(e,t,n,r,s){var d=vs(n)?Kh:Va.current;return d=nm(t,d),Xp(t,s),n=FM(e,t,n,r,d,s),r=BM(),e!==null&&!ms?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,nu(e,t,s)):(Io&&r&&IM(t),t.flags|=1,es(e,t,n,s),t.child)}function BD(e,t,n,r,s){if(vs(n)){var d=!0;e1(t)}else d=!1;if(Xp(t,s),t.stateNode===null)Eb(e,t),L4(t,n,r),fT(t,n,r,s),r=!0;else if(e===null){var p=t.stateNode,i=t.memoizedProps;p.props=i;var x=p.context,S=n.contextType;typeof S=="object"&&S!==null?S=sl(S):(S=vs(n)?Kh:Va.current,S=nm(t,S));var T=n.getDerivedStateFromProps,M=typeof T=="function"||typeof p.getSnapshotBeforeUpdate=="function";M||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(i!==r||x!==S)&&$D(t,p,r,S),cd=!1;var $=t.memoizedState;p.state=$,o1(t,r,p,s),x=t.memoizedState,i!==r||$!==x||gs.current||cd?(typeof T=="function"&&(hT(t,n,T,r),x=t.memoizedState),(i=cd||DD(t,n,i,r,$,x,S))?(M||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(t.flags|=4194308)):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=x),p.props=r,p.state=x,p.context=S,r=i):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{p=t.stateNode,g4(e,t),i=t.memoizedProps,S=t.type===t.elementType?i:$l(t.type,i),p.props=S,M=t.pendingProps,$=p.context,x=n.contextType,typeof x=="object"&&x!==null?x=sl(x):(x=vs(n)?Kh:Va.current,x=nm(t,x));var L=n.getDerivedStateFromProps;(T=typeof L=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(i!==M||$!==x)&&$D(t,p,r,x),cd=!1,$=t.memoizedState,p.state=$,o1(t,r,p,s);var N=t.memoizedState;i!==M||$!==N||gs.current||cd?(typeof L=="function"&&(hT(t,n,L,r),N=t.memoizedState),(S=cd||DD(t,n,S,r,$,N,x)||!1)?(T||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(r,N,x),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(r,N,x)),typeof p.componentDidUpdate=="function"&&(t.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof p.componentDidUpdate!="function"||i===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=N),p.props=r,p.state=N,p.context=x,r=S):(typeof p.componentDidUpdate!="function"||i===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),r=!1)}return gT(e,t,n,r,d,s)}function gT(e,t,n,r,s,d){V4(e,t);var p=(t.flags&128)!==0;if(!r&&!p)return s&&ED(t,n,!1),nu(e,t,d);r=t.stateNode,OW.current=t;var i=p&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&p?(t.child=im(t,e.child,null,d),t.child=im(t,null,i,d)):es(e,t,i,d),t.memoizedState=r.state,s&&ED(t,n,!0),t.child}function H4(e){var t=e.stateNode;t.pendingContext?CD(e,t.pendingContext,t.pendingContext!==t.context):t.context&&CD(e,t.context,!1),kM(e,t.containerInfo)}function jD(e,t,n,r,s){return rm(),PM(s),t.flags|=256,es(e,t,n,r),t.child}var vT={dehydrated:null,treeContext:null,retryLane:0};function yT(e){return{baseLanes:e,cachePool:null,transitions:null}}function U4(e,t,n){var r=t.pendingProps,s=Do.current,d=!1,p=(t.flags&128)!==0,i;if((i=p)||(i=e!==null&&e.memoizedState===null?!1:(s&2)!==0),i?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),mo(Do,s&1),e===null)return uT(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(p=r.children,e=r.fallback,d?(r=t.mode,d=t.child,p={mode:"hidden",children:p},!(r&1)&&d!==null?(d.childLanes=0,d.pendingProps=p):d=Y1(p,r,0,null),e=Wh(e,r,n,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=yT(n),t.memoizedState=vT,e):HM(t,p));if(s=e.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return AW(e,t,p,r,i,s,n);if(d){d=r.fallback,p=t.mode,s=e.child,i=s.sibling;var x={mode:"hidden",children:r.children};return!(p&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=x,t.deletions=null):(r=Id(s,x),r.subtreeFlags=s.subtreeFlags&14680064),i!==null?d=Id(i,d):(d=Wh(d,p,n,null),d.flags|=2),d.return=t,r.return=t,r.sibling=d,t.child=r,r=d,d=t.child,p=e.child.memoizedState,p=p===null?yT(n):{baseLanes:p.baseLanes|n,cachePool:null,transitions:p.transitions},d.memoizedState=p,d.childLanes=e.childLanes&~n,t.memoizedState=vT,r}return d=e.child,e=d.sibling,r=Id(d,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function HM(e,t){return t=Y1({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Vx(e,t,n,r){return r!==null&&PM(r),im(t,e.child,null,n),e=HM(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function AW(e,t,n,r,s,d,p){if(n)return t.flags&256?(t.flags&=-257,r=_2(Error(qn(422))),Vx(e,t,p,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=r.fallback,s=t.mode,r=Y1({mode:"visible",children:r.children},s,0,null),d=Wh(d,s,p,null),d.flags|=2,r.return=t,d.return=t,r.sibling=d,t.child=r,t.mode&1&&im(t,e.child,null,p),t.child.memoizedState=yT(p),t.memoizedState=vT,d);if(!(t.mode&1))return Vx(e,t,p,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var i=r.dgst;return r=i,d=Error(qn(419)),r=_2(d,r,void 0),Vx(e,t,p,r)}if(i=(p&e.childLanes)!==0,ms||i){if(r=ma,r!==null){switch(p&-p){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|p)?0:s,s!==0&&s!==d.retryLane&&(d.retryLane=s,tu(e,s),Bl(r,e,s,-1))}return XM(),r=_2(Error(qn(421))),Vx(e,t,p,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=WW.bind(null,e),s._reactRetry=t,null):(e=d.treeContext,ks=Sd(s.nextSibling),Ns=t,Io=!0,Nl=null,e!==null&&(rl[il++]=Kc,rl[il++]=Xc,rl[il++]=Xh,Kc=e.id,Xc=e.overflow,Xh=t),t=HM(t,r.children),t.flags|=4096,t)}function VD(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),dT(e.return,t,n)}function x2(e,t,n,r,s){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=r,d.tail=n,d.tailMode=s)}function W4(e,t,n){var r=t.pendingProps,s=r.revealOrder,d=r.tail;if(es(e,t,r.children,n),r=Do.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&VD(e,n,t);else if(e.tag===19)VD(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(mo(Do,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&a1(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),x2(t,!1,s,n,d);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&a1(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}x2(t,!0,n,null,d);break;case"together":x2(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Eb(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function nu(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Yh|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(qn(153));if(t.child!==null){for(e=t.child,n=Id(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Id(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function DW(e,t,n){switch(t.tag){case 3:H4(t),rm();break;case 5:v4(t);break;case 1:vs(t.type)&&e1(t);break;case 4:kM(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;mo(r1,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(mo(Do,Do.current&1),t.flags|=128,null):n&t.child.childLanes?U4(e,t,n):(mo(Do,Do.current&1),e=nu(e,t,n),e!==null?e.sibling:null);mo(Do,Do.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return W4(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),mo(Do,Do.current),r)break;return null;case 22:case 23:return t.lanes=0,j4(e,t,n)}return nu(e,t,n)}var G4,_T,q4,K4;G4=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_T=function(){};q4=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Nh(yc.current);var d=null;switch(n){case"input":s=jE(e,s),r=jE(e,r),d=[];break;case"select":s=ko({},s,{value:void 0}),r=ko({},r,{value:void 0}),d=[];break;case"textarea":s=UE(e,s),r=UE(e,r),d=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Jb)}GE(n,r);var p;n=null;for(S in s)if(!r.hasOwnProperty(S)&&s.hasOwnProperty(S)&&s[S]!=null)if(S==="style"){var i=s[S];for(p in i)i.hasOwnProperty(p)&&(n||(n={}),n[p]="")}else S!=="dangerouslySetInnerHTML"&&S!=="children"&&S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(P0.hasOwnProperty(S)?d||(d=[]):(d=d||[]).push(S,null));for(S in r){var x=r[S];if(i=s!=null?s[S]:void 0,r.hasOwnProperty(S)&&x!==i&&(x!=null||i!=null))if(S==="style")if(i){for(p in i)!i.hasOwnProperty(p)||x&&x.hasOwnProperty(p)||(n||(n={}),n[p]="");for(p in x)x.hasOwnProperty(p)&&i[p]!==x[p]&&(n||(n={}),n[p]=x[p])}else n||(d||(d=[]),d.push(S,n)),n=x;else S==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,i=i?i.__html:void 0,x!=null&&i!==x&&(d=d||[]).push(S,x)):S==="children"?typeof x!="string"&&typeof x!="number"||(d=d||[]).push(S,""+x):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&(P0.hasOwnProperty(S)?(x!=null&&S==="onScroll"&&wo("scroll",e),d||i===x||(d=[])):(d=d||[]).push(S,x))}n&&(d=d||[]).push("style",n);var S=d;(t.updateQueue=S)&&(t.flags|=4)}};K4=function(e,t,n,r){n!==r&&(t.flags|=4)};function Hv(e,t){if(!Io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function La(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $W(e,t,n){var r=t.pendingProps;switch(MM(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return La(t),null;case 1:return vs(t.type)&&Qb(),La(t),null;case 3:return r=t.stateNode,om(),So(gs),So(Va),LM(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Bx(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Nl!==null&&(IT(Nl),Nl=null))),_T(e,t),La(t),null;case 5:zM(t);var s=Nh(j0.current);if(n=t.type,e!==null&&t.stateNode!=null)q4(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(qn(166));return La(t),null}if(e=Nh(yc.current),Bx(t)){r=t.stateNode,n=t.type;var d=t.memoizedProps;switch(r[gc]=t,r[F0]=d,e=(t.mode&1)!==0,n){case"dialog":wo("cancel",r),wo("close",r);break;case"iframe":case"object":case"embed":wo("load",r);break;case"video":case"audio":for(s=0;s<o0.length;s++)wo(o0[s],r);break;case"source":wo("error",r);break;case"img":case"image":case"link":wo("error",r),wo("load",r);break;case"details":wo("toggle",r);break;case"input":Y3(r,d),wo("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!d.multiple},wo("invalid",r);break;case"textarea":Q3(r,d),wo("invalid",r)}GE(n,d),s=null;for(var p in d)if(d.hasOwnProperty(p)){var i=d[p];p==="children"?typeof i=="string"?r.textContent!==i&&(d.suppressHydrationWarning!==!0&&Fx(r.textContent,i,e),s=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(d.suppressHydrationWarning!==!0&&Fx(r.textContent,i,e),s=["children",""+i]):P0.hasOwnProperty(p)&&i!=null&&p==="onScroll"&&wo("scroll",r)}switch(n){case"input":Ox(r),J3(r,d,!0);break;case"textarea":Ox(r),eD(r);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(r.onclick=Jb)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{p=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=wN(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=p.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=p.createElement(n,{is:r.is}):(e=p.createElement(n),n==="select"&&(p=e,r.multiple?p.multiple=!0:r.size&&(p.size=r.size))):e=p.createElementNS(e,n),e[gc]=t,e[F0]=r,G4(e,t,!1,!1),t.stateNode=e;e:{switch(p=qE(n,r),n){case"dialog":wo("cancel",e),wo("close",e),s=r;break;case"iframe":case"object":case"embed":wo("load",e),s=r;break;case"video":case"audio":for(s=0;s<o0.length;s++)wo(o0[s],e);s=r;break;case"source":wo("error",e),s=r;break;case"img":case"image":case"link":wo("error",e),wo("load",e),s=r;break;case"details":wo("toggle",e),s=r;break;case"input":Y3(e,r),s=jE(e,r),wo("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=ko({},r,{value:void 0}),wo("invalid",e);break;case"textarea":Q3(e,r),s=UE(e,r),wo("invalid",e);break;default:s=r}GE(n,s),i=s;for(d in i)if(i.hasOwnProperty(d)){var x=i[d];d==="style"?EN(e,x):d==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&SN(e,x)):d==="children"?typeof x=="string"?(n!=="textarea"||x!=="")&&R0(e,x):typeof x=="number"&&R0(e,""+x):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(P0.hasOwnProperty(d)?x!=null&&d==="onScroll"&&wo("scroll",e):x!=null&&fM(e,d,x,p))}switch(n){case"input":Ox(e),J3(e,r,!1);break;case"textarea":Ox(e),eD(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Rd(r.value));break;case"select":e.multiple=!!r.multiple,d=r.value,d!=null?Wp(e,!!r.multiple,d,!1):r.defaultValue!=null&&Wp(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Jb)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return La(t),null;case 6:if(e&&t.stateNode!=null)K4(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(qn(166));if(n=Nh(j0.current),Nh(yc.current),Bx(t)){if(r=t.stateNode,n=t.memoizedProps,r[gc]=t,(d=r.nodeValue!==n)&&(e=Ns,e!==null))switch(e.tag){case 3:Fx(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Fx(r.nodeValue,n,(e.mode&1)!==0)}d&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gc]=t,t.stateNode=r}return La(t),null;case 13:if(So(Do),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Io&&ks!==null&&t.mode&1&&!(t.flags&128))h4(),rm(),t.flags|=98560,d=!1;else if(d=Bx(t),r!==null&&r.dehydrated!==null){if(e===null){if(!d)throw Error(qn(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(qn(317));d[gc]=t}else rm(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;La(t),d=!1}else Nl!==null&&(IT(Nl),Nl=null),d=!0;if(!d)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Do.current&1?aa===0&&(aa=3):XM())),t.updateQueue!==null&&(t.flags|=4),La(t),null);case 4:return om(),_T(e,t),e===null&&L0(t.stateNode.containerInfo),La(t),null;case 10:return AM(t.type._context),La(t),null;case 17:return vs(t.type)&&Qb(),La(t),null;case 19:if(So(Do),d=t.memoizedState,d===null)return La(t),null;if(r=(t.flags&128)!==0,p=d.rendering,p===null)if(r)Hv(d,!1);else{if(aa!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(p=a1(e),p!==null){for(t.flags|=128,Hv(d,!1),r=p.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)d=n,e=r,d.flags&=14680066,p=d.alternate,p===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=p.childLanes,d.lanes=p.lanes,d.child=p.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=p.memoizedProps,d.memoizedState=p.memoizedState,d.updateQueue=p.updateQueue,d.type=p.type,e=p.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return mo(Do,Do.current&1|2),t.child}e=e.sibling}d.tail!==null&&Go()>sm&&(t.flags|=128,r=!0,Hv(d,!1),t.lanes=4194304)}else{if(!r)if(e=a1(p),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Hv(d,!0),d.tail===null&&d.tailMode==="hidden"&&!p.alternate&&!Io)return La(t),null}else 2*Go()-d.renderingStartTime>sm&&n!==1073741824&&(t.flags|=128,r=!0,Hv(d,!1),t.lanes=4194304);d.isBackwards?(p.sibling=t.child,t.child=p):(n=d.last,n!==null?n.sibling=p:t.child=p,d.last=p)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=Go(),t.sibling=null,n=Do.current,mo(Do,r?n&1|2:n&1),t):(La(t),null);case 22:case 23:return KM(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?$s&1073741824&&(La(t),t.subtreeFlags&6&&(t.flags|=8192)):La(t),null;case 24:return null;case 25:return null}throw Error(qn(156,t.tag))}function kW(e,t){switch(MM(t),t.tag){case 1:return vs(t.type)&&Qb(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return om(),So(gs),So(Va),LM(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return zM(t),null;case 13:if(So(Do),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(qn(340));rm()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return So(Do),null;case 4:return om(),null;case 10:return AM(t.type._context),null;case 22:case 23:return KM(),null;case 24:return null;default:return null}}var Hx=!1,Fa=!1,zW=typeof WeakSet=="function"?WeakSet:Set,Cr=null;function Bp(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Vo(e,t,r)}else n.current=null}function xT(e,t,n){try{n()}catch(r){Vo(e,t,r)}}var HD=!1;function LW(e,t){if(rT=Xb,e=QN(),TM(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,d=r.focusNode;r=r.focusOffset;try{n.nodeType,d.nodeType}catch{n=null;break e}var p=0,i=-1,x=-1,S=0,T=0,M=e,$=null;t:for(;;){for(var L;M!==n||s!==0&&M.nodeType!==3||(i=p+s),M!==d||r!==0&&M.nodeType!==3||(x=p+r),M.nodeType===3&&(p+=M.nodeValue.length),(L=M.firstChild)!==null;)$=M,M=L;for(;;){if(M===e)break t;if($===n&&++S===s&&(i=p),$===d&&++T===r&&(x=p),(L=M.nextSibling)!==null)break;M=$,$=M.parentNode}M=L}n=i===-1||x===-1?null:{start:i,end:x}}else n=null}n=n||{start:0,end:0}}else n=null;for(iT={focusedElem:e,selectionRange:n},Xb=!1,Cr=t;Cr!==null;)if(t=Cr,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Cr=e;else for(;Cr!==null;){t=Cr;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var V=N.memoizedProps,B=N.memoizedState,j=t.stateNode,H=j.getSnapshotBeforeUpdate(t.elementType===t.type?V:$l(t.type,V),B);j.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var W=t.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(qn(163))}}catch(X){Vo(t,t.return,X)}if(e=t.sibling,e!==null){e.return=t.return,Cr=e;break}Cr=t.return}return N=HD,HD=!1,N}function v0(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var d=s.destroy;s.destroy=void 0,d!==void 0&&xT(t,n,d)}s=s.next}while(s!==r)}}function X1(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function bT(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function X4(e){var t=e.alternate;t!==null&&(e.alternate=null,X4(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[gc],delete t[F0],delete t[sT],delete t[_W],delete t[xW])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Z4(e){return e.tag===5||e.tag===3||e.tag===4}function UD(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Z4(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wT(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Jb));else if(r!==4&&(e=e.child,e!==null))for(wT(e,t,n),e=e.sibling;e!==null;)wT(e,t,n),e=e.sibling}function ST(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ST(e,t,n),e=e.sibling;e!==null;)ST(e,t,n),e=e.sibling}var Sa=null,kl=!1;function ed(e,t,n){for(n=n.child;n!==null;)Y4(e,t,n),n=n.sibling}function Y4(e,t,n){if(vc&&typeof vc.onCommitFiberUnmount=="function")try{vc.onCommitFiberUnmount(j1,n)}catch{}switch(n.tag){case 5:Fa||Bp(n,t);case 6:var r=Sa,s=kl;Sa=null,ed(e,t,n),Sa=r,kl=s,Sa!==null&&(kl?(e=Sa,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Sa.removeChild(n.stateNode));break;case 18:Sa!==null&&(kl?(e=Sa,n=n.stateNode,e.nodeType===8?f2(e.parentNode,n):e.nodeType===1&&f2(e,n),$0(e)):f2(Sa,n.stateNode));break;case 4:r=Sa,s=kl,Sa=n.stateNode.containerInfo,kl=!0,ed(e,t,n),Sa=r,kl=s;break;case 0:case 11:case 14:case 15:if(!Fa&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var d=s,p=d.destroy;d=d.tag,p!==void 0&&(d&2||d&4)&&xT(n,t,p),s=s.next}while(s!==r)}ed(e,t,n);break;case 1:if(!Fa&&(Bp(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Vo(n,t,i)}ed(e,t,n);break;case 21:ed(e,t,n);break;case 22:n.mode&1?(Fa=(r=Fa)||n.memoizedState!==null,ed(e,t,n),Fa=r):ed(e,t,n);break;default:ed(e,t,n)}}function WD(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new zW),t.forEach(function(r){var s=GW.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Al(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var d=e,p=t,i=p;e:for(;i!==null;){switch(i.tag){case 5:Sa=i.stateNode,kl=!1;break e;case 3:Sa=i.stateNode.containerInfo,kl=!0;break e;case 4:Sa=i.stateNode.containerInfo,kl=!0;break e}i=i.return}if(Sa===null)throw Error(qn(160));Y4(d,p,s),Sa=null,kl=!1;var x=s.alternate;x!==null&&(x.return=null),s.return=null}catch(S){Vo(s,t,S)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)J4(t,e),t=t.sibling}function J4(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Al(t,e),dc(e),r&4){try{v0(3,e,e.return),X1(3,e)}catch(V){Vo(e,e.return,V)}try{v0(5,e,e.return)}catch(V){Vo(e,e.return,V)}}break;case 1:Al(t,e),dc(e),r&512&&n!==null&&Bp(n,n.return);break;case 5:if(Al(t,e),dc(e),r&512&&n!==null&&Bp(n,n.return),e.flags&32){var s=e.stateNode;try{R0(s,"")}catch(V){Vo(e,e.return,V)}}if(r&4&&(s=e.stateNode,s!=null)){var d=e.memoizedProps,p=n!==null?n.memoizedProps:d,i=e.type,x=e.updateQueue;if(e.updateQueue=null,x!==null)try{i==="input"&&d.type==="radio"&&d.name!=null&&xN(s,d),qE(i,p);var S=qE(i,d);for(p=0;p<x.length;p+=2){var T=x[p],M=x[p+1];T==="style"?EN(s,M):T==="dangerouslySetInnerHTML"?SN(s,M):T==="children"?R0(s,M):fM(s,T,M,S)}switch(i){case"input":VE(s,d);break;case"textarea":bN(s,d);break;case"select":var $=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!d.multiple;var L=d.value;L!=null?Wp(s,!!d.multiple,L,!1):$!==!!d.multiple&&(d.defaultValue!=null?Wp(s,!!d.multiple,d.defaultValue,!0):Wp(s,!!d.multiple,d.multiple?[]:"",!1))}s[F0]=d}catch(V){Vo(e,e.return,V)}}break;case 6:if(Al(t,e),dc(e),r&4){if(e.stateNode===null)throw Error(qn(162));s=e.stateNode,d=e.memoizedProps;try{s.nodeValue=d}catch(V){Vo(e,e.return,V)}}break;case 3:if(Al(t,e),dc(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{$0(t.containerInfo)}catch(V){Vo(e,e.return,V)}break;case 4:Al(t,e),dc(e);break;case 13:Al(t,e),dc(e),s=e.child,s.flags&8192&&(d=s.memoizedState!==null,s.stateNode.isHidden=d,!d||s.alternate!==null&&s.alternate.memoizedState!==null||(GM=Go())),r&4&&WD(e);break;case 22:if(T=n!==null&&n.memoizedState!==null,e.mode&1?(Fa=(S=Fa)||T,Al(t,e),Fa=S):Al(t,e),dc(e),r&8192){if(S=e.memoizedState!==null,(e.stateNode.isHidden=S)&&!T&&e.mode&1)for(Cr=e,T=e.child;T!==null;){for(M=Cr=T;Cr!==null;){switch($=Cr,L=$.child,$.tag){case 0:case 11:case 14:case 15:v0(4,$,$.return);break;case 1:Bp($,$.return);var N=$.stateNode;if(typeof N.componentWillUnmount=="function"){r=$,n=$.return;try{t=r,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(V){Vo(r,n,V)}}break;case 5:Bp($,$.return);break;case 22:if($.memoizedState!==null){qD(M);continue}}L!==null?(L.return=$,Cr=L):qD(M)}T=T.sibling}e:for(T=null,M=e;;){if(M.tag===5){if(T===null){T=M;try{s=M.stateNode,S?(d=s.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(i=M.stateNode,x=M.memoizedProps.style,p=x!=null&&x.hasOwnProperty("display")?x.display:null,i.style.display=CN("display",p))}catch(V){Vo(e,e.return,V)}}}else if(M.tag===6){if(T===null)try{M.stateNode.nodeValue=S?"":M.memoizedProps}catch(V){Vo(e,e.return,V)}}else if((M.tag!==22&&M.tag!==23||M.memoizedState===null||M===e)&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===e)break e;for(;M.sibling===null;){if(M.return===null||M.return===e)break e;T===M&&(T=null),M=M.return}T===M&&(T=null),M.sibling.return=M.return,M=M.sibling}}break;case 19:Al(t,e),dc(e),r&4&&WD(e);break;case 21:break;default:Al(t,e),dc(e)}}function dc(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Z4(n)){var r=n;break e}n=n.return}throw Error(qn(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(R0(s,""),r.flags&=-33);var d=UD(e);ST(e,d,s);break;case 3:case 4:var p=r.stateNode.containerInfo,i=UD(e);wT(e,i,p);break;default:throw Error(qn(161))}}catch(x){Vo(e,e.return,x)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function NW(e,t,n){Cr=e,Q4(e)}function Q4(e,t,n){for(var r=(e.mode&1)!==0;Cr!==null;){var s=Cr,d=s.child;if(s.tag===22&&r){var p=s.memoizedState!==null||Hx;if(!p){var i=s.alternate,x=i!==null&&i.memoizedState!==null||Fa;i=Hx;var S=Fa;if(Hx=p,(Fa=x)&&!S)for(Cr=s;Cr!==null;)p=Cr,x=p.child,p.tag===22&&p.memoizedState!==null?KD(s):x!==null?(x.return=p,Cr=x):KD(s);for(;d!==null;)Cr=d,Q4(d),d=d.sibling;Cr=s,Hx=i,Fa=S}GD(e)}else s.subtreeFlags&8772&&d!==null?(d.return=s,Cr=d):GD(e)}}function GD(e){for(;Cr!==null;){var t=Cr;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Fa||X1(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Fa)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:$l(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&RD(t,d,r);break;case 3:var p=t.updateQueue;if(p!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}RD(t,p,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var x=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&n.focus();break;case"img":x.src&&(n.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var S=t.alternate;if(S!==null){var T=S.memoizedState;if(T!==null){var M=T.dehydrated;M!==null&&$0(M)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(qn(163))}Fa||t.flags&512&&bT(t)}catch($){Vo(t,t.return,$)}}if(t===e){Cr=null;break}if(n=t.sibling,n!==null){n.return=t.return,Cr=n;break}Cr=t.return}}function qD(e){for(;Cr!==null;){var t=Cr;if(t===e){Cr=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Cr=n;break}Cr=t.return}}function KD(e){for(;Cr!==null;){var t=Cr;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{X1(4,t)}catch(x){Vo(t,n,x)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(x){Vo(t,s,x)}}var d=t.return;try{bT(t)}catch(x){Vo(t,d,x)}break;case 5:var p=t.return;try{bT(t)}catch(x){Vo(t,p,x)}}}catch(x){Vo(t,t.return,x)}if(t===e){Cr=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Cr=i;break}Cr=t.return}}var FW=Math.ceil,c1=su.ReactCurrentDispatcher,UM=su.ReactCurrentOwner,al=su.ReactCurrentBatchConfig,Fi=0,ma=null,Jo=null,Ca=0,$s=0,jp=Nd(0),aa=0,W0=null,Yh=0,Z1=0,WM=0,y0=null,fs=null,GM=0,sm=1/0,Wc=null,u1=!1,CT=null,Ed=null,Ux=!1,pd=null,d1=0,_0=0,ET=null,Tb=-1,Ib=0;function ts(){return Fi&6?Go():Tb!==-1?Tb:Tb=Go()}function Td(e){return e.mode&1?Fi&2&&Ca!==0?Ca&-Ca:wW.transition!==null?(Ib===0&&(Ib=LN()),Ib):(e=no,e!==0||(e=window.event,e=e===void 0?16:UN(e.type)),e):1}function Bl(e,t,n,r){if(50<_0)throw _0=0,ET=null,Error(qn(185));gy(e,n,r),(!(Fi&2)||e!==ma)&&(e===ma&&(!(Fi&2)&&(Z1|=n),aa===4&&hd(e,Ca)),ys(e,r),n===1&&Fi===0&&!(t.mode&1)&&(sm=Go()+500,G1&&Fd()))}function ys(e,t){var n=e.callbackNode;w9(e,t);var r=Kb(e,e===ma?Ca:0);if(r===0)n!==null&&rD(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&rD(n),t===1)e.tag===0?bW(XD.bind(null,e)):c4(XD.bind(null,e)),vW(function(){!(Fi&6)&&Fd()}),n=null;else{switch(NN(r)){case 1:n=yM;break;case 4:n=kN;break;case 16:n=qb;break;case 536870912:n=zN;break;default:n=qb}n=sF(n,eF.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function eF(e,t){if(Tb=-1,Ib=0,Fi&6)throw Error(qn(327));var n=e.callbackNode;if(Zp()&&e.callbackNode!==n)return null;var r=Kb(e,e===ma?Ca:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=h1(e,r);else{t=r;var s=Fi;Fi|=2;var d=nF();(ma!==e||Ca!==t)&&(Wc=null,sm=Go()+500,Uh(e,t));do try{VW();break}catch(i){tF(e,i)}while(!0);OM(),c1.current=d,Fi=s,Jo!==null?t=0:(ma=null,Ca=0,t=aa)}if(t!==0){if(t===2&&(s=JE(e),s!==0&&(r=s,t=TT(e,s))),t===1)throw n=W0,Uh(e,0),hd(e,r),ys(e,Go()),n;if(t===6)hd(e,r);else{if(s=e.current.alternate,!(r&30)&&!BW(s)&&(t=h1(e,r),t===2&&(d=JE(e),d!==0&&(r=d,t=TT(e,d))),t===1))throw n=W0,Uh(e,0),hd(e,r),ys(e,Go()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(qn(345));case 2:$h(e,fs,Wc);break;case 3:if(hd(e,r),(r&130023424)===r&&(t=GM+500-Go(),10<t)){if(Kb(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){ts(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=aT($h.bind(null,e,fs,Wc),t);break}$h(e,fs,Wc);break;case 4:if(hd(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var p=31-Fl(r);d=1<<p,p=t[p],p>s&&(s=p),r&=~d}if(r=s,r=Go()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*FW(r/1960))-r,10<r){e.timeoutHandle=aT($h.bind(null,e,fs,Wc),r);break}$h(e,fs,Wc);break;case 5:$h(e,fs,Wc);break;default:throw Error(qn(329))}}}return ys(e,Go()),e.callbackNode===n?eF.bind(null,e):null}function TT(e,t){var n=y0;return e.current.memoizedState.isDehydrated&&(Uh(e,t).flags|=256),e=h1(e,t),e!==2&&(t=fs,fs=n,t!==null&&IT(t)),e}function IT(e){fs===null?fs=e:fs.push.apply(fs,e)}function BW(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],d=s.getSnapshot;s=s.value;try{if(!Ul(d(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function hd(e,t){for(t&=~WM,t&=~Z1,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Fl(t),r=1<<n;e[n]=-1,t&=~r}}function XD(e){if(Fi&6)throw Error(qn(327));Zp();var t=Kb(e,0);if(!(t&1))return ys(e,Go()),null;var n=h1(e,t);if(e.tag!==0&&n===2){var r=JE(e);r!==0&&(t=r,n=TT(e,r))}if(n===1)throw n=W0,Uh(e,0),hd(e,t),ys(e,Go()),n;if(n===6)throw Error(qn(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$h(e,fs,Wc),ys(e,Go()),null}function qM(e,t){var n=Fi;Fi|=1;try{return e(t)}finally{Fi=n,Fi===0&&(sm=Go()+500,G1&&Fd())}}function Jh(e){pd!==null&&pd.tag===0&&!(Fi&6)&&Zp();var t=Fi;Fi|=1;var n=al.transition,r=no;try{if(al.transition=null,no=1,e)return e()}finally{no=r,al.transition=n,Fi=t,!(Fi&6)&&Fd()}}function KM(){$s=jp.current,So(jp)}function Uh(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,gW(n)),Jo!==null)for(n=Jo.return;n!==null;){var r=n;switch(MM(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Qb();break;case 3:om(),So(gs),So(Va),LM();break;case 5:zM(r);break;case 4:om();break;case 13:So(Do);break;case 19:So(Do);break;case 10:AM(r.type._context);break;case 22:case 23:KM()}n=n.return}if(ma=e,Jo=e=Id(e.current,null),Ca=$s=t,aa=0,W0=null,WM=Z1=Yh=0,fs=y0=null,Lh!==null){for(t=0;t<Lh.length;t++)if(n=Lh[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,d=n.pending;if(d!==null){var p=d.next;d.next=s,r.next=p}n.pending=r}Lh=null}return e}function tF(e,t){do{var n=Jo;try{if(OM(),Sb.current=l1,s1){for(var r=$o.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}s1=!1}if(Zh=0,pa=oa=$o=null,g0=!1,V0=0,UM.current=null,n===null||n.return===null){aa=1,W0=t,Jo=null;break}e:{var d=e,p=n.return,i=n,x=t;if(t=Ca,i.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var S=x,T=i,M=T.tag;if(!(T.mode&1)&&(M===0||M===11||M===15)){var $=T.alternate;$?(T.updateQueue=$.updateQueue,T.memoizedState=$.memoizedState,T.lanes=$.lanes):(T.updateQueue=null,T.memoizedState=null)}var L=zD(p);if(L!==null){L.flags&=-257,LD(L,p,i,d,t),L.mode&1&&kD(d,S,t),t=L,x=S;var N=t.updateQueue;if(N===null){var V=new Set;V.add(x),t.updateQueue=V}else N.add(x);break e}else{if(!(t&1)){kD(d,S,t),XM();break e}x=Error(qn(426))}}else if(Io&&i.mode&1){var B=zD(p);if(B!==null){!(B.flags&65536)&&(B.flags|=256),LD(B,p,i,d,t),PM(am(x,i));break e}}d=x=am(x,i),aa!==4&&(aa=2),y0===null?y0=[d]:y0.push(d),d=p;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var j=N4(d,x,t);PD(d,j);break e;case 1:i=x;var H=d.type,W=d.stateNode;if(!(d.flags&128)&&(typeof H.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(Ed===null||!Ed.has(W)))){d.flags|=65536,t&=-t,d.lanes|=t;var X=F4(d,i,t);PD(d,X);break e}}d=d.return}while(d!==null)}iF(n)}catch(ee){t=ee,Jo===n&&n!==null&&(Jo=n=n.return);continue}break}while(!0)}function nF(){var e=c1.current;return c1.current=l1,e===null?l1:e}function XM(){(aa===0||aa===3||aa===2)&&(aa=4),ma===null||!(Yh&268435455)&&!(Z1&268435455)||hd(ma,Ca)}function h1(e,t){var n=Fi;Fi|=2;var r=nF();(ma!==e||Ca!==t)&&(Wc=null,Uh(e,t));do try{jW();break}catch(s){tF(e,s)}while(!0);if(OM(),Fi=n,c1.current=r,Jo!==null)throw Error(qn(261));return ma=null,Ca=0,aa}function jW(){for(;Jo!==null;)rF(Jo)}function VW(){for(;Jo!==null&&!f9();)rF(Jo)}function rF(e){var t=aF(e.alternate,e,$s);e.memoizedProps=e.pendingProps,t===null?iF(e):Jo=t,UM.current=null}function iF(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=kW(n,t),n!==null){n.flags&=32767,Jo=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{aa=6,Jo=null;return}}else if(n=$W(n,t,$s),n!==null){Jo=n;return}if(t=t.sibling,t!==null){Jo=t;return}Jo=t=e}while(t!==null);aa===0&&(aa=5)}function $h(e,t,n){var r=no,s=al.transition;try{al.transition=null,no=1,HW(e,t,n,r)}finally{al.transition=s,no=r}return null}function HW(e,t,n,r){do Zp();while(pd!==null);if(Fi&6)throw Error(qn(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(qn(177));e.callbackNode=null,e.callbackPriority=0;var d=n.lanes|n.childLanes;if(S9(e,d),e===ma&&(Jo=ma=null,Ca=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ux||(Ux=!0,sF(qb,function(){return Zp(),null})),d=(n.flags&15990)!==0,n.subtreeFlags&15990||d){d=al.transition,al.transition=null;var p=no;no=1;var i=Fi;Fi|=4,UM.current=null,LW(e,n),J4(n,e),cW(iT),Xb=!!rT,iT=rT=null,e.current=n,NW(n),p9(),Fi=i,no=p,al.transition=d}else e.current=n;if(Ux&&(Ux=!1,pd=e,d1=s),d=e.pendingLanes,d===0&&(Ed=null),v9(n.stateNode),ys(e,Go()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(u1)throw u1=!1,e=CT,CT=null,e;return d1&1&&e.tag!==0&&Zp(),d=e.pendingLanes,d&1?e===ET?_0++:(_0=0,ET=e):_0=0,Fd(),null}function Zp(){if(pd!==null){var e=NN(d1),t=al.transition,n=no;try{if(al.transition=null,no=16>e?16:e,pd===null)var r=!1;else{if(e=pd,pd=null,d1=0,Fi&6)throw Error(qn(331));var s=Fi;for(Fi|=4,Cr=e.current;Cr!==null;){var d=Cr,p=d.child;if(Cr.flags&16){var i=d.deletions;if(i!==null){for(var x=0;x<i.length;x++){var S=i[x];for(Cr=S;Cr!==null;){var T=Cr;switch(T.tag){case 0:case 11:case 15:v0(8,T,d)}var M=T.child;if(M!==null)M.return=T,Cr=M;else for(;Cr!==null;){T=Cr;var $=T.sibling,L=T.return;if(X4(T),T===S){Cr=null;break}if($!==null){$.return=L,Cr=$;break}Cr=L}}}var N=d.alternate;if(N!==null){var V=N.child;if(V!==null){N.child=null;do{var B=V.sibling;V.sibling=null,V=B}while(V!==null)}}Cr=d}}if(d.subtreeFlags&2064&&p!==null)p.return=d,Cr=p;else e:for(;Cr!==null;){if(d=Cr,d.flags&2048)switch(d.tag){case 0:case 11:case 15:v0(9,d,d.return)}var j=d.sibling;if(j!==null){j.return=d.return,Cr=j;break e}Cr=d.return}}var H=e.current;for(Cr=H;Cr!==null;){p=Cr;var W=p.child;if(p.subtreeFlags&2064&&W!==null)W.return=p,Cr=W;else e:for(p=H;Cr!==null;){if(i=Cr,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:X1(9,i)}}catch(ee){Vo(i,i.return,ee)}if(i===p){Cr=null;break e}var X=i.sibling;if(X!==null){X.return=i.return,Cr=X;break e}Cr=i.return}}if(Fi=s,Fd(),vc&&typeof vc.onPostCommitFiberRoot=="function")try{vc.onPostCommitFiberRoot(j1,e)}catch{}r=!0}return r}finally{no=n,al.transition=t}}return!1}function ZD(e,t,n){t=am(n,t),t=N4(e,t,1),e=Cd(e,t,1),t=ts(),e!==null&&(gy(e,1,t),ys(e,t))}function Vo(e,t,n){if(e.tag===3)ZD(e,e,n);else for(;t!==null;){if(t.tag===3){ZD(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ed===null||!Ed.has(r))){e=am(n,e),e=F4(t,e,1),t=Cd(t,e,1),e=ts(),t!==null&&(gy(t,1,e),ys(t,e));break}}t=t.return}}function UW(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ts(),e.pingedLanes|=e.suspendedLanes&n,ma===e&&(Ca&n)===n&&(aa===4||aa===3&&(Ca&130023424)===Ca&&500>Go()-GM?Uh(e,0):WM|=n),ys(e,t)}function oF(e,t){t===0&&(e.mode&1?(t=$x,$x<<=1,!($x&130023424)&&($x=4194304)):t=1);var n=ts();e=tu(e,t),e!==null&&(gy(e,t,n),ys(e,n))}function WW(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),oF(e,n)}function GW(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(qn(314))}r!==null&&r.delete(t),oF(e,n)}var aF;aF=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||gs.current)ms=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ms=!1,DW(e,t,n);ms=!!(e.flags&131072)}else ms=!1,Io&&t.flags&1048576&&u4(t,n1,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Eb(e,t),e=t.pendingProps;var s=nm(t,Va.current);Xp(t,n),s=FM(null,t,r,e,s,n);var d=BM();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,vs(r)?(d=!0,e1(t)):d=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,$M(t),s.updater=K1,t.stateNode=s,s._reactInternals=t,fT(t,r,e,n),t=gT(null,t,r,!0,d,n)):(t.tag=0,Io&&d&&IM(t),es(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Eb(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=KW(r),e=$l(r,e),s){case 0:t=mT(null,t,r,e,n);break e;case 1:t=BD(null,t,r,e,n);break e;case 11:t=ND(null,t,r,e,n);break e;case 14:t=FD(null,t,r,$l(r.type,e),n);break e}throw Error(qn(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:$l(r,s),mT(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:$l(r,s),BD(e,t,r,s,n);case 3:e:{if(H4(t),e===null)throw Error(qn(387));r=t.pendingProps,d=t.memoizedState,s=d.element,g4(e,t),o1(t,r,null,n);var p=t.memoizedState;if(r=p.element,d.isDehydrated)if(d={element:r,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){s=am(Error(qn(423)),t),t=jD(e,t,r,n,s);break e}else if(r!==s){s=am(Error(qn(424)),t),t=jD(e,t,r,n,s);break e}else for(ks=Sd(t.stateNode.containerInfo.firstChild),Ns=t,Io=!0,Nl=null,n=p4(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(rm(),r===s){t=nu(e,t,n);break e}es(e,t,r,n)}t=t.child}return t;case 5:return v4(t),e===null&&uT(t),r=t.type,s=t.pendingProps,d=e!==null?e.memoizedProps:null,p=s.children,oT(r,s)?p=null:d!==null&&oT(r,d)&&(t.flags|=32),V4(e,t),es(e,t,p,n),t.child;case 6:return e===null&&uT(t),null;case 13:return U4(e,t,n);case 4:return kM(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=im(t,null,r,n):es(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:$l(r,s),ND(e,t,r,s,n);case 7:return es(e,t,t.pendingProps,n),t.child;case 8:return es(e,t,t.pendingProps.children,n),t.child;case 12:return es(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,d=t.memoizedProps,p=s.value,mo(r1,r._currentValue),r._currentValue=p,d!==null)if(Ul(d.value,p)){if(d.children===s.children&&!gs.current){t=nu(e,t,n);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var i=d.dependencies;if(i!==null){p=d.child;for(var x=i.firstContext;x!==null;){if(x.context===r){if(d.tag===1){x=Yc(-1,n&-n),x.tag=2;var S=d.updateQueue;if(S!==null){S=S.shared;var T=S.pending;T===null?x.next=x:(x.next=T.next,T.next=x),S.pending=x}}d.lanes|=n,x=d.alternate,x!==null&&(x.lanes|=n),dT(d.return,n,t),i.lanes|=n;break}x=x.next}}else if(d.tag===10)p=d.type===t.type?null:d.child;else if(d.tag===18){if(p=d.return,p===null)throw Error(qn(341));p.lanes|=n,i=p.alternate,i!==null&&(i.lanes|=n),dT(p,n,t),p=d.sibling}else p=d.child;if(p!==null)p.return=d;else for(p=d;p!==null;){if(p===t){p=null;break}if(d=p.sibling,d!==null){d.return=p.return,p=d;break}p=p.return}d=p}es(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Xp(t,n),s=sl(s),r=r(s),t.flags|=1,es(e,t,r,n),t.child;case 14:return r=t.type,s=$l(r,t.pendingProps),s=$l(r.type,s),FD(e,t,r,s,n);case 15:return B4(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:$l(r,s),Eb(e,t),t.tag=1,vs(r)?(e=!0,e1(t)):e=!1,Xp(t,n),L4(t,r,s),fT(t,r,s,n),gT(null,t,r,!0,e,n);case 19:return W4(e,t,n);case 22:return j4(e,t,n)}throw Error(qn(156,t.tag))};function sF(e,t){return $N(e,t)}function qW(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ol(e,t,n,r){return new qW(e,t,n,r)}function ZM(e){return e=e.prototype,!(!e||!e.isReactComponent)}function KW(e){if(typeof e=="function")return ZM(e)?1:0;if(e!=null){if(e=e.$$typeof,e===mM)return 11;if(e===gM)return 14}return 2}function Id(e,t){var n=e.alternate;return n===null?(n=ol(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mb(e,t,n,r,s,d){var p=2;if(r=e,typeof e=="function")ZM(e)&&(p=1);else if(typeof e=="string")p=5;else e:switch(e){case Op:return Wh(n.children,s,d,t);case pM:p=8,s|=8;break;case LE:return e=ol(12,n,t,s|2),e.elementType=LE,e.lanes=d,e;case NE:return e=ol(13,n,t,s),e.elementType=NE,e.lanes=d,e;case FE:return e=ol(19,n,t,s),e.elementType=FE,e.lanes=d,e;case vN:return Y1(n,s,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case mN:p=10;break e;case gN:p=9;break e;case mM:p=11;break e;case gM:p=14;break e;case ld:p=16,r=null;break e}throw Error(qn(130,e==null?e:typeof e,""))}return t=ol(p,n,t,s),t.elementType=e,t.type=r,t.lanes=d,t}function Wh(e,t,n,r){return e=ol(7,e,r,t),e.lanes=n,e}function Y1(e,t,n,r){return e=ol(22,e,r,t),e.elementType=vN,e.lanes=n,e.stateNode={isHidden:!1},e}function b2(e,t,n){return e=ol(6,e,null,t),e.lanes=n,e}function w2(e,t,n){return t=ol(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function XW(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=n2(0),this.expirationTimes=n2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=n2(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function YM(e,t,n,r,s,d,p,i,x){return e=new XW(e,t,n,i,x),t===1?(t=1,d===!0&&(t|=8)):t=0,d=ol(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$M(d),e}function ZW(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rp,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function lF(e){if(!e)return Od;e=e._reactInternals;e:{if(rf(e)!==e||e.tag!==1)throw Error(qn(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(vs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(qn(171))}if(e.tag===1){var n=e.type;if(vs(n))return l4(e,n,t)}return t}function cF(e,t,n,r,s,d,p,i,x){return e=YM(n,r,!0,e,s,d,p,i,x),e.context=lF(null),n=e.current,r=ts(),s=Td(n),d=Yc(r,s),d.callback=t??null,Cd(n,d,s),e.current.lanes=s,gy(e,s,r),ys(e,r),e}function J1(e,t,n,r){var s=t.current,d=ts(),p=Td(s);return n=lF(n),t.context===null?t.context=n:t.pendingContext=n,t=Yc(d,p),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Cd(s,t,p),e!==null&&(Bl(e,s,p,d),wb(e,s,p)),p}function f1(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function YD(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function JM(e,t){YD(e,t),(e=e.alternate)&&YD(e,t)}function YW(){return null}var uF=typeof reportError=="function"?reportError:function(e){console.error(e)};function QM(e){this._internalRoot=e}Q1.prototype.render=QM.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(qn(409));J1(e,t,null,null)};Q1.prototype.unmount=QM.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Jh(function(){J1(null,e,null,null)}),t[eu]=null}};function Q1(e){this._internalRoot=e}Q1.prototype.unstable_scheduleHydration=function(e){if(e){var t=jN();e={blockedOn:null,target:e,priority:t};for(var n=0;n<dd.length&&t!==0&&t<dd[n].priority;n++);dd.splice(n,0,e),n===0&&HN(e)}};function eP(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ew(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function JD(){}function JW(e,t,n,r,s){if(s){if(typeof r=="function"){var d=r;r=function(){var S=f1(p);d.call(S)}}var p=cF(t,r,e,0,null,!1,!1,"",JD);return e._reactRootContainer=p,e[eu]=p.current,L0(e.nodeType===8?e.parentNode:e),Jh(),p}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var i=r;r=function(){var S=f1(x);i.call(S)}}var x=YM(e,0,!1,null,null,!1,!1,"",JD);return e._reactRootContainer=x,e[eu]=x.current,L0(e.nodeType===8?e.parentNode:e),Jh(function(){J1(t,x,n,r)}),x}function tw(e,t,n,r,s){var d=n._reactRootContainer;if(d){var p=d;if(typeof s=="function"){var i=s;s=function(){var x=f1(p);i.call(x)}}J1(t,p,e,s)}else p=JW(n,t,e,s,r);return f1(p)}FN=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=i0(t.pendingLanes);n!==0&&(_M(t,n|1),ys(t,Go()),!(Fi&6)&&(sm=Go()+500,Fd()))}break;case 13:Jh(function(){var r=tu(e,1);if(r!==null){var s=ts();Bl(r,e,1,s)}}),JM(e,1)}};xM=function(e){if(e.tag===13){var t=tu(e,134217728);if(t!==null){var n=ts();Bl(t,e,134217728,n)}JM(e,134217728)}};BN=function(e){if(e.tag===13){var t=Td(e),n=tu(e,t);if(n!==null){var r=ts();Bl(n,e,t,r)}JM(e,t)}};jN=function(){return no};VN=function(e,t){var n=no;try{return no=e,t()}finally{no=n}};XE=function(e,t,n){switch(t){case"input":if(VE(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=W1(r);if(!s)throw Error(qn(90));_N(r),VE(r,s)}}}break;case"textarea":bN(e,n);break;case"select":t=n.value,t!=null&&Wp(e,!!n.multiple,t,!1)}};MN=qM;PN=Jh;var QW={usingClientEntryPoint:!1,Events:[yy,kp,W1,TN,IN,qM]},Uv={findFiberByHostInstance:zh,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eG={bundleType:Uv.bundleType,version:Uv.version,rendererPackageName:Uv.rendererPackageName,rendererConfig:Uv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:su.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=AN(e),e===null?null:e.stateNode},findFiberByHostInstance:Uv.findFiberByHostInstance||YW,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wx.isDisabled&&Wx.supportsFiber)try{j1=Wx.inject(eG),vc=Wx}catch{}}Vs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QW;Vs.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eP(t))throw Error(qn(200));return ZW(e,t,null,n)};Vs.createRoot=function(e,t){if(!eP(e))throw Error(qn(299));var n=!1,r="",s=uF;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=YM(e,1,!1,null,null,n,!1,r,s),e[eu]=t.current,L0(e.nodeType===8?e.parentNode:e),new QM(t)};Vs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(qn(188)):(e=Object.keys(e).join(","),Error(qn(268,e)));return e=AN(t),e=e===null?null:e.stateNode,e};Vs.flushSync=function(e){return Jh(e)};Vs.hydrate=function(e,t,n){if(!ew(t))throw Error(qn(200));return tw(null,e,t,!0,n)};Vs.hydrateRoot=function(e,t,n){if(!eP(e))throw Error(qn(405));var r=n!=null&&n.hydratedSources||null,s=!1,d="",p=uF;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(d=n.identifierPrefix),n.onRecoverableError!==void 0&&(p=n.onRecoverableError)),t=cF(t,null,e,1,n??null,s,!1,d,p),e[eu]=t.current,L0(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Q1(t)};Vs.render=function(e,t,n){if(!ew(t))throw Error(qn(200));return tw(null,e,t,!1,n)};Vs.unmountComponentAtNode=function(e){if(!ew(e))throw Error(qn(40));return e._reactRootContainer?(Jh(function(){tw(null,null,e,!1,function(){e._reactRootContainer=null,e[eu]=null})}),!0):!1};Vs.unstable_batchedUpdates=qM;Vs.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ew(n))throw Error(qn(200));if(e==null||e._reactInternals===void 0)throw Error(qn(38));return tw(e,t,n,!1,r)};Vs.version="18.3.1-next-f1338f8080-20240426";function dF(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dF)}catch(e){console.error(e)}}dF(),dN.exports=Vs;var xc=dN.exports;const G0=hl(xc),tG=QL({__proto__:null,default:G0},[xc]);var hF,QD=xc;hF=QD.createRoot,QD.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function q0(){return q0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q0.apply(this,arguments)}var md;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(md||(md={}));const e$="popstate";function nG(e){e===void 0&&(e={});function t(r,s){let{pathname:d,search:p,hash:i}=r.location;return MT("",{pathname:d,search:p,hash:i},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:p1(s)}return iG(t,n,null,e)}function qo(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function fF(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function rG(){return Math.random().toString(36).substr(2,8)}function t$(e,t){return{usr:e.state,key:e.key,idx:t}}function MT(e,t,n,r){return n===void 0&&(n=null),q0({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Im(t):t,{state:n,key:t&&t.key||r||rG()})}function p1(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Im(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function iG(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:d=!1}=r,p=s.history,i=md.Pop,x=null,S=T();S==null&&(S=0,p.replaceState(q0({},p.state,{idx:S}),""));function T(){return(p.state||{idx:null}).idx}function M(){i=md.Pop;let B=T(),j=B==null?null:B-S;S=B,x&&x({action:i,location:V.location,delta:j})}function $(B,j){i=md.Push;let H=MT(V.location,B,j);S=T()+1;let W=t$(H,S),X=V.createHref(H);try{p.pushState(W,"",X)}catch(ee){if(ee instanceof DOMException&&ee.name==="DataCloneError")throw ee;s.location.assign(X)}d&&x&&x({action:i,location:V.location,delta:1})}function L(B,j){i=md.Replace;let H=MT(V.location,B,j);S=T();let W=t$(H,S),X=V.createHref(H);p.replaceState(W,"",X),d&&x&&x({action:i,location:V.location,delta:0})}function N(B){let j=s.location.origin!=="null"?s.location.origin:s.location.href,H=typeof B=="string"?B:p1(B);return H=H.replace(/ $/,"%20"),qo(j,"No window.location.(origin|href) available to create URL for href: "+H),new URL(H,j)}let V={get action(){return i},get location(){return e(s,p)},listen(B){if(x)throw new Error("A history only accepts one active listener");return s.addEventListener(e$,M),x=B,()=>{s.removeEventListener(e$,M),x=null}},createHref(B){return t(s,B)},createURL:N,encodeLocation(B){let j=N(B);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:$,replace:L,go(B){return p.go(B)}};return V}var n$;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(n$||(n$={}));function oG(e,t,n){return n===void 0&&(n="/"),aG(e,t,n,!1)}function aG(e,t,n,r){let s=typeof t=="string"?Im(t):t,d=tP(s.pathname||"/",n);if(d==null)return null;let p=pF(e);sG(p);let i=null;for(let x=0;i==null&&x<p.length;++x){let S=yG(d);i=gG(p[x],S,r)}return i}function pF(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(d,p,i)=>{let x={relativePath:i===void 0?d.path||"":i,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};x.relativePath.startsWith("/")&&(qo(x.relativePath.startsWith(r),'Absolute route path "'+x.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),x.relativePath=x.relativePath.slice(r.length));let S=Md([r,x.relativePath]),T=n.concat(x);d.children&&d.children.length>0&&(qo(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+S+'".')),pF(d.children,t,T,S)),!(d.path==null&&!d.index)&&t.push({path:S,score:pG(S,d.index),routesMeta:T})};return e.forEach((d,p)=>{var i;if(d.path===""||!((i=d.path)!=null&&i.includes("?")))s(d,p);else for(let x of mF(d.path))s(d,p,x)}),t}function mF(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),d=n.replace(/\?$/,"");if(r.length===0)return s?[d,""]:[d];let p=mF(r.join("/")),i=[];return i.push(...p.map(x=>x===""?d:[d,x].join("/"))),s&&i.push(...p),i.map(x=>e.startsWith("/")&&x===""?"/":x)}function sG(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:mG(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const lG=/^:[\w-]+$/,cG=3,uG=2,dG=1,hG=10,fG=-2,r$=e=>e==="*";function pG(e,t){let n=e.split("/"),r=n.length;return n.some(r$)&&(r+=fG),t&&(r+=uG),n.filter(s=>!r$(s)).reduce((s,d)=>s+(lG.test(d)?cG:d===""?dG:hG),r)}function mG(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function gG(e,t,n){let{routesMeta:r}=e,s={},d="/",p=[];for(let i=0;i<r.length;++i){let x=r[i],S=i===r.length-1,T=d==="/"?t:t.slice(d.length)||"/",M=i$({path:x.relativePath,caseSensitive:x.caseSensitive,end:S},T),$=x.route;if(!M&&S&&n&&!r[r.length-1].route.index&&(M=i$({path:x.relativePath,caseSensitive:x.caseSensitive,end:!1},T)),!M)return null;Object.assign(s,M.params),p.push({params:s,pathname:Md([d,M.pathname]),pathnameBase:wG(Md([d,M.pathnameBase])),route:$}),M.pathnameBase!=="/"&&(d=Md([d,M.pathnameBase]))}return p}function i$(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=vG(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let d=s[0],p=d.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:r.reduce((S,T,M)=>{let{paramName:$,isOptional:L}=T;if($==="*"){let V=i[M]||"";p=d.slice(0,d.length-V.length).replace(/(.)\/+$/,"$1")}const N=i[M];return L&&!N?S[$]=void 0:S[$]=(N||"").replace(/%2F/g,"/"),S},{}),pathname:d,pathnameBase:p,pattern:e}}function vG(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),fF(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,i,x)=>(r.push({paramName:i,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function yG(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return fF(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function tP(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function _G(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Im(e):e;return{pathname:n?n.startsWith("/")?n:xG(n,t):t,search:SG(r),hash:CG(s)}}function xG(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function S2(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bG(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function nP(e,t){let n=bG(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function rP(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Im(e):(s=q0({},e),qo(!s.pathname||!s.pathname.includes("?"),S2("?","pathname","search",s)),qo(!s.pathname||!s.pathname.includes("#"),S2("#","pathname","hash",s)),qo(!s.search||!s.search.includes("#"),S2("#","search","hash",s)));let d=e===""||s.pathname==="",p=d?"/":s.pathname,i;if(p==null)i=n;else{let M=t.length-1;if(!r&&p.startsWith("..")){let $=p.split("/");for(;$[0]==="..";)$.shift(),M-=1;s.pathname=$.join("/")}i=M>=0?t[M]:"/"}let x=_G(s,i),S=p&&p!=="/"&&p.endsWith("/"),T=(d||p===".")&&n.endsWith("/");return!x.pathname.endsWith("/")&&(S||T)&&(x.pathname+="/"),x}const Md=e=>e.join("/").replace(/\/\/+/g,"/"),wG=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),SG=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,CG=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function EG(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const gF=["post","put","patch","delete"];new Set(gF);const TG=["get",...gF];new Set(TG);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function K0(){return K0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K0.apply(this,arguments)}const iP=_.createContext(null),IG=_.createContext(null),Bd=_.createContext(null),nw=_.createContext(null),Tc=_.createContext({outlet:null,matches:[],isDataRoute:!1}),vF=_.createContext(null);function MG(e,t){let{relative:n}=t===void 0?{}:t;Mm()||qo(!1);let{basename:r,navigator:s}=_.useContext(Bd),{hash:d,pathname:p,search:i}=xF(e,{relative:n}),x=p;return r!=="/"&&(x=p==="/"?r:Md([r,p])),s.createHref({pathname:x,search:i,hash:d})}function Mm(){return _.useContext(nw)!=null}function of(){return Mm()||qo(!1),_.useContext(nw).location}function yF(e){_.useContext(Bd).static||_.useLayoutEffect(e)}function ql(){let{isDataRoute:e}=_.useContext(Tc);return e?HG():PG()}function PG(){Mm()||qo(!1);let e=_.useContext(iP),{basename:t,future:n,navigator:r}=_.useContext(Bd),{matches:s}=_.useContext(Tc),{pathname:d}=of(),p=JSON.stringify(nP(s,n.v7_relativeSplatPath)),i=_.useRef(!1);return yF(()=>{i.current=!0}),_.useCallback(function(S,T){if(T===void 0&&(T={}),!i.current)return;if(typeof S=="number"){r.go(S);return}let M=rP(S,JSON.parse(p),d,T.relative==="path");e==null&&t!=="/"&&(M.pathname=M.pathname==="/"?t:Md([t,M.pathname])),(T.replace?r.replace:r.push)(M,T.state,T)},[t,r,p,d,e])}const RG=_.createContext(null);function OG(e){let t=_.useContext(Tc).outlet;return t&&_.createElement(RG.Provider,{value:e},t)}function _F(){let{matches:e}=_.useContext(Tc),t=e[e.length-1];return t?t.params:{}}function xF(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=_.useContext(Bd),{matches:s}=_.useContext(Tc),{pathname:d}=of(),p=JSON.stringify(nP(s,r.v7_relativeSplatPath));return _.useMemo(()=>rP(e,JSON.parse(p),d,n==="path"),[e,p,d,n])}function AG(e,t){return DG(e,t)}function DG(e,t,n,r){Mm()||qo(!1);let{navigator:s}=_.useContext(Bd),{matches:d}=_.useContext(Tc),p=d[d.length-1],i=p?p.params:{};p&&p.pathname;let x=p?p.pathnameBase:"/";p&&p.route;let S=of(),T;if(t){var M;let B=typeof t=="string"?Im(t):t;x==="/"||(M=B.pathname)!=null&&M.startsWith(x)||qo(!1),T=B}else T=S;let $=T.pathname||"/",L=$;if(x!=="/"){let B=x.replace(/^\//,"").split("/");L="/"+$.replace(/^\//,"").split("/").slice(B.length).join("/")}let N=oG(e,{pathname:L}),V=NG(N&&N.map(B=>Object.assign({},B,{params:Object.assign({},i,B.params),pathname:Md([x,s.encodeLocation?s.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?x:Md([x,s.encodeLocation?s.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),d,n,r);return t&&V?_.createElement(nw.Provider,{value:{location:K0({pathname:"/",search:"",hash:"",state:null,key:"default"},T),navigationType:md.Pop}},V):V}function $G(){let e=VG(),t=EG(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},t),n?_.createElement("pre",{style:s},n):null,null)}const kG=_.createElement($G,null);class zG extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?_.createElement(Tc.Provider,{value:this.props.routeContext},_.createElement(vF.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function LG(e){let{routeContext:t,match:n,children:r}=e,s=_.useContext(iP);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(Tc.Provider,{value:t},r)}function NG(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var d;if(!n)return null;if(n.errors)e=n.matches;else if((d=r)!=null&&d.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let p=e,i=(s=n)==null?void 0:s.errors;if(i!=null){let T=p.findIndex(M=>M.route.id&&(i==null?void 0:i[M.route.id])!==void 0);T>=0||qo(!1),p=p.slice(0,Math.min(p.length,T+1))}let x=!1,S=-1;if(n&&r&&r.v7_partialHydration)for(let T=0;T<p.length;T++){let M=p[T];if((M.route.HydrateFallback||M.route.hydrateFallbackElement)&&(S=T),M.route.id){let{loaderData:$,errors:L}=n,N=M.route.loader&&$[M.route.id]===void 0&&(!L||L[M.route.id]===void 0);if(M.route.lazy||N){x=!0,S>=0?p=p.slice(0,S+1):p=[p[0]];break}}}return p.reduceRight((T,M,$)=>{let L,N=!1,V=null,B=null;n&&(L=i&&M.route.id?i[M.route.id]:void 0,V=M.route.errorElement||kG,x&&(S<0&&$===0?(N=!0,B=null):S===$&&(N=!0,B=M.route.hydrateFallbackElement||null)));let j=t.concat(p.slice(0,$+1)),H=()=>{let W;return L?W=V:N?W=B:M.route.Component?W=_.createElement(M.route.Component,null):M.route.element?W=M.route.element:W=T,_.createElement(LG,{match:M,routeContext:{outlet:T,matches:j,isDataRoute:n!=null},children:W})};return n&&(M.route.ErrorBoundary||M.route.errorElement||$===0)?_.createElement(zG,{location:n.location,revalidation:n.revalidation,component:V,error:L,children:H(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):H()},null)}var bF=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(bF||{}),m1=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(m1||{});function FG(e){let t=_.useContext(iP);return t||qo(!1),t}function BG(e){let t=_.useContext(IG);return t||qo(!1),t}function jG(e){let t=_.useContext(Tc);return t||qo(!1),t}function wF(e){let t=jG(),n=t.matches[t.matches.length-1];return n.route.id||qo(!1),n.route.id}function VG(){var e;let t=_.useContext(vF),n=BG(m1.UseRouteError),r=wF(m1.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function HG(){let{router:e}=FG(bF.UseNavigateStable),t=wF(m1.UseNavigateStable),n=_.useRef(!1);return yF(()=>{n.current=!0}),_.useCallback(function(s,d){d===void 0&&(d={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,K0({fromRouteId:t},d)))},[e,t])}const o$={};function UG(e,t){o$[t]||(o$[t]=!0,console.warn(t))}const a$=(e,t,n)=>UG(e,"⚠️ React Router Future Flag Warning: "+t+". "+("You can use the `"+e+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function WG(e,t){e!=null&&e.v7_startTransition||a$("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(e!=null&&e.v7_relativeSplatPath)&&!t&&a$("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function a0(e){let{to:t,replace:n,state:r,relative:s}=e;Mm()||qo(!1);let{future:d,static:p}=_.useContext(Bd),{matches:i}=_.useContext(Tc),{pathname:x}=of(),S=ql(),T=rP(t,nP(i,d.v7_relativeSplatPath),x,s==="path"),M=JSON.stringify(T);return _.useEffect(()=>S(JSON.parse(M),{replace:n,state:r,relative:s}),[S,M,s,n,r]),null}function GG(e){return OG(e.context)}function Ho(e){qo(!1)}function qG(e){let{basename:t="/",children:n=null,location:r,navigationType:s=md.Pop,navigator:d,static:p=!1,future:i}=e;Mm()&&qo(!1);let x=t.replace(/^\/*/,"/"),S=_.useMemo(()=>({basename:x,navigator:d,static:p,future:K0({v7_relativeSplatPath:!1},i)}),[x,i,d,p]);typeof r=="string"&&(r=Im(r));let{pathname:T="/",search:M="",hash:$="",state:L=null,key:N="default"}=r,V=_.useMemo(()=>{let B=tP(T,x);return B==null?null:{location:{pathname:B,search:M,hash:$,state:L,key:N},navigationType:s}},[x,T,M,$,L,N,s]);return V==null?null:_.createElement(Bd.Provider,{value:S},_.createElement(nw.Provider,{children:n,value:V}))}function KG(e){let{children:t,location:n}=e;return AG(PT(t),n)}new Promise(()=>{});function PT(e,t){t===void 0&&(t=[]);let n=[];return _.Children.forEach(e,(r,s)=>{if(!_.isValidElement(r))return;let d=[...t,s];if(r.type===_.Fragment){n.push.apply(n,PT(r.props.children,d));return}r.type!==Ho&&qo(!1),!r.props.index||!r.props.children||qo(!1);let p={id:r.props.id||d.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(p.children=PT(r.props.children,d)),n.push(p)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function RT(){return RT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RT.apply(this,arguments)}function XG(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,d;for(d=0;d<r.length;d++)s=r[d],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function ZG(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function YG(e,t){return e.button===0&&(!t||t==="_self")&&!ZG(e)}const JG=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],QG="6";try{window.__reactRouterVersion=QG}catch{}const eq="startTransition",s$=my[eq];function tq(e){let{basename:t,children:n,future:r,window:s}=e,d=_.useRef();d.current==null&&(d.current=nG({window:s,v5Compat:!0}));let p=d.current,[i,x]=_.useState({action:p.action,location:p.location}),{v7_startTransition:S}=r||{},T=_.useCallback(M=>{S&&s$?s$(()=>x(M)):x(M)},[x,S]);return _.useLayoutEffect(()=>p.listen(T),[p,T]),_.useEffect(()=>WG(r),[r]),_.createElement(qG,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:p,future:r})}const nq=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rq=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ba=_.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:d,replace:p,state:i,target:x,to:S,preventScrollReset:T,viewTransition:M}=t,$=XG(t,JG),{basename:L}=_.useContext(Bd),N,V=!1;if(typeof S=="string"&&rq.test(S)&&(N=S,nq))try{let W=new URL(window.location.href),X=S.startsWith("//")?new URL(W.protocol+S):new URL(S),ee=tP(X.pathname,L);X.origin===W.origin&&ee!=null?S=ee+X.search+X.hash:V=!0}catch{}let B=MG(S,{relative:s}),j=iq(S,{replace:p,state:i,target:x,preventScrollReset:T,relative:s,viewTransition:M});function H(W){r&&r(W),W.defaultPrevented||j(W)}return _.createElement("a",RT({},$,{href:N||B,onClick:V||d?r:H,ref:n,target:x}))});var l$;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(l$||(l$={}));var c$;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(c$||(c$={}));function iq(e,t){let{target:n,replace:r,state:s,preventScrollReset:d,relative:p,viewTransition:i}=t===void 0?{}:t,x=ql(),S=of(),T=xF(e,{relative:p});return _.useCallback(M=>{if(YG(M,n)){M.preventDefault();let $=r!==void 0?r:p1(S)===p1(T);x(e,{replace:$,state:s,preventScrollReset:d,relative:p,viewTransition:i})}},[S,x,T,r,s,n,e,d,p,i])}const _c=_.createContext(),oq=({children:e})=>{const[t,n]=_.useState(null),[r,s]=_.useState(!0),[d,p]=_.useState(null);_.useEffect(()=>{const M=localStorage.getItem("user"),$=localStorage.getItem("token");try{M&&n(JSON.parse(M)),$&&p($)}catch(L){console.error("Error parsing stored data:",L),localStorage.removeItem("user"),localStorage.removeItem("token")}finally{s(!1)}},[]);const i=M=>{localStorage.setItem("token",M),p(M)},x=M=>{localStorage.setItem("user",JSON.stringify(M)),n(M)},S=()=>{localStorage.clear(),p(null),n(null)},T=()=>{S()};return he.jsx(_c.Provider,{value:{handleSaveToken:i,removeToken:S,logout:T,handleSaveUser:x,token:d,loading:r,user:t},children:e})};var SF={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var d="",p=0;p<arguments.length;p++){var i=arguments[p];i&&(d=s(d,r(i)))}return d}function r(d){if(typeof d=="string"||typeof d=="number")return d;if(typeof d!="object")return"";if(Array.isArray(d))return n.apply(null,d);if(d.toString!==Object.prototype.toString&&!d.toString.toString().includes("[native code]"))return d.toString();var p="";for(var i in d)t.call(d,i)&&d[i]&&(p=s(p,i));return p}function s(d,p){return p?d?d+" "+p:d+p:d}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(SF);var aq=SF.exports;const pt=hl(aq);function qt(){return qt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qt.apply(null,arguments)}var CF={exports:{}},ro={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oP=Symbol.for("react.element"),aP=Symbol.for("react.portal"),rw=Symbol.for("react.fragment"),iw=Symbol.for("react.strict_mode"),ow=Symbol.for("react.profiler"),aw=Symbol.for("react.provider"),sw=Symbol.for("react.context"),sq=Symbol.for("react.server_context"),lw=Symbol.for("react.forward_ref"),cw=Symbol.for("react.suspense"),uw=Symbol.for("react.suspense_list"),dw=Symbol.for("react.memo"),hw=Symbol.for("react.lazy"),lq=Symbol.for("react.offscreen"),EF;EF=Symbol.for("react.module.reference");function fl(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case oP:switch(e=e.type,e){case rw:case ow:case iw:case cw:case uw:return e;default:switch(e=e&&e.$$typeof,e){case sq:case sw:case lw:case hw:case dw:case aw:return e;default:return t}}case aP:return t}}}ro.ContextConsumer=sw;ro.ContextProvider=aw;ro.Element=oP;ro.ForwardRef=lw;ro.Fragment=rw;ro.Lazy=hw;ro.Memo=dw;ro.Portal=aP;ro.Profiler=ow;ro.StrictMode=iw;ro.Suspense=cw;ro.SuspenseList=uw;ro.isAsyncMode=function(){return!1};ro.isConcurrentMode=function(){return!1};ro.isContextConsumer=function(e){return fl(e)===sw};ro.isContextProvider=function(e){return fl(e)===aw};ro.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===oP};ro.isForwardRef=function(e){return fl(e)===lw};ro.isFragment=function(e){return fl(e)===rw};ro.isLazy=function(e){return fl(e)===hw};ro.isMemo=function(e){return fl(e)===dw};ro.isPortal=function(e){return fl(e)===aP};ro.isProfiler=function(e){return fl(e)===ow};ro.isStrictMode=function(e){return fl(e)===iw};ro.isSuspense=function(e){return fl(e)===cw};ro.isSuspenseList=function(e){return fl(e)===uw};ro.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===rw||e===ow||e===iw||e===cw||e===uw||e===lq||typeof e=="object"&&e!==null&&(e.$$typeof===hw||e.$$typeof===dw||e.$$typeof===aw||e.$$typeof===sw||e.$$typeof===lw||e.$$typeof===EF||e.getModuleId!==void 0)};ro.typeOf=fl;CF.exports=ro;var x0=CF.exports;function Ha(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[];return Ft.Children.forEach(e,function(r){r==null&&!t.keepEmpty||(Array.isArray(r)?n=n.concat(Ha(r)):x0.isFragment(r)&&r.props?n=n.concat(Ha(r.props.children,t)):n.push(r))}),n}var OT={},cq=function(t){};function uq(e,t){}function dq(e,t){}function hq(){OT={}}function TF(e,t,n){!t&&!OT[n]&&(e(!1,n),OT[n]=!0)}function go(e,t){TF(uq,e,t)}function IF(e,t){TF(dq,e,t)}go.preMessage=cq;go.resetWarned=hq;go.noteOnce=IF;function cr(e){"@babel/helpers - typeof";return cr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cr(e)}function fq(e,t){if(cr(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(cr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function MF(e){var t=fq(e,"string");return cr(t)=="symbol"?t:t+""}function De(e,t,n){return(t=MF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?u$(Object(n),!0).forEach(function(r){De(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function X0(e){return e instanceof HTMLElement||e instanceof SVGElement}function PF(e){return e&&cr(e)==="object"&&X0(e.nativeElement)?e.nativeElement:X0(e)?e:null}function b0(e){var t=PF(e);if(t)return t;if(e instanceof Ft.Component){var n;return(n=G0.findDOMNode)===null||n===void 0?void 0:n.call(G0,e)}return null}function af(e,t,n){var r=_.useRef({});return(!("value"in r.current)||n(r.current.condition,t))&&(r.current.value=e(),r.current.condition=t),r.current.value}var Z0=function(t,n){typeof t=="function"?t(n):cr(t)==="object"&&t&&"current"in t&&(t.current=n)},Ua=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var s=n.filter(Boolean);return s.length<=1?s[0]:function(d){n.forEach(function(p){Z0(p,d)})}},lu=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return af(function(){return Ua.apply(void 0,n)},n,function(s,d){return s.length!==d.length||s.every(function(p,i){return p!==d[i]})})},bc=function(t){var n,r,s=x0.isMemo(t)?t.type.type:t.type;return!(typeof s=="function"&&!((n=s.prototype)!==null&&n!==void 0&&n.render)&&s.$$typeof!==x0.ForwardRef||typeof t=="function"&&!((r=t.prototype)!==null&&r!==void 0&&r.render)&&t.$$typeof!==x0.ForwardRef)};function AT(e){return _.isValidElement(e)&&!x0.isFragment(e)}var pq=function(t){return AT(t)&&bc(t)};Number(_.version.split(".")[0])>=19;var DT=_.createContext(null);function mq(e){var t=e.children,n=e.onBatchResize,r=_.useRef(0),s=_.useRef([]),d=_.useContext(DT),p=_.useCallback(function(i,x,S){r.current+=1;var T=r.current;s.current.push({size:i,element:x,data:S}),Promise.resolve().then(function(){T===r.current&&(n==null||n(s.current),s.current=[])}),d==null||d(i,x,S)},[n,d]);return _.createElement(DT.Provider,{value:p},t)}var RF=function(){if(typeof Map<"u")return Map;function e(t,n){var r=-1;return t.some(function(s,d){return s[0]===n?(r=d,!0):!1}),r}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(n){var r=e(this.__entries__,n),s=this.__entries__[r];return s&&s[1]},t.prototype.set=function(n,r){var s=e(this.__entries__,n);~s?this.__entries__[s][1]=r:this.__entries__.push([n,r])},t.prototype.delete=function(n){var r=this.__entries__,s=e(r,n);~s&&r.splice(s,1)},t.prototype.has=function(n){return!!~e(this.__entries__,n)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(n,r){r===void 0&&(r=null);for(var s=0,d=this.__entries__;s<d.length;s++){var p=d[s];n.call(r,p[1],p[0])}},t}()}(),$T=typeof window<"u"&&typeof document<"u"&&window.document===document,g1=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),gq=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(g1):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),vq=2;function yq(e,t){var n=!1,r=!1,s=0;function d(){n&&(n=!1,e()),r&&i()}function p(){gq(d)}function i(){var x=Date.now();if(n){if(x-s<vq)return;r=!0}else n=!0,r=!1,setTimeout(p,t);s=x}return i}var _q=20,xq=["top","right","bottom","left","width","height","size","weight"],bq=typeof MutationObserver<"u",wq=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=yq(this.refresh.bind(this),_q)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var n=this.observers_,r=n.indexOf(t);~r&&n.splice(r,1),!n.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return t.forEach(function(n){return n.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!$T||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),bq?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!$T||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var n=t.propertyName,r=n===void 0?"":n,s=xq.some(function(d){return!!~r.indexOf(d)});s&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),OF=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var s=r[n];Object.defineProperty(e,s,{value:t[s],enumerable:!1,writable:!1,configurable:!0})}return e},lm=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||g1},AF=fw(0,0,0,0);function v1(e){return parseFloat(e)||0}function d$(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(r,s){var d=e["border-"+s+"-width"];return r+v1(d)},0)}function Sq(e){for(var t=["top","right","bottom","left"],n={},r=0,s=t;r<s.length;r++){var d=s[r],p=e["padding-"+d];n[d]=v1(p)}return n}function Cq(e){var t=e.getBBox();return fw(0,0,t.width,t.height)}function Eq(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return AF;var r=lm(e).getComputedStyle(e),s=Sq(r),d=s.left+s.right,p=s.top+s.bottom,i=v1(r.width),x=v1(r.height);if(r.boxSizing==="border-box"&&(Math.round(i+d)!==t&&(i-=d$(r,"left","right")+d),Math.round(x+p)!==n&&(x-=d$(r,"top","bottom")+p)),!Iq(e)){var S=Math.round(i+d)-t,T=Math.round(x+p)-n;Math.abs(S)!==1&&(i-=S),Math.abs(T)!==1&&(x-=T)}return fw(s.left,s.top,i,x)}var Tq=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof lm(e).SVGGraphicsElement}:function(e){return e instanceof lm(e).SVGElement&&typeof e.getBBox=="function"}}();function Iq(e){return e===lm(e).document.documentElement}function Mq(e){return $T?Tq(e)?Cq(e):Eq(e):AF}function Pq(e){var t=e.x,n=e.y,r=e.width,s=e.height,d=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,p=Object.create(d.prototype);return OF(p,{x:t,y:n,width:r,height:s,top:n,right:t+r,bottom:s+n,left:t}),p}function fw(e,t,n,r){return{x:e,y:t,width:n,height:r}}var Rq=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=fw(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=Mq(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),Oq=function(){function e(t,n){var r=Pq(n);OF(this,{target:t,contentRect:r})}return e}(),Aq=function(){function e(t,n,r){if(this.activeObservations_=[],this.observations_=new RF,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=n,this.callbackCtx_=r}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof lm(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)||(n.set(t,new Rq(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof lm(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)&&(n.delete(t),n.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&t.activeObservations_.push(n)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,n=this.activeObservations_.map(function(r){return new Oq(r.target,r.broadcastRect())});this.callback_.call(t,n,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),DF=typeof WeakMap<"u"?new WeakMap:new RF,$F=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=wq.getInstance(),r=new Aq(t,n,this);DF.set(this,r)}return e}();["observe","unobserve","disconnect"].forEach(function(e){$F.prototype[e]=function(){var t;return(t=DF.get(this))[e].apply(t,arguments)}});var Dq=function(){return typeof g1.ResizeObserver<"u"?g1.ResizeObserver:$F}(),gd=new Map;function $q(e){e.forEach(function(t){var n,r=t.target;(n=gd.get(r))===null||n===void 0||n.forEach(function(s){return s(r)})})}var kF=new Dq($q);function kq(e,t){gd.has(e)||(gd.set(e,new Set),kF.observe(e)),gd.get(e).add(t)}function zq(e,t){gd.has(e)&&(gd.get(e).delete(t),gd.get(e).size||(kF.unobserve(e),gd.delete(e)))}function zo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,MF(r.key),r)}}function Lo(e,t,n){return t&&h$(e.prototype,t),n&&h$(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Y0(e,t){return Y0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Y0(e,t)}function Kl(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y0(e,t)}function J0(e){return J0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},J0(e)}function sP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sP=function(){return!!e})()}function An(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lq(e,t){if(t&&(cr(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return An(e)}function Xl(e){var t=sP();return function(){var n,r=J0(e);if(t){var s=J0(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return Lq(this,n)}}var Nq=function(e){Kl(n,e);var t=Xl(n);function n(){return zo(this,n),t.apply(this,arguments)}return Lo(n,[{key:"render",value:function(){return this.props.children}}]),n}(_.Component);function Fq(e,t){var n=e.children,r=e.disabled,s=_.useRef(null),d=_.useRef(null),p=_.useContext(DT),i=typeof n=="function",x=i?n(s):n,S=_.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),T=!i&&_.isValidElement(x)&&bc(x),M=T?x.ref:null,$=lu(M,s),L=function(){var j;return b0(s.current)||(s.current&&cr(s.current)==="object"?b0((j=s.current)===null||j===void 0?void 0:j.nativeElement):null)||b0(d.current)};_.useImperativeHandle(t,function(){return L()});var N=_.useRef(e);N.current=e;var V=_.useCallback(function(B){var j=N.current,H=j.onResize,W=j.data,X=B.getBoundingClientRect(),ee=X.width,J=X.height,Y=B.offsetWidth,re=B.offsetHeight,se=Math.floor(ee),ae=Math.floor(J);if(S.current.width!==se||S.current.height!==ae||S.current.offsetWidth!==Y||S.current.offsetHeight!==re){var ce={width:se,height:ae,offsetWidth:Y,offsetHeight:re};S.current=ce;var Ce=Y===Math.round(ee)?ee:Y,we=re===Math.round(J)?J:re,ge=We(We({},ce),{},{offsetWidth:Ce,offsetHeight:we});p==null||p(ge,B,W),H&&Promise.resolve().then(function(){H(ge,B)})}},[]);return _.useEffect(function(){var B=L();return B&&!r&&kq(B,V),function(){return zq(B,V)}},[s.current,r]),_.createElement(Nq,{ref:d},T?_.cloneElement(x,{ref:$}):x)}var Bq=_.forwardRef(Fq),jq="rc-observer-key";function Vq(e,t){var n=e.children,r=typeof n=="function"?[n]:Ha(n);return r.map(function(s,d){var p=(s==null?void 0:s.key)||"".concat(jq,"-").concat(d);return _.createElement(Bq,qt({},e,{key:p,ref:d===0?t:void 0}),s)})}var ga=_.forwardRef(Vq);ga.Collection=mq;function vo(e,t){var n=Object.assign({},e);return Array.isArray(t)&&t.forEach(function(r){delete n[r]}),n}function kT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Hq(e){if(Array.isArray(e))return kT(e)}function zF(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lP(e,t){if(e){if(typeof e=="string")return kT(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kT(e,t):void 0}}function Uq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function un(e){return Hq(e)||zF(e)||lP(e)||Uq()}var LF=function(t){return+setTimeout(t,16)},NF=function(t){return clearTimeout(t)};typeof window<"u"&&"requestAnimationFrame"in window&&(LF=function(t){return window.requestAnimationFrame(t)},NF=function(t){return window.cancelAnimationFrame(t)});var f$=0,cP=new Map;function FF(e){cP.delete(e)}var ui=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;f$+=1;var r=f$;function s(d){if(d===0)FF(r),t();else{var p=LF(function(){s(d-1)});cP.set(r,p)}}return s(n),r};ui.cancel=function(e){var t=cP.get(e);return FF(e),NF(t)};function BF(e){if(Array.isArray(e))return e}function Wq(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,d,p,i=[],x=!0,S=!1;try{if(d=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;x=!1}else for(;!(x=(r=d.call(n)).done)&&(i.push(r.value),i.length!==t);x=!0);}catch(T){S=!0,s=T}finally{try{if(!x&&n.return!=null&&(p=n.return(),Object(p)!==p))return}finally{if(S)throw s}}return i}}function jF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ot(e,t){return BF(e)||Wq(e,t)||lP(e,t)||jF()}function Q0(e){for(var t=0,n,r=0,s=e.length;s>=4;++r,s-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}function Ma(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function zT(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}var p$="data-rc-order",m$="data-rc-priority",Gq="rc-util-key",LT=new Map;function VF(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):Gq}function pw(e){if(e.attachTo)return e.attachTo;var t=document.querySelector("head");return t||document.body}function qq(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function uP(e){return Array.from((LT.get(e)||e).children).filter(function(t){return t.tagName==="STYLE"})}function HF(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Ma())return null;var n=t.csp,r=t.prepend,s=t.priority,d=s===void 0?0:s,p=qq(r),i=p==="prependQueue",x=document.createElement("style");x.setAttribute(p$,p),i&&d&&x.setAttribute(m$,"".concat(d)),n!=null&&n.nonce&&(x.nonce=n==null?void 0:n.nonce),x.innerHTML=e;var S=pw(t),T=S.firstChild;if(r){if(i){var M=(t.styles||uP(S)).filter(function($){if(!["prepend","prependQueue"].includes($.getAttribute(p$)))return!1;var L=Number($.getAttribute(m$)||0);return d>=L});if(M.length)return S.insertBefore(x,M[M.length-1].nextSibling),x}S.insertBefore(x,T)}else S.appendChild(x);return x}function UF(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=pw(t);return(t.styles||uP(n)).find(function(r){return r.getAttribute(VF(t))===e})}function ey(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=UF(e,t);if(n){var r=pw(t);r.removeChild(n)}}function Kq(e,t){var n=LT.get(e);if(!n||!zT(document,n)){var r=HF("",t),s=r.parentNode;LT.set(e,s),e.removeChild(r)}}function Jc(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=pw(n),s=uP(r),d=We(We({},n),{},{styles:s});Kq(r,d);var p=UF(t,d);if(p){var i,x;if((i=d.csp)!==null&&i!==void 0&&i.nonce&&p.nonce!==((x=d.csp)===null||x===void 0?void 0:x.nonce)){var S;p.nonce=(S=d.csp)===null||S===void 0?void 0:S.nonce}return p.innerHTML!==e&&(p.innerHTML=e),p}var T=HF(e,d);return T.setAttribute(VF(d),t),T}function Xq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function Er(e,t){if(e==null)return{};var n,r,s=Xq(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(r=0;r<d.length;r++)n=d[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function wc(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=new Set;function s(d,p){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,x=r.has(d);if(go(!x,"Warning: There may be circular references"),x)return!1;if(d===p)return!0;if(n&&i>1)return!1;r.add(d);var S=i+1;if(Array.isArray(d)){if(!Array.isArray(p)||d.length!==p.length)return!1;for(var T=0;T<d.length;T++)if(!s(d[T],p[T],S))return!1;return!0}if(d&&p&&cr(d)==="object"&&cr(p)==="object"){var M=Object.keys(d);return M.length!==Object.keys(p).length?!1:M.every(function($){return s(d[$],p[$],S)})}return!1}return s(e,t)}var Zq="%";function NT(e){return e.join(Zq)}var Yq=function(){function e(t){zo(this,e),De(this,"instanceId",void 0),De(this,"cache",new Map),this.instanceId=t}return Lo(e,[{key:"get",value:function(n){return this.opGet(NT(n))}},{key:"opGet",value:function(n){return this.cache.get(n)||null}},{key:"update",value:function(n,r){return this.opUpdate(NT(n),r)}},{key:"opUpdate",value:function(n,r){var s=this.cache.get(n),d=r(s);d===null?this.cache.delete(n):this.cache.set(n,d)}}]),e}(),cm="data-token-hash",jl="data-css-hash",vd="__cssinjs_instance__";function Jq(){var e=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var t=document.body.querySelectorAll("style[".concat(jl,"]"))||[],n=document.head.firstChild;Array.from(t).forEach(function(s){s[vd]=s[vd]||e,s[vd]===e&&document.head.insertBefore(s,n)});var r={};Array.from(document.querySelectorAll("style[".concat(jl,"]"))).forEach(function(s){var d=s.getAttribute(jl);if(r[d]){if(s[vd]===e){var p;(p=s.parentNode)===null||p===void 0||p.removeChild(s)}}else r[d]=!0})}return new Yq(e)}var mw=_.createContext({hashPriority:"low",cache:Jq(),defaultCache:!0});function Qq(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var dP=function(){function e(){zo(this,e),De(this,"cache",void 0),De(this,"keys",void 0),De(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return Lo(e,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(n){var r,s,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,p={map:this.cache};return n.forEach(function(i){if(!p)p=void 0;else{var x;p=(x=p)===null||x===void 0||(x=x.map)===null||x===void 0?void 0:x.get(i)}}),(r=p)!==null&&r!==void 0&&r.value&&d&&(p.value[1]=this.cacheCallTimes++),(s=p)===null||s===void 0?void 0:s.value}},{key:"get",value:function(n){var r;return(r=this.internalGet(n,!0))===null||r===void 0?void 0:r[0]}},{key:"has",value:function(n){return!!this.internalGet(n)}},{key:"set",value:function(n,r){var s=this;if(!this.has(n)){if(this.size()+1>e.MAX_CACHE_SIZE+e.MAX_CACHE_OFFSET){var d=this.keys.reduce(function(S,T){var M=ot(S,2),$=M[1];return s.internalGet(T)[1]<$?[T,s.internalGet(T)[1]]:S},[this.keys[0],this.cacheCallTimes]),p=ot(d,1),i=p[0];this.delete(i)}this.keys.push(n)}var x=this.cache;n.forEach(function(S,T){if(T===n.length-1)x.set(S,{value:[r,s.cacheCallTimes++]});else{var M=x.get(S);M?M.map||(M.map=new Map):x.set(S,{map:new Map}),x=x.get(S).map}})}},{key:"deleteByPath",value:function(n,r){var s=n.get(r[0]);if(r.length===1){var d;return s.map?n.set(r[0],{map:s.map}):n.delete(r[0]),(d=s.value)===null||d===void 0?void 0:d[0]}var p=this.deleteByPath(s.map,r.slice(1));return(!s.map||s.map.size===0)&&!s.value&&n.delete(r[0]),p}},{key:"delete",value:function(n){if(this.has(n))return this.keys=this.keys.filter(function(r){return!Qq(r,n)}),this.deleteByPath(this.cache,n)}}]),e}();De(dP,"MAX_CACHE_SIZE",20);De(dP,"MAX_CACHE_OFFSET",5);var g$=0,WF=function(){function e(t){zo(this,e),De(this,"derivatives",void 0),De(this,"id",void 0),this.derivatives=Array.isArray(t)?t:[t],this.id=g$,t.length===0&&(t.length>0,void 0),g$+=1}return Lo(e,[{key:"getDerivativeToken",value:function(n){return this.derivatives.reduce(function(r,s){return s(n,r)},void 0)}}]),e}(),C2=new dP;function FT(e){var t=Array.isArray(e)?e:[e];return C2.has(t)||C2.set(t,new WF(t)),C2.get(t)}var eK=new WeakMap,E2={};function tK(e,t){for(var n=eK,r=0;r<t.length;r+=1){var s=t[r];n.has(s)||n.set(s,new WeakMap),n=n.get(s)}return n.has(E2)||n.set(E2,e()),n.get(E2)}var v$=new WeakMap;function w0(e){var t=v$.get(e)||"";return t||(Object.keys(e).forEach(function(n){var r=e[n];t+=n,r instanceof WF?t+=r.id:r&&cr(r)==="object"?t+=w0(r):t+=r}),t=Q0(t),v$.set(e,t)),t}function y$(e,t){return Q0("".concat(t,"_").concat(w0(e)))}var BT=Ma();function nt(e){return typeof e=="number"?"".concat(e,"px"):e}function y1(e,t,n){var r,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(d)return e;var p=We(We({},s),{},(r={},De(r,cm,t),De(r,jl,n),r)),i=Object.keys(p).map(function(x){var S=p[x];return S?"".concat(x,'="').concat(S,'"'):null}).filter(function(x){return x}).join(" ");return"<style ".concat(i,">").concat(e,"</style>")}var Pb=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(n?"".concat(n,"-"):"").concat(t).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},nK=function(t,n,r){return Object.keys(t).length?".".concat(n).concat(r!=null&&r.scope?".".concat(r.scope):"","{").concat(Object.entries(t).map(function(s){var d=ot(s,2),p=d[0],i=d[1];return"".concat(p,":").concat(i,";")}).join(""),"}"):""},GF=function(t,n,r){var s={},d={};return Object.entries(t).forEach(function(p){var i,x,S=ot(p,2),T=S[0],M=S[1];if(r!=null&&(i=r.preserve)!==null&&i!==void 0&&i[T])d[T]=M;else if((typeof M=="string"||typeof M=="number")&&!(r!=null&&(x=r.ignore)!==null&&x!==void 0&&x[T])){var $,L=Pb(T,r==null?void 0:r.prefix);s[L]=typeof M=="number"&&!(r!=null&&($=r.unitless)!==null&&$!==void 0&&$[T])?"".concat(M,"px"):String(M),d[T]="var(".concat(L,")")}}),[d,nK(s,n,{scope:r==null?void 0:r.scope})]},_$=Ma()?_.useLayoutEffect:_.useEffect,Xr=function(t,n){var r=_.useRef(!0);_$(function(){return t(r.current)},n),_$(function(){return r.current=!1,function(){r.current=!0}},[])},_1=function(t,n){Xr(function(r){if(!r)return t()},n)},rK=We({},my),x$=rK.useInsertionEffect,iK=function(t,n,r){_.useMemo(t,r),Xr(function(){return n(!0)},r)},oK=x$?function(e,t,n){return x$(function(){return e(),t()},n)}:iK,aK=We({},my),sK=aK.useInsertionEffect,lK=function(t){var n=[],r=!1;function s(d){r||n.push(d)}return _.useEffect(function(){return r=!1,function(){r=!0,n.length&&n.forEach(function(d){return d()})}},t),s},cK=function(){return function(t){t()}},uK=typeof sK<"u"?lK:cK;function hP(e,t,n,r,s){var d=_.useContext(mw),p=d.cache,i=[e].concat(un(t)),x=NT(i),S=uK([x]),T=function(N){p.opUpdate(x,function(V){var B=V||[void 0,void 0],j=ot(B,2),H=j[0],W=H===void 0?0:H,X=j[1],ee=X,J=ee||n(),Y=[W,J];return N?N(Y):Y})};_.useMemo(function(){T()},[x]);var M=p.opGet(x),$=M[1];return oK(function(){s==null||s($)},function(L){return T(function(N){var V=ot(N,2),B=V[0],j=V[1];return L&&B===0&&(s==null||s($)),[B+1,j]}),function(){p.opUpdate(x,function(N){var V=N||[],B=ot(V,2),j=B[0],H=j===void 0?0:j,W=B[1],X=H-1;return X===0?(S(function(){(L||!p.opGet(x))&&(r==null||r(W,!1))}),null):[H-1,W]})}},[x]),$}var dK={},hK="css",kh=new Map;function fK(e){kh.set(e,(kh.get(e)||0)+1)}function pK(e,t){if(typeof document<"u"){var n=document.querySelectorAll("style[".concat(cm,'="').concat(e,'"]'));n.forEach(function(r){if(r[vd]===t){var s;(s=r.parentNode)===null||s===void 0||s.removeChild(r)}})}}var mK=0;function gK(e,t){kh.set(e,(kh.get(e)||0)-1);var n=Array.from(kh.keys()),r=n.filter(function(s){var d=kh.get(s)||0;return d<=0});n.length-r.length>mK&&r.forEach(function(s){pK(s,t),kh.delete(s)})}var vK=function(t,n,r,s){var d=r.getDerivativeToken(t),p=We(We({},d),n);return s&&(p=s(p)),p},qF="token";function yK(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=_.useContext(mw),s=r.cache.instanceId,d=r.container,p=n.salt,i=p===void 0?"":p,x=n.override,S=x===void 0?dK:x,T=n.formatToken,M=n.getComputedToken,$=n.cssVar,L=tK(function(){return Object.assign.apply(Object,[{}].concat(un(t)))},t),N=w0(L),V=w0(S),B=$?w0($):"",j=hP(qF,[i,e.id,N,V,B],function(){var H,W=M?M(L,S,e):vK(L,S,e,T),X=We({},W),ee="";if($){var J=GF(W,$.key,{prefix:$.prefix,ignore:$.ignore,unitless:$.unitless,preserve:$.preserve}),Y=ot(J,2);W=Y[0],ee=Y[1]}var re=y$(W,i);W._tokenKey=re,X._tokenKey=y$(X,i);var se=(H=$==null?void 0:$.key)!==null&&H!==void 0?H:re;W._themeKey=se,fK(se);var ae="".concat(hK,"-").concat(Q0(re));return W._hashId=ae,[W,ae,X,ee,($==null?void 0:$.key)||""]},function(H){gK(H[0]._themeKey,s)},function(H){var W=ot(H,4),X=W[0],ee=W[3];if($&&ee){var J=Jc(ee,Q0("css-variables-".concat(X._themeKey)),{mark:jl,prepend:"queue",attachTo:d,priority:-999});J[vd]=s,J.setAttribute(cm,X._themeKey)}});return j}var _K=function(t,n,r){var s=ot(t,5),d=s[2],p=s[3],i=s[4],x=r||{},S=x.plain;if(!p)return null;var T=d._tokenKey,M=-999,$={"data-rc-order":"prependQueue","data-rc-priority":"".concat(M)},L=y1(p,i,T,$,S);return[M,T,L]},xK={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},KF="comm",XF="rule",ZF="decl",bK="@import",wK="@keyframes",SK="@layer",YF=Math.abs,fP=String.fromCharCode;function JF(e){return e.trim()}function Rb(e,t,n){return e.replace(t,n)}function CK(e,t,n){return e.indexOf(t,n)}function ty(e,t){return e.charCodeAt(t)|0}function um(e,t,n){return e.slice(t,n)}function mc(e){return e.length}function EK(e){return e.length}function Gx(e,t){return t.push(e),e}var gw=1,dm=1,QF=0,cl=0,Yo=0,Pm="";function pP(e,t,n,r,s,d,p,i){return{value:e,root:t,parent:n,type:r,props:s,children:d,line:gw,column:dm,length:p,return:"",siblings:i}}function TK(){return Yo}function IK(){return Yo=cl>0?ty(Pm,--cl):0,dm--,Yo===10&&(dm=1,gw--),Yo}function Vl(){return Yo=cl<QF?ty(Pm,cl++):0,dm++,Yo===10&&(dm=1,gw++),Yo}function yd(){return ty(Pm,cl)}function Ob(){return cl}function vw(e,t){return um(Pm,e,t)}function ny(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function MK(e){return gw=dm=1,QF=mc(Pm=e),cl=0,[]}function PK(e){return Pm="",e}function T2(e){return JF(vw(cl-1,jT(e===91?e+2:e===40?e+1:e)))}function RK(e){for(;(Yo=yd())&&Yo<33;)Vl();return ny(e)>2||ny(Yo)>3?"":" "}function OK(e,t){for(;--t&&Vl()&&!(Yo<48||Yo>102||Yo>57&&Yo<65||Yo>70&&Yo<97););return vw(e,Ob()+(t<6&&yd()==32&&Vl()==32))}function jT(e){for(;Vl();)switch(Yo){case e:return cl;case 34:case 39:e!==34&&e!==39&&jT(Yo);break;case 40:e===41&&jT(e);break;case 92:Vl();break}return cl}function AK(e,t){for(;Vl()&&e+Yo!==57;)if(e+Yo===84&&yd()===47)break;return"/*"+vw(t,cl-1)+"*"+fP(e===47?e:Vl())}function DK(e){for(;!ny(yd());)Vl();return vw(e,cl)}function $K(e){return PK(Ab("",null,null,null,[""],e=MK(e),0,[0],e))}function Ab(e,t,n,r,s,d,p,i,x){for(var S=0,T=0,M=p,$=0,L=0,N=0,V=1,B=1,j=1,H=0,W="",X=s,ee=d,J=r,Y=W;B;)switch(N=H,H=Vl()){case 40:if(N!=108&&ty(Y,M-1)==58){CK(Y+=Rb(T2(H),"&","&\f"),"&\f",YF(S?i[S-1]:0))!=-1&&(j=-1);break}case 34:case 39:case 91:Y+=T2(H);break;case 9:case 10:case 13:case 32:Y+=RK(N);break;case 92:Y+=OK(Ob()-1,7);continue;case 47:switch(yd()){case 42:case 47:Gx(kK(AK(Vl(),Ob()),t,n,x),x),(ny(N||1)==5||ny(yd()||1)==5)&&mc(Y)&&um(Y,-1,void 0)!==" "&&(Y+=" ");break;default:Y+="/"}break;case 123*V:i[S++]=mc(Y)*j;case 125*V:case 59:case 0:switch(H){case 0:case 125:B=0;case 59+T:j==-1&&(Y=Rb(Y,/\f/g,"")),L>0&&(mc(Y)-M||V===0&&N===47)&&Gx(L>32?w$(Y+";",r,n,M-1,x):w$(Rb(Y," ","")+";",r,n,M-2,x),x);break;case 59:Y+=";";default:if(Gx(J=b$(Y,t,n,S,T,s,i,W,X=[],ee=[],M,d),d),H===123)if(T===0)Ab(Y,t,J,J,X,d,M,i,ee);else switch($===99&&ty(Y,3)===110?100:$){case 100:case 108:case 109:case 115:Ab(e,J,J,r&&Gx(b$(e,J,J,0,0,s,i,W,s,X=[],M,ee),ee),s,ee,M,i,r?X:ee);break;default:Ab(Y,J,J,J,[""],ee,0,i,ee)}}S=T=L=0,V=j=1,W=Y="",M=p;break;case 58:M=1+mc(Y),L=N;default:if(V<1){if(H==123)--V;else if(H==125&&V++==0&&IK()==125)continue}switch(Y+=fP(H),H*V){case 38:j=T>0?1:(Y+="\f",-1);break;case 44:i[S++]=(mc(Y)-1)*j,j=1;break;case 64:yd()===45&&(Y+=T2(Vl())),$=yd(),T=M=mc(W=Y+=DK(Ob())),H++;break;case 45:N===45&&mc(Y)==2&&(V=0)}}return d}function b$(e,t,n,r,s,d,p,i,x,S,T,M){for(var $=s-1,L=s===0?d:[""],N=EK(L),V=0,B=0,j=0;V<r;++V)for(var H=0,W=um(e,$+1,$=YF(B=p[V])),X=e;H<N;++H)(X=JF(B>0?L[H]+" "+W:Rb(W,/&\f/g,L[H])))&&(x[j++]=X);return pP(e,t,n,s===0?XF:i,x,S,T,M)}function kK(e,t,n,r){return pP(e,t,n,KF,fP(TK()),um(e,2,-2),0,r)}function w$(e,t,n,r,s){return pP(e,t,n,ZF,um(e,0,r),um(e,r+1,-1),r,s)}function VT(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function zK(e,t,n,r){switch(e.type){case SK:if(e.children.length)break;case bK:case ZF:return e.return=e.return||e.value;case KF:return"";case wK:return e.return=e.value+"{"+VT(e.children,r)+"}";case XF:if(!mc(e.value=e.props.join(",")))return""}return mc(n=VT(e.children,r))?e.return=e.value+"{"+n+"}":""}var S$="data-ant-cssinjs-cache-path",eB="_FILE_STYLE__",Gh,tB=!0;function LK(){if(!Gh&&(Gh={},Ma())){var e=document.createElement("div");e.className=S$,e.style.position="fixed",e.style.visibility="hidden",e.style.top="-9999px",document.body.appendChild(e);var t=getComputedStyle(e).content||"";t=t.replace(/^"/,"").replace(/"$/,""),t.split(";").forEach(function(s){var d=s.split(":"),p=ot(d,2),i=p[0],x=p[1];Gh[i]=x});var n=document.querySelector("style[".concat(S$,"]"));if(n){var r;tB=!1,(r=n.parentNode)===null||r===void 0||r.removeChild(n)}document.body.removeChild(e)}}function NK(e){return LK(),!!Gh[e]}function FK(e){var t=Gh[e],n=null;if(t&&Ma())if(tB)n=eB;else{var r=document.querySelector("style[".concat(jl,'="').concat(Gh[e],'"]'));r?n=r.innerHTML:delete Gh[e]}return[n,t]}var BK="_skip_check_",nB="_multi_value_";function Db(e){var t=VT($K(e),zK);return t.replace(/\{%%%\:[^;];}/g,";")}function jK(e){return cr(e)==="object"&&e&&(BK in e||nB in e)}function C$(e,t,n){if(!t)return e;var r=".".concat(t),s=n==="low"?":where(".concat(r,")"):r,d=e.split(",").map(function(p){var i,x=p.trim().split(/\s+/),S=x[0]||"",T=((i=S.match(/^\w+/))===null||i===void 0?void 0:i[0])||"";return S="".concat(T).concat(s).concat(S.slice(T.length)),[S].concat(un(x.slice(1))).join(" ")});return d.join(",")}var VK=function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},s=r.root,d=r.injectHash,p=r.parentSelectors,i=n.hashId,x=n.layer;n.path;var S=n.hashPriority,T=n.transformers,M=T===void 0?[]:T;n.linters;var $="",L={};function N(j){var H=j.getName(i);if(!L[H]){var W=e(j.style,n,{root:!1,parentSelectors:p}),X=ot(W,1),ee=X[0];L[H]="@keyframes ".concat(j.getName(i)).concat(ee)}}function V(j){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return j.forEach(function(W){Array.isArray(W)?V(W,H):W&&H.push(W)}),H}var B=V(Array.isArray(t)?t:[t]);return B.forEach(function(j){var H=typeof j=="string"&&!s?{}:j;if(typeof H=="string")$+="".concat(H,`
`);else if(H._keyframe)N(H);else{var W=M.reduce(function(X,ee){var J;return(ee==null||(J=ee.visit)===null||J===void 0?void 0:J.call(ee,X))||X},H);Object.keys(W).forEach(function(X){var ee=W[X];if(cr(ee)==="object"&&ee&&(X!=="animationName"||!ee._keyframe)&&!jK(ee)){var J=!1,Y=X.trim(),re=!1;(s||d)&&i?Y.startsWith("@")?J=!0:Y==="&"?Y=C$("",i,S):Y=C$(X,i,S):s&&!i&&(Y==="&"||Y==="")&&(Y="",re=!0);var se=e(ee,n,{root:re,injectHash:J,parentSelectors:[].concat(un(p),[Y])}),ae=ot(se,2),ce=ae[0],Ce=ae[1];L=We(We({},L),Ce),$+="".concat(Y).concat(ce)}else{let ve=function(de,pe){var fe=de.replace(/[A-Z]/g,function(Ie){return"-".concat(Ie.toLowerCase())}),me=pe;!xK[de]&&typeof me=="number"&&me!==0&&(me="".concat(me,"px")),de==="animationName"&&pe!==null&&pe!==void 0&&pe._keyframe&&(N(pe),me=pe.getName(i)),$+="".concat(fe,":").concat(me,";")};var we,ge=(we=ee==null?void 0:ee.value)!==null&&we!==void 0?we:ee;cr(ee)==="object"&&ee!==null&&ee!==void 0&&ee[nB]&&Array.isArray(ge)?ge.forEach(function(de){ve(X,de)}):ve(X,ge)}})}}),s?x&&($="@layer ".concat(x.name," {").concat($,"}"),x.dependencies&&(L["@layer ".concat(x.name)]=x.dependencies.map(function(j){return"@layer ".concat(j,", ").concat(x.name,";")}).join(`
`))):$="{".concat($,"}"),[$,L]};function rB(e,t){return Q0("".concat(e.join("%")).concat(t))}function HK(){return null}var iB="style";function HT(e,t){var n=e.token,r=e.path,s=e.hashId,d=e.layer,p=e.nonce,i=e.clientOnly,x=e.order,S=x===void 0?0:x,T=_.useContext(mw),M=T.autoClear;T.mock;var $=T.defaultCache,L=T.hashPriority,N=T.container,V=T.ssrInline,B=T.transformers,j=T.linters,H=T.cache,W=T.layer,X=n._tokenKey,ee=[X];W&&ee.push("layer"),ee.push.apply(ee,un(r));var J=BT,Y=hP(iB,ee,function(){var Ce=ee.join("|");if(NK(Ce)){var we=FK(Ce),ge=ot(we,2),ve=ge[0],de=ge[1];if(ve)return[ve,X,de,{},i,S]}var pe=t(),fe=VK(pe,{hashId:s,hashPriority:L,layer:W?d:void 0,path:r.join("-"),transformers:B,linters:j}),me=ot(fe,2),Ie=me[0],Me=me[1],Be=Db(Ie),$e=rB(ee,Be);return[Be,X,$e,Me,i,S]},function(Ce,we){var ge=ot(Ce,3),ve=ge[2];(we||M)&&BT&&ey(ve,{mark:jl})},function(Ce){var we=ot(Ce,4),ge=we[0];we[1];var ve=we[2],de=we[3];if(J&&ge!==eB){var pe={mark:jl,prepend:W?!1:"queue",attachTo:N,priority:S},fe=typeof p=="function"?p():p;fe&&(pe.csp={nonce:fe});var me=[],Ie=[];Object.keys(de).forEach(function(Be){Be.startsWith("@layer")?me.push(Be):Ie.push(Be)}),me.forEach(function(Be){Jc(Db(de[Be]),"_layer-".concat(Be),We(We({},pe),{},{prepend:!0}))});var Me=Jc(ge,ve,pe);Me[vd]=H.instanceId,Me.setAttribute(cm,X),Ie.forEach(function(Be){Jc(Db(de[Be]),"_effect-".concat(Be),pe)})}}),re=ot(Y,3),se=re[0],ae=re[1],ce=re[2];return function(Ce){var we;if(!V||J||!$)we=_.createElement(HK,null);else{var ge;we=_.createElement("style",qt({},(ge={},De(ge,cm,ae),De(ge,jl,ce),ge),{dangerouslySetInnerHTML:{__html:se}}))}return _.createElement(_.Fragment,null,we,Ce)}}var UK=function(t,n,r){var s=ot(t,6),d=s[0],p=s[1],i=s[2],x=s[3],S=s[4],T=s[5],M=r||{},$=M.plain;if(S)return null;var L=d,N={"data-rc-order":"prependQueue","data-rc-priority":"".concat(T)};return L=y1(d,p,i,N,$),x&&Object.keys(x).forEach(function(V){if(!n[V]){n[V]=!0;var B=Db(x[V]),j=y1(B,p,"_effect-".concat(V),N,$);V.startsWith("@layer")?L=j+L:L+=j}}),[T,i,L]},oB="cssVar",WK=function(t,n){var r=t.key,s=t.prefix,d=t.unitless,p=t.ignore,i=t.token,x=t.scope,S=x===void 0?"":x,T=_.useContext(mw),M=T.cache.instanceId,$=T.container,L=i._tokenKey,N=[].concat(un(t.path),[r,S,L]),V=hP(oB,N,function(){var B=n(),j=GF(B,r,{prefix:s,unitless:d,ignore:p,scope:S}),H=ot(j,2),W=H[0],X=H[1],ee=rB(N,X);return[W,X,ee,r]},function(B){var j=ot(B,3),H=j[2];BT&&ey(H,{mark:jl})},function(B){var j=ot(B,3),H=j[1],W=j[2];if(H){var X=Jc(H,W,{mark:jl,prepend:"queue",attachTo:$,priority:-999});X[vd]=M,X.setAttribute(cm,r)}});return V},GK=function(t,n,r){var s=ot(t,4),d=s[1],p=s[2],i=s[3],x=r||{},S=x.plain;if(!d)return null;var T=-999,M={"data-rc-order":"prependQueue","data-rc-priority":"".concat(T)},$=y1(d,i,p,M,S);return[T,p,$]},Wv;Wv={},De(Wv,iB,UK),De(Wv,qF,_K),De(Wv,oB,GK);var Mi=function(){function e(t,n){zo(this,e),De(this,"name",void 0),De(this,"style",void 0),De(this,"_keyframe",!0),this.name=t,this.style=n}return Lo(e,[{key:"getName",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return n?"".concat(n,"-").concat(this.name):this.name}}]),e}();function _p(e){return e.notSplit=!0,e}_p(["borderTop","borderBottom"]),_p(["borderTop"]),_p(["borderBottom"]),_p(["borderLeft","borderRight"]),_p(["borderLeft"]),_p(["borderRight"]);var mP=_.createContext({});function aB(e){return BF(e)||zF(e)||lP(e)||jF()}function zs(e,t){for(var n=e,r=0;r<t.length;r+=1){if(n==null)return;n=n[t[r]]}return n}function sB(e,t,n,r){if(!t.length)return n;var s=aB(t),d=s[0],p=s.slice(1),i;return!e&&typeof d=="number"?i=[]:Array.isArray(e)?i=un(e):i=We({},e),r&&n===void 0&&p.length===1?delete i[d][p[0]]:i[d]=sB(i[d],p,n,r),i}function zl(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return t.length&&r&&n===void 0&&!zs(e,t.slice(0,-1))?e:sB(e,t,n,r)}function qK(e){return cr(e)==="object"&&e!==null&&Object.getPrototypeOf(e)===Object.prototype}function E$(e){return Array.isArray(e)?[]:{}}var KK=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function Vp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=E$(t[0]);return t.forEach(function(s){function d(p,i){var x=new Set(i),S=zs(s,p),T=Array.isArray(S);if(T||qK(S)){if(!x.has(S)){x.add(S);var M=zs(r,p);T?r=zl(r,p,[]):(!M||cr(M)!=="object")&&(r=zl(r,p,E$(S))),KK(S).forEach(function($){d([].concat(un(p),[$]),x)})}}else r=zl(r,p,S)}d([])}),r}function XK(){}const ZK=_.createContext({}),sf=()=>{const e=()=>{};return e.deprecated=XK,e},YK=_.createContext(void 0);var lB={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},JK={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0},QK=We(We({},JK),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"});const cB={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},x1={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},QK),timePickerLocale:Object.assign({},cB)},Rs="${label} is not a valid ${type}",ru={locale:"en",Pagination:lB,DatePicker:x1,TimePicker:cB,Calendar:x1,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:Rs,method:Rs,array:Rs,object:Rs,number:Rs,date:Rs,boolean:Rs,integer:Rs,float:Rs,regexp:Rs,email:Rs,url:Rs,hex:Rs},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}};let $b=Object.assign({},ru.Modal),kb=[];const T$=()=>kb.reduce((e,t)=>Object.assign(Object.assign({},e),t),ru.Modal);function eX(e){if(e){const t=Object.assign({},e);return kb.push(t),$b=T$(),()=>{kb=kb.filter(n=>n!==t),$b=T$()}}$b=Object.assign({},ru.Modal)}function uB(){return $b}const gP=_.createContext(void 0),Zl=(e,t)=>{const n=_.useContext(gP),r=_.useMemo(()=>{var d;const p=t||ru[e],i=(d=n==null?void 0:n[e])!==null&&d!==void 0?d:{};return Object.assign(Object.assign({},typeof p=="function"?p():p),i||{})},[e,t,n]),s=_.useMemo(()=>{const d=n==null?void 0:n.locale;return n!=null&&n.exist&&!d?ru.locale:d},[n]);return[r,s]},tX="internalMark",nX=e=>{const{locale:t={},children:n,_ANT_MARK__:r}=e;_.useEffect(()=>eX(t==null?void 0:t.Modal),[t]);const s=_.useMemo(()=>Object.assign(Object.assign({},t),{exist:!0}),[t]);return _.createElement(gP.Provider,{value:s},n)};function Ea(e,t){rX(e)&&(e="100%");var n=iX(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function qx(e){return Math.min(1,Math.max(0,e))}function rX(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function iX(e){return typeof e=="string"&&e.indexOf("%")!==-1}function dB(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Kx(e){return e<=1?"".concat(Number(e)*100,"%"):e}function Fh(e){return e.length===1?"0"+e:String(e)}function oX(e,t,n){return{r:Ea(e,255)*255,g:Ea(t,255)*255,b:Ea(n,255)*255}}function I$(e,t,n){e=Ea(e,255),t=Ea(t,255),n=Ea(n,255);var r=Math.max(e,t,n),s=Math.min(e,t,n),d=0,p=0,i=(r+s)/2;if(r===s)p=0,d=0;else{var x=r-s;switch(p=i>.5?x/(2-r-s):x/(r+s),r){case e:d=(t-n)/x+(t<n?6:0);break;case t:d=(n-e)/x+2;break;case n:d=(e-t)/x+4;break}d/=6}return{h:d,s:p,l:i}}function I2(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*(6*n):n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function aX(e,t,n){var r,s,d;if(e=Ea(e,360),t=Ea(t,100),n=Ea(n,100),t===0)s=n,d=n,r=n;else{var p=n<.5?n*(1+t):n+t-n*t,i=2*n-p;r=I2(i,p,e+1/3),s=I2(i,p,e),d=I2(i,p,e-1/3)}return{r:r*255,g:s*255,b:d*255}}function UT(e,t,n){e=Ea(e,255),t=Ea(t,255),n=Ea(n,255);var r=Math.max(e,t,n),s=Math.min(e,t,n),d=0,p=r,i=r-s,x=r===0?0:i/r;if(r===s)d=0;else{switch(r){case e:d=(t-n)/i+(t<n?6:0);break;case t:d=(n-e)/i+2;break;case n:d=(e-t)/i+4;break}d/=6}return{h:d,s:x,v:p}}function sX(e,t,n){e=Ea(e,360)*6,t=Ea(t,100),n=Ea(n,100);var r=Math.floor(e),s=e-r,d=n*(1-t),p=n*(1-s*t),i=n*(1-(1-s)*t),x=r%6,S=[n,p,d,d,i,n][x],T=[i,n,n,p,d,d][x],M=[d,d,i,n,n,p][x];return{r:S*255,g:T*255,b:M*255}}function WT(e,t,n,r){var s=[Fh(Math.round(e).toString(16)),Fh(Math.round(t).toString(16)),Fh(Math.round(n).toString(16))];return r&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function lX(e,t,n,r,s){var d=[Fh(Math.round(e).toString(16)),Fh(Math.round(t).toString(16)),Fh(Math.round(n).toString(16)),Fh(cX(r))];return s&&d[0].startsWith(d[0].charAt(1))&&d[1].startsWith(d[1].charAt(1))&&d[2].startsWith(d[2].charAt(1))&&d[3].startsWith(d[3].charAt(1))?d[0].charAt(0)+d[1].charAt(0)+d[2].charAt(0)+d[3].charAt(0):d.join("")}function cX(e){return Math.round(parseFloat(e)*255).toString(16)}function M$(e){return Ds(e)/255}function Ds(e){return parseInt(e,16)}function uX(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var GT={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Pp(e){var t={r:0,g:0,b:0},n=1,r=null,s=null,d=null,p=!1,i=!1;return typeof e=="string"&&(e=fX(e)),typeof e=="object"&&(Hc(e.r)&&Hc(e.g)&&Hc(e.b)?(t=oX(e.r,e.g,e.b),p=!0,i=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Hc(e.h)&&Hc(e.s)&&Hc(e.v)?(r=Kx(e.s),s=Kx(e.v),t=sX(e.h,r,s),p=!0,i="hsv"):Hc(e.h)&&Hc(e.s)&&Hc(e.l)&&(r=Kx(e.s),d=Kx(e.l),t=aX(e.h,r,d),p=!0,i="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=dB(n),{ok:p,format:e.format||i,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var dX="[-\\+]?\\d+%?",hX="[-\\+]?\\d*\\.\\d+%?",_d="(?:".concat(hX,")|(?:").concat(dX,")"),M2="[\\s|\\(]+(".concat(_d,")[,|\\s]+(").concat(_d,")[,|\\s]+(").concat(_d,")\\s*\\)?"),P2="[\\s|\\(]+(".concat(_d,")[,|\\s]+(").concat(_d,")[,|\\s]+(").concat(_d,")[,|\\s]+(").concat(_d,")\\s*\\)?"),Dl={CSS_UNIT:new RegExp(_d),rgb:new RegExp("rgb"+M2),rgba:new RegExp("rgba"+P2),hsl:new RegExp("hsl"+M2),hsla:new RegExp("hsla"+P2),hsv:new RegExp("hsv"+M2),hsva:new RegExp("hsva"+P2),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function fX(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if(GT[e])e=GT[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=Dl.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=Dl.rgba.exec(e),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Dl.hsl.exec(e),n?{h:n[1],s:n[2],l:n[3]}:(n=Dl.hsla.exec(e),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Dl.hsv.exec(e),n?{h:n[1],s:n[2],v:n[3]}:(n=Dl.hsva.exec(e),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Dl.hex8.exec(e),n?{r:Ds(n[1]),g:Ds(n[2]),b:Ds(n[3]),a:M$(n[4]),format:t?"name":"hex8"}:(n=Dl.hex6.exec(e),n?{r:Ds(n[1]),g:Ds(n[2]),b:Ds(n[3]),format:t?"name":"hex"}:(n=Dl.hex4.exec(e),n?{r:Ds(n[1]+n[1]),g:Ds(n[2]+n[2]),b:Ds(n[3]+n[3]),a:M$(n[4]+n[4]),format:t?"name":"hex8"}:(n=Dl.hex3.exec(e),n?{r:Ds(n[1]+n[1]),g:Ds(n[2]+n[2]),b:Ds(n[3]+n[3]),format:t?"name":"hex"}:!1)))))))))}function Hc(e){return!!Dl.CSS_UNIT.exec(String(e))}var Ji=function(){function e(t,n){t===void 0&&(t=""),n===void 0&&(n={});var r;if(t instanceof e)return t;typeof t=="number"&&(t=uX(t)),this.originalInput=t;var s=Pp(t);this.originalInput=t,this.r=s.r,this.g=s.g,this.b=s.b,this.a=s.a,this.roundA=Math.round(100*this.a)/100,this.format=(r=n.format)!==null&&r!==void 0?r:s.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=s.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},e.prototype.getLuminance=function(){var t=this.toRgb(),n,r,s,d=t.r/255,p=t.g/255,i=t.b/255;return d<=.03928?n=d/12.92:n=Math.pow((d+.055)/1.055,2.4),p<=.03928?r=p/12.92:r=Math.pow((p+.055)/1.055,2.4),i<=.03928?s=i/12.92:s=Math.pow((i+.055)/1.055,2.4),.2126*n+.7152*r+.0722*s},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(t){return this.a=dB(t),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){var t=this.toHsl().s;return t===0},e.prototype.toHsv=function(){var t=UT(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},e.prototype.toHsvString=function(){var t=UT(this.r,this.g,this.b),n=Math.round(t.h*360),r=Math.round(t.s*100),s=Math.round(t.v*100);return this.a===1?"hsv(".concat(n,", ").concat(r,"%, ").concat(s,"%)"):"hsva(".concat(n,", ").concat(r,"%, ").concat(s,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var t=I$(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},e.prototype.toHslString=function(){var t=I$(this.r,this.g,this.b),n=Math.round(t.h*360),r=Math.round(t.s*100),s=Math.round(t.l*100);return this.a===1?"hsl(".concat(n,", ").concat(r,"%, ").concat(s,"%)"):"hsla(".concat(n,", ").concat(r,"%, ").concat(s,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(t){return t===void 0&&(t=!1),WT(this.r,this.g,this.b,t)},e.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},e.prototype.toHex8=function(t){return t===void 0&&(t=!1),lX(this.r,this.g,this.b,this.a,t)},e.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},e.prototype.toHexShortString=function(t){return t===void 0&&(t=!1),this.a===1?this.toHexString(t):this.toHex8String(t)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var t=Math.round(this.r),n=Math.round(this.g),r=Math.round(this.b);return this.a===1?"rgb(".concat(t,", ").concat(n,", ").concat(r,")"):"rgba(".concat(t,", ").concat(n,", ").concat(r,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var t=function(n){return"".concat(Math.round(Ea(n,255)*100),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var t=function(n){return Math.round(Ea(n,255)*100)};return this.a===1?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+WT(this.r,this.g,this.b,!1),n=0,r=Object.entries(GT);n<r.length;n++){var s=r[n],d=s[0],p=s[1];if(t===p)return d}return!1},e.prototype.toString=function(t){var n=!!t;t=t??this.format;var r=!1,s=this.a<1&&this.a>=0,d=!n&&s&&(t.startsWith("hex")||t==="name");return d?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(r=this.toRgbString()),t==="prgb"&&(r=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(r=this.toHexString()),t==="hex3"&&(r=this.toHexString(!0)),t==="hex4"&&(r=this.toHex8String(!0)),t==="hex8"&&(r=this.toHex8String()),t==="name"&&(r=this.toName()),t==="hsl"&&(r=this.toHslString()),t==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.l+=t/100,n.l=qx(n.l),new e(n)},e.prototype.brighten=function(t){t===void 0&&(t=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),new e(n)},e.prototype.darken=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.l-=t/100,n.l=qx(n.l),new e(n)},e.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},e.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},e.prototype.desaturate=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.s-=t/100,n.s=qx(n.s),new e(n)},e.prototype.saturate=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.s+=t/100,n.s=qx(n.s),new e(n)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var n=this.toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,new e(n)},e.prototype.mix=function(t,n){n===void 0&&(n=50);var r=this.toRgb(),s=new e(t).toRgb(),d=n/100,p={r:(s.r-r.r)*d+r.r,g:(s.g-r.g)*d+r.g,b:(s.b-r.b)*d+r.b,a:(s.a-r.a)*d+r.a};return new e(p)},e.prototype.analogous=function(t,n){t===void 0&&(t=6),n===void 0&&(n=30);var r=this.toHsl(),s=360/n,d=[this];for(r.h=(r.h-(s*t>>1)+720)%360;--t;)r.h=(r.h+s)%360,d.push(new e(r));return d},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var n=this.toHsv(),r=n.h,s=n.s,d=n.v,p=[],i=1/t;t--;)p.push(new e({h:r,s,v:d})),d=(d+i)%1;return p},e.prototype.splitcomplement=function(){var t=this.toHsl(),n=t.h;return[this,new e({h:(n+72)%360,s:t.s,l:t.l}),new e({h:(n+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var n=this.toRgb(),r=new e(t).toRgb(),s=n.a+r.a*(1-n.a);return new e({r:(n.r*n.a+r.r*r.a*(1-n.a))/s,g:(n.g*n.a+r.g*r.a*(1-n.a))/s,b:(n.b*n.a+r.b*r.a*(1-n.a))/s,a:s})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var n=this.toHsl(),r=n.h,s=[this],d=360/t,p=1;p<t;p++)s.push(new e({h:(r+p*d)%360,s:n.s,l:n.l}));return s},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}(),Xx=2,P$=.16,pX=.05,mX=.05,gX=.15,hB=5,fB=4,vX=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function R$(e){var t=e.r,n=e.g,r=e.b,s=UT(t,n,r);return{h:s.h*360,s:s.s,v:s.v}}function Zx(e){var t=e.r,n=e.g,r=e.b;return"#".concat(WT(t,n,r,!1))}function yX(e,t,n){var r=n/100,s={r:(t.r-e.r)*r+e.r,g:(t.g-e.g)*r+e.g,b:(t.b-e.b)*r+e.b};return s}function O$(e,t,n){var r;return Math.round(e.h)>=60&&Math.round(e.h)<=240?r=n?Math.round(e.h)-Xx*t:Math.round(e.h)+Xx*t:r=n?Math.round(e.h)+Xx*t:Math.round(e.h)-Xx*t,r<0?r+=360:r>=360&&(r-=360),r}function A$(e,t,n){if(e.h===0&&e.s===0)return e.s;var r;return n?r=e.s-P$*t:t===fB?r=e.s+P$:r=e.s+pX*t,r>1&&(r=1),n&&t===hB&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2))}function D$(e,t,n){var r;return n?r=e.v+mX*t:r=e.v-gX*t,r>1&&(r=1),Number(r.toFixed(2))}function ry(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[],r=Pp(e),s=hB;s>0;s-=1){var d=R$(r),p=Zx(Pp({h:O$(d,s,!0),s:A$(d,s,!0),v:D$(d,s,!0)}));n.push(p)}n.push(Zx(r));for(var i=1;i<=fB;i+=1){var x=R$(r),S=Zx(Pp({h:O$(x,i),s:A$(x,i),v:D$(x,i)}));n.push(S)}return t.theme==="dark"?vX.map(function(T){var M=T.index,$=T.opacity,L=Zx(yX(Pp(t.backgroundColor||"#141414"),Pp(n[M]),$*100));return L}):n}var R2={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},qT=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];qT.primary=qT[5];var KT=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];KT.primary=KT[5];var XT=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];XT.primary=XT[5];var b1=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];b1.primary=b1[5];var ZT=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];ZT.primary=ZT[5];var YT=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];YT.primary=YT[5];var JT=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];JT.primary=JT[5];var QT=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];QT.primary=QT[5];var w1=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];w1.primary=w1[5];var eI=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];eI.primary=eI[5];var tI=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];tI.primary=tI[5];var nI=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];nI.primary=nI[5];var rI=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];rI.primary=rI[5];var O2={red:qT,volcano:KT,orange:XT,gold:b1,yellow:ZT,lime:YT,green:JT,cyan:QT,blue:w1,geekblue:eI,purple:tI,magenta:nI,grey:rI};const pB={blue:"#1677FF",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#EB2F96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},iy=Object.assign(Object.assign({},pB),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0});function _X(e,t){let{generateColorPalettes:n,generateNeutralColorPalettes:r}=t;const{colorSuccess:s,colorWarning:d,colorError:p,colorInfo:i,colorPrimary:x,colorBgBase:S,colorTextBase:T}=e,M=n(x),$=n(s),L=n(d),N=n(p),V=n(i),B=r(S,T),j=e.colorLink||e.colorInfo,H=n(j),W=new Ji(N[1]).mix(new Ji(N[3]),50).toHexString();return Object.assign(Object.assign({},B),{colorPrimaryBg:M[1],colorPrimaryBgHover:M[2],colorPrimaryBorder:M[3],colorPrimaryBorderHover:M[4],colorPrimaryHover:M[5],colorPrimary:M[6],colorPrimaryActive:M[7],colorPrimaryTextHover:M[8],colorPrimaryText:M[9],colorPrimaryTextActive:M[10],colorSuccessBg:$[1],colorSuccessBgHover:$[2],colorSuccessBorder:$[3],colorSuccessBorderHover:$[4],colorSuccessHover:$[4],colorSuccess:$[6],colorSuccessActive:$[7],colorSuccessTextHover:$[8],colorSuccessText:$[9],colorSuccessTextActive:$[10],colorErrorBg:N[1],colorErrorBgHover:N[2],colorErrorBgFilledHover:W,colorErrorBgActive:N[3],colorErrorBorder:N[3],colorErrorBorderHover:N[4],colorErrorHover:N[5],colorError:N[6],colorErrorActive:N[7],colorErrorTextHover:N[8],colorErrorText:N[9],colorErrorTextActive:N[10],colorWarningBg:L[1],colorWarningBgHover:L[2],colorWarningBorder:L[3],colorWarningBorderHover:L[4],colorWarningHover:L[4],colorWarning:L[6],colorWarningActive:L[7],colorWarningTextHover:L[8],colorWarningText:L[9],colorWarningTextActive:L[10],colorInfoBg:V[1],colorInfoBgHover:V[2],colorInfoBorder:V[3],colorInfoBorderHover:V[4],colorInfoHover:V[4],colorInfo:V[6],colorInfoActive:V[7],colorInfoTextHover:V[8],colorInfoText:V[9],colorInfoTextActive:V[10],colorLinkHover:H[4],colorLink:H[6],colorLinkActive:H[7],colorBgMask:new Ji("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const xX=e=>{let t=e,n=e,r=e,s=e;return e<6&&e>=5?t=e+1:e<16&&e>=6?t=e+2:e>=16&&(t=16),e<7&&e>=5?n=4:e<8&&e>=7?n=5:e<14&&e>=8?n=6:e<16&&e>=14?n=7:e>=16&&(n=8),e<6&&e>=2?r=1:e>=6&&(r=2),e>4&&e<8?s=4:e>=8&&(s=6),{borderRadius:e,borderRadiusXS:r,borderRadiusSM:n,borderRadiusLG:t,borderRadiusOuter:s}};function bX(e){const{motionUnit:t,motionBase:n,borderRadius:r,lineWidth:s}=e;return Object.assign({motionDurationFast:`${(n+t).toFixed(1)}s`,motionDurationMid:`${(n+t*2).toFixed(1)}s`,motionDurationSlow:`${(n+t*3).toFixed(1)}s`,lineWidthBold:s+1},xX(r))}const wX=e=>{const{controlHeight:t}=e;return{controlHeightSM:t*.75,controlHeightXS:t*.5,controlHeightLG:t*1.25}};function zb(e){return(e+8)/e}function SX(e){const t=new Array(10).fill(null).map((n,r)=>{const s=r-1,d=e*Math.pow(Math.E,s/5),p=r>1?Math.floor(d):Math.ceil(d);return Math.floor(p/2)*2});return t[1]=e,t.map(n=>({size:n,lineHeight:zb(n)}))}const CX=e=>{const t=SX(e),n=t.map(T=>T.size),r=t.map(T=>T.lineHeight),s=n[1],d=n[0],p=n[2],i=r[1],x=r[0],S=r[2];return{fontSizeSM:d,fontSize:s,fontSizeLG:p,fontSizeXL:n[3],fontSizeHeading1:n[6],fontSizeHeading2:n[5],fontSizeHeading3:n[4],fontSizeHeading4:n[3],fontSizeHeading5:n[2],lineHeight:i,lineHeightLG:S,lineHeightSM:x,fontHeight:Math.round(i*s),fontHeightLG:Math.round(S*p),fontHeightSM:Math.round(x*d),lineHeightHeading1:r[6],lineHeightHeading2:r[5],lineHeightHeading3:r[4],lineHeightHeading4:r[3],lineHeightHeading5:r[2]}};function EX(e){const{sizeUnit:t,sizeStep:n}=e;return{sizeXXL:t*(n+8),sizeXL:t*(n+4),sizeLG:t*(n+2),sizeMD:t*(n+1),sizeMS:t*n,size:t*n,sizeSM:t*(n-1),sizeXS:t*(n-2),sizeXXS:t*(n-3)}}const Qs=(e,t)=>new Ji(e).setAlpha(t).toRgbString(),Gv=(e,t)=>new Ji(e).darken(t).toHexString(),TX=e=>{const t=ry(e);return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[4],6:t[5],7:t[6],8:t[4],9:t[5],10:t[6]}},IX=(e,t)=>{const n=e||"#fff",r=t||"#000";return{colorBgBase:n,colorTextBase:r,colorText:Qs(r,.88),colorTextSecondary:Qs(r,.65),colorTextTertiary:Qs(r,.45),colorTextQuaternary:Qs(r,.25),colorFill:Qs(r,.15),colorFillSecondary:Qs(r,.06),colorFillTertiary:Qs(r,.04),colorFillQuaternary:Qs(r,.02),colorBgSolid:Qs(r,1),colorBgSolidHover:Qs(r,.75),colorBgSolidActive:Qs(r,.95),colorBgLayout:Gv(n,4),colorBgContainer:Gv(n,0),colorBgElevated:Gv(n,0),colorBgSpotlight:Qs(r,.85),colorBgBlur:"transparent",colorBorder:Gv(n,15),colorBorderSecondary:Gv(n,6)}};function MX(e){R2.pink=R2.magenta,O2.pink=O2.magenta;const t=Object.keys(pB).map(n=>{const r=e[n]===R2[n]?O2[n]:ry(e[n]);return new Array(10).fill(1).reduce((s,d,p)=>(s[`${n}-${p+1}`]=r[p],s[`${n}${p+1}`]=r[p],s),{})}).reduce((n,r)=>(n=Object.assign(Object.assign({},n),r),n),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),t),_X(e,{generateColorPalettes:TX,generateNeutralColorPalettes:IX})),CX(e.fontSize)),EX(e)),wX(e)),bX(e))}const mB=FT(MX),iI={token:iy,override:{override:iy},hashed:!0},gB=Ft.createContext(iI),oy="ant",vP="anticon",PX=["outlined","borderless","filled"],RX=(e,t)=>t||(e?`${oy}-${e}`:oy),fr=_.createContext({getPrefixCls:RX,iconPrefixCls:vP}),{Consumer:D0e}=fr,OX=`-ant-${Date.now()}-${Math.random()}`;function AX(e,t){const n={},r=(p,i)=>{let x=p.clone();return x=(i==null?void 0:i(x))||x,x.toRgbString()},s=(p,i)=>{const x=new Ji(p),S=ry(x.toRgbString());n[`${i}-color`]=r(x),n[`${i}-color-disabled`]=S[1],n[`${i}-color-hover`]=S[4],n[`${i}-color-active`]=S[6],n[`${i}-color-outline`]=x.clone().setAlpha(.2).toRgbString(),n[`${i}-color-deprecated-bg`]=S[0],n[`${i}-color-deprecated-border`]=S[2]};if(t.primaryColor){s(t.primaryColor,"primary");const p=new Ji(t.primaryColor),i=ry(p.toRgbString());i.forEach((S,T)=>{n[`primary-${T+1}`]=S}),n["primary-color-deprecated-l-35"]=r(p,S=>S.lighten(35)),n["primary-color-deprecated-l-20"]=r(p,S=>S.lighten(20)),n["primary-color-deprecated-t-20"]=r(p,S=>S.tint(20)),n["primary-color-deprecated-t-50"]=r(p,S=>S.tint(50)),n["primary-color-deprecated-f-12"]=r(p,S=>S.setAlpha(S.getAlpha()*.12));const x=new Ji(i[0]);n["primary-color-active-deprecated-f-30"]=r(x,S=>S.setAlpha(S.getAlpha()*.3)),n["primary-color-active-deprecated-d-02"]=r(x,S=>S.darken(2))}return t.successColor&&s(t.successColor,"success"),t.warningColor&&s(t.warningColor,"warning"),t.errorColor&&s(t.errorColor,"error"),t.infoColor&&s(t.infoColor,"info"),`
  :root {
    ${Object.keys(n).map(p=>`--${e}-${p}: ${n[p]};`).join(`
`)}
  }
  `.trim()}function DX(e,t){const n=AX(e,t);Ma()&&Jc(n,`${OX}-dynamic-theme`)}const ul=_.createContext(!1),vB=e=>{let{children:t,disabled:n}=e;const r=_.useContext(ul);return _.createElement(ul.Provider,{value:n??r},t)},hm=_.createContext(void 0),$X=e=>{let{children:t,size:n}=e;const r=_.useContext(hm);return _.createElement(hm.Provider,{value:n||r},t)};function kX(){const e=_.useContext(ul),t=_.useContext(hm);return{componentDisabled:e,componentSize:t}}var yB=Lo(function e(){zo(this,e)}),_B="CALC_UNIT",zX=new RegExp(_B,"g");function A2(e){return typeof e=="number"?"".concat(e).concat(_B):e}var LX=function(e){Kl(n,e);var t=Xl(n);function n(r,s){var d;zo(this,n),d=t.call(this),De(An(d),"result",""),De(An(d),"unitlessCssVar",void 0),De(An(d),"lowPriority",void 0);var p=cr(r);return d.unitlessCssVar=s,r instanceof n?d.result="(".concat(r.result,")"):p==="number"?d.result=A2(r):p==="string"&&(d.result=r),d}return Lo(n,[{key:"add",value:function(s){return s instanceof n?this.result="".concat(this.result," + ").concat(s.getResult()):(typeof s=="number"||typeof s=="string")&&(this.result="".concat(this.result," + ").concat(A2(s))),this.lowPriority=!0,this}},{key:"sub",value:function(s){return s instanceof n?this.result="".concat(this.result," - ").concat(s.getResult()):(typeof s=="number"||typeof s=="string")&&(this.result="".concat(this.result," - ").concat(A2(s))),this.lowPriority=!0,this}},{key:"mul",value:function(s){return this.lowPriority&&(this.result="(".concat(this.result,")")),s instanceof n?this.result="".concat(this.result," * ").concat(s.getResult(!0)):(typeof s=="number"||typeof s=="string")&&(this.result="".concat(this.result," * ").concat(s)),this.lowPriority=!1,this}},{key:"div",value:function(s){return this.lowPriority&&(this.result="(".concat(this.result,")")),s instanceof n?this.result="".concat(this.result," / ").concat(s.getResult(!0)):(typeof s=="number"||typeof s=="string")&&(this.result="".concat(this.result," / ").concat(s)),this.lowPriority=!1,this}},{key:"getResult",value:function(s){return this.lowPriority||s?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(s){var d=this,p=s||{},i=p.unit,x=!0;return typeof i=="boolean"?x=i:Array.from(this.unitlessCssVar).some(function(S){return d.result.includes(S)})&&(x=!1),this.result=this.result.replace(zX,x?"px":""),typeof this.lowPriority<"u"?"calc(".concat(this.result,")"):this.result}}]),n}(yB),NX=function(e){Kl(n,e);var t=Xl(n);function n(r){var s;return zo(this,n),s=t.call(this),De(An(s),"result",0),r instanceof n?s.result=r.result:typeof r=="number"&&(s.result=r),s}return Lo(n,[{key:"add",value:function(s){return s instanceof n?this.result+=s.result:typeof s=="number"&&(this.result+=s),this}},{key:"sub",value:function(s){return s instanceof n?this.result-=s.result:typeof s=="number"&&(this.result-=s),this}},{key:"mul",value:function(s){return s instanceof n?this.result*=s.result:typeof s=="number"&&(this.result*=s),this}},{key:"div",value:function(s){return s instanceof n?this.result/=s.result:typeof s=="number"&&(this.result/=s),this}},{key:"equal",value:function(){return this.result}}]),n}(yB),FX=function(t,n){var r=t==="css"?LX:NX;return function(s){return new r(s,n)}},$$=function(t,n){return"".concat([n,t.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-"))};function Zr(e){var t=_.useRef();t.current=e;var n=_.useCallback(function(){for(var r,s=arguments.length,d=new Array(s),p=0;p<s;p++)d[p]=arguments[p];return(r=t.current)===null||r===void 0?void 0:r.call.apply(r,[t].concat(d))},[]);return n}function fm(e){var t=_.useRef(!1),n=_.useState(e),r=ot(n,2),s=r[0],d=r[1];_.useEffect(function(){return t.current=!1,function(){t.current=!0}},[]);function p(i,x){x&&t.current||d(i)}return[s,p]}function D2(e){return e!==void 0}function Bi(e,t){var n=t||{},r=n.defaultValue,s=n.value,d=n.onChange,p=n.postState,i=fm(function(){return D2(s)?s:D2(r)?typeof r=="function"?r():r:typeof e=="function"?e():e}),x=ot(i,2),S=x[0],T=x[1],M=s!==void 0?s:S,$=p?p(M):M,L=Zr(d),N=fm([M]),V=ot(N,2),B=V[0],j=V[1];_1(function(){var W=B[0];S!==W&&L(S,W)},[B]),_1(function(){D2(s)||T(s)},[s]);var H=Zr(function(W,X){T(W,X),j([M],X)});return[$,H]}function k$(e,t,n,r){var s=We({},t[e]);if(r!=null&&r.deprecatedTokens){var d=r.deprecatedTokens;d.forEach(function(i){var x=ot(i,2),S=x[0],T=x[1];if(s!=null&&s[S]||s!=null&&s[T]){var M;(M=s[T])!==null&&M!==void 0||(s[T]=s==null?void 0:s[S])}})}var p=We(We({},n),s);return Object.keys(p).forEach(function(i){p[i]===t[i]&&delete p[i]}),p}var xB=typeof CSSINJS_STATISTIC<"u",oI=!0;function pi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!xB)return Object.assign.apply(Object,[{}].concat(t));oI=!1;var r={};return t.forEach(function(s){if(cr(s)==="object"){var d=Object.keys(s);d.forEach(function(p){Object.defineProperty(r,p,{configurable:!0,enumerable:!0,get:function(){return s[p]}})})}}),oI=!0,r}var z$={};function BX(){}var jX=function(t){var n,r=t,s=BX;return xB&&typeof Proxy<"u"&&(n=new Set,r=new Proxy(t,{get:function(p,i){if(oI){var x;(x=n)===null||x===void 0||x.add(i)}return p[i]}}),s=function(p,i){var x;z$[p]={global:Array.from(n),component:We(We({},(x=z$[p])===null||x===void 0?void 0:x.component),i)}}),{token:r,keys:n,flush:s}};function L$(e,t,n){if(typeof n=="function"){var r;return n(pi(t,(r=t[e])!==null&&r!==void 0?r:{}))}return n??{}}function VX(e){return e==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return"max(".concat(r.map(function(d){return nt(d)}).join(","),")")},min:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return"min(".concat(r.map(function(d){return nt(d)}).join(","),")")}}}var HX=1e3*60*10,UX=function(){function e(){zo(this,e),De(this,"map",new Map),De(this,"objectIDMap",new WeakMap),De(this,"nextID",0),De(this,"lastAccessBeat",new Map),De(this,"accessBeat",0)}return Lo(e,[{key:"set",value:function(n,r){this.clear();var s=this.getCompositeKey(n);this.map.set(s,r),this.lastAccessBeat.set(s,Date.now())}},{key:"get",value:function(n){var r=this.getCompositeKey(n),s=this.map.get(r);return this.lastAccessBeat.set(r,Date.now()),this.accessBeat+=1,s}},{key:"getCompositeKey",value:function(n){var r=this,s=n.map(function(d){return d&&cr(d)==="object"?"obj_".concat(r.getObjectID(d)):"".concat(cr(d),"_").concat(d)});return s.join("|")}},{key:"getObjectID",value:function(n){if(this.objectIDMap.has(n))return this.objectIDMap.get(n);var r=this.nextID;return this.objectIDMap.set(n,r),this.nextID+=1,r}},{key:"clear",value:function(){var n=this;if(this.accessBeat>1e4){var r=Date.now();this.lastAccessBeat.forEach(function(s,d){r-s>HX&&(n.map.delete(d),n.lastAccessBeat.delete(d))}),this.accessBeat=0}}}]),e}(),N$=new UX;function WX(e,t){return Ft.useMemo(function(){var n=N$.get(t);if(n)return n;var r=e();return N$.set(t,r),r},t)}var GX=function(){return{}};function qX(e){var t=e.useCSP,n=t===void 0?GX:t,r=e.useToken,s=e.usePrefix,d=e.getResetStyles,p=e.getCommonStyle,i=e.getCompUnitless;function x($,L,N,V){var B=Array.isArray($)?$[0]:$;function j(re){return"".concat(String(B)).concat(re.slice(0,1).toUpperCase()).concat(re.slice(1))}var H=(V==null?void 0:V.unitless)||{},W=typeof i=="function"?i($):{},X=We(We({},W),{},De({},j("zIndexPopup"),!0));Object.keys(H).forEach(function(re){X[j(re)]=H[re]});var ee=We(We({},V),{},{unitless:X,prefixToken:j}),J=T($,L,N,ee),Y=S(B,N,ee);return function(re){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:re,ae=J(re,se),ce=ot(ae,2),Ce=ce[1],we=Y(se),ge=ot(we,2),ve=ge[0],de=ge[1];return[ve,Ce,de]}}function S($,L,N){var V=N.unitless,B=N.injectStyle,j=B===void 0?!0:B,H=N.prefixToken,W=N.ignore,X=function(Y){var re=Y.rootCls,se=Y.cssVar,ae=se===void 0?{}:se,ce=r(),Ce=ce.realToken;return WK({path:[$],prefix:ae.prefix,key:ae.key,unitless:V,ignore:W,token:Ce,scope:re},function(){var we=L$($,Ce,L),ge=k$($,Ce,we,{deprecatedTokens:N==null?void 0:N.deprecatedTokens});return Object.keys(we).forEach(function(ve){ge[H(ve)]=ge[ve],delete ge[ve]}),ge}),null},ee=function(Y){var re=r(),se=re.cssVar;return[function(ae){return j&&se?Ft.createElement(Ft.Fragment,null,Ft.createElement(X,{rootCls:Y,cssVar:se,component:$}),ae):ae},se==null?void 0:se.key]};return ee}function T($,L,N){var V=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},B=Array.isArray($)?$:[$,$],j=ot(B,1),H=j[0],W=B.join("-"),X=e.layer||{name:"antd"};return function(ee){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ee,Y=r(),re=Y.theme,se=Y.realToken,ae=Y.hashId,ce=Y.token,Ce=Y.cssVar,we=s(),ge=we.rootPrefixCls,ve=we.iconPrefixCls,de=n(),pe=Ce?"css":"js",fe=WX(function(){var ze=new Set;return Ce&&Object.keys(V.unitless||{}).forEach(function(Je){ze.add(Pb(Je,Ce.prefix)),ze.add(Pb(Je,$$(H,Ce.prefix)))}),FX(pe,ze)},[pe,H,Ce==null?void 0:Ce.prefix]),me=VX(pe),Ie=me.max,Me=me.min,Be={theme:re,token:ce,hashId:ae,nonce:function(){return de.nonce},clientOnly:V.clientOnly,layer:X,order:V.order||-999};HT(We(We({},Be),{},{clientOnly:!1,path:["Shared",ge]}),function(){return typeof d=="function"?d(ce):[]});var $e=HT(We(We({},Be),{},{path:[W,ee,ve]}),function(){if(V.injectStyle===!1)return[];var ze=jX(ce),Je=ze.token,yt=ze.flush,at=L$(H,se,N),gt=".".concat(ee),wt=k$(H,se,at,{deprecatedTokens:V.deprecatedTokens});Ce&&at&&cr(at)==="object"&&Object.keys(at).forEach(function(ht){at[ht]="var(".concat(Pb(ht,$$(H,Ce.prefix)),")")});var Pe=pi(Je,{componentCls:gt,prefixCls:ee,iconCls:".".concat(ve),antCls:".".concat(ge),calc:fe,max:Ie,min:Me},Ce?at:wt),mt=L(Pe,{hashId:ae,prefixCls:ee,rootPrefixCls:ge,iconPrefixCls:ve});yt(H,wt);var dt=typeof p=="function"?p(Pe,ee,J,V.resetFont):null;return[V.resetStyle===!1?null:dt,mt]});return[$e,ae]}}function M($,L,N){var V=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},B=T($,L,N,We({resetStyle:!1,order:-998},V)),j=function(W){var X=W.prefixCls,ee=W.rootCls,J=ee===void 0?X:ee;return B(X,J),null};return j}return{genStyleHooks:x,genSubStyleComponent:M,genComponentStyleHook:T}}const ay=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],KX="5.22.1";function $2(e){return e>=0&&e<=255}function Yx(e,t){const{r:n,g:r,b:s,a:d}=new Ji(e).toRgb();if(d<1)return e;const{r:p,g:i,b:x}=new Ji(t).toRgb();for(let S=.01;S<=1;S+=.01){const T=Math.round((n-p*(1-S))/S),M=Math.round((r-i*(1-S))/S),$=Math.round((s-x*(1-S))/S);if($2(T)&&$2(M)&&$2($))return new Ji({r:T,g:M,b:$,a:Math.round(S*100)/100}).toRgbString()}return new Ji({r:n,g:r,b:s,a:1}).toRgbString()}var XX=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};function bB(e){const{override:t}=e,n=XX(e,["override"]),r=Object.assign({},t);Object.keys(iy).forEach($=>{delete r[$]});const s=Object.assign(Object.assign({},n),r),d=480,p=576,i=768,x=992,S=1200,T=1600;if(s.motion===!1){const $="0s";s.motionDurationFast=$,s.motionDurationMid=$,s.motionDurationSlow=$}return Object.assign(Object.assign(Object.assign({},s),{colorFillContent:s.colorFillSecondary,colorFillContentHover:s.colorFill,colorFillAlter:s.colorFillQuaternary,colorBgContainerDisabled:s.colorFillTertiary,colorBorderBg:s.colorBgContainer,colorSplit:Yx(s.colorBorderSecondary,s.colorBgContainer),colorTextPlaceholder:s.colorTextQuaternary,colorTextDisabled:s.colorTextQuaternary,colorTextHeading:s.colorText,colorTextLabel:s.colorTextSecondary,colorTextDescription:s.colorTextTertiary,colorTextLightSolid:s.colorWhite,colorHighlight:s.colorError,colorBgTextHover:s.colorFillSecondary,colorBgTextActive:s.colorFill,colorIcon:s.colorTextTertiary,colorIconHover:s.colorText,colorErrorOutline:Yx(s.colorErrorBg,s.colorBgContainer),colorWarningOutline:Yx(s.colorWarningBg,s.colorBgContainer),fontSizeIcon:s.fontSizeSM,lineWidthFocus:s.lineWidth*3,lineWidth:s.lineWidth,controlOutlineWidth:s.lineWidth*2,controlInteractiveSize:s.controlHeight/2,controlItemBgHover:s.colorFillTertiary,controlItemBgActive:s.colorPrimaryBg,controlItemBgActiveHover:s.colorPrimaryBgHover,controlItemBgActiveDisabled:s.colorFill,controlTmpOutline:s.colorFillQuaternary,controlOutline:Yx(s.colorPrimaryBg,s.colorBgContainer),lineType:s.lineType,borderRadius:s.borderRadius,borderRadiusXS:s.borderRadiusXS,borderRadiusSM:s.borderRadiusSM,borderRadiusLG:s.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:s.sizeXXS,paddingXS:s.sizeXS,paddingSM:s.sizeSM,padding:s.size,paddingMD:s.sizeMD,paddingLG:s.sizeLG,paddingXL:s.sizeXL,paddingContentHorizontalLG:s.sizeLG,paddingContentVerticalLG:s.sizeMS,paddingContentHorizontal:s.sizeMS,paddingContentVertical:s.sizeSM,paddingContentHorizontalSM:s.size,paddingContentVerticalSM:s.sizeXS,marginXXS:s.sizeXXS,marginXS:s.sizeXS,marginSM:s.sizeSM,margin:s.size,marginMD:s.sizeMD,marginLG:s.sizeLG,marginXL:s.sizeXL,marginXXL:s.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:d,screenXSMin:d,screenXSMax:p-1,screenSM:p,screenSMMin:p,screenSMMax:i-1,screenMD:i,screenMDMin:i,screenMDMax:x-1,screenLG:x,screenLGMin:x,screenLGMax:S-1,screenXL:S,screenXLMin:S,screenXLMax:T-1,screenXXL:T,screenXXLMin:T,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new Ji("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new Ji("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new Ji("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),r)}var F$=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const wB={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0,opacityImage:!0},ZX={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},YX={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},SB=(e,t,n)=>{const r=n.getDerivativeToken(e),{override:s}=t,d=F$(t,["override"]);let p=Object.assign(Object.assign({},r),{override:s});return p=bB(p),d&&Object.entries(d).forEach(i=>{let[x,S]=i;const{theme:T}=S,M=F$(S,["theme"]);let $=M;T&&($=SB(Object.assign(Object.assign({},p),M),{override:M},T)),p[x]=$}),p};function Ra(){const{token:e,hashed:t,theme:n,override:r,cssVar:s}=Ft.useContext(gB),d=`${KX}-${t||""}`,p=n||mB,[i,x,S]=yK(p,[iy,e],{salt:d,override:r,getComputedToken:SB,formatToken:bB,cssVar:s&&{prefix:s.prefix,key:s.key,unitless:wB,ignore:ZX,preserve:YX}});return[p,S,t?x:"",i,s]}const iu={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},lo=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,listStyle:"none",fontFamily:t?"inherit":e.fontFamily}},yw=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),ou=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),JX=e=>({a:{color:e.colorLink,textDecoration:e.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive},"&:active, &:hover":{textDecoration:e.linkHoverDecoration,outline:0},"&:focus":{textDecoration:e.linkFocusDecoration,outline:0},"&[disabled]":{color:e.colorTextDisabled,cursor:"not-allowed"}}}),QX=(e,t,n,r)=>{const s=`[class^="${t}"], [class*=" ${t}"]`,d=n?`.${n}`:s,p={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let i={};return r!==!1&&(i={fontFamily:e.fontFamily,fontSize:e.fontSize}),{[d]:Object.assign(Object.assign(Object.assign({},i),p),{[s]:p})}},Ad=e=>({outline:`${nt(e.lineWidthFocus)} solid ${e.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),au=e=>({"&:focus-visible":Object.assign({},Ad(e))}),yP=e=>Object.assign(Object.assign({color:e.colorLink,textDecoration:e.linkDecoration,outline:"none",cursor:"pointer",transition:`all ${e.motionDurationSlow}`,border:0,padding:0,background:"none",userSelect:"none"},au(e)),{"&:focus, &:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive}}),CB=(e,t)=>{const[n,r]=Ra();return HT({token:r,hashId:"",path:["ant-design-icons",e],nonce:()=>t==null?void 0:t.nonce,layer:{name:"antd"}},()=>[{[`.${e}`]:Object.assign(Object.assign({},yw()),{[`.${e} .${e}-icon`]:{display:"block"}})}])},{genStyleHooks:Qi,genComponentStyleHook:eZ,genSubStyleComponent:_P}=qX({usePrefix:()=>{const{getPrefixCls:e,iconPrefixCls:t}=_.useContext(fr);return{rootPrefixCls:e(),iconPrefixCls:t}},useToken:()=>{const[e,t,n,r,s]=Ra();return{theme:e,realToken:t,hashId:n,token:r,cssVar:s}},useCSP:()=>{const{csp:e,iconPrefixCls:t}=_.useContext(fr);return CB(t,e),e??{}},getResetStyles:e=>[{"&":JX(e)}],getCommonStyle:QX,getCompUnitless:()=>wB});function tZ(e,t){return ay.reduce((n,r)=>{const s=e[`${r}1`],d=e[`${r}3`],p=e[`${r}6`],i=e[`${r}7`];return Object.assign(Object.assign({},n),t(r,{lightColor:s,lightBorderColor:d,darkColor:p,textColor:i}))},{})}const nZ=Object.assign({},my),{useId:B$}=nZ,rZ=()=>"",iZ=typeof B$>"u"?rZ:B$;function oZ(e,t,n){var r;sf();const s=e||{},d=s.inherit===!1||!t?Object.assign(Object.assign({},iI),{hashed:(r=t==null?void 0:t.hashed)!==null&&r!==void 0?r:iI.hashed,cssVar:t==null?void 0:t.cssVar}):t,p=iZ();return af(()=>{var i,x;if(!e)return t;const S=Object.assign({},d.components);Object.keys(e.components||{}).forEach($=>{S[$]=Object.assign(Object.assign({},S[$]),e.components[$])});const T=`css-var-${p.replace(/:/g,"")}`,M=((i=s.cssVar)!==null&&i!==void 0?i:d.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:n==null?void 0:n.prefixCls},typeof d.cssVar=="object"?d.cssVar:{}),typeof s.cssVar=="object"?s.cssVar:{}),{key:typeof s.cssVar=="object"&&((x=s.cssVar)===null||x===void 0?void 0:x.key)||T});return Object.assign(Object.assign(Object.assign({},d),s),{token:Object.assign(Object.assign({},d.token),s.token),components:S,cssVar:M})},[s,d],(i,x)=>i.some((S,T)=>{const M=x[T];return!wc(S,M,!0)}))}var aZ=["children"],EB=_.createContext({});function sZ(e){var t=e.children,n=Er(e,aZ);return _.createElement(EB.Provider,{value:n},t)}var lZ=function(e){Kl(n,e);var t=Xl(n);function n(){return zo(this,n),t.apply(this,arguments)}return Lo(n,[{key:"render",value:function(){return this.props.children}}]),n}(_.Component);function cZ(e){var t=_.useReducer(function(i){return i+1},0),n=ot(t,2),r=n[1],s=_.useRef(e),d=Zr(function(){return s.current}),p=Zr(function(i){s.current=typeof i=="function"?i(s.current):i,r()});return[d,p]}var od="none",Jx="appear",Qx="enter",eb="leave",j$="none",Ll="prepare",Hp="start",Up="active",xP="end",TB="prepared";function V$(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}function uZ(e,t){var n={animationend:V$("Animation","AnimationEnd"),transitionend:V$("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete n.animationend.animation,"TransitionEvent"in t||delete n.transitionend.transition),n}var dZ=uZ(Ma(),typeof window<"u"?window:{}),IB={};if(Ma()){var hZ=document.createElement("div");IB=hZ.style}var tb={};function MB(e){if(tb[e])return tb[e];var t=dZ[e];if(t)for(var n=Object.keys(t),r=n.length,s=0;s<r;s+=1){var d=n[s];if(Object.prototype.hasOwnProperty.call(t,d)&&d in IB)return tb[e]=t[d],tb[e]}return""}var PB=MB("animationend"),RB=MB("transitionend"),OB=!!(PB&&RB),H$=PB||"animationend",U$=RB||"transitionend";function W$(e,t){if(!e)return null;if(cr(e)==="object"){var n=t.replace(/-\w/g,function(r){return r[1].toUpperCase()});return e[n]}return"".concat(e,"-").concat(t)}const fZ=function(e){var t=_.useRef();function n(s){s&&(s.removeEventListener(U$,e),s.removeEventListener(H$,e))}function r(s){t.current&&t.current!==s&&n(t.current),s&&s!==t.current&&(s.addEventListener(U$,e),s.addEventListener(H$,e),t.current=s)}return _.useEffect(function(){return function(){n(t.current)}},[]),[r,n]};var AB=Ma()?_.useLayoutEffect:_.useEffect;const pZ=function(){var e=_.useRef(null);function t(){ui.cancel(e.current)}function n(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;t();var d=ui(function(){s<=1?r({isCanceled:function(){return d!==e.current}}):n(r,s-1)});e.current=d}return _.useEffect(function(){return function(){t()}},[]),[n,t]};var mZ=[Ll,Hp,Up,xP],gZ=[Ll,TB],DB=!1,vZ=!0;function $B(e){return e===Up||e===xP}const yZ=function(e,t,n){var r=fm(j$),s=ot(r,2),d=s[0],p=s[1],i=pZ(),x=ot(i,2),S=x[0],T=x[1];function M(){p(Ll,!0)}var $=t?gZ:mZ;return AB(function(){if(d!==j$&&d!==xP){var L=$.indexOf(d),N=$[L+1],V=n(d);V===DB?p(N,!0):N&&S(function(B){function j(){B.isCanceled()||p(N,!0)}V===!0?j():Promise.resolve(V).then(j)})}},[e,d]),_.useEffect(function(){return function(){T()}},[]),[M,d]};function _Z(e,t,n,r){var s=r.motionEnter,d=s===void 0?!0:s,p=r.motionAppear,i=p===void 0?!0:p,x=r.motionLeave,S=x===void 0?!0:x,T=r.motionDeadline,M=r.motionLeaveImmediately,$=r.onAppearPrepare,L=r.onEnterPrepare,N=r.onLeavePrepare,V=r.onAppearStart,B=r.onEnterStart,j=r.onLeaveStart,H=r.onAppearActive,W=r.onEnterActive,X=r.onLeaveActive,ee=r.onAppearEnd,J=r.onEnterEnd,Y=r.onLeaveEnd,re=r.onVisibleChanged,se=fm(),ae=ot(se,2),ce=ae[0],Ce=ae[1],we=cZ(od),ge=ot(we,2),ve=ge[0],de=ge[1],pe=fm(null),fe=ot(pe,2),me=fe[0],Ie=fe[1],Me=ve(),Be=_.useRef(!1),$e=_.useRef(null);function ze(){return n()}var Je=_.useRef(!1);function yt(){de(od),Ie(null,!0)}var at=Zr(function(Kt){var Dt=ve();if(Dt!==od){var Wt=ze();if(!(Kt&&!Kt.deadline&&Kt.target!==Wt)){var Vt=Je.current,Rt;Dt===Jx&&Vt?Rt=ee==null?void 0:ee(Wt,Kt):Dt===Qx&&Vt?Rt=J==null?void 0:J(Wt,Kt):Dt===eb&&Vt&&(Rt=Y==null?void 0:Y(Wt,Kt)),Vt&&Rt!==!1&&yt()}}}),gt=fZ(at),wt=ot(gt,1),Pe=wt[0],mt=function(Dt){switch(Dt){case Jx:return De(De(De({},Ll,$),Hp,V),Up,H);case Qx:return De(De(De({},Ll,L),Hp,B),Up,W);case eb:return De(De(De({},Ll,N),Hp,j),Up,X);default:return{}}},dt=_.useMemo(function(){return mt(Me)},[Me]),ht=yZ(Me,!e,function(Kt){if(Kt===Ll){var Dt=dt[Ll];return Dt?Dt(ze()):DB}if(Ct in dt){var Wt;Ie(((Wt=dt[Ct])===null||Wt===void 0?void 0:Wt.call(dt,ze(),null))||null)}return Ct===Up&&Me!==od&&(Pe(ze()),T>0&&(clearTimeout($e.current),$e.current=setTimeout(function(){at({deadline:!0})},T))),Ct===TB&&yt(),vZ}),je=ot(ht,2),St=je[0],Ct=je[1],Lt=$B(Ct);Je.current=Lt,AB(function(){Ce(t);var Kt=Be.current;Be.current=!0;var Dt;!Kt&&t&&i&&(Dt=Jx),Kt&&t&&d&&(Dt=Qx),(Kt&&!t&&S||!Kt&&M&&!t&&S)&&(Dt=eb);var Wt=mt(Dt);Dt&&(e||Wt[Ll])?(de(Dt),St()):de(od)},[t]),_.useEffect(function(){(Me===Jx&&!i||Me===Qx&&!d||Me===eb&&!S)&&de(od)},[i,d,S]),_.useEffect(function(){return function(){Be.current=!1,clearTimeout($e.current)}},[]);var At=_.useRef(!1);_.useEffect(function(){ce&&(At.current=!0),ce!==void 0&&Me===od&&((At.current||ce)&&(re==null||re(ce)),At.current=!0)},[ce,Me]);var Yt=me;return dt[Ll]&&Ct===Hp&&(Yt=We({transition:"none"},Yt)),[Me,Ct,Yt,ce??t]}function xZ(e){var t=e;cr(e)==="object"&&(t=e.transitionSupport);function n(s,d){return!!(s.motionName&&t&&d!==!1)}var r=_.forwardRef(function(s,d){var p=s.visible,i=p===void 0?!0:p,x=s.removeOnLeave,S=x===void 0?!0:x,T=s.forceRender,M=s.children,$=s.motionName,L=s.leavedClassName,N=s.eventProps,V=_.useContext(EB),B=V.motion,j=n(s,B),H=_.useRef(),W=_.useRef();function X(){try{return H.current instanceof HTMLElement?H.current:b0(W.current)}catch{return null}}var ee=_Z(j,i,X,s),J=ot(ee,4),Y=J[0],re=J[1],se=J[2],ae=J[3],ce=_.useRef(ae);ae&&(ce.current=!0);var Ce=_.useCallback(function(me){H.current=me,Z0(d,me)},[d]),we,ge=We(We({},N),{},{visible:i});if(!M)we=null;else if(Y===od)ae?we=M(We({},ge),Ce):!S&&ce.current&&L?we=M(We(We({},ge),{},{className:L}),Ce):T||!S&&!L?we=M(We(We({},ge),{},{style:{display:"none"}}),Ce):we=null;else{var ve;re===Ll?ve="prepare":$B(re)?ve="active":re===Hp&&(ve="start");var de=W$($,"".concat(Y,"-").concat(ve));we=M(We(We({},ge),{},{className:pt(W$($,Y),De(De({},de,de&&ve),$,typeof $=="string")),style:se}),Ce)}if(_.isValidElement(we)&&bc(we)){var pe=we,fe=pe.ref;fe||(we=_.cloneElement(we,{ref:Ce}))}return _.createElement(lZ,{ref:W},we)});return r.displayName="CSSMotion",r}const dl=xZ(OB);var aI="add",sI="keep",lI="remove",k2="removed";function bZ(e){var t;return e&&cr(e)==="object"&&"key"in e?t=e:t={key:e},We(We({},t),{},{key:String(t.key)})}function cI(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(bZ)}function wZ(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=[],r=0,s=t.length,d=cI(e),p=cI(t);d.forEach(function(S){for(var T=!1,M=r;M<s;M+=1){var $=p[M];if($.key===S.key){r<M&&(n=n.concat(p.slice(r,M).map(function(L){return We(We({},L),{},{status:aI})})),r=M),n.push(We(We({},$),{},{status:sI})),r+=1,T=!0;break}}T||n.push(We(We({},S),{},{status:lI}))}),r<s&&(n=n.concat(p.slice(r).map(function(S){return We(We({},S),{},{status:aI})})));var i={};n.forEach(function(S){var T=S.key;i[T]=(i[T]||0)+1});var x=Object.keys(i).filter(function(S){return i[S]>1});return x.forEach(function(S){n=n.filter(function(T){var M=T.key,$=T.status;return M!==S||$!==lI}),n.forEach(function(T){T.key===S&&(T.status=sI)})}),n}var SZ=["component","children","onVisibleChanged","onAllRemoved"],CZ=["status"],EZ=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function TZ(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:dl,n=function(r){Kl(d,r);var s=Xl(d);function d(){var p;zo(this,d);for(var i=arguments.length,x=new Array(i),S=0;S<i;S++)x[S]=arguments[S];return p=s.call.apply(s,[this].concat(x)),De(An(p),"state",{keyEntities:[]}),De(An(p),"removeKey",function(T){p.setState(function(M){var $=M.keyEntities.map(function(L){return L.key!==T?L:We(We({},L),{},{status:k2})});return{keyEntities:$}},function(){var M=p.state.keyEntities,$=M.filter(function(L){var N=L.status;return N!==k2}).length;$===0&&p.props.onAllRemoved&&p.props.onAllRemoved()})}),p}return Lo(d,[{key:"render",value:function(){var i=this,x=this.state.keyEntities,S=this.props,T=S.component,M=S.children,$=S.onVisibleChanged;S.onAllRemoved;var L=Er(S,SZ),N=T||_.Fragment,V={};return EZ.forEach(function(B){V[B]=L[B],delete L[B]}),delete L.keys,_.createElement(N,L,x.map(function(B,j){var H=B.status,W=Er(B,CZ),X=H===aI||H===sI;return _.createElement(t,qt({},V,{key:W.key,visible:X,eventProps:W,onVisibleChanged:function(J){$==null||$(J,{key:W.key}),J||i.removeKey(W.key)}}),function(ee,J){return M(We(We({},ee),{},{index:j}),J)})}))}}],[{key:"getDerivedStateFromProps",value:function(i,x){var S=i.keys,T=x.keyEntities,M=cI(S),$=wZ(T,M);return{keyEntities:$.filter(function(L){var N=T.find(function(V){var B=V.key;return L.key===B});return!(N&&N.status===k2&&L.status===lI)})}}}]),d}(_.Component);return De(n,"defaultProps",{component:"div"}),n}const IZ=TZ(OB);function MZ(e){const{children:t}=e,[,n]=Ra(),{motion:r}=n,s=_.useRef(!1);return s.current=s.current||r===!1,s.current?_.createElement(sZ,{motion:r},t):t}const PZ=()=>null;var RZ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const OZ=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"];let S1,kB,zB,LB;function Lb(){return S1||oy}function AZ(){return kB||vP}function DZ(e){return Object.keys(e).some(t=>t.endsWith("Color"))}const $Z=e=>{const{prefixCls:t,iconPrefixCls:n,theme:r,holderRender:s}=e;t!==void 0&&(S1=t),n!==void 0&&(kB=n),"holderRender"in e&&(LB=s),r&&(DZ(r)?DX(Lb(),r):zB=r)},NB=()=>({getPrefixCls:(e,t)=>t||(e?`${Lb()}-${e}`:Lb()),getIconPrefixCls:AZ,getRootPrefixCls:()=>S1||Lb(),getTheme:()=>zB,holderRender:LB}),kZ=e=>{const{children:t,csp:n,autoInsertSpaceInButton:r,alert:s,anchor:d,form:p,locale:i,componentSize:x,direction:S,space:T,splitter:M,virtual:$,dropdownMatchSelectWidth:L,popupMatchSelectWidth:N,popupOverflow:V,legacyLocale:B,parentContext:j,iconPrefixCls:H,theme:W,componentDisabled:X,segmented:ee,statistic:J,spin:Y,calendar:re,carousel:se,cascader:ae,collapse:ce,typography:Ce,checkbox:we,descriptions:ge,divider:ve,drawer:de,skeleton:pe,steps:fe,image:me,layout:Ie,list:Me,mentions:Be,modal:$e,progress:ze,result:Je,slider:yt,breadcrumb:at,menu:gt,pagination:wt,input:Pe,textArea:mt,empty:dt,badge:ht,radio:je,rate:St,switch:Ct,transfer:Lt,avatar:At,message:Yt,tag:Kt,table:Dt,card:Wt,tabs:Vt,timeline:Rt,timePicker:dn,upload:hn,notification:Pn,tree:Dn,colorPicker:yn,datePicker:Rn,rangePicker:kn,flex:Cn,wave:nn,dropdown:Ut,warning:cn,tour:an,floatButtonGroup:Zt,variant:Xt,inputNumber:Hn,treeSelect:br}=e,mr=_.useCallback((Ae,Ge)=>{const{prefixCls:ut}=e;if(Ge)return Ge;const Qe=ut||j.getPrefixCls("");return Ae?`${Qe}-${Ae}`:Qe},[j.getPrefixCls,e.prefixCls]),pr=H||j.iconPrefixCls||vP,Tr=n||j.csp;CB(pr,Tr);const ur=oZ(W,j.theme,{prefixCls:mr("")}),Mr={csp:Tr,autoInsertSpaceInButton:r,alert:s,anchor:d,locale:i||B,direction:S,space:T,splitter:M,virtual:$,popupMatchSelectWidth:N??L,popupOverflow:V,getPrefixCls:mr,iconPrefixCls:pr,theme:ur,segmented:ee,statistic:J,spin:Y,calendar:re,carousel:se,cascader:ae,collapse:ce,typography:Ce,checkbox:we,descriptions:ge,divider:ve,drawer:de,skeleton:pe,steps:fe,image:me,input:Pe,textArea:mt,layout:Ie,list:Me,mentions:Be,modal:$e,progress:ze,result:Je,slider:yt,breadcrumb:at,menu:gt,pagination:wt,empty:dt,badge:ht,radio:je,rate:St,switch:Ct,transfer:Lt,avatar:At,message:Yt,tag:Kt,table:Dt,card:Wt,tabs:Vt,timeline:Rt,timePicker:dn,upload:hn,notification:Pn,tree:Dn,colorPicker:yn,datePicker:Rn,rangePicker:kn,flex:Cn,wave:nn,dropdown:Ut,warning:cn,tour:an,floatButtonGroup:Zt,variant:Xt,inputNumber:Hn,treeSelect:br},tr=Object.assign({},j);Object.keys(Mr).forEach(Ae=>{Mr[Ae]!==void 0&&(tr[Ae]=Mr[Ae])}),OZ.forEach(Ae=>{const Ge=e[Ae];Ge&&(tr[Ae]=Ge)}),typeof r<"u"&&(tr.button=Object.assign({autoInsertSpace:r},tr.button));const ft=af(()=>tr,tr,(Ae,Ge)=>{const ut=Object.keys(Ae),Qe=Object.keys(Ge);return ut.length!==Qe.length||ut.some(_t=>Ae[_t]!==Ge[_t])}),ye=_.useMemo(()=>({prefixCls:pr,csp:Tr}),[pr,Tr]);let Se=_.createElement(_.Fragment,null,_.createElement(PZ,{dropdownMatchSelectWidth:L}),t);const ke=_.useMemo(()=>{var Ae,Ge,ut,Qe;return Vp(((Ae=ru.Form)===null||Ae===void 0?void 0:Ae.defaultValidateMessages)||{},((ut=(Ge=ft.locale)===null||Ge===void 0?void 0:Ge.Form)===null||ut===void 0?void 0:ut.defaultValidateMessages)||{},((Qe=ft.form)===null||Qe===void 0?void 0:Qe.validateMessages)||{},(p==null?void 0:p.validateMessages)||{})},[ft,p==null?void 0:p.validateMessages]);Object.keys(ke).length>0&&(Se=_.createElement(YK.Provider,{value:ke},Se)),i&&(Se=_.createElement(nX,{locale:i,_ANT_MARK__:tX},Se)),(pr||Tr)&&(Se=_.createElement(mP.Provider,{value:ye},Se)),x&&(Se=_.createElement($X,{size:x},Se)),Se=_.createElement(MZ,null,Se);const Ze=_.useMemo(()=>{const Ae=ur||{},{algorithm:Ge,token:ut,components:Qe,cssVar:_t}=Ae,It=RZ(Ae,["algorithm","token","components","cssVar"]),bt=Ge&&(!Array.isArray(Ge)||Ge.length>0)?FT(Ge):mB,Mt={};Object.entries(Qe||{}).forEach(Gt=>{let[vn,On]=Gt;const bn=Object.assign({},On);"algorithm"in bn&&(bn.algorithm===!0?bn.theme=bt:(Array.isArray(bn.algorithm)||typeof bn.algorithm=="function")&&(bn.theme=FT(bn.algorithm)),delete bn.algorithm),Mt[vn]=bn});const kt=Object.assign(Object.assign({},iy),ut);return Object.assign(Object.assign({},It),{theme:bt,token:kt,components:Mt,override:Object.assign({override:kt},Mt),cssVar:_t})},[ur]);return W&&(Se=_.createElement(gB.Provider,{value:Ze},Se)),ft.warning&&(Se=_.createElement(ZK.Provider,{value:ft.warning},Se)),X!==void 0&&(Se=_.createElement(vB,{disabled:X},Se)),_.createElement(fr.Provider,{value:ft},Se)},cu=e=>{const t=_.useContext(fr),n=_.useContext(gP);return _.createElement(kZ,Object.assign({parentContext:t,legacyLocale:n},e))};cu.ConfigContext=fr;cu.SizeContext=hm;cu.config=$Z;cu.useConfig=kX;Object.defineProperty(cu,"SizeContext",{get:()=>hm});var zZ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};function FB(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}function LZ(e){return FB(e)instanceof ShadowRoot}function C1(e){return LZ(e)?FB(e):null}function NZ(e){return e.replace(/-(.)/g,function(t,n){return n.toUpperCase()})}function FZ(e,t){go(e,"[@ant-design/icons] ".concat(t))}function G$(e){return cr(e)==="object"&&typeof e.name=="string"&&typeof e.theme=="string"&&(cr(e.icon)==="object"||typeof e.icon=="function")}function q$(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(e).reduce(function(t,n){var r=e[n];switch(n){case"class":t.className=r,delete t.class;break;default:delete t[n],t[NZ(n)]=r}return t},{})}function uI(e,t,n){return n?Ft.createElement(e.tag,We(We({key:t},q$(e.attrs)),n),(e.children||[]).map(function(r,s){return uI(r,"".concat(t,"-").concat(e.tag,"-").concat(s))})):Ft.createElement(e.tag,We({key:t},q$(e.attrs)),(e.children||[]).map(function(r,s){return uI(r,"".concat(t,"-").concat(e.tag,"-").concat(s))}))}function BB(e){return ry(e)[0]}function jB(e){return e?Array.isArray(e)?e:[e]:[]}var BZ=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,jZ=function(t){var n=_.useContext(mP),r=n.csp,s=n.prefixCls,d=BZ;s&&(d=d.replace(/anticon/g,s)),_.useEffect(function(){var p=t.current,i=C1(p);Jc(d,"@ant-design-icons",{prepend:!0,csp:r,attachTo:i})},[])},VZ=["icon","className","onClick","style","primaryColor","secondaryColor"],S0={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function HZ(e){var t=e.primaryColor,n=e.secondaryColor;S0.primaryColor=t,S0.secondaryColor=n||BB(t),S0.calculated=!!n}function UZ(){return We({},S0)}var Rm=function(t){var n=t.icon,r=t.className,s=t.onClick,d=t.style,p=t.primaryColor,i=t.secondaryColor,x=Er(t,VZ),S=_.useRef(),T=S0;if(p&&(T={primaryColor:p,secondaryColor:i||BB(p)}),jZ(S),FZ(G$(n),"icon should be icon definiton, but got ".concat(n)),!G$(n))return null;var M=n;return M&&typeof M.icon=="function"&&(M=We(We({},M),{},{icon:M.icon(T.primaryColor,T.secondaryColor)})),uI(M.icon,"svg-".concat(M.name),We(We({className:r,onClick:s,style:d,"data-icon":M.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},x),{},{ref:S}))};Rm.displayName="IconReact";Rm.getTwoToneColors=UZ;Rm.setTwoToneColors=HZ;function VB(e){var t=jB(e),n=ot(t,2),r=n[0],s=n[1];return Rm.setTwoToneColors({primaryColor:r,secondaryColor:s})}function WZ(){var e=Rm.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}var GZ=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];VB(w1.primary);var ii=_.forwardRef(function(e,t){var n=e.className,r=e.icon,s=e.spin,d=e.rotate,p=e.tabIndex,i=e.onClick,x=e.twoToneColor,S=Er(e,GZ),T=_.useContext(mP),M=T.prefixCls,$=M===void 0?"anticon":M,L=T.rootClassName,N=pt(L,$,De(De({},"".concat($,"-").concat(r.name),!!r.name),"".concat($,"-spin"),!!s||r.name==="loading"),n),V=p;V===void 0&&i&&(V=-1);var B=d?{msTransform:"rotate(".concat(d,"deg)"),transform:"rotate(".concat(d,"deg)")}:void 0,j=jB(x),H=ot(j,2),W=H[0],X=H[1];return _.createElement("span",qt({role:"img","aria-label":r.name},S,{ref:t,tabIndex:V,onClick:i,className:N}),_.createElement(Rm,{icon:r,primaryColor:W,secondaryColor:X,style:B}))});ii.displayName="AntdIcon";ii.getTwoToneColor=WZ;ii.setTwoToneColor=VB;var qZ=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:zZ}))},HB=_.forwardRef(qZ),KZ={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"},XZ=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:KZ}))},_w=_.forwardRef(XZ),ZZ={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"},YZ=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:ZZ}))},Om=_.forwardRef(YZ),JZ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},QZ=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:JZ}))},xw=_.forwardRef(QZ),eY={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},tY=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:eY}))},UB=_.forwardRef(tY),nY=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,rY=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,iY="".concat(nY," ").concat(rY).split(/[\s\n]+/),oY="aria-",aY="data-";function K$(e,t){return e.indexOf(t)===0}function Ko(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n;t===!1?n={aria:!0,data:!0,attr:!0}:t===!0?n={aria:!0}:n=We({},t);var r={};return Object.keys(e).forEach(function(s){(n.aria&&(s==="role"||K$(s,oY))||n.data&&K$(s,aY)||n.attr&&iY.includes(s))&&(r[s]=e[s])}),r}function WB(e){return e&&Ft.isValidElement(e)&&e.type===Ft.Fragment}const sY=(e,t,n)=>Ft.isValidElement(e)?Ft.cloneElement(e,typeof n=="function"?n(e.props||{}):n):t;function ns(e,t){return sY(e,e,t)}function dI(e){return e!=null&&e===e.window}const lY=e=>{var t,n;if(typeof window>"u")return 0;let r=0;return dI(e)?r=e.pageYOffset:e instanceof Document?r=e.documentElement.scrollTop:(e instanceof HTMLElement||e)&&(r=e.scrollTop),e&&!dI(e)&&typeof r!="number"&&(r=(n=((t=e.ownerDocument)!==null&&t!==void 0?t:e).documentElement)===null||n===void 0?void 0:n.scrollTop),r};function cY(e,t,n,r){const s=n-t;return e/=r/2,e<1?s/2*e*e*e+t:s/2*((e-=2)*e*e+2)+t}function uY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{getContainer:n=()=>window,callback:r,duration:s=450}=t,d=n(),p=lY(d),i=Date.now(),x=()=>{const T=Date.now()-i,M=cY(T>s?s:T,p,e,s);dI(d)?d.scrollTo(window.pageXOffset,M):d instanceof Document||d.constructor.name==="HTMLDocument"?d.documentElement.scrollTop=M:d.scrollTop=M,T<s?ui(x):typeof r=="function"&&r()};ui(x)}const Qo=e=>{const[,,,,t]=Ra();return t?`${e}-css-var`:""};var gn={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var n=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||n>=gn.F1&&n<=gn.F12)return!1;switch(n){case gn.ALT:case gn.CAPS_LOCK:case gn.CONTEXT_MENU:case gn.CTRL:case gn.DOWN:case gn.END:case gn.ESC:case gn.HOME:case gn.INSERT:case gn.LEFT:case gn.MAC_FF_META:case gn.META:case gn.NUMLOCK:case gn.NUM_CENTER:case gn.PAGE_DOWN:case gn.PAGE_UP:case gn.PAUSE:case gn.PRINT_SCREEN:case gn.RIGHT:case gn.SHIFT:case gn.UP:case gn.WIN_KEY:case gn.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=gn.ZERO&&t<=gn.NINE||t>=gn.NUM_ZERO&&t<=gn.NUM_MULTIPLY||t>=gn.A&&t<=gn.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&t===0)return!0;switch(t){case gn.SPACE:case gn.QUESTION_MARK:case gn.NUM_PLUS:case gn.NUM_MINUS:case gn.NUM_PERIOD:case gn.NUM_DIVISION:case gn.SEMICOLON:case gn.DASH:case gn.EQUALS:case gn.COMMA:case gn.PERIOD:case gn.SLASH:case gn.APOSTROPHE:case gn.SINGLE_QUOTE:case gn.OPEN_SQUARE_BRACKET:case gn.BACKSLASH:case gn.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},GB=_.forwardRef(function(e,t){var n=e.prefixCls,r=e.style,s=e.className,d=e.duration,p=d===void 0?4.5:d,i=e.showProgress,x=e.pauseOnHover,S=x===void 0?!0:x,T=e.eventKey,M=e.content,$=e.closable,L=e.closeIcon,N=L===void 0?"x":L,V=e.props,B=e.onClick,j=e.onNoticeClose,H=e.times,W=e.hovering,X=_.useState(!1),ee=ot(X,2),J=ee[0],Y=ee[1],re=_.useState(0),se=ot(re,2),ae=se[0],ce=se[1],Ce=_.useState(0),we=ot(Ce,2),ge=we[0],ve=we[1],de=W||J,pe=p>0&&i,fe=function(){j(T)},me=function(Je){(Je.key==="Enter"||Je.code==="Enter"||Je.keyCode===gn.ENTER)&&fe()};_.useEffect(function(){if(!de&&p>0){var ze=Date.now()-ge,Je=setTimeout(function(){fe()},p*1e3-ge);return function(){S&&clearTimeout(Je),ve(Date.now()-ze)}}},[p,de,H]),_.useEffect(function(){if(!de&&pe&&(S||ge===0)){var ze=performance.now(),Je,yt=function at(){cancelAnimationFrame(Je),Je=requestAnimationFrame(function(gt){var wt=gt+ge-ze,Pe=Math.min(wt/(p*1e3),1);ce(Pe*100),Pe<1&&at()})};return yt(),function(){S&&cancelAnimationFrame(Je)}}},[p,ge,de,pe,H]);var Ie=_.useMemo(function(){return cr($)==="object"&&$!==null?$:$?{closeIcon:N}:{}},[$,N]),Me=Ko(Ie,!0),Be=100-(!ae||ae<0?0:ae>100?100:ae),$e="".concat(n,"-notice");return _.createElement("div",qt({},V,{ref:t,className:pt($e,s,De({},"".concat($e,"-closable"),$)),style:r,onMouseEnter:function(Je){var yt;Y(!0),V==null||(yt=V.onMouseEnter)===null||yt===void 0||yt.call(V,Je)},onMouseLeave:function(Je){var yt;Y(!1),V==null||(yt=V.onMouseLeave)===null||yt===void 0||yt.call(V,Je)},onClick:B}),_.createElement("div",{className:"".concat($e,"-content")},M),$&&_.createElement("a",qt({tabIndex:0,className:"".concat($e,"-close"),onKeyDown:me,"aria-label":"Close"},Me,{onClick:function(Je){Je.preventDefault(),Je.stopPropagation(),fe()}}),Ie.closeIcon),pe&&_.createElement("progress",{className:"".concat($e,"-progress"),max:"100",value:Be},Be+"%"))}),qB=Ft.createContext({}),dY=function(t){var n=t.children,r=t.classNames;return Ft.createElement(qB.Provider,{value:{classNames:r}},n)},X$=8,Z$=3,Y$=16,hY=function(t){var n={offset:X$,threshold:Z$,gap:Y$};if(t&&cr(t)==="object"){var r,s,d;n.offset=(r=t.offset)!==null&&r!==void 0?r:X$,n.threshold=(s=t.threshold)!==null&&s!==void 0?s:Z$,n.gap=(d=t.gap)!==null&&d!==void 0?d:Y$}return[!!t,n]},fY=["className","style","classNames","styles"],pY=function(t){var n=t.configList,r=t.placement,s=t.prefixCls,d=t.className,p=t.style,i=t.motion,x=t.onAllNoticeRemoved,S=t.onNoticeClose,T=t.stack,M=_.useContext(qB),$=M.classNames,L=_.useRef({}),N=_.useState(null),V=ot(N,2),B=V[0],j=V[1],H=_.useState([]),W=ot(H,2),X=W[0],ee=W[1],J=n.map(function(de){return{config:de,key:String(de.key)}}),Y=hY(T),re=ot(Y,2),se=re[0],ae=re[1],ce=ae.offset,Ce=ae.threshold,we=ae.gap,ge=se&&(X.length>0||J.length<=Ce),ve=typeof i=="function"?i(r):i;return _.useEffect(function(){se&&X.length>1&&ee(function(de){return de.filter(function(pe){return J.some(function(fe){var me=fe.key;return pe===me})})})},[X,J,se]),_.useEffect(function(){var de;if(se&&L.current[(de=J[J.length-1])===null||de===void 0?void 0:de.key]){var pe;j(L.current[(pe=J[J.length-1])===null||pe===void 0?void 0:pe.key])}},[J,se]),Ft.createElement(IZ,qt({key:r,className:pt(s,"".concat(s,"-").concat(r),$==null?void 0:$.list,d,De(De({},"".concat(s,"-stack"),!!se),"".concat(s,"-stack-expanded"),ge)),style:p,keys:J,motionAppear:!0},ve,{onAllRemoved:function(){x(r)}}),function(de,pe){var fe=de.config,me=de.className,Ie=de.style,Me=de.index,Be=fe,$e=Be.key,ze=Be.times,Je=String($e),yt=fe,at=yt.className,gt=yt.style,wt=yt.classNames,Pe=yt.styles,mt=Er(yt,fY),dt=J.findIndex(function(Rt){return Rt.key===Je}),ht={};if(se){var je=J.length-1-(dt>-1?dt:Me-1),St=r==="top"||r==="bottom"?"-50%":"0";if(je>0){var Ct,Lt,At;ht.height=ge?(Ct=L.current[Je])===null||Ct===void 0?void 0:Ct.offsetHeight:B==null?void 0:B.offsetHeight;for(var Yt=0,Kt=0;Kt<je;Kt++){var Dt;Yt+=((Dt=L.current[J[J.length-1-Kt].key])===null||Dt===void 0?void 0:Dt.offsetHeight)+we}var Wt=(ge?Yt:je*ce)*(r.startsWith("top")?1:-1),Vt=!ge&&B!==null&&B!==void 0&&B.offsetWidth&&(Lt=L.current[Je])!==null&&Lt!==void 0&&Lt.offsetWidth?((B==null?void 0:B.offsetWidth)-ce*2*(je<3?je:3))/((At=L.current[Je])===null||At===void 0?void 0:At.offsetWidth):1;ht.transform="translate3d(".concat(St,", ").concat(Wt,"px, 0) scaleX(").concat(Vt,")")}else ht.transform="translate3d(".concat(St,", 0, 0)")}return Ft.createElement("div",{ref:pe,className:pt("".concat(s,"-notice-wrapper"),me,wt==null?void 0:wt.wrapper),style:We(We(We({},Ie),ht),Pe==null?void 0:Pe.wrapper),onMouseEnter:function(){return ee(function(dn){return dn.includes(Je)?dn:[].concat(un(dn),[Je])})},onMouseLeave:function(){return ee(function(dn){return dn.filter(function(hn){return hn!==Je})})}},Ft.createElement(GB,qt({},mt,{ref:function(dn){dt>-1?L.current[Je]=dn:delete L.current[Je]},prefixCls:s,classNames:wt,styles:Pe,className:pt(at,$==null?void 0:$.notice),style:gt,times:ze,key:$e,eventKey:$e,onNoticeClose:S,hovering:se&&X.length>0})))})},mY=_.forwardRef(function(e,t){var n=e.prefixCls,r=n===void 0?"rc-notification":n,s=e.container,d=e.motion,p=e.maxCount,i=e.className,x=e.style,S=e.onAllRemoved,T=e.stack,M=e.renderNotifications,$=_.useState([]),L=ot($,2),N=L[0],V=L[1],B=function(se){var ae,ce=N.find(function(Ce){return Ce.key===se});ce==null||(ae=ce.onClose)===null||ae===void 0||ae.call(ce),V(function(Ce){return Ce.filter(function(we){return we.key!==se})})};_.useImperativeHandle(t,function(){return{open:function(se){V(function(ae){var ce=un(ae),Ce=ce.findIndex(function(ve){return ve.key===se.key}),we=We({},se);if(Ce>=0){var ge;we.times=(((ge=ae[Ce])===null||ge===void 0?void 0:ge.times)||0)+1,ce[Ce]=we}else we.times=0,ce.push(we);return p>0&&ce.length>p&&(ce=ce.slice(-p)),ce})},close:function(se){B(se)},destroy:function(){V([])}}});var j=_.useState({}),H=ot(j,2),W=H[0],X=H[1];_.useEffect(function(){var re={};N.forEach(function(se){var ae=se.placement,ce=ae===void 0?"topRight":ae;ce&&(re[ce]=re[ce]||[],re[ce].push(se))}),Object.keys(W).forEach(function(se){re[se]=re[se]||[]}),X(re)},[N]);var ee=function(se){X(function(ae){var ce=We({},ae),Ce=ce[se]||[];return Ce.length||delete ce[se],ce})},J=_.useRef(!1);if(_.useEffect(function(){Object.keys(W).length>0?J.current=!0:J.current&&(S==null||S(),J.current=!1)},[W]),!s)return null;var Y=Object.keys(W);return xc.createPortal(_.createElement(_.Fragment,null,Y.map(function(re){var se=W[re],ae=_.createElement(pY,{key:re,configList:se,placement:re,prefixCls:r,className:i==null?void 0:i(re),style:x==null?void 0:x(re),motion:d,onNoticeClose:B,onAllNoticeRemoved:ee,stack:T});return M?M(ae,{prefixCls:r,key:re}):ae})),s)}),gY=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],vY=function(){return document.body},J$=0;function yY(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(s){s&&Object.keys(s).forEach(function(d){var p=s[d];p!==void 0&&(e[d]=p)})}),e}function _Y(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.getContainer,n=t===void 0?vY:t,r=e.motion,s=e.prefixCls,d=e.maxCount,p=e.className,i=e.style,x=e.onAllRemoved,S=e.stack,T=e.renderNotifications,M=Er(e,gY),$=_.useState(),L=ot($,2),N=L[0],V=L[1],B=_.useRef(),j=_.createElement(mY,{container:N,ref:B,prefixCls:s,motion:r,maxCount:d,className:p,style:i,onAllRemoved:x,stack:S,renderNotifications:T}),H=_.useState([]),W=ot(H,2),X=W[0],ee=W[1],J=_.useMemo(function(){return{open:function(re){var se=yY(M,re);(se.key===null||se.key===void 0)&&(se.key="rc-notification-".concat(J$),J$+=1),ee(function(ae){return[].concat(un(ae),[{type:"open",config:se}])})},close:function(re){ee(function(se){return[].concat(un(se),[{type:"close",key:re}])})},destroy:function(){ee(function(re){return[].concat(un(re),[{type:"destroy"}])})}}},[]);return _.useEffect(function(){V(n())}),_.useEffect(function(){B.current&&X.length&&(X.forEach(function(Y){switch(Y.type){case"open":B.current.open(Y.config);break;case"close":B.current.close(Y.key);break;case"destroy":B.current.destroy();break}}),ee(function(Y){return Y.filter(function(re){return!X.includes(re)})}))},[X]),[J,j]}var xY={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},bY=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:xY}))},xy=_.forwardRef(bY);const by=Ft.createContext(void 0),ad=100,wY=10,KB=ad*wY,XB={Modal:ad,Drawer:ad,Popover:ad,Popconfirm:ad,Tooltip:ad,Tour:ad,FloatButton:ad},SY={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function CY(e){return e in XB}const jd=(e,t)=>{const[,n]=Ra(),r=Ft.useContext(by),s=CY(e);let d;if(t!==void 0)d=[t,t];else{let p=r??0;s?p+=(r?0:n.zIndexPopupBase)+XB[e]:p+=SY[e],d=[r===void 0?t:p,p]}return d},EY=e=>{const{componentCls:t,iconCls:n,boxShadow:r,colorText:s,colorSuccess:d,colorError:p,colorWarning:i,colorInfo:x,fontSizeLG:S,motionEaseInOutCirc:T,motionDurationSlow:M,marginXS:$,paddingXS:L,borderRadiusLG:N,zIndexPopup:V,contentPadding:B,contentBg:j}=e,H=`${t}-notice`,W=new Mi("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:L,transform:"translateY(0)",opacity:1}}),X=new Mi("MessageMoveOut",{"0%":{maxHeight:e.height,padding:L,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),ee={padding:L,textAlign:"center",[`${t}-custom-content`]:{display:"flex",alignItems:"center"},[`${t}-custom-content > ${n}`]:{marginInlineEnd:$,fontSize:S},[`${H}-content`]:{display:"inline-block",padding:B,background:j,borderRadius:N,boxShadow:r,pointerEvents:"all"},[`${t}-success > ${n}`]:{color:d},[`${t}-error > ${n}`]:{color:p},[`${t}-warning > ${n}`]:{color:i},[`${t}-info > ${n},
      ${t}-loading > ${n}`]:{color:x}};return[{[t]:Object.assign(Object.assign({},lo(e)),{color:s,position:"fixed",top:$,width:"100%",pointerEvents:"none",zIndex:V,[`${t}-move-up`]:{animationFillMode:"forwards"},[`
        ${t}-move-up-appear,
        ${t}-move-up-enter
      `]:{animationName:W,animationDuration:M,animationPlayState:"paused",animationTimingFunction:T},[`
        ${t}-move-up-appear${t}-move-up-appear-active,
        ${t}-move-up-enter${t}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${t}-move-up-leave`]:{animationName:X,animationDuration:M,animationPlayState:"paused",animationTimingFunction:T},[`${t}-move-up-leave${t}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[t]:{[`${H}-wrapper`]:Object.assign({},ee)}},{[`${t}-notice-pure-panel`]:Object.assign(Object.assign({},ee),{padding:0,textAlign:"start"})}]},TY=e=>({zIndexPopup:e.zIndexPopupBase+KB+10,contentBg:e.colorBgElevated,contentPadding:`${(e.controlHeightLG-e.fontSize*e.lineHeight)/2}px ${e.paddingSM}px`}),ZB=Qi("Message",e=>{const t=pi(e,{height:150});return[EY(t)]},TY);var IY=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const MY={info:_.createElement(UB,null),success:_.createElement(HB,null),error:_.createElement(_w,null),warning:_.createElement(xw,null),loading:_.createElement(xy,null)},YB=e=>{let{prefixCls:t,type:n,icon:r,children:s}=e;return _.createElement("div",{className:pt(`${t}-custom-content`,`${t}-${n}`)},r||MY[n],_.createElement("span",null,s))},PY=e=>{const{prefixCls:t,className:n,type:r,icon:s,content:d}=e,p=IY(e,["prefixCls","className","type","icon","content"]),{getPrefixCls:i}=_.useContext(fr),x=t||i("message"),S=Qo(x),[T,M,$]=ZB(x,S);return T(_.createElement(GB,Object.assign({},p,{prefixCls:x,className:pt(n,M,`${x}-notice-pure-panel`,$,S),eventKey:"pure",duration:null,content:_.createElement(YB,{prefixCls:x,type:r,icon:s},d)})))};function RY(e,t){return{motionName:t??`${e}-move-up`}}function bP(e){let t;const n=new Promise(s=>{t=e(()=>{s(!0)})}),r=()=>{t==null||t()};return r.then=(s,d)=>n.then(s,d),r.promise=n,r}var OY=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const AY=8,DY=3,$Y=e=>{let{children:t,prefixCls:n}=e;const r=Qo(n),[s,d,p]=ZB(n,r);return s(_.createElement(dY,{classNames:{list:pt(d,p,r)}},t))},kY=(e,t)=>{let{prefixCls:n,key:r}=t;return _.createElement($Y,{prefixCls:n,key:r},e)},zY=_.forwardRef((e,t)=>{const{top:n,prefixCls:r,getContainer:s,maxCount:d,duration:p=DY,rtl:i,transitionName:x,onAllRemoved:S}=e,{getPrefixCls:T,getPopupContainer:M,message:$,direction:L}=_.useContext(fr),N=r||T("message"),V=()=>({left:"50%",transform:"translateX(-50%)",top:n??AY}),B=()=>pt({[`${N}-rtl`]:i??L==="rtl"}),j=()=>RY(N,x),H=_.createElement("span",{className:`${N}-close-x`},_.createElement(Om,{className:`${N}-close-icon`})),[W,X]=_Y({prefixCls:N,style:V,className:B,motion:j,closable:!1,closeIcon:H,duration:p,getContainer:()=>(s==null?void 0:s())||(M==null?void 0:M())||document.body,maxCount:d,onAllRemoved:S,renderNotifications:kY});return _.useImperativeHandle(t,()=>Object.assign(Object.assign({},W),{prefixCls:N,message:$})),X});let Q$=0;function JB(e){const t=_.useRef(null);return sf(),[_.useMemo(()=>{const r=x=>{var S;(S=t.current)===null||S===void 0||S.close(x)},s=x=>{if(!t.current){const J=()=>{};return J.then=()=>{},J}const{open:S,prefixCls:T,message:M}=t.current,$=`${T}-notice`,{content:L,icon:N,type:V,key:B,className:j,style:H,onClose:W}=x,X=OY(x,["content","icon","type","key","className","style","onClose"]);let ee=B;return ee==null&&(Q$+=1,ee=`antd-message-${Q$}`),bP(J=>(S(Object.assign(Object.assign({},X),{key:ee,content:_.createElement(YB,{prefixCls:T,type:V,icon:N},L),placement:"top",className:pt(V&&`${$}-${V}`,j,M==null?void 0:M.className),style:Object.assign(Object.assign({},M==null?void 0:M.style),H),onClose:()=>{W==null||W(),J()}})),()=>{r(ee)}))},p={open:s,destroy:x=>{var S;x!==void 0?r(x):(S=t.current)===null||S===void 0||S.destroy()}};return["info","success","warning","error","loading"].forEach(x=>{const S=(T,M,$)=>{let L;T&&typeof T=="object"&&"content"in T?L=T:L={content:T};let N,V;typeof M=="function"?V=M:(N=M,V=$);const B=Object.assign(Object.assign({onClose:V,duration:N},L),{type:x});return s(B)};p[x]=S}),p},[]),_.createElement(zY,Object.assign({key:"message-holder"},e,{ref:t}))]}function LY(e){return JB(e)}function NY(){const[e,t]=_.useState([]),n=_.useCallback(r=>(t(s=>[].concat(un(s),[r])),()=>{t(s=>s.filter(d=>d!==r))}),[]);return[e,n]}function rs(){rs=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,s=Object.defineProperty||function(de,pe,fe){de[pe]=fe.value},d=typeof Symbol=="function"?Symbol:{},p=d.iterator||"@@iterator",i=d.asyncIterator||"@@asyncIterator",x=d.toStringTag||"@@toStringTag";function S(de,pe,fe){return Object.defineProperty(de,pe,{value:fe,enumerable:!0,configurable:!0,writable:!0}),de[pe]}try{S({},"")}catch{S=function(fe,me,Ie){return fe[me]=Ie}}function T(de,pe,fe,me){var Ie=pe&&pe.prototype instanceof j?pe:j,Me=Object.create(Ie.prototype),Be=new ge(me||[]);return s(Me,"_invoke",{value:ae(de,fe,Be)}),Me}function M(de,pe,fe){try{return{type:"normal",arg:de.call(pe,fe)}}catch(me){return{type:"throw",arg:me}}}t.wrap=T;var $="suspendedStart",L="suspendedYield",N="executing",V="completed",B={};function j(){}function H(){}function W(){}var X={};S(X,p,function(){return this});var ee=Object.getPrototypeOf,J=ee&&ee(ee(ve([])));J&&J!==n&&r.call(J,p)&&(X=J);var Y=W.prototype=j.prototype=Object.create(X);function re(de){["next","throw","return"].forEach(function(pe){S(de,pe,function(fe){return this._invoke(pe,fe)})})}function se(de,pe){function fe(Ie,Me,Be,$e){var ze=M(de[Ie],de,Me);if(ze.type!=="throw"){var Je=ze.arg,yt=Je.value;return yt&&cr(yt)=="object"&&r.call(yt,"__await")?pe.resolve(yt.__await).then(function(at){fe("next",at,Be,$e)},function(at){fe("throw",at,Be,$e)}):pe.resolve(yt).then(function(at){Je.value=at,Be(Je)},function(at){return fe("throw",at,Be,$e)})}$e(ze.arg)}var me;s(this,"_invoke",{value:function(Me,Be){function $e(){return new pe(function(ze,Je){fe(Me,Be,ze,Je)})}return me=me?me.then($e,$e):$e()}})}function ae(de,pe,fe){var me=$;return function(Ie,Me){if(me===N)throw Error("Generator is already running");if(me===V){if(Ie==="throw")throw Me;return{value:e,done:!0}}for(fe.method=Ie,fe.arg=Me;;){var Be=fe.delegate;if(Be){var $e=ce(Be,fe);if($e){if($e===B)continue;return $e}}if(fe.method==="next")fe.sent=fe._sent=fe.arg;else if(fe.method==="throw"){if(me===$)throw me=V,fe.arg;fe.dispatchException(fe.arg)}else fe.method==="return"&&fe.abrupt("return",fe.arg);me=N;var ze=M(de,pe,fe);if(ze.type==="normal"){if(me=fe.done?V:L,ze.arg===B)continue;return{value:ze.arg,done:fe.done}}ze.type==="throw"&&(me=V,fe.method="throw",fe.arg=ze.arg)}}}function ce(de,pe){var fe=pe.method,me=de.iterator[fe];if(me===e)return pe.delegate=null,fe==="throw"&&de.iterator.return&&(pe.method="return",pe.arg=e,ce(de,pe),pe.method==="throw")||fe!=="return"&&(pe.method="throw",pe.arg=new TypeError("The iterator does not provide a '"+fe+"' method")),B;var Ie=M(me,de.iterator,pe.arg);if(Ie.type==="throw")return pe.method="throw",pe.arg=Ie.arg,pe.delegate=null,B;var Me=Ie.arg;return Me?Me.done?(pe[de.resultName]=Me.value,pe.next=de.nextLoc,pe.method!=="return"&&(pe.method="next",pe.arg=e),pe.delegate=null,B):Me:(pe.method="throw",pe.arg=new TypeError("iterator result is not an object"),pe.delegate=null,B)}function Ce(de){var pe={tryLoc:de[0]};1 in de&&(pe.catchLoc=de[1]),2 in de&&(pe.finallyLoc=de[2],pe.afterLoc=de[3]),this.tryEntries.push(pe)}function we(de){var pe=de.completion||{};pe.type="normal",delete pe.arg,de.completion=pe}function ge(de){this.tryEntries=[{tryLoc:"root"}],de.forEach(Ce,this),this.reset(!0)}function ve(de){if(de||de===""){var pe=de[p];if(pe)return pe.call(de);if(typeof de.next=="function")return de;if(!isNaN(de.length)){var fe=-1,me=function Ie(){for(;++fe<de.length;)if(r.call(de,fe))return Ie.value=de[fe],Ie.done=!1,Ie;return Ie.value=e,Ie.done=!0,Ie};return me.next=me}}throw new TypeError(cr(de)+" is not iterable")}return H.prototype=W,s(Y,"constructor",{value:W,configurable:!0}),s(W,"constructor",{value:H,configurable:!0}),H.displayName=S(W,x,"GeneratorFunction"),t.isGeneratorFunction=function(de){var pe=typeof de=="function"&&de.constructor;return!!pe&&(pe===H||(pe.displayName||pe.name)==="GeneratorFunction")},t.mark=function(de){return Object.setPrototypeOf?Object.setPrototypeOf(de,W):(de.__proto__=W,S(de,x,"GeneratorFunction")),de.prototype=Object.create(Y),de},t.awrap=function(de){return{__await:de}},re(se.prototype),S(se.prototype,i,function(){return this}),t.AsyncIterator=se,t.async=function(de,pe,fe,me,Ie){Ie===void 0&&(Ie=Promise);var Me=new se(T(de,pe,fe,me),Ie);return t.isGeneratorFunction(pe)?Me:Me.next().then(function(Be){return Be.done?Be.value:Me.next()})},re(Y),S(Y,x,"Generator"),S(Y,p,function(){return this}),S(Y,"toString",function(){return"[object Generator]"}),t.keys=function(de){var pe=Object(de),fe=[];for(var me in pe)fe.push(me);return fe.reverse(),function Ie(){for(;fe.length;){var Me=fe.pop();if(Me in pe)return Ie.value=Me,Ie.done=!1,Ie}return Ie.done=!0,Ie}},t.values=ve,ge.prototype={constructor:ge,reset:function(pe){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(we),!pe)for(var fe in this)fe.charAt(0)==="t"&&r.call(this,fe)&&!isNaN(+fe.slice(1))&&(this[fe]=e)},stop:function(){this.done=!0;var pe=this.tryEntries[0].completion;if(pe.type==="throw")throw pe.arg;return this.rval},dispatchException:function(pe){if(this.done)throw pe;var fe=this;function me(Je,yt){return Be.type="throw",Be.arg=pe,fe.next=Je,yt&&(fe.method="next",fe.arg=e),!!yt}for(var Ie=this.tryEntries.length-1;Ie>=0;--Ie){var Me=this.tryEntries[Ie],Be=Me.completion;if(Me.tryLoc==="root")return me("end");if(Me.tryLoc<=this.prev){var $e=r.call(Me,"catchLoc"),ze=r.call(Me,"finallyLoc");if($e&&ze){if(this.prev<Me.catchLoc)return me(Me.catchLoc,!0);if(this.prev<Me.finallyLoc)return me(Me.finallyLoc)}else if($e){if(this.prev<Me.catchLoc)return me(Me.catchLoc,!0)}else{if(!ze)throw Error("try statement without catch or finally");if(this.prev<Me.finallyLoc)return me(Me.finallyLoc)}}}},abrupt:function(pe,fe){for(var me=this.tryEntries.length-1;me>=0;--me){var Ie=this.tryEntries[me];if(Ie.tryLoc<=this.prev&&r.call(Ie,"finallyLoc")&&this.prev<Ie.finallyLoc){var Me=Ie;break}}Me&&(pe==="break"||pe==="continue")&&Me.tryLoc<=fe&&fe<=Me.finallyLoc&&(Me=null);var Be=Me?Me.completion:{};return Be.type=pe,Be.arg=fe,Me?(this.method="next",this.next=Me.finallyLoc,B):this.complete(Be)},complete:function(pe,fe){if(pe.type==="throw")throw pe.arg;return pe.type==="break"||pe.type==="continue"?this.next=pe.arg:pe.type==="return"?(this.rval=this.arg=pe.arg,this.method="return",this.next="end"):pe.type==="normal"&&fe&&(this.next=fe),B},finish:function(pe){for(var fe=this.tryEntries.length-1;fe>=0;--fe){var me=this.tryEntries[fe];if(me.finallyLoc===pe)return this.complete(me.completion,me.afterLoc),we(me),B}},catch:function(pe){for(var fe=this.tryEntries.length-1;fe>=0;--fe){var me=this.tryEntries[fe];if(me.tryLoc===pe){var Ie=me.completion;if(Ie.type==="throw"){var Me=Ie.arg;we(me)}return Me}}throw Error("illegal catch attempt")},delegateYield:function(pe,fe,me){return this.delegate={iterator:ve(pe),resultName:fe,nextLoc:me},this.method==="next"&&(this.arg=e),B}},t}function ek(e,t,n,r,s,d,p){try{var i=e[d](p),x=i.value}catch(S){return void n(S)}i.done?t(x):Promise.resolve(x).then(r,s)}function lf(e){return function(){var t=this,n=arguments;return new Promise(function(r,s){var d=e.apply(t,n);function p(x){ek(d,r,s,p,i,"next",x)}function i(x){ek(d,r,s,p,i,"throw",x)}p(void 0)})}}var wy=We({},tG),FY=wy.version,BY=wy.render,jY=wy.unmountComponentAtNode,bw;try{var VY=Number((FY||"").split(".")[0]);VY>=18&&(bw=wy.createRoot)}catch{}function tk(e){var t=wy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&cr(t)==="object"&&(t.usingClientEntryPoint=e)}var E1="__rc_react_root__";function HY(e,t){tk(!0);var n=t[E1]||bw(t);tk(!1),n.render(e),t[E1]=n}function UY(e,t){BY(e,t)}function wP(e,t){if(bw){HY(e,t);return}UY(e,t)}function WY(e){return hI.apply(this,arguments)}function hI(){return hI=lf(rs().mark(function e(t){return rs().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Promise.resolve().then(function(){var s;(s=t[E1])===null||s===void 0||s.unmount(),delete t[E1]}));case 1:case"end":return r.stop()}},e)})),hI.apply(this,arguments)}function GY(e){jY(e)}function QB(e){return fI.apply(this,arguments)}function fI(){return fI=lf(rs().mark(function e(t){return rs().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(bw===void 0){r.next=2;break}return r.abrupt("return",WY(t));case 2:GY(t);case 3:case"end":return r.stop()}},e)})),fI.apply(this,arguments)}const z2=()=>({height:0,opacity:0}),nk=e=>{const{scrollHeight:t}=e;return{height:t,opacity:1}},qY=e=>({height:e?e.offsetHeight:0}),L2=(e,t)=>(t==null?void 0:t.deadline)===!0||t.propertyName==="height",e5=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:oy}-motion-collapse`,onAppearStart:z2,onEnterStart:z2,onAppearActive:nk,onEnterActive:nk,onLeaveStart:qY,onLeaveActive:z2,onAppearEnd:L2,onEnterEnd:L2,onLeaveEnd:L2,motionDeadline:500}},Sc=(e,t,n)=>n!==void 0?n:`${e}-${t}`,Sy=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),n=t.width,r=t.height;if(n||r)return!0}if(e.getBoundingClientRect){var s=e.getBoundingClientRect(),d=s.width,p=s.height;if(d||p)return!0}}return!1},KY=e=>{const{componentCls:t,colorPrimary:n}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${n})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${e.motionDurationSlow} ${e.motionEaseInOut}`,`opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`].join(",")}}}}},XY=eZ("Wave",e=>[KY(e)]),ww=`${oy}-wave-target`;function N2(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function ZY(e){const{borderTopColor:t,borderColor:n,backgroundColor:r}=getComputedStyle(e);return N2(t)?t:N2(n)?n:N2(r)?r:null}function F2(e){return Number.isNaN(e)?0:e}const YY=e=>{const{className:t,target:n,component:r}=e,s=_.useRef(null),[d,p]=_.useState(null),[i,x]=_.useState([]),[S,T]=_.useState(0),[M,$]=_.useState(0),[L,N]=_.useState(0),[V,B]=_.useState(0),[j,H]=_.useState(!1),W={left:S,top:M,width:L,height:V,borderRadius:i.map(J=>`${J}px`).join(" ")};d&&(W["--wave-color"]=d);function X(){const J=getComputedStyle(n);p(ZY(n));const Y=J.position==="static",{borderLeftWidth:re,borderTopWidth:se}=J;T(Y?n.offsetLeft:F2(-parseFloat(re))),$(Y?n.offsetTop:F2(-parseFloat(se))),N(n.offsetWidth),B(n.offsetHeight);const{borderTopLeftRadius:ae,borderTopRightRadius:ce,borderBottomLeftRadius:Ce,borderBottomRightRadius:we}=J;x([ae,ce,we,Ce].map(ge=>F2(parseFloat(ge))))}if(_.useEffect(()=>{if(n){const J=ui(()=>{X(),H(!0)});let Y;return typeof ResizeObserver<"u"&&(Y=new ResizeObserver(X),Y.observe(n)),()=>{ui.cancel(J),Y==null||Y.disconnect()}}},[]),!j)return null;const ee=(r==="Checkbox"||r==="Radio")&&(n==null?void 0:n.classList.contains(ww));return _.createElement(dl,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(J,Y)=>{var re;if(Y.deadline||Y.propertyName==="opacity"){const se=(re=s.current)===null||re===void 0?void 0:re.parentElement;QB(se).then(()=>{se==null||se.remove()})}return!1}},(J,Y)=>{let{className:re}=J;return _.createElement("div",{ref:Ua(s,Y),className:pt(t,re,{"wave-quick":ee}),style:W})})},JY=(e,t)=>{var n;const{component:r}=t;if(r==="Checkbox"&&!(!((n=e.querySelector("input"))===null||n===void 0)&&n.checked))return;const s=document.createElement("div");s.style.position="absolute",s.style.left="0px",s.style.top="0px",e==null||e.insertBefore(s,e==null?void 0:e.firstChild),wP(_.createElement(YY,Object.assign({},t,{target:e})),s)},QY=(e,t,n)=>{const{wave:r}=_.useContext(fr),[,s,d]=Ra(),p=Zr(S=>{const T=e.current;if(r!=null&&r.disabled||!T)return;const M=T.querySelector(`.${ww}`)||T,{showEffect:$}=r||{};($||JY)(M,{className:t,token:s,component:n,event:S,hashId:d})}),i=_.useRef();return S=>{ui.cancel(i.current),i.current=ui(()=>{p(S)})}},SP=e=>{const{children:t,disabled:n,component:r}=e,{getPrefixCls:s}=_.useContext(fr),d=_.useRef(null),p=s("wave"),[,i]=XY(p),x=QY(d,pt(p,i),r);if(Ft.useEffect(()=>{const T=d.current;if(!T||T.nodeType!==1||n)return;const M=$=>{!Sy($.target)||!T.getAttribute||T.getAttribute("disabled")||T.disabled||T.className.includes("disabled")||T.className.includes("-leave")||x($)};return T.addEventListener("click",M,!0),()=>{T.removeEventListener("click",M,!0)}},[n]),!Ft.isValidElement(t))return t??null;const S=bc(t)?Ua(t.ref,d):d;return ns(t,{ref:S})},as=e=>{const t=Ft.useContext(hm);return Ft.useMemo(()=>e?typeof e=="string"?e??t:e instanceof Function?e(t):t:t,[e,t])},eJ=e=>{const{componentCls:t}=e;return{[t]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}},tJ=e=>{const{componentCls:t,antCls:n}=e;return{[t]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${t}-item:empty`]:{display:"none"},[`${t}-item > ${n}-badge-not-a-wrapper:only-child`]:{display:"block"}}}},nJ=e=>{const{componentCls:t}=e;return{[t]:{"&-gap-row-small":{rowGap:e.spaceGapSmallSize},"&-gap-row-middle":{rowGap:e.spaceGapMiddleSize},"&-gap-row-large":{rowGap:e.spaceGapLargeSize},"&-gap-col-small":{columnGap:e.spaceGapSmallSize},"&-gap-col-middle":{columnGap:e.spaceGapMiddleSize},"&-gap-col-large":{columnGap:e.spaceGapLargeSize}}}},t5=Qi("Space",e=>{const t=pi(e,{spaceGapSmallSize:e.paddingXS,spaceGapMiddleSize:e.padding,spaceGapLargeSize:e.paddingLG});return[tJ(t),nJ(t),eJ(t)]},()=>({}),{resetStyle:!1});var n5=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Sw=_.createContext(null),cf=(e,t)=>{const n=_.useContext(Sw),r=_.useMemo(()=>{if(!n)return"";const{compactDirection:s,isFirstItem:d,isLastItem:p}=n,i=s==="vertical"?"-vertical-":"-";return pt(`${e}-compact${i}item`,{[`${e}-compact${i}first-item`]:d,[`${e}-compact${i}last-item`]:p,[`${e}-compact${i}item-rtl`]:t==="rtl"})},[e,t,n]);return{compactSize:n==null?void 0:n.compactSize,compactDirection:n==null?void 0:n.compactDirection,compactItemClassnames:r}},rJ=e=>{let{children:t}=e;return _.createElement(Sw.Provider,{value:null},t)},iJ=e=>{var{children:t}=e,n=n5(e,["children"]);return _.createElement(Sw.Provider,{value:n},t)},oJ=e=>{const{getPrefixCls:t,direction:n}=_.useContext(fr),{size:r,direction:s,block:d,prefixCls:p,className:i,rootClassName:x,children:S}=e,T=n5(e,["size","direction","block","prefixCls","className","rootClassName","children"]),M=as(W=>r??W),$=t("space-compact",p),[L,N]=t5($),V=pt($,N,{[`${$}-rtl`]:n==="rtl",[`${$}-block`]:d,[`${$}-vertical`]:s==="vertical"},i,x),B=_.useContext(Sw),j=Ha(S),H=_.useMemo(()=>j.map((W,X)=>{const ee=(W==null?void 0:W.key)||`${$}-item-${X}`;return _.createElement(iJ,{key:ee,compactSize:M,compactDirection:s,isFirstItem:X===0&&(!B||(B==null?void 0:B.isFirstItem)),isLastItem:X===j.length-1&&(!B||(B==null?void 0:B.isLastItem))},W)}),[r,j,B]);return j.length===0?null:L(_.createElement("div",Object.assign({className:V},T),H))};var aJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const r5=_.createContext(void 0),sJ=e=>{const{getPrefixCls:t,direction:n}=_.useContext(fr),{prefixCls:r,size:s,className:d}=e,p=aJ(e,["prefixCls","size","className"]),i=t("btn-group",r),[,,x]=Ra();let S="";switch(s){case"large":S="lg";break;case"small":S="sm";break}const T=pt(i,{[`${i}-${S}`]:S,[`${i}-rtl`]:n==="rtl"},d,x);return _.createElement(r5.Provider,{value:s},_.createElement("div",Object.assign({},p,{className:T})))},rk=/^[\u4E00-\u9FA5]{2}$/,pI=rk.test.bind(rk);function CP(e){return e==="danger"?{danger:!0}:{type:e}}function ik(e){return typeof e=="string"}function B2(e){return e==="text"||e==="link"}function lJ(e,t){if(e==null)return;const n=t?" ":"";return typeof e!="string"&&typeof e!="number"&&ik(e.type)&&pI(e.props.children)?ns(e,{children:e.props.children.split("").join(n)}):ik(e)?pI(e)?Ft.createElement("span",null,e.split("").join(n)):Ft.createElement("span",null,e):WB(e)?Ft.createElement("span",null,e):e}function cJ(e,t){let n=!1;const r=[];return Ft.Children.forEach(e,s=>{const d=typeof s,p=d==="string"||d==="number";if(n&&p){const i=r.length-1,x=r[i];r[i]=`${x}${s}`}else r.push(s);n=p}),Ft.Children.map(r,s=>lJ(s,t))}const i5=_.forwardRef((e,t)=>{const{className:n,style:r,children:s,prefixCls:d}=e,p=pt(`${d}-icon`,n);return Ft.createElement("span",{ref:t,className:p,style:r},s)}),ok=_.forwardRef((e,t)=>{const{prefixCls:n,className:r,style:s,iconClassName:d}=e,p=pt(`${n}-loading-icon`,r);return Ft.createElement(i5,{prefixCls:n,className:p,style:s,ref:t},Ft.createElement(xy,{className:d}))}),j2=()=>({width:0,opacity:0,transform:"scale(0)"}),V2=e=>({width:e.scrollWidth,opacity:1,transform:"scale(1)"}),uJ=e=>{const{prefixCls:t,loading:n,existIcon:r,className:s,style:d}=e,p=!!n;return r?Ft.createElement(ok,{prefixCls:t,className:s,style:d}):Ft.createElement(dl,{visible:p,motionName:`${t}-loading-icon-motion`,motionLeave:p,removeOnLeave:!0,onAppearStart:j2,onAppearActive:V2,onEnterStart:j2,onEnterActive:V2,onLeaveStart:V2,onLeaveActive:j2},(i,x)=>{let{className:S,style:T}=i;return Ft.createElement(ok,{prefixCls:t,className:s,style:Object.assign(Object.assign({},d),T),ref:x,iconClassName:S})})},ak=(e,t)=>({[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineEndColor:t}}},"&:not(:first-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineStartColor:t}}}}}),dJ=e=>{const{componentCls:t,fontSize:n,lineWidth:r,groupBorderColor:s,colorErrorHover:d}=e;return{[`${t}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:e.calc(r).mul(-1).equal(),[`&, & > ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[t]:{position:"relative",zIndex:1,"&:hover, &:focus, &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${t}-icon-only`]:{fontSize:n}},ak(`${t}-primary`,s),ak(`${t}-danger`,d)]}},ha=Math.round;function H2(e,t){const n=e.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],r=n.map(s=>parseFloat(s));for(let s=0;s<3;s+=1)r[s]=t(r[s]||0,n[s]||"",s);return n[3]?r[3]=n[3].includes("%")?r[3]/100:r[3]:r[3]=1,r}const sk=(e,t,n)=>n===0?e:e/100;function qv(e,t){const n=t||255;return e>n?n:e<0?0:e}class Cw{constructor(t){De(this,"isValid",!0),De(this,"r",0),De(this,"g",0),De(this,"b",0),De(this,"a",1),De(this,"_h",void 0),De(this,"_s",void 0),De(this,"_l",void 0),De(this,"_v",void 0),De(this,"_max",void 0),De(this,"_min",void 0),De(this,"_brightness",void 0);function n(s){return s[0]in t&&s[1]in t&&s[2]in t}if(t)if(typeof t=="string"){let d=function(p){return s.startsWith(p)};var r=d;const s=t.trim();/^#?[A-F\d]{3,8}$/i.test(s)?this.fromHexString(s):d("rgb")?this.fromRgbString(s):d("hsl")?this.fromHslString(s):(d("hsv")||d("hsb"))&&this.fromHsvString(s)}else if(t instanceof Cw)this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this._h=t._h,this._s=t._s,this._l=t._l,this._v=t._v;else if(n("rgb"))this.r=qv(t.r),this.g=qv(t.g),this.b=qv(t.b),this.a=typeof t.a=="number"?qv(t.a,1):1;else if(n("hsl"))this.fromHsl(t);else if(n("hsv"))this.fromHsv(t);else throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(t))}setR(t){return this._sc("r",t)}setG(t){return this._sc("g",t)}setB(t){return this._sc("b",t)}setA(t){return this._sc("a",t,1)}setHue(t){const n=this.toHsv();return n.h=t,this._c(n)}getLuminance(){function t(d){const p=d/255;return p<=.03928?p/12.92:Math.pow((p+.055)/1.055,2.4)}const n=t(this.r),r=t(this.g),s=t(this.b);return .2126*n+.7152*r+.0722*s}getHue(){if(typeof this._h>"u"){const t=this.getMax()-this.getMin();t===0?this._h=0:this._h=ha(60*(this.r===this.getMax()?(this.g-this.b)/t+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/t+2:(this.r-this.g)/t+4))}return this._h}getSaturation(){if(typeof this._s>"u"){const t=this.getMax()-this.getMin();t===0?this._s=0:this._s=t/this.getMax()}return this._s}getLightness(){return typeof this._l>"u"&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return typeof this._v>"u"&&(this._v=this.getMax()/255),this._v}getBrightness(){return typeof this._brightness>"u"&&(this._brightness=(this.r*299+this.g*587+this.b*114)/1e3),this._brightness}darken(t=10){const n=this.getHue(),r=this.getSaturation();let s=this.getLightness()-t/100;return s<0&&(s=0),this._c({h:n,s:r,l:s,a:this.a})}lighten(t=10){const n=this.getHue(),r=this.getSaturation();let s=this.getLightness()+t/100;return s>1&&(s=1),this._c({h:n,s:r,l:s,a:this.a})}mix(t,n=50){const r=this._c(t),s=n/100,d=i=>(r[i]-this[i])*s+this[i],p={r:ha(d("r")),g:ha(d("g")),b:ha(d("b")),a:ha(d("a")*100)/100};return this._c(p)}tint(t=10){return this.mix({r:255,g:255,b:255,a:1},t)}shade(t=10){return this.mix({r:0,g:0,b:0,a:1},t)}onBackground(t){const n=this._c(t),r=this.a+n.a*(1-this.a),s=d=>ha((this[d]*this.a+n[d]*n.a*(1-this.a))/r);return this._c({r:s("r"),g:s("g"),b:s("b"),a:r})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a}clone(){return this._c(this)}toHexString(){let t="#";const n=(this.r||0).toString(16);t+=n.length===2?n:"0"+n;const r=(this.g||0).toString(16);t+=r.length===2?r:"0"+r;const s=(this.b||0).toString(16);if(t+=s.length===2?s:"0"+s,typeof this.a=="number"&&this.a>=0&&this.a<1){const d=ha(this.a*255).toString(16);t+=d.length===2?d:"0"+d}return t}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const t=this.getHue(),n=ha(this.getSaturation()*100),r=ha(this.getLightness()*100);return this.a!==1?`hsla(${t},${n}%,${r}%,${this.a})`:`hsl(${t},${n}%,${r}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return this.a!==1?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(t,n,r){const s=this.clone();return s[t]=qv(n,r),s}_c(t){return new this.constructor(t)}getMax(){return typeof this._max>"u"&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return typeof this._min>"u"&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(t){const n=t.replace("#","");function r(s,d){return parseInt(n[s]+n[d||s],16)}n.length<6?(this.r=r(0),this.g=r(1),this.b=r(2),this.a=n[3]?r(3)/255:1):(this.r=r(0,1),this.g=r(2,3),this.b=r(4,5),this.a=n[6]?r(6,7)/255:1)}fromHsl({h:t,s:n,l:r,a:s}){if(this._h=t%360,this._s=n,this._l=r,this.a=typeof s=="number"?s:1,n<=0){const $=ha(r*255);this.r=$,this.g=$,this.b=$}let d=0,p=0,i=0;const x=t/60,S=(1-Math.abs(2*r-1))*n,T=S*(1-Math.abs(x%2-1));x>=0&&x<1?(d=S,p=T):x>=1&&x<2?(d=T,p=S):x>=2&&x<3?(p=S,i=T):x>=3&&x<4?(p=T,i=S):x>=4&&x<5?(d=T,i=S):x>=5&&x<6&&(d=S,i=T);const M=r-S/2;this.r=ha((d+M)*255),this.g=ha((p+M)*255),this.b=ha((i+M)*255)}fromHsv({h:t,s:n,v:r,a:s}){this._h=t%360,this._s=n,this._v=r,this.a=typeof s=="number"?s:1;const d=ha(r*255);if(this.r=d,this.g=d,this.b=d,n<=0)return;const p=t/60,i=Math.floor(p),x=p-i,S=ha(r*(1-n)*255),T=ha(r*(1-n*x)*255),M=ha(r*(1-n*(1-x))*255);switch(i){case 0:this.g=M,this.b=S;break;case 1:this.r=T,this.b=S;break;case 2:this.r=S,this.b=M;break;case 3:this.r=S,this.g=T;break;case 4:this.r=M,this.g=S;break;case 5:default:this.g=S,this.b=T;break}}fromHsvString(t){const n=H2(t,sk);this.fromHsv({h:n[0],s:n[1],v:n[2],a:n[3]})}fromHslString(t){const n=H2(t,sk);this.fromHsl({h:n[0],s:n[1],l:n[2],a:n[3]})}fromRgbString(t){const n=H2(t,(r,s)=>s.includes("%")?ha(r/100*255):r);this.r=n[0],this.g=n[1],this.b=n[2],this.a=n[3]}}var hJ=["b"],fJ=["v"],U2=function(t){return Math.round(Number(t||0))},pJ=function(t){if(t instanceof Cw)return t;if(t&&cr(t)==="object"&&"h"in t&&"b"in t){var n=t,r=n.b,s=Er(n,hJ);return We(We({},s),{},{v:r})}return typeof t=="string"&&/hsb/.test(t)?t.replace(/hsb/,"hsv"):t},sy=function(e){Kl(n,e);var t=Xl(n);function n(r){return zo(this,n),t.call(this,pJ(r))}return Lo(n,[{key:"toHsbString",value:function(){var s=this.toHsb(),d=U2(s.s*100),p=U2(s.b*100),i=U2(s.h),x=s.a,S="hsb(".concat(i,", ").concat(d,"%, ").concat(p,"%)"),T="hsba(".concat(i,", ").concat(d,"%, ").concat(p,"%, ").concat(x.toFixed(x===0?0:2),")");return x===1?S:T}},{key:"toHsb",value:function(){var s=this.toHsv(),d=s.v,p=Er(s,fJ);return We(We({},p),{},{b:d,a:this.a})}}]),n}(Cw),mJ=function(t){return t instanceof sy?t:new sy(t)};mJ("#1677ff");const gJ=(e,t)=>(e==null?void 0:e.replace(/[^\w/]/g,"").slice(0,t?8:6))||"",vJ=(e,t)=>e?gJ(e,t):"";let yJ=function(){function e(t){zo(this,e);var n;if(this.cleared=!1,t instanceof e){this.metaColor=t.metaColor.clone(),this.colors=(n=t.colors)===null||n===void 0?void 0:n.map(s=>({color:new e(s.color),percent:s.percent})),this.cleared=t.cleared;return}const r=Array.isArray(t);r&&t.length?(this.colors=t.map(s=>{let{color:d,percent:p}=s;return{color:new e(d),percent:p}}),this.metaColor=new sy(this.colors[0].color.metaColor)):this.metaColor=new sy(r?"":t),(!t||r&&!this.colors)&&(this.metaColor=this.metaColor.setA(0),this.cleared=!0)}return Lo(e,[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return vJ(this.toHexString(),this.metaColor.a<1)}},{key:"toHexString",value:function(){return this.metaColor.toHexString()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}},{key:"isGradient",value:function(){return!!this.colors&&!this.cleared}},{key:"getColors",value:function(){return this.colors||[{color:this,percent:0}]}},{key:"toCssString",value:function(){const{colors:n}=this;return n?`linear-gradient(90deg, ${n.map(s=>`${s.color.toRgbString()} ${s.percent}%`).join(", ")})`:this.metaColor.toRgbString()}},{key:"equals",value:function(n){return!n||this.isGradient()!==n.isGradient()?!1:this.isGradient()?this.colors.length===n.colors.length&&this.colors.every((r,s)=>{const d=n.colors[s];return r.percent===d.percent&&r.color.equals(d.color)}):this.toHexString()===n.toHexString()}}])}();var _J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},xJ=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:_J}))},ly=_.forwardRef(xJ);const o5=e=>({[e.componentCls]:{[`${e.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}},[`${e.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}}}),bJ=e=>({animationDuration:e,animationFillMode:"both"}),wJ=e=>({animationDuration:e,animationFillMode:"both"}),Ew=function(e,t,n,r){const d=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${d}${e}-enter,
      ${d}${e}-appear
    `]:Object.assign(Object.assign({},bJ(r)),{animationPlayState:"paused"}),[`${d}${e}-leave`]:Object.assign(Object.assign({},wJ(r)),{animationPlayState:"paused"}),[`
      ${d}${e}-enter${e}-enter-active,
      ${d}${e}-appear${e}-appear-active
    `]:{animationName:t,animationPlayState:"running"},[`${d}${e}-leave${e}-leave-active`]:{animationName:n,animationPlayState:"running",pointerEvents:"none"}}},SJ=new Mi("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),CJ=new Mi("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),EJ=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:n}=e,r=`${n}-fade`,s=t?"&":"";return[Ew(r,SJ,CJ,e.motionDurationMid,t),{[`
        ${s}${r}-enter,
        ${s}${r}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${s}${r}-leave`]:{animationTimingFunction:"linear"}}]},TJ=new Mi("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),IJ=new Mi("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),MJ=new Mi("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),PJ=new Mi("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),RJ=new Mi("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),OJ=new Mi("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),AJ=new Mi("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),DJ=new Mi("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),$J={"move-up":{inKeyframes:AJ,outKeyframes:DJ},"move-down":{inKeyframes:TJ,outKeyframes:IJ},"move-left":{inKeyframes:MJ,outKeyframes:PJ},"move-right":{inKeyframes:RJ,outKeyframes:OJ}},pm=(e,t)=>{const{antCls:n}=e,r=`${n}-${t}`,{inKeyframes:s,outKeyframes:d}=$J[t];return[Ew(r,s,d,e.motionDurationMid),{[`
        ${r}-enter,
        ${r}-appear
      `]:{opacity:0,animationTimingFunction:e.motionEaseOutCirc},[`${r}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},Tw=new Mi("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),Iw=new Mi("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),Mw=new Mi("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),Pw=new Mi("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),kJ=new Mi("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),zJ=new Mi("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),LJ=new Mi("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),NJ=new Mi("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),FJ={"slide-up":{inKeyframes:Tw,outKeyframes:Iw},"slide-down":{inKeyframes:Mw,outKeyframes:Pw},"slide-left":{inKeyframes:kJ,outKeyframes:zJ},"slide-right":{inKeyframes:LJ,outKeyframes:NJ}},Cc=(e,t)=>{const{antCls:n}=e,r=`${n}-${t}`,{inKeyframes:s,outKeyframes:d}=FJ[t];return[Ew(r,s,d,e.motionDurationMid),{[`
      ${r}-enter,
      ${r}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:e.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${r}-leave`]:{animationTimingFunction:e.motionEaseInQuint}}]},BJ=new Mi("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),jJ=new Mi("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),lk=new Mi("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),ck=new Mi("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),VJ=new Mi("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),HJ=new Mi("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),UJ=new Mi("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),WJ=new Mi("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),GJ=new Mi("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),qJ=new Mi("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),KJ=new Mi("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),XJ=new Mi("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),ZJ={zoom:{inKeyframes:BJ,outKeyframes:jJ},"zoom-big":{inKeyframes:lk,outKeyframes:ck},"zoom-big-fast":{inKeyframes:lk,outKeyframes:ck},"zoom-left":{inKeyframes:UJ,outKeyframes:WJ},"zoom-right":{inKeyframes:GJ,outKeyframes:qJ},"zoom-up":{inKeyframes:VJ,outKeyframes:HJ},"zoom-down":{inKeyframes:KJ,outKeyframes:XJ}},Cy=(e,t)=>{const{antCls:n}=e,r=`${n}-${t}`,{inKeyframes:s,outKeyframes:d}=ZJ[t];return[Ew(r,s,d,t==="zoom-big-fast"?e.motionDurationFast:e.motionDurationMid),{[`
        ${r}-enter,
        ${r}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:e.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${r}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},YJ=(e,t)=>{const{r:n,g:r,b:s,a:d}=e.toRgb(),p=new sy(e.toRgbString()).onBackground(t).toHsv();return d<=.5?p.v>.5:n*.299+r*.587+s*.114>192},a5=e=>{const{paddingInline:t,onlyIconSize:n,paddingBlock:r}=e;return pi(e,{buttonPaddingHorizontal:t,buttonPaddingVertical:r,buttonIconOnlyFontSize:n})},s5=e=>{var t,n,r,s,d,p;const i=(t=e.contentFontSize)!==null&&t!==void 0?t:e.fontSize,x=(n=e.contentFontSizeSM)!==null&&n!==void 0?n:e.fontSize,S=(r=e.contentFontSizeLG)!==null&&r!==void 0?r:e.fontSizeLG,T=(s=e.contentLineHeight)!==null&&s!==void 0?s:zb(i),M=(d=e.contentLineHeightSM)!==null&&d!==void 0?d:zb(x),$=(p=e.contentLineHeightLG)!==null&&p!==void 0?p:zb(S),L=YJ(new yJ(e.colorBgSolid),"#fff")?"#000":"#fff";return{fontWeight:400,defaultShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlTmpOutline}`,primaryShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlOutline}`,dangerShadow:`0 ${e.controlOutlineWidth}px 0 ${e.colorErrorOutline}`,primaryColor:e.colorTextLightSolid,dangerColor:e.colorTextLightSolid,borderColorDisabled:e.colorBorder,defaultGhostColor:e.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:e.colorBgContainer,paddingInline:e.paddingContentHorizontal-e.lineWidth,paddingInlineLG:e.paddingContentHorizontal-e.lineWidth,paddingInlineSM:8-e.lineWidth,onlyIconSize:e.fontSizeLG,onlyIconSizeSM:e.fontSizeLG-2,onlyIconSizeLG:e.fontSizeLG+2,groupBorderColor:e.colorPrimaryHover,linkHoverBg:"transparent",textTextColor:e.colorText,textTextHoverColor:e.colorText,textTextActiveColor:e.colorText,textHoverBg:e.colorFillTertiary,defaultColor:e.colorText,defaultBg:e.colorBgContainer,defaultBorderColor:e.colorBorder,defaultBorderColorDisabled:e.colorBorder,defaultHoverBg:e.colorBgContainer,defaultHoverColor:e.colorPrimaryHover,defaultHoverBorderColor:e.colorPrimaryHover,defaultActiveBg:e.colorBgContainer,defaultActiveColor:e.colorPrimaryActive,defaultActiveBorderColor:e.colorPrimaryActive,solidTextColor:L,contentFontSize:i,contentFontSizeSM:x,contentFontSizeLG:S,contentLineHeight:T,contentLineHeightSM:M,contentLineHeightLG:$,paddingBlock:Math.max((e.controlHeight-i*T)/2-e.lineWidth,0),paddingBlockSM:Math.max((e.controlHeightSM-x*M)/2-e.lineWidth,0),paddingBlockLG:Math.max((e.controlHeightLG-S*$)/2-e.lineWidth,0)}},JJ=e=>{const{componentCls:t,iconCls:n,fontWeight:r}=e;return{[t]:{outline:"none",position:"relative",display:"inline-flex",gap:e.marginXS,alignItems:"center",justifyContent:"center",fontWeight:r,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:`${nt(e.lineWidth)} ${e.lineType} transparent`,cursor:"pointer",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",color:e.colorText,"&:disabled > *":{pointerEvents:"none"},"> span":{display:"inline-block"},[`${t}-icon`]:{lineHeight:1},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},au(e)),[`&${t}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${t}-two-chinese-chars > *:not(${n})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},"&-icon-end":{flexDirection:"row-reverse"}}}},l5=(e,t,n)=>({[`&:not(:disabled):not(${e}-disabled)`]:{"&:hover":t,"&:active":n}}),QJ=e=>({minWidth:e.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),eQ=e=>({borderRadius:e.controlHeight,paddingInlineStart:e.calc(e.controlHeight).div(2).equal(),paddingInlineEnd:e.calc(e.controlHeight).div(2).equal()}),tQ=e=>({cursor:"not-allowed",borderColor:e.borderColorDisabled,color:e.colorTextDisabled,background:e.colorBgContainerDisabled,boxShadow:"none"}),EP=(e,t,n,r,s,d,p,i)=>({[`&${e}-background-ghost`]:Object.assign(Object.assign({color:n||void 0,background:t,borderColor:r||void 0,boxShadow:"none"},l5(e,Object.assign({background:t},p),Object.assign({background:t},i))),{"&:disabled":{cursor:"not-allowed",color:s||void 0,borderColor:d||void 0}})}),nQ=e=>({[`&:disabled, &${e.componentCls}-disabled`]:Object.assign({},tQ(e))}),rQ=e=>({[`&:disabled, &${e.componentCls}-disabled`]:{cursor:"not-allowed",color:e.colorTextDisabled}}),Rw=(e,t,n,r)=>{const d=r&&["link","text"].includes(r)?rQ:nQ;return Object.assign(Object.assign({},d(e)),l5(e.componentCls,t,n))},TP=(e,t,n,r,s)=>({[`&${e.componentCls}-variant-solid`]:Object.assign({color:t,background:n},Rw(e,r,s))}),IP=(e,t,n,r,s)=>({[`&${e.componentCls}-variant-outlined, &${e.componentCls}-variant-dashed`]:Object.assign({borderColor:t,background:n},Rw(e,r,s))}),MP=e=>({[`&${e.componentCls}-variant-dashed`]:{borderStyle:"dashed"}}),PP=(e,t,n,r)=>({[`&${e.componentCls}-variant-filled`]:Object.assign({boxShadow:"none",background:t},Rw(e,n,r))}),mm=(e,t,n,r,s)=>({[`&${e.componentCls}-variant-${n}`]:Object.assign({color:t,boxShadow:"none"},Rw(e,r,s,n))}),iQ=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.defaultColor,boxShadow:e.defaultShadow},TP(e,e.solidTextColor,e.colorBgSolid,{background:e.colorBgSolidHover},{background:e.colorBgSolidActive})),MP(e)),PP(e,e.colorFillTertiary,{background:e.colorFillSecondary},{background:e.colorFill})),mm(e,e.textTextColor,"link",{color:e.colorLinkHover,background:e.linkHoverBg},{color:e.colorLinkActive})),EP(e.componentCls,e.ghostBg,e.defaultGhostColor,e.defaultGhostBorderColor,e.colorTextDisabled,e.colorBorder)),oQ=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.colorPrimary,boxShadow:e.primaryShadow},IP(e,e.colorPrimary,e.colorBgContainer,{color:e.colorPrimaryTextHover,borderColor:e.colorPrimaryHover,background:e.colorBgContainer},{color:e.colorPrimaryTextActive,borderColor:e.colorPrimaryActive,background:e.colorBgContainer})),MP(e)),PP(e,e.colorPrimaryBg,{background:e.colorPrimaryBgHover},{background:e.colorPrimaryBorder})),mm(e,e.colorLink,"text",{color:e.colorPrimaryTextHover,background:e.colorPrimaryBg},{color:e.colorPrimaryTextActive,background:e.colorPrimaryBorder})),EP(e.componentCls,e.ghostBg,e.colorPrimary,e.colorPrimary,e.colorTextDisabled,e.colorBorder,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),aQ=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.colorError,boxShadow:e.dangerShadow},TP(e,e.dangerColor,e.colorError,{background:e.colorErrorHover},{background:e.colorErrorActive})),IP(e,e.colorError,e.colorBgContainer,{color:e.colorErrorHover,borderColor:e.colorErrorBorderHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),MP(e)),PP(e,e.colorErrorBg,{background:e.colorErrorBgFilledHover},{background:e.colorErrorBgActive})),mm(e,e.colorError,"text",{color:e.colorErrorHover,background:e.colorErrorBg},{color:e.colorErrorHover,background:e.colorErrorBgActive})),mm(e,e.colorError,"link",{color:e.colorErrorHover},{color:e.colorErrorActive})),EP(e.componentCls,e.ghostBg,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder,{color:e.colorErrorHover,borderColor:e.colorErrorHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),sQ=e=>{const{componentCls:t}=e;return{[`${t}-color-default`]:iQ(e),[`${t}-color-primary`]:oQ(e),[`${t}-color-dangerous`]:aQ(e)}},lQ=e=>Object.assign(Object.assign(Object.assign(Object.assign({},IP(e,e.defaultBorderColor,e.defaultBg,{color:e.defaultHoverColor,borderColor:e.defaultHoverBorderColor,background:e.defaultHoverBg},{color:e.defaultActiveColor,borderColor:e.defaultActiveBorderColor,background:e.defaultActiveBg})),mm(e,e.textTextColor,"text",{color:e.textTextHoverColor,background:e.textHoverBg},{color:e.textTextActiveColor,background:e.colorBgTextActive})),TP(e,e.primaryColor,e.colorPrimary,{background:e.colorPrimaryHover,color:e.primaryColor},{background:e.colorPrimaryActive,color:e.primaryColor})),mm(e,e.colorLink,"link",{color:e.colorLinkHover,background:e.linkHoverBg},{color:e.colorLinkActive})),RP=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:n,controlHeight:r,fontSize:s,lineHeight:d,borderRadius:p,buttonPaddingHorizontal:i,iconCls:x,buttonPaddingVertical:S}=e,T=`${n}-icon-only`;return[{[t]:{fontSize:s,lineHeight:d,height:r,padding:`${nt(S)} ${nt(i)}`,borderRadius:p,[`&${T}`]:{width:r,paddingInline:0,[`&${n}-compact-item`]:{flex:"none"},[`&${n}-round`]:{width:"auto"},[x]:{fontSize:e.buttonIconOnlyFontSize}},[`&${n}-loading`]:{opacity:e.opacityLoading,cursor:"default"},[`${n}-loading-icon`]:{transition:`width ${e.motionDurationSlow} ${e.motionEaseInOut}, opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`}}},{[`${n}${n}-circle${t}`]:QJ(e)},{[`${n}${n}-round${t}`]:eQ(e)}]},cQ=e=>{const t=pi(e,{fontSize:e.contentFontSize,lineHeight:e.contentLineHeight});return RP(t,e.componentCls)},uQ=e=>{const t=pi(e,{controlHeight:e.controlHeightSM,fontSize:e.contentFontSizeSM,lineHeight:e.contentLineHeightSM,padding:e.paddingXS,buttonPaddingHorizontal:e.paddingInlineSM,buttonPaddingVertical:e.paddingBlockSM,borderRadius:e.borderRadiusSM,buttonIconOnlyFontSize:e.onlyIconSizeSM});return RP(t,`${e.componentCls}-sm`)},dQ=e=>{const t=pi(e,{controlHeight:e.controlHeightLG,fontSize:e.contentFontSizeLG,lineHeight:e.contentLineHeightLG,buttonPaddingHorizontal:e.paddingInlineLG,buttonPaddingVertical:e.paddingBlockLG,borderRadius:e.borderRadiusLG,buttonIconOnlyFontSize:e.onlyIconSizeLG});return RP(t,`${e.componentCls}-lg`)},hQ=e=>{const{componentCls:t}=e;return{[t]:{[`&${t}-block`]:{width:"100%"}}}},fQ=Qi("Button",e=>{const t=a5(e);return[JJ(t),cQ(t),uQ(t),dQ(t),hQ(t),sQ(t),lQ(t),dJ(t)]},s5,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}});function pQ(e,t,n){const{focusElCls:r,focus:s,borderElCls:d}=n,p=d?"> *":"",i=["hover",s?"focus":null,"active"].filter(Boolean).map(x=>`&:${x} ${p}`).join(",");return{[`&-item:not(${t}-last-item)`]:{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[i]:{zIndex:2}},r?{[`&${r}`]:{zIndex:2}}:{}),{[`&[disabled] ${p}`]:{zIndex:0}})}}function mQ(e,t,n){const{borderElCls:r}=n,s=r?`> ${r}`:"";return{[`&-item:not(${t}-first-item):not(${t}-last-item) ${s}`]:{borderRadius:0},[`&-item:not(${t}-last-item)${t}-first-item`]:{[`& ${s}, &${e}-sm ${s}, &${e}-lg ${s}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${t}-first-item)${t}-last-item`]:{[`& ${s}, &${e}-sm ${s}, &${e}-lg ${s}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function Ow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:n}=e,r=`${n}-compact`;return{[r]:Object.assign(Object.assign({},pQ(e,r,t)),mQ(n,r,t))}}function gQ(e,t){return{[`&-item:not(${t}-last-item)`]:{marginBottom:e.calc(e.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function vQ(e,t){return{[`&-item:not(${t}-first-item):not(${t}-last-item)`]:{borderRadius:0},[`&-item${t}-first-item:not(${t}-last-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${t}-last-item:not(${t}-first-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function yQ(e){const t=`${e.componentCls}-compact-vertical`;return{[t]:Object.assign(Object.assign({},gQ(e,t)),vQ(e.componentCls,t))}}const _Q=e=>{const{componentCls:t,calc:n}=e;return{[t]:{[`&-compact-item${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:n(e.lineWidth).mul(-1).equal(),insetInlineStart:n(e.lineWidth).mul(-1).equal(),display:"inline-block",width:e.lineWidth,height:`calc(100% + ${nt(e.lineWidth)} * 2)`,backgroundColor:e.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-vertical-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:n(e.lineWidth).mul(-1).equal(),insetInlineStart:n(e.lineWidth).mul(-1).equal(),display:"inline-block",width:`calc(100% + ${nt(e.lineWidth)} * 2)`,height:e.lineWidth,backgroundColor:e.colorPrimaryHover,content:'""'}}}}}}},xQ=_P(["Button","compact"],e=>{const t=a5(e);return[Ow(t),yQ(t),_Q(t)]},s5);var bQ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};function wQ(e){if(typeof e=="object"&&e){let t=e==null?void 0:e.delay;return t=!Number.isNaN(t)&&typeof t=="number"?t:0,{loading:t<=0,delay:t}}return{loading:!!e,delay:0}}const SQ={default:["default","outlined"],primary:["primary","solid"],dashed:["default","dashed"],link:["primary","link"],text:["default","text"]},CQ=Ft.forwardRef((e,t)=>{var n,r,s,d;const{loading:p=!1,prefixCls:i,color:x,variant:S,type:T,danger:M=!1,shape:$="default",size:L,styles:N,disabled:V,className:B,rootClassName:j,children:H,icon:W,iconPosition:X="start",ghost:ee=!1,block:J=!1,htmlType:Y="button",classNames:re,style:se={},autoInsertSpace:ae}=e,ce=bQ(e,["loading","prefixCls","color","variant","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","iconPosition","ghost","block","htmlType","classNames","style","autoInsertSpace"]),Ce=T||"default",[we,ge]=_.useMemo(()=>{if(x&&S)return[x,S];const kn=SQ[Ce]||[];return M?["danger",kn[1]]:kn},[T,x,S,M]),de=we==="danger"?"dangerous":we,{getPrefixCls:pe,direction:fe,button:me}=_.useContext(fr),Ie=(n=ae??(me==null?void 0:me.autoInsertSpace))!==null&&n!==void 0?n:!0,Me=pe("btn",i),[Be,$e,ze]=fQ(Me),Je=_.useContext(ul),yt=V??Je,at=_.useContext(r5),gt=_.useMemo(()=>wQ(p),[p]),[wt,Pe]=_.useState(gt.loading),[mt,dt]=_.useState(!1),je=Ua(t,_.createRef()),St=_.Children.count(H)===1&&!W&&!B2(ge);_.useEffect(()=>{let kn=null;gt.delay>0?kn=setTimeout(()=>{kn=null,Pe(!0)},gt.delay):Pe(gt.loading);function Cn(){kn&&(clearTimeout(kn),kn=null)}return Cn},[gt]),_.useEffect(()=>{if(!je||!je.current||!Ie)return;const kn=je.current.textContent;St&&pI(kn)?mt||dt(!0):mt&&dt(!1)},[je]);const Ct=Ft.useCallback(kn=>{var Cn;if(wt||yt){kn.preventDefault();return}(Cn=e.onClick)===null||Cn===void 0||Cn.call(e,kn)},[e.onClick,wt,yt]),{compactSize:Lt,compactItemClassnames:At}=cf(Me,fe),Yt={large:"lg",small:"sm",middle:void 0},Kt=as(kn=>{var Cn,nn;return(nn=(Cn=L??Lt)!==null&&Cn!==void 0?Cn:at)!==null&&nn!==void 0?nn:kn}),Dt=Kt&&(r=Yt[Kt])!==null&&r!==void 0?r:"",Wt=wt?"loading":W,Vt=vo(ce,["navigate"]),Rt=pt(Me,$e,ze,{[`${Me}-${$}`]:$!=="default"&&$,[`${Me}-${Ce}`]:Ce,[`${Me}-dangerous`]:M,[`${Me}-color-${de}`]:de,[`${Me}-variant-${ge}`]:ge,[`${Me}-${Dt}`]:Dt,[`${Me}-icon-only`]:!H&&H!==0&&!!Wt,[`${Me}-background-ghost`]:ee&&!B2(ge),[`${Me}-loading`]:wt,[`${Me}-two-chinese-chars`]:mt&&Ie&&!wt,[`${Me}-block`]:J,[`${Me}-rtl`]:fe==="rtl",[`${Me}-icon-end`]:X==="end"},At,B,j,me==null?void 0:me.className),dn=Object.assign(Object.assign({},me==null?void 0:me.style),se),hn=pt(re==null?void 0:re.icon,(s=me==null?void 0:me.classNames)===null||s===void 0?void 0:s.icon),Pn=Object.assign(Object.assign({},(N==null?void 0:N.icon)||{}),((d=me==null?void 0:me.styles)===null||d===void 0?void 0:d.icon)||{}),Dn=W&&!wt?Ft.createElement(i5,{prefixCls:Me,className:hn,style:Pn},W):Ft.createElement(uJ,{existIcon:!!W,prefixCls:Me,loading:wt}),yn=H||H===0?cJ(H,St&&Ie):null;if(Vt.href!==void 0)return Be(Ft.createElement("a",Object.assign({},Vt,{className:pt(Rt,{[`${Me}-disabled`]:yt}),href:yt?void 0:Vt.href,style:dn,onClick:Ct,ref:je,tabIndex:yt?-1:0}),Dn,yn));let Rn=Ft.createElement("button",Object.assign({},ce,{type:Y,className:Rt,style:dn,onClick:Ct,disabled:yt,ref:je}),Dn,yn,!!At&&Ft.createElement(xQ,{key:"compact",prefixCls:Me}));return B2(ge)||(Rn=Ft.createElement(SP,{component:"Button",disabled:wt},Rn)),Be(Rn)}),Di=CQ;Di.Group=sJ;Di.__ANT_BUTTON=!0;function W2(e){return!!(e!=null&&e.then)}const OP=e=>{const{type:t,children:n,prefixCls:r,buttonProps:s,close:d,autoFocus:p,emitEvent:i,isSilent:x,quitOnNullishReturnValue:S,actionFn:T}=e,M=_.useRef(!1),$=_.useRef(null),[L,N]=fm(!1),V=function(){d==null||d.apply(void 0,arguments)};_.useEffect(()=>{let H=null;return p&&(H=setTimeout(()=>{var W;(W=$.current)===null||W===void 0||W.focus()})),()=>{H&&clearTimeout(H)}},[]);const B=H=>{W2(H)&&(N(!0),H.then(function(){N(!1,!0),V.apply(void 0,arguments),M.current=!1},W=>{if(N(!1,!0),M.current=!1,!(x!=null&&x()))return Promise.reject(W)}))},j=H=>{if(M.current)return;if(M.current=!0,!T){V();return}let W;if(i){if(W=T(H),S&&!W2(W)){M.current=!1,V(H);return}}else if(T.length)W=T(d),M.current=!1;else if(W=T(),!W2(W)){V();return}B(W)};return _.createElement(Di,Object.assign({},CP(t),{onClick:j,loading:L,prefixCls:r},s,{ref:$}),n)},Ey=Ft.createContext({}),{Provider:c5}=Ey,uk=()=>{const{autoFocusButton:e,cancelButtonProps:t,cancelTextLocale:n,isSilent:r,mergedOkCancel:s,rootPrefixCls:d,close:p,onCancel:i,onConfirm:x}=_.useContext(Ey);return s?Ft.createElement(OP,{isSilent:r,actionFn:i,close:function(){p==null||p.apply(void 0,arguments),x==null||x(!1)},autoFocus:e==="cancel",buttonProps:t,prefixCls:`${d}-btn`},n):null},dk=()=>{const{autoFocusButton:e,close:t,isSilent:n,okButtonProps:r,rootPrefixCls:s,okTextLocale:d,okType:p,onConfirm:i,onOk:x}=_.useContext(Ey);return Ft.createElement(OP,{isSilent:n,type:p||"primary",actionFn:x,close:function(){t==null||t.apply(void 0,arguments),i==null||i(!0)},autoFocus:e==="ok",buttonProps:r,prefixCls:`${s}-btn`},d)};var u5=_.createContext(null),hk=[];function EQ(e,t){var n=_.useState(function(){if(!Ma())return null;var N=document.createElement("div");return N}),r=ot(n,1),s=r[0],d=_.useRef(!1),p=_.useContext(u5),i=_.useState(hk),x=ot(i,2),S=x[0],T=x[1],M=p||(d.current?void 0:function(N){T(function(V){var B=[N].concat(un(V));return B})});function $(){s.parentElement||document.body.appendChild(s),d.current=!0}function L(){var N;(N=s.parentElement)===null||N===void 0||N.removeChild(s),d.current=!1}return Xr(function(){return e?p?p($):$():L(),L},[e]),Xr(function(){S.length&&(S.forEach(function(N){return N()}),T(hk))},[S]),[s,M]}var G2;function d5(e){var t="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),n=document.createElement("div");n.id=t;var r=n.style;r.position="absolute",r.left="0",r.top="0",r.width="100px",r.height="100px",r.overflow="scroll";var s,d;if(e){var p=getComputedStyle(e);r.scrollbarColor=p.scrollbarColor,r.scrollbarWidth=p.scrollbarWidth;var i=getComputedStyle(e,"::-webkit-scrollbar"),x=parseInt(i.width,10),S=parseInt(i.height,10);try{var T=x?"width: ".concat(i.width,";"):"",M=S?"height: ".concat(i.height,";"):"";Jc(`
#`.concat(t,`::-webkit-scrollbar {
`).concat(T,`
`).concat(M,`
}`),t)}catch(N){console.error(N),s=x,d=S}}document.body.appendChild(n);var $=e&&s&&!isNaN(s)?s:n.offsetWidth-n.clientWidth,L=e&&d&&!isNaN(d)?d:n.offsetHeight-n.clientHeight;return document.body.removeChild(n),ey(t),{width:$,height:L}}function fk(e){return typeof document>"u"?0:(G2===void 0&&(G2=d5()),G2.width)}function mI(e){return typeof document>"u"||!e||!(e instanceof Element)?{width:0,height:0}:d5(e)}function TQ(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var IQ="rc-util-locker-".concat(Date.now()),pk=0;function MQ(e){var t=!!e,n=_.useState(function(){return pk+=1,"".concat(IQ,"_").concat(pk)}),r=ot(n,1),s=r[0];Xr(function(){if(t){var d=mI(document.body).width,p=TQ();Jc(`
html body {
  overflow-y: hidden;
  `.concat(p?"width: calc(100% - ".concat(d,"px);"):"",`
}`),s)}else ey(s);return function(){ey(s)}},[t,s])}var PQ=!1;function RQ(e){return PQ}var mk=function(t){return t===!1?!1:!Ma()||!t?null:typeof t=="string"?document.querySelector(t):typeof t=="function"?t():t},Aw=_.forwardRef(function(e,t){var n=e.open,r=e.autoLock,s=e.getContainer;e.debug;var d=e.autoDestroy,p=d===void 0?!0:d,i=e.children,x=_.useState(n),S=ot(x,2),T=S[0],M=S[1],$=T||n;_.useEffect(function(){(p||n)&&M(n)},[n,p]);var L=_.useState(function(){return mk(s)}),N=ot(L,2),V=N[0],B=N[1];_.useEffect(function(){var ce=mk(s);B(ce??null)});var j=EQ($&&!V),H=ot(j,2),W=H[0],X=H[1],ee=V??W;MQ(r&&n&&Ma()&&(ee===W||ee===document.body));var J=null;if(i&&bc(i)&&t){var Y=i;J=Y.ref}var re=lu(J,t);if(!$||!Ma()||V===void 0)return null;var se=ee===!1||RQ(),ae=i;return t&&(ae=_.cloneElement(i,{ref:re})),_.createElement(u5.Provider,{value:X},se?ae:xc.createPortal(ae,ee))}),h5=_.createContext({});function OQ(){var e=We({},my);return e.useId}var gk=0,vk=OQ();const f5=vk?function(t){var n=vk();return t||n}:function(t){var n=_.useState("ssr-id"),r=ot(n,2),s=r[0],d=r[1];return _.useEffect(function(){var p=gk;gk+=1,d("rc_unique_".concat(p))},[]),t||s};function yk(e,t,n){var r=t;return!r&&n&&(r="".concat(e,"-").concat(n)),r}function _k(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if(typeof n!="number"){var s=e.document;n=s.documentElement[r],typeof n!="number"&&(n=s.body[r])}return n}function AQ(e){var t=e.getBoundingClientRect(),n={left:t.left,top:t.top},r=e.ownerDocument,s=r.defaultView||r.parentWindow;return n.left+=_k(s),n.top+=_k(s,!0),n}const DQ=_.memo(function(e){var t=e.children;return t},function(e,t){var n=t.shouldUpdate;return!n});var $Q={width:0,height:0,overflow:"hidden",outline:"none"},kQ={outline:"none"},p5=Ft.forwardRef(function(e,t){var n=e.prefixCls,r=e.className,s=e.style,d=e.title,p=e.ariaId,i=e.footer,x=e.closable,S=e.closeIcon,T=e.onClose,M=e.children,$=e.bodyStyle,L=e.bodyProps,N=e.modalRender,V=e.onMouseDown,B=e.onMouseUp,j=e.holderRef,H=e.visible,W=e.forceRender,X=e.width,ee=e.height,J=e.classNames,Y=e.styles,re=Ft.useContext(h5),se=re.panel,ae=lu(j,se),ce=_.useRef(),Ce=_.useRef();Ft.useImperativeHandle(t,function(){return{focus:function(){var Be;(Be=ce.current)===null||Be===void 0||Be.focus({preventScroll:!0})},changeActive:function(Be){var $e=document,ze=$e.activeElement;Be&&ze===Ce.current?ce.current.focus({preventScroll:!0}):!Be&&ze===ce.current&&Ce.current.focus({preventScroll:!0})}}});var we={};X!==void 0&&(we.width=X),ee!==void 0&&(we.height=ee);var ge=i?Ft.createElement("div",{className:pt("".concat(n,"-footer"),J==null?void 0:J.footer),style:We({},Y==null?void 0:Y.footer)},i):null,ve=d?Ft.createElement("div",{className:pt("".concat(n,"-header"),J==null?void 0:J.header),style:We({},Y==null?void 0:Y.header)},Ft.createElement("div",{className:"".concat(n,"-title"),id:p},d)):null,de=_.useMemo(function(){return cr(x)==="object"&&x!==null?x:x?{closeIcon:S??Ft.createElement("span",{className:"".concat(n,"-close-x")})}:{}},[x,S,n]),pe=Ko(de,!0),fe=cr(x)==="object"&&x.disabled,me=x?Ft.createElement("button",qt({type:"button",onClick:T,"aria-label":"Close"},pe,{className:"".concat(n,"-close"),disabled:fe}),de.closeIcon):null,Ie=Ft.createElement("div",{className:pt("".concat(n,"-content"),J==null?void 0:J.content),style:Y==null?void 0:Y.content},me,ve,Ft.createElement("div",qt({className:pt("".concat(n,"-body"),J==null?void 0:J.body),style:We(We({},$),Y==null?void 0:Y.body)},L),M),ge);return Ft.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":d?p:null,"aria-modal":"true",ref:ae,style:We(We({},s),we),className:pt(n,r),onMouseDown:V,onMouseUp:B},Ft.createElement("div",{ref:ce,tabIndex:0,style:kQ},Ft.createElement(DQ,{shouldUpdate:H||W},N?N(Ie):Ie)),Ft.createElement("div",{tabIndex:0,ref:Ce,style:$Q}))}),m5=_.forwardRef(function(e,t){var n=e.prefixCls,r=e.title,s=e.style,d=e.className,p=e.visible,i=e.forceRender,x=e.destroyOnClose,S=e.motionName,T=e.ariaId,M=e.onVisibleChanged,$=e.mousePosition,L=_.useRef(),N=_.useState(),V=ot(N,2),B=V[0],j=V[1],H={};B&&(H.transformOrigin=B);function W(){var X=AQ(L.current);j($&&($.x||$.y)?"".concat($.x-X.left,"px ").concat($.y-X.top,"px"):"")}return _.createElement(dl,{visible:p,onVisibleChanged:M,onAppearPrepare:W,onEnterPrepare:W,forceRender:i,motionName:S,removeOnLeave:x,ref:L},function(X,ee){var J=X.className,Y=X.style;return _.createElement(p5,qt({},e,{ref:t,title:r,ariaId:T,prefixCls:n,holderRef:ee,style:We(We(We({},Y),s),H),className:pt(d,J)}))})});m5.displayName="Content";var zQ=function(t){var n=t.prefixCls,r=t.style,s=t.visible,d=t.maskProps,p=t.motionName,i=t.className;return _.createElement(dl,{key:"mask",visible:s,motionName:p,leavedClassName:"".concat(n,"-mask-hidden")},function(x,S){var T=x.className,M=x.style;return _.createElement("div",qt({ref:S,style:We(We({},M),r),className:pt("".concat(n,"-mask"),T,i)},d))})},LQ=function(t){var n=t.prefixCls,r=n===void 0?"rc-dialog":n,s=t.zIndex,d=t.visible,p=d===void 0?!1:d,i=t.keyboard,x=i===void 0?!0:i,S=t.focusTriggerAfterClose,T=S===void 0?!0:S,M=t.wrapStyle,$=t.wrapClassName,L=t.wrapProps,N=t.onClose,V=t.afterOpenChange,B=t.afterClose,j=t.transitionName,H=t.animation,W=t.closable,X=W===void 0?!0:W,ee=t.mask,J=ee===void 0?!0:ee,Y=t.maskTransitionName,re=t.maskAnimation,se=t.maskClosable,ae=se===void 0?!0:se,ce=t.maskStyle,Ce=t.maskProps,we=t.rootClassName,ge=t.classNames,ve=t.styles,de=_.useRef(),pe=_.useRef(),fe=_.useRef(),me=_.useState(p),Ie=ot(me,2),Me=Ie[0],Be=Ie[1],$e=f5();function ze(){zT(pe.current,document.activeElement)||(de.current=document.activeElement)}function Je(){if(!zT(pe.current,document.activeElement)){var St;(St=fe.current)===null||St===void 0||St.focus()}}function yt(St){if(St)Je();else{if(Be(!1),J&&de.current&&T){try{de.current.focus({preventScroll:!0})}catch{}de.current=null}Me&&(B==null||B())}V==null||V(St)}function at(St){N==null||N(St)}var gt=_.useRef(!1),wt=_.useRef(),Pe=function(){clearTimeout(wt.current),gt.current=!0},mt=function(){wt.current=setTimeout(function(){gt.current=!1})},dt=null;ae&&(dt=function(Ct){gt.current?gt.current=!1:pe.current===Ct.target&&at(Ct)});function ht(St){if(x&&St.keyCode===gn.ESC){St.stopPropagation(),at(St);return}p&&St.keyCode===gn.TAB&&fe.current.changeActive(!St.shiftKey)}_.useEffect(function(){p&&(Be(!0),ze())},[p]),_.useEffect(function(){return function(){clearTimeout(wt.current)}},[]);var je=We(We(We({zIndex:s},M),ve==null?void 0:ve.wrapper),{},{display:Me?null:"none"});return _.createElement("div",qt({className:pt("".concat(r,"-root"),we)},Ko(t,{data:!0})),_.createElement(zQ,{prefixCls:r,visible:J&&p,motionName:yk(r,Y,re),style:We(We({zIndex:s},ce),ve==null?void 0:ve.mask),maskProps:Ce,className:ge==null?void 0:ge.mask}),_.createElement("div",qt({tabIndex:-1,onKeyDown:ht,className:pt("".concat(r,"-wrap"),$,ge==null?void 0:ge.wrapper),ref:pe,onClick:dt,style:je},L),_.createElement(m5,qt({},t,{onMouseDown:Pe,onMouseUp:mt,ref:fe,closable:X,ariaId:$e,prefixCls:r,visible:p&&Me,onClose:at,onVisibleChanged:yt,motionName:yk(r,j,H)}))))},g5=function(t){var n=t.visible,r=t.getContainer,s=t.forceRender,d=t.destroyOnClose,p=d===void 0?!1:d,i=t.afterClose,x=t.panelRef,S=_.useState(n),T=ot(S,2),M=T[0],$=T[1],L=_.useMemo(function(){return{panel:x}},[x]);return _.useEffect(function(){n&&$(!0)},[n]),!s&&p&&!M?null:_.createElement(h5.Provider,{value:L},_.createElement(Aw,{open:n||s||M,autoDestroy:!1,getContainer:r,autoLock:n||M},_.createElement(LQ,qt({},t,{destroyOnClose:p,afterClose:function(){i==null||i(),$(!1)}}))))};g5.displayName="Dialog";var Bh="RC_FORM_INTERNAL_HOOKS",ao=function(){go(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},gm=_.createContext({getFieldValue:ao,getFieldsValue:ao,getFieldError:ao,getFieldWarning:ao,getFieldsError:ao,isFieldsTouched:ao,isFieldTouched:ao,isFieldValidating:ao,isFieldsValidating:ao,resetFields:ao,setFields:ao,setFieldValue:ao,setFieldsValue:ao,validateFields:ao,submit:ao,getInternalHooks:function(){return ao(),{dispatch:ao,initEntityValue:ao,registerField:ao,useSubscribe:ao,setInitialValues:ao,destroyForm:ao,setCallbacks:ao,registerWatch:ao,getFields:ao,setValidateMessages:ao,setPreserve:ao,getInitialValue:ao}}}),T1=_.createContext(null);function gI(e){return e==null?[]:Array.isArray(e)?e:[e]}function NQ(e){return e&&!!e._init}function vI(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var yI=vI();function FQ(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch{return typeof e=="function"}}function BQ(e,t,n){if(sP())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var s=new(e.bind.apply(e,r));return n&&Y0(s,n.prototype),s}function _I(e){var t=typeof Map=="function"?new Map:void 0;return _I=function(r){if(r===null||!FQ(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(r))return t.get(r);t.set(r,s)}function s(){return BQ(r,arguments,J0(this).constructor)}return s.prototype=Object.create(r.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),Y0(s,r)},_I(e)}var jQ=/%[sdj%]/g,VQ=function(){};function xI(e){if(!e||!e.length)return null;var t={};return e.forEach(function(n){var r=n.field;t[r]=t[r]||[],t[r].push(n)}),t}function Ls(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s=0,d=n.length;if(typeof e=="function")return e.apply(null,n);if(typeof e=="string"){var p=e.replace(jQ,function(i){if(i==="%%")return"%";if(s>=d)return i;switch(i){case"%s":return String(n[s++]);case"%d":return Number(n[s++]);case"%j":try{return JSON.stringify(n[s++])}catch{return"[Circular]"}break;default:return i}});return p}return e}function HQ(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function la(e,t){return!!(e==null||t==="array"&&Array.isArray(e)&&!e.length||HQ(t)&&typeof e=="string"&&!e)}function UQ(e,t,n){var r=[],s=0,d=e.length;function p(i){r.push.apply(r,un(i||[])),s++,s===d&&n(r)}e.forEach(function(i){t(i,p)})}function xk(e,t,n){var r=0,s=e.length;function d(p){if(p&&p.length){n(p);return}var i=r;r=r+1,i<s?t(e[i],d):n([])}d([])}function WQ(e){var t=[];return Object.keys(e).forEach(function(n){t.push.apply(t,un(e[n]||[]))}),t}var bk=function(e){Kl(n,e);var t=Xl(n);function n(r,s){var d;return zo(this,n),d=t.call(this,"Async Validation Error"),De(An(d),"errors",void 0),De(An(d),"fields",void 0),d.errors=r,d.fields=s,d}return Lo(n)}(_I(Error));function GQ(e,t,n,r,s){if(t.first){var d=new Promise(function($,L){var N=function(j){return r(j),j.length?L(new bk(j,xI(j))):$(s)},V=WQ(e);xk(V,n,N)});return d.catch(function($){return $}),d}var p=t.firstFields===!0?Object.keys(e):t.firstFields||[],i=Object.keys(e),x=i.length,S=0,T=[],M=new Promise(function($,L){var N=function(B){if(T.push.apply(T,B),S++,S===x)return r(T),T.length?L(new bk(T,xI(T))):$(s)};i.length||(r(T),$(s)),i.forEach(function(V){var B=e[V];p.indexOf(V)!==-1?xk(B,n,N):UQ(B,n,N)})});return M.catch(function($){return $}),M}function qQ(e){return!!(e&&e.message!==void 0)}function KQ(e,t){for(var n=e,r=0;r<t.length;r++){if(n==null)return n;n=n[t[r]]}return n}function wk(e,t){return function(n){var r;return e.fullFields?r=KQ(t,e.fullFields):r=t[n.field||e.fullField],qQ(n)?(n.field=n.field||e.fullField,n.fieldValue=r,n):{message:typeof n=="function"?n():n,fieldValue:r,field:n.field||e.fullField}}}function Sk(e,t){if(t){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];cr(r)==="object"&&cr(e[n])==="object"?e[n]=We(We({},e[n]),r):e[n]=r}}return e}var xp="enum",XQ=function(t,n,r,s,d){t[xp]=Array.isArray(t[xp])?t[xp]:[],t[xp].indexOf(n)===-1&&s.push(Ls(d.messages[xp],t.fullField,t[xp].join(", ")))},ZQ=function(t,n,r,s,d){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(n)||s.push(Ls(d.messages.pattern.mismatch,t.fullField,n,t.pattern));else if(typeof t.pattern=="string"){var p=new RegExp(t.pattern);p.test(n)||s.push(Ls(d.messages.pattern.mismatch,t.fullField,n,t.pattern))}}},YQ=function(t,n,r,s,d){var p=typeof t.len=="number",i=typeof t.min=="number",x=typeof t.max=="number",S=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,T=n,M=null,$=typeof n=="number",L=typeof n=="string",N=Array.isArray(n);if($?M="number":L?M="string":N&&(M="array"),!M)return!1;N&&(T=n.length),L&&(T=n.replace(S,"_").length),p?T!==t.len&&s.push(Ls(d.messages[M].len,t.fullField,t.len)):i&&!x&&T<t.min?s.push(Ls(d.messages[M].min,t.fullField,t.min)):x&&!i&&T>t.max?s.push(Ls(d.messages[M].max,t.fullField,t.max)):i&&x&&(T<t.min||T>t.max)&&s.push(Ls(d.messages[M].range,t.fullField,t.min,t.max))},v5=function(t,n,r,s,d,p){t.required&&(!r.hasOwnProperty(t.field)||la(n,p||t.type))&&s.push(Ls(d.messages.required,t.fullField))},nb;const JQ=function(){if(nb)return nb;var e="[a-fA-F\\d:]",t=function(J){return J&&J.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(e,")|(?<=").concat(e,")(?=\\s|$))"):""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",s=["(?:".concat(r,":){7}(?:").concat(r,"|:)"),"(?:".concat(r,":){6}(?:").concat(n,"|:").concat(r,"|:)"),"(?:".concat(r,":){5}(?::").concat(n,"|(?::").concat(r,"){1,2}|:)"),"(?:".concat(r,":){4}(?:(?::").concat(r,"){0,1}:").concat(n,"|(?::").concat(r,"){1,3}|:)"),"(?:".concat(r,":){3}(?:(?::").concat(r,"){0,2}:").concat(n,"|(?::").concat(r,"){1,4}|:)"),"(?:".concat(r,":){2}(?:(?::").concat(r,"){0,3}:").concat(n,"|(?::").concat(r,"){1,5}|:)"),"(?:".concat(r,":){1}(?:(?::").concat(r,"){0,4}:").concat(n,"|(?::").concat(r,"){1,6}|:)"),"(?::(?:(?::".concat(r,"){0,5}:").concat(n,"|(?::").concat(r,"){1,7}|:))")],d="(?:%[0-9a-zA-Z]{1,})?",p="(?:".concat(s.join("|"),")").concat(d),i=new RegExp("(?:^".concat(n,"$)|(?:^").concat(p,"$)")),x=new RegExp("^".concat(n,"$")),S=new RegExp("^".concat(p,"$")),T=function(J){return J&&J.exact?i:new RegExp("(?:".concat(t(J)).concat(n).concat(t(J),")|(?:").concat(t(J)).concat(p).concat(t(J),")"),"g")};T.v4=function(ee){return ee&&ee.exact?x:new RegExp("".concat(t(ee)).concat(n).concat(t(ee)),"g")},T.v6=function(ee){return ee&&ee.exact?S:new RegExp("".concat(t(ee)).concat(p).concat(t(ee)),"g")};var M="(?:(?:[a-z]+:)?//)",$="(?:\\S+(?::\\S*)?@)?",L=T.v4().source,N=T.v6().source,V="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",B="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",j="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",H="(?::\\d{2,5})?",W='(?:[/?#][^\\s"]*)?',X="(?:".concat(M,"|www\\.)").concat($,"(?:localhost|").concat(L,"|").concat(N,"|").concat(V).concat(B).concat(j,")").concat(H).concat(W);return nb=new RegExp("(?:^".concat(X,"$)"),"i"),nb};var Ck={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},s0={integer:function(t){return s0.number(t)&&parseInt(t,10)===t},float:function(t){return s0.number(t)&&!s0.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return cr(t)==="object"&&!s0.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match(Ck.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(JQ())},hex:function(t){return typeof t=="string"&&!!t.match(Ck.hex)}},QQ=function(t,n,r,s,d){if(t.required&&n===void 0){v5(t,n,r,s,d);return}var p=["integer","float","array","regexp","object","method","email","number","date","url","hex"],i=t.type;p.indexOf(i)>-1?s0[i](n)||s.push(Ls(d.messages.types[i],t.fullField,t.type)):i&&cr(n)!==t.type&&s.push(Ls(d.messages.types[i],t.fullField,t.type))},eee=function(t,n,r,s,d){(/^\s+$/.test(n)||n==="")&&s.push(Ls(d.messages.whitespace,t.fullField))};const Ii={required:v5,whitespace:eee,type:QQ,range:YQ,enum:XQ,pattern:ZQ};var tee=function(t,n,r,s,d){var p=[],i=t.required||!t.required&&s.hasOwnProperty(t.field);if(i){if(la(n)&&!t.required)return r();Ii.required(t,n,s,p,d)}r(p)},nee=function(t,n,r,s,d){var p=[],i=t.required||!t.required&&s.hasOwnProperty(t.field);if(i){if(n==null&&!t.required)return r();Ii.required(t,n,s,p,d,"array"),n!=null&&(Ii.type(t,n,s,p,d),Ii.range(t,n,s,p,d))}r(p)},ree=function(t,n,r,s,d){var p=[],i=t.required||!t.required&&s.hasOwnProperty(t.field);if(i){if(la(n)&&!t.required)return r();Ii.required(t,n,s,p,d),n!==void 0&&Ii.type(t,n,s,p,d)}r(p)},iee=function(t,n,r,s,d){var p=[],i=t.required||!t.required&&s.hasOwnProperty(t.field);if(i){if(la(n,"date")&&!t.required)return r();if(Ii.required(t,n,s,p,d),!la(n,"date")){var x;n instanceof Date?x=n:x=new Date(n),Ii.type(t,x,s,p,d),x&&Ii.range(t,x.getTime(),s,p,d)}}r(p)},oee="enum",aee=function(t,n,r,s,d){var p=[],i=t.required||!t.required&&s.hasOwnProperty(t.field);if(i){if(la(n)&&!t.required)return r();Ii.required(t,n,s,p,d),n!==void 0&&Ii[oee](t,n,s,p,d)}r(p)},see=function(t,n,r,s,d){var p=[],i=t.required||!t.required&&s.hasOwnProperty(t.field);if(i){if(la(n)&&!t.required)return r();Ii.required(t,n,s,p,d),n!==void 0&&(Ii.type(t,n,s,p,d),Ii.range(t,n,s,p,d))}r(p)},lee=function(t,n,r,s,d){var p=[],i=t.required||!t.required&&s.hasOwnProperty(t.field);if(i){if(la(n)&&!t.required)return r();Ii.required(t,n,s,p,d),n!==void 0&&(Ii.type(t,n,s,p,d),Ii.range(t,n,s,p,d))}r(p)},cee=function(t,n,r,s,d){var p=[],i=t.required||!t.required&&s.hasOwnProperty(t.field);if(i){if(la(n)&&!t.required)return r();Ii.required(t,n,s,p,d),n!==void 0&&Ii.type(t,n,s,p,d)}r(p)},uee=function(t,n,r,s,d){var p=[],i=t.required||!t.required&&s.hasOwnProperty(t.field);if(i){if(n===""&&(n=void 0),la(n)&&!t.required)return r();Ii.required(t,n,s,p,d),n!==void 0&&(Ii.type(t,n,s,p,d),Ii.range(t,n,s,p,d))}r(p)},dee=function(t,n,r,s,d){var p=[],i=t.required||!t.required&&s.hasOwnProperty(t.field);if(i){if(la(n)&&!t.required)return r();Ii.required(t,n,s,p,d),n!==void 0&&Ii.type(t,n,s,p,d)}r(p)},hee=function(t,n,r,s,d){var p=[],i=t.required||!t.required&&s.hasOwnProperty(t.field);if(i){if(la(n,"string")&&!t.required)return r();Ii.required(t,n,s,p,d),la(n,"string")||Ii.pattern(t,n,s,p,d)}r(p)},fee=function(t,n,r,s,d){var p=[],i=t.required||!t.required&&s.hasOwnProperty(t.field);if(i){if(la(n)&&!t.required)return r();Ii.required(t,n,s,p,d),la(n)||Ii.type(t,n,s,p,d)}r(p)},pee=function(t,n,r,s,d){var p=[],i=Array.isArray(n)?"array":cr(n);Ii.required(t,n,s,p,d,i),r(p)},mee=function(t,n,r,s,d){var p=[],i=t.required||!t.required&&s.hasOwnProperty(t.field);if(i){if(la(n,"string")&&!t.required)return r();Ii.required(t,n,s,p,d,"string"),la(n,"string")||(Ii.type(t,n,s,p,d),Ii.range(t,n,s,p,d),Ii.pattern(t,n,s,p,d),t.whitespace===!0&&Ii.whitespace(t,n,s,p,d))}r(p)},q2=function(t,n,r,s,d){var p=t.type,i=[],x=t.required||!t.required&&s.hasOwnProperty(t.field);if(x){if(la(n,p)&&!t.required)return r();Ii.required(t,n,s,i,d,p),la(n,p)||Ii.type(t,n,s,i,d)}r(i)};const C0={string:mee,method:cee,number:uee,boolean:ree,regexp:fee,integer:lee,float:see,array:nee,object:dee,enum:aee,pattern:hee,date:iee,url:q2,hex:q2,email:q2,required:pee,any:tee};var Ty=function(){function e(t){zo(this,e),De(this,"rules",null),De(this,"_messages",yI),this.define(t)}return Lo(e,[{key:"define",value:function(n){var r=this;if(!n)throw new Error("Cannot configure a schema with no rules");if(cr(n)!=="object"||Array.isArray(n))throw new Error("Rules must be an object");this.rules={},Object.keys(n).forEach(function(s){var d=n[s];r.rules[s]=Array.isArray(d)?d:[d]})}},{key:"messages",value:function(n){return n&&(this._messages=Sk(vI(),n)),this._messages}},{key:"validate",value:function(n){var r=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},p=n,i=s,x=d;if(typeof i=="function"&&(x=i,i={}),!this.rules||Object.keys(this.rules).length===0)return x&&x(null,p),Promise.resolve(p);function S(N){var V=[],B={};function j(W){if(Array.isArray(W)){var X;V=(X=V).concat.apply(X,un(W))}else V.push(W)}for(var H=0;H<N.length;H++)j(N[H]);V.length?(B=xI(V),x(V,B)):x(null,p)}if(i.messages){var T=this.messages();T===yI&&(T=vI()),Sk(T,i.messages),i.messages=T}else i.messages=this.messages();var M={},$=i.keys||Object.keys(this.rules);$.forEach(function(N){var V=r.rules[N],B=p[N];V.forEach(function(j){var H=j;typeof H.transform=="function"&&(p===n&&(p=We({},p)),B=p[N]=H.transform(B),B!=null&&(H.type=H.type||(Array.isArray(B)?"array":cr(B)))),typeof H=="function"?H={validator:H}:H=We({},H),H.validator=r.getValidationMethod(H),H.validator&&(H.field=N,H.fullField=H.fullField||N,H.type=r.getType(H),M[N]=M[N]||[],M[N].push({rule:H,value:B,source:p,field:N}))})});var L={};return GQ(M,i,function(N,V){var B=N.rule,j=(B.type==="object"||B.type==="array")&&(cr(B.fields)==="object"||cr(B.defaultField)==="object");j=j&&(B.required||!B.required&&N.value),B.field=N.field;function H(Y,re){return We(We({},re),{},{fullField:"".concat(B.fullField,".").concat(Y),fullFields:B.fullFields?[].concat(un(B.fullFields),[Y]):[Y]})}function W(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],re=Array.isArray(Y)?Y:[Y];!i.suppressWarning&&re.length&&e.warning("async-validator:",re),re.length&&B.message!==void 0&&(re=[].concat(B.message));var se=re.map(wk(B,p));if(i.first&&se.length)return L[B.field]=1,V(se);if(!j)V(se);else{if(B.required&&!N.value)return B.message!==void 0?se=[].concat(B.message).map(wk(B,p)):i.error&&(se=[i.error(B,Ls(i.messages.required,B.field))]),V(se);var ae={};B.defaultField&&Object.keys(N.value).map(function(we){ae[we]=B.defaultField}),ae=We(We({},ae),N.rule.fields);var ce={};Object.keys(ae).forEach(function(we){var ge=ae[we],ve=Array.isArray(ge)?ge:[ge];ce[we]=ve.map(H.bind(null,we))});var Ce=new e(ce);Ce.messages(i.messages),N.rule.options&&(N.rule.options.messages=i.messages,N.rule.options.error=i.error),Ce.validate(N.value,N.rule.options||i,function(we){var ge=[];se&&se.length&&ge.push.apply(ge,un(se)),we&&we.length&&ge.push.apply(ge,un(we)),V(ge.length?ge:null)})}}var X;if(B.asyncValidator)X=B.asyncValidator(B,N.value,W,N.source,i);else if(B.validator){try{X=B.validator(B,N.value,W,N.source,i)}catch(Y){var ee,J;(ee=(J=console).error)===null||ee===void 0||ee.call(J,Y),i.suppressValidatorError||setTimeout(function(){throw Y},0),W(Y.message)}X===!0?W():X===!1?W(typeof B.message=="function"?B.message(B.fullField||B.field):B.message||"".concat(B.fullField||B.field," fails")):X instanceof Array?W(X):X instanceof Error&&W(X.message)}X&&X.then&&X.then(function(){return W()},function(Y){return W(Y)})},function(N){S(N)},p)}},{key:"getType",value:function(n){if(n.type===void 0&&n.pattern instanceof RegExp&&(n.type="pattern"),typeof n.validator!="function"&&n.type&&!C0.hasOwnProperty(n.type))throw new Error(Ls("Unknown rule type %s",n.type));return n.type||"string"}},{key:"getValidationMethod",value:function(n){if(typeof n.validator=="function")return n.validator;var r=Object.keys(n),s=r.indexOf("message");return s!==-1&&r.splice(s,1),r.length===1&&r[0]==="required"?C0.required:C0[this.getType(n)]||void 0}}]),e}();De(Ty,"register",function(t,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");C0[t]=n});De(Ty,"warning",VQ);De(Ty,"messages",yI);De(Ty,"validators",C0);var Os="'${name}' is not a valid ${type}",y5={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:Os,method:Os,array:Os,object:Os,number:Os,date:Os,boolean:Os,integer:Os,float:Os,regexp:Os,email:Os,url:Os,hex:Os},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},Ek=Ty;function gee(e,t){return e.replace(/\\?\$\{\w+\}/g,function(n){if(n.startsWith("\\"))return n.slice(1);var r=n.slice(2,-1);return t[r]})}var Tk="CODE_LOGIC_ERROR";function bI(e,t,n,r,s){return wI.apply(this,arguments)}function wI(){return wI=lf(rs().mark(function e(t,n,r,s,d){var p,i,x,S,T,M,$,L,N;return rs().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return p=We({},r),delete p.ruleIndex,Ek.warning=function(){},p.validator&&(i=p.validator,p.validator=function(){try{return i.apply(void 0,arguments)}catch(j){return console.error(j),Promise.reject(Tk)}}),x=null,p&&p.type==="array"&&p.defaultField&&(x=p.defaultField,delete p.defaultField),S=new Ek(De({},t,[p])),T=Vp(y5,s.validateMessages),S.messages(T),M=[],B.prev=10,B.next=13,Promise.resolve(S.validate(De({},t,n),We({},s)));case 13:B.next=18;break;case 15:B.prev=15,B.t0=B.catch(10),B.t0.errors&&(M=B.t0.errors.map(function(j,H){var W=j.message,X=W===Tk?T.default:W;return _.isValidElement(X)?_.cloneElement(X,{key:"error_".concat(H)}):X}));case 18:if(!(!M.length&&x)){B.next=23;break}return B.next=21,Promise.all(n.map(function(j,H){return bI("".concat(t,".").concat(H),j,x,s,d)}));case 21:return $=B.sent,B.abrupt("return",$.reduce(function(j,H){return[].concat(un(j),un(H))},[]));case 23:return L=We(We({},r),{},{name:t,enum:(r.enum||[]).join(", ")},d),N=M.map(function(j){return typeof j=="string"?gee(j,L):j}),B.abrupt("return",N);case 26:case"end":return B.stop()}},e,null,[[10,15]])})),wI.apply(this,arguments)}function vee(e,t,n,r,s,d){var p=e.join("."),i=n.map(function(T,M){var $=T.validator,L=We(We({},T),{},{ruleIndex:M});return $&&(L.validator=function(N,V,B){var j=!1,H=function(){for(var ee=arguments.length,J=new Array(ee),Y=0;Y<ee;Y++)J[Y]=arguments[Y];Promise.resolve().then(function(){go(!j,"Your validator function has already return a promise. `callback` will be ignored."),j||B.apply(void 0,J)})},W=$(N,V,H);j=W&&typeof W.then=="function"&&typeof W.catch=="function",go(j,"`callback` is deprecated. Please return a promise instead."),j&&W.then(function(){B()}).catch(function(X){B(X||" ")})}),L}).sort(function(T,M){var $=T.warningOnly,L=T.ruleIndex,N=M.warningOnly,V=M.ruleIndex;return!!$==!!N?L-V:$?1:-1}),x;if(s===!0)x=new Promise(function(){var T=lf(rs().mark(function M($,L){var N,V,B;return rs().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:N=0;case 1:if(!(N<i.length)){H.next=12;break}return V=i[N],H.next=5,bI(p,t,V,r,d);case 5:if(B=H.sent,!B.length){H.next=9;break}return L([{errors:B,rule:V}]),H.abrupt("return");case 9:N+=1,H.next=1;break;case 12:$([]);case 13:case"end":return H.stop()}},M)}));return function(M,$){return T.apply(this,arguments)}}());else{var S=i.map(function(T){return bI(p,t,T,r,d).then(function(M){return{errors:M,rule:T}})});x=(s?_ee(S):yee(S)).then(function(T){return Promise.reject(T)})}return x.catch(function(T){return T}),x}function yee(e){return SI.apply(this,arguments)}function SI(){return SI=lf(rs().mark(function e(t){return rs().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Promise.all(t).then(function(s){var d,p=(d=[]).concat.apply(d,un(s));return p}));case 1:case"end":return r.stop()}},e)})),SI.apply(this,arguments)}function _ee(e){return CI.apply(this,arguments)}function CI(){return CI=lf(rs().mark(function e(t){var n;return rs().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n=0,s.abrupt("return",new Promise(function(d){t.forEach(function(p){p.then(function(i){i.errors.length&&d([i]),n+=1,n===t.length&&d([])})})}));case 2:case"end":return s.stop()}},e)})),CI.apply(this,arguments)}function Uo(e){return gI(e)}function Ik(e,t){var n={};return t.forEach(function(r){var s=zs(e,r);n=zl(n,r,s)}),n}function Yp(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return e&&e.some(function(r){return _5(t,r,n)})}function _5(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!e||!t||!n&&e.length!==t.length?!1:t.every(function(r,s){return e[s]===r})}function xee(e,t){if(e===t)return!0;if(!e&&t||e&&!t||!e||!t||cr(e)!=="object"||cr(t)!=="object")return!1;var n=Object.keys(e),r=Object.keys(t),s=new Set([].concat(n,r));return un(s).every(function(d){var p=e[d],i=t[d];return typeof p=="function"&&typeof i=="function"?!0:p===i})}function bee(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&cr(t.target)==="object"&&e in t.target?t.target[e]:t}function Mk(e,t,n){var r=e.length;if(t<0||t>=r||n<0||n>=r)return e;var s=e[t],d=t-n;return d>0?[].concat(un(e.slice(0,n)),[s],un(e.slice(n,t)),un(e.slice(t+1,r))):d<0?[].concat(un(e.slice(0,t)),un(e.slice(t+1,n+1)),[s],un(e.slice(n+1,r))):e}var wee=["name"],el=[];function K2(e,t,n,r,s,d){return typeof e=="function"?e(t,n,"source"in d?{source:d.source}:{}):r!==s}var AP=function(e){Kl(n,e);var t=Xl(n);function n(r){var s;if(zo(this,n),s=t.call(this,r),De(An(s),"state",{resetCount:0}),De(An(s),"cancelRegisterFunc",null),De(An(s),"mounted",!1),De(An(s),"touched",!1),De(An(s),"dirty",!1),De(An(s),"validatePromise",void 0),De(An(s),"prevValidating",void 0),De(An(s),"errors",el),De(An(s),"warnings",el),De(An(s),"cancelRegister",function(){var x=s.props,S=x.preserve,T=x.isListField,M=x.name;s.cancelRegisterFunc&&s.cancelRegisterFunc(T,S,Uo(M)),s.cancelRegisterFunc=null}),De(An(s),"getNamePath",function(){var x=s.props,S=x.name,T=x.fieldContext,M=T.prefixName,$=M===void 0?[]:M;return S!==void 0?[].concat(un($),un(S)):[]}),De(An(s),"getRules",function(){var x=s.props,S=x.rules,T=S===void 0?[]:S,M=x.fieldContext;return T.map(function($){return typeof $=="function"?$(M):$})}),De(An(s),"refresh",function(){s.mounted&&s.setState(function(x){var S=x.resetCount;return{resetCount:S+1}})}),De(An(s),"metaCache",null),De(An(s),"triggerMetaEvent",function(x){var S=s.props.onMetaChange;if(S){var T=We(We({},s.getMeta()),{},{destroy:x});wc(s.metaCache,T)||S(T),s.metaCache=T}else s.metaCache=null}),De(An(s),"onStoreChange",function(x,S,T){var M=s.props,$=M.shouldUpdate,L=M.dependencies,N=L===void 0?[]:L,V=M.onReset,B=T.store,j=s.getNamePath(),H=s.getValue(x),W=s.getValue(B),X=S&&Yp(S,j);switch(T.type==="valueUpdate"&&T.source==="external"&&!wc(H,W)&&(s.touched=!0,s.dirty=!0,s.validatePromise=null,s.errors=el,s.warnings=el,s.triggerMetaEvent()),T.type){case"reset":if(!S||X){s.touched=!1,s.dirty=!1,s.validatePromise=void 0,s.errors=el,s.warnings=el,s.triggerMetaEvent(),V==null||V(),s.refresh();return}break;case"remove":{if($&&K2($,x,B,H,W,T)){s.reRender();return}break}case"setField":{var ee=T.data;if(X){"touched"in ee&&(s.touched=ee.touched),"validating"in ee&&!("originRCField"in ee)&&(s.validatePromise=ee.validating?Promise.resolve([]):null),"errors"in ee&&(s.errors=ee.errors||el),"warnings"in ee&&(s.warnings=ee.warnings||el),s.dirty=!0,s.triggerMetaEvent(),s.reRender();return}else if("value"in ee&&Yp(S,j,!0)){s.reRender();return}if($&&!j.length&&K2($,x,B,H,W,T)){s.reRender();return}break}case"dependenciesUpdate":{var J=N.map(Uo);if(J.some(function(Y){return Yp(T.relatedFields,Y)})){s.reRender();return}break}default:if(X||(!N.length||j.length||$)&&K2($,x,B,H,W,T)){s.reRender();return}break}$===!0&&s.reRender()}),De(An(s),"validateRules",function(x){var S=s.getNamePath(),T=s.getValue(),M=x||{},$=M.triggerName,L=M.validateOnly,N=L===void 0?!1:L,V=Promise.resolve().then(lf(rs().mark(function B(){var j,H,W,X,ee,J,Y;return rs().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if(s.mounted){se.next=2;break}return se.abrupt("return",[]);case 2:if(j=s.props,H=j.validateFirst,W=H===void 0?!1:H,X=j.messageVariables,ee=j.validateDebounce,J=s.getRules(),$&&(J=J.filter(function(ae){return ae}).filter(function(ae){var ce=ae.validateTrigger;if(!ce)return!0;var Ce=gI(ce);return Ce.includes($)})),!(ee&&$)){se.next=10;break}return se.next=8,new Promise(function(ae){setTimeout(ae,ee)});case 8:if(s.validatePromise===V){se.next=10;break}return se.abrupt("return",[]);case 10:return Y=vee(S,T,J,x,W,X),Y.catch(function(ae){return ae}).then(function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:el;if(s.validatePromise===V){var ce;s.validatePromise=null;var Ce=[],we=[];(ce=ae.forEach)===null||ce===void 0||ce.call(ae,function(ge){var ve=ge.rule.warningOnly,de=ge.errors,pe=de===void 0?el:de;ve?we.push.apply(we,un(pe)):Ce.push.apply(Ce,un(pe))}),s.errors=Ce,s.warnings=we,s.triggerMetaEvent(),s.reRender()}}),se.abrupt("return",Y);case 13:case"end":return se.stop()}},B)})));return N||(s.validatePromise=V,s.dirty=!0,s.errors=el,s.warnings=el,s.triggerMetaEvent(),s.reRender()),V}),De(An(s),"isFieldValidating",function(){return!!s.validatePromise}),De(An(s),"isFieldTouched",function(){return s.touched}),De(An(s),"isFieldDirty",function(){if(s.dirty||s.props.initialValue!==void 0)return!0;var x=s.props.fieldContext,S=x.getInternalHooks(Bh),T=S.getInitialValue;return T(s.getNamePath())!==void 0}),De(An(s),"getErrors",function(){return s.errors}),De(An(s),"getWarnings",function(){return s.warnings}),De(An(s),"isListField",function(){return s.props.isListField}),De(An(s),"isList",function(){return s.props.isList}),De(An(s),"isPreserve",function(){return s.props.preserve}),De(An(s),"getMeta",function(){s.prevValidating=s.isFieldValidating();var x={touched:s.isFieldTouched(),validating:s.prevValidating,errors:s.errors,warnings:s.warnings,name:s.getNamePath(),validated:s.validatePromise===null};return x}),De(An(s),"getOnlyChild",function(x){if(typeof x=="function"){var S=s.getMeta();return We(We({},s.getOnlyChild(x(s.getControlled(),S,s.props.fieldContext))),{},{isFunction:!0})}var T=Ha(x);return T.length!==1||!_.isValidElement(T[0])?{child:T,isFunction:!1}:{child:T[0],isFunction:!1}}),De(An(s),"getValue",function(x){var S=s.props.fieldContext.getFieldsValue,T=s.getNamePath();return zs(x||S(!0),T)}),De(An(s),"getControlled",function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=s.props,T=S.name,M=S.trigger,$=S.validateTrigger,L=S.getValueFromEvent,N=S.normalize,V=S.valuePropName,B=S.getValueProps,j=S.fieldContext,H=$!==void 0?$:j.validateTrigger,W=s.getNamePath(),X=j.getInternalHooks,ee=j.getFieldsValue,J=X(Bh),Y=J.dispatch,re=s.getValue(),se=B||function(ge){return De({},V,ge)},ae=x[M],ce=T!==void 0?se(re):{},Ce=We(We({},x),ce);Ce[M]=function(){s.touched=!0,s.dirty=!0,s.triggerMetaEvent();for(var ge,ve=arguments.length,de=new Array(ve),pe=0;pe<ve;pe++)de[pe]=arguments[pe];L?ge=L.apply(void 0,de):ge=bee.apply(void 0,[V].concat(de)),N&&(ge=N(ge,re,ee(!0))),ge!==re&&Y({type:"updateValue",namePath:W,value:ge}),ae&&ae.apply(void 0,de)};var we=gI(H||[]);return we.forEach(function(ge){var ve=Ce[ge];Ce[ge]=function(){ve&&ve.apply(void 0,arguments);var de=s.props.rules;de&&de.length&&Y({type:"validateField",namePath:W,triggerName:ge})}}),Ce}),r.fieldContext){var d=r.fieldContext.getInternalHooks,p=d(Bh),i=p.initEntityValue;i(An(s))}return s}return Lo(n,[{key:"componentDidMount",value:function(){var s=this.props,d=s.shouldUpdate,p=s.fieldContext;if(this.mounted=!0,p){var i=p.getInternalHooks,x=i(Bh),S=x.registerField;this.cancelRegisterFunc=S(this)}d===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var s=this.state.resetCount,d=this.props.children,p=this.getOnlyChild(d),i=p.child,x=p.isFunction,S;return x?S=i:_.isValidElement(i)?S=_.cloneElement(i,this.getControlled(i.props)):(go(!i,"`children` of Field is not validate ReactElement."),S=i),_.createElement(_.Fragment,{key:s},S)}}]),n}(_.Component);De(AP,"contextType",gm);De(AP,"defaultProps",{trigger:"onChange",valuePropName:"value"});function x5(e){var t=e.name,n=Er(e,wee),r=_.useContext(gm),s=_.useContext(T1),d=t!==void 0?Uo(t):void 0,p="keep";return n.isListField||(p="_".concat((d||[]).join("_"))),_.createElement(AP,qt({key:p,name:d,isListField:!!s},n,{fieldContext:r}))}function See(e){var t=e.name,n=e.initialValue,r=e.children,s=e.rules,d=e.validateTrigger,p=e.isListField,i=_.useContext(gm),x=_.useContext(T1),S=_.useRef({keys:[],id:0}),T=S.current,M=_.useMemo(function(){var V=Uo(i.prefixName)||[];return[].concat(un(V),un(Uo(t)))},[i.prefixName,t]),$=_.useMemo(function(){return We(We({},i),{},{prefixName:M})},[i,M]),L=_.useMemo(function(){return{getKey:function(B){var j=M.length,H=B[j];return[T.keys[H],B.slice(j+1)]}}},[M]);if(typeof r!="function")return go(!1,"Form.List only accepts function as children."),null;var N=function(B,j,H){var W=H.source;return W==="internal"?!1:B!==j};return _.createElement(T1.Provider,{value:L},_.createElement(gm.Provider,{value:$},_.createElement(x5,{name:[],shouldUpdate:N,rules:s,validateTrigger:d,initialValue:n,isList:!0,isListField:p??!!x},function(V,B){var j=V.value,H=j===void 0?[]:j,W=V.onChange,X=i.getFieldValue,ee=function(){var se=X(M||[]);return se||[]},J={add:function(se,ae){var ce=ee();ae>=0&&ae<=ce.length?(T.keys=[].concat(un(T.keys.slice(0,ae)),[T.id],un(T.keys.slice(ae))),W([].concat(un(ce.slice(0,ae)),[se],un(ce.slice(ae))))):(T.keys=[].concat(un(T.keys),[T.id]),W([].concat(un(ce),[se]))),T.id+=1},remove:function(se){var ae=ee(),ce=new Set(Array.isArray(se)?se:[se]);ce.size<=0||(T.keys=T.keys.filter(function(Ce,we){return!ce.has(we)}),W(ae.filter(function(Ce,we){return!ce.has(we)})))},move:function(se,ae){if(se!==ae){var ce=ee();se<0||se>=ce.length||ae<0||ae>=ce.length||(T.keys=Mk(T.keys,se,ae),W(Mk(ce,se,ae)))}}},Y=H||[];return Array.isArray(Y)||(Y=[]),r(Y.map(function(re,se){var ae=T.keys[se];return ae===void 0&&(T.keys[se]=T.id,ae=T.keys[se],T.id+=1),{name:se,key:ae,isListField:!0}}),J,B)})))}function Cee(e){var t=!1,n=e.length,r=[];return e.length?new Promise(function(s,d){e.forEach(function(p,i){p.catch(function(x){return t=!0,x}).then(function(x){n-=1,r[i]=x,!(n>0)&&(t&&d(r),s(r))})})}):Promise.resolve([])}var b5="__@field_split__";function X2(e){return e.map(function(t){return"".concat(cr(t),":").concat(t)}).join(b5)}var bp=function(){function e(){zo(this,e),De(this,"kvs",new Map)}return Lo(e,[{key:"set",value:function(n,r){this.kvs.set(X2(n),r)}},{key:"get",value:function(n){return this.kvs.get(X2(n))}},{key:"update",value:function(n,r){var s=this.get(n),d=r(s);d?this.set(n,d):this.delete(n)}},{key:"delete",value:function(n){this.kvs.delete(X2(n))}},{key:"map",value:function(n){return un(this.kvs.entries()).map(function(r){var s=ot(r,2),d=s[0],p=s[1],i=d.split(b5);return n({key:i.map(function(x){var S=x.match(/^([^:]*):(.*)$/),T=ot(S,3),M=T[1],$=T[2];return M==="number"?Number($):$}),value:p})})}},{key:"toJSON",value:function(){var n={};return this.map(function(r){var s=r.key,d=r.value;return n[s.join(".")]=d,null}),n}}]),e}(),Eee=["name"],Tee=Lo(function e(t){var n=this;zo(this,e),De(this,"formHooked",!1),De(this,"forceRootUpdate",void 0),De(this,"subscribable",!0),De(this,"store",{}),De(this,"fieldEntities",[]),De(this,"initialValues",{}),De(this,"callbacks",{}),De(this,"validateMessages",null),De(this,"preserve",null),De(this,"lastValidatePromise",null),De(this,"getForm",function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldWarning:n.getFieldWarning,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldValue:n.setFieldValue,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,_init:!0,getInternalHooks:n.getInternalHooks}}),De(this,"getInternalHooks",function(r){return r===Bh?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,destroyForm:n.destroyForm,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve,getInitialValue:n.getInitialValue,registerWatch:n.registerWatch}):(go(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),De(this,"useSubscribe",function(r){n.subscribable=r}),De(this,"prevWithoutPreserves",null),De(this,"setInitialValues",function(r,s){if(n.initialValues=r||{},s){var d,p=Vp(r,n.store);(d=n.prevWithoutPreserves)===null||d===void 0||d.map(function(i){var x=i.key;p=zl(p,x,zs(r,x))}),n.prevWithoutPreserves=null,n.updateStore(p)}}),De(this,"destroyForm",function(r){if(r)n.updateStore({});else{var s=new bp;n.getFieldEntities(!0).forEach(function(d){n.isMergedPreserve(d.isPreserve())||s.set(d.getNamePath(),!0)}),n.prevWithoutPreserves=s}}),De(this,"getInitialValue",function(r){var s=zs(n.initialValues,r);return r.length?Vp(s):s}),De(this,"setCallbacks",function(r){n.callbacks=r}),De(this,"setValidateMessages",function(r){n.validateMessages=r}),De(this,"setPreserve",function(r){n.preserve=r}),De(this,"watchList",[]),De(this,"registerWatch",function(r){return n.watchList.push(r),function(){n.watchList=n.watchList.filter(function(s){return s!==r})}}),De(this,"notifyWatch",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(n.watchList.length){var s=n.getFieldsValue(),d=n.getFieldsValue(!0);n.watchList.forEach(function(p){p(s,d,r)})}}),De(this,"timeoutId",null),De(this,"warningUnhooked",function(){}),De(this,"updateStore",function(r){n.store=r}),De(this,"getFieldEntities",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return r?n.fieldEntities.filter(function(s){return s.getNamePath().length}):n.fieldEntities}),De(this,"getFieldsMap",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,s=new bp;return n.getFieldEntities(r).forEach(function(d){var p=d.getNamePath();s.set(p,d)}),s}),De(this,"getFieldEntitiesForNamePathList",function(r){if(!r)return n.getFieldEntities(!0);var s=n.getFieldsMap(!0);return r.map(function(d){var p=Uo(d);return s.get(p)||{INVALIDATE_NAME_PATH:Uo(d)}})}),De(this,"getFieldsValue",function(r,s){n.warningUnhooked();var d,p,i;if(r===!0||Array.isArray(r)?(d=r,p=s):r&&cr(r)==="object"&&(i=r.strict,p=r.filter),d===!0&&!p)return n.store;var x=n.getFieldEntitiesForNamePathList(Array.isArray(d)?d:null),S=[];return x.forEach(function(T){var M,$,L="INVALIDATE_NAME_PATH"in T?T.INVALIDATE_NAME_PATH:T.getNamePath();if(i){var N,V;if((N=(V=T).isList)!==null&&N!==void 0&&N.call(V))return}else if(!d&&(M=($=T).isListField)!==null&&M!==void 0&&M.call($))return;if(!p)S.push(L);else{var B="getMeta"in T?T.getMeta():null;p(B)&&S.push(L)}}),Ik(n.store,S.map(Uo))}),De(this,"getFieldValue",function(r){n.warningUnhooked();var s=Uo(r);return zs(n.store,s)}),De(this,"getFieldsError",function(r){n.warningUnhooked();var s=n.getFieldEntitiesForNamePathList(r);return s.map(function(d,p){return d&&!("INVALIDATE_NAME_PATH"in d)?{name:d.getNamePath(),errors:d.getErrors(),warnings:d.getWarnings()}:{name:Uo(r[p]),errors:[],warnings:[]}})}),De(this,"getFieldError",function(r){n.warningUnhooked();var s=Uo(r),d=n.getFieldsError([s])[0];return d.errors}),De(this,"getFieldWarning",function(r){n.warningUnhooked();var s=Uo(r),d=n.getFieldsError([s])[0];return d.warnings}),De(this,"isFieldsTouched",function(){n.warningUnhooked();for(var r=arguments.length,s=new Array(r),d=0;d<r;d++)s[d]=arguments[d];var p=s[0],i=s[1],x,S=!1;s.length===0?x=null:s.length===1?Array.isArray(p)?(x=p.map(Uo),S=!1):(x=null,S=p):(x=p.map(Uo),S=i);var T=n.getFieldEntities(!0),M=function(B){return B.isFieldTouched()};if(!x)return S?T.every(function(V){return M(V)||V.isList()}):T.some(M);var $=new bp;x.forEach(function(V){$.set(V,[])}),T.forEach(function(V){var B=V.getNamePath();x.forEach(function(j){j.every(function(H,W){return B[W]===H})&&$.update(j,function(H){return[].concat(un(H),[V])})})});var L=function(B){return B.some(M)},N=$.map(function(V){var B=V.value;return B});return S?N.every(L):N.some(L)}),De(this,"isFieldTouched",function(r){return n.warningUnhooked(),n.isFieldsTouched([r])}),De(this,"isFieldsValidating",function(r){n.warningUnhooked();var s=n.getFieldEntities();if(!r)return s.some(function(p){return p.isFieldValidating()});var d=r.map(Uo);return s.some(function(p){var i=p.getNamePath();return Yp(d,i)&&p.isFieldValidating()})}),De(this,"isFieldValidating",function(r){return n.warningUnhooked(),n.isFieldsValidating([r])}),De(this,"resetWithFieldInitialValue",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=new bp,d=n.getFieldEntities(!0);d.forEach(function(x){var S=x.props.initialValue,T=x.getNamePath();if(S!==void 0){var M=s.get(T)||new Set;M.add({entity:x,value:S}),s.set(T,M)}});var p=function(S){S.forEach(function(T){var M=T.props.initialValue;if(M!==void 0){var $=T.getNamePath(),L=n.getInitialValue($);if(L!==void 0)go(!1,"Form already set 'initialValues' with path '".concat($.join("."),"'. Field can not overwrite it."));else{var N=s.get($);if(N&&N.size>1)go(!1,"Multiple Field with path '".concat($.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(N){var V=n.getFieldValue($),B=T.isListField();!B&&(!r.skipExist||V===void 0)&&n.updateStore(zl(n.store,$,un(N)[0].value))}}}})},i;r.entities?i=r.entities:r.namePathList?(i=[],r.namePathList.forEach(function(x){var S=s.get(x);if(S){var T;(T=i).push.apply(T,un(un(S).map(function(M){return M.entity})))}})):i=d,p(i)}),De(this,"resetFields",function(r){n.warningUnhooked();var s=n.store;if(!r){n.updateStore(Vp(n.initialValues)),n.resetWithFieldInitialValue(),n.notifyObservers(s,null,{type:"reset"}),n.notifyWatch();return}var d=r.map(Uo);d.forEach(function(p){var i=n.getInitialValue(p);n.updateStore(zl(n.store,p,i))}),n.resetWithFieldInitialValue({namePathList:d}),n.notifyObservers(s,d,{type:"reset"}),n.notifyWatch(d)}),De(this,"setFields",function(r){n.warningUnhooked();var s=n.store,d=[];r.forEach(function(p){var i=p.name,x=Er(p,Eee),S=Uo(i);d.push(S),"value"in x&&n.updateStore(zl(n.store,S,x.value)),n.notifyObservers(s,[S],{type:"setField",data:p})}),n.notifyWatch(d)}),De(this,"getFields",function(){var r=n.getFieldEntities(!0),s=r.map(function(d){var p=d.getNamePath(),i=d.getMeta(),x=We(We({},i),{},{name:p,value:n.getFieldValue(p)});return Object.defineProperty(x,"originRCField",{value:!0}),x});return s}),De(this,"initEntityValue",function(r){var s=r.props.initialValue;if(s!==void 0){var d=r.getNamePath(),p=zs(n.store,d);p===void 0&&n.updateStore(zl(n.store,d,s))}}),De(this,"isMergedPreserve",function(r){var s=r!==void 0?r:n.preserve;return s??!0}),De(this,"registerField",function(r){n.fieldEntities.push(r);var s=r.getNamePath();if(n.notifyWatch([s]),r.props.initialValue!==void 0){var d=n.store;n.resetWithFieldInitialValue({entities:[r],skipExist:!0}),n.notifyObservers(d,[r.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(p,i){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(n.fieldEntities=n.fieldEntities.filter(function(M){return M!==r}),!n.isMergedPreserve(i)&&(!p||x.length>1)){var S=p?void 0:n.getInitialValue(s);if(s.length&&n.getFieldValue(s)!==S&&n.fieldEntities.every(function(M){return!_5(M.getNamePath(),s)})){var T=n.store;n.updateStore(zl(T,s,S,!0)),n.notifyObservers(T,[s],{type:"remove"}),n.triggerDependenciesUpdate(T,s)}}n.notifyWatch([s])}}),De(this,"dispatch",function(r){switch(r.type){case"updateValue":{var s=r.namePath,d=r.value;n.updateValue(s,d);break}case"validateField":{var p=r.namePath,i=r.triggerName;n.validateFields([p],{triggerName:i});break}}}),De(this,"notifyObservers",function(r,s,d){if(n.subscribable){var p=We(We({},d),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach(function(i){var x=i.onStoreChange;x(r,s,p)})}else n.forceRootUpdate()}),De(this,"triggerDependenciesUpdate",function(r,s){var d=n.getDependencyChildrenFields(s);return d.length&&n.validateFields(d),n.notifyObservers(r,d,{type:"dependenciesUpdate",relatedFields:[s].concat(un(d))}),d}),De(this,"updateValue",function(r,s){var d=Uo(r),p=n.store;n.updateStore(zl(n.store,d,s)),n.notifyObservers(p,[d],{type:"valueUpdate",source:"internal"}),n.notifyWatch([d]);var i=n.triggerDependenciesUpdate(p,d),x=n.callbacks.onValuesChange;if(x){var S=Ik(n.store,[d]);x(S,n.getFieldsValue())}n.triggerOnFieldsChange([d].concat(un(i)))}),De(this,"setFieldsValue",function(r){n.warningUnhooked();var s=n.store;if(r){var d=Vp(n.store,r);n.updateStore(d)}n.notifyObservers(s,null,{type:"valueUpdate",source:"external"}),n.notifyWatch()}),De(this,"setFieldValue",function(r,s){n.setFields([{name:r,value:s}])}),De(this,"getDependencyChildrenFields",function(r){var s=new Set,d=[],p=new bp;n.getFieldEntities().forEach(function(x){var S=x.props.dependencies;(S||[]).forEach(function(T){var M=Uo(T);p.update(M,function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return $.add(x),$})})});var i=function x(S){var T=p.get(S)||new Set;T.forEach(function(M){if(!s.has(M)){s.add(M);var $=M.getNamePath();M.isFieldDirty()&&$.length&&(d.push($),x($))}})};return i(r),d}),De(this,"triggerOnFieldsChange",function(r,s){var d=n.callbacks.onFieldsChange;if(d){var p=n.getFields();if(s){var i=new bp;s.forEach(function(S){var T=S.name,M=S.errors;i.set(T,M)}),p.forEach(function(S){S.errors=i.get(S.name)||S.errors})}var x=p.filter(function(S){var T=S.name;return Yp(r,T)});x.length&&d(x,p)}}),De(this,"validateFields",function(r,s){n.warningUnhooked();var d,p;Array.isArray(r)||typeof r=="string"||typeof s=="string"?(d=r,p=s):p=r;var i=!!d,x=i?d.map(Uo):[],S=[],T=String(Date.now()),M=new Set,$=p||{},L=$.recursive,N=$.dirty;n.getFieldEntities(!0).forEach(function(H){if(i||x.push(H.getNamePath()),!(!H.props.rules||!H.props.rules.length)&&!(N&&!H.isFieldDirty())){var W=H.getNamePath();if(M.add(W.join(T)),!i||Yp(x,W,L)){var X=H.validateRules(We({validateMessages:We(We({},y5),n.validateMessages)},p));S.push(X.then(function(){return{name:W,errors:[],warnings:[]}}).catch(function(ee){var J,Y=[],re=[];return(J=ee.forEach)===null||J===void 0||J.call(ee,function(se){var ae=se.rule.warningOnly,ce=se.errors;ae?re.push.apply(re,un(ce)):Y.push.apply(Y,un(ce))}),Y.length?Promise.reject({name:W,errors:Y,warnings:re}):{name:W,errors:Y,warnings:re}}))}}});var V=Cee(S);n.lastValidatePromise=V,V.catch(function(H){return H}).then(function(H){var W=H.map(function(X){var ee=X.name;return ee});n.notifyObservers(n.store,W,{type:"validateFinish"}),n.triggerOnFieldsChange(W,H)});var B=V.then(function(){return n.lastValidatePromise===V?Promise.resolve(n.getFieldsValue(x)):Promise.reject([])}).catch(function(H){var W=H.filter(function(X){return X&&X.errors.length});return Promise.reject({values:n.getFieldsValue(x),errorFields:W,outOfDate:n.lastValidatePromise!==V})});B.catch(function(H){return H});var j=x.filter(function(H){return M.has(H.join(T))});return n.triggerOnFieldsChange(j),B}),De(this,"submit",function(){n.warningUnhooked(),n.validateFields().then(function(r){var s=n.callbacks.onFinish;if(s)try{s(r)}catch(d){console.error(d)}}).catch(function(r){var s=n.callbacks.onFinishFailed;s&&s(r)})}),this.forceRootUpdate=t});function w5(e){var t=_.useRef(),n=_.useState({}),r=ot(n,2),s=r[1];if(!t.current)if(e)t.current=e;else{var d=function(){s({})},p=new Tee(d);t.current=p.getForm()}return[t.current]}var EI=_.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),Iee=function(t){var n=t.validateMessages,r=t.onFormChange,s=t.onFormFinish,d=t.children,p=_.useContext(EI),i=_.useRef({});return _.createElement(EI.Provider,{value:We(We({},p),{},{validateMessages:We(We({},p.validateMessages),n),triggerFormChange:function(S,T){r&&r(S,{changedFields:T,forms:i.current}),p.triggerFormChange(S,T)},triggerFormFinish:function(S,T){s&&s(S,{values:T,forms:i.current}),p.triggerFormFinish(S,T)},registerForm:function(S,T){S&&(i.current=We(We({},i.current),{},De({},S,T))),p.registerForm(S,T)},unregisterForm:function(S){var T=We({},i.current);delete T[S],i.current=T,p.unregisterForm(S)}})},d)},Mee=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed","clearOnDestroy"],Pee=function(t,n){var r=t.name,s=t.initialValues,d=t.fields,p=t.form,i=t.preserve,x=t.children,S=t.component,T=S===void 0?"form":S,M=t.validateMessages,$=t.validateTrigger,L=$===void 0?"onChange":$,N=t.onValuesChange,V=t.onFieldsChange,B=t.onFinish,j=t.onFinishFailed,H=t.clearOnDestroy,W=Er(t,Mee),X=_.useRef(null),ee=_.useContext(EI),J=w5(p),Y=ot(J,1),re=Y[0],se=re.getInternalHooks(Bh),ae=se.useSubscribe,ce=se.setInitialValues,Ce=se.setCallbacks,we=se.setValidateMessages,ge=se.setPreserve,ve=se.destroyForm;_.useImperativeHandle(n,function(){return We(We({},re),{},{nativeElement:X.current})}),_.useEffect(function(){return ee.registerForm(r,re),function(){ee.unregisterForm(r)}},[ee,re,r]),we(We(We({},ee.validateMessages),M)),Ce({onValuesChange:N,onFieldsChange:function(ze){if(ee.triggerFormChange(r,ze),V){for(var Je=arguments.length,yt=new Array(Je>1?Je-1:0),at=1;at<Je;at++)yt[at-1]=arguments[at];V.apply(void 0,[ze].concat(yt))}},onFinish:function(ze){ee.triggerFormFinish(r,ze),B&&B(ze)},onFinishFailed:j}),ge(i);var de=_.useRef(null);ce(s,!de.current),de.current||(de.current=!0),_.useEffect(function(){return function(){return ve(H)}},[]);var pe,fe=typeof x=="function";if(fe){var me=re.getFieldsValue(!0);pe=x(me,re)}else pe=x;ae(!fe);var Ie=_.useRef();_.useEffect(function(){xee(Ie.current||[],d||[])||re.setFields(d||[]),Ie.current=d},[d,re]);var Me=_.useMemo(function(){return We(We({},re),{},{validateTrigger:L})},[re,L]),Be=_.createElement(T1.Provider,{value:null},_.createElement(gm.Provider,{value:Me},pe));return T===!1?Be:_.createElement(T,qt({},W,{ref:X,onSubmit:function(ze){ze.preventDefault(),ze.stopPropagation(),re.submit()},onReset:function(ze){var Je;ze.preventDefault(),re.resetFields(),(Je=W.onReset)===null||Je===void 0||Je.call(W,ze)}}),Be)};function Pk(e){try{return JSON.stringify(e)}catch{return Math.random()}}function Ree(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],s=t[1],d=s===void 0?{}:s,p=NQ(d)?{form:d}:d,i=p.form,x=_.useState(),S=ot(x,2),T=S[0],M=S[1],$=_.useMemo(function(){return Pk(T)},[T]),L=_.useRef($);L.current=$;var N=_.useContext(gm),V=i||N,B=V&&V._init,j=Uo(r),H=_.useRef(j);return H.current=j,_.useEffect(function(){if(B){var W=V.getFieldsValue,X=V.getInternalHooks,ee=X(Bh),J=ee.registerWatch,Y=function(ce,Ce){var we=p.preserve?Ce:ce;return typeof r=="function"?r(we):zs(we,H.current)},re=J(function(ae,ce){var Ce=Y(ae,ce),we=Pk(Ce);L.current!==we&&(L.current=we,M(Ce))}),se=Y(W(),W(!0));return T!==se&&M(se),re}},[B]),T}var Oee=_.forwardRef(Pee),Iy=Oee;Iy.FormProvider=Iee;Iy.Field=x5;Iy.List=See;Iy.useForm=w5;Iy.useWatch=Ree;const js=_.createContext({}),Aee=e=>{let{children:t,status:n,override:r}=e;const s=_.useContext(js),d=_.useMemo(()=>{const p=Object.assign({},s);return r&&delete p.isFormItemInput,n&&(delete p.status,delete p.hasFeedback,delete p.feedbackIcon),p},[n,r,s]);return _.createElement(js.Provider,{value:d},t)},Dee=_.createContext(void 0),Dd=e=>{const{space:t,form:n,children:r}=e;if(r==null)return null;let s=r;return n&&(s=Ft.createElement(Aee,{override:!0,status:!0},s)),t&&(s=Ft.createElement(rJ,null,s)),s};function I1(e){if(e)return{closable:e.closable,closeIcon:e.closeIcon}}function Rk(e){const{closable:t,closeIcon:n}=e||{};return Ft.useMemo(()=>{if(!t&&(t===!1||n===!1||n===null))return!1;if(t===void 0&&n===void 0)return null;let r={closeIcon:typeof n!="boolean"&&n!==null?n:void 0};return t&&typeof t=="object"&&(r=Object.assign(Object.assign({},r),t)),r},[t,n])}function Ok(){const e={};for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(s=>{s&&Object.keys(s).forEach(d=>{s[d]!==void 0&&(e[d]=s[d])})}),e}const $ee={};function S5(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$ee;const r=Rk(e),s=Rk(t),d=typeof r!="boolean"?!!(r!=null&&r.disabled):!1,p=Ft.useMemo(()=>Object.assign({closeIcon:Ft.createElement(Om,null)},n),[n]),i=Ft.useMemo(()=>r===!1?!1:r?Ok(p,s,r):s===!1?!1:s?Ok(p,s):p.closable?p:!1,[r,s,p]);return Ft.useMemo(()=>{if(i===!1)return[!1,null,d];const{closeIconRender:x}=p,{closeIcon:S}=i;let T=S;if(T!=null){x&&(T=x(S));const M=Ko(i,!0);Object.keys(M).length&&(T=Ft.isValidElement(T)?Ft.cloneElement(T,M):Ft.createElement("span",Object.assign({},M),T))}return[!0,T,d]},[i,p])}var C5=function(t){if(Ma()&&window.document.documentElement){var n=Array.isArray(t)?t:[t],r=window.document.documentElement;return n.some(function(s){return s in r.style})}return!1},kee=function(t,n){if(!C5(t))return!1;var r=document.createElement("div"),s=r.style[t];return r.style[t]=n,r.style[t]!==s};function TI(e,t){return!Array.isArray(e)&&t!==void 0?kee(e,t):C5(e)}const zee=()=>Ma()&&window.document.documentElement,Dw=e=>{const{prefixCls:t,className:n,style:r,size:s,shape:d}=e,p=pt({[`${t}-lg`]:s==="large",[`${t}-sm`]:s==="small"}),i=pt({[`${t}-circle`]:d==="circle",[`${t}-square`]:d==="square",[`${t}-round`]:d==="round"}),x=_.useMemo(()=>typeof s=="number"?{width:s,height:s,lineHeight:`${s}px`}:{},[s]);return _.createElement("span",{className:pt(t,p,i,n),style:Object.assign(Object.assign({},x),r)})},Lee=new Mi("ant-skeleton-loading",{"0%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0 50%"}}),$w=e=>({height:e,lineHeight:nt(e)}),Jp=e=>Object.assign({width:e},$w(e)),Nee=e=>({background:e.skeletonLoadingBackground,backgroundSize:"400% 100%",animationName:Lee,animationDuration:e.skeletonLoadingMotionDuration,animationTimingFunction:"ease",animationIterationCount:"infinite"}),Z2=(e,t)=>Object.assign({width:t(e).mul(5).equal(),minWidth:t(e).mul(5).equal()},$w(e)),Fee=e=>{const{skeletonAvatarCls:t,gradientFromColor:n,controlHeight:r,controlHeightLG:s,controlHeightSM:d}=e;return{[t]:Object.assign({display:"inline-block",verticalAlign:"top",background:n},Jp(r)),[`${t}${t}-circle`]:{borderRadius:"50%"},[`${t}${t}-lg`]:Object.assign({},Jp(s)),[`${t}${t}-sm`]:Object.assign({},Jp(d))}},Bee=e=>{const{controlHeight:t,borderRadiusSM:n,skeletonInputCls:r,controlHeightLG:s,controlHeightSM:d,gradientFromColor:p,calc:i}=e;return{[r]:Object.assign({display:"inline-block",verticalAlign:"top",background:p,borderRadius:n},Z2(t,i)),[`${r}-lg`]:Object.assign({},Z2(s,i)),[`${r}-sm`]:Object.assign({},Z2(d,i))}},Ak=e=>Object.assign({width:e},$w(e)),jee=e=>{const{skeletonImageCls:t,imageSizeBase:n,gradientFromColor:r,borderRadiusSM:s,calc:d}=e;return{[t]:Object.assign(Object.assign({display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"middle",background:r,borderRadius:s},Ak(d(n).mul(2).equal())),{[`${t}-path`]:{fill:"#bfbfbf"},[`${t}-svg`]:Object.assign(Object.assign({},Ak(n)),{maxWidth:d(n).mul(4).equal(),maxHeight:d(n).mul(4).equal()}),[`${t}-svg${t}-svg-circle`]:{borderRadius:"50%"}}),[`${t}${t}-circle`]:{borderRadius:"50%"}}},Y2=(e,t,n)=>{const{skeletonButtonCls:r}=e;return{[`${n}${r}-circle`]:{width:t,minWidth:t,borderRadius:"50%"},[`${n}${r}-round`]:{borderRadius:t}}},J2=(e,t)=>Object.assign({width:t(e).mul(2).equal(),minWidth:t(e).mul(2).equal()},$w(e)),Vee=e=>{const{borderRadiusSM:t,skeletonButtonCls:n,controlHeight:r,controlHeightLG:s,controlHeightSM:d,gradientFromColor:p,calc:i}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({[n]:Object.assign({display:"inline-block",verticalAlign:"top",background:p,borderRadius:t,width:i(r).mul(2).equal(),minWidth:i(r).mul(2).equal()},J2(r,i))},Y2(e,r,n)),{[`${n}-lg`]:Object.assign({},J2(s,i))}),Y2(e,s,`${n}-lg`)),{[`${n}-sm`]:Object.assign({},J2(d,i))}),Y2(e,d,`${n}-sm`))},Hee=e=>{const{componentCls:t,skeletonAvatarCls:n,skeletonTitleCls:r,skeletonParagraphCls:s,skeletonButtonCls:d,skeletonInputCls:p,skeletonImageCls:i,controlHeight:x,controlHeightLG:S,controlHeightSM:T,gradientFromColor:M,padding:$,marginSM:L,borderRadius:N,titleHeight:V,blockRadius:B,paragraphLiHeight:j,controlHeightXS:H,paragraphMarginTop:W}=e;return{[t]:{display:"table",width:"100%",[`${t}-header`]:{display:"table-cell",paddingInlineEnd:$,verticalAlign:"top",[n]:Object.assign({display:"inline-block",verticalAlign:"top",background:M},Jp(x)),[`${n}-circle`]:{borderRadius:"50%"},[`${n}-lg`]:Object.assign({},Jp(S)),[`${n}-sm`]:Object.assign({},Jp(T))},[`${t}-content`]:{display:"table-cell",width:"100%",verticalAlign:"top",[r]:{width:"100%",height:V,background:M,borderRadius:B,[`+ ${s}`]:{marginBlockStart:T}},[s]:{padding:0,"> li":{width:"100%",height:j,listStyle:"none",background:M,borderRadius:B,"+ li":{marginBlockStart:H}}},[`${s}> li:last-child:not(:first-child):not(:nth-child(2))`]:{width:"61%"}},[`&-round ${t}-content`]:{[`${r}, ${s} > li`]:{borderRadius:N}}},[`${t}-with-avatar ${t}-content`]:{[r]:{marginBlockStart:L,[`+ ${s}`]:{marginBlockStart:W}}},[`${t}${t}-element`]:Object.assign(Object.assign(Object.assign(Object.assign({display:"inline-block",width:"auto"},Vee(e)),Fee(e)),Bee(e)),jee(e)),[`${t}${t}-block`]:{width:"100%",[d]:{width:"100%"},[p]:{width:"100%"}},[`${t}${t}-active`]:{[`
        ${r},
        ${s} > li,
        ${n},
        ${d},
        ${p},
        ${i}
      `]:Object.assign({},Nee(e))}}},Uee=e=>{const{colorFillContent:t,colorFill:n}=e,r=t,s=n;return{color:r,colorGradientEnd:s,gradientFromColor:r,gradientToColor:s,titleHeight:e.controlHeight/2,blockRadius:e.borderRadiusSM,paragraphMarginTop:e.marginLG+e.marginXXS,paragraphLiHeight:e.controlHeight/2}},Am=Qi("Skeleton",e=>{const{componentCls:t,calc:n}=e,r=pi(e,{skeletonAvatarCls:`${t}-avatar`,skeletonTitleCls:`${t}-title`,skeletonParagraphCls:`${t}-paragraph`,skeletonButtonCls:`${t}-button`,skeletonInputCls:`${t}-input`,skeletonImageCls:`${t}-image`,imageSizeBase:n(e.controlHeight).mul(1.5).equal(),borderRadius:100,skeletonLoadingBackground:`linear-gradient(90deg, ${e.gradientFromColor} 25%, ${e.gradientToColor} 37%, ${e.gradientFromColor} 63%)`,skeletonLoadingMotionDuration:"1.4s"});return[Hee(r)]},Uee,{deprecatedTokens:[["color","gradientFromColor"],["colorGradientEnd","gradientToColor"]]}),Wee=e=>{const{prefixCls:t,className:n,rootClassName:r,active:s,shape:d="circle",size:p="default"}=e,{getPrefixCls:i}=_.useContext(fr),x=i("skeleton",t),[S,T,M]=Am(x),$=vo(e,["prefixCls","className"]),L=pt(x,`${x}-element`,{[`${x}-active`]:s},n,r,T,M);return S(_.createElement("div",{className:L},_.createElement(Dw,Object.assign({prefixCls:`${x}-avatar`,shape:d,size:p},$))))},Gee=e=>{const{prefixCls:t,className:n,rootClassName:r,active:s,block:d=!1,size:p="default"}=e,{getPrefixCls:i}=_.useContext(fr),x=i("skeleton",t),[S,T,M]=Am(x),$=vo(e,["prefixCls"]),L=pt(x,`${x}-element`,{[`${x}-active`]:s,[`${x}-block`]:d},n,r,T,M);return S(_.createElement("div",{className:L},_.createElement(Dw,Object.assign({prefixCls:`${x}-button`,size:p},$))))},qee="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",Kee=e=>{const{prefixCls:t,className:n,rootClassName:r,style:s,active:d}=e,{getPrefixCls:p}=_.useContext(fr),i=p("skeleton",t),[x,S,T]=Am(i),M=pt(i,`${i}-element`,{[`${i}-active`]:d},n,r,S,T);return x(_.createElement("div",{className:M},_.createElement("div",{className:pt(`${i}-image`,n),style:s},_.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:`${i}-image-svg`},_.createElement("title",null,"Image placeholder"),_.createElement("path",{d:qee,className:`${i}-image-path`})))))},Xee=e=>{const{prefixCls:t,className:n,rootClassName:r,active:s,block:d,size:p="default"}=e,{getPrefixCls:i}=_.useContext(fr),x=i("skeleton",t),[S,T,M]=Am(x),$=vo(e,["prefixCls"]),L=pt(x,`${x}-element`,{[`${x}-active`]:s,[`${x}-block`]:d},n,r,T,M);return S(_.createElement("div",{className:L},_.createElement(Dw,Object.assign({prefixCls:`${x}-input`,size:p},$))))},Zee=e=>{const{prefixCls:t,className:n,rootClassName:r,style:s,active:d,children:p}=e,{getPrefixCls:i}=_.useContext(fr),x=i("skeleton",t),[S,T,M]=Am(x),$=pt(x,`${x}-element`,{[`${x}-active`]:d},T,n,r,M);return S(_.createElement("div",{className:$},_.createElement("div",{className:pt(`${x}-image`,n),style:s},p)))},Yee=(e,t)=>{const{width:n,rows:r=2}=t;if(Array.isArray(n))return n[e];if(r-1===e)return n},Jee=e=>{const{prefixCls:t,className:n,style:r,rows:s}=e,d=un(new Array(s)).map((p,i)=>_.createElement("li",{key:i,style:{width:Yee(i,e)}}));return _.createElement("ul",{className:pt(t,n),style:r},d)},Qee=e=>{let{prefixCls:t,className:n,width:r,style:s}=e;return _.createElement("h3",{className:pt(t,n),style:Object.assign({width:r},s)})};function Q2(e){return e&&typeof e=="object"?e:{}}function ete(e,t){return e&&!t?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function tte(e,t){return!e&&t?{width:"38%"}:e&&t?{width:"50%"}:{}}function nte(e,t){const n={};return(!e||!t)&&(n.width="61%"),!e&&t?n.rows=3:n.rows=2,n}const Vd=e=>{const{prefixCls:t,loading:n,className:r,rootClassName:s,style:d,children:p,avatar:i=!1,title:x=!0,paragraph:S=!0,active:T,round:M}=e,{getPrefixCls:$,direction:L,skeleton:N}=_.useContext(fr),V=$("skeleton",t),[B,j,H]=Am(V);if(n||!("loading"in e)){const W=!!i,X=!!x,ee=!!S;let J;if(W){const se=Object.assign(Object.assign({prefixCls:`${V}-avatar`},ete(X,ee)),Q2(i));J=_.createElement("div",{className:`${V}-header`},_.createElement(Dw,Object.assign({},se)))}let Y;if(X||ee){let se;if(X){const ce=Object.assign(Object.assign({prefixCls:`${V}-title`},tte(W,ee)),Q2(x));se=_.createElement(Qee,Object.assign({},ce))}let ae;if(ee){const ce=Object.assign(Object.assign({prefixCls:`${V}-paragraph`},nte(W,X)),Q2(S));ae=_.createElement(Jee,Object.assign({},ce))}Y=_.createElement("div",{className:`${V}-content`},se,ae)}const re=pt(V,{[`${V}-with-avatar`]:W,[`${V}-active`]:T,[`${V}-rtl`]:L==="rtl",[`${V}-round`]:M},N==null?void 0:N.className,r,s,j,H);return B(_.createElement("div",{className:re,style:Object.assign(Object.assign({},N==null?void 0:N.style),d)},J,Y))}return p??null};Vd.Button=Gee;Vd.Avatar=Wee;Vd.Input=Xee;Vd.Image=Kee;Vd.Node=Zee;function Dk(){}const rte=_.createContext({add:Dk,remove:Dk});function E5(e){const t=_.useContext(rte),n=_.useRef();return Zr(s=>{if(s){const d=e?s.querySelector(e):s;t.add(d),n.current=d}else t.remove(n.current)})}const $k=()=>{const{cancelButtonProps:e,cancelTextLocale:t,onCancel:n}=_.useContext(Ey);return Ft.createElement(Di,Object.assign({onClick:n},e),t)},kk=()=>{const{confirmLoading:e,okButtonProps:t,okType:n,okTextLocale:r,onOk:s}=_.useContext(Ey);return Ft.createElement(Di,Object.assign({},CP(n),{loading:e,onClick:s},t),r)};function T5(e,t){return Ft.createElement("span",{className:`${e}-close-x`},t||Ft.createElement(Om,{className:`${e}-close-icon`}))}const I5=e=>{const{okText:t,okType:n="primary",cancelText:r,confirmLoading:s,onOk:d,onCancel:p,okButtonProps:i,cancelButtonProps:x,footer:S}=e,[T]=Zl("Modal",uB()),M=t||(T==null?void 0:T.okText),$=r||(T==null?void 0:T.cancelText),L={confirmLoading:s,okButtonProps:i,cancelButtonProps:x,okTextLocale:M,cancelTextLocale:$,okType:n,onOk:d,onCancel:p},N=Ft.useMemo(()=>L,un(Object.values(L)));let V;return typeof S=="function"||typeof S>"u"?(V=Ft.createElement(Ft.Fragment,null,Ft.createElement($k,null),Ft.createElement(kk,null)),typeof S=="function"&&(V=S(V,{OkBtn:kk,CancelBtn:$k})),V=Ft.createElement(c5,{value:N},V)):V=S,Ft.createElement(vB,{disabled:!1},V)};function zk(e){return{position:e,inset:0}}const ite=e=>{const{componentCls:t,antCls:n}=e;return[{[`${t}-root`]:{[`${t}${n}-zoom-enter, ${t}${n}-zoom-appear`]:{transform:"none",opacity:0,animationDuration:e.motionDurationSlow,userSelect:"none"},[`${t}${n}-zoom-leave ${t}-content`]:{pointerEvents:"none"},[`${t}-mask`]:Object.assign(Object.assign({},zk("fixed")),{zIndex:e.zIndexPopupBase,height:"100%",backgroundColor:e.colorBgMask,pointerEvents:"none",[`${t}-hidden`]:{display:"none"}}),[`${t}-wrap`]:Object.assign(Object.assign({},zk("fixed")),{zIndex:e.zIndexPopupBase,overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"})}},{[`${t}-root`]:EJ(e)}]},ote=e=>{const{componentCls:t}=e;return[{[`${t}-root`]:{[`${t}-wrap-rtl`]:{direction:"rtl"},[`${t}-centered`]:{textAlign:"center","&::before":{display:"inline-block",width:0,height:"100%",verticalAlign:"middle",content:'""'},[t]:{top:0,display:"inline-block",paddingBottom:0,textAlign:"start",verticalAlign:"middle"}},[`@media (max-width: ${e.screenSMMax}px)`]:{[t]:{maxWidth:"calc(100vw - 16px)",margin:`${nt(e.marginXS)} auto`},[`${t}-centered`]:{[t]:{flex:1}}}}},{[t]:Object.assign(Object.assign({},lo(e)),{pointerEvents:"none",position:"relative",top:100,width:"auto",maxWidth:`calc(100vw - ${nt(e.calc(e.margin).mul(2).equal())})`,margin:"0 auto",paddingBottom:e.paddingLG,[`${t}-title`]:{margin:0,color:e.titleColor,fontWeight:e.fontWeightStrong,fontSize:e.titleFontSize,lineHeight:e.titleLineHeight,wordWrap:"break-word"},[`${t}-content`]:{position:"relative",backgroundColor:e.contentBg,backgroundClip:"padding-box",border:0,borderRadius:e.borderRadiusLG,boxShadow:e.boxShadow,pointerEvents:"auto",padding:e.contentPadding},[`${t}-close`]:Object.assign({position:"absolute",top:e.calc(e.modalHeaderHeight).sub(e.modalCloseBtnSize).div(2).equal(),insetInlineEnd:e.calc(e.modalHeaderHeight).sub(e.modalCloseBtnSize).div(2).equal(),zIndex:e.calc(e.zIndexPopupBase).add(10).equal(),padding:0,color:e.modalCloseIconColor,fontWeight:e.fontWeightStrong,lineHeight:1,textDecoration:"none",background:"transparent",borderRadius:e.borderRadiusSM,width:e.modalCloseBtnSize,height:e.modalCloseBtnSize,border:0,outline:0,cursor:"pointer",transition:`color ${e.motionDurationMid}, background-color ${e.motionDurationMid}`,"&-x":{display:"flex",fontSize:e.fontSizeLG,fontStyle:"normal",lineHeight:nt(e.modalCloseBtnSize),justifyContent:"center",textTransform:"none",textRendering:"auto"},"&:disabled":{pointerEvents:"none"},"&:hover":{color:e.modalCloseIconHoverColor,backgroundColor:e.colorBgTextHover,textDecoration:"none"},"&:active":{backgroundColor:e.colorBgTextActive}},au(e)),[`${t}-header`]:{color:e.colorText,background:e.headerBg,borderRadius:`${nt(e.borderRadiusLG)} ${nt(e.borderRadiusLG)} 0 0`,marginBottom:e.headerMarginBottom,padding:e.headerPadding,borderBottom:e.headerBorderBottom},[`${t}-body`]:{fontSize:e.fontSize,lineHeight:e.lineHeight,wordWrap:"break-word",padding:e.bodyPadding,[`${t}-body-skeleton`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",margin:`${nt(e.margin)} auto`}},[`${t}-footer`]:{textAlign:"end",background:e.footerBg,marginTop:e.footerMarginTop,padding:e.footerPadding,borderTop:e.footerBorderTop,borderRadius:e.footerBorderRadius,[`> ${e.antCls}-btn + ${e.antCls}-btn`]:{marginInlineStart:e.marginXS}},[`${t}-open`]:{overflow:"hidden"}})},{[`${t}-pure-panel`]:{top:"auto",padding:0,display:"flex",flexDirection:"column",[`${t}-content,
          ${t}-body,
          ${t}-confirm-body-wrapper`]:{display:"flex",flexDirection:"column",flex:"auto"},[`${t}-confirm-body`]:{marginBottom:"auto"}}}]},ate=e=>{const{componentCls:t}=e;return{[`${t}-root`]:{[`${t}-wrap-rtl`]:{direction:"rtl",[`${t}-confirm-body`]:{direction:"rtl"}}}}},M5=e=>{const t=e.padding,n=e.fontSizeHeading5,r=e.lineHeightHeading5;return pi(e,{modalHeaderHeight:e.calc(e.calc(r).mul(n).equal()).add(e.calc(t).mul(2).equal()).equal(),modalFooterBorderColorSplit:e.colorSplit,modalFooterBorderStyle:e.lineType,modalFooterBorderWidth:e.lineWidth,modalCloseIconColor:e.colorIcon,modalCloseIconHoverColor:e.colorIconHover,modalCloseBtnSize:e.controlHeight,modalConfirmIconSize:e.fontHeight,modalTitleHeight:e.calc(e.titleFontSize).mul(e.titleLineHeight).equal()})},P5=e=>({footerBg:"transparent",headerBg:e.colorBgElevated,titleLineHeight:e.lineHeightHeading5,titleFontSize:e.fontSizeHeading5,contentBg:e.colorBgElevated,titleColor:e.colorTextHeading,contentPadding:e.wireframe?0:`${nt(e.paddingMD)} ${nt(e.paddingContentHorizontalLG)}`,headerPadding:e.wireframe?`${nt(e.padding)} ${nt(e.paddingLG)}`:0,headerBorderBottom:e.wireframe?`${nt(e.lineWidth)} ${e.lineType} ${e.colorSplit}`:"none",headerMarginBottom:e.wireframe?0:e.marginXS,bodyPadding:e.wireframe?e.paddingLG:0,footerPadding:e.wireframe?`${nt(e.paddingXS)} ${nt(e.padding)}`:0,footerBorderTop:e.wireframe?`${nt(e.lineWidth)} ${e.lineType} ${e.colorSplit}`:"none",footerBorderRadius:e.wireframe?`0 0 ${nt(e.borderRadiusLG)} ${nt(e.borderRadiusLG)}`:0,footerMarginTop:e.wireframe?0:e.marginSM,confirmBodyPadding:e.wireframe?`${nt(e.padding*2)} ${nt(e.padding*2)} ${nt(e.paddingLG)}`:0,confirmIconMarginInlineEnd:e.wireframe?e.margin:e.marginSM,confirmBtnsMarginTop:e.wireframe?e.marginLG:e.marginSM}),R5=Qi("Modal",e=>{const t=M5(e);return[ote(t),ate(t),ite(t),Cy(t,"zoom")]},P5,{unitless:{titleLineHeight:!0}});var ste=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};let II;const lte=e=>{II={x:e.pageX,y:e.pageY},setTimeout(()=>{II=null},100)};zee()&&document.documentElement.addEventListener("click",lte,!0);const O5=e=>{var t;const{getPopupContainer:n,getPrefixCls:r,direction:s,modal:d}=_.useContext(fr),p=$e=>{const{onCancel:ze}=e;ze==null||ze($e)},i=$e=>{const{onOk:ze}=e;ze==null||ze($e)},{prefixCls:x,className:S,rootClassName:T,open:M,wrapClassName:$,centered:L,getContainer:N,focusTriggerAfterClose:V=!0,style:B,visible:j,width:H=520,footer:W,classNames:X,styles:ee,children:J,loading:Y}=e,re=ste(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles","children","loading"]),se=r("modal",x),ae=r(),ce=Qo(se),[Ce,we,ge]=R5(se,ce),ve=pt($,{[`${se}-centered`]:!!L,[`${se}-wrap-rtl`]:s==="rtl"}),de=W!==null&&!Y?_.createElement(I5,Object.assign({},e,{onOk:i,onCancel:p})):null,[pe,fe,me]=S5(I1(e),I1(d),{closable:!0,closeIcon:_.createElement(Om,{className:`${se}-close-icon`}),closeIconRender:$e=>T5(se,$e)}),Ie=E5(`.${se}-content`),[Me,Be]=jd("Modal",re.zIndex);return Ce(_.createElement(Dd,{form:!0,space:!0},_.createElement(by.Provider,{value:Be},_.createElement(g5,Object.assign({width:H},re,{zIndex:Me,getContainer:N===void 0?n:N,prefixCls:se,rootClassName:pt(we,T,ge,ce),footer:de,visible:M??j,mousePosition:(t=re.mousePosition)!==null&&t!==void 0?t:II,onClose:p,closable:pe&&{disabled:me,closeIcon:fe},closeIcon:fe,focusTriggerAfterClose:V,transitionName:Sc(ae,"zoom",e.transitionName),maskTransitionName:Sc(ae,"fade",e.maskTransitionName),className:pt(we,S,d==null?void 0:d.className),style:Object.assign(Object.assign({},d==null?void 0:d.style),B),classNames:Object.assign(Object.assign(Object.assign({},d==null?void 0:d.classNames),X),{wrapper:pt(ve,X==null?void 0:X.wrapper)}),styles:Object.assign(Object.assign({},d==null?void 0:d.styles),ee),panelRef:Ie}),Y?_.createElement(Vd,{active:!0,title:!1,paragraph:{rows:4},className:`${se}-body-skeleton`}):J))))},cte=e=>{const{componentCls:t,titleFontSize:n,titleLineHeight:r,modalConfirmIconSize:s,fontSize:d,lineHeight:p,modalTitleHeight:i,fontHeight:x,confirmBodyPadding:S}=e,T=`${t}-confirm`;return{[T]:{"&-rtl":{direction:"rtl"},[`${e.antCls}-modal-header`]:{display:"none"},[`${T}-body-wrapper`]:Object.assign({},ou()),[`&${t} ${t}-body`]:{padding:S},[`${T}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${e.iconCls}`]:{flex:"none",fontSize:s,marginInlineEnd:e.confirmIconMarginInlineEnd,marginTop:e.calc(e.calc(x).sub(s).equal()).div(2).equal()},[`&-has-title > ${e.iconCls}`]:{marginTop:e.calc(e.calc(i).sub(s).equal()).div(2).equal()}},[`${T}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:e.marginXS},[`${e.iconCls} + ${T}-paragraph`]:{maxWidth:`calc(100% - ${nt(e.calc(e.modalConfirmIconSize).add(e.marginSM).equal())})`},[`${T}-title`]:{color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:n,lineHeight:r},[`${T}-content`]:{color:e.colorText,fontSize:d,lineHeight:p},[`${T}-btns`]:{textAlign:"end",marginTop:e.confirmBtnsMarginTop,[`${e.antCls}-btn + ${e.antCls}-btn`]:{marginBottom:0,marginInlineStart:e.marginXS}}},[`${T}-error ${T}-body > ${e.iconCls}`]:{color:e.colorError},[`${T}-warning ${T}-body > ${e.iconCls},
        ${T}-confirm ${T}-body > ${e.iconCls}`]:{color:e.colorWarning},[`${T}-info ${T}-body > ${e.iconCls}`]:{color:e.colorInfo},[`${T}-success ${T}-body > ${e.iconCls}`]:{color:e.colorSuccess}}},ute=_P(["Modal","confirm"],e=>{const t=M5(e);return[cte(t)]},P5,{order:-1e3});var dte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};function A5(e){const{prefixCls:t,icon:n,okText:r,cancelText:s,confirmPrefixCls:d,type:p,okCancel:i,footer:x,locale:S}=e,T=dte(e,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let M=n;if(!n&&n!==null)switch(p){case"info":M=_.createElement(UB,null);break;case"success":M=_.createElement(HB,null);break;case"error":M=_.createElement(_w,null);break;default:M=_.createElement(xw,null)}const $=i??p==="confirm",L=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",[N]=Zl("Modal"),V=S||N,B=r||($?V==null?void 0:V.okText:V==null?void 0:V.justOkText),j=s||(V==null?void 0:V.cancelText),H=Object.assign({autoFocusButton:L,cancelTextLocale:j,okTextLocale:B,mergedOkCancel:$},T),W=_.useMemo(()=>H,un(Object.values(H))),X=_.createElement(_.Fragment,null,_.createElement(uk,null),_.createElement(dk,null)),ee=e.title!==void 0&&e.title!==null,J=`${d}-body`;return _.createElement("div",{className:`${d}-body-wrapper`},_.createElement("div",{className:pt(J,{[`${J}-has-title`]:ee})},M,_.createElement("div",{className:`${d}-paragraph`},ee&&_.createElement("span",{className:`${d}-title`},e.title),_.createElement("div",{className:`${d}-content`},e.content))),x===void 0||typeof x=="function"?_.createElement(c5,{value:W},_.createElement("div",{className:`${d}-btns`},typeof x=="function"?x(X,{OkBtn:dk,CancelBtn:uk}):X)):x,_.createElement(ute,{prefixCls:t}))}const hte=e=>{const{close:t,zIndex:n,afterClose:r,open:s,keyboard:d,centered:p,getContainer:i,maskStyle:x,direction:S,prefixCls:T,wrapClassName:M,rootPrefixCls:$,bodyStyle:L,closable:N=!1,closeIcon:V,modalRender:B,focusTriggerAfterClose:j,onConfirm:H,styles:W}=e,X=`${T}-confirm`,ee=e.width||416,J=e.style||{},Y=e.mask===void 0?!0:e.mask,re=e.maskClosable===void 0?!1:e.maskClosable,se=pt(X,`${X}-${e.type}`,{[`${X}-rtl`]:S==="rtl"},e.className),[,ae]=Ra(),ce=_.useMemo(()=>n!==void 0?n:ae.zIndexPopupBase+KB,[n,ae]);return _.createElement(O5,{prefixCls:T,className:se,wrapClassName:pt({[`${X}-centered`]:!!e.centered},M),onCancel:()=>{t==null||t({triggerCancel:!0}),H==null||H(!1)},open:s,title:"",footer:null,transitionName:Sc($||"","zoom",e.transitionName),maskTransitionName:Sc($||"","fade",e.maskTransitionName),mask:Y,maskClosable:re,style:J,styles:Object.assign({body:L,mask:x},W),width:ee,zIndex:ce,afterClose:r,keyboard:d,centered:p,getContainer:i,closable:N,closeIcon:V,modalRender:B,focusTriggerAfterClose:j},_.createElement(A5,Object.assign({},e,{confirmPrefixCls:X})))},D5=e=>{const{rootPrefixCls:t,iconPrefixCls:n,direction:r,theme:s}=e;return _.createElement(cu,{prefixCls:t,iconPrefixCls:n,direction:r,theme:s},_.createElement(hte,Object.assign({},e)))},jh=[];let $5="";function k5(){return $5}const fte=e=>{var t,n;const{prefixCls:r,getContainer:s,direction:d}=e,p=uB(),i=_.useContext(fr),x=k5()||i.getPrefixCls(),S=r||`${x}-modal`;let T=s;return T===!1&&(T=void 0),Ft.createElement(D5,Object.assign({},e,{rootPrefixCls:x,prefixCls:S,iconPrefixCls:i.iconPrefixCls,theme:i.theme,direction:d??i.direction,locale:(n=(t=i.locale)===null||t===void 0?void 0:t.Modal)!==null&&n!==void 0?n:p,getContainer:T}))};function My(e){const t=NB(),n=document.createDocumentFragment();let r=Object.assign(Object.assign({},e),{close:i,open:!0}),s;function d(){for(var S,T=arguments.length,M=new Array(T),$=0;$<T;$++)M[$]=arguments[$];if(M.some(V=>V==null?void 0:V.triggerCancel)){var N;(S=e.onCancel)===null||S===void 0||(N=S).call.apply(N,[e,()=>{}].concat(un(M.slice(1))))}for(let V=0;V<jh.length;V++)if(jh[V]===i){jh.splice(V,1);break}QB(n)}function p(S){clearTimeout(s),s=setTimeout(()=>{const T=t.getPrefixCls(void 0,k5()),M=t.getIconPrefixCls(),$=t.getTheme(),L=Ft.createElement(fte,Object.assign({},S));wP(Ft.createElement(cu,{prefixCls:T,iconPrefixCls:M,theme:$},t.holderRender?t.holderRender(L):L),n)})}function i(){for(var S=arguments.length,T=new Array(S),M=0;M<S;M++)T[M]=arguments[M];r=Object.assign(Object.assign({},r),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),d.apply(this,T)}}),r.visible&&delete r.visible,p(r)}function x(S){typeof S=="function"?r=S(r):r=Object.assign(Object.assign({},r),S),p(r)}return p(r),jh.push(i),{destroy:i,update:x}}function z5(e){return Object.assign(Object.assign({},e),{type:"warning"})}function L5(e){return Object.assign(Object.assign({},e),{type:"info"})}function N5(e){return Object.assign(Object.assign({},e),{type:"success"})}function F5(e){return Object.assign(Object.assign({},e),{type:"error"})}function B5(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function pte(e){let{rootPrefixCls:t}=e;$5=t}var mte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const gte=(e,t)=>{var n,{afterClose:r,config:s}=e,d=mte(e,["afterClose","config"]);const[p,i]=_.useState(!0),[x,S]=_.useState(s),{direction:T,getPrefixCls:M}=_.useContext(fr),$=M("modal"),L=M(),N=()=>{var H;r(),(H=x.afterClose)===null||H===void 0||H.call(x)},V=function(){var H;i(!1);for(var W=arguments.length,X=new Array(W),ee=0;ee<W;ee++)X[ee]=arguments[ee];if(X.some(re=>re==null?void 0:re.triggerCancel)){var Y;(H=x.onCancel)===null||H===void 0||(Y=H).call.apply(Y,[x,()=>{}].concat(un(X.slice(1))))}};_.useImperativeHandle(t,()=>({destroy:V,update:H=>{S(W=>Object.assign(Object.assign({},W),H))}}));const B=(n=x.okCancel)!==null&&n!==void 0?n:x.type==="confirm",[j]=Zl("Modal",ru.Modal);return _.createElement(D5,Object.assign({prefixCls:$,rootPrefixCls:L},x,{close:V,open:p,afterClose:N,okText:x.okText||(B?j==null?void 0:j.okText:j==null?void 0:j.justOkText),direction:x.direction||T,cancelText:x.cancelText||(j==null?void 0:j.cancelText)},d))},vte=_.forwardRef(gte);let Lk=0;const yte=_.memo(_.forwardRef((e,t)=>{const[n,r]=NY();return _.useImperativeHandle(t,()=>({patchElement:r}),[]),_.createElement(_.Fragment,null,n)}));function _te(){const e=_.useRef(null),[t,n]=_.useState([]);_.useEffect(()=>{t.length&&(un(t).forEach(p=>{p()}),n([]))},[t]);const r=_.useCallback(d=>function(i){var x;Lk+=1;const S=_.createRef();let T;const M=new Promise(B=>{T=B});let $=!1,L;const N=_.createElement(vte,{key:`modal-${Lk}`,config:d(i),ref:S,afterClose:()=>{L==null||L()},isSilent:()=>$,onConfirm:B=>{T(B)}});return L=(x=e.current)===null||x===void 0?void 0:x.patchElement(N),L&&jh.push(L),{destroy:()=>{function B(){var j;(j=S.current)===null||j===void 0||j.destroy()}S.current?B():n(j=>[].concat(un(j),[B]))},update:B=>{function j(){var H;(H=S.current)===null||H===void 0||H.update(B)}S.current?j():n(H=>[].concat(un(H),[j]))},then:B=>($=!0,M.then(B))}},[]);return[_.useMemo(()=>({info:r(L5),success:r(N5),error:r(F5),warning:r(z5),confirm:r(B5)}),[]),_.createElement(yte,{key:"modal-holder",ref:e})]}const xte=Ft.createContext({});function j5(e){return t=>_.createElement(cu,{theme:{token:{motion:!1,zIndexPopupBase:0}}},_.createElement(e,Object.assign({},t)))}const Py=(e,t,n,r)=>j5(d=>{const{prefixCls:p,style:i}=d,x=_.useRef(null),[S,T]=_.useState(0),[M,$]=_.useState(0),[L,N]=Bi(!1,{value:d.open}),{getPrefixCls:V}=_.useContext(fr),B=V(t||"select",p);_.useEffect(()=>{if(N(!0),typeof ResizeObserver<"u"){const W=new ResizeObserver(ee=>{const J=ee[0].target;T(J.offsetHeight+8),$(J.offsetWidth)}),X=setInterval(()=>{var ee;const J=n?`.${n(B)}`:`.${B}-dropdown`,Y=(ee=x.current)===null||ee===void 0?void 0:ee.querySelector(J);Y&&(clearInterval(X),W.observe(Y))},10);return()=>{clearInterval(X),W.disconnect()}}},[]);let j=Object.assign(Object.assign({},d),{style:Object.assign(Object.assign({},i),{margin:0}),open:L,visible:L,getPopupContainer:()=>x.current});r&&(j=r(j));const H={paddingBottom:S,position:"relative",minWidth:M};return _.createElement("div",{ref:x,style:H},_.createElement(e,Object.assign({},j)))}),DP=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};var kw=function(t){var n=t.className,r=t.customizeIcon,s=t.customizeIconProps,d=t.children,p=t.onMouseDown,i=t.onClick,x=typeof r=="function"?r(s):r;return _.createElement("span",{className:n,onMouseDown:function(T){T.preventDefault(),p==null||p(T)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:i,"aria-hidden":!0},x!==void 0?x:_.createElement("span",{className:pt(n.split(/\s+/).map(function(S){return"".concat(S,"-icon")}))},d))},bte=function(t,n,r,s,d){var p=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,i=arguments.length>6?arguments[6]:void 0,x=arguments.length>7?arguments[7]:void 0,S=Ft.useMemo(function(){if(cr(s)==="object")return s.clearIcon;if(d)return d},[s,d]),T=Ft.useMemo(function(){return!!(!p&&s&&(r.length||i)&&!(x==="combobox"&&i===""))},[s,p,r.length,i,x]);return{allowClear:T,clearIcon:Ft.createElement(kw,{className:"".concat(t,"-clear"),onMouseDown:n,customizeIcon:S},"×")}},V5=_.createContext(null);function wte(){return _.useContext(V5)}function Ste(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,t=_.useState(!1),n=ot(t,2),r=n[0],s=n[1],d=_.useRef(null),p=function(){window.clearTimeout(d.current)};_.useEffect(function(){return p},[]);var i=function(S,T){p(),d.current=window.setTimeout(function(){s(S),T&&T()},e)};return[r,i,p]}function H5(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,t=_.useRef(null),n=_.useRef(null);_.useEffect(function(){return function(){window.clearTimeout(n.current)}},[]);function r(s){(s||t.current===null)&&(t.current=s),window.clearTimeout(n.current),n.current=window.setTimeout(function(){t.current=null},e)}return[function(){return t.current},r]}function Cte(e,t,n,r){var s=_.useRef(null);s.current={open:t,triggerOpen:n,customizedTrigger:r},_.useEffect(function(){function d(p){var i;if(!((i=s.current)!==null&&i!==void 0&&i.customizedTrigger)){var x=p.target;x.shadowRoot&&p.composed&&(x=p.composedPath()[0]||x),s.current.open&&e().filter(function(S){return S}).every(function(S){return!S.contains(x)&&S!==x})&&s.current.triggerOpen(!1)}}return window.addEventListener("mousedown",d),function(){return window.removeEventListener("mousedown",d)}},[])}function Ete(e){return![gn.ESC,gn.SHIFT,gn.BACKSPACE,gn.TAB,gn.WIN_KEY,gn.ALT,gn.META,gn.WIN_KEY_RIGHT,gn.CTRL,gn.SEMICOLON,gn.EQUALS,gn.CAPS_LOCK,gn.CONTEXT_MENU,gn.F1,gn.F2,gn.F3,gn.F4,gn.F5,gn.F6,gn.F7,gn.F8,gn.F9,gn.F10,gn.F11,gn.F12].includes(e)}var Tte=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],wp=void 0;function Ite(e,t){var n=e.prefixCls,r=e.invalidate,s=e.item,d=e.renderItem,p=e.responsive,i=e.responsiveDisabled,x=e.registerSize,S=e.itemKey,T=e.className,M=e.style,$=e.children,L=e.display,N=e.order,V=e.component,B=V===void 0?"div":V,j=Er(e,Tte),H=p&&!L;function W(re){x(S,re)}_.useEffect(function(){return function(){W(null)}},[]);var X=d&&s!==wp?d(s):$,ee;r||(ee={opacity:H?0:1,height:H?0:wp,overflowY:H?"hidden":wp,order:p?N:wp,pointerEvents:H?"none":wp,position:H?"absolute":wp});var J={};H&&(J["aria-hidden"]=!0);var Y=_.createElement(B,qt({className:pt(!r&&n,T),style:We(We({},ee),M)},J,j,{ref:t}),X);return p&&(Y=_.createElement(ga,{onResize:function(se){var ae=se.offsetWidth;W(ae)},disabled:i},Y)),Y}var E0=_.forwardRef(Ite);E0.displayName="Item";function Mte(e){if(typeof MessageChannel>"u")ui(e);else{var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(void 0)}}function Pte(){var e=_.useRef(null),t=function(r){e.current||(e.current=[],Mte(function(){xc.unstable_batchedUpdates(function(){e.current.forEach(function(s){s()}),e.current=null})})),e.current.push(r)};return t}function Kv(e,t){var n=_.useState(t),r=ot(n,2),s=r[0],d=r[1],p=Zr(function(i){e(function(){d(i)})});return[s,p]}var M1=Ft.createContext(null),Rte=["component"],Ote=["className"],Ate=["className"],Dte=function(t,n){var r=_.useContext(M1);if(!r){var s=t.component,d=s===void 0?"div":s,p=Er(t,Rte);return _.createElement(d,qt({},p,{ref:n}))}var i=r.className,x=Er(r,Ote),S=t.className,T=Er(t,Ate);return _.createElement(M1.Provider,{value:null},_.createElement(E0,qt({ref:n,className:pt(i,S)},x,T)))},U5=_.forwardRef(Dte);U5.displayName="RawItem";var $te=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],W5="responsive",G5="invalidate";function kte(e){return"+ ".concat(e.length," ...")}function zte(e,t){var n=e.prefixCls,r=n===void 0?"rc-overflow":n,s=e.data,d=s===void 0?[]:s,p=e.renderItem,i=e.renderRawItem,x=e.itemKey,S=e.itemWidth,T=S===void 0?10:S,M=e.ssr,$=e.style,L=e.className,N=e.maxCount,V=e.renderRest,B=e.renderRawRest,j=e.suffix,H=e.component,W=H===void 0?"div":H,X=e.itemComponent,ee=e.onVisibleChange,J=Er(e,$te),Y=M==="full",re=Pte(),se=Kv(re,null),ae=ot(se,2),ce=ae[0],Ce=ae[1],we=ce||0,ge=Kv(re,new Map),ve=ot(ge,2),de=ve[0],pe=ve[1],fe=Kv(re,0),me=ot(fe,2),Ie=me[0],Me=me[1],Be=Kv(re,0),$e=ot(Be,2),ze=$e[0],Je=$e[1],yt=Kv(re,0),at=ot(yt,2),gt=at[0],wt=at[1],Pe=_.useState(null),mt=ot(Pe,2),dt=mt[0],ht=mt[1],je=_.useState(null),St=ot(je,2),Ct=St[0],Lt=St[1],At=_.useMemo(function(){return Ct===null&&Y?Number.MAX_SAFE_INTEGER:Ct||0},[Ct,ce]),Yt=_.useState(!1),Kt=ot(Yt,2),Dt=Kt[0],Wt=Kt[1],Vt="".concat(r,"-item"),Rt=Math.max(Ie,ze),dn=N===W5,hn=d.length&&dn,Pn=N===G5,Dn=hn||typeof N=="number"&&d.length>N,yn=_.useMemo(function(){var ft=d;return hn?ce===null&&Y?ft=d:ft=d.slice(0,Math.min(d.length,we/T)):typeof N=="number"&&(ft=d.slice(0,N)),ft},[d,T,ce,N,hn]),Rn=_.useMemo(function(){return hn?d.slice(At+1):d.slice(yn.length)},[d,yn,hn,At]),kn=_.useCallback(function(ft,ye){var Se;return typeof x=="function"?x(ft):(Se=x&&(ft==null?void 0:ft[x]))!==null&&Se!==void 0?Se:ye},[x]),Cn=_.useCallback(p||function(ft){return ft},[p]);function nn(ft,ye,Se){Ct===ft&&(ye===void 0||ye===dt)||(Lt(ft),Se||(Wt(ft<d.length-1),ee==null||ee(ft)),ye!==void 0&&ht(ye))}function Ut(ft,ye){Ce(ye.clientWidth)}function cn(ft,ye){pe(function(Se){var ke=new Map(Se);return ye===null?ke.delete(ft):ke.set(ft,ye),ke})}function an(ft,ye){Je(ye),Me(ze)}function Zt(ft,ye){wt(ye)}function Xt(ft){return de.get(kn(yn[ft],ft))}Xr(function(){if(we&&typeof Rt=="number"&&yn){var ft=gt,ye=yn.length,Se=ye-1;if(!ye){nn(0,null);return}for(var ke=0;ke<ye;ke+=1){var Ze=Xt(ke);if(Y&&(Ze=Ze||0),Ze===void 0){nn(ke-1,void 0,!0);break}if(ft+=Ze,Se===0&&ft<=we||ke===Se-1&&ft+Xt(Se)<=we){nn(Se,null);break}else if(ft+Rt>we){nn(ke-1,ft-Ze-gt+ze);break}}j&&Xt(0)+gt>we&&ht(null)}},[we,de,ze,gt,kn,yn]);var Hn=Dt&&!!Rn.length,br={};dt!==null&&hn&&(br={position:"absolute",left:dt,top:0});var mr={prefixCls:Vt,responsive:hn,component:X,invalidate:Pn},pr=i?function(ft,ye){var Se=kn(ft,ye);return _.createElement(M1.Provider,{key:Se,value:We(We({},mr),{},{order:ye,item:ft,itemKey:Se,registerSize:cn,display:ye<=At})},i(ft,ye))}:function(ft,ye){var Se=kn(ft,ye);return _.createElement(E0,qt({},mr,{order:ye,key:Se,item:ft,renderItem:Cn,itemKey:Se,registerSize:cn,display:ye<=At}))},Tr,ur={order:Hn?At:Number.MAX_SAFE_INTEGER,className:"".concat(Vt,"-rest"),registerSize:an,display:Hn};if(B)B&&(Tr=_.createElement(M1.Provider,{value:We(We({},mr),ur)},B(Rn)));else{var Mr=V||kte;Tr=_.createElement(E0,qt({},mr,ur),typeof Mr=="function"?Mr(Rn):Mr)}var tr=_.createElement(W,qt({className:pt(!Pn&&r,L),style:$,ref:t},J),yn.map(pr),Dn?Tr:null,j&&_.createElement(E0,qt({},mr,{responsive:dn,responsiveDisabled:!hn,order:At,className:"".concat(Vt,"-suffix"),registerSize:Zt,display:!0,style:br}),j));return dn&&(tr=_.createElement(ga,{onResize:Ut,disabled:!hn},tr)),tr}var Hl=_.forwardRef(zte);Hl.displayName="Overflow";Hl.Item=U5;Hl.RESPONSIVE=W5;Hl.INVALIDATE=G5;var Lte=function(t,n){var r,s=t.prefixCls,d=t.id,p=t.inputElement,i=t.disabled,x=t.tabIndex,S=t.autoFocus,T=t.autoComplete,M=t.editable,$=t.activeDescendantId,L=t.value,N=t.maxLength,V=t.onKeyDown,B=t.onMouseDown,j=t.onChange,H=t.onPaste,W=t.onCompositionStart,X=t.onCompositionEnd,ee=t.open,J=t.attrs,Y=p||_.createElement("input",null),re=Y,se=re.ref,ae=re.props,ce=ae.onKeyDown,Ce=ae.onChange,we=ae.onMouseDown,ge=ae.onCompositionStart,ve=ae.onCompositionEnd,de=ae.style;return"maxLength"in Y.props,Y=_.cloneElement(Y,We(We(We({type:"search"},ae),{},{id:d,ref:Ua(n,se),disabled:i,tabIndex:x,autoComplete:T||"off",autoFocus:S,className:pt("".concat(s,"-selection-search-input"),(r=Y)===null||r===void 0||(r=r.props)===null||r===void 0?void 0:r.className),role:"combobox","aria-expanded":ee||!1,"aria-haspopup":"listbox","aria-owns":"".concat(d,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(d,"_list"),"aria-activedescendant":ee?$:void 0},J),{},{value:M?L:"",maxLength:N,readOnly:!M,unselectable:M?null:"on",style:We(We({},de),{},{opacity:M?null:0}),onKeyDown:function(fe){V(fe),ce&&ce(fe)},onMouseDown:function(fe){B(fe),we&&we(fe)},onChange:function(fe){j(fe),Ce&&Ce(fe)},onCompositionStart:function(fe){W(fe),ge&&ge(fe)},onCompositionEnd:function(fe){X(fe),ve&&ve(fe)},onPaste:H})),Y},q5=_.forwardRef(Lte);function K5(e){return Array.isArray(e)?e:e!==void 0?[e]:[]}var Nte=typeof window<"u"&&window.document&&window.document.documentElement,Fte=Nte;function Bte(e){return e!=null}function jte(e){return!e&&e!==0}function Nk(e){return["string","number"].includes(cr(e))}function X5(e){var t=void 0;return e&&(Nk(e.title)?t=e.title.toString():Nk(e.label)&&(t=e.label.toString())),t}function Vte(e,t){Fte?_.useLayoutEffect(e,t):_.useEffect(e,t)}function Hte(e){var t;return(t=e.key)!==null&&t!==void 0?t:e.value}var Fk=function(t){t.preventDefault(),t.stopPropagation()},Ute=function(t){var n=t.id,r=t.prefixCls,s=t.values,d=t.open,p=t.searchValue,i=t.autoClearSearchValue,x=t.inputRef,S=t.placeholder,T=t.disabled,M=t.mode,$=t.showSearch,L=t.autoFocus,N=t.autoComplete,V=t.activeDescendantId,B=t.tabIndex,j=t.removeIcon,H=t.maxTagCount,W=t.maxTagTextLength,X=t.maxTagPlaceholder,ee=X===void 0?function(ht){return"+ ".concat(ht.length," ...")}:X,J=t.tagRender,Y=t.onToggleOpen,re=t.onRemove,se=t.onInputChange,ae=t.onInputPaste,ce=t.onInputKeyDown,Ce=t.onInputMouseDown,we=t.onInputCompositionStart,ge=t.onInputCompositionEnd,ve=_.useRef(null),de=_.useState(0),pe=ot(de,2),fe=pe[0],me=pe[1],Ie=_.useState(!1),Me=ot(Ie,2),Be=Me[0],$e=Me[1],ze="".concat(r,"-selection"),Je=d||M==="multiple"&&i===!1||M==="tags"?p:"",yt=M==="tags"||M==="multiple"&&i===!1||$&&(d||Be);Vte(function(){me(ve.current.scrollWidth)},[Je]);var at=function(je,St,Ct,Lt,At){return _.createElement("span",{title:X5(je),className:pt("".concat(ze,"-item"),De({},"".concat(ze,"-item-disabled"),Ct))},_.createElement("span",{className:"".concat(ze,"-item-content")},St),Lt&&_.createElement(kw,{className:"".concat(ze,"-item-remove"),onMouseDown:Fk,onClick:At,customizeIcon:j},"×"))},gt=function(je,St,Ct,Lt,At,Yt){var Kt=function(Wt){Fk(Wt),Y(!d)};return _.createElement("span",{onMouseDown:Kt},J({label:St,value:je,disabled:Ct,closable:Lt,onClose:At,isMaxTag:!!Yt}))},wt=function(je){var St=je.disabled,Ct=je.label,Lt=je.value,At=!T&&!St,Yt=Ct;if(typeof W=="number"&&(typeof Ct=="string"||typeof Ct=="number")){var Kt=String(Yt);Kt.length>W&&(Yt="".concat(Kt.slice(0,W),"..."))}var Dt=function(Vt){Vt&&Vt.stopPropagation(),re(je)};return typeof J=="function"?gt(Lt,Yt,St,At,Dt):at(je,Yt,St,At,Dt)},Pe=function(je){var St=typeof ee=="function"?ee(je):ee;return typeof J=="function"?gt(void 0,St,!1,!1,void 0,!0):at({title:St},St,!1)},mt=_.createElement("div",{className:"".concat(ze,"-search"),style:{width:fe},onFocus:function(){$e(!0)},onBlur:function(){$e(!1)}},_.createElement(q5,{ref:x,open:d,prefixCls:r,id:n,inputElement:null,disabled:T,autoFocus:L,autoComplete:N,editable:yt,activeDescendantId:V,value:Je,onKeyDown:ce,onMouseDown:Ce,onChange:se,onPaste:ae,onCompositionStart:we,onCompositionEnd:ge,tabIndex:B,attrs:Ko(t,!0)}),_.createElement("span",{ref:ve,className:"".concat(ze,"-search-mirror"),"aria-hidden":!0},Je," ")),dt=_.createElement(Hl,{prefixCls:"".concat(ze,"-overflow"),data:s,renderItem:wt,renderRest:Pe,suffix:mt,itemKey:Hte,maxCount:H});return _.createElement("span",{className:"".concat(ze,"-wrap")},dt,!s.length&&!Je&&_.createElement("span",{className:"".concat(ze,"-placeholder")},S))},Wte=function(t){var n=t.inputElement,r=t.prefixCls,s=t.id,d=t.inputRef,p=t.disabled,i=t.autoFocus,x=t.autoComplete,S=t.activeDescendantId,T=t.mode,M=t.open,$=t.values,L=t.placeholder,N=t.tabIndex,V=t.showSearch,B=t.searchValue,j=t.activeValue,H=t.maxLength,W=t.onInputKeyDown,X=t.onInputMouseDown,ee=t.onInputChange,J=t.onInputPaste,Y=t.onInputCompositionStart,re=t.onInputCompositionEnd,se=t.title,ae=_.useState(!1),ce=ot(ae,2),Ce=ce[0],we=ce[1],ge=T==="combobox",ve=ge||V,de=$[0],pe=B||"";ge&&j&&!Ce&&(pe=j),_.useEffect(function(){ge&&we(!1)},[ge,j]);var fe=T!=="combobox"&&!M&&!V?!1:!!pe,me=se===void 0?X5(de):se,Ie=_.useMemo(function(){return de?null:_.createElement("span",{className:"".concat(r,"-selection-placeholder"),style:fe?{visibility:"hidden"}:void 0},L)},[de,fe,L,r]);return _.createElement("span",{className:"".concat(r,"-selection-wrap")},_.createElement("span",{className:"".concat(r,"-selection-search")},_.createElement(q5,{ref:d,prefixCls:r,id:s,open:M,inputElement:n,disabled:p,autoFocus:i,autoComplete:x,editable:ve,activeDescendantId:S,value:pe,onKeyDown:W,onMouseDown:X,onChange:function(Be){we(!0),ee(Be)},onPaste:J,onCompositionStart:Y,onCompositionEnd:re,tabIndex:N,attrs:Ko(t,!0),maxLength:ge?H:void 0})),!ge&&de?_.createElement("span",{className:"".concat(r,"-selection-item"),title:me,style:fe?{visibility:"hidden"}:void 0},de.label):null,Ie)},Gte=function(t,n){var r=_.useRef(null),s=_.useRef(!1),d=t.prefixCls,p=t.open,i=t.mode,x=t.showSearch,S=t.tokenWithEnter,T=t.disabled,M=t.prefix,$=t.autoClearSearchValue,L=t.onSearch,N=t.onSearchSubmit,V=t.onToggleOpen,B=t.onInputKeyDown,j=t.domRef;_.useImperativeHandle(n,function(){return{focus:function(me){r.current.focus(me)},blur:function(){r.current.blur()}}});var H=H5(0),W=ot(H,2),X=W[0],ee=W[1],J=function(me){var Ie=me.which,Me=r.current instanceof HTMLTextAreaElement;!Me&&p&&(Ie===gn.UP||Ie===gn.DOWN)&&me.preventDefault(),B&&B(me),Ie===gn.ENTER&&i==="tags"&&!s.current&&!p&&(N==null||N(me.target.value)),!(Me&&!p&&~[gn.UP,gn.DOWN,gn.LEFT,gn.RIGHT].indexOf(Ie))&&Ete(Ie)&&V(!0)},Y=function(){ee(!0)},re=_.useRef(null),se=function(me){L(me,!0,s.current)!==!1&&V(!0)},ae=function(){s.current=!0},ce=function(me){s.current=!1,i!=="combobox"&&se(me.target.value)},Ce=function(me){var Ie=me.target.value;if(S&&re.current&&/[\r\n]/.test(re.current)){var Me=re.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");Ie=Ie.replace(Me,re.current)}re.current=null,se(Ie)},we=function(me){var Ie=me.clipboardData,Me=Ie==null?void 0:Ie.getData("text");re.current=Me||""},ge=function(me){var Ie=me.target;if(Ie!==r.current){var Me=document.body.style.msTouchAction!==void 0;Me?setTimeout(function(){r.current.focus()}):r.current.focus()}},ve=function(me){var Ie=X();me.target!==r.current&&!Ie&&!(i==="combobox"&&T)&&me.preventDefault(),(i!=="combobox"&&(!x||!Ie)||!p)&&(p&&$!==!1&&L("",!0,!1),V())},de={inputRef:r,onInputKeyDown:J,onInputMouseDown:Y,onInputChange:Ce,onInputPaste:we,onInputCompositionStart:ae,onInputCompositionEnd:ce},pe=i==="multiple"||i==="tags"?_.createElement(Ute,qt({},t,de)):_.createElement(Wte,qt({},t,de));return _.createElement("div",{ref:j,className:"".concat(d,"-selector"),onClick:ge,onMouseDown:ve},M&&_.createElement("div",{className:"".concat(d,"-prefix")},M),pe)},qte=_.forwardRef(Gte);function Kte(e){var t=e.prefixCls,n=e.align,r=e.arrow,s=e.arrowPos,d=r||{},p=d.className,i=d.content,x=s.x,S=x===void 0?0:x,T=s.y,M=T===void 0?0:T,$=_.useRef();if(!n||!n.points)return null;var L={position:"absolute"};if(n.autoArrow!==!1){var N=n.points[0],V=n.points[1],B=N[0],j=N[1],H=V[0],W=V[1];B===H||!["t","b"].includes(B)?L.top=M:B==="t"?L.top=0:L.bottom=0,j===W||!["l","r"].includes(j)?L.left=S:j==="l"?L.left=0:L.right=0}return _.createElement("div",{ref:$,className:pt("".concat(t,"-arrow"),p),style:L},i)}function Xte(e){var t=e.prefixCls,n=e.open,r=e.zIndex,s=e.mask,d=e.motion;return s?_.createElement(dl,qt({},d,{motionAppear:!0,visible:n,removeOnLeave:!0}),function(p){var i=p.className;return _.createElement("div",{style:{zIndex:r},className:pt("".concat(t,"-mask"),i)})}):null}var Zte=_.memo(function(e){var t=e.children;return t},function(e,t){return t.cache}),Yte=_.forwardRef(function(e,t){var n=e.popup,r=e.className,s=e.prefixCls,d=e.style,p=e.target,i=e.onVisibleChanged,x=e.open,S=e.keepDom,T=e.fresh,M=e.onClick,$=e.mask,L=e.arrow,N=e.arrowPos,V=e.align,B=e.motion,j=e.maskMotion,H=e.forceRender,W=e.getPopupContainer,X=e.autoDestroy,ee=e.portal,J=e.zIndex,Y=e.onMouseEnter,re=e.onMouseLeave,se=e.onPointerEnter,ae=e.onPointerDownCapture,ce=e.ready,Ce=e.offsetX,we=e.offsetY,ge=e.offsetR,ve=e.offsetB,de=e.onAlign,pe=e.onPrepare,fe=e.stretch,me=e.targetWidth,Ie=e.targetHeight,Me=typeof n=="function"?n():n,Be=x||S,$e=(W==null?void 0:W.length)>0,ze=_.useState(!W||!$e),Je=ot(ze,2),yt=Je[0],at=Je[1];if(Xr(function(){!yt&&$e&&p&&at(!0)},[yt,$e,p]),!yt)return null;var gt="auto",wt={left:"-1000vw",top:"-1000vh",right:gt,bottom:gt};if(ce||!x){var Pe,mt=V.points,dt=V.dynamicInset||((Pe=V._experimental)===null||Pe===void 0?void 0:Pe.dynamicInset),ht=dt&&mt[0][1]==="r",je=dt&&mt[0][0]==="b";ht?(wt.right=ge,wt.left=gt):(wt.left=Ce,wt.right=gt),je?(wt.bottom=ve,wt.top=gt):(wt.top=we,wt.bottom=gt)}var St={};return fe&&(fe.includes("height")&&Ie?St.height=Ie:fe.includes("minHeight")&&Ie&&(St.minHeight=Ie),fe.includes("width")&&me?St.width=me:fe.includes("minWidth")&&me&&(St.minWidth=me)),x||(St.pointerEvents="none"),_.createElement(ee,{open:H||Be,getContainer:W&&function(){return W(p)},autoDestroy:X},_.createElement(Xte,{prefixCls:s,open:x,zIndex:J,mask:$,motion:j}),_.createElement(ga,{onResize:de,disabled:!x},function(Ct){return _.createElement(dl,qt({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:H,leavedClassName:"".concat(s,"-hidden")},B,{onAppearPrepare:pe,onEnterPrepare:pe,visible:x,onVisibleChanged:function(At){var Yt;B==null||(Yt=B.onVisibleChanged)===null||Yt===void 0||Yt.call(B,At),i(At)}}),function(Lt,At){var Yt=Lt.className,Kt=Lt.style,Dt=pt(s,Yt,r);return _.createElement("div",{ref:Ua(Ct,t,At),className:Dt,style:We(We(We(We({"--arrow-x":"".concat(N.x||0,"px"),"--arrow-y":"".concat(N.y||0,"px")},wt),St),Kt),{},{boxSizing:"border-box",zIndex:J},d),onMouseEnter:Y,onMouseLeave:re,onPointerEnter:se,onClick:M,onPointerDownCapture:ae},L&&_.createElement(Kte,{prefixCls:s,arrow:L,arrowPos:N,align:V}),_.createElement(Zte,{cache:!x&&!T},Me))})}))}),Jte=_.forwardRef(function(e,t){var n=e.children,r=e.getTriggerDOMNode,s=bc(n),d=_.useCallback(function(i){Z0(t,r?r(i):i)},[r]),p=lu(d,n.ref);return s?_.cloneElement(n,{ref:p}):n}),Bk=_.createContext(null);function jk(e){return e?Array.isArray(e)?e:[e]:[]}function Qte(e,t,n,r){return _.useMemo(function(){var s=jk(n??t),d=jk(r??t),p=new Set(s),i=new Set(d);return e&&(p.has("hover")&&(p.delete("hover"),p.add("click")),i.has("hover")&&(i.delete("hover"),i.add("click"))),[p,i]},[e,t,n,r])}function ene(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function tne(e,t,n,r){for(var s=n.points,d=Object.keys(e),p=0;p<d.length;p+=1){var i,x=d[p];if(ene((i=e[x])===null||i===void 0?void 0:i.points,s,r))return"".concat(t,"-placement-").concat(x)}return""}function Vk(e,t,n,r){return t||(n?{motionName:"".concat(e,"-").concat(n)}:r?{motionName:r}:null)}function Ry(e){return e.ownerDocument.defaultView}function MI(e){for(var t=[],n=e==null?void 0:e.parentElement,r=["hidden","scroll","clip","auto"];n;){var s=Ry(n).getComputedStyle(n),d=s.overflowX,p=s.overflowY,i=s.overflow;[d,p,i].some(function(x){return r.includes(x)})&&t.push(n),n=n.parentElement}return t}function cy(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?t:e}function Xv(e){return cy(parseFloat(e),0)}function Hk(e,t){var n=We({},e);return(t||[]).forEach(function(r){if(!(r instanceof HTMLBodyElement||r instanceof HTMLHtmlElement)){var s=Ry(r).getComputedStyle(r),d=s.overflow,p=s.overflowClipMargin,i=s.borderTopWidth,x=s.borderBottomWidth,S=s.borderLeftWidth,T=s.borderRightWidth,M=r.getBoundingClientRect(),$=r.offsetHeight,L=r.clientHeight,N=r.offsetWidth,V=r.clientWidth,B=Xv(i),j=Xv(x),H=Xv(S),W=Xv(T),X=cy(Math.round(M.width/N*1e3)/1e3),ee=cy(Math.round(M.height/$*1e3)/1e3),J=(N-V-H-W)*X,Y=($-L-B-j)*ee,re=B*ee,se=j*ee,ae=H*X,ce=W*X,Ce=0,we=0;if(d==="clip"){var ge=Xv(p);Ce=ge*X,we=ge*ee}var ve=M.x+ae-Ce,de=M.y+re-we,pe=ve+M.width+2*Ce-ae-ce-J,fe=de+M.height+2*we-re-se-Y;n.left=Math.max(n.left,ve),n.top=Math.max(n.top,de),n.right=Math.min(n.right,pe),n.bottom=Math.min(n.bottom,fe)}}),n}function Uk(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n="".concat(t),r=n.match(/^(.*)\%$/);return r?e*(parseFloat(r[1])/100):parseFloat(n)}function Wk(e,t){var n=t||[],r=ot(n,2),s=r[0],d=r[1];return[Uk(e.width,s),Uk(e.height,d)]}function Gk(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function Sp(e,t){var n=t[0],r=t[1],s,d;return n==="t"?d=e.y:n==="b"?d=e.y+e.height:d=e.y+e.height/2,r==="l"?s=e.x:r==="r"?s=e.x+e.width:s=e.x+e.width/2,{x:s,y:d}}function td(e,t){var n={t:"b",b:"t",l:"r",r:"l"};return e.map(function(r,s){return s===t?n[r]||"c":r}).join("")}function nne(e,t,n,r,s,d,p){var i=_.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:s[r]||{}}),x=ot(i,2),S=x[0],T=x[1],M=_.useRef(0),$=_.useMemo(function(){return t?MI(t):[]},[t]),L=_.useRef({}),N=function(){L.current={}};e||N();var V=Zr(function(){if(t&&n&&e){let Sr=function(Zn,Fo){var Xo=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Rt,bs=ze.x+Zn,ua=ze.y+Fo,ec=bs+ht,dr=ua+dt,ln=Math.max(bs,Xo.left),gr=Math.max(ua,Xo.top),yr=Math.min(ec,Xo.right),hi=Math.min(dr,Xo.bottom);return Math.max(0,(yr-ln)*(hi-gr))},ca=function(){vn=ze.y+Se,On=vn+dt,bn=ze.x+ye,zn=bn+ht};var Jn=Sr,ti=ca,H,W,X,ee,J=t,Y=J.ownerDocument,re=Ry(J),se=re.getComputedStyle(J),ae=se.width,ce=se.height,Ce=se.position,we=J.style.left,ge=J.style.top,ve=J.style.right,de=J.style.bottom,pe=J.style.overflow,fe=We(We({},s[r]),d),me=Y.createElement("div");(H=J.parentElement)===null||H===void 0||H.appendChild(me),me.style.left="".concat(J.offsetLeft,"px"),me.style.top="".concat(J.offsetTop,"px"),me.style.position=Ce,me.style.height="".concat(J.offsetHeight,"px"),me.style.width="".concat(J.offsetWidth,"px"),J.style.left="0",J.style.top="0",J.style.right="auto",J.style.bottom="auto",J.style.overflow="hidden";var Ie;if(Array.isArray(n))Ie={x:n[0],y:n[1],width:0,height:0};else{var Me,Be,$e=n.getBoundingClientRect();$e.x=(Me=$e.x)!==null&&Me!==void 0?Me:$e.left,$e.y=(Be=$e.y)!==null&&Be!==void 0?Be:$e.top,Ie={x:$e.x,y:$e.y,width:$e.width,height:$e.height}}var ze=J.getBoundingClientRect();ze.x=(W=ze.x)!==null&&W!==void 0?W:ze.left,ze.y=(X=ze.y)!==null&&X!==void 0?X:ze.top;var Je=Y.documentElement,yt=Je.clientWidth,at=Je.clientHeight,gt=Je.scrollWidth,wt=Je.scrollHeight,Pe=Je.scrollTop,mt=Je.scrollLeft,dt=ze.height,ht=ze.width,je=Ie.height,St=Ie.width,Ct={left:0,top:0,right:yt,bottom:at},Lt={left:-mt,top:-Pe,right:gt-mt,bottom:wt-Pe},At=fe.htmlRegion,Yt="visible",Kt="visibleFirst";At!=="scroll"&&At!==Kt&&(At=Yt);var Dt=At===Kt,Wt=Hk(Lt,$),Vt=Hk(Ct,$),Rt=At===Yt?Vt:Wt,dn=Dt?Vt:Rt;J.style.left="auto",J.style.top="auto",J.style.right="0",J.style.bottom="0";var hn=J.getBoundingClientRect();J.style.left=we,J.style.top=ge,J.style.right=ve,J.style.bottom=de,J.style.overflow=pe,(ee=J.parentElement)===null||ee===void 0||ee.removeChild(me);var Pn=cy(Math.round(ht/parseFloat(ae)*1e3)/1e3),Dn=cy(Math.round(dt/parseFloat(ce)*1e3)/1e3);if(Pn===0||Dn===0||X0(n)&&!Sy(n))return;var yn=fe.offset,Rn=fe.targetOffset,kn=Wk(ze,yn),Cn=ot(kn,2),nn=Cn[0],Ut=Cn[1],cn=Wk(Ie,Rn),an=ot(cn,2),Zt=an[0],Xt=an[1];Ie.x-=Zt,Ie.y-=Xt;var Hn=fe.points||[],br=ot(Hn,2),mr=br[0],pr=br[1],Tr=Gk(pr),ur=Gk(mr),Mr=Sp(Ie,Tr),tr=Sp(ze,ur),ft=We({},fe),ye=Mr.x-tr.x+nn,Se=Mr.y-tr.y+Ut,ke=Sr(ye,Se),Ze=Sr(ye,Se,Vt),Ae=Sp(Ie,["t","l"]),Ge=Sp(ze,["t","l"]),ut=Sp(Ie,["b","r"]),Qe=Sp(ze,["b","r"]),_t=fe.overflow||{},It=_t.adjustX,bt=_t.adjustY,Mt=_t.shiftX,kt=_t.shiftY,Gt=function(Fo){return typeof Fo=="boolean"?Fo:Fo>=0},vn,On,bn,zn;ca();var Mn=Gt(bt),wn=ur[0]===Tr[0];if(Mn&&ur[0]==="t"&&(On>dn.bottom||L.current.bt)){var _n=Se;wn?_n-=dt-je:_n=Ae.y-Qe.y-Ut;var rr=Sr(ye,_n),or=Sr(ye,_n,Vt);rr>ke||rr===ke&&(!Dt||or>=Ze)?(L.current.bt=!0,Se=_n,Ut=-Ut,ft.points=[td(ur,0),td(Tr,0)]):L.current.bt=!1}if(Mn&&ur[0]==="b"&&(vn<dn.top||L.current.tb)){var kr=Se;wn?kr+=dt-je:kr=ut.y-Ge.y-Ut;var zr=Sr(ye,kr),Hr=Sr(ye,kr,Vt);zr>ke||zr===ke&&(!Dt||Hr>=Ze)?(L.current.tb=!0,Se=kr,Ut=-Ut,ft.points=[td(ur,0),td(Tr,0)]):L.current.tb=!1}var ei=Gt(It),Hi=ur[1]===Tr[1];if(ei&&ur[1]==="l"&&(zn>dn.right||L.current.rl)){var ir=ye;Hi?ir-=ht-St:ir=Ae.x-Qe.x-nn;var Ar=Sr(ir,Se),Gr=Sr(ir,Se,Vt);Ar>ke||Ar===ke&&(!Dt||Gr>=Ze)?(L.current.rl=!0,ye=ir,nn=-nn,ft.points=[td(ur,1),td(Tr,1)]):L.current.rl=!1}if(ei&&ur[1]==="r"&&(bn<dn.left||L.current.lr)){var Ei=ye;Hi?Ei+=ht-St:Ei=ut.x-Ge.x-nn;var fo=Sr(Ei,Se),No=Sr(Ei,Se,Vt);fo>ke||fo===ke&&(!Dt||No>=Ze)?(L.current.lr=!0,ye=Ei,nn=-nn,ft.points=[td(ur,1),td(Tr,1)]):L.current.lr=!1}ca();var qi=Mt===!0?0:Mt;typeof qi=="number"&&(bn<Vt.left&&(ye-=bn-Vt.left-nn,Ie.x+St<Vt.left+qi&&(ye+=Ie.x-Vt.left+St-qi)),zn>Vt.right&&(ye-=zn-Vt.right-nn,Ie.x>Vt.right-qi&&(ye+=Ie.x-Vt.right+qi)));var Ki=kt===!0?0:kt;typeof Ki=="number"&&(vn<Vt.top&&(Se-=vn-Vt.top-Ut,Ie.y+je<Vt.top+Ki&&(Se+=Ie.y-Vt.top+je-Ki)),On>Vt.bottom&&(Se-=On-Vt.bottom-Ut,Ie.y>Vt.bottom-Ki&&(Se+=Ie.y-Vt.bottom+Ki)));var Ui=ze.x+ye,Wi=Ui+ht,yi=ze.y+Se,ki=yi+dt,ar=Ie.x,Xn=ar+St,$r=Ie.y,Jr=$r+je,Un=Math.max(Ui,ar),sr=Math.min(Wi,Xn),di=(Un+sr)/2,Pi=di-Ui,mi=Math.max(yi,$r),Gi=Math.min(ki,Jr),Xi=(mi+Gi)/2,yo=Xi-yi;p==null||p(t,ft);var Gn=hn.right-ze.x-(ye+ze.width),jn=hn.bottom-ze.y-(Se+ze.height);Pn===1&&(ye=Math.round(ye),Gn=Math.round(Gn)),Dn===1&&(Se=Math.round(Se),jn=Math.round(jn));var wr={ready:!0,offsetX:ye/Pn,offsetY:Se/Dn,offsetR:Gn/Pn,offsetB:jn/Dn,arrowX:Pi/Pn,arrowY:yo/Dn,scaleX:Pn,scaleY:Dn,align:ft};T(wr)}}),B=function(){M.current+=1;var W=M.current;Promise.resolve().then(function(){M.current===W&&V()})},j=function(){T(function(W){return We(We({},W),{},{ready:!1})})};return Xr(j,[r]),Xr(function(){e||j()},[e]),[S.ready,S.offsetX,S.offsetY,S.offsetR,S.offsetB,S.arrowX,S.arrowY,S.scaleX,S.scaleY,S.align,B]}function rne(e,t,n,r,s){Xr(function(){if(e&&t&&n){let $=function(){r(),s()};var M=$,d=t,p=n,i=MI(d),x=MI(p),S=Ry(p),T=new Set([S].concat(un(i),un(x)));return T.forEach(function(L){L.addEventListener("scroll",$,{passive:!0})}),S.addEventListener("resize",$,{passive:!0}),r(),function(){T.forEach(function(L){L.removeEventListener("scroll",$),S.removeEventListener("resize",$)})}}},[e,t,n])}function ine(e,t,n,r,s,d,p,i){var x=_.useRef(e);x.current=e;var S=_.useRef(!1);_.useEffect(function(){if(t&&r&&(!s||d)){var M=function(){S.current=!1},$=function(B){var j;x.current&&!p(((j=B.composedPath)===null||j===void 0||(j=j.call(B))===null||j===void 0?void 0:j[0])||B.target)&&!S.current&&i(!1)},L=Ry(r);L.addEventListener("pointerdown",M,!0),L.addEventListener("mousedown",$,!0),L.addEventListener("contextmenu",$,!0);var N=C1(n);return N&&(N.addEventListener("mousedown",$,!0),N.addEventListener("contextmenu",$,!0)),function(){L.removeEventListener("pointerdown",M,!0),L.removeEventListener("mousedown",$,!0),L.removeEventListener("contextmenu",$,!0),N&&(N.removeEventListener("mousedown",$,!0),N.removeEventListener("contextmenu",$,!0))}}},[t,n,r,s,d]);function T(){S.current=!0}return T}var one=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function ane(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Aw,t=_.forwardRef(function(n,r){var s=n.prefixCls,d=s===void 0?"rc-trigger-popup":s,p=n.children,i=n.action,x=i===void 0?"hover":i,S=n.showAction,T=n.hideAction,M=n.popupVisible,$=n.defaultPopupVisible,L=n.onPopupVisibleChange,N=n.afterPopupVisibleChange,V=n.mouseEnterDelay,B=n.mouseLeaveDelay,j=B===void 0?.1:B,H=n.focusDelay,W=n.blurDelay,X=n.mask,ee=n.maskClosable,J=ee===void 0?!0:ee,Y=n.getPopupContainer,re=n.forceRender,se=n.autoDestroy,ae=n.destroyPopupOnHide,ce=n.popup,Ce=n.popupClassName,we=n.popupStyle,ge=n.popupPlacement,ve=n.builtinPlacements,de=ve===void 0?{}:ve,pe=n.popupAlign,fe=n.zIndex,me=n.stretch,Ie=n.getPopupClassNameFromAlign,Me=n.fresh,Be=n.alignPoint,$e=n.onPopupClick,ze=n.onPopupAlign,Je=n.arrow,yt=n.popupMotion,at=n.maskMotion,gt=n.popupTransitionName,wt=n.popupAnimation,Pe=n.maskTransitionName,mt=n.maskAnimation,dt=n.className,ht=n.getTriggerDOMNode,je=Er(n,one),St=se||ae||!1,Ct=_.useState(!1),Lt=ot(Ct,2),At=Lt[0],Yt=Lt[1];Xr(function(){Yt(DP())},[]);var Kt=_.useRef({}),Dt=_.useContext(Bk),Wt=_.useMemo(function(){return{registerSubPopup:function(ln,gr){Kt.current[ln]=gr,Dt==null||Dt.registerSubPopup(ln,gr)}}},[Dt]),Vt=f5(),Rt=_.useState(null),dn=ot(Rt,2),hn=dn[0],Pn=dn[1],Dn=_.useRef(null),yn=Zr(function(dr){Dn.current=dr,X0(dr)&&hn!==dr&&Pn(dr),Dt==null||Dt.registerSubPopup(Vt,dr)}),Rn=_.useState(null),kn=ot(Rn,2),Cn=kn[0],nn=kn[1],Ut=_.useRef(null),cn=Zr(function(dr){X0(dr)&&Cn!==dr&&(nn(dr),Ut.current=dr)}),an=_.Children.only(p),Zt=(an==null?void 0:an.props)||{},Xt={},Hn=Zr(function(dr){var ln,gr,yr=Cn;return(yr==null?void 0:yr.contains(dr))||((ln=C1(yr))===null||ln===void 0?void 0:ln.host)===dr||dr===yr||(hn==null?void 0:hn.contains(dr))||((gr=C1(hn))===null||gr===void 0?void 0:gr.host)===dr||dr===hn||Object.values(Kt.current).some(function(hi){return(hi==null?void 0:hi.contains(dr))||dr===hi})}),br=Vk(d,yt,wt,gt),mr=Vk(d,at,mt,Pe),pr=_.useState($||!1),Tr=ot(pr,2),ur=Tr[0],Mr=Tr[1],tr=M??ur,ft=Zr(function(dr){M===void 0&&Mr(dr)});Xr(function(){Mr(M||!1)},[M]);var ye=_.useRef(tr);ye.current=tr;var Se=_.useRef([]);Se.current=[];var ke=Zr(function(dr){var ln;ft(dr),((ln=Se.current[Se.current.length-1])!==null&&ln!==void 0?ln:tr)!==dr&&(Se.current.push(dr),L==null||L(dr))}),Ze=_.useRef(),Ae=function(){clearTimeout(Ze.current)},Ge=function(ln){var gr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Ae(),gr===0?ke(ln):Ze.current=setTimeout(function(){ke(ln)},gr*1e3)};_.useEffect(function(){return Ae},[]);var ut=_.useState(!1),Qe=ot(ut,2),_t=Qe[0],It=Qe[1];Xr(function(dr){(!dr||tr)&&It(!0)},[tr]);var bt=_.useState(null),Mt=ot(bt,2),kt=Mt[0],Gt=Mt[1],vn=_.useState(null),On=ot(vn,2),bn=On[0],zn=On[1],Mn=function(ln){zn([ln.clientX,ln.clientY])},wn=nne(tr,hn,Be&&bn!==null?bn:Cn,ge,de,pe,ze),_n=ot(wn,11),rr=_n[0],or=_n[1],kr=_n[2],zr=_n[3],Hr=_n[4],ei=_n[5],Hi=_n[6],ir=_n[7],Ar=_n[8],Gr=_n[9],Ei=_n[10],fo=Qte(At,x,S,T),No=ot(fo,2),qi=No[0],Ki=No[1],Ui=qi.has("click"),Wi=Ki.has("click")||Ki.has("contextMenu"),yi=Zr(function(){_t||Ei()}),ki=function(){ye.current&&Be&&Wi&&Ge(!1)};rne(tr,Cn,hn,yi,ki),Xr(function(){yi()},[bn,ge]),Xr(function(){tr&&!(de!=null&&de[ge])&&yi()},[JSON.stringify(pe)]);var ar=_.useMemo(function(){var dr=tne(de,d,Gr,Be);return pt(dr,Ie==null?void 0:Ie(Gr))},[Gr,Ie,de,d,Be]);_.useImperativeHandle(r,function(){return{nativeElement:Ut.current,popupElement:Dn.current,forceAlign:yi}});var Xn=_.useState(0),$r=ot(Xn,2),Jr=$r[0],Un=$r[1],sr=_.useState(0),di=ot(sr,2),Pi=di[0],mi=di[1],Gi=function(){if(me&&Cn){var ln=Cn.getBoundingClientRect();Un(ln.width),mi(ln.height)}},Xi=function(){Gi(),yi()},yo=function(ln){It(!1),Ei(),N==null||N(ln)},Gn=function(){return new Promise(function(ln){Gi(),Gt(function(){return ln})})};Xr(function(){kt&&(Ei(),kt(),Gt(null))},[kt]);function jn(dr,ln,gr,yr){Xt[dr]=function(hi){var Mo;yr==null||yr(hi),Ge(ln,gr);for(var Ur=arguments.length,Ic=new Array(Ur>1?Ur-1:0),ws=1;ws<Ur;ws++)Ic[ws-1]=arguments[ws];(Mo=Zt[dr])===null||Mo===void 0||Mo.call.apply(Mo,[Zt,hi].concat(Ic))}}(Ui||Wi)&&(Xt.onClick=function(dr){var ln;ye.current&&Wi?Ge(!1):!ye.current&&Ui&&(Mn(dr),Ge(!0));for(var gr=arguments.length,yr=new Array(gr>1?gr-1:0),hi=1;hi<gr;hi++)yr[hi-1]=arguments[hi];(ln=Zt.onClick)===null||ln===void 0||ln.call.apply(ln,[Zt,dr].concat(yr))});var wr=ine(tr,Wi,Cn,hn,X,J,Hn,Ge),Jn=qi.has("hover"),ti=Ki.has("hover"),Sr,ca;Jn&&(jn("onMouseEnter",!0,V,function(dr){Mn(dr)}),jn("onPointerEnter",!0,V,function(dr){Mn(dr)}),Sr=function(ln){(tr||_t)&&hn!==null&&hn!==void 0&&hn.contains(ln.target)&&Ge(!0,V)},Be&&(Xt.onMouseMove=function(dr){var ln;(ln=Zt.onMouseMove)===null||ln===void 0||ln.call(Zt,dr)})),ti&&(jn("onMouseLeave",!1,j),jn("onPointerLeave",!1,j),ca=function(){Ge(!1,j)}),qi.has("focus")&&jn("onFocus",!0,H),Ki.has("focus")&&jn("onBlur",!1,W),qi.has("contextMenu")&&(Xt.onContextMenu=function(dr){var ln;ye.current&&Ki.has("contextMenu")?Ge(!1):(Mn(dr),Ge(!0)),dr.preventDefault();for(var gr=arguments.length,yr=new Array(gr>1?gr-1:0),hi=1;hi<gr;hi++)yr[hi-1]=arguments[hi];(ln=Zt.onContextMenu)===null||ln===void 0||ln.call.apply(ln,[Zt,dr].concat(yr))}),dt&&(Xt.className=pt(Zt.className,dt));var Zn=We(We({},Zt),Xt),Fo={},Xo=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Xo.forEach(function(dr){je[dr]&&(Fo[dr]=function(){for(var ln,gr=arguments.length,yr=new Array(gr),hi=0;hi<gr;hi++)yr[hi]=arguments[hi];(ln=Zn[dr])===null||ln===void 0||ln.call.apply(ln,[Zn].concat(yr)),je[dr].apply(je,yr)})});var bs=_.cloneElement(an,We(We({},Zn),Fo)),ua={x:ei,y:Hi},ec=Je?We({},Je!==!0?Je:{}):null;return _.createElement(_.Fragment,null,_.createElement(ga,{disabled:!tr,ref:cn,onResize:Xi},_.createElement(Jte,{getTriggerDOMNode:ht},bs)),_.createElement(Bk.Provider,{value:Wt},_.createElement(Yte,{portal:e,ref:yn,prefixCls:d,popup:ce,className:pt(Ce,ar),style:we,target:Cn,onMouseEnter:Sr,onMouseLeave:ca,onPointerEnter:Sr,zIndex:fe,open:tr,keepDom:_t,fresh:Me,onClick:$e,onPointerDownCapture:wr,mask:X,motion:br,maskMotion:mr,onVisibleChanged:yo,onPrepare:Gn,forceRender:re,autoDestroy:St,getPopupContainer:Y,align:Gr,arrow:ec,arrowPos:ua,ready:rr,offsetX:or,offsetY:kr,offsetR:zr,offsetB:Hr,onAlign:yi,stretch:me,targetWidth:Jr/ir,targetHeight:Pi/Ar})))});return t}const Oy=ane(Aw);var sne=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],lne=function(t){var n=t===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"}}},cne=function(t,n){var r=t.prefixCls;t.disabled;var s=t.visible,d=t.children,p=t.popupElement,i=t.animation,x=t.transitionName,S=t.dropdownStyle,T=t.dropdownClassName,M=t.direction,$=M===void 0?"ltr":M,L=t.placement,N=t.builtinPlacements,V=t.dropdownMatchSelectWidth,B=t.dropdownRender,j=t.dropdownAlign,H=t.getPopupContainer,W=t.empty,X=t.getTriggerDOMNode,ee=t.onPopupVisibleChange,J=t.onPopupMouseEnter,Y=Er(t,sne),re="".concat(r,"-dropdown"),se=p;B&&(se=B(p));var ae=_.useMemo(function(){return N||lne(V)},[N,V]),ce=i?"".concat(re,"-").concat(i):x,Ce=typeof V=="number",we=_.useMemo(function(){return Ce?null:V===!1?"minWidth":"width"},[V,Ce]),ge=S;Ce&&(ge=We(We({},ge),{},{width:V}));var ve=_.useRef(null);return _.useImperativeHandle(n,function(){return{getPopupElement:function(){var pe;return(pe=ve.current)===null||pe===void 0?void 0:pe.popupElement}}}),_.createElement(Oy,qt({},Y,{showAction:ee?["click"]:[],hideAction:ee?["click"]:[],popupPlacement:L||($==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:ae,prefixCls:re,popupTransitionName:ce,popup:_.createElement("div",{onMouseEnter:J},se),ref:ve,stretch:we,popupAlign:j,popupVisible:s,getPopupContainer:H,popupClassName:pt(T,De({},"".concat(re,"-empty"),W)),popupStyle:ge,getTriggerDOMNode:X,onPopupVisibleChange:ee}),d)},une=_.forwardRef(cne);function qk(e,t){var n=e.key,r;return"value"in e&&(r=e.value),n??(r!==void 0?r:"rc-index-key-".concat(t))}function PI(e){return typeof e<"u"&&!Number.isNaN(e)}function Z5(e,t){var n=e||{},r=n.label,s=n.value,d=n.options,p=n.groupLabel,i=r||(t?"children":"label");return{label:i,value:s||"value",options:d||"options",groupLabel:p||i}}function dne(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.fieldNames,r=t.childrenAsData,s=[],d=Z5(n,!1),p=d.label,i=d.value,x=d.options,S=d.groupLabel;function T(M,$){Array.isArray(M)&&M.forEach(function(L){if($||!(x in L)){var N=L[i];s.push({key:qk(L,s.length),groupOption:$,data:L,label:L[p],value:N})}else{var V=L[S];V===void 0&&r&&(V=L.label),s.push({key:qk(L,s.length),group:!0,data:L,label:V}),T(L[x],!0)}})}return T(e,!1),s}function RI(e){var t=We({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return go(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),t}}),t}var hne=function(t,n,r){if(!n||!n.length)return null;var s=!1,d=function i(x,S){var T=aB(S),M=T[0],$=T.slice(1);if(!M)return[x];var L=x.split(M);return s=s||L.length>1,L.reduce(function(N,V){return[].concat(un(N),un(i(V,$)))},[]).filter(Boolean)},p=d(t,n);return s?typeof r<"u"?p.slice(0,r):p:null},$P=_.createContext(null);function fne(e){var t=e.visible,n=e.values;if(!t)return null;var r=50;return _.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(n.slice(0,r).map(function(s){var d=s.label,p=s.value;return["number","string"].includes(cr(d))?d:p}).join(", ")),n.length>r?", ...":null)}var pne=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","prefix","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],mne=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],OI=function(t){return t==="tags"||t==="multiple"},gne=_.forwardRef(function(e,t){var n,r=e.id,s=e.prefixCls,d=e.className,p=e.showSearch,i=e.tagRender,x=e.direction,S=e.omitDomProps,T=e.displayValues,M=e.onDisplayValuesChange,$=e.emptyOptions,L=e.notFoundContent,N=L===void 0?"Not Found":L,V=e.onClear,B=e.mode,j=e.disabled,H=e.loading,W=e.getInputElement,X=e.getRawInputElement,ee=e.open,J=e.defaultOpen,Y=e.onDropdownVisibleChange,re=e.activeValue,se=e.onActiveValueChange,ae=e.activeDescendantId,ce=e.searchValue,Ce=e.autoClearSearchValue,we=e.onSearch,ge=e.onSearchSplit,ve=e.tokenSeparators,de=e.allowClear,pe=e.prefix,fe=e.suffixIcon,me=e.clearIcon,Ie=e.OptionList,Me=e.animation,Be=e.transitionName,$e=e.dropdownStyle,ze=e.dropdownClassName,Je=e.dropdownMatchSelectWidth,yt=e.dropdownRender,at=e.dropdownAlign,gt=e.placement,wt=e.builtinPlacements,Pe=e.getPopupContainer,mt=e.showAction,dt=mt===void 0?[]:mt,ht=e.onFocus,je=e.onBlur,St=e.onKeyUp,Ct=e.onKeyDown,Lt=e.onMouseDown,At=Er(e,pne),Yt=OI(B),Kt=(p!==void 0?p:Yt)||B==="combobox",Dt=We({},At);mne.forEach(function(ar){delete Dt[ar]}),S==null||S.forEach(function(ar){delete Dt[ar]});var Wt=_.useState(!1),Vt=ot(Wt,2),Rt=Vt[0],dn=Vt[1];_.useEffect(function(){dn(DP())},[]);var hn=_.useRef(null),Pn=_.useRef(null),Dn=_.useRef(null),yn=_.useRef(null),Rn=_.useRef(null),kn=_.useRef(!1),Cn=Ste(),nn=ot(Cn,3),Ut=nn[0],cn=nn[1],an=nn[2];_.useImperativeHandle(t,function(){var ar,Xn;return{focus:(ar=yn.current)===null||ar===void 0?void 0:ar.focus,blur:(Xn=yn.current)===null||Xn===void 0?void 0:Xn.blur,scrollTo:function(Jr){var Un;return(Un=Rn.current)===null||Un===void 0?void 0:Un.scrollTo(Jr)},nativeElement:hn.current||Pn.current}});var Zt=_.useMemo(function(){var ar;if(B!=="combobox")return ce;var Xn=(ar=T[0])===null||ar===void 0?void 0:ar.value;return typeof Xn=="string"||typeof Xn=="number"?String(Xn):""},[ce,B,T]),Xt=B==="combobox"&&typeof W=="function"&&W()||null,Hn=typeof X=="function"&&X(),br=lu(Pn,Hn==null||(n=Hn.props)===null||n===void 0?void 0:n.ref),mr=_.useState(!1),pr=ot(mr,2),Tr=pr[0],ur=pr[1];Xr(function(){ur(!0)},[]);var Mr=Bi(!1,{defaultValue:J,value:ee}),tr=ot(Mr,2),ft=tr[0],ye=tr[1],Se=Tr?ft:!1,ke=!N&&$;(j||ke&&Se&&B==="combobox")&&(Se=!1);var Ze=ke?!1:Se,Ae=_.useCallback(function(ar){var Xn=ar!==void 0?ar:!Se;j||(ye(Xn),Se!==Xn&&(Y==null||Y(Xn)))},[j,Se,ye,Y]),Ge=_.useMemo(function(){return(ve||[]).some(function(ar){return[`
`,`\r
`].includes(ar)})},[ve]),ut=_.useContext($P)||{},Qe=ut.maxCount,_t=ut.rawValues,It=function(Xn,$r,Jr){if(!(Yt&&PI(Qe)&&(_t==null?void 0:_t.size)>=Qe)){var Un=!0,sr=Xn;se==null||se(null);var di=hne(Xn,ve,PI(Qe)?Qe-_t.size:void 0),Pi=Jr?null:di;return B!=="combobox"&&Pi&&(sr="",ge==null||ge(Pi),Ae(!1),Un=!1),we&&Zt!==sr&&we(sr,{source:$r?"typing":"effect"}),Un}},bt=function(Xn){!Xn||!Xn.trim()||we(Xn,{source:"submit"})};_.useEffect(function(){!Se&&!Yt&&B!=="combobox"&&It("",!1,!1)},[Se]),_.useEffect(function(){ft&&j&&ye(!1),j&&!kn.current&&cn(!1)},[j]);var Mt=H5(),kt=ot(Mt,2),Gt=kt[0],vn=kt[1],On=_.useRef(!1),bn=function(Xn){var $r=Gt(),Jr=Xn.key,Un=Jr==="Enter";if(Un&&(B!=="combobox"&&Xn.preventDefault(),Se||Ae(!0)),vn(!!Zt),Jr==="Backspace"&&!$r&&Yt&&!Zt&&T.length){for(var sr=un(T),di=null,Pi=sr.length-1;Pi>=0;Pi-=1){var mi=sr[Pi];if(!mi.disabled){sr.splice(Pi,1),di=mi;break}}di&&M(sr,{type:"remove",values:[di]})}for(var Gi=arguments.length,Xi=new Array(Gi>1?Gi-1:0),yo=1;yo<Gi;yo++)Xi[yo-1]=arguments[yo];if(Se&&(!Un||!On.current)){var Gn;(Gn=Rn.current)===null||Gn===void 0||Gn.onKeyDown.apply(Gn,[Xn].concat(Xi))}Un&&(On.current=!0),Ct==null||Ct.apply(void 0,[Xn].concat(Xi))},zn=function(Xn){for(var $r=arguments.length,Jr=new Array($r>1?$r-1:0),Un=1;Un<$r;Un++)Jr[Un-1]=arguments[Un];if(Se){var sr;(sr=Rn.current)===null||sr===void 0||sr.onKeyUp.apply(sr,[Xn].concat(Jr))}Xn.key==="Enter"&&(On.current=!1),St==null||St.apply(void 0,[Xn].concat(Jr))},Mn=function(Xn){var $r=T.filter(function(Jr){return Jr!==Xn});M($r,{type:"remove",values:[Xn]})},wn=_.useRef(!1),_n=function(){cn(!0),j||(ht&&!wn.current&&ht.apply(void 0,arguments),dt.includes("focus")&&Ae(!0)),wn.current=!0},rr=function(){kn.current=!0,cn(!1,function(){wn.current=!1,kn.current=!1,Ae(!1)}),!j&&(Zt&&(B==="tags"?we(Zt,{source:"submit"}):B==="multiple"&&we("",{source:"blur"})),je&&je.apply(void 0,arguments))},or=[];_.useEffect(function(){return function(){or.forEach(function(ar){return clearTimeout(ar)}),or.splice(0,or.length)}},[]);var kr=function(Xn){var $r,Jr=Xn.target,Un=($r=Dn.current)===null||$r===void 0?void 0:$r.getPopupElement();if(Un&&Un.contains(Jr)){var sr=setTimeout(function(){var Gi=or.indexOf(sr);if(Gi!==-1&&or.splice(Gi,1),an(),!Rt&&!Un.contains(document.activeElement)){var Xi;(Xi=yn.current)===null||Xi===void 0||Xi.focus()}});or.push(sr)}for(var di=arguments.length,Pi=new Array(di>1?di-1:0),mi=1;mi<di;mi++)Pi[mi-1]=arguments[mi];Lt==null||Lt.apply(void 0,[Xn].concat(Pi))},zr=_.useState({}),Hr=ot(zr,2),ei=Hr[1];function Hi(){ei({})}var ir;Hn&&(ir=function(Xn){Ae(Xn)}),Cte(function(){var ar;return[hn.current,(ar=Dn.current)===null||ar===void 0?void 0:ar.getPopupElement()]},Ze,Ae,!!Hn);var Ar=_.useMemo(function(){return We(We({},e),{},{notFoundContent:N,open:Se,triggerOpen:Ze,id:r,showSearch:Kt,multiple:Yt,toggleOpen:Ae})},[e,N,Ze,Se,r,Kt,Yt,Ae]),Gr=!!fe||H,Ei;Gr&&(Ei=_.createElement(kw,{className:pt("".concat(s,"-arrow"),De({},"".concat(s,"-arrow-loading"),H)),customizeIcon:fe,customizeIconProps:{loading:H,searchValue:Zt,open:Se,focused:Ut,showSearch:Kt}}));var fo=function(){var Xn;V==null||V(),(Xn=yn.current)===null||Xn===void 0||Xn.focus(),M([],{type:"clear",values:T}),It("",!1,!1)},No=bte(s,fo,T,de,me,j,Zt,B),qi=No.allowClear,Ki=No.clearIcon,Ui=_.createElement(Ie,{ref:Rn}),Wi=pt(s,d,De(De(De(De(De(De(De(De(De(De({},"".concat(s,"-focused"),Ut),"".concat(s,"-multiple"),Yt),"".concat(s,"-single"),!Yt),"".concat(s,"-allow-clear"),de),"".concat(s,"-show-arrow"),Gr),"".concat(s,"-disabled"),j),"".concat(s,"-loading"),H),"".concat(s,"-open"),Se),"".concat(s,"-customize-input"),Xt),"".concat(s,"-show-search"),Kt)),yi=_.createElement(une,{ref:Dn,disabled:j,prefixCls:s,visible:Ze,popupElement:Ui,animation:Me,transitionName:Be,dropdownStyle:$e,dropdownClassName:ze,direction:x,dropdownMatchSelectWidth:Je,dropdownRender:yt,dropdownAlign:at,placement:gt,builtinPlacements:wt,getPopupContainer:Pe,empty:$,getTriggerDOMNode:function(Xn){return Pn.current||Xn},onPopupVisibleChange:ir,onPopupMouseEnter:Hi},Hn?_.cloneElement(Hn,{ref:br}):_.createElement(qte,qt({},e,{domRef:Pn,prefixCls:s,inputElement:Xt,ref:yn,id:r,prefix:pe,showSearch:Kt,autoClearSearchValue:Ce,mode:B,activeDescendantId:ae,tagRender:i,values:T,open:Se,onToggleOpen:Ae,activeValue:re,searchValue:Zt,onSearch:It,onSearchSubmit:bt,onRemove:Mn,tokenWithEnter:Ge}))),ki;return Hn?ki=yi:ki=_.createElement("div",qt({className:Wi},Dt,{ref:hn,onMouseDown:kr,onKeyDown:bn,onKeyUp:zn,onFocus:_n,onBlur:rr}),_.createElement(fne,{visible:Ut&&!Se,values:T}),yi,Ei,qi&&Ki),_.createElement(V5.Provider,{value:Ar},ki)}),kP=function(){return null};kP.isSelectOptGroup=!0;var zP=function(){return null};zP.isSelectOption=!0;var Y5=_.forwardRef(function(e,t){var n=e.height,r=e.offsetY,s=e.offsetX,d=e.children,p=e.prefixCls,i=e.onInnerResize,x=e.innerProps,S=e.rtl,T=e.extra,M={},$={display:"flex",flexDirection:"column"};return r!==void 0&&(M={height:n,position:"relative",overflow:"hidden"},$=We(We({},$),{},De(De(De(De(De({transform:"translateY(".concat(r,"px)")},S?"marginRight":"marginLeft",-s),"position","absolute"),"left",0),"right",0),"top",0))),_.createElement("div",{style:M},_.createElement(ga,{onResize:function(N){var V=N.offsetHeight;V&&i&&i()}},_.createElement("div",qt({style:$,className:pt(De({},"".concat(p,"-holder-inner"),p)),ref:t},x),d,T)))});Y5.displayName="Filler";function vne(e){var t=e.children,n=e.setRef,r=_.useCallback(function(s){n(s)},[]);return _.cloneElement(t,{ref:r})}function yne(e,t,n,r,s,d,p,i){var x=i.getKey;return e.slice(t,n+1).map(function(S,T){var M=t+T,$=p(S,M,{style:{width:r},offsetX:s}),L=x(S);return _.createElement(vne,{key:L,setRef:function(V){return d(S,V)}},$)})}function _ne(e,t,n){var r=e.length,s=t.length,d,p;if(r===0&&s===0)return null;r<s?(d=e,p=t):(d=t,p=e);var i={__EMPTY_ITEM__:!0};function x(N){return N!==void 0?n(N):i}for(var S=null,T=Math.abs(r-s)!==1,M=0;M<p.length;M+=1){var $=x(d[M]),L=x(p[M]);if($!==L){S=M,T=T||$!==x(p[M+1]);break}}return S===null?null:{index:S,multiple:T}}function xne(e,t,n){var r=_.useState(e),s=ot(r,2),d=s[0],p=s[1],i=_.useState(null),x=ot(i,2),S=x[0],T=x[1];return _.useEffect(function(){var M=_ne(d||[],e||[],t);(M==null?void 0:M.index)!==void 0&&T(e[M.index]),p(e)},[e]),[S]}var Kk=(typeof navigator>"u"?"undefined":cr(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const J5=function(e,t,n,r){var s=_.useRef(!1),d=_.useRef(null);function p(){clearTimeout(d.current),s.current=!0,d.current=setTimeout(function(){s.current=!1},50)}var i=_.useRef({top:e,bottom:t,left:n,right:r});return i.current.top=e,i.current.bottom=t,i.current.left=n,i.current.right=r,function(x,S){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,M=x?S<0&&i.current.left||S>0&&i.current.right:S<0&&i.current.top||S>0&&i.current.bottom;return T&&M?(clearTimeout(d.current),s.current=!1):(!M||s.current)&&p(),!s.current&&M}};function bne(e,t,n,r,s,d,p){var i=_.useRef(0),x=_.useRef(null),S=_.useRef(null),T=_.useRef(!1),M=J5(t,n,r,s);function $(H,W){if(ui.cancel(x.current),!M(!1,W)){var X=H;if(!X._virtualHandled)X._virtualHandled=!0;else return;i.current+=W,S.current=W,Kk||X.preventDefault(),x.current=ui(function(){var ee=T.current?10:1;p(i.current*ee,!1),i.current=0})}}function L(H,W){p(W,!0),Kk||H.preventDefault()}var N=_.useRef(null),V=_.useRef(null);function B(H){if(e){ui.cancel(V.current),V.current=ui(function(){N.current=null},2);var W=H.deltaX,X=H.deltaY,ee=H.shiftKey,J=W,Y=X;(N.current==="sx"||!N.current&&ee&&X&&!W)&&(J=X,Y=0,N.current="sx");var re=Math.abs(J),se=Math.abs(Y);N.current===null&&(N.current=d&&re>se?"x":"y"),N.current==="y"?$(H,Y):L(H,J)}}function j(H){e&&(T.current=H.detail===S.current)}return[B,j]}function wne(e,t,n,r){var s=_.useMemo(function(){return[new Map,[]]},[e,n.id,r]),d=ot(s,2),p=d[0],i=d[1],x=function(T){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:T,$=p.get(T),L=p.get(M);if($===void 0||L===void 0)for(var N=e.length,V=i.length;V<N;V+=1){var B,j=e[V],H=t(j);p.set(H,V);var W=(B=n.get(H))!==null&&B!==void 0?B:r;if(i[V]=(i[V-1]||0)+W,H===T&&($=V),H===M&&(L=V),$!==void 0&&L!==void 0)break}return{top:i[$-1]||0,bottom:i[L]}};return x}var Sne=function(){function e(){zo(this,e),De(this,"maps",void 0),De(this,"id",0),this.maps=Object.create(null)}return Lo(e,[{key:"set",value:function(n,r){this.maps[n]=r,this.id+=1}},{key:"get",value:function(n){return this.maps[n]}}]),e}();function Xk(e){var t=parseFloat(e);return isNaN(t)?0:t}function Cne(e,t,n){var r=_.useState(0),s=ot(r,2),d=s[0],p=s[1],i=_.useRef(new Map),x=_.useRef(new Sne),S=_.useRef();function T(){ui.cancel(S.current)}function M(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;T();var N=function(){i.current.forEach(function(B,j){if(B&&B.offsetParent){var H=b0(B),W=H.offsetHeight,X=getComputedStyle(H),ee=X.marginTop,J=X.marginBottom,Y=Xk(ee),re=Xk(J),se=W+Y+re;x.current.get(j)!==se&&x.current.set(j,se)}}),p(function(B){return B+1})};L?N():S.current=ui(N)}function $(L,N){var V=e(L);i.current.get(V),N?(i.current.set(V,N),M()):i.current.delete(V)}return _.useEffect(function(){return T},[]),[$,M,x.current,d]}var Zk=14/15;function Ene(e,t,n){var r=_.useRef(!1),s=_.useRef(0),d=_.useRef(0),p=_.useRef(null),i=_.useRef(null),x,S=function(L){if(r.current){var N=Math.ceil(L.touches[0].pageX),V=Math.ceil(L.touches[0].pageY),B=s.current-N,j=d.current-V,H=Math.abs(B)>Math.abs(j);H?s.current=N:d.current=V;var W=n(H,H?B:j,!1,L);W&&L.preventDefault(),clearInterval(i.current),W&&(i.current=setInterval(function(){H?B*=Zk:j*=Zk;var X=Math.floor(H?B:j);(!n(H,X,!0)||Math.abs(X)<=.1)&&clearInterval(i.current)},16))}},T=function(){r.current=!1,x()},M=function(L){x(),L.touches.length===1&&!r.current&&(r.current=!0,s.current=Math.ceil(L.touches[0].pageX),d.current=Math.ceil(L.touches[0].pageY),p.current=L.target,p.current.addEventListener("touchmove",S,{passive:!1}),p.current.addEventListener("touchend",T,{passive:!0}))};x=function(){p.current&&(p.current.removeEventListener("touchmove",S),p.current.removeEventListener("touchend",T))},Xr(function(){return e&&t.current.addEventListener("touchstart",M,{passive:!0}),function(){var $;($=t.current)===null||$===void 0||$.removeEventListener("touchstart",M),x(),clearInterval(i.current)}},[e])}var Tne=10;function Ine(e,t,n,r,s,d,p,i){var x=_.useRef(),S=_.useState(null),T=ot(S,2),M=T[0],$=T[1];return Xr(function(){if(M&&M.times<Tne){if(!e.current){$(function(me){return We({},me)});return}d();var L=M.targetAlign,N=M.originAlign,V=M.index,B=M.offset,j=e.current.clientHeight,H=!1,W=L,X=null;if(j){for(var ee=L||N,J=0,Y=0,re=0,se=Math.min(t.length-1,V),ae=0;ae<=se;ae+=1){var ce=s(t[ae]);Y=J;var Ce=n.get(ce);re=Y+(Ce===void 0?r:Ce),J=re}for(var we=ee==="top"?B:j-B,ge=se;ge>=0;ge-=1){var ve=s(t[ge]),de=n.get(ve);if(de===void 0){H=!0;break}if(we-=de,we<=0)break}switch(ee){case"top":X=Y-B;break;case"bottom":X=re-j+B;break;default:{var pe=e.current.scrollTop,fe=pe+j;Y<pe?W="top":re>fe&&(W="bottom")}}X!==null&&p(X),X!==M.lastTop&&(H=!0)}H&&$(We(We({},M),{},{times:M.times+1,targetAlign:W,lastTop:X}))}},[M,e.current]),function(L){if(L==null){i();return}if(ui.cancel(x.current),typeof L=="number")p(L);else if(L&&cr(L)==="object"){var N,V=L.align;"index"in L?N=L.index:N=t.findIndex(function(H){return s(H)===L.key});var B=L.offset,j=B===void 0?0:B;$({times:0,index:N,offset:j,originAlign:V})}}}function Yk(e,t){var n="touches"in e?e.touches[0]:e;return n[t?"pageX":"pageY"]}var Jk=_.forwardRef(function(e,t){var n=e.prefixCls,r=e.rtl,s=e.scrollOffset,d=e.scrollRange,p=e.onStartMove,i=e.onStopMove,x=e.onScroll,S=e.horizontal,T=e.spinSize,M=e.containerSize,$=e.style,L=e.thumbStyle,N=_.useState(!1),V=ot(N,2),B=V[0],j=V[1],H=_.useState(null),W=ot(H,2),X=W[0],ee=W[1],J=_.useState(null),Y=ot(J,2),re=Y[0],se=Y[1],ae=!r,ce=_.useRef(),Ce=_.useRef(),we=_.useState(!1),ge=ot(we,2),ve=ge[0],de=ge[1],pe=_.useRef(),fe=function(){clearTimeout(pe.current),de(!0),pe.current=setTimeout(function(){de(!1)},3e3)},me=d-M||0,Ie=M-T||0,Me=_.useMemo(function(){if(s===0||me===0)return 0;var Pe=s/me;return Pe*Ie},[s,me,Ie]),Be=function(mt){mt.stopPropagation(),mt.preventDefault()},$e=_.useRef({top:Me,dragging:B,pageY:X,startTop:re});$e.current={top:Me,dragging:B,pageY:X,startTop:re};var ze=function(mt){j(!0),ee(Yk(mt,S)),se($e.current.top),p(),mt.stopPropagation(),mt.preventDefault()};_.useEffect(function(){var Pe=function(je){je.preventDefault()},mt=ce.current,dt=Ce.current;return mt.addEventListener("touchstart",Pe,{passive:!1}),dt.addEventListener("touchstart",ze,{passive:!1}),function(){mt.removeEventListener("touchstart",Pe),dt.removeEventListener("touchstart",ze)}},[]);var Je=_.useRef();Je.current=me;var yt=_.useRef();yt.current=Ie,_.useEffect(function(){if(B){var Pe,mt=function(je){var St=$e.current,Ct=St.dragging,Lt=St.pageY,At=St.startTop;ui.cancel(Pe);var Yt=ce.current.getBoundingClientRect(),Kt=M/(S?Yt.width:Yt.height);if(Ct){var Dt=(Yk(je,S)-Lt)*Kt,Wt=At;!ae&&S?Wt-=Dt:Wt+=Dt;var Vt=Je.current,Rt=yt.current,dn=Rt?Wt/Rt:0,hn=Math.ceil(dn*Vt);hn=Math.max(hn,0),hn=Math.min(hn,Vt),Pe=ui(function(){x(hn,S)})}},dt=function(){j(!1),i()};return window.addEventListener("mousemove",mt,{passive:!0}),window.addEventListener("touchmove",mt,{passive:!0}),window.addEventListener("mouseup",dt,{passive:!0}),window.addEventListener("touchend",dt,{passive:!0}),function(){window.removeEventListener("mousemove",mt),window.removeEventListener("touchmove",mt),window.removeEventListener("mouseup",dt),window.removeEventListener("touchend",dt),ui.cancel(Pe)}}},[B]),_.useEffect(function(){return fe(),function(){clearTimeout(pe.current)}},[s]),_.useImperativeHandle(t,function(){return{delayHidden:fe}});var at="".concat(n,"-scrollbar"),gt={position:"absolute",visibility:ve?null:"hidden"},wt={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return S?(gt.height=8,gt.left=0,gt.right=0,gt.bottom=0,wt.height="100%",wt.width=T,ae?wt.left=Me:wt.right=Me):(gt.width=8,gt.top=0,gt.bottom=0,ae?gt.right=0:gt.left=0,wt.width="100%",wt.height=T,wt.top=Me),_.createElement("div",{ref:ce,className:pt(at,De(De(De({},"".concat(at,"-horizontal"),S),"".concat(at,"-vertical"),!S),"".concat(at,"-visible"),ve)),style:We(We({},gt),$),onMouseDown:Be,onMouseMove:fe},_.createElement("div",{ref:Ce,className:pt("".concat(at,"-thumb"),De({},"".concat(at,"-thumb-moving"),B)),style:We(We({},wt),L),onMouseDown:ze}))}),Mne=20;function Qk(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=e/t*e;return isNaN(n)&&(n=0),n=Math.max(n,Mne),Math.floor(n)}var Pne=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],Rne=[],One={overflowY:"auto",overflowAnchor:"none"};function Ane(e,t){var n=e.prefixCls,r=n===void 0?"rc-virtual-list":n,s=e.className,d=e.height,p=e.itemHeight,i=e.fullHeight,x=i===void 0?!0:i,S=e.style,T=e.data,M=e.children,$=e.itemKey,L=e.virtual,N=e.direction,V=e.scrollWidth,B=e.component,j=B===void 0?"div":B,H=e.onScroll,W=e.onVirtualScroll,X=e.onVisibleChange,ee=e.innerProps,J=e.extraRender,Y=e.styles,re=Er(e,Pne),se=_.useCallback(function(Mn){return typeof $=="function"?$(Mn):Mn==null?void 0:Mn[$]},[$]),ae=Cne(se),ce=ot(ae,4),Ce=ce[0],we=ce[1],ge=ce[2],ve=ce[3],de=!!(L!==!1&&d&&p),pe=_.useMemo(function(){return Object.values(ge.maps).reduce(function(Mn,wn){return Mn+wn},0)},[ge.id,ge.maps]),fe=de&&T&&(Math.max(p*T.length,pe)>d||!!V),me=N==="rtl",Ie=pt(r,De({},"".concat(r,"-rtl"),me),s),Me=T||Rne,Be=_.useRef(),$e=_.useRef(),ze=_.useRef(),Je=_.useState(0),yt=ot(Je,2),at=yt[0],gt=yt[1],wt=_.useState(0),Pe=ot(wt,2),mt=Pe[0],dt=Pe[1],ht=_.useState(!1),je=ot(ht,2),St=je[0],Ct=je[1],Lt=function(){Ct(!0)},At=function(){Ct(!1)},Yt={getKey:se};function Kt(Mn){gt(function(wn){var _n;typeof Mn=="function"?_n=Mn(wn):_n=Mn;var rr=pr(_n);return Be.current.scrollTop=rr,rr})}var Dt=_.useRef({start:0,end:Me.length}),Wt=_.useRef(),Vt=xne(Me,se),Rt=ot(Vt,1),dn=Rt[0];Wt.current=dn;var hn=_.useMemo(function(){if(!de)return{scrollHeight:void 0,start:0,end:Me.length-1,offset:void 0};if(!fe){var Mn;return{scrollHeight:((Mn=$e.current)===null||Mn===void 0?void 0:Mn.offsetHeight)||0,start:0,end:Me.length-1,offset:void 0}}for(var wn=0,_n,rr,or,kr=Me.length,zr=0;zr<kr;zr+=1){var Hr=Me[zr],ei=se(Hr),Hi=ge.get(ei),ir=wn+(Hi===void 0?p:Hi);ir>=at&&_n===void 0&&(_n=zr,rr=wn),ir>at+d&&or===void 0&&(or=zr),wn=ir}return _n===void 0&&(_n=0,rr=0,or=Math.ceil(d/p)),or===void 0&&(or=Me.length-1),or=Math.min(or+1,Me.length-1),{scrollHeight:wn,start:_n,end:or,offset:rr}},[fe,de,at,Me,ve,d]),Pn=hn.scrollHeight,Dn=hn.start,yn=hn.end,Rn=hn.offset;Dt.current.start=Dn,Dt.current.end=yn;var kn=_.useState({width:0,height:d}),Cn=ot(kn,2),nn=Cn[0],Ut=Cn[1],cn=function(wn){Ut({width:wn.offsetWidth,height:wn.offsetHeight})},an=_.useRef(),Zt=_.useRef(),Xt=_.useMemo(function(){return Qk(nn.width,V)},[nn.width,V]),Hn=_.useMemo(function(){return Qk(nn.height,Pn)},[nn.height,Pn]),br=Pn-d,mr=_.useRef(br);mr.current=br;function pr(Mn){var wn=Mn;return Number.isNaN(mr.current)||(wn=Math.min(wn,mr.current)),wn=Math.max(wn,0),wn}var Tr=at<=0,ur=at>=br,Mr=mt<=0,tr=mt>=V,ft=J5(Tr,ur,Mr,tr),ye=function(){return{x:me?-mt:mt,y:at}},Se=_.useRef(ye()),ke=Zr(function(Mn){if(W){var wn=We(We({},ye()),Mn);(Se.current.x!==wn.x||Se.current.y!==wn.y)&&(W(wn),Se.current=wn)}});function Ze(Mn,wn){var _n=Mn;wn?(xc.flushSync(function(){dt(_n)}),ke()):Kt(_n)}function Ae(Mn){var wn=Mn.currentTarget.scrollTop;wn!==at&&Kt(wn),H==null||H(Mn),ke()}var Ge=function(wn){var _n=wn,rr=V?V-nn.width:0;return _n=Math.max(_n,0),_n=Math.min(_n,rr),_n},ut=Zr(function(Mn,wn){wn?(xc.flushSync(function(){dt(function(_n){var rr=_n+(me?-Mn:Mn);return Ge(rr)})}),ke()):Kt(function(_n){var rr=_n+Mn;return rr})}),Qe=bne(de,Tr,ur,Mr,tr,!!V,ut),_t=ot(Qe,2),It=_t[0],bt=_t[1];Ene(de,Be,function(Mn,wn,_n,rr){var or=rr;return ft(Mn,wn,_n)?!1:!or||!or._virtualHandled?(or&&(or._virtualHandled=!0),It({preventDefault:function(){},deltaX:Mn?wn:0,deltaY:Mn?0:wn}),!0):!1}),Xr(function(){function Mn(_n){var rr=Tr&&_n.detail<0,or=ur&&_n.detail>0;de&&!rr&&!or&&_n.preventDefault()}var wn=Be.current;return wn.addEventListener("wheel",It,{passive:!1}),wn.addEventListener("DOMMouseScroll",bt,{passive:!0}),wn.addEventListener("MozMousePixelScroll",Mn,{passive:!1}),function(){wn.removeEventListener("wheel",It),wn.removeEventListener("DOMMouseScroll",bt),wn.removeEventListener("MozMousePixelScroll",Mn)}},[de,Tr,ur]),Xr(function(){if(V){var Mn=Ge(mt);dt(Mn),ke({x:Mn})}},[nn.width,V]);var Mt=function(){var wn,_n;(wn=an.current)===null||wn===void 0||wn.delayHidden(),(_n=Zt.current)===null||_n===void 0||_n.delayHidden()},kt=Ine(Be,Me,ge,p,se,function(){return we(!0)},Kt,Mt);_.useImperativeHandle(t,function(){return{nativeElement:ze.current,getScrollInfo:ye,scrollTo:function(wn){function _n(rr){return rr&&cr(rr)==="object"&&("left"in rr||"top"in rr)}_n(wn)?(wn.left!==void 0&&dt(Ge(wn.left)),kt(wn.top)):kt(wn)}}}),Xr(function(){if(X){var Mn=Me.slice(Dn,yn+1);X(Mn,Me)}},[Dn,yn,Me]);var Gt=wne(Me,se,ge,p),vn=J==null?void 0:J({start:Dn,end:yn,virtual:fe,offsetX:mt,offsetY:Rn,rtl:me,getSize:Gt}),On=yne(Me,Dn,yn,V,mt,Ce,M,Yt),bn=null;d&&(bn=We(De({},x?"height":"maxHeight",d),One),de&&(bn.overflowY="hidden",V&&(bn.overflowX="hidden"),St&&(bn.pointerEvents="none")));var zn={};return me&&(zn.dir="rtl"),_.createElement("div",qt({ref:ze,style:We(We({},S),{},{position:"relative"}),className:Ie},zn,re),_.createElement(ga,{onResize:cn},_.createElement(j,{className:"".concat(r,"-holder"),style:bn,ref:Be,onScroll:Ae,onMouseEnter:Mt},_.createElement(Y5,{prefixCls:r,height:Pn,offsetX:mt,offsetY:Rn,scrollWidth:V,onInnerResize:we,ref:$e,innerProps:ee,rtl:me,extra:vn},On))),fe&&Pn>d&&_.createElement(Jk,{ref:an,prefixCls:r,scrollOffset:at,scrollRange:Pn,rtl:me,onScroll:Ze,onStartMove:Lt,onStopMove:At,spinSize:Hn,containerSize:nn.height,style:Y==null?void 0:Y.verticalScrollBar,thumbStyle:Y==null?void 0:Y.verticalScrollBarThumb}),fe&&V>nn.width&&_.createElement(Jk,{ref:Zt,prefixCls:r,scrollOffset:mt,scrollRange:V,rtl:me,onScroll:Ze,onStartMove:Lt,onStopMove:At,spinSize:Xt,containerSize:nn.width,horizontal:!0,style:Y==null?void 0:Y.horizontalScrollBar,thumbStyle:Y==null?void 0:Y.horizontalScrollBarThumb}))}var zw=_.forwardRef(Ane);zw.displayName="List";function Dne(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var $ne=["disabled","title","children","style","className"];function ez(e){return typeof e=="string"||typeof e=="number"}var kne=function(t,n){var r=wte(),s=r.prefixCls,d=r.id,p=r.open,i=r.multiple,x=r.mode,S=r.searchValue,T=r.toggleOpen,M=r.notFoundContent,$=r.onPopupScroll,L=_.useContext($P),N=L.maxCount,V=L.flattenOptions,B=L.onActiveValue,j=L.defaultActiveFirstOption,H=L.onSelect,W=L.menuItemSelectedIcon,X=L.rawValues,ee=L.fieldNames,J=L.virtual,Y=L.direction,re=L.listHeight,se=L.listItemHeight,ae=L.optionRender,ce="".concat(s,"-item"),Ce=af(function(){return V},[p,V],function(mt,dt){return dt[0]&&mt[1]!==dt[1]}),we=_.useRef(null),ge=_.useMemo(function(){return i&&PI(N)&&(X==null?void 0:X.size)>=N},[i,N,X==null?void 0:X.size]),ve=function(dt){dt.preventDefault()},de=function(dt){var ht;(ht=we.current)===null||ht===void 0||ht.scrollTo(typeof dt=="number"?{index:dt}:dt)},pe=function(dt){for(var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,je=Ce.length,St=0;St<je;St+=1){var Ct=(dt+St*ht+je)%je,Lt=Ce[Ct]||{},At=Lt.group,Yt=Lt.data;if(!At&&!(Yt!=null&&Yt.disabled)&&!ge)return Ct}return-1},fe=_.useState(function(){return pe(0)}),me=ot(fe,2),Ie=me[0],Me=me[1],Be=function(dt){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;Me(dt);var je={source:ht?"keyboard":"mouse"},St=Ce[dt];if(!St){B(null,-1,je);return}B(St.value,dt,je)};_.useEffect(function(){Be(j!==!1?pe(0):-1)},[Ce.length,S]);var $e=_.useCallback(function(mt){return x==="combobox"?!1:X.has(mt)},[x,un(X).toString(),X.size]),ze=_.useCallback(function(mt){return x==="combobox"?String(mt).toLowerCase()===S.toLowerCase():X.has(mt)},[x,S,un(X).toString(),X.size]);_.useEffect(function(){var mt=setTimeout(function(){if(!i&&p&&X.size===1){var ht=Array.from(X)[0],je=Ce.findIndex(function(St){var Ct=St.data;return Ct.value===ht});je!==-1&&(Be(je),de(je))}});if(p){var dt;(dt=we.current)===null||dt===void 0||dt.scrollTo(void 0)}return function(){return clearTimeout(mt)}},[p,S]);var Je=function(dt){dt!==void 0&&H(dt,{selected:!X.has(dt)}),i||T(!1)};if(_.useImperativeHandle(n,function(){return{onKeyDown:function(dt){var ht=dt.which,je=dt.ctrlKey;switch(ht){case gn.N:case gn.P:case gn.UP:case gn.DOWN:{var St=0;if(ht===gn.UP?St=-1:ht===gn.DOWN?St=1:Dne()&&je&&(ht===gn.N?St=1:ht===gn.P&&(St=-1)),St!==0){var Ct=pe(Ie+St,St);de(Ct),Be(Ct,!0)}break}case gn.TAB:case gn.ENTER:{var Lt,At=Ce[Ie];At&&!(At!=null&&(Lt=At.data)!==null&&Lt!==void 0&&Lt.disabled)&&!ge?Je(At.value):Je(void 0),p&&dt.preventDefault();break}case gn.ESC:T(!1),p&&dt.stopPropagation()}},onKeyUp:function(){},scrollTo:function(dt){de(dt)}}}),Ce.length===0)return _.createElement("div",{role:"listbox",id:"".concat(d,"_list"),className:"".concat(ce,"-empty"),onMouseDown:ve},M);var yt=Object.keys(ee).map(function(mt){return ee[mt]}),at=function(dt){return dt.label};function gt(mt,dt){var ht=mt.group;return{role:ht?"presentation":"option",id:"".concat(d,"_list_").concat(dt)}}var wt=function(dt){var ht=Ce[dt];if(!ht)return null;var je=ht.data||{},St=je.value,Ct=ht.group,Lt=Ko(je,!0),At=at(ht);return ht?_.createElement("div",qt({"aria-label":typeof At=="string"&&!Ct?At:null},Lt,{key:dt},gt(ht,dt),{"aria-selected":ze(St)}),St):null},Pe={role:"listbox",id:"".concat(d,"_list")};return _.createElement(_.Fragment,null,J&&_.createElement("div",qt({},Pe,{style:{height:0,width:0,overflow:"hidden"}}),wt(Ie-1),wt(Ie),wt(Ie+1)),_.createElement(zw,{itemKey:"key",ref:we,data:Ce,height:re,itemHeight:se,fullHeight:!1,onMouseDown:ve,onScroll:$,virtual:J,direction:Y,innerProps:J?null:Pe},function(mt,dt){var ht=mt.group,je=mt.groupOption,St=mt.data,Ct=mt.label,Lt=mt.value,At=St.key;if(ht){var Yt,Kt=(Yt=St.title)!==null&&Yt!==void 0?Yt:ez(Ct)?Ct.toString():void 0;return _.createElement("div",{className:pt(ce,"".concat(ce,"-group"),St.className),title:Kt},Ct!==void 0?Ct:At)}var Dt=St.disabled,Wt=St.title;St.children;var Vt=St.style,Rt=St.className,dn=Er(St,$ne),hn=vo(dn,yt),Pn=$e(Lt),Dn=Dt||!Pn&&ge,yn="".concat(ce,"-option"),Rn=pt(ce,yn,Rt,De(De(De(De({},"".concat(yn,"-grouped"),je),"".concat(yn,"-active"),Ie===dt&&!Dn),"".concat(yn,"-disabled"),Dn),"".concat(yn,"-selected"),Pn)),kn=at(mt),Cn=!W||typeof W=="function"||Pn,nn=typeof kn=="number"?kn:kn||Lt,Ut=ez(nn)?nn.toString():void 0;return Wt!==void 0&&(Ut=Wt),_.createElement("div",qt({},Ko(hn),J?{}:gt(mt,dt),{"aria-selected":ze(Lt),className:Rn,title:Ut,onMouseMove:function(){Ie===dt||Dn||Be(dt)},onClick:function(){Dn||Je(Lt)},style:Vt}),_.createElement("div",{className:"".concat(yn,"-content")},typeof ae=="function"?ae(mt,{index:dt}):nn),_.isValidElement(W)||Pn,Cn&&_.createElement(kw,{className:"".concat(ce,"-option-state"),customizeIcon:W,customizeIconProps:{value:Lt,disabled:Dn,isSelected:Pn}},Pn?"✓":null))}))},zne=_.forwardRef(kne);const Lne=function(e,t){var n=_.useRef({values:new Map,options:new Map}),r=_.useMemo(function(){var d=n.current,p=d.values,i=d.options,x=e.map(function(M){if(M.label===void 0){var $;return We(We({},M),{},{label:($=p.get(M.value))===null||$===void 0?void 0:$.label})}return M}),S=new Map,T=new Map;return x.forEach(function(M){S.set(M.value,M),T.set(M.value,t.get(M.value)||i.get(M.value))}),n.current.values=S,n.current.options=T,x},[e,t]),s=_.useCallback(function(d){return t.get(d)||n.current.options.get(d)},[t]);return[r,s]};function eE(e,t){return K5(e).join("").toUpperCase().includes(t)}const Nne=function(e,t,n,r,s){return _.useMemo(function(){if(!n||r===!1)return e;var d=t.options,p=t.label,i=t.value,x=[],S=typeof r=="function",T=n.toUpperCase(),M=S?r:function(L,N){return s?eE(N[s],T):N[d]?eE(N[p!=="children"?p:"label"],T):eE(N[i],T)},$=S?function(L){return RI(L)}:function(L){return L};return e.forEach(function(L){if(L[d]){var N=M(n,$(L));if(N)x.push(L);else{var V=L[d].filter(function(B){return M(n,$(B))});V.length&&x.push(We(We({},L),{},De({},d,V)))}return}M(n,$(L))&&x.push(L)}),x},[e,r,s,n,t])};var tz=0,Fne=Ma();function Bne(){var e;return Fne?(e=tz,tz+=1):e="TEST_OR_SSR",e}function jne(e){var t=_.useState(),n=ot(t,2),r=n[0],s=n[1];return _.useEffect(function(){s("rc_select_".concat(Bne()))},[]),e||r}var Vne=["children","value"],Hne=["children"];function Une(e){var t=e,n=t.key,r=t.props,s=r.children,d=r.value,p=Er(r,Vne);return We({key:n,value:d!==void 0?d:n,children:s},p)}function Q5(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Ha(e).map(function(n,r){if(!_.isValidElement(n)||!n.type)return null;var s=n,d=s.type.isSelectOptGroup,p=s.key,i=s.props,x=i.children,S=Er(i,Hne);return t||!d?Une(n):We(We({key:"__RC_SELECT_GRP__".concat(p===null?r:p,"__"),label:p},S),{},{options:Q5(x)})}).filter(function(n){return n})}var Wne=function(t,n,r,s,d){return _.useMemo(function(){var p=t,i=!t;i&&(p=Q5(n));var x=new Map,S=new Map,T=function(L,N,V){V&&typeof V=="string"&&L.set(N[V],N)},M=function $(L){for(var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,V=0;V<L.length;V+=1){var B=L[V];!B[r.options]||N?(x.set(B[r.value],B),T(S,B,r.label),T(S,B,s),T(S,B,d)):$(B[r.options],!0)}};return M(p),{options:p,valueOptions:x,labelOptions:S}},[t,n,r,s,d])};function nz(e){var t=_.useRef();t.current=e;var n=_.useCallback(function(){return t.current.apply(t,arguments)},[]);return n}var Gne=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],qne=["inputValue"];function Kne(e){return!e||cr(e)!=="object"}var Xne=_.forwardRef(function(e,t){var n=e.id,r=e.mode,s=e.prefixCls,d=s===void 0?"rc-select":s,p=e.backfill,i=e.fieldNames,x=e.inputValue,S=e.searchValue,T=e.onSearch,M=e.autoClearSearchValue,$=M===void 0?!0:M,L=e.onSelect,N=e.onDeselect,V=e.dropdownMatchSelectWidth,B=V===void 0?!0:V,j=e.filterOption,H=e.filterSort,W=e.optionFilterProp,X=e.optionLabelProp,ee=e.options,J=e.optionRender,Y=e.children,re=e.defaultActiveFirstOption,se=e.menuItemSelectedIcon,ae=e.virtual,ce=e.direction,Ce=e.listHeight,we=Ce===void 0?200:Ce,ge=e.listItemHeight,ve=ge===void 0?20:ge,de=e.labelRender,pe=e.value,fe=e.defaultValue,me=e.labelInValue,Ie=e.onChange,Me=e.maxCount,Be=Er(e,Gne),$e=jne(n),ze=OI(r),Je=!!(!ee&&Y),yt=_.useMemo(function(){return j===void 0&&r==="combobox"?!1:j},[j,r]),at=_.useMemo(function(){return Z5(i,Je)},[JSON.stringify(i),Je]),gt=Bi("",{value:S!==void 0?S:x,postState:function(Ge){return Ge||""}}),wt=ot(gt,2),Pe=wt[0],mt=wt[1],dt=Wne(ee,Y,at,W,X),ht=dt.valueOptions,je=dt.labelOptions,St=dt.options,Ct=_.useCallback(function(Ae){var Ge=K5(Ae);return Ge.map(function(ut){var Qe,_t,It,bt,Mt;if(Kne(ut))Qe=ut;else{var kt;It=ut.key,_t=ut.label,Qe=(kt=ut.value)!==null&&kt!==void 0?kt:It}var Gt=ht.get(Qe);if(Gt){var vn;_t===void 0&&(_t=Gt==null?void 0:Gt[X||at.label]),It===void 0&&(It=(vn=Gt==null?void 0:Gt.key)!==null&&vn!==void 0?vn:Qe),bt=Gt==null?void 0:Gt.disabled,Mt=Gt==null?void 0:Gt.title}return{label:_t,value:Qe,key:It,disabled:bt,title:Mt}})},[at,X,ht]),Lt=Bi(fe,{value:pe}),At=ot(Lt,2),Yt=At[0],Kt=At[1],Dt=_.useMemo(function(){var Ae,Ge=ze&&Yt===null?[]:Yt,ut=Ct(Ge);return r==="combobox"&&jte((Ae=ut[0])===null||Ae===void 0?void 0:Ae.value)?[]:ut},[Yt,Ct,r,ze]),Wt=Lne(Dt,ht),Vt=ot(Wt,2),Rt=Vt[0],dn=Vt[1],hn=_.useMemo(function(){if(!r&&Rt.length===1){var Ae=Rt[0];if(Ae.value===null&&(Ae.label===null||Ae.label===void 0))return[]}return Rt.map(function(Ge){var ut;return We(We({},Ge),{},{label:(ut=typeof de=="function"?de(Ge):Ge.label)!==null&&ut!==void 0?ut:Ge.value})})},[r,Rt,de]),Pn=_.useMemo(function(){return new Set(Rt.map(function(Ae){return Ae.value}))},[Rt]);_.useEffect(function(){if(r==="combobox"){var Ae,Ge=(Ae=Rt[0])===null||Ae===void 0?void 0:Ae.value;mt(Bte(Ge)?String(Ge):"")}},[Rt]);var Dn=nz(function(Ae,Ge){var ut=Ge??Ae;return De(De({},at.value,Ae),at.label,ut)}),yn=_.useMemo(function(){if(r!=="tags")return St;var Ae=un(St),Ge=function(Qe){return ht.has(Qe)};return un(Rt).sort(function(ut,Qe){return ut.value<Qe.value?-1:1}).forEach(function(ut){var Qe=ut.value;Ge(Qe)||Ae.push(Dn(Qe,ut.label))}),Ae},[Dn,St,ht,Rt,r]),Rn=Nne(yn,at,Pe,yt,W),kn=_.useMemo(function(){return r!=="tags"||!Pe||Rn.some(function(Ae){return Ae[W||"value"]===Pe})||Rn.some(function(Ae){return Ae[at.value]===Pe})?Rn:[Dn(Pe)].concat(un(Rn))},[Dn,W,r,Rn,Pe,at]),Cn=function Ae(Ge){var ut=un(Ge).sort(function(Qe,_t){return H(Qe,_t,{searchValue:Pe})});return ut.map(function(Qe){return Array.isArray(Qe.options)?We(We({},Qe),{},{options:Qe.options.length>0?Ae(Qe.options):Qe.options}):Qe})},nn=_.useMemo(function(){return H?Cn(kn):kn},[kn,H,Pe]),Ut=_.useMemo(function(){return dne(nn,{fieldNames:at,childrenAsData:Je})},[nn,at,Je]),cn=function(Ge){var ut=Ct(Ge);if(Kt(ut),Ie&&(ut.length!==Rt.length||ut.some(function(It,bt){var Mt;return((Mt=Rt[bt])===null||Mt===void 0?void 0:Mt.value)!==(It==null?void 0:It.value)}))){var Qe=me?ut:ut.map(function(It){return It.value}),_t=ut.map(function(It){return RI(dn(It.value))});Ie(ze?Qe:Qe[0],ze?_t:_t[0])}},an=_.useState(null),Zt=ot(an,2),Xt=Zt[0],Hn=Zt[1],br=_.useState(0),mr=ot(br,2),pr=mr[0],Tr=mr[1],ur=re!==void 0?re:r!=="combobox",Mr=_.useCallback(function(Ae,Ge){var ut=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Qe=ut.source,_t=Qe===void 0?"keyboard":Qe;Tr(Ge),p&&r==="combobox"&&Ae!==null&&_t==="keyboard"&&Hn(String(Ae))},[p,r]),tr=function(Ge,ut,Qe){var _t=function(){var Mn,wn=dn(Ge);return[me?{label:wn==null?void 0:wn[at.label],value:Ge,key:(Mn=wn==null?void 0:wn.key)!==null&&Mn!==void 0?Mn:Ge}:Ge,RI(wn)]};if(ut&&L){var It=_t(),bt=ot(It,2),Mt=bt[0],kt=bt[1];L(Mt,kt)}else if(!ut&&N&&Qe!=="clear"){var Gt=_t(),vn=ot(Gt,2),On=vn[0],bn=vn[1];N(On,bn)}},ft=nz(function(Ae,Ge){var ut,Qe=ze?Ge.selected:!0;Qe?ut=ze?[].concat(un(Rt),[Ae]):[Ae]:ut=Rt.filter(function(_t){return _t.value!==Ae}),cn(ut),tr(Ae,Qe),r==="combobox"?Hn(""):(!OI||$)&&(mt(""),Hn(""))}),ye=function(Ge,ut){cn(Ge);var Qe=ut.type,_t=ut.values;(Qe==="remove"||Qe==="clear")&&_t.forEach(function(It){tr(It.value,!1,Qe)})},Se=function(Ge,ut){if(mt(Ge),Hn(null),ut.source==="submit"){var Qe=(Ge||"").trim();if(Qe){var _t=Array.from(new Set([].concat(un(Pn),[Qe])));cn(_t),tr(Qe,!0),mt("")}return}ut.source!=="blur"&&(r==="combobox"&&cn(Ge),T==null||T(Ge))},ke=function(Ge){var ut=Ge;r!=="tags"&&(ut=Ge.map(function(_t){var It=je.get(_t);return It==null?void 0:It.value}).filter(function(_t){return _t!==void 0}));var Qe=Array.from(new Set([].concat(un(Pn),un(ut))));cn(Qe),Qe.forEach(function(_t){tr(_t,!0)})},Ze=_.useMemo(function(){var Ae=ae!==!1&&B!==!1;return We(We({},dt),{},{flattenOptions:Ut,onActiveValue:Mr,defaultActiveFirstOption:ur,onSelect:ft,menuItemSelectedIcon:se,rawValues:Pn,fieldNames:at,virtual:Ae,direction:ce,listHeight:we,listItemHeight:ve,childrenAsData:Je,maxCount:Me,optionRender:J})},[Me,dt,Ut,Mr,ur,ft,se,Pn,at,ae,B,ce,we,ve,Je,J]);return _.createElement($P.Provider,{value:Ze},_.createElement(gne,qt({},Be,{id:$e,prefixCls:d,ref:t,omitDomProps:qne,mode:r,displayValues:hn,onDisplayValuesChange:ye,direction:ce,searchValue:Pe,onSearch:Se,autoClearSearchValue:$,onSearchSplit:ke,dropdownMatchSelectWidth:B,OptionList:zne,emptyOptions:!Ut.length,activeValue:Xt,activeDescendantId:"".concat($e,"_list_").concat(pr)})))}),LP=Xne;LP.Option=zP;LP.OptGroup=kP;function vm(e,t,n){return pt({[`${e}-status-success`]:t==="success",[`${e}-status-warning`]:t==="warning",[`${e}-status-error`]:t==="error",[`${e}-status-validating`]:t==="validating",[`${e}-has-feedback`]:n})}const Dm=(e,t)=>t||e,Zne=()=>{const[,e]=Ra(),[t]=Zl("Empty"),r=new Ji(e.colorBgBase).toHsl().l<.5?{opacity:.65}:{};return _.createElement("svg",{style:r,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},_.createElement("title",null,(t==null?void 0:t.description)||"Empty"),_.createElement("g",{fill:"none",fillRule:"evenodd"},_.createElement("g",{transform:"translate(24 31.67)"},_.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),_.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),_.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),_.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),_.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),_.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),_.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},_.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),_.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},Yne=()=>{const[,e]=Ra(),[t]=Zl("Empty"),{colorFill:n,colorFillTertiary:r,colorFillQuaternary:s,colorBgContainer:d}=e,{borderColor:p,shadowColor:i,contentColor:x}=_.useMemo(()=>({borderColor:new Ji(n).onBackground(d).toHexShortString(),shadowColor:new Ji(r).onBackground(d).toHexShortString(),contentColor:new Ji(s).onBackground(d).toHexShortString()}),[n,r,s,d]);return _.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},_.createElement("title",null,(t==null?void 0:t.description)||"Empty"),_.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},_.createElement("ellipse",{fill:i,cx:"32",cy:"33",rx:"32",ry:"7"}),_.createElement("g",{fillRule:"nonzero",stroke:p},_.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),_.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:x}))))},Jne=e=>{const{componentCls:t,margin:n,marginXS:r,marginXL:s,fontSize:d,lineHeight:p}=e;return{[t]:{marginInline:r,fontSize:d,lineHeight:p,textAlign:"center",[`${t}-image`]:{height:e.emptyImgHeight,marginBottom:r,opacity:e.opacityImage,img:{height:"100%"},svg:{maxWidth:"100%",height:"100%",margin:"auto"}},[`${t}-description`]:{color:e.colorTextDescription},[`${t}-footer`]:{marginTop:n},"&-normal":{marginBlock:s,color:e.colorTextDescription,[`${t}-description`]:{color:e.colorTextDescription},[`${t}-image`]:{height:e.emptyImgHeightMD}},"&-small":{marginBlock:r,color:e.colorTextDescription,[`${t}-image`]:{height:e.emptyImgHeightSM}}}}},Qne=Qi("Empty",e=>{const{componentCls:t,controlHeightLG:n,calc:r}=e,s=pi(e,{emptyImgCls:`${t}-img`,emptyImgHeight:r(n).mul(2.5).equal(),emptyImgHeightMD:n,emptyImgHeightSM:r(n).mul(.875).equal()});return[Jne(s)]});var ere=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const e6=_.createElement(Zne,null),t6=_.createElement(Yne,null),qc=e=>{var{className:t,rootClassName:n,prefixCls:r,image:s=e6,description:d,children:p,imageStyle:i,style:x}=e,S=ere(e,["className","rootClassName","prefixCls","image","description","children","imageStyle","style"]);const{getPrefixCls:T,direction:M,empty:$}=_.useContext(fr),L=T("empty",r),[N,V,B]=Qne(L),[j]=Zl("Empty"),H=typeof d<"u"?d:j==null?void 0:j.description,W=typeof H=="string"?H:"empty";let X=null;return typeof s=="string"?X=_.createElement("img",{alt:W,src:s}):X=s,N(_.createElement("div",Object.assign({className:pt(V,B,L,$==null?void 0:$.className,{[`${L}-normal`]:s===t6,[`${L}-rtl`]:M==="rtl"},t,n),style:Object.assign(Object.assign({},$==null?void 0:$.style),x)},S),_.createElement("div",{className:`${L}-image`,style:i},X),H&&_.createElement("div",{className:`${L}-description`},H),p&&_.createElement("div",{className:`${L}-footer`},p)))};qc.PRESENTED_IMAGE_DEFAULT=e6;qc.PRESENTED_IMAGE_SIMPLE=t6;const n6=e=>{const{componentName:t}=e,{getPrefixCls:n}=_.useContext(fr),r=n("empty");switch(t){case"Table":case"List":return Ft.createElement(qc,{image:qc.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return Ft.createElement(qc,{image:qc.PRESENTED_IMAGE_SIMPLE,className:`${r}-small`});case"Table.filter":return null;default:return Ft.createElement(qc,null)}},$m=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;var r,s;const{variant:d,[e]:p}=_.useContext(fr),i=_.useContext(Dee),x=p==null?void 0:p.variant;let S;typeof t<"u"?S=t:n===!1?S="borderless":S=(s=(r=i??x)!==null&&r!==void 0?r:d)!==null&&s!==void 0?s:"outlined";const T=PX.includes(S);return[S,T]},tre=e=>{const n={overflow:{adjustX:!0,adjustY:!0,shiftY:!0},htmlRegion:e==="scroll"?"scroll":"visible",dynamicInset:!0};return{bottomLeft:Object.assign(Object.assign({},n),{points:["tl","bl"],offset:[0,4]}),bottomRight:Object.assign(Object.assign({},n),{points:["tr","br"],offset:[0,4]}),topLeft:Object.assign(Object.assign({},n),{points:["bl","tl"],offset:[0,-4]}),topRight:Object.assign(Object.assign({},n),{points:["br","tr"],offset:[0,-4]})}};function nre(e,t){return e||tre(t)}const rz=e=>{const{optionHeight:t,optionFontSize:n,optionLineHeight:r,optionPadding:s}=e;return{position:"relative",display:"block",minHeight:t,padding:s,color:e.colorText,fontWeight:"normal",fontSize:n,lineHeight:r,boxSizing:"border-box"}},rre=e=>{const{antCls:t,componentCls:n}=e,r=`${n}-item`,s=`&${t}-slide-up-enter${t}-slide-up-enter-active`,d=`&${t}-slide-up-appear${t}-slide-up-appear-active`,p=`&${t}-slide-up-leave${t}-slide-up-leave-active`,i=`${n}-dropdown-placement-`;return[{[`${n}-dropdown`]:Object.assign(Object.assign({},lo(e)),{position:"absolute",top:-9999,zIndex:e.zIndexPopup,boxSizing:"border-box",padding:e.paddingXXS,overflow:"hidden",fontSize:e.fontSize,fontVariant:"initial",backgroundColor:e.colorBgElevated,borderRadius:e.borderRadiusLG,outline:"none",boxShadow:e.boxShadowSecondary,[`
          ${s}${i}bottomLeft,
          ${d}${i}bottomLeft
        `]:{animationName:Tw},[`
          ${s}${i}topLeft,
          ${d}${i}topLeft,
          ${s}${i}topRight,
          ${d}${i}topRight
        `]:{animationName:Mw},[`${p}${i}bottomLeft`]:{animationName:Iw},[`
          ${p}${i}topLeft,
          ${p}${i}topRight
        `]:{animationName:Pw},"&-hidden":{display:"none"},[r]:Object.assign(Object.assign({},rz(e)),{cursor:"pointer",transition:`background ${e.motionDurationSlow} ease`,borderRadius:e.borderRadiusSM,"&-group":{color:e.colorTextDescription,fontSize:e.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":Object.assign({flex:"auto"},iu),"&-state":{flex:"none",display:"flex",alignItems:"center"},[`&-active:not(${r}-option-disabled)`]:{backgroundColor:e.optionActiveBg},[`&-selected:not(${r}-option-disabled)`]:{color:e.optionSelectedColor,fontWeight:e.optionSelectedFontWeight,backgroundColor:e.optionSelectedBg,[`${r}-option-state`]:{color:e.colorPrimary},[`&:has(+ ${r}-option-selected:not(${r}-option-disabled))`]:{borderEndStartRadius:0,borderEndEndRadius:0,[`& + ${r}-option-selected:not(${r}-option-disabled)`]:{borderStartStartRadius:0,borderStartEndRadius:0}}},"&-disabled":{[`&${r}-option-selected`]:{backgroundColor:e.colorBgContainerDisabled},color:e.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:e.calc(e.controlPaddingHorizontal).mul(2).equal()}},"&-empty":Object.assign(Object.assign({},rz(e)),{color:e.colorTextDisabled})}),"&-rtl":{direction:"rtl"}})},Cc(e,"slide-up"),Cc(e,"slide-down"),pm(e,"move-up"),pm(e,"move-down")]},r6=e=>{const{multipleSelectItemHeight:t,paddingXXS:n,lineWidth:r,INTERNAL_FIXED_ITEM_MARGIN:s}=e,d=e.max(e.calc(n).sub(r).equal(),0),p=e.max(e.calc(d).sub(s).equal(),0);return{basePadding:d,containerPadding:p,itemHeight:nt(t),itemLineHeight:nt(e.calc(t).sub(e.calc(e.lineWidth).mul(2)).equal())}},ire=e=>{const{multipleSelectItemHeight:t,selectHeight:n,lineWidth:r}=e;return e.calc(n).sub(t).div(2).sub(r).equal()},i6=e=>{const{componentCls:t,iconCls:n,borderRadiusSM:r,motionDurationSlow:s,paddingXS:d,multipleItemColorDisabled:p,multipleItemBorderColorDisabled:i,colorIcon:x,colorIconHover:S,INTERNAL_FIXED_ITEM_MARGIN:T}=e;return{[`${t}-selection-overflow`]:{position:"relative",display:"flex",flex:"auto",flexWrap:"wrap",maxWidth:"100%","&-item":{flex:"none",alignSelf:"center",maxWidth:"100%",display:"inline-flex"},[`${t}-selection-item`]:{display:"flex",alignSelf:"center",flex:"none",boxSizing:"border-box",maxWidth:"100%",marginBlock:T,borderRadius:r,cursor:"default",transition:`font-size ${s}, line-height ${s}, height ${s}`,marginInlineEnd:e.calc(T).mul(2).equal(),paddingInlineStart:d,paddingInlineEnd:e.calc(d).div(2).equal(),[`${t}-disabled&`]:{color:p,borderColor:i,cursor:"not-allowed"},"&-content":{display:"inline-block",marginInlineEnd:e.calc(d).div(2).equal(),overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"},"&-remove":Object.assign(Object.assign({},yw()),{display:"inline-flex",alignItems:"center",color:x,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${n}`]:{verticalAlign:"-0.2em"},"&:hover":{color:S}})}}}},ore=(e,t)=>{const{componentCls:n,INTERNAL_FIXED_ITEM_MARGIN:r}=e,s=`${n}-selection-overflow`,d=e.multipleSelectItemHeight,p=ire(e),i=t?`${n}-${t}`:"",x=r6(e);return{[`${n}-multiple${i}`]:Object.assign(Object.assign({},i6(e)),{[`${n}-selector`]:{display:"flex",alignItems:"center",width:"100%",height:"100%",paddingInline:x.basePadding,paddingBlock:x.containerPadding,borderRadius:e.borderRadius,[`${n}-disabled&`]:{background:e.multipleSelectorBgDisabled,cursor:"not-allowed"},"&:after":{display:"inline-block",width:0,margin:`${nt(r)} 0`,lineHeight:nt(d),visibility:"hidden",content:'"\\a0"'}},[`${n}-selection-wrap`]:{width:"100%",overflow:"hidden"},[`${n}-selection-item`]:{height:x.itemHeight,lineHeight:nt(x.itemLineHeight)},[`${s}-item + ${s}-item`]:{[`${n}-selection-search`]:{marginInlineStart:0}},[`${s}-item-suffix`]:{height:"100%"},[`${n}-selection-search`]:{display:"inline-flex",position:"relative",maxWidth:"100%",marginInlineStart:e.calc(e.inputPaddingHorizontalBase).sub(p).equal(),"\n          &-input,\n          &-mirror\n        ":{height:d,fontFamily:e.fontFamily,lineHeight:nt(d),transition:`all ${e.motionDurationSlow}`},"&-input":{width:"100%",minWidth:4.1},"&-mirror":{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:"auto",zIndex:999,whiteSpace:"pre",visibility:"hidden"}},[`${n}-selection-placeholder`]:{position:"absolute",top:"50%",insetInlineStart:e.inputPaddingHorizontalBase,insetInlineEnd:e.inputPaddingHorizontalBase,transform:"translateY(-50%)",transition:`all ${e.motionDurationSlow}`},[`${n}-prefix`]:{height:x.itemHeight,lineHeight:nt(x.itemLineHeight),marginInlineStart:`calc(${nt(e.inputPaddingHorizontalBase)} - ${nt(x.basePadding)})`,marginInlineEnd:e.selectAffixPadding}})}};function tE(e,t){const{componentCls:n}=e,r=t?`${n}-${t}`:"",s={[`${n}-multiple${r}`]:{fontSize:e.fontSize,[`${n}-selector`]:{[`${n}-show-search&`]:{cursor:"text"}},[`
        &${n}-show-arrow ${n}-selector,
        &${n}-allow-clear ${n}-selector
      `]:{paddingInlineEnd:e.calc(e.fontSizeIcon).add(e.controlPaddingHorizontal).equal()}}};return[ore(e,t),s]}const are=e=>{const{componentCls:t}=e,n=pi(e,{selectHeight:e.controlHeightSM,multipleSelectItemHeight:e.multipleItemHeightSM,borderRadius:e.borderRadiusSM,borderRadiusSM:e.borderRadiusXS}),r=pi(e,{fontSize:e.fontSizeLG,selectHeight:e.controlHeightLG,multipleSelectItemHeight:e.multipleItemHeightLG,borderRadius:e.borderRadiusLG,borderRadiusSM:e.borderRadius});return[tE(e),tE(n,"sm"),{[`${t}-multiple${t}-sm`]:{[`${t}-selection-placeholder`]:{insetInline:e.calc(e.controlPaddingHorizontalSM).sub(e.lineWidth).equal()},[`${t}-selection-search`]:{marginInlineStart:2}}},tE(r,"lg")]};function nE(e,t){const{componentCls:n,inputPaddingHorizontalBase:r,borderRadius:s,selectAffixPadding:d}=e,p=e.calc(e.controlHeight).sub(e.calc(e.lineWidth).mul(2)).equal(),i=t?`${n}-${t}`:"";return{[`${n}-single${i}`]:{fontSize:e.fontSize,height:e.controlHeight,[`${n}-selector`]:Object.assign(Object.assign({},lo(e,!0)),{display:"flex",borderRadius:s,flex:"1 1 auto",[`${n}-selection-wrap`]:{display:"flex",width:"100%",position:"relative"},[`${n}-selection-search`]:{position:"absolute",inset:0,width:"100%","&-input":{width:"100%",WebkitAppearance:"textfield"}},[`
          ${n}-selection-item,
          ${n}-selection-placeholder,
          ${n}-prefix
        `]:{display:"block",padding:0,lineHeight:nt(p),transition:`all ${e.motionDurationSlow}, visibility 0s`,alignSelf:"center"},[`${n}-selection-placeholder`]:{transition:"none",pointerEvents:"none"},[`${n}-prefix`]:{marginInlineEnd:d},[["&:after",`${n}-selection-item:empty:after`,`${n}-selection-placeholder:empty:after`].join(",")]:{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'}}),[`
        &${n}-show-arrow ${n}-selection-item,
        &${n}-show-arrow ${n}-selection-search,
        &${n}-show-arrow ${n}-selection-placeholder
      `]:{paddingInlineEnd:e.showArrowPaddingInlineEnd},[`&${n}-open ${n}-selection-item`]:{color:e.colorTextPlaceholder},[`&:not(${n}-customize-input)`]:{[`${n}-selector`]:{width:"100%",height:"100%",padding:`0 ${nt(r)}`,[`${n}-selection-search-input`]:{height:p},"&:after":{lineHeight:nt(p)}}},[`&${n}-customize-input`]:{[`${n}-selector`]:{"&:after":{display:"none"},[`${n}-selection-search`]:{position:"static",width:"100%"},[`${n}-selection-placeholder`]:{position:"absolute",insetInlineStart:0,insetInlineEnd:0,padding:`0 ${nt(r)}`,"&:after":{display:"none"}}}}}}}function sre(e){const{componentCls:t}=e,n=e.calc(e.controlPaddingHorizontalSM).sub(e.lineWidth).equal();return[nE(e),nE(pi(e,{controlHeight:e.controlHeightSM,borderRadius:e.borderRadiusSM}),"sm"),{[`${t}-single${t}-sm`]:{[`&:not(${t}-customize-input)`]:{[`${t}-selector`]:{padding:`0 ${nt(n)}`},[`&${t}-show-arrow ${t}-selection-search`]:{insetInlineEnd:e.calc(n).add(e.calc(e.fontSize).mul(1.5)).equal()},[`
            &${t}-show-arrow ${t}-selection-item,
            &${t}-show-arrow ${t}-selection-placeholder
          `]:{paddingInlineEnd:e.calc(e.fontSize).mul(1.5).equal()}}}},nE(pi(e,{controlHeight:e.singleItemHeightLG,fontSize:e.fontSizeLG,borderRadius:e.borderRadiusLG}),"lg")]}const lre=e=>{const{fontSize:t,lineHeight:n,lineWidth:r,controlHeight:s,controlHeightSM:d,controlHeightLG:p,paddingXXS:i,controlPaddingHorizontal:x,zIndexPopupBase:S,colorText:T,fontWeightStrong:M,controlItemBgActive:$,controlItemBgHover:L,colorBgContainer:N,colorFillSecondary:V,colorBgContainerDisabled:B,colorTextDisabled:j,colorPrimaryHover:H,colorPrimary:W,controlOutline:X}=e,ee=i*2,J=r*2,Y=Math.min(s-ee,s-J),re=Math.min(d-ee,d-J),se=Math.min(p-ee,p-J);return{INTERNAL_FIXED_ITEM_MARGIN:Math.floor(i/2),zIndexPopup:S+50,optionSelectedColor:T,optionSelectedFontWeight:M,optionSelectedBg:$,optionActiveBg:L,optionPadding:`${(s-t*n)/2}px ${x}px`,optionFontSize:t,optionLineHeight:n,optionHeight:s,selectorBg:N,clearBg:N,singleItemHeightLG:p,multipleItemBg:V,multipleItemBorderColor:"transparent",multipleItemHeight:Y,multipleItemHeightSM:re,multipleItemHeightLG:se,multipleSelectorBgDisabled:B,multipleItemColorDisabled:j,multipleItemBorderColorDisabled:"transparent",showArrowPaddingInlineEnd:Math.ceil(e.fontSize*1.25),hoverBorderColor:H,activeBorderColor:W,activeOutlineColor:X,selectAffixPadding:i}},o6=(e,t)=>{const{componentCls:n,antCls:r,controlOutlineWidth:s}=e;return{[`&:not(${n}-customize-input) ${n}-selector`]:{border:`${nt(e.lineWidth)} ${e.lineType} ${t.borderColor}`,background:e.selectorBg},[`&:not(${n}-disabled):not(${n}-customize-input):not(${r}-pagination-size-changer)`]:{[`&:hover ${n}-selector`]:{borderColor:t.hoverBorderHover},[`${n}-focused& ${n}-selector`]:{borderColor:t.activeBorderColor,boxShadow:`0 0 0 ${nt(s)} ${t.activeOutlineColor}`,outline:0}}}},iz=(e,t)=>({[`&${e.componentCls}-status-${t.status}`]:Object.assign({},o6(e,t))}),cre=e=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign({},o6(e,{borderColor:e.colorBorder,hoverBorderHover:e.hoverBorderColor,activeBorderColor:e.activeBorderColor,activeOutlineColor:e.activeOutlineColor})),iz(e,{status:"error",borderColor:e.colorError,hoverBorderHover:e.colorErrorHover,activeBorderColor:e.colorError,activeOutlineColor:e.colorErrorOutline})),iz(e,{status:"warning",borderColor:e.colorWarning,hoverBorderHover:e.colorWarningHover,activeBorderColor:e.colorWarning,activeOutlineColor:e.colorWarningOutline})),{[`&${e.componentCls}-disabled`]:{[`&:not(${e.componentCls}-customize-input) ${e.componentCls}-selector`]:{background:e.colorBgContainerDisabled,color:e.colorTextDisabled}},[`&${e.componentCls}-multiple ${e.componentCls}-selection-item`]:{background:e.multipleItemBg,border:`${nt(e.lineWidth)} ${e.lineType} ${e.multipleItemBorderColor}`}})}),a6=(e,t)=>{const{componentCls:n,antCls:r}=e;return{[`&:not(${n}-customize-input) ${n}-selector`]:{background:t.bg,border:`${nt(e.lineWidth)} ${e.lineType} transparent`,color:t.color},[`&:not(${n}-disabled):not(${n}-customize-input):not(${r}-pagination-size-changer)`]:{[`&:hover ${n}-selector`]:{background:t.hoverBg},[`${n}-focused& ${n}-selector`]:{background:e.selectorBg,borderColor:t.activeBorderColor,outline:0}}}},oz=(e,t)=>({[`&${e.componentCls}-status-${t.status}`]:Object.assign({},a6(e,t))}),ure=e=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign({},a6(e,{bg:e.colorFillTertiary,hoverBg:e.colorFillSecondary,activeBorderColor:e.activeBorderColor,color:e.colorText})),oz(e,{status:"error",bg:e.colorErrorBg,hoverBg:e.colorErrorBgHover,activeBorderColor:e.colorError,color:e.colorError})),oz(e,{status:"warning",bg:e.colorWarningBg,hoverBg:e.colorWarningBgHover,activeBorderColor:e.colorWarning,color:e.colorWarning})),{[`&${e.componentCls}-disabled`]:{[`&:not(${e.componentCls}-customize-input) ${e.componentCls}-selector`]:{borderColor:e.colorBorder,background:e.colorBgContainerDisabled,color:e.colorTextDisabled}},[`&${e.componentCls}-multiple ${e.componentCls}-selection-item`]:{background:e.colorBgContainer,border:`${nt(e.lineWidth)} ${e.lineType} ${e.colorSplit}`}})}),dre=e=>({"&-borderless":{[`${e.componentCls}-selector`]:{background:"transparent",borderColor:"transparent"},[`&${e.componentCls}-disabled`]:{[`&:not(${e.componentCls}-customize-input) ${e.componentCls}-selector`]:{color:e.colorTextDisabled}},[`&${e.componentCls}-multiple ${e.componentCls}-selection-item`]:{background:e.multipleItemBg,border:`${nt(e.lineWidth)} ${e.lineType} ${e.multipleItemBorderColor}`},[`&${e.componentCls}-status-error`]:{[`${e.componentCls}-selection-item`]:{color:e.colorError}},[`&${e.componentCls}-status-warning`]:{[`${e.componentCls}-selection-item`]:{color:e.colorWarning}}}}),hre=e=>({[e.componentCls]:Object.assign(Object.assign(Object.assign({},cre(e)),ure(e)),dre(e))}),fre=e=>{const{componentCls:t}=e;return{position:"relative",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,input:{cursor:"pointer"},[`${t}-show-search&`]:{cursor:"text",input:{cursor:"auto",color:"inherit",height:"100%"}},[`${t}-disabled&`]:{cursor:"not-allowed",input:{cursor:"not-allowed"}}}},pre=e=>{const{componentCls:t}=e;return{[`${t}-selection-search-input`]:{margin:0,padding:0,background:"transparent",border:"none",outline:"none",appearance:"none",fontFamily:"inherit","&::-webkit-search-cancel-button":{display:"none","-webkit-appearance":"none"}}}},mre=e=>{const{antCls:t,componentCls:n,inputPaddingHorizontalBase:r,iconCls:s}=e;return{[n]:Object.assign(Object.assign({},lo(e)),{position:"relative",display:"inline-flex",cursor:"pointer",[`&:not(${n}-customize-input) ${n}-selector`]:Object.assign(Object.assign({},fre(e)),pre(e)),[`${n}-selection-item`]:Object.assign(Object.assign({flex:1,fontWeight:"normal",position:"relative",userSelect:"none"},iu),{[`> ${t}-typography`]:{display:"inline"}}),[`${n}-selection-placeholder`]:Object.assign(Object.assign({},iu),{flex:1,color:e.colorTextPlaceholder,pointerEvents:"none"}),[`${n}-arrow`]:Object.assign(Object.assign({},yw()),{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:r,height:e.fontSizeIcon,marginTop:e.calc(e.fontSizeIcon).mul(-1).div(2).equal(),color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,lineHeight:1,textAlign:"center",pointerEvents:"none",display:"flex",alignItems:"center",transition:`opacity ${e.motionDurationSlow} ease`,[s]:{verticalAlign:"top",transition:`transform ${e.motionDurationSlow}`,"> svg":{verticalAlign:"top"},[`&:not(${n}-suffix)`]:{pointerEvents:"auto"}},[`${n}-disabled &`]:{cursor:"not-allowed"},"> *:not(:last-child)":{marginInlineEnd:8}}),[`${n}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:r,zIndex:1,display:"inline-block",width:e.fontSizeIcon,height:e.fontSizeIcon,marginTop:e.calc(e.fontSizeIcon).mul(-1).div(2).equal(),color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",cursor:"pointer",opacity:0,transition:`color ${e.motionDurationMid} ease, opacity ${e.motionDurationSlow} ease`,textRendering:"auto","&:before":{display:"block"},"&:hover":{color:e.colorTextTertiary}},[`&:hover ${n}-clear`]:{opacity:1,background:e.colorBgBase,borderRadius:"50%"}}),[`${n}-has-feedback`]:{[`${n}-clear`]:{insetInlineEnd:e.calc(r).add(e.fontSize).add(e.paddingXS).equal()}}}},gre=e=>{const{componentCls:t}=e;return[{[t]:{[`&${t}-in-form-item`]:{width:"100%"}}},mre(e),sre(e),are(e),rre(e),{[`${t}-rtl`]:{direction:"rtl"}},Ow(e,{borderElCls:`${t}-selector`,focusElCls:`${t}-focused`})]},vre=Qi("Select",(e,t)=>{let{rootPrefixCls:n}=t;const r=pi(e,{rootPrefixCls:n,inputPaddingHorizontalBase:e.calc(e.paddingSM).sub(1).equal(),multipleSelectItemHeight:e.multipleItemHeight,selectHeight:e.controlHeight});return[gre(r),hre(r)]},lre,{unitless:{optionLineHeight:!0,optionSelectedFontWeight:!0}});var yre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},_re=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:yre}))},s6=_.forwardRef(_re),xre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},bre=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:xre}))},NP=_.forwardRef(bre),wre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},Sre=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:wre}))},FP=_.forwardRef(Sre);function l6(e){let{suffixIcon:t,clearIcon:n,menuItemSelectedIcon:r,removeIcon:s,loading:d,multiple:p,hasFeedback:i,prefixCls:x,showSuffixIcon:S,feedbackIcon:T,showArrow:M,componentName:$}=e;const L=n??_.createElement(_w,null),N=H=>t===null&&!i&&!M?null:_.createElement(_.Fragment,null,S!==!1&&H,i&&T);let V=null;if(t!==void 0)V=N(t);else if(d)V=N(_.createElement(xy,{spin:!0}));else{const H=`${x}-suffix`;V=W=>{let{open:X,showSearch:ee}=W;return N(X&&ee?_.createElement(FP,{className:H}):_.createElement(NP,{className:H}))}}let B=null;r!==void 0?B=r:p?B=_.createElement(s6,null):B=null;let j=null;return s!==void 0?j=s:j=_.createElement(Om,null),{clearIcon:L,suffixIcon:V,itemIcon:B,removeIcon:j}}function Cre(e,t){return t!==void 0?t:e!==null}var Ere=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const c6="SECRET_COMBOBOX_MODE_DO_NOT_USE",Tre=(e,t)=>{var n;const{prefixCls:r,bordered:s,className:d,rootClassName:p,getPopupContainer:i,popupClassName:x,dropdownClassName:S,listHeight:T=256,placement:M,listItemHeight:$,size:L,disabled:N,notFoundContent:V,status:B,builtinPlacements:j,dropdownMatchSelectWidth:H,popupMatchSelectWidth:W,direction:X,style:ee,allowClear:J,variant:Y,dropdownStyle:re,transitionName:se,tagRender:ae,maxCount:ce,prefix:Ce}=e,we=Ere(e,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","direction","style","allowClear","variant","dropdownStyle","transitionName","tagRender","maxCount","prefix"]),{getPopupContainer:ge,getPrefixCls:ve,renderEmpty:de,direction:pe,virtual:fe,popupMatchSelectWidth:me,popupOverflow:Ie,select:Me}=_.useContext(fr),[,Be]=Ra(),$e=$??(Be==null?void 0:Be.controlHeight),ze=ve("select",r),Je=ve(),yt=X??pe,{compactSize:at,compactItemClassnames:gt}=cf(ze,yt),[wt,Pe]=$m("select",Y,s),mt=Qo(ze),[dt,ht,je]=vre(ze,mt),St=_.useMemo(()=>{const{mode:Xt}=e;if(Xt!=="combobox")return Xt===c6?"combobox":Xt},[e.mode]),Ct=St==="multiple"||St==="tags",Lt=Cre(e.suffixIcon,e.showArrow),At=(n=W??H)!==null&&n!==void 0?n:me,{status:Yt,hasFeedback:Kt,isFormItemInput:Dt,feedbackIcon:Wt}=_.useContext(js),Vt=Dm(Yt,B);let Rt;V!==void 0?Rt=V:St==="combobox"?Rt=null:Rt=(de==null?void 0:de("Select"))||_.createElement(n6,{componentName:"Select"});const{suffixIcon:dn,itemIcon:hn,removeIcon:Pn,clearIcon:Dn}=l6(Object.assign(Object.assign({},we),{multiple:Ct,hasFeedback:Kt,feedbackIcon:Wt,showSuffixIcon:Lt,prefixCls:ze,componentName:"Select"})),yn=J===!0?{clearIcon:Dn}:J,Rn=vo(we,["suffixIcon","itemIcon"]),kn=pt(x||S,{[`${ze}-dropdown-${yt}`]:yt==="rtl"},p,je,mt,ht),Cn=as(Xt=>{var Hn;return(Hn=L??at)!==null&&Hn!==void 0?Hn:Xt}),nn=_.useContext(ul),Ut=N??nn,cn=pt({[`${ze}-lg`]:Cn==="large",[`${ze}-sm`]:Cn==="small",[`${ze}-rtl`]:yt==="rtl",[`${ze}-${wt}`]:Pe,[`${ze}-in-form-item`]:Dt},vm(ze,Vt,Kt),gt,Me==null?void 0:Me.className,d,p,je,mt,ht),an=_.useMemo(()=>M!==void 0?M:yt==="rtl"?"bottomRight":"bottomLeft",[M,yt]),[Zt]=jd("SelectLike",re==null?void 0:re.zIndex);return dt(_.createElement(LP,Object.assign({ref:t,virtual:fe,showSearch:Me==null?void 0:Me.showSearch},Rn,{style:Object.assign(Object.assign({},Me==null?void 0:Me.style),ee),dropdownMatchSelectWidth:At,transitionName:Sc(Je,"slide-up",se),builtinPlacements:nre(j,Ie),listHeight:T,listItemHeight:$e,mode:St,prefixCls:ze,placement:an,direction:yt,prefix:Ce,suffixIcon:dn,menuItemSelectedIcon:hn,removeIcon:Pn,allowClear:yn,notFoundContent:Rt,className:cn,getPopupContainer:i||ge,dropdownClassName:kn,disabled:Ut,dropdownStyle:Object.assign(Object.assign({},re),{zIndex:Zt}),maxCount:Ct?ce:void 0,tagRender:Ct?ae:void 0})))},Ta=_.forwardRef(Tre),Ire=Py(Ta);Ta.SECRET_COMBOBOX_MODE_DO_NOT_USE=c6;Ta.Option=zP;Ta.OptGroup=kP;Ta._InternalPanelDoNotUseOrYouWillBeFired=Ire;const ym=["xxl","xl","lg","md","sm","xs"],Mre=e=>({xs:`(max-width: ${e.screenXSMax}px)`,sm:`(min-width: ${e.screenSM}px)`,md:`(min-width: ${e.screenMD}px)`,lg:`(min-width: ${e.screenLG}px)`,xl:`(min-width: ${e.screenXL}px)`,xxl:`(min-width: ${e.screenXXL}px)`}),Pre=e=>{const t=e,n=[].concat(ym).reverse();return n.forEach((r,s)=>{const d=r.toUpperCase(),p=`screen${d}Min`,i=`screen${d}`;if(!(t[p]<=t[i]))throw new Error(`${p}<=${i} fails : !(${t[p]}<=${t[i]})`);if(s<n.length-1){const x=`screen${d}Max`;if(!(t[i]<=t[x]))throw new Error(`${i}<=${x} fails : !(${t[i]}<=${t[x]})`);const T=`screen${n[s+1].toUpperCase()}Min`;if(!(t[x]<=t[T]))throw new Error(`${x}<=${T} fails : !(${t[x]}<=${t[T]})`)}}),e};function u6(){const[,e]=Ra(),t=Mre(Pre(e));return Ft.useMemo(()=>{const n=new Map;let r=-1,s={};return{matchHandlers:{},dispatch(d){return s=d,n.forEach(p=>p(s)),n.size>=1},subscribe(d){return n.size||this.register(),r+=1,n.set(r,d),d(s),r},unsubscribe(d){n.delete(d),n.size||this.unregister()},unregister(){Object.keys(t).forEach(d=>{const p=t[d],i=this.matchHandlers[p];i==null||i.mql.removeListener(i==null?void 0:i.listener)}),n.clear()},register(){Object.keys(t).forEach(d=>{const p=t[d],i=S=>{let{matches:T}=S;this.dispatch(Object.assign(Object.assign({},s),{[d]:T}))},x=window.matchMedia(p);x.addListener(i),this.matchHandlers[p]={mql:x,listener:i},i(x)})},responsiveMap:t}},[e])}function d6(){const[,e]=_.useReducer(t=>t+1,0);return e}function BP(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const t=_.useRef({}),n=d6(),r=u6();return Xr(()=>{const s=r.subscribe(d=>{t.current=d,e&&n()});return()=>r.unsubscribe(s)},[]),t.current}const AI=_.createContext({}),Rre=e=>{const{antCls:t,componentCls:n,iconCls:r,avatarBg:s,avatarColor:d,containerSize:p,containerSizeLG:i,containerSizeSM:x,textFontSize:S,textFontSizeLG:T,textFontSizeSM:M,borderRadius:$,borderRadiusLG:L,borderRadiusSM:N,lineWidth:V,lineType:B}=e,j=(H,W,X)=>({width:H,height:H,borderRadius:"50%",[`&${n}-square`]:{borderRadius:X},[`&${n}-icon`]:{fontSize:W,[`> ${r}`]:{margin:0}}});return{[n]:Object.assign(Object.assign(Object.assign(Object.assign({},lo(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:d,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:s,border:`${nt(V)} ${B} transparent`,"&-image":{background:"transparent"},[`${t}-image-img`]:{display:"block"}}),j(p,S,$)),{"&-lg":Object.assign({},j(i,T,L)),"&-sm":Object.assign({},j(x,M,N)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},Ore=e=>{const{componentCls:t,groupBorderColor:n,groupOverlapping:r,groupSpace:s}=e;return{[`${t}-group`]:{display:"inline-flex",[t]:{borderColor:n},"> *:not(:first-child)":{marginInlineStart:r}},[`${t}-group-popover`]:{[`${t} + ${t}`]:{marginInlineStart:s}}}},Are=e=>{const{controlHeight:t,controlHeightLG:n,controlHeightSM:r,fontSize:s,fontSizeLG:d,fontSizeXL:p,fontSizeHeading3:i,marginXS:x,marginXXS:S,colorBorderBg:T}=e;return{containerSize:t,containerSizeLG:n,containerSizeSM:r,textFontSize:Math.round((d+p)/2),textFontSizeLG:i,textFontSizeSM:s,groupSpace:S,groupOverlapping:-x,groupBorderColor:T}},h6=Qi("Avatar",e=>{const{colorTextLightSolid:t,colorTextPlaceholder:n}=e,r=pi(e,{avatarBg:n,avatarColor:t});return[Rre(r),Ore(r)]},Are);var Dre=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const $re=(e,t)=>{const[n,r]=_.useState(1),[s,d]=_.useState(!1),[p,i]=_.useState(!0),x=_.useRef(null),S=_.useRef(null),T=Ua(t,x),{getPrefixCls:M,avatar:$}=_.useContext(fr),L=_.useContext(AI),N=()=>{if(!S.current||!x.current)return;const gt=S.current.offsetWidth,wt=x.current.offsetWidth;if(gt!==0&&wt!==0){const{gap:Pe=4}=e;Pe*2<wt&&r(wt-Pe*2<gt?(wt-Pe*2)/gt:1)}};_.useEffect(()=>{d(!0)},[]),_.useEffect(()=>{i(!0),r(1)},[e.src]),_.useEffect(N,[e.gap]);const V=()=>{const{onError:gt}=e;(gt==null?void 0:gt())!==!1&&i(!1)},{prefixCls:B,shape:j,size:H,src:W,srcSet:X,icon:ee,className:J,rootClassName:Y,alt:re,draggable:se,children:ae,crossOrigin:ce}=e,Ce=Dre(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),we=as(gt=>{var wt,Pe;return(Pe=(wt=H??(L==null?void 0:L.size))!==null&&wt!==void 0?wt:gt)!==null&&Pe!==void 0?Pe:"default"}),ge=Object.keys(typeof we=="object"?we||{}:{}).some(gt=>["xs","sm","md","lg","xl","xxl"].includes(gt)),ve=BP(ge),de=_.useMemo(()=>{if(typeof we!="object")return{};const gt=ym.find(Pe=>ve[Pe]),wt=we[gt];return wt?{width:wt,height:wt,fontSize:wt&&(ee||ae)?wt/2:18}:{}},[ve,we]),pe=M("avatar",B),fe=Qo(pe),[me,Ie,Me]=h6(pe,fe),Be=pt({[`${pe}-lg`]:we==="large",[`${pe}-sm`]:we==="small"}),$e=_.isValidElement(W),ze=j||(L==null?void 0:L.shape)||"circle",Je=pt(pe,Be,$==null?void 0:$.className,`${pe}-${ze}`,{[`${pe}-image`]:$e||W&&p,[`${pe}-icon`]:!!ee},Me,fe,J,Y,Ie),yt=typeof we=="number"?{width:we,height:we,fontSize:ee?we/2:18}:{};let at;if(typeof W=="string"&&p)at=_.createElement("img",{src:W,draggable:se,srcSet:X,onError:V,alt:re,crossOrigin:ce});else if($e)at=W;else if(ee)at=ee;else if(s||n!==1){const gt=`scale(${n})`,wt={msTransform:gt,WebkitTransform:gt,transform:gt};at=_.createElement(ga,{onResize:N},_.createElement("span",{className:`${pe}-string`,ref:S,style:Object.assign({},wt)},ae))}else at=_.createElement("span",{className:`${pe}-string`,style:{opacity:0},ref:S},ae);return delete Ce.onError,delete Ce.gap,me(_.createElement("span",Object.assign({},Ce,{style:Object.assign(Object.assign(Object.assign(Object.assign({},yt),de),$==null?void 0:$.style),Ce.style),className:Je,ref:T}),at))},f6=_.forwardRef($re),_m=e=>e?typeof e=="function"?e():e:null;function jP(e){var t=e.children,n=e.prefixCls,r=e.id,s=e.overlayInnerStyle,d=e.className,p=e.style;return _.createElement("div",{className:pt("".concat(n,"-content"),d),style:p},_.createElement("div",{className:"".concat(n,"-inner"),id:r,role:"tooltip",style:s},typeof t=="function"?t():t))}var Cp={shiftX:64,adjustY:1},Ep={adjustX:1,shiftY:!0},tl=[0,0],kre={left:{points:["cr","cl"],overflow:Ep,offset:[-4,0],targetOffset:tl},right:{points:["cl","cr"],overflow:Ep,offset:[4,0],targetOffset:tl},top:{points:["bc","tc"],overflow:Cp,offset:[0,-4],targetOffset:tl},bottom:{points:["tc","bc"],overflow:Cp,offset:[0,4],targetOffset:tl},topLeft:{points:["bl","tl"],overflow:Cp,offset:[0,-4],targetOffset:tl},leftTop:{points:["tr","tl"],overflow:Ep,offset:[-4,0],targetOffset:tl},topRight:{points:["br","tr"],overflow:Cp,offset:[0,-4],targetOffset:tl},rightTop:{points:["tl","tr"],overflow:Ep,offset:[4,0],targetOffset:tl},bottomRight:{points:["tr","br"],overflow:Cp,offset:[0,4],targetOffset:tl},rightBottom:{points:["bl","br"],overflow:Ep,offset:[4,0],targetOffset:tl},bottomLeft:{points:["tl","bl"],overflow:Cp,offset:[0,4],targetOffset:tl},leftBottom:{points:["br","bl"],overflow:Ep,offset:[-4,0],targetOffset:tl}},zre=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],Lre=function(t,n){var r=t.overlayClassName,s=t.trigger,d=s===void 0?["hover"]:s,p=t.mouseEnterDelay,i=p===void 0?0:p,x=t.mouseLeaveDelay,S=x===void 0?.1:x,T=t.overlayStyle,M=t.prefixCls,$=M===void 0?"rc-tooltip":M,L=t.children,N=t.onVisibleChange,V=t.afterVisibleChange,B=t.transitionName,j=t.animation,H=t.motion,W=t.placement,X=W===void 0?"right":W,ee=t.align,J=ee===void 0?{}:ee,Y=t.destroyTooltipOnHide,re=Y===void 0?!1:Y,se=t.defaultVisible,ae=t.getTooltipContainer,ce=t.overlayInnerStyle;t.arrowContent;var Ce=t.overlay,we=t.id,ge=t.showArrow,ve=ge===void 0?!0:ge,de=Er(t,zre),pe=_.useRef(null);_.useImperativeHandle(n,function(){return pe.current});var fe=We({},de);"visible"in t&&(fe.popupVisible=t.visible);var me=function(){return _.createElement(jP,{key:"content",prefixCls:$,id:we,overlayInnerStyle:ce},Ce)};return _.createElement(Oy,qt({popupClassName:r,prefixCls:$,popup:me,action:d,builtinPlacements:kre,popupPlacement:X,ref:pe,popupAlign:J,getPopupContainer:ae,onPopupVisibleChange:N,afterPopupVisibleChange:V,popupTransitionName:B,popupAnimation:j,popupMotion:H,defaultPopupVisible:se,autoDestroy:re,mouseLeaveDelay:S,popupStyle:T,mouseEnterDelay:i,arrow:ve},fe),L)};const Nre=_.forwardRef(Lre);function Lw(e){const{sizePopupArrow:t,borderRadiusXS:n,borderRadiusOuter:r}=e,s=t/2,d=0,p=s,i=r*1/Math.sqrt(2),x=s-r*(1-1/Math.sqrt(2)),S=s-n*(1/Math.sqrt(2)),T=r*(Math.sqrt(2)-1)+n*(1/Math.sqrt(2)),M=2*s-S,$=T,L=2*s-i,N=x,V=2*s-d,B=p,j=s*Math.sqrt(2)+r*(Math.sqrt(2)-2),H=r*(Math.sqrt(2)-1),W=`polygon(${H}px 100%, 50% ${H}px, ${2*s-H}px 100%, ${H}px 100%)`,X=`path('M ${d} ${p} A ${r} ${r} 0 0 0 ${i} ${x} L ${S} ${T} A ${n} ${n} 0 0 1 ${M} ${$} L ${L} ${N} A ${r} ${r} 0 0 0 ${V} ${B} Z')`;return{arrowShadowWidth:j,arrowPath:X,arrowPolygon:W}}const p6=(e,t,n)=>{const{sizePopupArrow:r,arrowPolygon:s,arrowPath:d,arrowShadowWidth:p,borderRadiusXS:i,calc:x}=e;return{pointerEvents:"none",width:r,height:r,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:r,height:x(r).div(2).equal(),background:t,clipPath:{_multi_value_:!0,value:[s,d]},content:'""'},"&::after":{content:'""',position:"absolute",width:p,height:p,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${nt(i)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:n,zIndex:0,background:"transparent"}}},m6=8;function Nw(e){const{contentRadius:t,limitVerticalRadius:n}=e,r=t>12?t+2:12;return{arrowOffsetHorizontal:r,arrowOffsetVertical:n?m6:r}}function rb(e,t){return e?t:{}}function VP(e,t,n){const{componentCls:r,boxShadowPopoverArrow:s,arrowOffsetVertical:d,arrowOffsetHorizontal:p}=e,{arrowDistance:i=0,arrowPlacement:x={left:!0,right:!0,top:!0,bottom:!0}}=n||{};return{[r]:Object.assign(Object.assign(Object.assign(Object.assign({[`${r}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},p6(e,t,s)),{"&:before":{background:t}})]},rb(!!x.top,{[[`&-placement-top > ${r}-arrow`,`&-placement-topLeft > ${r}-arrow`,`&-placement-topRight > ${r}-arrow`].join(",")]:{bottom:i,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${r}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},"&-placement-topLeft":{"--arrow-offset-horizontal":p,[`> ${r}-arrow`]:{left:{_skip_check_:!0,value:p}}},"&-placement-topRight":{"--arrow-offset-horizontal":`calc(100% - ${nt(p)})`,[`> ${r}-arrow`]:{right:{_skip_check_:!0,value:p}}}})),rb(!!x.bottom,{[[`&-placement-bottom > ${r}-arrow`,`&-placement-bottomLeft > ${r}-arrow`,`&-placement-bottomRight > ${r}-arrow`].join(",")]:{top:i,transform:"translateY(-100%)"},[`&-placement-bottom > ${r}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},"&-placement-bottomLeft":{"--arrow-offset-horizontal":p,[`> ${r}-arrow`]:{left:{_skip_check_:!0,value:p}}},"&-placement-bottomRight":{"--arrow-offset-horizontal":`calc(100% - ${nt(p)})`,[`> ${r}-arrow`]:{right:{_skip_check_:!0,value:p}}}})),rb(!!x.left,{[[`&-placement-left > ${r}-arrow`,`&-placement-leftTop > ${r}-arrow`,`&-placement-leftBottom > ${r}-arrow`].join(",")]:{right:{_skip_check_:!0,value:i},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${r}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${r}-arrow`]:{top:d},[`&-placement-leftBottom > ${r}-arrow`]:{bottom:d}})),rb(!!x.right,{[[`&-placement-right > ${r}-arrow`,`&-placement-rightTop > ${r}-arrow`,`&-placement-rightBottom > ${r}-arrow`].join(",")]:{left:{_skip_check_:!0,value:i},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${r}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${r}-arrow`]:{top:d},[`&-placement-rightBottom > ${r}-arrow`]:{bottom:d}}))}}function Fre(e,t,n,r){if(r===!1)return{adjustX:!1,adjustY:!1};const s=r&&typeof r=="object"?r:{},d={};switch(e){case"top":case"bottom":d.shiftX=t.arrowOffsetHorizontal*2+n,d.shiftY=!0,d.adjustY=!0;break;case"left":case"right":d.shiftY=t.arrowOffsetVertical*2+n,d.shiftX=!0,d.adjustX=!0;break}const p=Object.assign(Object.assign({},d),s);return p.shiftX||(p.adjustX=!0),p.shiftY||(p.adjustY=!0),p}const az={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},Bre={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},jre=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function g6(e){const{arrowWidth:t,autoAdjustOverflow:n,arrowPointAtCenter:r,offset:s,borderRadius:d,visibleFirst:p}=e,i=t/2,x={};return Object.keys(az).forEach(S=>{const T=r&&Bre[S]||az[S],M=Object.assign(Object.assign({},T),{offset:[0,0],dynamicInset:!0});switch(x[S]=M,jre.has(S)&&(M.autoArrow=!1),S){case"top":case"topLeft":case"topRight":M.offset[1]=-i-s;break;case"bottom":case"bottomLeft":case"bottomRight":M.offset[1]=i+s;break;case"left":case"leftTop":case"leftBottom":M.offset[0]=-i-s;break;case"right":case"rightTop":case"rightBottom":M.offset[0]=i+s;break}const $=Nw({contentRadius:d,limitVerticalRadius:!0});if(r)switch(S){case"topLeft":case"bottomLeft":M.offset[0]=-$.arrowOffsetHorizontal-i;break;case"topRight":case"bottomRight":M.offset[0]=$.arrowOffsetHorizontal+i;break;case"leftTop":case"rightTop":M.offset[1]=-$.arrowOffsetHorizontal*2+i;break;case"leftBottom":case"rightBottom":M.offset[1]=$.arrowOffsetHorizontal*2-i;break}M.overflow=Fre(S,$,t,n),p&&(M.htmlRegion="visibleFirst")}),x}const Vre=e=>{const{componentCls:t,tooltipMaxWidth:n,tooltipColor:r,tooltipBg:s,tooltipBorderRadius:d,zIndexPopup:p,controlHeight:i,boxShadowSecondary:x,paddingSM:S,paddingXS:T}=e;return[{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},lo(e)),{position:"absolute",zIndex:p,display:"block",width:"max-content",maxWidth:n,visibility:"visible","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"&-hidden":{display:"none"},"--antd-arrow-background-color":s,[`${t}-inner`]:{minWidth:"1em",minHeight:i,padding:`${nt(e.calc(S).div(2).equal())} ${nt(T)}`,color:r,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:s,borderRadius:d,boxShadow:x,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${t}-inner`]:{borderRadius:e.min(d,m6)}},[`${t}-content`]:{position:"relative"}}),tZ(e,(M,$)=>{let{darkColor:L}=$;return{[`&${t}-${M}`]:{[`${t}-inner`]:{backgroundColor:L},[`${t}-arrow`]:{"--antd-arrow-background-color":L}}}})),{"&-rtl":{direction:"rtl"}})},VP(e,"var(--antd-arrow-background-color)"),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow}}]},Hre=e=>Object.assign(Object.assign({zIndexPopup:e.zIndexPopupBase+70},Nw({contentRadius:e.borderRadius,limitVerticalRadius:!0})),Lw(pi(e,{borderRadiusOuter:Math.min(e.borderRadiusOuter,4)}))),v6=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Qi("Tooltip",r=>{const{borderRadius:s,colorTextLightSolid:d,colorBgSpotlight:p}=r,i=pi(r,{tooltipMaxWidth:250,tooltipColor:d,tooltipBorderRadius:s,tooltipBg:p});return[Vre(i),Cy(r,"zoom-big-fast")]},Hre,{resetStyle:!1,injectStyle:t})(e)},Ure=ay.map(e=>`${e}-inverse`);function Wre(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(un(Ure),un(ay)).includes(e):ay.includes(e)}function y6(e,t){const n=Wre(t),r=pt({[`${e}-${t}`]:t&&n}),s={},d={};return t&&!n&&(s.background=t,d["--antd-arrow-background-color"]=t),{className:r,overlayStyle:s,arrowStyle:d}}const Gre=e=>{const{prefixCls:t,className:n,placement:r="top",title:s,color:d,overlayInnerStyle:p}=e,{getPrefixCls:i}=_.useContext(fr),x=i("tooltip",t),[S,T,M]=v6(x),$=y6(x,d),L=$.arrowStyle,N=Object.assign(Object.assign({},p),$.overlayStyle),V=pt(T,M,x,`${x}-pure`,`${x}-placement-${r}`,n,$.className);return S(_.createElement("div",{className:V,style:L},_.createElement("div",{className:`${x}-arrow`}),_.createElement(jP,Object.assign({},e,{className:T,prefixCls:x,overlayInnerStyle:N}),s)))};var qre=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Kre=_.forwardRef((e,t)=>{var n,r;const{prefixCls:s,openClassName:d,getTooltipContainer:p,overlayClassName:i,color:x,overlayInnerStyle:S,children:T,afterOpenChange:M,afterVisibleChange:$,destroyTooltipOnHide:L,arrow:N=!0,title:V,overlay:B,builtinPlacements:j,arrowPointAtCenter:H=!1,autoAdjustOverflow:W=!0}=e,X=!!N,[,ee]=Ra(),{getPopupContainer:J,getPrefixCls:Y,direction:re}=_.useContext(fr),se=sf(),ae=_.useRef(null),ce=()=>{var Vt;(Vt=ae.current)===null||Vt===void 0||Vt.forceAlign()};_.useImperativeHandle(t,()=>{var Vt;return{forceAlign:ce,forcePopupAlign:()=>{se.deprecated(!1,"forcePopupAlign","forceAlign"),ce()},nativeElement:(Vt=ae.current)===null||Vt===void 0?void 0:Vt.nativeElement}});const[Ce,we]=Bi(!1,{value:(n=e.open)!==null&&n!==void 0?n:e.visible,defaultValue:(r=e.defaultOpen)!==null&&r!==void 0?r:e.defaultVisible}),ge=!V&&!B&&V!==0,ve=Vt=>{var Rt,dn;we(ge?!1:Vt),ge||((Rt=e.onOpenChange)===null||Rt===void 0||Rt.call(e,Vt),(dn=e.onVisibleChange)===null||dn===void 0||dn.call(e,Vt))},de=_.useMemo(()=>{var Vt,Rt;let dn=H;return typeof N=="object"&&(dn=(Rt=(Vt=N.pointAtCenter)!==null&&Vt!==void 0?Vt:N.arrowPointAtCenter)!==null&&Rt!==void 0?Rt:H),j||g6({arrowPointAtCenter:dn,autoAdjustOverflow:W,arrowWidth:X?ee.sizePopupArrow:0,borderRadius:ee.borderRadius,offset:ee.marginXXS,visibleFirst:!0})},[H,N,j,ee]),pe=_.useMemo(()=>V===0?V:B||V||"",[B,V]),fe=_.createElement(Dd,{space:!0},typeof pe=="function"?pe():pe),{getPopupContainer:me,placement:Ie="top",mouseEnterDelay:Me=.1,mouseLeaveDelay:Be=.1,overlayStyle:$e,rootClassName:ze}=e,Je=qre(e,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),yt=Y("tooltip",s),at=Y(),gt=e["data-popover-inject"];let wt=Ce;!("open"in e)&&!("visible"in e)&&ge&&(wt=!1);const Pe=_.isValidElement(T)&&!WB(T)?T:_.createElement("span",null,T),mt=Pe.props,dt=!mt.className||typeof mt.className=="string"?pt(mt.className,d||`${yt}-open`):mt.className,[ht,je,St]=v6(yt,!gt),Ct=y6(yt,x),Lt=Ct.arrowStyle,At=Object.assign(Object.assign({},S),Ct.overlayStyle),Yt=pt(i,{[`${yt}-rtl`]:re==="rtl"},Ct.className,ze,je,St),[Kt,Dt]=jd("Tooltip",Je.zIndex),Wt=_.createElement(Nre,Object.assign({},Je,{zIndex:Kt,showArrow:X,placement:Ie,mouseEnterDelay:Me,mouseLeaveDelay:Be,prefixCls:yt,overlayClassName:Yt,overlayStyle:Object.assign(Object.assign({},Lt),$e),getTooltipContainer:me||p||J,ref:ae,builtinPlacements:de,overlay:fe,visible:wt,onVisibleChange:ve,afterVisibleChange:M??$,overlayInnerStyle:At,arrowContent:_.createElement("span",{className:`${yt}-arrow-content`}),motion:{motionName:Sc(at,"zoom-big-fast",e.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!L}),wt?ns(Pe,{className:dt}):Pe);return ht(_.createElement(by.Provider,{value:Dt},Wt))}),$d=Kre;$d._InternalPanelDoNotUseOrYouWillBeFired=Gre;const Xre=e=>{const{componentCls:t,popoverColor:n,titleMinWidth:r,fontWeightStrong:s,innerPadding:d,boxShadowSecondary:p,colorTextHeading:i,borderRadiusLG:x,zIndexPopup:S,titleMarginBottom:T,colorBgElevated:M,popoverBg:$,titleBorderBottom:L,innerContentPadding:N,titlePadding:V}=e;return[{[t]:Object.assign(Object.assign({},lo(e)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:S,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"--antd-arrow-background-color":M,width:"max-content",maxWidth:"100vw","&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${t}-content`]:{position:"relative"},[`${t}-inner`]:{backgroundColor:$,backgroundClip:"padding-box",borderRadius:x,boxShadow:p,padding:d},[`${t}-title`]:{minWidth:r,marginBottom:T,color:i,fontWeight:s,borderBottom:L,padding:V},[`${t}-inner-content`]:{color:n,padding:N}})},VP(e,"var(--antd-arrow-background-color)"),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow,display:"inline-block",[`${t}-content`]:{display:"inline-block"}}}]},Zre=e=>{const{componentCls:t}=e;return{[t]:ay.map(n=>{const r=e[`${n}6`];return{[`&${t}-${n}`]:{"--antd-arrow-background-color":r,[`${t}-inner`]:{backgroundColor:r},[`${t}-arrow`]:{background:"transparent"}}}})}},Yre=e=>{const{lineWidth:t,controlHeight:n,fontHeight:r,padding:s,wireframe:d,zIndexPopupBase:p,borderRadiusLG:i,marginXS:x,lineType:S,colorSplit:T,paddingSM:M}=e,$=n-r,L=$/2,N=$/2-t,V=s;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:p+30},Lw(e)),Nw({contentRadius:i,limitVerticalRadius:!0})),{innerPadding:d?0:12,titleMarginBottom:d?0:x,titlePadding:d?`${L}px ${V}px ${N}px`:0,titleBorderBottom:d?`${t}px ${S} ${T}`:"none",innerContentPadding:d?`${M}px ${V}px`:0})},_6=Qi("Popover",e=>{const{colorBgElevated:t,colorText:n}=e,r=pi(e,{popoverBg:t,popoverColor:n});return[Xre(r),Zre(r),Cy(r,"zoom-big")]},Yre,{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]});var Jre=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const x6=e=>{let{title:t,content:n,prefixCls:r}=e;return!t&&!n?null:_.createElement(_.Fragment,null,t&&_.createElement("div",{className:`${r}-title`},t),n&&_.createElement("div",{className:`${r}-inner-content`},n))},Qre=e=>{const{hashId:t,prefixCls:n,className:r,style:s,placement:d="top",title:p,content:i,children:x}=e,S=_m(p),T=_m(i),M=pt(t,n,`${n}-pure`,`${n}-placement-${d}`,r);return _.createElement("div",{className:M,style:s},_.createElement("div",{className:`${n}-arrow`}),_.createElement(jP,Object.assign({},e,{className:t,prefixCls:n}),x||_.createElement(x6,{prefixCls:n,title:S,content:T})))},b6=e=>{const{prefixCls:t,className:n}=e,r=Jre(e,["prefixCls","className"]),{getPrefixCls:s}=_.useContext(fr),d=s("popover",t),[p,i,x]=_6(d);return p(_.createElement(Qre,Object.assign({},r,{prefixCls:d,hashId:i,className:pt(n,x)})))};var eie=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const tie=_.forwardRef((e,t)=>{var n,r;const{prefixCls:s,title:d,content:p,overlayClassName:i,placement:x="top",trigger:S="hover",children:T,mouseEnterDelay:M=.1,mouseLeaveDelay:$=.1,onOpenChange:L,overlayStyle:N={}}=e,V=eie(e,["prefixCls","title","content","overlayClassName","placement","trigger","children","mouseEnterDelay","mouseLeaveDelay","onOpenChange","overlayStyle"]),{getPrefixCls:B}=_.useContext(fr),j=B("popover",s),[H,W,X]=_6(j),ee=B(),J=pt(i,W,X),[Y,re]=Bi(!1,{value:(n=e.open)!==null&&n!==void 0?n:e.visible,defaultValue:(r=e.defaultOpen)!==null&&r!==void 0?r:e.defaultVisible}),se=(ge,ve)=>{re(ge,!0),L==null||L(ge,ve)},ae=ge=>{ge.keyCode===gn.ESC&&se(!1,ge)},ce=ge=>{se(ge)},Ce=_m(d),we=_m(p);return H(_.createElement($d,Object.assign({placement:x,trigger:S,mouseEnterDelay:M,mouseLeaveDelay:$,overlayStyle:N},V,{prefixCls:j,overlayClassName:J,ref:t,open:Y,onOpenChange:ce,overlay:Ce||we?_.createElement(x6,{prefixCls:j,title:Ce,content:we}):null,transitionName:Sc(ee,"zoom-big",V.transitionName),"data-popover-inject":!0}),ns(T,{onKeyDown:ge=>{var ve,de;_.isValidElement(T)&&((de=T==null?void 0:(ve=T.props).onKeyDown)===null||de===void 0||de.call(ve,ge)),ae(ge)}})))}),Fw=tie;Fw._InternalPanelDoNotUseOrYouWillBeFired=b6;const sz=e=>{const{size:t,shape:n}=_.useContext(AI),r=_.useMemo(()=>({size:e.size||t,shape:e.shape||n}),[e.size,e.shape,t,n]);return _.createElement(AI.Provider,{value:r},e.children)},nie=e=>{var t,n,r;const{getPrefixCls:s,direction:d}=_.useContext(fr),{prefixCls:p,className:i,rootClassName:x,style:S,maxCount:T,maxStyle:M,size:$,shape:L,maxPopoverPlacement:N,maxPopoverTrigger:V,children:B,max:j}=e,H=s("avatar",p),W=`${H}-group`,X=Qo(H),[ee,J,Y]=h6(H,X),re=pt(W,{[`${W}-rtl`]:d==="rtl"},Y,X,i,x,J),se=Ha(B).map((Ce,we)=>ns(Ce,{key:`avatar-key-${we}`})),ae=(j==null?void 0:j.count)||T,ce=se.length;if(ae&&ae<ce){const Ce=se.slice(0,ae),we=se.slice(ae,ce),ge=(j==null?void 0:j.style)||M,ve=((t=j==null?void 0:j.popover)===null||t===void 0?void 0:t.trigger)||V||"hover",de=((n=j==null?void 0:j.popover)===null||n===void 0?void 0:n.placement)||N||"top",pe=Object.assign(Object.assign({content:we},j==null?void 0:j.popover),{overlayClassName:pt(`${W}-popover`,(r=j==null?void 0:j.popover)===null||r===void 0?void 0:r.overlayClassName),placement:de,trigger:ve});return Ce.push(_.createElement(Fw,Object.assign({key:"avatar-popover-key",destroyTooltipOnHide:!0},pe),_.createElement(f6,{style:ge},`+${ce-ae}`))),ee(_.createElement(sz,{shape:L,size:$},_.createElement("div",{className:re,style:S},Ce)))}return ee(_.createElement(sz,{shape:L,size:$},_.createElement("div",{className:re,style:S},se)))},w6=f6;w6.Group=nie;var rie=gn.ESC,iie=gn.TAB;function oie(e){var t=e.visible,n=e.triggerRef,r=e.onVisibleChange,s=e.autoFocus,d=e.overlayRef,p=_.useRef(!1),i=function(){if(t){var M,$;(M=n.current)===null||M===void 0||($=M.focus)===null||$===void 0||$.call(M),r==null||r(!1)}},x=function(){var M;return(M=d.current)!==null&&M!==void 0&&M.focus?(d.current.focus(),p.current=!0,!0):!1},S=function(M){switch(M.keyCode){case rie:i();break;case iie:{var $=!1;p.current||($=x()),$?M.preventDefault():i();break}}};_.useEffect(function(){return t?(window.addEventListener("keydown",S),s&&ui(x,3),function(){window.removeEventListener("keydown",S),p.current=!1}):function(){p.current=!1}},[t])}var aie=_.forwardRef(function(e,t){var n=e.overlay,r=e.arrow,s=e.prefixCls,d=_.useMemo(function(){var i;return typeof n=="function"?i=n():i=n,i},[n]),p=Ua(t,d==null?void 0:d.ref);return Ft.createElement(Ft.Fragment,null,r&&Ft.createElement("div",{className:"".concat(s,"-arrow")}),Ft.cloneElement(d,{ref:bc(d)?p:void 0}))}),Tp={adjustX:1,adjustY:1},Ip=[0,0],sie={topLeft:{points:["bl","tl"],overflow:Tp,offset:[0,-4],targetOffset:Ip},top:{points:["bc","tc"],overflow:Tp,offset:[0,-4],targetOffset:Ip},topRight:{points:["br","tr"],overflow:Tp,offset:[0,-4],targetOffset:Ip},bottomLeft:{points:["tl","bl"],overflow:Tp,offset:[0,4],targetOffset:Ip},bottom:{points:["tc","bc"],overflow:Tp,offset:[0,4],targetOffset:Ip},bottomRight:{points:["tr","br"],overflow:Tp,offset:[0,4],targetOffset:Ip}},lie=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function cie(e,t){var n,r=e.arrow,s=r===void 0?!1:r,d=e.prefixCls,p=d===void 0?"rc-dropdown":d,i=e.transitionName,x=e.animation,S=e.align,T=e.placement,M=T===void 0?"bottomLeft":T,$=e.placements,L=$===void 0?sie:$,N=e.getPopupContainer,V=e.showAction,B=e.hideAction,j=e.overlayClassName,H=e.overlayStyle,W=e.visible,X=e.trigger,ee=X===void 0?["hover"]:X,J=e.autoFocus,Y=e.overlay,re=e.children,se=e.onVisibleChange,ae=Er(e,lie),ce=Ft.useState(),Ce=ot(ce,2),we=Ce[0],ge=Ce[1],ve="visible"in e?W:we,de=Ft.useRef(null),pe=Ft.useRef(null),fe=Ft.useRef(null);Ft.useImperativeHandle(t,function(){return de.current});var me=function(gt){ge(gt),se==null||se(gt)};oie({visible:ve,triggerRef:fe,onVisibleChange:me,autoFocus:J,overlayRef:pe});var Ie=function(gt){var wt=e.onOverlayClick;ge(!1),wt&&wt(gt)},Me=function(){return Ft.createElement(aie,{ref:pe,overlay:Y,prefixCls:p,arrow:s})},Be=function(){return typeof Y=="function"?Me:Me()},$e=function(){var gt=e.minOverlayWidthMatchTrigger,wt=e.alignPoint;return"minOverlayWidthMatchTrigger"in e?gt:!wt},ze=function(){var gt=e.openClassName;return gt!==void 0?gt:"".concat(p,"-open")},Je=Ft.cloneElement(re,{className:pt((n=re.props)===null||n===void 0?void 0:n.className,ve&&ze()),ref:bc(re)?Ua(fe,re.ref):void 0}),yt=B;return!yt&&ee.indexOf("contextMenu")!==-1&&(yt=["click"]),Ft.createElement(Oy,qt({builtinPlacements:L},ae,{prefixCls:p,ref:de,popupClassName:pt(j,De({},"".concat(p,"-show-arrow"),s)),popupStyle:H,action:ee,showAction:V,hideAction:yt,popupPlacement:M,popupAlign:S,popupTransitionName:i,popupAnimation:x,popupVisible:ve,stretch:$e()?"minWidth":"",popup:Be(),onPopupVisibleChange:me,onPopupClick:Ie,getPopupContainer:N}),Je)}const S6=Ft.forwardRef(cie);var C6=_.createContext(null);function E6(e,t){return e===void 0?null:"".concat(e,"-").concat(t)}function T6(e){var t=_.useContext(C6);return E6(t,e)}var uie=["children","locked"],Wl=_.createContext(null);function die(e,t){var n=We({},e);return Object.keys(t).forEach(function(r){var s=t[r];s!==void 0&&(n[r]=s)}),n}function uy(e){var t=e.children,n=e.locked,r=Er(e,uie),s=_.useContext(Wl),d=af(function(){return die(s,r)},[s,r],function(p,i){return!n&&(p[0]!==i[0]||!wc(p[1],i[1],!0))});return _.createElement(Wl.Provider,{value:d},t)}var hie=[],I6=_.createContext(null);function Bw(){return _.useContext(I6)}var M6=_.createContext(hie);function km(e){var t=_.useContext(M6);return _.useMemo(function(){return e!==void 0?[].concat(un(t),[e]):t},[t,e])}var P6=_.createContext(null),HP=_.createContext({});function lz(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Sy(e)){var n=e.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||e.isContentEditable||n==="a"&&!!e.getAttribute("href"),s=e.getAttribute("tabindex"),d=Number(s),p=null;return s&&!Number.isNaN(d)?p=d:r&&p===null&&(p=0),r&&e.disabled&&(p=null),p!==null&&(p>=0||t&&p<0)}return!1}function fie(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=un(e.querySelectorAll("*")).filter(function(r){return lz(r,t)});return lz(e,t)&&n.unshift(e),n}var DI=gn.LEFT,$I=gn.RIGHT,kI=gn.UP,Nb=gn.DOWN,Fb=gn.ENTER,R6=gn.ESC,Zv=gn.HOME,Yv=gn.END,cz=[kI,Nb,DI,$I];function pie(e,t,n,r){var s,d="prev",p="next",i="children",x="parent";if(e==="inline"&&r===Fb)return{inlineTrigger:!0};var S=De(De({},kI,d),Nb,p),T=De(De(De(De({},DI,n?p:d),$I,n?d:p),Nb,i),Fb,i),M=De(De(De(De(De(De({},kI,d),Nb,p),Fb,i),R6,x),DI,n?i:x),$I,n?x:i),$={inline:S,horizontal:T,vertical:M,inlineSub:S,horizontalSub:M,verticalSub:M},L=(s=$["".concat(e).concat(t?"":"Sub")])===null||s===void 0?void 0:s[r];switch(L){case d:return{offset:-1,sibling:!0};case p:return{offset:1,sibling:!0};case x:return{offset:-1,sibling:!1};case i:return{offset:1,sibling:!1};default:return null}}function mie(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}function gie(e,t){for(var n=e||document.activeElement;n;){if(t.has(n))return n;n=n.parentElement}return null}function UP(e,t){var n=fie(e,!0);return n.filter(function(r){return t.has(r)})}function uz(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!e)return null;var s=UP(e,t),d=s.length,p=s.findIndex(function(i){return n===i});return r<0?p===-1?p=d-1:p-=1:r>0&&(p+=1),p=(p+d)%d,s[p]}var zI=function(t,n){var r=new Set,s=new Map,d=new Map;return t.forEach(function(p){var i=document.querySelector("[data-menu-id='".concat(E6(n,p),"']"));i&&(r.add(i),d.set(i,p),s.set(p,i))}),{elements:r,key2element:s,element2key:d}};function vie(e,t,n,r,s,d,p,i,x,S){var T=_.useRef(),M=_.useRef();M.current=t;var $=function(){ui.cancel(T.current)};return _.useEffect(function(){return function(){$()}},[]),function(L){var N=L.which;if([].concat(cz,[Fb,R6,Zv,Yv]).includes(N)){var V=d(),B=zI(V,r),j=B,H=j.elements,W=j.key2element,X=j.element2key,ee=W.get(t),J=gie(ee,H),Y=X.get(J),re=pie(e,p(Y,!0).length===1,n,N);if(!re&&N!==Zv&&N!==Yv)return;(cz.includes(N)||[Zv,Yv].includes(N))&&L.preventDefault();var se=function(pe){if(pe){var fe=pe,me=pe.querySelector("a");me!=null&&me.getAttribute("href")&&(fe=me);var Ie=X.get(pe);i(Ie),$(),T.current=ui(function(){M.current===Ie&&fe.focus()})}};if([Zv,Yv].includes(N)||re.sibling||!J){var ae;!J||e==="inline"?ae=s.current:ae=mie(J);var ce,Ce=UP(ae,H);N===Zv?ce=Ce[0]:N===Yv?ce=Ce[Ce.length-1]:ce=uz(ae,H,J,re.offset),se(ce)}else if(re.inlineTrigger)x(Y);else if(re.offset>0)x(Y,!0),$(),T.current=ui(function(){B=zI(V,r);var de=J.getAttribute("aria-controls"),pe=document.getElementById(de),fe=uz(pe,B.elements);se(fe)},5);else if(re.offset<0){var we=p(Y,!0),ge=we[we.length-2],ve=W.get(ge);x(ge,!1),se(ve)}}S==null||S(L)}}function yie(e){Promise.resolve().then(e)}var WP="__RC_UTIL_PATH_SPLIT__",dz=function(t){return t.join(WP)},_ie=function(t){return t.split(WP)},LI="rc-menu-more";function xie(){var e=_.useState({}),t=ot(e,2),n=t[1],r=_.useRef(new Map),s=_.useRef(new Map),d=_.useState([]),p=ot(d,2),i=p[0],x=p[1],S=_.useRef(0),T=_.useRef(!1),M=function(){T.current||n({})},$=_.useCallback(function(W,X){var ee=dz(X);s.current.set(ee,W),r.current.set(W,ee),S.current+=1;var J=S.current;yie(function(){J===S.current&&M()})},[]),L=_.useCallback(function(W,X){var ee=dz(X);s.current.delete(ee),r.current.delete(W)},[]),N=_.useCallback(function(W){x(W)},[]),V=_.useCallback(function(W,X){var ee=r.current.get(W)||"",J=_ie(ee);return X&&i.includes(J[0])&&J.unshift(LI),J},[i]),B=_.useCallback(function(W,X){return W.filter(function(ee){return ee!==void 0}).some(function(ee){var J=V(ee,!0);return J.includes(X)})},[V]),j=function(){var X=un(r.current.keys());return i.length&&X.push(LI),X},H=_.useCallback(function(W){var X="".concat(r.current.get(W)).concat(WP),ee=new Set;return un(s.current.keys()).forEach(function(J){J.startsWith(X)&&ee.add(s.current.get(J))}),ee},[]);return _.useEffect(function(){return function(){T.current=!0}},[]),{registerPath:$,unregisterPath:L,refreshOverflowKeys:N,isSubPathKey:B,getKeyPath:V,getKeys:j,getSubPathKeys:H}}function l0(e){var t=_.useRef(e);t.current=e;var n=_.useCallback(function(){for(var r,s=arguments.length,d=new Array(s),p=0;p<s;p++)d[p]=arguments[p];return(r=t.current)===null||r===void 0?void 0:r.call.apply(r,[t].concat(d))},[]);return e?n:void 0}var bie=Math.random().toFixed(5).toString().slice(2),hz=0;function wie(e){var t=Bi(e,{value:e}),n=ot(t,2),r=n[0],s=n[1];return _.useEffect(function(){hz+=1;var d="".concat(bie,"-").concat(hz);s("rc-menu-uuid-".concat(d))},[]),r}function O6(e,t,n,r){var s=_.useContext(Wl),d=s.activeKey,p=s.onActive,i=s.onInactive,x={active:d===e};return t||(x.onMouseEnter=function(S){n==null||n({key:e,domEvent:S}),p(e)},x.onMouseLeave=function(S){r==null||r({key:e,domEvent:S}),i(e)}),x}function A6(e){var t=_.useContext(Wl),n=t.mode,r=t.rtl,s=t.inlineIndent;if(n!=="inline")return null;var d=e;return r?{paddingRight:d*s}:{paddingLeft:d*s}}function D6(e){var t=e.icon,n=e.props,r=e.children,s;return t===null||t===!1?null:(typeof t=="function"?s=_.createElement(t,We({},n)):typeof t!="boolean"&&(s=t),s||r||null)}var Sie=["item"];function P1(e){var t=e.item,n=Er(e,Sie);return Object.defineProperty(n,"item",{get:function(){return go(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),n}var Cie=["title","attribute","elementRef"],Eie=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],Tie=["active"],Iie=function(e){Kl(n,e);var t=Xl(n);function n(){return zo(this,n),t.apply(this,arguments)}return Lo(n,[{key:"render",value:function(){var s=this.props,d=s.title,p=s.attribute,i=s.elementRef,x=Er(s,Cie),S=vo(x,["eventKey","popupClassName","popupOffset","onTitleClick"]);return go(!p,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),_.createElement(Hl.Item,qt({},p,{title:typeof d=="string"?d:void 0},S,{ref:i}))}}]),n}(_.Component),Mie=_.forwardRef(function(e,t){var n=e.style,r=e.className,s=e.eventKey;e.warnKey;var d=e.disabled,p=e.itemIcon,i=e.children,x=e.role,S=e.onMouseEnter,T=e.onMouseLeave,M=e.onClick,$=e.onKeyDown,L=e.onFocus,N=Er(e,Eie),V=T6(s),B=_.useContext(Wl),j=B.prefixCls,H=B.onItemClick,W=B.disabled,X=B.overflowDisabled,ee=B.itemIcon,J=B.selectedKeys,Y=B.onActive,re=_.useContext(HP),se=re._internalRenderMenuItem,ae="".concat(j,"-item"),ce=_.useRef(),Ce=_.useRef(),we=W||d,ge=lu(t,Ce),ve=km(s),de=function(wt){return{key:s,keyPath:un(ve).reverse(),item:ce.current,domEvent:wt}},pe=p||ee,fe=O6(s,we,S,T),me=fe.active,Ie=Er(fe,Tie),Me=J.includes(s),Be=A6(ve.length),$e=function(wt){if(!we){var Pe=de(wt);M==null||M(P1(Pe)),H(Pe)}},ze=function(wt){if($==null||$(wt),wt.which===gn.ENTER){var Pe=de(wt);M==null||M(P1(Pe)),H(Pe)}},Je=function(wt){Y(s),L==null||L(wt)},yt={};e.role==="option"&&(yt["aria-selected"]=Me);var at=_.createElement(Iie,qt({ref:ce,elementRef:ge,role:x===null?"none":x||"menuitem",tabIndex:d?null:-1,"data-menu-id":X&&V?null:V},vo(N,["extra"]),Ie,yt,{component:"li","aria-disabled":d,style:We(We({},Be),n),className:pt(ae,De(De(De({},"".concat(ae,"-active"),me),"".concat(ae,"-selected"),Me),"".concat(ae,"-disabled"),we),r),onClick:$e,onKeyDown:ze,onFocus:Je}),i,_.createElement(D6,{props:We(We({},e),{},{isSelected:Me}),icon:pe}));return se&&(at=se(at,e,{selected:Me})),at});function Pie(e,t){var n=e.eventKey,r=Bw(),s=km(n);return _.useEffect(function(){if(r)return r.registerPath(n,s),function(){r.unregisterPath(n,s)}},[s]),r?null:_.createElement(Mie,qt({},e,{ref:t}))}const Ay=_.forwardRef(Pie);var Rie=["className","children"],Oie=function(t,n){var r=t.className,s=t.children,d=Er(t,Rie),p=_.useContext(Wl),i=p.prefixCls,x=p.mode,S=p.rtl;return _.createElement("ul",qt({className:pt(i,S&&"".concat(i,"-rtl"),"".concat(i,"-sub"),"".concat(i,"-").concat(x==="inline"?"inline":"vertical"),r),role:"menu"},d,{"data-menu-list":!0,ref:n}),s)},GP=_.forwardRef(Oie);GP.displayName="SubMenuList";function qP(e,t){return Ha(e).map(function(n,r){if(_.isValidElement(n)){var s,d,p=n.key,i=(s=(d=n.props)===null||d===void 0?void 0:d.eventKey)!==null&&s!==void 0?s:p,x=i==null;x&&(i="tmp_key-".concat([].concat(un(t),[r]).join("-")));var S={key:i,eventKey:i};return _.cloneElement(n,S)}return n})}var Na={adjustX:1,adjustY:1},Aie={topLeft:{points:["bl","tl"],overflow:Na},topRight:{points:["br","tr"],overflow:Na},bottomLeft:{points:["tl","bl"],overflow:Na},bottomRight:{points:["tr","br"],overflow:Na},leftTop:{points:["tr","tl"],overflow:Na},leftBottom:{points:["br","bl"],overflow:Na},rightTop:{points:["tl","tr"],overflow:Na},rightBottom:{points:["bl","br"],overflow:Na}},Die={topLeft:{points:["bl","tl"],overflow:Na},topRight:{points:["br","tr"],overflow:Na},bottomLeft:{points:["tl","bl"],overflow:Na},bottomRight:{points:["tr","br"],overflow:Na},rightTop:{points:["tr","tl"],overflow:Na},rightBottom:{points:["br","bl"],overflow:Na},leftTop:{points:["tl","tr"],overflow:Na},leftBottom:{points:["bl","br"],overflow:Na}};function $6(e,t,n){if(t)return t;if(n)return n[e]||n.other}var $ie={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function kie(e){var t=e.prefixCls,n=e.visible,r=e.children,s=e.popup,d=e.popupStyle,p=e.popupClassName,i=e.popupOffset,x=e.disabled,S=e.mode,T=e.onVisibleChange,M=_.useContext(Wl),$=M.getPopupContainer,L=M.rtl,N=M.subMenuOpenDelay,V=M.subMenuCloseDelay,B=M.builtinPlacements,j=M.triggerSubMenuAction,H=M.forceSubMenuRender,W=M.rootClassName,X=M.motion,ee=M.defaultMotions,J=_.useState(!1),Y=ot(J,2),re=Y[0],se=Y[1],ae=We(L?We({},Die):We({},Aie),B),ce=$ie[S],Ce=$6(S,X,ee),we=_.useRef(Ce);S!=="inline"&&(we.current=Ce);var ge=We(We({},we.current),{},{leavedClassName:"".concat(t,"-hidden"),removeOnLeave:!1,motionAppear:!0}),ve=_.useRef();return _.useEffect(function(){return ve.current=ui(function(){se(n)}),function(){ui.cancel(ve.current)}},[n]),_.createElement(Oy,{prefixCls:t,popupClassName:pt("".concat(t,"-popup"),De({},"".concat(t,"-rtl"),L),p,W),stretch:S==="horizontal"?"minWidth":null,getPopupContainer:$,builtinPlacements:ae,popupPlacement:ce,popupVisible:re,popup:s,popupStyle:d,popupAlign:i&&{offset:i},action:x?[]:[j],mouseEnterDelay:N,mouseLeaveDelay:V,onPopupVisibleChange:T,forceRender:H,popupMotion:ge,fresh:!0},r)}function zie(e){var t=e.id,n=e.open,r=e.keyPath,s=e.children,d="inline",p=_.useContext(Wl),i=p.prefixCls,x=p.forceSubMenuRender,S=p.motion,T=p.defaultMotions,M=p.mode,$=_.useRef(!1);$.current=M===d;var L=_.useState(!$.current),N=ot(L,2),V=N[0],B=N[1],j=$.current?n:!1;_.useEffect(function(){$.current&&B(!1)},[M]);var H=We({},$6(d,S,T));r.length>1&&(H.motionAppear=!1);var W=H.onVisibleChanged;return H.onVisibleChanged=function(X){return!$.current&&!X&&B(!0),W==null?void 0:W(X)},V?null:_.createElement(uy,{mode:d,locked:!$.current},_.createElement(dl,qt({visible:j},H,{forceRender:x,removeOnLeave:!1,leavedClassName:"".concat(i,"-hidden")}),function(X){var ee=X.className,J=X.style;return _.createElement(GP,{id:t,className:ee,style:J},s)}))}var Lie=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","popupStyle","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],Nie=["active"],Fie=_.forwardRef(function(e,t){var n=e.style,r=e.className,s=e.title,d=e.eventKey;e.warnKey;var p=e.disabled,i=e.internalPopupClose,x=e.children,S=e.itemIcon,T=e.expandIcon,M=e.popupClassName,$=e.popupOffset,L=e.popupStyle,N=e.onClick,V=e.onMouseEnter,B=e.onMouseLeave,j=e.onTitleClick,H=e.onTitleMouseEnter,W=e.onTitleMouseLeave,X=Er(e,Lie),ee=T6(d),J=_.useContext(Wl),Y=J.prefixCls,re=J.mode,se=J.openKeys,ae=J.disabled,ce=J.overflowDisabled,Ce=J.activeKey,we=J.selectedKeys,ge=J.itemIcon,ve=J.expandIcon,de=J.onItemClick,pe=J.onOpenChange,fe=J.onActive,me=_.useContext(HP),Ie=me._internalRenderSubMenuItem,Me=_.useContext(P6),Be=Me.isSubPathKey,$e=km(),ze="".concat(Y,"-submenu"),Je=ae||p,yt=_.useRef(),at=_.useRef(),gt=S??ge,wt=T??ve,Pe=se.includes(d),mt=!ce&&Pe,dt=Be(we,d),ht=O6(d,Je,H,W),je=ht.active,St=Er(ht,Nie),Ct=_.useState(!1),Lt=ot(Ct,2),At=Lt[0],Yt=Lt[1],Kt=function(cn){Je||Yt(cn)},Dt=function(cn){Kt(!0),V==null||V({key:d,domEvent:cn})},Wt=function(cn){Kt(!1),B==null||B({key:d,domEvent:cn})},Vt=_.useMemo(function(){return je||(re!=="inline"?At||Be([Ce],d):!1)},[re,je,Ce,At,d,Be]),Rt=A6($e.length),dn=function(cn){Je||(j==null||j({key:d,domEvent:cn}),re==="inline"&&pe(d,!Pe))},hn=l0(function(Ut){N==null||N(P1(Ut)),de(Ut)}),Pn=function(cn){re!=="inline"&&pe(d,cn)},Dn=function(){fe(d)},yn=ee&&"".concat(ee,"-popup"),Rn=_.createElement("div",qt({role:"menuitem",style:Rt,className:"".concat(ze,"-title"),tabIndex:Je?null:-1,ref:yt,title:typeof s=="string"?s:null,"data-menu-id":ce&&ee?null:ee,"aria-expanded":mt,"aria-haspopup":!0,"aria-controls":yn,"aria-disabled":Je,onClick:dn,onFocus:Dn},St),s,_.createElement(D6,{icon:re!=="horizontal"?wt:void 0,props:We(We({},e),{},{isOpen:mt,isSubMenu:!0})},_.createElement("i",{className:"".concat(ze,"-arrow")}))),kn=_.useRef(re);if(re!=="inline"&&$e.length>1?kn.current="vertical":kn.current=re,!ce){var Cn=kn.current;Rn=_.createElement(kie,{mode:Cn,prefixCls:ze,visible:!i&&mt&&re!=="inline",popupClassName:M,popupOffset:$,popupStyle:L,popup:_.createElement(uy,{mode:Cn==="horizontal"?"vertical":Cn},_.createElement(GP,{id:yn,ref:at},x)),disabled:Je,onVisibleChange:Pn},Rn)}var nn=_.createElement(Hl.Item,qt({ref:t,role:"none"},X,{component:"li",style:n,className:pt(ze,"".concat(ze,"-").concat(re),r,De(De(De(De({},"".concat(ze,"-open"),mt),"".concat(ze,"-active"),Vt),"".concat(ze,"-selected"),dt),"".concat(ze,"-disabled"),Je)),onMouseEnter:Dt,onMouseLeave:Wt}),Rn,!ce&&_.createElement(zie,{id:yn,open:mt,keyPath:$e},x));return Ie&&(nn=Ie(nn,e,{selected:dt,active:Vt,open:mt,disabled:Je})),_.createElement(uy,{onItemClick:hn,mode:re==="horizontal"?"vertical":re,itemIcon:gt,expandIcon:wt},nn)}),jw=_.forwardRef(function(e,t){var n=e.eventKey,r=e.children,s=km(n),d=qP(r,s),p=Bw();_.useEffect(function(){if(p)return p.registerPath(n,s),function(){p.unregisterPath(n,s)}},[s]);var i;return p?i=d:i=_.createElement(Fie,qt({ref:t},e),d),_.createElement(M6.Provider,{value:s},i)});function KP(e){var t=e.className,n=e.style,r=_.useContext(Wl),s=r.prefixCls,d=Bw();return d?null:_.createElement("li",{role:"separator",className:pt("".concat(s,"-item-divider"),t),style:n})}var Bie=["className","title","eventKey","children"],jie=_.forwardRef(function(e,t){var n=e.className,r=e.title;e.eventKey;var s=e.children,d=Er(e,Bie),p=_.useContext(Wl),i=p.prefixCls,x="".concat(i,"-item-group");return _.createElement("li",qt({ref:t,role:"presentation"},d,{onClick:function(T){return T.stopPropagation()},className:pt(x,n)}),_.createElement("div",{role:"presentation",className:"".concat(x,"-title"),title:typeof r=="string"?r:void 0},r),_.createElement("ul",{role:"group",className:"".concat(x,"-list")},s))}),XP=_.forwardRef(function(e,t){var n=e.eventKey,r=e.children,s=km(n),d=qP(r,s),p=Bw();return p?d:_.createElement(jie,qt({ref:t},vo(e,["warnKey"])),d)}),Vie=["label","children","key","type","extra"];function NI(e,t,n){var r=t.item,s=t.group,d=t.submenu,p=t.divider;return(e||[]).map(function(i,x){if(i&&cr(i)==="object"){var S=i,T=S.label,M=S.children,$=S.key,L=S.type,N=S.extra,V=Er(S,Vie),B=$??"tmp-".concat(x);return M||L==="group"?L==="group"?_.createElement(s,qt({key:B},V,{title:T}),NI(M,t,n)):_.createElement(d,qt({key:B},V,{title:T}),NI(M,t,n)):L==="divider"?_.createElement(p,qt({key:B},V)):_.createElement(r,qt({key:B},V,{extra:N}),T,(!!N||N===0)&&_.createElement("span",{className:"".concat(n,"-item-extra")},N))}return null}).filter(function(i){return i})}function fz(e,t,n,r,s){var d=e,p=We({divider:KP,item:Ay,group:XP,submenu:jw},r);return t&&(d=NI(t,p,s)),qP(d,n)}var Hie=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem","_internalComponents"],Rh=[],Uie=_.forwardRef(function(e,t){var n,r=e,s=r.prefixCls,d=s===void 0?"rc-menu":s,p=r.rootClassName,i=r.style,x=r.className,S=r.tabIndex,T=S===void 0?0:S,M=r.items,$=r.children,L=r.direction,N=r.id,V=r.mode,B=V===void 0?"vertical":V,j=r.inlineCollapsed,H=r.disabled,W=r.disabledOverflow,X=r.subMenuOpenDelay,ee=X===void 0?.1:X,J=r.subMenuCloseDelay,Y=J===void 0?.1:J,re=r.forceSubMenuRender,se=r.defaultOpenKeys,ae=r.openKeys,ce=r.activeKey,Ce=r.defaultActiveFirst,we=r.selectable,ge=we===void 0?!0:we,ve=r.multiple,de=ve===void 0?!1:ve,pe=r.defaultSelectedKeys,fe=r.selectedKeys,me=r.onSelect,Ie=r.onDeselect,Me=r.inlineIndent,Be=Me===void 0?24:Me,$e=r.motion,ze=r.defaultMotions,Je=r.triggerSubMenuAction,yt=Je===void 0?"hover":Je,at=r.builtinPlacements,gt=r.itemIcon,wt=r.expandIcon,Pe=r.overflowedIndicator,mt=Pe===void 0?"...":Pe,dt=r.overflowedIndicatorPopupClassName,ht=r.getPopupContainer,je=r.onClick,St=r.onOpenChange,Ct=r.onKeyDown;r.openAnimation,r.openTransitionName;var Lt=r._internalRenderMenuItem,At=r._internalRenderSubMenuItem,Yt=r._internalComponents,Kt=Er(r,Hie),Dt=_.useMemo(function(){return[fz($,M,Rh,Yt,d),fz($,M,Rh,{},d)]},[$,M,Yt]),Wt=ot(Dt,2),Vt=Wt[0],Rt=Wt[1],dn=_.useState(!1),hn=ot(dn,2),Pn=hn[0],Dn=hn[1],yn=_.useRef(),Rn=wie(N),kn=L==="rtl",Cn=Bi(se,{value:ae,postState:function(Xn){return Xn||Rh}}),nn=ot(Cn,2),Ut=nn[0],cn=nn[1],an=function(Xn){var $r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;function Jr(){cn(Xn),St==null||St(Xn)}$r?xc.flushSync(Jr):Jr()},Zt=_.useState(Ut),Xt=ot(Zt,2),Hn=Xt[0],br=Xt[1],mr=_.useRef(!1),pr=_.useMemo(function(){return(B==="inline"||B==="vertical")&&j?["vertical",j]:[B,!1]},[B,j]),Tr=ot(pr,2),ur=Tr[0],Mr=Tr[1],tr=ur==="inline",ft=_.useState(ur),ye=ot(ft,2),Se=ye[0],ke=ye[1],Ze=_.useState(Mr),Ae=ot(Ze,2),Ge=Ae[0],ut=Ae[1];_.useEffect(function(){ke(ur),ut(Mr),mr.current&&(tr?cn(Hn):an(Rh))},[ur,Mr]);var Qe=_.useState(0),_t=ot(Qe,2),It=_t[0],bt=_t[1],Mt=It>=Vt.length-1||Se!=="horizontal"||W;_.useEffect(function(){tr&&br(Ut)},[Ut]),_.useEffect(function(){return mr.current=!0,function(){mr.current=!1}},[]);var kt=xie(),Gt=kt.registerPath,vn=kt.unregisterPath,On=kt.refreshOverflowKeys,bn=kt.isSubPathKey,zn=kt.getKeyPath,Mn=kt.getKeys,wn=kt.getSubPathKeys,_n=_.useMemo(function(){return{registerPath:Gt,unregisterPath:vn}},[Gt,vn]),rr=_.useMemo(function(){return{isSubPathKey:bn}},[bn]);_.useEffect(function(){On(Mt?Rh:Vt.slice(It+1).map(function(ar){return ar.key}))},[It,Mt]);var or=Bi(ce||Ce&&((n=Vt[0])===null||n===void 0?void 0:n.key),{value:ce}),kr=ot(or,2),zr=kr[0],Hr=kr[1],ei=l0(function(ar){Hr(ar)}),Hi=l0(function(){Hr(void 0)});_.useImperativeHandle(t,function(){return{list:yn.current,focus:function(Xn){var $r,Jr=Mn(),Un=zI(Jr,Rn),sr=Un.elements,di=Un.key2element,Pi=Un.element2key,mi=UP(yn.current,sr),Gi=zr??(mi[0]?Pi.get(mi[0]):($r=Vt.find(function(Gn){return!Gn.props.disabled}))===null||$r===void 0?void 0:$r.key),Xi=di.get(Gi);if(Gi&&Xi){var yo;Xi==null||(yo=Xi.focus)===null||yo===void 0||yo.call(Xi,Xn)}}}});var ir=Bi(pe||[],{value:fe,postState:function(Xn){return Array.isArray(Xn)?Xn:Xn==null?Rh:[Xn]}}),Ar=ot(ir,2),Gr=Ar[0],Ei=Ar[1],fo=function(Xn){if(ge){var $r=Xn.key,Jr=Gr.includes($r),Un;de?Jr?Un=Gr.filter(function(di){return di!==$r}):Un=[].concat(un(Gr),[$r]):Un=[$r],Ei(Un);var sr=We(We({},Xn),{},{selectedKeys:Un});Jr?Ie==null||Ie(sr):me==null||me(sr)}!de&&Ut.length&&Se!=="inline"&&an(Rh)},No=l0(function(ar){je==null||je(P1(ar)),fo(ar)}),qi=l0(function(ar,Xn){var $r=Ut.filter(function(Un){return Un!==ar});if(Xn)$r.push(ar);else if(Se!=="inline"){var Jr=wn(ar);$r=$r.filter(function(Un){return!Jr.has(Un)})}wc(Ut,$r,!0)||an($r,!0)}),Ki=function(Xn,$r){var Jr=$r??!Ut.includes(Xn);qi(Xn,Jr)},Ui=vie(Se,zr,kn,Rn,yn,Mn,zn,Hr,Ki,Ct);_.useEffect(function(){Dn(!0)},[]);var Wi=_.useMemo(function(){return{_internalRenderMenuItem:Lt,_internalRenderSubMenuItem:At}},[Lt,At]),yi=Se!=="horizontal"||W?Vt:Vt.map(function(ar,Xn){return _.createElement(uy,{key:ar.key,overflowDisabled:Xn>It},ar)}),ki=_.createElement(Hl,qt({id:N,ref:yn,prefixCls:"".concat(d,"-overflow"),component:"ul",itemComponent:Ay,className:pt(d,"".concat(d,"-root"),"".concat(d,"-").concat(Se),x,De(De({},"".concat(d,"-inline-collapsed"),Ge),"".concat(d,"-rtl"),kn),p),dir:L,style:i,role:"menu",tabIndex:T,data:yi,renderRawItem:function(Xn){return Xn},renderRawRest:function(Xn){var $r=Xn.length,Jr=$r?Vt.slice(-$r):null;return _.createElement(jw,{eventKey:LI,title:mt,disabled:Mt,internalPopupClose:$r===0,popupClassName:dt},Jr)},maxCount:Se!=="horizontal"||W?Hl.INVALIDATE:Hl.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(Xn){bt(Xn)},onKeyDown:Ui},Kt));return _.createElement(HP.Provider,{value:Wi},_.createElement(C6.Provider,{value:Rn},_.createElement(uy,{prefixCls:d,rootClassName:p,mode:Se,openKeys:Ut,rtl:kn,disabled:H,motion:Pn?$e:null,defaultMotions:Pn?ze:null,activeKey:zr,onActive:ei,onInactive:Hi,selectedKeys:Gr,inlineIndent:Be,subMenuOpenDelay:ee,subMenuCloseDelay:Y,forceSubMenuRender:re,builtinPlacements:at,triggerSubMenuAction:yt,getPopupContainer:ht,itemIcon:gt,expandIcon:wt,onItemClick:No,onOpenChange:qi},_.createElement(P6.Provider,{value:rr},ki),_.createElement("div",{style:{display:"none"},"aria-hidden":!0},_.createElement(I6.Provider,{value:_n},Rt)))))}),zm=Uie;zm.Item=Ay;zm.SubMenu=jw;zm.ItemGroup=XP;zm.Divider=KP;var Wie={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"bars",theme:"outlined"},Gie=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:Wie}))},qie=_.forwardRef(Gie),Kie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},Xie=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:Kie}))},R1=_.forwardRef(Xie);const Zie=e=>!isNaN(parseFloat(e))&&isFinite(e),k6=_.createContext({siderHook:{addSider:()=>null,removeSider:()=>null}}),Yie=e=>{const{antCls:t,componentCls:n,colorText:r,footerBg:s,headerHeight:d,headerPadding:p,headerColor:i,footerPadding:x,fontSize:S,bodyBg:T,headerBg:M}=e;return{[n]:{display:"flex",flex:"auto",flexDirection:"column",minHeight:0,background:T,"&, *":{boxSizing:"border-box"},[`&${n}-has-sider`]:{flexDirection:"row",[`> ${n}, > ${n}-content`]:{width:0}},[`${n}-header, &${n}-footer`]:{flex:"0 0 auto"},"&-rtl":{direction:"rtl"}},[`${n}-header`]:{height:d,padding:p,color:i,lineHeight:nt(d),background:M,[`${t}-menu`]:{lineHeight:"inherit"}},[`${n}-footer`]:{padding:x,color:r,fontSize:S,background:s},[`${n}-content`]:{flex:"auto",color:r,minHeight:0}}},z6=e=>{const{colorBgLayout:t,controlHeight:n,controlHeightLG:r,colorText:s,controlHeightSM:d,marginXXS:p,colorTextLightSolid:i,colorBgContainer:x}=e,S=r*1.25;return{colorBgHeader:"#001529",colorBgBody:t,colorBgTrigger:"#002140",bodyBg:t,headerBg:"#001529",headerHeight:n*2,headerPadding:`0 ${S}px`,headerColor:s,footerPadding:`${d}px ${S}px`,footerBg:t,siderBg:"#001529",triggerHeight:r+p*2,triggerBg:"#002140",triggerColor:i,zeroTriggerWidth:r,zeroTriggerHeight:r,lightSiderBg:x,lightTriggerBg:x,lightTriggerColor:s}},L6=[["colorBgBody","bodyBg"],["colorBgHeader","headerBg"],["colorBgTrigger","triggerBg"]],N6=Qi("Layout",e=>[Yie(e)],z6,{deprecatedTokens:L6}),Jie=e=>{const{componentCls:t,siderBg:n,motionDurationMid:r,motionDurationSlow:s,antCls:d,triggerHeight:p,triggerColor:i,triggerBg:x,headerHeight:S,zeroTriggerWidth:T,zeroTriggerHeight:M,borderRadius:$,lightSiderBg:L,lightTriggerColor:N,lightTriggerBg:V,bodyBg:B}=e;return{[t]:{position:"relative",minWidth:0,background:n,transition:`all ${r}, background 0s`,"&-has-trigger":{paddingBottom:p},"&-right":{order:1},[`${t}-children`]:{height:"100%",marginTop:-.1,paddingTop:.1,[`${d}-menu${d}-menu-inline-collapsed`]:{width:"auto"}},[`${t}-trigger`]:{position:"fixed",bottom:0,zIndex:1,height:p,color:i,lineHeight:nt(p),textAlign:"center",background:x,cursor:"pointer",transition:`all ${r}`},"&-zero-width":{"> *":{overflow:"hidden"},"&-trigger":{position:"absolute",top:S,insetInlineEnd:e.calc(T).mul(-1).equal(),zIndex:1,width:T,height:M,color:i,fontSize:e.fontSizeXL,display:"flex",alignItems:"center",justifyContent:"center",background:n,borderStartStartRadius:0,borderStartEndRadius:$,borderEndEndRadius:$,borderEndStartRadius:0,cursor:"pointer",transition:`background ${s} ease`,"&::after":{position:"absolute",inset:0,background:"transparent",transition:`all ${s}`,content:'""'},"&:hover::after":{background:"rgba(255, 255, 255, 0.2)"},"&-right":{insetInlineStart:e.calc(T).mul(-1).equal(),borderStartStartRadius:$,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:$}}},"&-light":{background:L,[`${t}-trigger`]:{color:N,background:V},[`${t}-zero-width-trigger`]:{color:N,background:V,border:`1px solid ${B}`,borderInlineStart:0}}}}},Qie=Qi(["Layout","Sider"],e=>[Jie(e)],z6,{deprecatedTokens:L6});var eoe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const pz={xs:"479.98px",sm:"575.98px",md:"767.98px",lg:"991.98px",xl:"1199.98px",xxl:"1599.98px"},Vw=_.createContext({}),toe=(()=>{let e=0;return function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return e+=1,`${t}${e}`}})(),F6=_.forwardRef((e,t)=>{const{prefixCls:n,className:r,trigger:s,children:d,defaultCollapsed:p=!1,theme:i="dark",style:x={},collapsible:S=!1,reverseArrow:T=!1,width:M=200,collapsedWidth:$=80,zeroWidthTriggerStyle:L,breakpoint:N,onCollapse:V,onBreakpoint:B}=e,j=eoe(e,["prefixCls","className","trigger","children","defaultCollapsed","theme","style","collapsible","reverseArrow","width","collapsedWidth","zeroWidthTriggerStyle","breakpoint","onCollapse","onBreakpoint"]),{siderHook:H}=_.useContext(k6),[W,X]=_.useState("collapsed"in e?e.collapsed:p),[ee,J]=_.useState(!1);_.useEffect(()=>{"collapsed"in e&&X(e.collapsed)},[e.collapsed]);const Y=(pe,fe)=>{"collapsed"in e||X(pe),V==null||V(pe,fe)},{getPrefixCls:re}=_.useContext(fr),se=re("layout-sider",n),[ae,ce,Ce]=Qie(se),we=_.useRef();we.current=pe=>{J(pe.matches),B==null||B(pe.matches),W!==pe.matches&&Y(pe.matches,"responsive")},_.useEffect(()=>{function pe(me){return we.current(me)}let fe;if(typeof window<"u"){const{matchMedia:me}=window;if(me&&N&&N in pz){fe=me(`screen and (max-width: ${pz[N]})`);try{fe.addEventListener("change",pe)}catch{fe.addListener(pe)}pe(fe)}}return()=>{try{fe==null||fe.removeEventListener("change",pe)}catch{fe==null||fe.removeListener(pe)}}},[N]),_.useEffect(()=>{const pe=toe("ant-sider-");return H.addSider(pe),()=>H.removeSider(pe)},[]);const ge=()=>{Y(!W,"clickTrigger")},ve=()=>{const pe=vo(j,["collapsed"]),fe=W?$:M,me=Zie(fe)?`${fe}px`:String(fe),Ie=parseFloat(String($||0))===0?_.createElement("span",{onClick:ge,className:pt(`${se}-zero-width-trigger`,`${se}-zero-width-trigger-${T?"right":"left"}`),style:L},s||_.createElement(qie,null)):null,$e={expanded:T?_.createElement(ly,null):_.createElement(R1,null),collapsed:T?_.createElement(R1,null):_.createElement(ly,null)}[W?"collapsed":"expanded"],ze=s!==null?Ie||_.createElement("div",{className:`${se}-trigger`,onClick:ge,style:{width:me}},s||$e):null,Je=Object.assign(Object.assign({},x),{flex:`0 0 ${me}`,maxWidth:me,minWidth:me,width:me}),yt=pt(se,`${se}-${i}`,{[`${se}-collapsed`]:!!W,[`${se}-has-trigger`]:S&&s!==null&&!Ie,[`${se}-below`]:!!ee,[`${se}-zero-width`]:parseFloat(me)===0},r,ce,Ce);return _.createElement("aside",Object.assign({className:yt},pe,{style:Je,ref:t}),_.createElement("div",{className:`${se}-children`},d),S||ee&&Ie?ze:null)},de=_.useMemo(()=>({siderCollapsed:W}),[W]);return ae(_.createElement(Vw.Provider,{value:de},ve()))});var noe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},roe=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:noe}))},ZP=_.forwardRef(roe);const O1=_.createContext({prefixCls:"",firstLevel:!0,inlineCollapsed:!1});var ioe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const B6=e=>{const{prefixCls:t,className:n,dashed:r}=e,s=ioe(e,["prefixCls","className","dashed"]),{getPrefixCls:d}=_.useContext(fr),p=d("menu",t),i=pt({[`${p}-item-divider-dashed`]:!!r},n);return _.createElement(KP,Object.assign({className:i},s))},j6=e=>{var t;const{className:n,children:r,icon:s,title:d,danger:p,extra:i}=e,{prefixCls:x,firstLevel:S,direction:T,disableMenuItemTitleTooltip:M,inlineCollapsed:$}=_.useContext(O1),L=W=>{const X=r==null?void 0:r[0],ee=_.createElement("span",{className:pt(`${x}-title-content`,{[`${x}-title-content-with-extra`]:!!i||i===0})},r);return(!s||_.isValidElement(r)&&r.type==="span")&&r&&W&&S&&typeof X=="string"?_.createElement("div",{className:`${x}-inline-collapsed-noicon`},X.charAt(0)):ee},{siderCollapsed:N}=_.useContext(Vw);let V=d;typeof d>"u"?V=S?r:"":d===!1&&(V="");const B={title:V};!N&&!$&&(B.title=null,B.open=!1);const j=Ha(r).length;let H=_.createElement(Ay,Object.assign({},vo(e,["title","icon","danger"]),{className:pt({[`${x}-item-danger`]:p,[`${x}-item-only-child`]:(s?j+1:j)===1},n),title:typeof d=="string"?d:void 0}),ns(s,{className:pt(_.isValidElement(s)?(t=s.props)===null||t===void 0?void 0:t.className:"",`${x}-item-icon`)}),L($));return M||(H=_.createElement($d,Object.assign({},B,{placement:T==="rtl"?"left":"right",overlayClassName:`${x}-inline-collapsed-tooltip`}),H)),H};var ooe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const A1=_.createContext(null),V6=_.forwardRef((e,t)=>{const{children:n}=e,r=ooe(e,["children"]),s=_.useContext(A1),d=_.useMemo(()=>Object.assign(Object.assign({},s),r),[s,r.prefixCls,r.mode,r.selectable,r.rootClassName]),p=pq(n),i=lu(t,p?n.ref:null);return _.createElement(A1.Provider,{value:d},_.createElement(Dd,{space:!0},p?_.cloneElement(n,{ref:i}):n))}),aoe=e=>{const{componentCls:t,motionDurationSlow:n,horizontalLineHeight:r,colorSplit:s,lineWidth:d,lineType:p,itemPaddingInline:i}=e;return{[`${t}-horizontal`]:{lineHeight:r,border:0,borderBottom:`${nt(d)} ${p} ${s}`,boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'},[`${t}-item, ${t}-submenu`]:{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:i},[`> ${t}-item:hover,
        > ${t}-item-active,
        > ${t}-submenu ${t}-submenu-title:hover`]:{backgroundColor:"transparent"},[`${t}-item, ${t}-submenu-title`]:{transition:[`border-color ${n}`,`background ${n}`].join(",")},[`${t}-submenu-arrow`]:{display:"none"}}}},soe=e=>{let{componentCls:t,menuArrowOffset:n,calc:r}=e;return{[`${t}-rtl`]:{direction:"rtl"},[`${t}-submenu-rtl`]:{transformOrigin:"100% 0"},[`${t}-rtl${t}-vertical,
    ${t}-submenu-rtl ${t}-vertical`]:{[`${t}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateY(${nt(r(n).mul(-1).equal())})`},"&::after":{transform:`rotate(45deg) translateY(${nt(n)})`}}}}},mz=e=>Object.assign({},Ad(e)),gz=(e,t)=>{const{componentCls:n,itemColor:r,itemSelectedColor:s,groupTitleColor:d,itemBg:p,subMenuItemBg:i,itemSelectedBg:x,activeBarHeight:S,activeBarWidth:T,activeBarBorderWidth:M,motionDurationSlow:$,motionEaseInOut:L,motionEaseOut:N,itemPaddingInline:V,motionDurationMid:B,itemHoverColor:j,lineType:H,colorSplit:W,itemDisabledColor:X,dangerItemColor:ee,dangerItemHoverColor:J,dangerItemSelectedColor:Y,dangerItemActiveBg:re,dangerItemSelectedBg:se,popupBg:ae,itemHoverBg:ce,itemActiveBg:Ce,menuSubMenuBg:we,horizontalItemSelectedColor:ge,horizontalItemSelectedBg:ve,horizontalItemBorderRadius:de,horizontalItemHoverBg:pe}=e;return{[`${n}-${t}, ${n}-${t} > ${n}`]:{color:r,background:p,[`&${n}-root:focus-visible`]:Object.assign({},mz(e)),[`${n}-item`]:{"&-group-title, &-extra":{color:d}},[`${n}-submenu-selected`]:{[`> ${n}-submenu-title`]:{color:s}},[`${n}-item, ${n}-submenu-title`]:{color:r,[`&:not(${n}-item-disabled):focus-visible`]:Object.assign({},mz(e))},[`${n}-item-disabled, ${n}-submenu-disabled`]:{color:`${X} !important`},[`${n}-item:not(${n}-item-selected):not(${n}-submenu-selected)`]:{[`&:hover, > ${n}-submenu-title:hover`]:{color:j}},[`&:not(${n}-horizontal)`]:{[`${n}-item:not(${n}-item-selected)`]:{"&:hover":{backgroundColor:ce},"&:active":{backgroundColor:Ce}},[`${n}-submenu-title`]:{"&:hover":{backgroundColor:ce},"&:active":{backgroundColor:Ce}}},[`${n}-item-danger`]:{color:ee,[`&${n}-item:hover`]:{[`&:not(${n}-item-selected):not(${n}-submenu-selected)`]:{color:J}},[`&${n}-item:active`]:{background:re}},[`${n}-item a`]:{"&, &:hover":{color:"inherit"}},[`${n}-item-selected`]:{color:s,[`&${n}-item-danger`]:{color:Y},"a, a:hover":{color:"inherit"}},[`& ${n}-item-selected`]:{backgroundColor:x,[`&${n}-item-danger`]:{backgroundColor:se}},[`&${n}-submenu > ${n}`]:{backgroundColor:we},[`&${n}-popup > ${n}`]:{backgroundColor:ae},[`&${n}-submenu-popup > ${n}`]:{backgroundColor:ae},[`&${n}-horizontal`]:Object.assign(Object.assign({},t==="dark"?{borderBottom:0}:{}),{[`> ${n}-item, > ${n}-submenu`]:{top:M,marginTop:e.calc(M).mul(-1).equal(),marginBottom:0,borderRadius:de,"&::after":{position:"absolute",insetInline:V,bottom:0,borderBottom:`${nt(S)} solid transparent`,transition:`border-color ${$} ${L}`,content:'""'},"&:hover, &-active, &-open":{background:pe,"&::after":{borderBottomWidth:S,borderBottomColor:ge}},"&-selected":{color:ge,backgroundColor:ve,"&:hover":{backgroundColor:ve},"&::after":{borderBottomWidth:S,borderBottomColor:ge}}}}),[`&${n}-root`]:{[`&${n}-inline, &${n}-vertical`]:{borderInlineEnd:`${nt(M)} ${H} ${W}`}},[`&${n}-inline`]:{[`${n}-sub${n}-inline`]:{background:i},[`${n}-item`]:{position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:`${nt(T)} solid ${s}`,transform:"scaleY(0.0001)",opacity:0,transition:[`transform ${B} ${N}`,`opacity ${B} ${N}`].join(","),content:'""'},[`&${n}-item-danger`]:{"&::after":{borderInlineEndColor:Y}}},[`${n}-selected, ${n}-item-selected`]:{"&::after":{transform:"scaleY(1)",opacity:1,transition:[`transform ${B} ${L}`,`opacity ${B} ${L}`].join(",")}}}}}},vz=e=>{const{componentCls:t,itemHeight:n,itemMarginInline:r,padding:s,menuArrowSize:d,marginXS:p,itemMarginBlock:i,itemWidth:x,itemPaddingInline:S}=e,T=e.calc(d).add(s).add(p).equal();return{[`${t}-item`]:{position:"relative",overflow:"hidden"},[`${t}-item, ${t}-submenu-title`]:{height:n,lineHeight:nt(n),paddingInline:S,overflow:"hidden",textOverflow:"ellipsis",marginInline:r,marginBlock:i,width:x},[`> ${t}-item,
            > ${t}-submenu > ${t}-submenu-title`]:{height:n,lineHeight:nt(n)},[`${t}-item-group-list ${t}-submenu-title,
            ${t}-submenu-title`]:{paddingInlineEnd:T}}},loe=e=>{const{componentCls:t,iconCls:n,itemHeight:r,colorTextLightSolid:s,dropdownWidth:d,controlHeightLG:p,motionEaseOut:i,paddingXL:x,itemMarginInline:S,fontSizeLG:T,motionDurationFast:M,motionDurationSlow:$,paddingXS:L,boxShadowSecondary:N,collapsedWidth:V,collapsedIconSize:B}=e,j={height:r,lineHeight:nt(r),listStylePosition:"inside",listStyleType:"disc"};return[{[t]:{"&-inline, &-vertical":Object.assign({[`&${t}-root`]:{boxShadow:"none"}},vz(e))},[`${t}-submenu-popup`]:{[`${t}-vertical`]:Object.assign(Object.assign({},vz(e)),{boxShadow:N})}},{[`${t}-submenu-popup ${t}-vertical${t}-sub`]:{minWidth:d,maxHeight:`calc(100vh - ${nt(e.calc(p).mul(2.5).equal())})`,padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}},{[`${t}-inline`]:{width:"100%",[`&${t}-root`]:{[`${t}-item, ${t}-submenu-title`]:{display:"flex",alignItems:"center",transition:[`border-color ${$}`,`background ${$}`,`padding ${M} ${i}`].join(","),[`> ${t}-title-content`]:{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},"> *":{flex:"none"}}},[`${t}-sub${t}-inline`]:{padding:0,border:0,borderRadius:0,boxShadow:"none",[`& > ${t}-submenu > ${t}-submenu-title`]:j,[`& ${t}-item-group-title`]:{paddingInlineStart:x}},[`${t}-item`]:j}},{[`${t}-inline-collapsed`]:{width:V,[`&${t}-root`]:{[`${t}-item, ${t}-submenu ${t}-submenu-title`]:{[`> ${t}-inline-collapsed-noicon`]:{fontSize:T,textAlign:"center"}}},[`> ${t}-item,
          > ${t}-item-group > ${t}-item-group-list > ${t}-item,
          > ${t}-item-group > ${t}-item-group-list > ${t}-submenu > ${t}-submenu-title,
          > ${t}-submenu > ${t}-submenu-title`]:{insetInlineStart:0,paddingInline:`calc(50% - ${nt(e.calc(T).div(2).equal())} - ${nt(S)})`,textOverflow:"clip",[`
            ${t}-submenu-arrow,
            ${t}-submenu-expand-icon
          `]:{opacity:0},[`${t}-item-icon, ${n}`]:{margin:0,fontSize:B,lineHeight:nt(r),"+ span":{display:"inline-block",opacity:0}}},[`${t}-item-icon, ${n}`]:{display:"inline-block"},"&-tooltip":{pointerEvents:"none",[`${t}-item-icon, ${n}`]:{display:"none"},"a, a:hover":{color:s}},[`${t}-item-group-title`]:Object.assign(Object.assign({},iu),{paddingInline:L})}}]},yz=e=>{const{componentCls:t,motionDurationSlow:n,motionDurationMid:r,motionEaseInOut:s,motionEaseOut:d,iconCls:p,iconSize:i,iconMarginInlineEnd:x}=e;return{[`${t}-item, ${t}-submenu-title`]:{position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:[`border-color ${n}`,`background ${n}`,`padding calc(${n} + 0.1s) ${s}`].join(","),[`${t}-item-icon, ${p}`]:{minWidth:i,fontSize:i,transition:[`font-size ${r} ${d}`,`margin ${n} ${s}`,`color ${n}`].join(","),"+ span":{marginInlineStart:x,opacity:1,transition:[`opacity ${n} ${s}`,`margin ${n}`,`color ${n}`].join(",")}},[`${t}-item-icon`]:Object.assign({},yw()),[`&${t}-item-only-child`]:{[`> ${p}, > ${t}-item-icon`]:{marginInlineEnd:0}}},[`${t}-item-disabled, ${t}-submenu-disabled`]:{background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important"},[`> ${t}-submenu-title`]:{color:"inherit !important",cursor:"not-allowed"}}}},_z=e=>{const{componentCls:t,motionDurationSlow:n,motionEaseInOut:r,borderRadius:s,menuArrowSize:d,menuArrowOffset:p}=e;return{[`${t}-submenu`]:{"&-expand-icon, &-arrow":{position:"absolute",top:"50%",insetInlineEnd:e.margin,width:d,color:"currentcolor",transform:"translateY(-50%)",transition:`transform ${n} ${r}, opacity ${n}`},"&-arrow":{"&::before, &::after":{position:"absolute",width:e.calc(d).mul(.6).equal(),height:e.calc(d).mul(.15).equal(),backgroundColor:"currentcolor",borderRadius:s,transition:[`background ${n} ${r}`,`transform ${n} ${r}`,`top ${n} ${r}`,`color ${n} ${r}`].join(","),content:'""'},"&::before":{transform:`rotate(45deg) translateY(${nt(e.calc(p).mul(-1).equal())})`},"&::after":{transform:`rotate(-45deg) translateY(${nt(p)})`}}}}},coe=e=>{const{antCls:t,componentCls:n,fontSize:r,motionDurationSlow:s,motionDurationMid:d,motionEaseInOut:p,paddingXS:i,padding:x,colorSplit:S,lineWidth:T,zIndexPopup:M,borderRadiusLG:$,subMenuItemBorderRadius:L,menuArrowSize:N,menuArrowOffset:V,lineType:B,groupTitleLineHeight:j,groupTitleFontSize:H}=e;return[{"":{[n]:Object.assign(Object.assign({},ou()),{"&-hidden":{display:"none"}})},[`${n}-submenu-hidden`]:{display:"none"}},{[n]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},lo(e)),ou()),{marginBottom:0,paddingInlineStart:0,fontSize:r,lineHeight:0,listStyle:"none",outline:"none",transition:`width ${s} cubic-bezier(0.2, 0, 0, 1) 0s`,"ul, ol":{margin:0,padding:0,listStyle:"none"},"&-overflow":{display:"flex",[`${n}-item`]:{flex:"none"}},[`${n}-item, ${n}-submenu, ${n}-submenu-title`]:{borderRadius:e.itemBorderRadius},[`${n}-item-group-title`]:{padding:`${nt(i)} ${nt(x)}`,fontSize:H,lineHeight:j,transition:`all ${s}`},[`&-horizontal ${n}-submenu`]:{transition:[`border-color ${s} ${p}`,`background ${s} ${p}`].join(",")},[`${n}-submenu, ${n}-submenu-inline`]:{transition:[`border-color ${s} ${p}`,`background ${s} ${p}`,`padding ${d} ${p}`].join(",")},[`${n}-submenu ${n}-sub`]:{cursor:"initial",transition:[`background ${s} ${p}`,`padding ${s} ${p}`].join(",")},[`${n}-title-content`]:{transition:`color ${s}`,"&-with-extra":{display:"inline-flex",alignItems:"center",width:"100%"},[`> ${t}-typography-ellipsis-single-line`]:{display:"inline",verticalAlign:"unset"},[`${n}-item-extra`]:{marginInlineStart:"auto",paddingInlineStart:e.padding,fontSize:e.fontSizeSM}},[`${n}-item a`]:{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}},[`${n}-item-divider`]:{overflow:"hidden",lineHeight:0,borderColor:S,borderStyle:B,borderWidth:0,borderTopWidth:T,marginBlock:T,padding:0,"&-dashed":{borderStyle:"dashed"}}}),yz(e)),{[`${n}-item-group`]:{[`${n}-item-group-list`]:{margin:0,padding:0,[`${n}-item, ${n}-submenu-title`]:{paddingInline:`${nt(e.calc(r).mul(2).equal())} ${nt(x)}`}}},"&-submenu":{"&-popup":{position:"absolute",zIndex:M,borderRadius:$,boxShadow:"none",transformOrigin:"0 0",[`&${n}-submenu`]:{background:"transparent"},"&::before":{position:"absolute",inset:0,zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'},[`> ${n}`]:Object.assign(Object.assign(Object.assign({borderRadius:$},yz(e)),_z(e)),{[`${n}-item, ${n}-submenu > ${n}-submenu-title`]:{borderRadius:L},[`${n}-submenu-title::after`]:{transition:`transform ${s} ${p}`}})},"\n          &-placement-leftTop,\n          &-placement-bottomRight,\n          ":{transformOrigin:"100% 0"},"\n          &-placement-leftBottom,\n          &-placement-topRight,\n          ":{transformOrigin:"100% 100%"},"\n          &-placement-rightBottom,\n          &-placement-topLeft,\n          ":{transformOrigin:"0 100%"},"\n          &-placement-bottomLeft,\n          &-placement-rightTop,\n          ":{transformOrigin:"0 0"},"\n          &-placement-leftTop,\n          &-placement-leftBottom\n          ":{paddingInlineEnd:e.paddingXS},"\n          &-placement-rightTop,\n          &-placement-rightBottom\n          ":{paddingInlineStart:e.paddingXS},"\n          &-placement-topRight,\n          &-placement-topLeft\n          ":{paddingBottom:e.paddingXS},"\n          &-placement-bottomRight,\n          &-placement-bottomLeft\n          ":{paddingTop:e.paddingXS}}}),_z(e)),{[`&-inline-collapsed ${n}-submenu-arrow,
        &-inline ${n}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateX(${nt(V)})`},"&::after":{transform:`rotate(45deg) translateX(${nt(e.calc(V).mul(-1).equal())})`}},[`${n}-submenu-open${n}-submenu-inline > ${n}-submenu-title > ${n}-submenu-arrow`]:{transform:`translateY(${nt(e.calc(N).mul(.2).mul(-1).equal())})`,"&::after":{transform:`rotate(-45deg) translateX(${nt(e.calc(V).mul(-1).equal())})`},"&::before":{transform:`rotate(45deg) translateX(${nt(V)})`}}})},{[`${t}-layout-header`]:{[n]:{lineHeight:"inherit"}}}]},uoe=e=>{var t,n,r;const{colorPrimary:s,colorError:d,colorTextDisabled:p,colorErrorBg:i,colorText:x,colorTextDescription:S,colorBgContainer:T,colorFillAlter:M,colorFillContent:$,lineWidth:L,lineWidthBold:N,controlItemBgActive:V,colorBgTextHover:B,controlHeightLG:j,lineHeight:H,colorBgElevated:W,marginXXS:X,padding:ee,fontSize:J,controlHeightSM:Y,fontSizeLG:re,colorTextLightSolid:se,colorErrorHover:ae}=e,ce=(t=e.activeBarWidth)!==null&&t!==void 0?t:0,Ce=(n=e.activeBarBorderWidth)!==null&&n!==void 0?n:L,we=(r=e.itemMarginInline)!==null&&r!==void 0?r:e.marginXXS,ge=new Ji(se).setAlpha(.65).toRgbString();return{dropdownWidth:160,zIndexPopup:e.zIndexPopupBase+50,radiusItem:e.borderRadiusLG,itemBorderRadius:e.borderRadiusLG,radiusSubMenuItem:e.borderRadiusSM,subMenuItemBorderRadius:e.borderRadiusSM,colorItemText:x,itemColor:x,colorItemTextHover:x,itemHoverColor:x,colorItemTextHoverHorizontal:s,horizontalItemHoverColor:s,colorGroupTitle:S,groupTitleColor:S,colorItemTextSelected:s,itemSelectedColor:s,colorItemTextSelectedHorizontal:s,horizontalItemSelectedColor:s,colorItemBg:T,itemBg:T,colorItemBgHover:B,itemHoverBg:B,colorItemBgActive:$,itemActiveBg:V,colorSubItemBg:M,subMenuItemBg:M,colorItemBgSelected:V,itemSelectedBg:V,colorItemBgSelectedHorizontal:"transparent",horizontalItemSelectedBg:"transparent",colorActiveBarWidth:0,activeBarWidth:ce,colorActiveBarHeight:N,activeBarHeight:N,colorActiveBarBorderSize:L,activeBarBorderWidth:Ce,colorItemTextDisabled:p,itemDisabledColor:p,colorDangerItemText:d,dangerItemColor:d,colorDangerItemTextHover:d,dangerItemHoverColor:d,colorDangerItemTextSelected:d,dangerItemSelectedColor:d,colorDangerItemBgActive:i,dangerItemActiveBg:i,colorDangerItemBgSelected:i,dangerItemSelectedBg:i,itemMarginInline:we,horizontalItemBorderRadius:0,horizontalItemHoverBg:"transparent",itemHeight:j,groupTitleLineHeight:H,collapsedWidth:j*2,popupBg:W,itemMarginBlock:X,itemPaddingInline:ee,horizontalLineHeight:`${j*1.15}px`,iconSize:J,iconMarginInlineEnd:Y-J,collapsedIconSize:re,groupTitleFontSize:J,darkItemDisabledColor:new Ji(se).setAlpha(.25).toRgbString(),darkItemColor:ge,darkDangerItemColor:d,darkItemBg:"#001529",darkPopupBg:"#001529",darkSubMenuItemBg:"#000c17",darkItemSelectedColor:se,darkItemSelectedBg:s,darkDangerItemSelectedBg:d,darkItemHoverBg:"transparent",darkGroupTitleColor:ge,darkItemHoverColor:se,darkDangerItemHoverColor:ae,darkDangerItemSelectedColor:se,darkDangerItemActiveBg:d,itemWidth:ce?`calc(100% + ${Ce}px)`:`calc(100% - ${we*2}px)`}},doe=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return Qi("Menu",s=>{const{colorBgElevated:d,controlHeightLG:p,fontSize:i,darkItemColor:x,darkDangerItemColor:S,darkItemBg:T,darkSubMenuItemBg:M,darkItemSelectedColor:$,darkItemSelectedBg:L,darkDangerItemSelectedBg:N,darkItemHoverBg:V,darkGroupTitleColor:B,darkItemHoverColor:j,darkItemDisabledColor:H,darkDangerItemHoverColor:W,darkDangerItemSelectedColor:X,darkDangerItemActiveBg:ee,popupBg:J,darkPopupBg:Y}=s,re=s.calc(i).div(7).mul(5).equal(),se=pi(s,{menuArrowSize:re,menuHorizontalHeight:s.calc(p).mul(1.15).equal(),menuArrowOffset:s.calc(re).mul(.25).equal(),menuSubMenuBg:d,calc:s.calc,popupBg:J}),ae=pi(se,{itemColor:x,itemHoverColor:j,groupTitleColor:B,itemSelectedColor:$,itemBg:T,popupBg:Y,subMenuItemBg:M,itemActiveBg:"transparent",itemSelectedBg:L,activeBarHeight:0,activeBarBorderWidth:0,itemHoverBg:V,itemDisabledColor:H,dangerItemColor:S,dangerItemHoverColor:W,dangerItemSelectedColor:X,dangerItemActiveBg:ee,dangerItemSelectedBg:N,menuSubMenuBg:M,horizontalItemSelectedColor:$,horizontalItemSelectedBg:L});return[coe(se),aoe(se),loe(se),gz(se,"light"),gz(ae,"dark"),soe(se),o5(se),Cc(se,"slide-up"),Cc(se,"slide-down"),Cy(se,"zoom-big")]},uoe,{deprecatedTokens:[["colorGroupTitle","groupTitleColor"],["radiusItem","itemBorderRadius"],["radiusSubMenuItem","subMenuItemBorderRadius"],["colorItemText","itemColor"],["colorItemTextHover","itemHoverColor"],["colorItemTextHoverHorizontal","horizontalItemHoverColor"],["colorItemTextSelected","itemSelectedColor"],["colorItemTextSelectedHorizontal","horizontalItemSelectedColor"],["colorItemTextDisabled","itemDisabledColor"],["colorDangerItemText","dangerItemColor"],["colorDangerItemTextHover","dangerItemHoverColor"],["colorDangerItemTextSelected","dangerItemSelectedColor"],["colorDangerItemBgActive","dangerItemActiveBg"],["colorDangerItemBgSelected","dangerItemSelectedBg"],["colorItemBg","itemBg"],["colorItemBgHover","itemHoverBg"],["colorSubItemBg","subMenuItemBg"],["colorItemBgActive","itemActiveBg"],["colorItemBgSelectedHorizontal","horizontalItemSelectedBg"],["colorActiveBarWidth","activeBarWidth"],["colorActiveBarHeight","activeBarHeight"],["colorActiveBarBorderSize","activeBarBorderWidth"],["colorItemBgSelected","itemSelectedBg"]],injectStyle:n,unitless:{groupTitleLineHeight:!0}})(e,t)},H6=e=>{var t;const{popupClassName:n,icon:r,title:s,theme:d}=e,p=_.useContext(O1),{prefixCls:i,inlineCollapsed:x,theme:S}=p,T=km();let M;if(!r)M=x&&!T.length&&s&&typeof s=="string"?_.createElement("div",{className:`${i}-inline-collapsed-noicon`},s.charAt(0)):_.createElement("span",{className:`${i}-title-content`},s);else{const N=_.isValidElement(s)&&s.type==="span";M=_.createElement(_.Fragment,null,ns(r,{className:pt(_.isValidElement(r)?(t=r.props)===null||t===void 0?void 0:t.className:"",`${i}-item-icon`)}),N?s:_.createElement("span",{className:`${i}-title-content`},s))}const $=_.useMemo(()=>Object.assign(Object.assign({},p),{firstLevel:!1}),[p]),[L]=jd("Menu");return _.createElement(O1.Provider,{value:$},_.createElement(jw,Object.assign({},vo(e,["icon"]),{title:M,popupClassName:pt(i,n,`${i}-${d||S}`),popupStyle:Object.assign({zIndex:L},e.popupStyle)})))};var hoe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};function rE(e){return e===null||e===!1}const foe={item:j6,submenu:H6,divider:B6},poe=_.forwardRef((e,t)=>{var n;const r=_.useContext(A1),s=r||{},{getPrefixCls:d,getPopupContainer:p,direction:i,menu:x}=_.useContext(fr),S=d(),{prefixCls:T,className:M,style:$,theme:L="light",expandIcon:N,_internalDisableMenuItemTitleTooltip:V,inlineCollapsed:B,siderCollapsed:j,rootClassName:H,mode:W,selectable:X,onClick:ee,overflowedIndicatorPopupClassName:J}=e,Y=hoe(e,["prefixCls","className","style","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","rootClassName","mode","selectable","onClick","overflowedIndicatorPopupClassName"]),re=vo(Y,["collapsedWidth"]);(n=s.validator)===null||n===void 0||n.call(s,{mode:W});const se=Zr(function(){var Be;ee==null||ee.apply(void 0,arguments),(Be=s.onClick)===null||Be===void 0||Be.call(s)}),ae=s.mode||W,ce=X??s.selectable,Ce=_.useMemo(()=>j!==void 0?j:B,[B,j]),we={horizontal:{motionName:`${S}-slide-up`},inline:e5(S),other:{motionName:`${S}-zoom-big`}},ge=d("menu",T||s.prefixCls),ve=Qo(ge),[de,pe,fe]=doe(ge,ve,!r),me=pt(`${ge}-${L}`,x==null?void 0:x.className,M),Ie=_.useMemo(()=>{var Be,$e;if(typeof N=="function"||rE(N))return N||null;if(typeof s.expandIcon=="function"||rE(s.expandIcon))return s.expandIcon||null;if(typeof(x==null?void 0:x.expandIcon)=="function"||rE(x==null?void 0:x.expandIcon))return(x==null?void 0:x.expandIcon)||null;const ze=(Be=N??(s==null?void 0:s.expandIcon))!==null&&Be!==void 0?Be:x==null?void 0:x.expandIcon;return ns(ze,{className:pt(`${ge}-submenu-expand-icon`,_.isValidElement(ze)?($e=ze.props)===null||$e===void 0?void 0:$e.className:void 0)})},[N,s==null?void 0:s.expandIcon,x==null?void 0:x.expandIcon,ge]),Me=_.useMemo(()=>({prefixCls:ge,inlineCollapsed:Ce||!1,direction:i,firstLevel:!0,theme:L,mode:ae,disableMenuItemTitleTooltip:V}),[ge,Ce,i,V,L]);return de(_.createElement(A1.Provider,{value:null},_.createElement(O1.Provider,{value:Me},_.createElement(zm,Object.assign({getPopupContainer:p,overflowedIndicator:_.createElement(ZP,null),overflowedIndicatorPopupClassName:pt(ge,`${ge}-${L}`,J),mode:ae,selectable:ce,onClick:se},re,{inlineCollapsed:Ce,style:Object.assign(Object.assign({},x==null?void 0:x.style),$),className:me,prefixCls:ge,direction:i,defaultMotions:we,expandIcon:Ie,ref:t,rootClassName:pt(H,pe,s.rootClassName,fe,ve),_internalComponents:foe})))))}),uf=_.forwardRef((e,t)=>{const n=_.useRef(null),r=_.useContext(Vw);return _.useImperativeHandle(t,()=>({menu:n.current,focus:s=>{var d;(d=n.current)===null||d===void 0||d.focus(s)}})),_.createElement(poe,Object.assign({ref:n},e,r))});uf.Item=j6;uf.SubMenu=H6;uf.Divider=B6;uf.ItemGroup=XP;const moe=e=>{const{componentCls:t,menuCls:n,colorError:r,colorTextLightSolid:s}=e,d=`${n}-item`;return{[`${t}, ${t}-menu-submenu`]:{[`${n} ${d}`]:{[`&${d}-danger:not(${d}-disabled)`]:{color:r,"&:hover":{color:s,backgroundColor:r}}}}}},goe=e=>{const{componentCls:t,menuCls:n,zIndexPopup:r,dropdownArrowDistance:s,sizePopupArrow:d,antCls:p,iconCls:i,motionDurationMid:x,paddingBlock:S,fontSize:T,dropdownEdgeChildPadding:M,colorTextDisabled:$,fontSizeIcon:L,controlPaddingHorizontal:N,colorBgElevated:V}=e;return[{[t]:{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:r,display:"block","&::before":{position:"absolute",insetBlock:e.calc(d).div(2).sub(s).equal(),zIndex:-9999,opacity:1e-4,content:'""'},"&-menu-vertical":{maxHeight:"100vh",overflowY:"auto"},[`&-trigger${p}-btn`]:{[`& > ${i}-down, & > ${p}-btn-icon > ${i}-down`]:{fontSize:L}},[`${t}-wrap`]:{position:"relative",[`${p}-btn > ${i}-down`]:{fontSize:L},[`${i}-down::before`]:{transition:`transform ${x}`}},[`${t}-wrap-open`]:{[`${i}-down::before`]:{transform:"rotate(180deg)"}},"\n        &-hidden,\n        &-menu-hidden,\n        &-menu-submenu-hidden\n      ":{display:"none"},[`&${p}-slide-down-enter${p}-slide-down-enter-active${t}-placement-bottomLeft,
          &${p}-slide-down-appear${p}-slide-down-appear-active${t}-placement-bottomLeft,
          &${p}-slide-down-enter${p}-slide-down-enter-active${t}-placement-bottom,
          &${p}-slide-down-appear${p}-slide-down-appear-active${t}-placement-bottom,
          &${p}-slide-down-enter${p}-slide-down-enter-active${t}-placement-bottomRight,
          &${p}-slide-down-appear${p}-slide-down-appear-active${t}-placement-bottomRight`]:{animationName:Tw},[`&${p}-slide-up-enter${p}-slide-up-enter-active${t}-placement-topLeft,
          &${p}-slide-up-appear${p}-slide-up-appear-active${t}-placement-topLeft,
          &${p}-slide-up-enter${p}-slide-up-enter-active${t}-placement-top,
          &${p}-slide-up-appear${p}-slide-up-appear-active${t}-placement-top,
          &${p}-slide-up-enter${p}-slide-up-enter-active${t}-placement-topRight,
          &${p}-slide-up-appear${p}-slide-up-appear-active${t}-placement-topRight`]:{animationName:Mw},[`&${p}-slide-down-leave${p}-slide-down-leave-active${t}-placement-bottomLeft,
          &${p}-slide-down-leave${p}-slide-down-leave-active${t}-placement-bottom,
          &${p}-slide-down-leave${p}-slide-down-leave-active${t}-placement-bottomRight`]:{animationName:Iw},[`&${p}-slide-up-leave${p}-slide-up-leave-active${t}-placement-topLeft,
          &${p}-slide-up-leave${p}-slide-up-leave-active${t}-placement-top,
          &${p}-slide-up-leave${p}-slide-up-leave-active${t}-placement-topRight`]:{animationName:Pw}}},VP(e,V,{arrowPlacement:{}}),{[`${t} ${n}`]:{position:"relative",margin:0},[`${n}-submenu-popup`]:{position:"absolute",zIndex:r,background:"transparent",boxShadow:"none",transformOrigin:"0 0","ul, li":{listStyle:"none",margin:0}},[`${t}, ${t}-menu-submenu`]:Object.assign(Object.assign({},lo(e)),{[n]:Object.assign(Object.assign({padding:M,listStyleType:"none",backgroundColor:V,backgroundClip:"padding-box",borderRadius:e.borderRadiusLG,outline:"none",boxShadow:e.boxShadowSecondary},au(e)),{"&:empty":{padding:0,boxShadow:"none"},[`${n}-item-group-title`]:{padding:`${nt(S)} ${nt(N)}`,color:e.colorTextDescription,transition:`all ${x}`},[`${n}-item`]:{position:"relative",display:"flex",alignItems:"center"},[`${n}-item-icon`]:{minWidth:T,marginInlineEnd:e.marginXS,fontSize:e.fontSizeSM},[`${n}-title-content`]:{flex:"auto","&-with-extra":{display:"inline-flex",alignItems:"center",width:"100%"},"> a":{color:"inherit",transition:`all ${x}`,"&:hover":{color:"inherit"},"&::after":{position:"absolute",inset:0,content:'""'}},[`${n}-item-extra`]:{paddingInlineStart:e.padding,marginInlineStart:"auto",fontSize:e.fontSizeSM,color:e.colorTextDescription}},[`${n}-item, ${n}-submenu-title`]:Object.assign(Object.assign({display:"flex",margin:0,padding:`${nt(S)} ${nt(N)}`,color:e.colorText,fontWeight:"normal",fontSize:T,lineHeight:e.lineHeight,cursor:"pointer",transition:`all ${x}`,borderRadius:e.borderRadiusSM,"&:hover, &-active":{backgroundColor:e.controlItemBgHover}},au(e)),{"&-selected":{color:e.colorPrimary,backgroundColor:e.controlItemBgActive,"&:hover, &-active":{backgroundColor:e.controlItemBgActiveHover}},"&-disabled":{color:$,cursor:"not-allowed","&:hover":{color:$,backgroundColor:V,cursor:"not-allowed"},a:{pointerEvents:"none"}},"&-divider":{height:1,margin:`${nt(e.marginXXS)} 0`,overflow:"hidden",lineHeight:0,backgroundColor:e.colorSplit},[`${t}-menu-submenu-expand-icon`]:{position:"absolute",insetInlineEnd:e.paddingXS,[`${t}-menu-submenu-arrow-icon`]:{marginInlineEnd:"0 !important",color:e.colorTextDescription,fontSize:L,fontStyle:"normal"}}}),[`${n}-item-group-list`]:{margin:`0 ${nt(e.marginXS)}`,padding:0,listStyle:"none"},[`${n}-submenu-title`]:{paddingInlineEnd:e.calc(N).add(e.fontSizeSM).equal()},[`${n}-submenu-vertical`]:{position:"relative"},[`${n}-submenu${n}-submenu-disabled ${t}-menu-submenu-title`]:{[`&, ${t}-menu-submenu-arrow-icon`]:{color:$,backgroundColor:V,cursor:"not-allowed"}},[`${n}-submenu-selected ${t}-menu-submenu-title`]:{color:e.colorPrimary}})})},[Cc(e,"slide-up"),Cc(e,"slide-down"),pm(e,"move-up"),pm(e,"move-down"),Cy(e,"zoom-big")]]},voe=e=>Object.assign(Object.assign({zIndexPopup:e.zIndexPopupBase+50,paddingBlock:(e.controlHeight-e.fontSize*e.lineHeight)/2},Nw({contentRadius:e.borderRadiusLG,limitVerticalRadius:!0})),Lw(e)),yoe=Qi("Dropdown",e=>{const{marginXXS:t,sizePopupArrow:n,paddingXXS:r,componentCls:s}=e,d=pi(e,{menuCls:`${s}-menu`,dropdownArrowDistance:e.calc(n).div(2).add(t).equal(),dropdownEdgeChildPadding:r});return[goe(d),moe(d)]},voe,{resetStyle:!1}),Hw=e=>{var t;const{menu:n,arrow:r,prefixCls:s,children:d,trigger:p,disabled:i,dropdownRender:x,getPopupContainer:S,overlayClassName:T,rootClassName:M,overlayStyle:$,open:L,onOpenChange:N,visible:V,onVisibleChange:B,mouseEnterDelay:j=.15,mouseLeaveDelay:H=.1,autoAdjustOverflow:W=!0,placement:X="",overlay:ee,transitionName:J}=e,{getPopupContainer:Y,getPrefixCls:re,direction:se,dropdown:ae}=_.useContext(fr);sf();const ce=_.useMemo(()=>{const ht=re();return J!==void 0?J:X.includes("top")?`${ht}-slide-down`:`${ht}-slide-up`},[re,X,J]),Ce=_.useMemo(()=>X?X.includes("Center")?X.slice(0,X.indexOf("Center")):X:se==="rtl"?"bottomRight":"bottomLeft",[X,se]),we=re("dropdown",s),ge=Qo(we),[ve,de,pe]=yoe(we,ge),[,fe]=Ra(),me=_.Children.only(d),Ie=ns(me,{className:pt(`${we}-trigger`,{[`${we}-rtl`]:se==="rtl"},me.props.className),disabled:(t=me.props.disabled)!==null&&t!==void 0?t:i}),Me=i?[]:p,Be=!!(Me!=null&&Me.includes("contextMenu")),[$e,ze]=Bi(!1,{value:L??V}),Je=Zr(ht=>{N==null||N(ht,{source:"trigger"}),B==null||B(ht),ze(ht)}),yt=pt(T,M,de,pe,ge,ae==null?void 0:ae.className,{[`${we}-rtl`]:se==="rtl"}),at=g6({arrowPointAtCenter:typeof r=="object"&&r.pointAtCenter,autoAdjustOverflow:W,offset:fe.marginXXS,arrowWidth:r?fe.sizePopupArrow:0,borderRadius:fe.borderRadius}),gt=_.useCallback(()=>{n!=null&&n.selectable&&(n!=null&&n.multiple)||(N==null||N(!1,{source:"menu"}),ze(!1))},[n==null?void 0:n.selectable,n==null?void 0:n.multiple]),wt=()=>{let ht;return n!=null&&n.items?ht=_.createElement(uf,Object.assign({},n)):typeof ee=="function"?ht=ee():ht=ee,x&&(ht=x(ht)),ht=_.Children.only(typeof ht=="string"?_.createElement("span",null,ht):ht),_.createElement(V6,{prefixCls:`${we}-menu`,rootClassName:pt(pe,ge),expandIcon:_.createElement("span",{className:`${we}-menu-submenu-arrow`},_.createElement(ly,{className:`${we}-menu-submenu-arrow-icon`})),mode:"vertical",selectable:!1,onClick:gt,validator:je=>{let{mode:St}=je}},ht)},[Pe,mt]=jd("Dropdown",$==null?void 0:$.zIndex);let dt=_.createElement(S6,Object.assign({alignPoint:Be},vo(e,["rootClassName"]),{mouseEnterDelay:j,mouseLeaveDelay:H,visible:$e,builtinPlacements:at,arrow:!!r,overlayClassName:yt,prefixCls:we,getPopupContainer:S||Y,transitionName:ce,trigger:Me,overlay:wt,placement:Ce,onVisibleChange:Je,overlayStyle:Object.assign(Object.assign(Object.assign({},ae==null?void 0:ae.style),$),{zIndex:Pe})}),Ie);return Pe&&(dt=_.createElement(by.Provider,{value:mt},dt)),ve(dt)};function _oe(e){return Object.assign(Object.assign({},e),{align:{overflow:{adjustX:!1,adjustY:!1}}})}const xoe=Py(Hw,"dropdown",e=>e,_oe),boe=e=>_.createElement(xoe,Object.assign({},e),_.createElement("span",null));Hw._InternalPanelDoNotUseOrYouWillBeFired=boe;var U6={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(zd,function(){var n=1e3,r=6e4,s=36e5,d="millisecond",p="second",i="minute",x="hour",S="day",T="week",M="month",$="quarter",L="year",N="date",V="Invalid Date",B=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,j=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,H={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(ge){var ve=["th","st","nd","rd"],de=ge%100;return"["+ge+(ve[(de-20)%10]||ve[de]||ve[0])+"]"}},W=function(ge,ve,de){var pe=String(ge);return!pe||pe.length>=ve?ge:""+Array(ve+1-pe.length).join(de)+ge},X={s:W,z:function(ge){var ve=-ge.utcOffset(),de=Math.abs(ve),pe=Math.floor(de/60),fe=de%60;return(ve<=0?"+":"-")+W(pe,2,"0")+":"+W(fe,2,"0")},m:function ge(ve,de){if(ve.date()<de.date())return-ge(de,ve);var pe=12*(de.year()-ve.year())+(de.month()-ve.month()),fe=ve.clone().add(pe,M),me=de-fe<0,Ie=ve.clone().add(pe+(me?-1:1),M);return+(-(pe+(de-fe)/(me?fe-Ie:Ie-fe))||0)},a:function(ge){return ge<0?Math.ceil(ge)||0:Math.floor(ge)},p:function(ge){return{M,y:L,w:T,d:S,D:N,h:x,m:i,s:p,ms:d,Q:$}[ge]||String(ge||"").toLowerCase().replace(/s$/,"")},u:function(ge){return ge===void 0}},ee="en",J={};J[ee]=H;var Y="$isDayjsObject",re=function(ge){return ge instanceof Ce||!(!ge||!ge[Y])},se=function ge(ve,de,pe){var fe;if(!ve)return ee;if(typeof ve=="string"){var me=ve.toLowerCase();J[me]&&(fe=me),de&&(J[me]=de,fe=me);var Ie=ve.split("-");if(!fe&&Ie.length>1)return ge(Ie[0])}else{var Me=ve.name;J[Me]=ve,fe=Me}return!pe&&fe&&(ee=fe),fe||!pe&&ee},ae=function(ge,ve){if(re(ge))return ge.clone();var de=typeof ve=="object"?ve:{};return de.date=ge,de.args=arguments,new Ce(de)},ce=X;ce.l=se,ce.i=re,ce.w=function(ge,ve){return ae(ge,{locale:ve.$L,utc:ve.$u,x:ve.$x,$offset:ve.$offset})};var Ce=function(){function ge(de){this.$L=se(de.locale,null,!0),this.parse(de),this.$x=this.$x||de.x||{},this[Y]=!0}var ve=ge.prototype;return ve.parse=function(de){this.$d=function(pe){var fe=pe.date,me=pe.utc;if(fe===null)return new Date(NaN);if(ce.u(fe))return new Date;if(fe instanceof Date)return new Date(fe);if(typeof fe=="string"&&!/Z$/i.test(fe)){var Ie=fe.match(B);if(Ie){var Me=Ie[2]-1||0,Be=(Ie[7]||"0").substring(0,3);return me?new Date(Date.UTC(Ie[1],Me,Ie[3]||1,Ie[4]||0,Ie[5]||0,Ie[6]||0,Be)):new Date(Ie[1],Me,Ie[3]||1,Ie[4]||0,Ie[5]||0,Ie[6]||0,Be)}}return new Date(fe)}(de),this.init()},ve.init=function(){var de=this.$d;this.$y=de.getFullYear(),this.$M=de.getMonth(),this.$D=de.getDate(),this.$W=de.getDay(),this.$H=de.getHours(),this.$m=de.getMinutes(),this.$s=de.getSeconds(),this.$ms=de.getMilliseconds()},ve.$utils=function(){return ce},ve.isValid=function(){return this.$d.toString()!==V},ve.isSame=function(de,pe){var fe=ae(de);return this.startOf(pe)<=fe&&fe<=this.endOf(pe)},ve.isAfter=function(de,pe){return ae(de)<this.startOf(pe)},ve.isBefore=function(de,pe){return this.endOf(pe)<ae(de)},ve.$g=function(de,pe,fe){return ce.u(de)?this[pe]:this.set(fe,de)},ve.unix=function(){return Math.floor(this.valueOf()/1e3)},ve.valueOf=function(){return this.$d.getTime()},ve.startOf=function(de,pe){var fe=this,me=!!ce.u(pe)||pe,Ie=ce.p(de),Me=function(wt,Pe){var mt=ce.w(fe.$u?Date.UTC(fe.$y,Pe,wt):new Date(fe.$y,Pe,wt),fe);return me?mt:mt.endOf(S)},Be=function(wt,Pe){return ce.w(fe.toDate()[wt].apply(fe.toDate("s"),(me?[0,0,0,0]:[23,59,59,999]).slice(Pe)),fe)},$e=this.$W,ze=this.$M,Je=this.$D,yt="set"+(this.$u?"UTC":"");switch(Ie){case L:return me?Me(1,0):Me(31,11);case M:return me?Me(1,ze):Me(0,ze+1);case T:var at=this.$locale().weekStart||0,gt=($e<at?$e+7:$e)-at;return Me(me?Je-gt:Je+(6-gt),ze);case S:case N:return Be(yt+"Hours",0);case x:return Be(yt+"Minutes",1);case i:return Be(yt+"Seconds",2);case p:return Be(yt+"Milliseconds",3);default:return this.clone()}},ve.endOf=function(de){return this.startOf(de,!1)},ve.$set=function(de,pe){var fe,me=ce.p(de),Ie="set"+(this.$u?"UTC":""),Me=(fe={},fe[S]=Ie+"Date",fe[N]=Ie+"Date",fe[M]=Ie+"Month",fe[L]=Ie+"FullYear",fe[x]=Ie+"Hours",fe[i]=Ie+"Minutes",fe[p]=Ie+"Seconds",fe[d]=Ie+"Milliseconds",fe)[me],Be=me===S?this.$D+(pe-this.$W):pe;if(me===M||me===L){var $e=this.clone().set(N,1);$e.$d[Me](Be),$e.init(),this.$d=$e.set(N,Math.min(this.$D,$e.daysInMonth())).$d}else Me&&this.$d[Me](Be);return this.init(),this},ve.set=function(de,pe){return this.clone().$set(de,pe)},ve.get=function(de){return this[ce.p(de)]()},ve.add=function(de,pe){var fe,me=this;de=Number(de);var Ie=ce.p(pe),Me=function(ze){var Je=ae(me);return ce.w(Je.date(Je.date()+Math.round(ze*de)),me)};if(Ie===M)return this.set(M,this.$M+de);if(Ie===L)return this.set(L,this.$y+de);if(Ie===S)return Me(1);if(Ie===T)return Me(7);var Be=(fe={},fe[i]=r,fe[x]=s,fe[p]=n,fe)[Ie]||1,$e=this.$d.getTime()+de*Be;return ce.w($e,this)},ve.subtract=function(de,pe){return this.add(-1*de,pe)},ve.format=function(de){var pe=this,fe=this.$locale();if(!this.isValid())return fe.invalidDate||V;var me=de||"YYYY-MM-DDTHH:mm:ssZ",Ie=ce.z(this),Me=this.$H,Be=this.$m,$e=this.$M,ze=fe.weekdays,Je=fe.months,yt=fe.meridiem,at=function(Pe,mt,dt,ht){return Pe&&(Pe[mt]||Pe(pe,me))||dt[mt].slice(0,ht)},gt=function(Pe){return ce.s(Me%12||12,Pe,"0")},wt=yt||function(Pe,mt,dt){var ht=Pe<12?"AM":"PM";return dt?ht.toLowerCase():ht};return me.replace(j,function(Pe,mt){return mt||function(dt){switch(dt){case"YY":return String(pe.$y).slice(-2);case"YYYY":return ce.s(pe.$y,4,"0");case"M":return $e+1;case"MM":return ce.s($e+1,2,"0");case"MMM":return at(fe.monthsShort,$e,Je,3);case"MMMM":return at(Je,$e);case"D":return pe.$D;case"DD":return ce.s(pe.$D,2,"0");case"d":return String(pe.$W);case"dd":return at(fe.weekdaysMin,pe.$W,ze,2);case"ddd":return at(fe.weekdaysShort,pe.$W,ze,3);case"dddd":return ze[pe.$W];case"H":return String(Me);case"HH":return ce.s(Me,2,"0");case"h":return gt(1);case"hh":return gt(2);case"a":return wt(Me,Be,!0);case"A":return wt(Me,Be,!1);case"m":return String(Be);case"mm":return ce.s(Be,2,"0");case"s":return String(pe.$s);case"ss":return ce.s(pe.$s,2,"0");case"SSS":return ce.s(pe.$ms,3,"0");case"Z":return Ie}return null}(Pe)||Ie.replace(":","")})},ve.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},ve.diff=function(de,pe,fe){var me,Ie=this,Me=ce.p(pe),Be=ae(de),$e=(Be.utcOffset()-this.utcOffset())*r,ze=this-Be,Je=function(){return ce.m(Ie,Be)};switch(Me){case L:me=Je()/12;break;case M:me=Je();break;case $:me=Je()/3;break;case T:me=(ze-$e)/6048e5;break;case S:me=(ze-$e)/864e5;break;case x:me=ze/s;break;case i:me=ze/r;break;case p:me=ze/n;break;default:me=ze}return fe?me:ce.a(me)},ve.daysInMonth=function(){return this.endOf(M).$D},ve.$locale=function(){return J[this.$L]},ve.locale=function(de,pe){if(!de)return this.$L;var fe=this.clone(),me=se(de,pe,!0);return me&&(fe.$L=me),fe},ve.clone=function(){return ce.w(this.$d,this)},ve.toDate=function(){return new Date(this.valueOf())},ve.toJSON=function(){return this.isValid()?this.toISOString():null},ve.toISOString=function(){return this.$d.toISOString()},ve.toString=function(){return this.$d.toUTCString()},ge}(),we=Ce.prototype;return ae.prototype=we,[["$ms",d],["$s",p],["$m",i],["$H",x],["$W",S],["$M",M],["$y",L],["$D",N]].forEach(function(ge){we[ge[1]]=function(ve){return this.$g(ve,ge[0],ge[1])}}),ae.extend=function(ge,ve){return ge.$i||(ge(ve,Ce,ae),ge.$i=!0),ae},ae.locale=se,ae.isDayjs=re,ae.unix=function(ge){return ae(1e3*ge)},ae.en=J[ee],ae.Ls=J,ae.p={},ae})})(U6);var woe=U6.exports;const Wo=hl(woe);var W6={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(zd,function(){return function(n,r){r.prototype.weekday=function(s){var d=this.$locale().weekStart||0,p=this.$W,i=(p<d?p+7:p)-d;return this.$utils().u(s)?i:this.subtract(i,"day").add(s,"day")}}})})(W6);var Soe=W6.exports;const Coe=hl(Soe);var G6={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(zd,function(){return function(n,r,s){var d=r.prototype,p=function(M){return M&&(M.indexOf?M:M.s)},i=function(M,$,L,N,V){var B=M.name?M:M.$locale(),j=p(B[$]),H=p(B[L]),W=j||H.map(function(ee){return ee.slice(0,N)});if(!V)return W;var X=B.weekStart;return W.map(function(ee,J){return W[(J+(X||0))%7]})},x=function(){return s.Ls[s.locale()]},S=function(M,$){return M.formats[$]||function(L){return L.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(N,V,B){return V||B.slice(1)})}(M.formats[$.toUpperCase()])},T=function(){var M=this;return{months:function($){return $?$.format("MMMM"):i(M,"months")},monthsShort:function($){return $?$.format("MMM"):i(M,"monthsShort","months",3)},firstDayOfWeek:function(){return M.$locale().weekStart||0},weekdays:function($){return $?$.format("dddd"):i(M,"weekdays")},weekdaysMin:function($){return $?$.format("dd"):i(M,"weekdaysMin","weekdays",2)},weekdaysShort:function($){return $?$.format("ddd"):i(M,"weekdaysShort","weekdays",3)},longDateFormat:function($){return S(M.$locale(),$)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};d.localeData=function(){return T.bind(this)()},s.localeData=function(){var M=x();return{firstDayOfWeek:function(){return M.weekStart||0},weekdays:function(){return s.weekdays()},weekdaysShort:function(){return s.weekdaysShort()},weekdaysMin:function(){return s.weekdaysMin()},months:function(){return s.months()},monthsShort:function(){return s.monthsShort()},longDateFormat:function($){return S(M,$)},meridiem:M.meridiem,ordinal:M.ordinal}},s.months=function(){return i(x(),"months")},s.monthsShort=function(){return i(x(),"monthsShort","months",3)},s.weekdays=function(M){return i(x(),"weekdays",null,null,M)},s.weekdaysShort=function(M){return i(x(),"weekdaysShort","weekdays",3,M)},s.weekdaysMin=function(M){return i(x(),"weekdaysMin","weekdays",2,M)}}})})(G6);var Eoe=G6.exports;const Toe=hl(Eoe);var q6={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(zd,function(){var n="week",r="year";return function(s,d,p){var i=d.prototype;i.week=function(x){if(x===void 0&&(x=null),x!==null)return this.add(7*(x-this.week()),"day");var S=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var T=p(this).startOf(r).add(1,r).date(S),M=p(this).endOf(n);if(T.isBefore(M))return 1}var $=p(this).startOf(r).date(S).startOf(n).subtract(1,"millisecond"),L=this.diff($,n,!0);return L<0?p(this).startOf("week").week():Math.ceil(L)},i.weeks=function(x){return x===void 0&&(x=null),this.week(x)}}})})(q6);var Ioe=q6.exports;const Moe=hl(Ioe);var K6={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(zd,function(){return function(n,r){r.prototype.weekYear=function(){var s=this.month(),d=this.week(),p=this.year();return d===1&&s===11?p+1:s===0&&d>=52?p-1:p}}})})(K6);var Poe=K6.exports;const Roe=hl(Poe);var X6={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(zd,function(){return function(n,r){var s=r.prototype,d=s.format;s.format=function(p){var i=this,x=this.$locale();if(!this.isValid())return d.bind(this)(p);var S=this.$utils(),T=(p||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(M){switch(M){case"Q":return Math.ceil((i.$M+1)/3);case"Do":return x.ordinal(i.$D);case"gggg":return i.weekYear();case"GGGG":return i.isoWeekYear();case"wo":return x.ordinal(i.week(),"W");case"w":case"ww":return S.s(i.week(),M==="w"?1:2,"0");case"W":case"WW":return S.s(i.isoWeek(),M==="W"?1:2,"0");case"k":case"kk":return S.s(String(i.$H===0?24:i.$H),M==="k"?1:2,"0");case"X":return Math.floor(i.$d.getTime()/1e3);case"x":return i.$d.getTime();case"z":return"["+i.offsetName()+"]";case"zzz":return"["+i.offsetName("long")+"]";default:return M}});return d.bind(this)(T)}}})})(X6);var Ooe=X6.exports;const Aoe=hl(Ooe);var Z6={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(zd,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,s=/\d/,d=/\d\d/,p=/\d\d?/,i=/\d*[^-_:/,()\s\d]+/,x={},S=function(B){return(B=+B)+(B>68?1900:2e3)},T=function(B){return function(j){this[B]=+j}},M=[/[+-]\d\d:?(\d\d)?|Z/,function(B){(this.zone||(this.zone={})).offset=function(j){if(!j||j==="Z")return 0;var H=j.match(/([+-]|\d\d)/g),W=60*H[1]+(+H[2]||0);return W===0?0:H[0]==="+"?-W:W}(B)}],$=function(B){var j=x[B];return j&&(j.indexOf?j:j.s.concat(j.f))},L=function(B,j){var H,W=x.meridiem;if(W){for(var X=1;X<=24;X+=1)if(B.indexOf(W(X,0,j))>-1){H=X>12;break}}else H=B===(j?"pm":"PM");return H},N={A:[i,function(B){this.afternoon=L(B,!1)}],a:[i,function(B){this.afternoon=L(B,!0)}],Q:[s,function(B){this.month=3*(B-1)+1}],S:[s,function(B){this.milliseconds=100*+B}],SS:[d,function(B){this.milliseconds=10*+B}],SSS:[/\d{3}/,function(B){this.milliseconds=+B}],s:[p,T("seconds")],ss:[p,T("seconds")],m:[p,T("minutes")],mm:[p,T("minutes")],H:[p,T("hours")],h:[p,T("hours")],HH:[p,T("hours")],hh:[p,T("hours")],D:[p,T("day")],DD:[d,T("day")],Do:[i,function(B){var j=x.ordinal,H=B.match(/\d+/);if(this.day=H[0],j)for(var W=1;W<=31;W+=1)j(W).replace(/\[|\]/g,"")===B&&(this.day=W)}],w:[p,T("week")],ww:[d,T("week")],M:[p,T("month")],MM:[d,T("month")],MMM:[i,function(B){var j=$("months"),H=($("monthsShort")||j.map(function(W){return W.slice(0,3)})).indexOf(B)+1;if(H<1)throw new Error;this.month=H%12||H}],MMMM:[i,function(B){var j=$("months").indexOf(B)+1;if(j<1)throw new Error;this.month=j%12||j}],Y:[/[+-]?\d+/,T("year")],YY:[d,function(B){this.year=S(B)}],YYYY:[/\d{4}/,T("year")],Z:M,ZZ:M};function V(B){var j,H;j=B,H=x&&x.formats;for(var W=(B=j.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(ae,ce,Ce){var we=Ce&&Ce.toUpperCase();return ce||H[Ce]||n[Ce]||H[we].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(ge,ve,de){return ve||de.slice(1)})})).match(r),X=W.length,ee=0;ee<X;ee+=1){var J=W[ee],Y=N[J],re=Y&&Y[0],se=Y&&Y[1];W[ee]=se?{regex:re,parser:se}:J.replace(/^\[|\]$/g,"")}return function(ae){for(var ce={},Ce=0,we=0;Ce<X;Ce+=1){var ge=W[Ce];if(typeof ge=="string")we+=ge.length;else{var ve=ge.regex,de=ge.parser,pe=ae.slice(we),fe=ve.exec(pe)[0];de.call(ce,fe),ae=ae.replace(fe,"")}}return function(me){var Ie=me.afternoon;if(Ie!==void 0){var Me=me.hours;Ie?Me<12&&(me.hours+=12):Me===12&&(me.hours=0),delete me.afternoon}}(ce),ce}}return function(B,j,H){H.p.customParseFormat=!0,B&&B.parseTwoDigitYear&&(S=B.parseTwoDigitYear);var W=j.prototype,X=W.parse;W.parse=function(ee){var J=ee.date,Y=ee.utc,re=ee.args;this.$u=Y;var se=re[1];if(typeof se=="string"){var ae=re[2]===!0,ce=re[3]===!0,Ce=ae||ce,we=re[2];ce&&(we=re[2]),x=this.$locale(),!ae&&we&&(x=H.Ls[we]),this.$d=function(pe,fe,me,Ie){try{if(["x","X"].indexOf(fe)>-1)return new Date((fe==="X"?1e3:1)*pe);var Me=V(fe)(pe),Be=Me.year,$e=Me.month,ze=Me.day,Je=Me.hours,yt=Me.minutes,at=Me.seconds,gt=Me.milliseconds,wt=Me.zone,Pe=Me.week,mt=new Date,dt=ze||(Be||$e?1:mt.getDate()),ht=Be||mt.getFullYear(),je=0;Be&&!$e||(je=$e>0?$e-1:mt.getMonth());var St,Ct=Je||0,Lt=yt||0,At=at||0,Yt=gt||0;return wt?new Date(Date.UTC(ht,je,dt,Ct,Lt,At,Yt+60*wt.offset*1e3)):me?new Date(Date.UTC(ht,je,dt,Ct,Lt,At,Yt)):(St=new Date(ht,je,dt,Ct,Lt,At,Yt),Pe&&(St=Ie(St).week(Pe).toDate()),St)}catch{return new Date("")}}(J,se,Y,H),this.init(),we&&we!==!0&&(this.$L=this.locale(we).$L),Ce&&J!=this.format(se)&&(this.$d=new Date("")),x={}}else if(se instanceof Array)for(var ge=se.length,ve=1;ve<=ge;ve+=1){re[1]=se[ve-1];var de=H.apply(this,re);if(de.isValid()){this.$d=de.$d,this.$L=de.$L,this.init();break}ve===ge&&(this.$d=new Date(""))}else X.call(this,ee)}}})})(Z6);var Doe=Z6.exports;const $oe=hl(Doe);Wo.extend($oe);Wo.extend(Aoe);Wo.extend(Coe);Wo.extend(Toe);Wo.extend(Moe);Wo.extend(Roe);Wo.extend(function(e,t){var n=t.prototype,r=n.format;n.format=function(d){var p=(d||"").replace("Wo","wo");return r.bind(this)(p)}});var koe={bn_BD:"bn-bd",by_BY:"be",en_GB:"en-gb",en_US:"en",fr_BE:"fr",fr_CA:"fr-ca",hy_AM:"hy-am",kmr_IQ:"ku",nl_BE:"nl-be",pt_BR:"pt-br",zh_CN:"zh-cn",zh_HK:"zh-hk",zh_TW:"zh-tw"},Oh=function(t){var n=koe[t];return n||t.split("_")[0]},xz=function(){IF(!1,"Not match any format. Please help to fire a issue about this.")},zoe={getNow:function(){var t=Wo();return typeof t.tz=="function"?t.tz():t},getFixedDate:function(t){return Wo(t,["YYYY-M-DD","YYYY-MM-DD"])},getEndDate:function(t){return t.endOf("month")},getWeekDay:function(t){var n=t.locale("en");return n.weekday()+n.localeData().firstDayOfWeek()},getYear:function(t){return t.year()},getMonth:function(t){return t.month()},getDate:function(t){return t.date()},getHour:function(t){return t.hour()},getMinute:function(t){return t.minute()},getSecond:function(t){return t.second()},getMillisecond:function(t){return t.millisecond()},addYear:function(t,n){return t.add(n,"year")},addMonth:function(t,n){return t.add(n,"month")},addDate:function(t,n){return t.add(n,"day")},setYear:function(t,n){return t.year(n)},setMonth:function(t,n){return t.month(n)},setDate:function(t,n){return t.date(n)},setHour:function(t,n){return t.hour(n)},setMinute:function(t,n){return t.minute(n)},setSecond:function(t,n){return t.second(n)},setMillisecond:function(t,n){return t.millisecond(n)},isAfter:function(t,n){return t.isAfter(n)},isValidate:function(t){return t.isValid()},locale:{getWeekFirstDay:function(t){return Wo().locale(Oh(t)).localeData().firstDayOfWeek()},getWeekFirstDate:function(t,n){return n.locale(Oh(t)).weekday(0)},getWeek:function(t,n){return n.locale(Oh(t)).week()},getShortWeekDays:function(t){return Wo().locale(Oh(t)).localeData().weekdaysMin()},getShortMonths:function(t){return Wo().locale(Oh(t)).localeData().monthsShort()},format:function(t,n,r){return n.locale(Oh(t)).format(r)},parse:function(t,n,r){for(var s=Oh(t),d=0;d<r.length;d+=1){var p=r[d],i=n;if(p.includes("wo")||p.includes("Wo")){for(var x=i.split("-")[0],S=i.split("-")[1],T=Wo(x,"YYYY").startOf("year").locale(s),M=0;M<=52;M+=1){var $=T.add(M,"week");if($.format("Wo")===S)return $}return xz(),null}var L=Wo(i,p,!0).locale(s);if(L.isValid())return L}return n&&xz(),null}}};function Uw(e,t){return e!==void 0?e:t?"bottomRight":"bottomLeft"}function Y6(e,t){var n=Uw(e,t),r=n==null?void 0:n.toLowerCase().endsWith("right"),s=r?"insetInlineEnd":"insetInlineStart";return t&&(s=["insetInlineStart","insetInlineEnd"].find(function(d){return d!==s})),s}var Yl=_.createContext(null),Loe={bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}}};function J6(e){var t=e.popupElement,n=e.popupStyle,r=e.popupClassName,s=e.popupAlign,d=e.transitionName,p=e.getPopupContainer,i=e.children,x=e.range,S=e.placement,T=e.builtinPlacements,M=T===void 0?Loe:T,$=e.direction,L=e.visible,N=e.onClose,V=_.useContext(Yl),B=V.prefixCls,j="".concat(B,"-dropdown"),H=Uw(S,$==="rtl");return _.createElement(Oy,{showAction:[],hideAction:["click"],popupPlacement:H,builtinPlacements:M,prefixCls:j,popupTransitionName:d,popup:t,popupAlign:s,popupVisible:L,popupClassName:pt(r,De(De({},"".concat(j,"-range"),x),"".concat(j,"-rtl"),$==="rtl")),popupStyle:n,stretch:"minWidth",getPopupContainer:p,onPopupVisibleChange:function(X){X||N()}},i)}function YP(e,t){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0",r=String(e);r.length<t;)r="".concat(n).concat(r);return r}function df(e){return e==null?[]:Array.isArray(e)?e:[e]}function T0(e,t,n){var r=un(e);return r[t]=n,r}function Ww(e,t){var n={},r=t||Object.keys(e);return r.forEach(function(s){e[s]!==void 0&&(n[s]=e[s])}),n}function Q6(e,t,n){if(n)return n;switch(e){case"time":return t.fieldTimeFormat;case"datetime":return t.fieldDateTimeFormat;case"month":return t.fieldMonthFormat;case"year":return t.fieldYearFormat;case"quarter":return t.fieldQuarterFormat;case"week":return t.fieldWeekFormat;default:return t.fieldDateFormat}}function ej(e,t,n){var r=n!==void 0?n:t[t.length-1],s=t.find(function(d){return e[d]});return r!==s?e[s]:void 0}function tj(e){return Ww(e,["placement","builtinPlacements","popupAlign","getPopupContainer","transitionName","direction"])}function JP(e,t,n,r){var s=_.useMemo(function(){return e||function(p,i){var x=p;return t&&i.type==="date"?t(x,i.today):n&&i.type==="month"?n(x,i.locale):i.originNode}},[e,n,t]),d=_.useCallback(function(p,i){return s(p,We(We({},i),{},{range:r}))},[s,r]);return d}function nj(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],r=_.useState([!1,!1]),s=ot(r,2),d=s[0],p=s[1],i=function(T,M){p(function($){return T0($,M,T)})},x=_.useMemo(function(){return d.map(function(S,T){if(S)return!0;var M=e[T];return M?!!(!n[T]&&!M||M&&t(M,{activeIndex:T})):!1})},[e,d,t,n]);return[x,i]}function rj(e,t,n,r,s){var d="",p=[];return e&&p.push(s?"hh":"HH"),t&&p.push("mm"),n&&p.push("ss"),d=p.join(":"),r&&(d+=".SSS"),s&&(d+=" A"),d}function Noe(e,t,n,r,s,d){var p=e.fieldDateTimeFormat,i=e.fieldDateFormat,x=e.fieldTimeFormat,S=e.fieldMonthFormat,T=e.fieldYearFormat,M=e.fieldWeekFormat,$=e.fieldQuarterFormat,L=e.yearFormat,N=e.cellYearFormat,V=e.cellQuarterFormat,B=e.dayFormat,j=e.cellDateFormat,H=rj(t,n,r,s,d);return We(We({},e),{},{fieldDateTimeFormat:p||"YYYY-MM-DD ".concat(H),fieldDateFormat:i||"YYYY-MM-DD",fieldTimeFormat:x||H,fieldMonthFormat:S||"YYYY-MM",fieldYearFormat:T||"YYYY",fieldWeekFormat:M||"gggg-wo",fieldQuarterFormat:$||"YYYY-[Q]Q",yearFormat:L||"YYYY",cellYearFormat:N||"YYYY",cellQuarterFormat:V||"[Q]Q",cellDateFormat:j||B||"D"})}function ij(e,t){var n=t.showHour,r=t.showMinute,s=t.showSecond,d=t.showMillisecond,p=t.use12Hours;return Ft.useMemo(function(){return Noe(e,n,r,s,d,p)},[e,n,r,s,d,p])}function Jv(e,t,n){return n??t.some(function(r){return e.includes(r)})}var Foe=["showNow","showHour","showMinute","showSecond","showMillisecond","use12Hours","hourStep","minuteStep","secondStep","millisecondStep","hideDisabledOptions","defaultValue","disabledHours","disabledMinutes","disabledSeconds","disabledMilliseconds","disabledTime","changeOnScroll","defaultOpenValue"];function Boe(e){var t=Ww(e,Foe),n=e.format,r=e.picker,s=null;return n&&(s=n,Array.isArray(s)&&(s=s[0]),s=cr(s)==="object"?s.format:s),r==="time"&&(t.format=s),[t,s]}function joe(e){return e&&typeof e=="string"}function oj(e,t,n,r){return[e,t,n,r].some(function(s){return s!==void 0})}function aj(e,t,n,r,s){var d=t,p=n,i=r;if(!e&&!d&&!p&&!i&&!s)d=!0,p=!0,i=!0;else if(e){var x,S,T,M=[d,p,i].some(function(N){return N===!1}),$=[d,p,i].some(function(N){return N===!0}),L=M?!0:!$;d=(x=d)!==null&&x!==void 0?x:L,p=(S=p)!==null&&S!==void 0?S:L,i=(T=i)!==null&&T!==void 0?T:L}return[d,p,i,s]}function sj(e){var t=e.showTime,n=Boe(e),r=ot(n,2),s=r[0],d=r[1],p=t&&cr(t)==="object"?t:{},i=We(We({defaultOpenValue:p.defaultOpenValue||p.defaultValue},s),p),x=i.showMillisecond,S=i.showHour,T=i.showMinute,M=i.showSecond,$=oj(S,T,M,x),L=aj($,S,T,M,x),N=ot(L,3);return S=N[0],T=N[1],M=N[2],[i,We(We({},i),{},{showHour:S,showMinute:T,showSecond:M,showMillisecond:x}),i.format,d]}function lj(e,t,n,r,s){var d=e==="time";if(e==="datetime"||d){for(var p=r,i=Q6(e,s,null),x=i,S=[t,n],T=0;T<S.length;T+=1){var M=df(S[T])[0];if(joe(M)){x=M;break}}var $=p.showHour,L=p.showMinute,N=p.showSecond,V=p.showMillisecond,B=p.use12Hours,j=Jv(x,["a","A","LT","LLL","LTS"],B),H=oj($,L,N,V);H||($=Jv(x,["H","h","k","LT","LLL"]),L=Jv(x,["m","LT","LLL"]),N=Jv(x,["s","LTS"]),V=Jv(x,["SSS"]));var W=aj(H,$,L,N,V),X=ot(W,3);$=X[0],L=X[1],N=X[2];var ee=t||rj($,L,N,V,j);return We(We({},p),{},{format:ee,showHour:$,showMinute:L,showSecond:N,showMillisecond:V,use12Hours:j})}return null}function Voe(e,t,n){if(t===!1)return null;var r=t&&cr(t)==="object"?t:{};return r.clearIcon||n||_.createElement("span",{className:"".concat(e,"-clear-btn")})}var iE=7;function Hd(e,t,n){return!e&&!t||e===t?!0:!e||!t?!1:n()}function FI(e,t,n){return Hd(t,n,function(){var r=Math.floor(e.getYear(t)/10),s=Math.floor(e.getYear(n)/10);return r===s})}function Qh(e,t,n){return Hd(t,n,function(){return e.getYear(t)===e.getYear(n)})}function bz(e,t){var n=Math.floor(e.getMonth(t)/3);return n+1}function Hoe(e,t,n){return Hd(t,n,function(){return Qh(e,t,n)&&bz(e,t)===bz(e,n)})}function QP(e,t,n){return Hd(t,n,function(){return Qh(e,t,n)&&e.getMonth(t)===e.getMonth(n)})}function eR(e,t,n){return Hd(t,n,function(){return Qh(e,t,n)&&QP(e,t,n)&&e.getDate(t)===e.getDate(n)})}function cj(e,t,n){return Hd(t,n,function(){return e.getHour(t)===e.getHour(n)&&e.getMinute(t)===e.getMinute(n)&&e.getSecond(t)===e.getSecond(n)})}function uj(e,t,n){return Hd(t,n,function(){return eR(e,t,n)&&cj(e,t,n)&&e.getMillisecond(t)===e.getMillisecond(n)})}function c0(e,t,n,r){return Hd(n,r,function(){var s=e.locale.getWeekFirstDate(t,n),d=e.locale.getWeekFirstDate(t,r);return Qh(e,s,d)&&e.locale.getWeek(t,n)===e.locale.getWeek(t,r)})}function ja(e,t,n,r,s){switch(s){case"date":return eR(e,n,r);case"week":return c0(e,t.locale,n,r);case"month":return QP(e,n,r);case"quarter":return Hoe(e,n,r);case"year":return Qh(e,n,r);case"decade":return FI(e,n,r);case"time":return cj(e,n,r);default:return uj(e,n,r)}}function Gw(e,t,n,r){return!t||!n||!r?!1:e.isAfter(r,t)&&e.isAfter(n,r)}function ib(e,t,n,r,s){return ja(e,t,n,r,s)?!0:e.isAfter(n,r)}function Uoe(e,t,n){var r=t.locale.getWeekFirstDay(e),s=t.setDate(n,1),d=t.getWeekDay(s),p=t.addDate(s,r-d);return t.getMonth(p)===t.getMonth(n)&&t.getDate(p)>1&&(p=t.addDate(p,-7)),p}function sa(e,t){var n=t.generateConfig,r=t.locale,s=t.format;return e?typeof s=="function"?s(e):n.locale.format(r.locale,e,s):""}function D1(e,t,n){var r=t,s=["getHour","getMinute","getSecond","getMillisecond"],d=["setHour","setMinute","setSecond","setMillisecond"];return d.forEach(function(p,i){n?r=e[p](r,e[s[i]](n)):r=e[p](r,0)}),r}function Woe(e,t,n,r,s){var d=Zr(function(p,i){return!!(n&&n(p,i)||r&&e.isAfter(r,p)&&!ja(e,t,r,p,i.type)||s&&e.isAfter(p,s)&&!ja(e,t,s,p,i.type))});return d}function Goe(e,t,n){return _.useMemo(function(){var r=Q6(e,t,n),s=df(r),d=s[0],p=cr(d)==="object"&&d.type==="mask"?d.format:null;return[s.map(function(i){return typeof i=="string"||typeof i=="function"?i:i.format}),p]},[e,t,n])}function qoe(e,t,n){return typeof e[0]=="function"||n?!0:t}function Koe(e,t,n,r){var s=Zr(function(d,p){var i=We({type:t},p);if(delete i.activeIndex,!e.isValidate(d)||n&&n(d,i))return!0;if((t==="date"||t==="time")&&r){var x,S=p&&p.activeIndex===1?"end":"start",T=((x=r.disabledTime)===null||x===void 0?void 0:x.call(r,d,S,{from:i.from}))||{},M=T.disabledHours,$=T.disabledMinutes,L=T.disabledSeconds,N=T.disabledMilliseconds,V=r.disabledHours,B=r.disabledMinutes,j=r.disabledSeconds,H=M||V,W=$||B,X=L||j,ee=e.getHour(d),J=e.getMinute(d),Y=e.getSecond(d),re=e.getMillisecond(d);if(H&&H().includes(ee)||W&&W(ee).includes(J)||X&&X(ee,J).includes(Y)||N&&N(ee,J,Y).includes(re))return!0}return!1});return s}function ob(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=_.useMemo(function(){var r=e&&df(e);return t&&r&&(r[1]=r[1]||r[0]),r},[e,t]);return n}function dj(e,t){var n=e.generateConfig,r=e.locale,s=e.picker,d=s===void 0?"date":s,p=e.prefixCls,i=p===void 0?"rc-picker":p,x=e.styles,S=x===void 0?{}:x,T=e.classNames,M=T===void 0?{}:T,$=e.order,L=$===void 0?!0:$,N=e.components,V=N===void 0?{}:N,B=e.inputRender,j=e.allowClear,H=e.clearIcon,W=e.needConfirm,X=e.multiple,ee=e.format,J=e.inputReadOnly,Y=e.disabledDate,re=e.minDate,se=e.maxDate,ae=e.showTime,ce=e.value,Ce=e.defaultValue,we=e.pickerValue,ge=e.defaultPickerValue,ve=ob(ce),de=ob(Ce),pe=ob(we),fe=ob(ge),me=d==="date"&&ae?"datetime":d,Ie=me==="time"||me==="datetime",Me=Ie||X,Be=W??Ie,$e=sj(e),ze=ot($e,4),Je=ze[0],yt=ze[1],at=ze[2],gt=ze[3],wt=ij(r,yt),Pe=_.useMemo(function(){return lj(me,at,gt,Je,wt)},[me,at,gt,Je,wt]),mt=_.useMemo(function(){return We(We({},e),{},{prefixCls:i,locale:wt,picker:d,styles:S,classNames:M,order:L,components:We({input:B},V),clearIcon:Voe(i,j,H),showTime:Pe,value:ve,defaultValue:de,pickerValue:pe,defaultPickerValue:fe},t==null?void 0:t())},[e]),dt=Goe(me,wt,ee),ht=ot(dt,2),je=ht[0],St=ht[1],Ct=qoe(je,J,X),Lt=Woe(n,r,Y,re,se),At=Koe(n,d,Lt,Pe),Yt=_.useMemo(function(){return We(We({},mt),{},{needConfirm:Be,inputReadOnly:Ct,disabledDate:Lt})},[mt,Be,Ct,Lt]);return[Yt,me,Me,je,St,At]}function Xoe(e,t,n){var r=Bi(t,{value:e}),s=ot(r,2),d=s[0],p=s[1],i=Ft.useRef(e),x=Ft.useRef(),S=function(){ui.cancel(x.current)},T=Zr(function(){p(i.current),n&&d!==i.current&&n(i.current)}),M=Zr(function($,L){S(),i.current=$,$||L?T():x.current=ui(T)});return Ft.useEffect(function(){return S},[]),[d,M]}function hj(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,s=n.every(function(T){return T})?!1:e,d=Xoe(s,t||!1,r),p=ot(d,2),i=p[0],x=p[1];function S(T){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!M.inherit||i)&&x(T,M.force)}return[i,S]}function fj(e){var t=_.useRef();return _.useImperativeHandle(e,function(){var n;return{nativeElement:(n=t.current)===null||n===void 0?void 0:n.nativeElement,focus:function(s){var d;(d=t.current)===null||d===void 0||d.focus(s)},blur:function(){var s;(s=t.current)===null||s===void 0||s.blur()}}}),t}function pj(e,t){return _.useMemo(function(){return e||(t?(go(!1,"`ranges` is deprecated. Please use `presets` instead."),Object.entries(t).map(function(n){var r=ot(n,2),s=r[0],d=r[1];return{label:s,value:d}})):[])},[e,t])}function tR(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=_.useRef(t);r.current=t,_1(function(){if(e)r.current(e);else{var s=ui(function(){r.current(e)},n);return function(){ui.cancel(s)}}},[e])}function mj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=_.useState(0),s=ot(r,2),d=s[0],p=s[1],i=_.useState(!1),x=ot(i,2),S=x[0],T=x[1],M=_.useRef([]),$=_.useRef(null),L=function(j){T(j)},N=function(j){return j&&($.current=j),$.current},V=function(j){var H=M.current,W=new Set(H.filter(function(ee){return j[ee]||t[ee]})),X=H[H.length-1]===0?1:0;return W.size>=2||e[X]?null:X};return tR(S||n,function(){S||(M.current=[])}),_.useEffect(function(){S&&M.current.push(d)},[S,d]),[S,L,N,d,p,V,M.current]}function Zoe(e,t,n,r,s,d){var p=n[n.length-1],i=function(S,T){var M=ot(e,2),$=M[0],L=M[1],N=We(We({},T),{},{from:ej(e,n)});return p===1&&t[0]&&$&&!ja(r,s,$,S,N.type)&&r.isAfter($,S)||p===0&&t[1]&&L&&!ja(r,s,L,S,N.type)&&r.isAfter(S,L)?!0:d==null?void 0:d(S,N)};return i}function u0(e,t,n,r){switch(t){case"date":case"week":return e.addMonth(n,r);case"month":case"quarter":return e.addYear(n,r);case"year":return e.addYear(n,r*10);case"decade":return e.addYear(n,r*100);default:return n}}var oE=[];function gj(e,t,n,r,s,d,p,i){var x=arguments.length>8&&arguments[8]!==void 0?arguments[8]:oE,S=arguments.length>9&&arguments[9]!==void 0?arguments[9]:oE,T=arguments.length>10&&arguments[10]!==void 0?arguments[10]:oE,M=arguments.length>11?arguments[11]:void 0,$=arguments.length>12?arguments[12]:void 0,L=arguments.length>13?arguments[13]:void 0,N=p==="time",V=d||0,B=function(pe){var fe=e.getNow();return N&&(fe=D1(e,fe)),x[pe]||n[pe]||fe},j=ot(S,2),H=j[0],W=j[1],X=Bi(function(){return B(0)},{value:H}),ee=ot(X,2),J=ee[0],Y=ee[1],re=Bi(function(){return B(1)},{value:W}),se=ot(re,2),ae=se[0],ce=se[1],Ce=_.useMemo(function(){var de=[J,ae][V];return N?de:D1(e,de,T[V])},[N,J,ae,V,e,T]),we=function(pe){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"panel",me=[Y,ce][V];me(pe);var Ie=[J,ae];Ie[V]=pe,M&&(!ja(e,t,J,Ie[0],p)||!ja(e,t,ae,Ie[1],p))&&M(Ie,{source:fe,range:V===1?"end":"start",mode:r})},ge=function(pe,fe){if(i){var me={date:"month",week:"month",month:"year",quarter:"year"},Ie=me[p];if(Ie&&!ja(e,t,pe,fe,Ie))return u0(e,p,fe,-1);if(p==="year"&&pe){var Me=Math.floor(e.getYear(pe)/10),Be=Math.floor(e.getYear(fe)/10);if(Me!==Be)return u0(e,p,fe,-1)}}return fe},ve=_.useRef(null);return Xr(function(){if(s&&!x[V]){var de=N?null:e.getNow();if(ve.current!==null&&ve.current!==V?de=[J,ae][V^1]:n[V]?de=V===0?n[0]:ge(n[0],n[1]):n[V^1]&&(de=n[V^1]),de){$&&e.isAfter($,de)&&(de=$);var pe=i?u0(e,p,de,1):de;L&&e.isAfter(pe,L)&&(de=i?u0(e,p,L,-1):L),we(de,"reset")}}},[s,V,n[V]]),_.useEffect(function(){s?ve.current=V:ve.current=null},[s,V]),Xr(function(){s&&x&&x[V]&&we(x[V],"reset")},[s,V]),[Ce,we]}function vj(e,t){var n=_.useRef(e),r=_.useState({}),s=ot(r,2),d=s[1],p=function(S){return S&&t!==void 0?t:n.current},i=function(S){n.current=S,d({})};return[p,i,p(!0)]}var Yoe=[];function yj(e,t,n){var r=function(p){return p.map(function(i){return sa(i,{generateConfig:e,locale:t,format:n[0]})})},s=function(p,i){for(var x=Math.max(p.length,i.length),S=-1,T=0;T<x;T+=1){var M=p[T]||null,$=i[T]||null;if(M!==$&&!uj(e,M,$)){S=T;break}}return[S<0,S!==0]};return[r,s]}function _j(e,t){return un(e).sort(function(n,r){return t.isAfter(n,r)?1:-1})}function Joe(e){var t=vj(e),n=ot(t,2),r=n[0],s=n[1],d=Zr(function(){s(e)});return _.useEffect(function(){d()},[e]),[r,s]}function xj(e,t,n,r,s,d,p,i,x){var S=Bi(d,{value:p}),T=ot(S,2),M=T[0],$=T[1],L=M||Yoe,N=Joe(L),V=ot(N,2),B=V[0],j=V[1],H=yj(e,t,n),W=ot(H,2),X=W[0],ee=W[1],J=Zr(function(re){var se=un(re);if(r)for(var ae=0;ae<2;ae+=1)se[ae]=se[ae]||null;else s&&(se=_j(se.filter(function(de){return de}),e));var ce=ee(B(),se),Ce=ot(ce,2),we=Ce[0],ge=Ce[1];if(!we&&(j(se),i)){var ve=X(se);i(se,ve,{range:ge?"end":"start"})}}),Y=function(){x&&x(B())};return[L,$,B,J,Y]}function bj(e,t,n,r,s,d,p,i,x,S){var T=e.generateConfig,M=e.locale,$=e.picker,L=e.onChange,N=e.allowEmpty,V=e.order,B=d.some(function(ge){return ge})?!1:V,j=yj(T,M,p),H=ot(j,2),W=H[0],X=H[1],ee=vj(t),J=ot(ee,2),Y=J[0],re=J[1],se=Zr(function(){re(t)});_.useEffect(function(){se()},[t]);var ae=Zr(function(ge){var ve=ge===null,de=un(ge||Y());if(ve)for(var pe=Math.max(d.length,de.length),fe=0;fe<pe;fe+=1)d[fe]||(de[fe]=null);B&&de[0]&&de[1]&&(de=_j(de,T)),s(de);var me=de,Ie=ot(me,2),Me=Ie[0],Be=Ie[1],$e=!Me,ze=!Be,Je=N?(!$e||N[0])&&(!ze||N[1]):!0,yt=!V||$e||ze||ja(T,M,Me,Be,$)||T.isAfter(Be,Me),at=(d[0]||!Me||!S(Me,{activeIndex:0}))&&(d[1]||!Be||!S(Be,{from:Me,activeIndex:1})),gt=ve||Je&&yt&&at;if(gt){n(de);var wt=X(de,t),Pe=ot(wt,1),mt=Pe[0];L&&!mt&&L(ve&&de.every(function(dt){return!dt})?null:de,W(de))}return gt}),ce=Zr(function(ge,ve){var de=T0(Y(),ge,r()[ge]);re(de),ve&&ae()}),Ce=!i&&!x;tR(!Ce,function(){Ce&&(ae(),s(t),se())},2);function we(ge){return!!Y()[ge]}return[ce,ae,we]}function wj(e,t,n,r,s){return t!=="date"&&t!=="time"?!1:n!==void 0?n:r!==void 0?r:!s&&(e==="date"||e==="time")}function Qoe(e,t,n,r,s,d){var p=e;function i(M,$,L){var N=d[M](p),V=L.find(function(W){return W.value===N});if(!V||V.disabled){var B=L.filter(function(W){return!W.disabled}),j=un(B).reverse(),H=j.find(function(W){return W.value<=N})||B[0];H&&(N=H.value,p=d[$](p,N))}return N}var x=i("getHour","setHour",t()),S=i("getMinute","setMinute",n(x)),T=i("getSecond","setSecond",r(x,S));return i("getMillisecond","setMillisecond",s(x,S,T)),p}function ab(){return[]}function sb(e,t){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],d=arguments.length>5&&arguments[5]!==void 0?arguments[5]:2,p=[],i=n>=1?n|0:1,x=e;x<=t;x+=i){var S=s.includes(x);(!S||!r)&&p.push({label:YP(x,d),value:x,disabled:S})}return p}function nR(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t||{},s=r.use12Hours,d=r.hourStep,p=d===void 0?1:d,i=r.minuteStep,x=i===void 0?1:i,S=r.secondStep,T=S===void 0?1:S,M=r.millisecondStep,$=M===void 0?100:M,L=r.hideDisabledOptions,N=r.disabledTime,V=r.disabledHours,B=r.disabledMinutes,j=r.disabledSeconds,H=_.useMemo(function(){return n||e.getNow()},[n,e]),W=_.useCallback(function(fe){var me=(N==null?void 0:N(fe))||{};return[me.disabledHours||V||ab,me.disabledMinutes||B||ab,me.disabledSeconds||j||ab,me.disabledMilliseconds||ab]},[N,V,B,j]),X=_.useMemo(function(){return W(H)},[H,W]),ee=ot(X,4),J=ee[0],Y=ee[1],re=ee[2],se=ee[3],ae=_.useCallback(function(fe,me,Ie,Me){var Be=sb(0,23,p,L,fe()),$e=s?Be.map(function(at){return We(We({},at),{},{label:YP(at.value%12||12,2)})}):Be,ze=function(gt){return sb(0,59,x,L,me(gt))},Je=function(gt,wt){return sb(0,59,T,L,Ie(gt,wt))},yt=function(gt,wt,Pe){return sb(0,999,$,L,Me(gt,wt,Pe),3)};return[$e,ze,Je,yt]},[L,p,s,$,x,T]),ce=_.useMemo(function(){return ae(J,Y,re,se)},[ae,J,Y,re,se]),Ce=ot(ce,4),we=Ce[0],ge=Ce[1],ve=Ce[2],de=Ce[3],pe=function(me,Ie){var Me=function(){return we},Be=ge,$e=ve,ze=de;if(Ie){var Je=W(Ie),yt=ot(Je,4),at=yt[0],gt=yt[1],wt=yt[2],Pe=yt[3],mt=ae(at,gt,wt,Pe),dt=ot(mt,4),ht=dt[0],je=dt[1],St=dt[2],Ct=dt[3];Me=function(){return ht},Be=je,$e=St,ze=Ct}var Lt=Qoe(me,Me,Be,$e,ze,e);return Lt};return[pe,we,ge,ve,de]}function eae(e){var t=e.mode,n=e.internalMode,r=e.renderExtraFooter,s=e.showNow,d=e.showTime,p=e.onSubmit,i=e.onNow,x=e.invalid,S=e.needConfirm,T=e.generateConfig,M=e.disabledDate,$=_.useContext(Yl),L=$.prefixCls,N=$.locale,V=$.button,B=V===void 0?"button":V,j=T.getNow(),H=nR(T,d,j),W=ot(H,1),X=W[0],ee=r==null?void 0:r(t),J=M(j,{type:t}),Y=function(){if(!J){var ge=X(j);i(ge)}},re="".concat(L,"-now"),se="".concat(re,"-btn"),ae=s&&_.createElement("li",{className:re},_.createElement("a",{className:pt(se,J&&"".concat(se,"-disabled")),"aria-disabled":J,onClick:Y},n==="date"?N.today:N.now)),ce=S&&_.createElement("li",{className:"".concat(L,"-ok")},_.createElement(B,{disabled:x,onClick:p},N.ok)),Ce=(ae||ce)&&_.createElement("ul",{className:"".concat(L,"-ranges")},ae,ce);return!ee&&!Ce?null:_.createElement("div",{className:"".concat(L,"-footer")},ee&&_.createElement("div",{className:"".concat(L,"-footer-extra")},ee),Ce)}function Sj(e,t,n){function r(s,d){var p=s.findIndex(function(x){return ja(e,t,x,d,n)});if(p===-1)return[].concat(un(s),[d]);var i=un(s);return i.splice(p,1),i}return r}var hf=_.createContext(null);function qw(){return _.useContext(hf)}function Lm(e,t){var n=e.prefixCls,r=e.generateConfig,s=e.locale,d=e.disabledDate,p=e.minDate,i=e.maxDate,x=e.cellRender,S=e.hoverValue,T=e.hoverRangeValue,M=e.onHover,$=e.values,L=e.pickerValue,N=e.onSelect,V=e.prevIcon,B=e.nextIcon,j=e.superPrevIcon,H=e.superNextIcon,W=r.getNow(),X={now:W,values:$,pickerValue:L,prefixCls:n,disabledDate:d,minDate:p,maxDate:i,cellRender:x,hoverValue:S,hoverRangeValue:T,onHover:M,locale:s,generateConfig:r,onSelect:N,panelType:t,prevIcon:V,nextIcon:B,superPrevIcon:j,superNextIcon:H};return[X,W]}var Pd=_.createContext({});function Dy(e){for(var t=e.rowNum,n=e.colNum,r=e.baseDate,s=e.getCellDate,d=e.prefixColumn,p=e.rowClassName,i=e.titleFormat,x=e.getCellText,S=e.getCellClassName,T=e.headerCells,M=e.cellSelection,$=M===void 0?!0:M,L=e.disabledDate,N=qw(),V=N.prefixCls,B=N.panelType,j=N.now,H=N.disabledDate,W=N.cellRender,X=N.onHover,ee=N.hoverValue,J=N.hoverRangeValue,Y=N.generateConfig,re=N.values,se=N.locale,ae=N.onSelect,ce=L||H,Ce="".concat(V,"-cell"),we=_.useContext(Pd),ge=we.onCellDblClick,ve=function($e){return re.some(function(ze){return ze&&ja(Y,se,$e,ze,B)})},de=[],pe=0;pe<t;pe+=1){for(var fe=[],me=void 0,Ie=function(){var $e=pe*n+Me,ze=s(r,$e),Je=ce==null?void 0:ce(ze,{type:B});Me===0&&(me=ze,d&&fe.push(d(me)));var yt=!1,at=!1,gt=!1;if($&&J){var wt=ot(J,2),Pe=wt[0],mt=wt[1];yt=Gw(Y,Pe,mt,ze),at=ja(Y,se,ze,Pe,B),gt=ja(Y,se,ze,mt,B)}var dt=i?sa(ze,{locale:se,format:i,generateConfig:Y}):void 0,ht=_.createElement("div",{className:"".concat(Ce,"-inner")},x(ze));fe.push(_.createElement("td",{key:Me,title:dt,className:pt(Ce,We(De(De(De(De(De(De({},"".concat(Ce,"-disabled"),Je),"".concat(Ce,"-hover"),(ee||[]).some(function(je){return ja(Y,se,ze,je,B)})),"".concat(Ce,"-in-range"),yt&&!at&&!gt),"".concat(Ce,"-range-start"),at),"".concat(Ce,"-range-end"),gt),"".concat(V,"-cell-selected"),!J&&B!=="week"&&ve(ze)),S(ze))),onClick:function(){Je||ae(ze)},onDoubleClick:function(){!Je&&ge&&ge()},onMouseEnter:function(){Je||X==null||X(ze)},onMouseLeave:function(){Je||X==null||X(null)}},W?W(ze,{prefixCls:V,originNode:ht,today:j,type:B,locale:se}):ht))},Me=0;Me<n;Me+=1)Ie();de.push(_.createElement("tr",{key:pe,className:p==null?void 0:p(me)},fe))}return _.createElement("div",{className:"".concat(V,"-body")},_.createElement("table",{className:"".concat(V,"-content")},T&&_.createElement("thead",null,_.createElement("tr",null,T)),_.createElement("tbody",null,de)))}var lb={visibility:"hidden"};function Nm(e){var t=e.offset,n=e.superOffset,r=e.onChange,s=e.getStart,d=e.getEnd,p=e.children,i=qw(),x=i.prefixCls,S=i.prevIcon,T=S===void 0?"‹":S,M=i.nextIcon,$=M===void 0?"›":M,L=i.superPrevIcon,N=L===void 0?"«":L,V=i.superNextIcon,B=V===void 0?"»":V,j=i.minDate,H=i.maxDate,W=i.generateConfig,X=i.locale,ee=i.pickerValue,J=i.panelType,Y="".concat(x,"-header"),re=_.useContext(Pd),se=re.hidePrev,ae=re.hideNext,ce=re.hideHeader,Ce=_.useMemo(function(){if(!j||!t||!d)return!1;var Be=d(t(-1,ee));return!ib(W,X,Be,j,J)},[j,t,ee,d,W,X,J]),we=_.useMemo(function(){if(!j||!n||!d)return!1;var Be=d(n(-1,ee));return!ib(W,X,Be,j,J)},[j,n,ee,d,W,X,J]),ge=_.useMemo(function(){if(!H||!t||!s)return!1;var Be=s(t(1,ee));return!ib(W,X,H,Be,J)},[H,t,ee,s,W,X,J]),ve=_.useMemo(function(){if(!H||!n||!s)return!1;var Be=s(n(1,ee));return!ib(W,X,H,Be,J)},[H,n,ee,s,W,X,J]),de=function($e){t&&r(t($e,ee))},pe=function($e){n&&r(n($e,ee))};if(ce)return null;var fe="".concat(Y,"-prev-btn"),me="".concat(Y,"-next-btn"),Ie="".concat(Y,"-super-prev-btn"),Me="".concat(Y,"-super-next-btn");return _.createElement("div",{className:Y},n&&_.createElement("button",{type:"button","aria-label":"super-prev-year",onClick:function(){return pe(-1)},tabIndex:-1,className:pt(Ie,we&&"".concat(Ie,"-disabled")),disabled:we,style:se?lb:{}},N),t&&_.createElement("button",{type:"button","aria-label":"prev-year",onClick:function(){return de(-1)},tabIndex:-1,className:pt(fe,Ce&&"".concat(fe,"-disabled")),disabled:Ce,style:se?lb:{}},T),_.createElement("div",{className:"".concat(Y,"-view")},p),t&&_.createElement("button",{type:"button","aria-label":"next-year",onClick:function(){return de(1)},tabIndex:-1,className:pt(me,ge&&"".concat(me,"-disabled")),disabled:ge,style:ae?lb:{}},$),n&&_.createElement("button",{type:"button","aria-label":"super-next-year",onClick:function(){return pe(1)},tabIndex:-1,className:pt(Me,ve&&"".concat(Me,"-disabled")),disabled:ve,style:ae?lb:{}},B))}function Kw(e){var t=e.prefixCls,n=e.panelName,r=n===void 0?"date":n,s=e.locale,d=e.generateConfig,p=e.pickerValue,i=e.onPickerValueChange,x=e.onModeChange,S=e.mode,T=S===void 0?"date":S,M=e.disabledDate,$=e.onSelect,L=e.onHover,N=e.showWeek,V="".concat(t,"-").concat(r,"-panel"),B="".concat(t,"-cell"),j=T==="week",H=Lm(e,T),W=ot(H,2),X=W[0],ee=W[1],J=d.locale.getWeekFirstDay(s.locale),Y=d.setDate(p,1),re=Uoe(s.locale,d,Y),se=d.getMonth(p),ae=N===void 0?j:N,ce=ae?function(Be){var $e=M==null?void 0:M(Be,{type:"week"});return _.createElement("td",{key:"week",className:pt(B,"".concat(B,"-week"),De({},"".concat(B,"-disabled"),$e)),onClick:function(){$e||$(Be)},onMouseEnter:function(){$e||L==null||L(Be)},onMouseLeave:function(){$e||L==null||L(null)}},_.createElement("div",{className:"".concat(B,"-inner")},d.locale.getWeek(s.locale,Be)))}:null,Ce=[],we=s.shortWeekDays||(d.locale.getShortWeekDays?d.locale.getShortWeekDays(s.locale):[]);ce&&Ce.push(_.createElement("th",{key:"empty","aria-label":"empty cell"}));for(var ge=0;ge<iE;ge+=1)Ce.push(_.createElement("th",{key:ge},we[(ge+J)%iE]));var ve=function($e,ze){return d.addDate($e,ze)},de=function($e){return sa($e,{locale:s,format:s.cellDateFormat,generateConfig:d})},pe=function($e){var ze=De(De({},"".concat(t,"-cell-in-view"),QP(d,$e,p)),"".concat(t,"-cell-today"),eR(d,$e,ee));return ze},fe=s.shortMonths||(d.locale.getShortMonths?d.locale.getShortMonths(s.locale):[]),me=_.createElement("button",{type:"button","aria-label":"year panel",key:"year",onClick:function(){x("year",p)},tabIndex:-1,className:"".concat(t,"-year-btn")},sa(p,{locale:s,format:s.yearFormat,generateConfig:d})),Ie=_.createElement("button",{type:"button","aria-label":"month panel",key:"month",onClick:function(){x("month",p)},tabIndex:-1,className:"".concat(t,"-month-btn")},s.monthFormat?sa(p,{locale:s,format:s.monthFormat,generateConfig:d}):fe[se]),Me=s.monthBeforeYear?[Ie,me]:[me,Ie];return _.createElement(hf.Provider,{value:X},_.createElement("div",{className:pt(V,N&&"".concat(V,"-show-week"))},_.createElement(Nm,{offset:function($e){return d.addMonth(p,$e)},superOffset:function($e){return d.addYear(p,$e)},onChange:i,getStart:function($e){return d.setDate($e,1)},getEnd:function($e){var ze=d.setDate($e,1);return ze=d.addMonth(ze,1),d.addDate(ze,-1)}},Me),_.createElement(Dy,qt({titleFormat:s.fieldDateFormat},e,{colNum:iE,rowNum:6,baseDate:re,headerCells:Ce,getCellDate:ve,getCellText:de,getCellClassName:pe,prefixColumn:ce,cellSelection:!j}))))}var tae=1/3;function nae(e,t){var n=_.useRef(!1),r=_.useRef(null),s=_.useRef(null),d=function(){return n.current},p=function(){ui.cancel(r.current),n.current=!1},i=_.useRef(),x=function(){var M=e.current;if(s.current=null,i.current=0,M){var $=M.querySelector('[data-value="'.concat(t,'"]')),L=M.querySelector("li"),N=function V(){p(),n.current=!0,i.current+=1;var B=M.scrollTop,j=L.offsetTop,H=$.offsetTop,W=H-j;if(H===0&&$!==L||!Sy(M)){i.current<=5&&(r.current=ui(V));return}var X=B+(W-B)*tae,ee=Math.abs(W-X);if(s.current!==null&&s.current<ee){p();return}if(s.current=ee,ee<=1){M.scrollTop=W,p();return}M.scrollTop=X,r.current=ui(V)};$&&L&&N()}},S=Zr(x);return[S,p,d]}var rae=300;function Qv(e){var t=e.units,n=e.value,r=e.optionalValue,s=e.type,d=e.onChange,p=e.onHover,i=e.onDblClick,x=e.changeOnScroll,S=qw(),T=S.prefixCls,M=S.cellRender,$=S.now,L=S.locale,N="".concat(T,"-time-panel"),V="".concat(T,"-time-panel-cell"),B=_.useRef(null),j=_.useRef(),H=function(){clearTimeout(j.current)},W=nae(B,n??r),X=ot(W,3),ee=X[0],J=X[1],Y=X[2];Xr(function(){return ee(),H(),function(){J(),H()}},[n,r,t]);var re=function(ce){H();var Ce=ce.target;!Y()&&x&&(j.current=setTimeout(function(){var we=B.current,ge=we.querySelector("li").offsetTop,ve=Array.from(we.querySelectorAll("li")),de=ve.map(function(Me){return Me.offsetTop-ge}),pe=de.map(function(Me,Be){return t[Be].disabled?Number.MAX_SAFE_INTEGER:Math.abs(Me-Ce.scrollTop)}),fe=Math.min.apply(Math,un(pe)),me=pe.findIndex(function(Me){return Me===fe}),Ie=t[me];Ie&&!Ie.disabled&&d(Ie.value)},rae))},se="".concat(N,"-column");return _.createElement("ul",{className:se,ref:B,"data-type":s,onScroll:re},t.map(function(ae){var ce=ae.label,Ce=ae.value,we=ae.disabled,ge=_.createElement("div",{className:"".concat(V,"-inner")},ce);return _.createElement("li",{key:Ce,className:pt(V,De(De({},"".concat(V,"-selected"),n===Ce),"".concat(V,"-disabled"),we)),onClick:function(){we||d(Ce)},onDoubleClick:function(){!we&&i&&i()},onMouseEnter:function(){p(Ce)},onMouseLeave:function(){p(null)},"data-value":Ce},M?M(Ce,{prefixCls:T,originNode:ge,today:$,type:"time",subType:s,locale:L}):ge)}))}function nd(e){return e<12}function iae(e){var t=e.showHour,n=e.showMinute,r=e.showSecond,s=e.showMillisecond,d=e.use12Hours,p=e.changeOnScroll,i=qw(),x=i.prefixCls,S=i.values,T=i.generateConfig,M=i.locale,$=i.onSelect,L=i.onHover,N=L===void 0?function(){}:L,V=i.pickerValue,B=(S==null?void 0:S[0])||null,j=_.useContext(Pd),H=j.onCellDblClick,W=nR(T,e,B),X=ot(W,5),ee=X[0],J=X[1],Y=X[2],re=X[3],se=X[4],ae=function(Xt){var Hn=B&&T[Xt](B),br=V&&T[Xt](V);return[Hn,br]},ce=ae("getHour"),Ce=ot(ce,2),we=Ce[0],ge=Ce[1],ve=ae("getMinute"),de=ot(ve,2),pe=de[0],fe=de[1],me=ae("getSecond"),Ie=ot(me,2),Me=Ie[0],Be=Ie[1],$e=ae("getMillisecond"),ze=ot($e,2),Je=ze[0],yt=ze[1],at=we===null?null:nd(we)?"am":"pm",gt=_.useMemo(function(){return d?nd(we)?J.filter(function(Zt){return nd(Zt.value)}):J.filter(function(Zt){return!nd(Zt.value)}):J},[we,J,d]),wt=function(Xt,Hn){var br,mr=Xt.filter(function(pr){return!pr.disabled});return Hn??(mr==null||(br=mr[0])===null||br===void 0?void 0:br.value)},Pe=wt(J,we),mt=_.useMemo(function(){return Y(Pe)},[Y,Pe]),dt=wt(mt,pe),ht=_.useMemo(function(){return re(Pe,dt)},[re,Pe,dt]),je=wt(ht,Me),St=_.useMemo(function(){return se(Pe,dt,je)},[se,Pe,dt,je]),Ct=wt(St,Je),Lt=_.useMemo(function(){if(!d)return[];var Zt=T.getNow(),Xt=T.setHour(Zt,6),Hn=T.setHour(Zt,18),br=function(pr,Tr){var ur=M.cellMeridiemFormat;return ur?sa(pr,{generateConfig:T,locale:M,format:ur}):Tr};return[{label:br(Xt,"AM"),value:"am",disabled:J.every(function(mr){return mr.disabled||!nd(mr.value)})},{label:br(Hn,"PM"),value:"pm",disabled:J.every(function(mr){return mr.disabled||nd(mr.value)})}]},[J,d,T,M]),At=function(Xt){var Hn=ee(Xt);$(Hn)},Yt=_.useMemo(function(){var Zt=B||V||T.getNow(),Xt=function(br){return br!=null};return Xt(we)?(Zt=T.setHour(Zt,we),Zt=T.setMinute(Zt,pe),Zt=T.setSecond(Zt,Me),Zt=T.setMillisecond(Zt,Je)):Xt(ge)?(Zt=T.setHour(Zt,ge),Zt=T.setMinute(Zt,fe),Zt=T.setSecond(Zt,Be),Zt=T.setMillisecond(Zt,yt)):Xt(Pe)&&(Zt=T.setHour(Zt,Pe),Zt=T.setMinute(Zt,dt),Zt=T.setSecond(Zt,je),Zt=T.setMillisecond(Zt,Ct)),Zt},[B,V,we,pe,Me,Je,Pe,dt,je,Ct,ge,fe,Be,yt,T]),Kt=function(Xt,Hn){return Xt===null?null:T[Hn](Yt,Xt)},Dt=function(Xt){return Kt(Xt,"setHour")},Wt=function(Xt){return Kt(Xt,"setMinute")},Vt=function(Xt){return Kt(Xt,"setSecond")},Rt=function(Xt){return Kt(Xt,"setMillisecond")},dn=function(Xt){return Xt===null?null:Xt==="am"&&!nd(we)?T.setHour(Yt,we-12):Xt==="pm"&&nd(we)?T.setHour(Yt,we+12):Yt},hn=function(Xt){At(Dt(Xt))},Pn=function(Xt){At(Wt(Xt))},Dn=function(Xt){At(Vt(Xt))},yn=function(Xt){At(Rt(Xt))},Rn=function(Xt){At(dn(Xt))},kn=function(Xt){N(Dt(Xt))},Cn=function(Xt){N(Wt(Xt))},nn=function(Xt){N(Vt(Xt))},Ut=function(Xt){N(Rt(Xt))},cn=function(Xt){N(dn(Xt))},an={onDblClick:H,changeOnScroll:p};return _.createElement("div",{className:"".concat(x,"-content")},t&&_.createElement(Qv,qt({units:gt,value:we,optionalValue:ge,type:"hour",onChange:hn,onHover:kn},an)),n&&_.createElement(Qv,qt({units:mt,value:pe,optionalValue:fe,type:"minute",onChange:Pn,onHover:Cn},an)),r&&_.createElement(Qv,qt({units:ht,value:Me,optionalValue:Be,type:"second",onChange:Dn,onHover:nn},an)),s&&_.createElement(Qv,qt({units:St,value:Je,optionalValue:yt,type:"millisecond",onChange:yn,onHover:Ut},an)),d&&_.createElement(Qv,qt({units:Lt,value:at,type:"meridiem",onChange:Rn,onHover:cn},an)))}function Cj(e){var t=e.prefixCls,n=e.value,r=e.locale,s=e.generateConfig,d=e.showTime,p=d||{},i=p.format,x="".concat(t,"-time-panel"),S=Lm(e,"time"),T=ot(S,1),M=T[0];return _.createElement(hf.Provider,{value:M},_.createElement("div",{className:pt(x)},_.createElement(Nm,null,n?sa(n,{locale:r,format:i,generateConfig:s}):" "),_.createElement(iae,d)))}function oae(e){var t=e.prefixCls,n=e.generateConfig,r=e.showTime,s=e.onSelect,d=e.value,p=e.pickerValue,i=e.onHover,x="".concat(t,"-datetime-panel"),S=nR(n,r),T=ot(S,1),M=T[0],$=function(B){return d?D1(n,B,d):D1(n,B,p)},L=function(B){i==null||i(B&&$(B))},N=function(B){var j=$(B);s(M(j,j))};return _.createElement("div",{className:x},_.createElement(Kw,qt({},e,{onSelect:N,onHover:L})),_.createElement(Cj,e))}function aae(e){var t=e.prefixCls,n=e.locale,r=e.generateConfig,s=e.pickerValue,d=e.disabledDate,p=e.onPickerValueChange,i="".concat(t,"-decade-panel"),x=Lm(e,"decade"),S=ot(x,1),T=S[0],M=function(J){var Y=Math.floor(r.getYear(J)/100)*100;return r.setYear(J,Y)},$=function(J){var Y=M(J);return r.addYear(Y,99)},L=M(s),N=$(s),V=r.addYear(L,-10),B=function(J,Y){return r.addYear(J,Y*10)},j=function(J){var Y=n.cellYearFormat,re=sa(J,{locale:n,format:Y,generateConfig:r}),se=sa(r.addYear(J,9),{locale:n,format:Y,generateConfig:r});return"".concat(re,"-").concat(se)},H=function(J){return De({},"".concat(t,"-cell-in-view"),FI(r,J,L)||FI(r,J,N)||Gw(r,L,N,J))},W=d?function(ee,J){var Y=r.setDate(ee,1),re=r.setMonth(Y,0),se=r.setYear(re,Math.floor(r.getYear(re)/10)*10),ae=r.addYear(se,10),ce=r.addDate(ae,-1);return d(se,J)&&d(ce,J)}:null,X="".concat(sa(L,{locale:n,format:n.yearFormat,generateConfig:r}),"-").concat(sa(N,{locale:n,format:n.yearFormat,generateConfig:r}));return _.createElement(hf.Provider,{value:T},_.createElement("div",{className:i},_.createElement(Nm,{superOffset:function(J){return r.addYear(s,J*100)},onChange:p,getStart:M,getEnd:$},X),_.createElement(Dy,qt({},e,{disabledDate:W,colNum:3,rowNum:4,baseDate:V,getCellDate:B,getCellText:j,getCellClassName:H}))))}function sae(e){var t=e.prefixCls,n=e.locale,r=e.generateConfig,s=e.pickerValue,d=e.disabledDate,p=e.onPickerValueChange,i=e.onModeChange,x="".concat(t,"-month-panel"),S=Lm(e,"month"),T=ot(S,1),M=T[0],$=r.setMonth(s,0),L=n.shortMonths||(r.locale.getShortMonths?r.locale.getShortMonths(n.locale):[]),N=function(X,ee){return r.addMonth(X,ee)},V=function(X){var ee=r.getMonth(X);return n.monthFormat?sa(X,{locale:n,format:n.monthFormat,generateConfig:r}):L[ee]},B=function(){return De({},"".concat(t,"-cell-in-view"),!0)},j=d?function(W,X){var ee=r.setDate(W,1),J=r.setMonth(ee,r.getMonth(ee)+1),Y=r.addDate(J,-1);return d(ee,X)&&d(Y,X)}:null,H=_.createElement("button",{type:"button",key:"year","aria-label":"year panel",onClick:function(){i("year")},tabIndex:-1,className:"".concat(t,"-year-btn")},sa(s,{locale:n,format:n.yearFormat,generateConfig:r}));return _.createElement(hf.Provider,{value:M},_.createElement("div",{className:x},_.createElement(Nm,{superOffset:function(X){return r.addYear(s,X)},onChange:p,getStart:function(X){return r.setMonth(X,0)},getEnd:function(X){return r.setMonth(X,11)}},H),_.createElement(Dy,qt({},e,{disabledDate:j,titleFormat:n.fieldMonthFormat,colNum:3,rowNum:4,baseDate:$,getCellDate:N,getCellText:V,getCellClassName:B}))))}function lae(e){var t=e.prefixCls,n=e.locale,r=e.generateConfig,s=e.pickerValue,d=e.onPickerValueChange,p=e.onModeChange,i="".concat(t,"-quarter-panel"),x=Lm(e,"quarter"),S=ot(x,1),T=S[0],M=r.setMonth(s,0),$=function(j,H){return r.addMonth(j,H*3)},L=function(j){return sa(j,{locale:n,format:n.cellQuarterFormat,generateConfig:r})},N=function(){return De({},"".concat(t,"-cell-in-view"),!0)},V=_.createElement("button",{type:"button",key:"year","aria-label":"year panel",onClick:function(){p("year")},tabIndex:-1,className:"".concat(t,"-year-btn")},sa(s,{locale:n,format:n.yearFormat,generateConfig:r}));return _.createElement(hf.Provider,{value:T},_.createElement("div",{className:i},_.createElement(Nm,{superOffset:function(j){return r.addYear(s,j)},onChange:d,getStart:function(j){return r.setMonth(j,0)},getEnd:function(j){return r.setMonth(j,11)}},V),_.createElement(Dy,qt({},e,{titleFormat:n.fieldQuarterFormat,colNum:4,rowNum:1,baseDate:M,getCellDate:$,getCellText:L,getCellClassName:N}))))}function cae(e){var t=e.prefixCls,n=e.generateConfig,r=e.locale,s=e.value,d=e.hoverValue,p=e.hoverRangeValue,i=r.locale,x="".concat(t,"-week-panel-row"),S=function(M){var $={};if(p){var L=ot(p,2),N=L[0],V=L[1],B=c0(n,i,N,M),j=c0(n,i,V,M);$["".concat(x,"-range-start")]=B,$["".concat(x,"-range-end")]=j,$["".concat(x,"-range-hover")]=!B&&!j&&Gw(n,N,V,M)}return d&&($["".concat(x,"-hover")]=d.some(function(H){return c0(n,i,M,H)})),pt(x,De({},"".concat(x,"-selected"),!p&&c0(n,i,s,M)),$)};return _.createElement(Kw,qt({},e,{mode:"week",panelName:"week",rowClassName:S}))}function uae(e){var t=e.prefixCls,n=e.locale,r=e.generateConfig,s=e.pickerValue,d=e.disabledDate,p=e.onPickerValueChange,i=e.onModeChange,x="".concat(t,"-year-panel"),S=Lm(e,"year"),T=ot(S,1),M=T[0],$=function(Y){var re=Math.floor(r.getYear(Y)/10)*10;return r.setYear(Y,re)},L=function(Y){var re=$(Y);return r.addYear(re,9)},N=$(s),V=L(s),B=r.addYear(N,-1),j=function(Y,re){return r.addYear(Y,re)},H=function(Y){return sa(Y,{locale:n,format:n.cellYearFormat,generateConfig:r})},W=function(Y){return De({},"".concat(t,"-cell-in-view"),Qh(r,Y,N)||Qh(r,Y,V)||Gw(r,N,V,Y))},X=d?function(J,Y){var re=r.setMonth(J,0),se=r.setDate(re,1),ae=r.addYear(se,1),ce=r.addDate(ae,-1);return d(se,Y)&&d(ce,Y)}:null,ee=_.createElement("button",{type:"button",key:"decade","aria-label":"decade panel",onClick:function(){i("decade")},tabIndex:-1,className:"".concat(t,"-decade-btn")},sa(N,{locale:n,format:n.yearFormat,generateConfig:r}),"-",sa(V,{locale:n,format:n.yearFormat,generateConfig:r}));return _.createElement(hf.Provider,{value:M},_.createElement("div",{className:x},_.createElement(Nm,{superOffset:function(Y){return r.addYear(s,Y*10)},onChange:p,getStart:$,getEnd:L},ee),_.createElement(Dy,qt({},e,{disabledDate:X,titleFormat:n.fieldYearFormat,colNum:3,rowNum:4,baseDate:B,getCellDate:j,getCellText:H,getCellClassName:W}))))}var dae={date:Kw,datetime:oae,week:cae,month:sae,quarter:lae,year:uae,decade:aae,time:Cj};function hae(e,t){var n,r=e.locale,s=e.generateConfig,d=e.direction,p=e.prefixCls,i=e.tabIndex,x=i===void 0?0:i,S=e.multiple,T=e.defaultValue,M=e.value,$=e.onChange,L=e.onSelect,N=e.defaultPickerValue,V=e.pickerValue,B=e.onPickerValueChange,j=e.mode,H=e.onPanelChange,W=e.picker,X=W===void 0?"date":W,ee=e.showTime,J=e.hoverValue,Y=e.hoverRangeValue,re=e.cellRender,se=e.dateRender,ae=e.monthCellRender,ce=e.components,Ce=ce===void 0?{}:ce,we=e.hideHeader,ge=((n=_.useContext(Yl))===null||n===void 0?void 0:n.prefixCls)||p||"rc-picker",ve=_.useRef();_.useImperativeHandle(t,function(){return{nativeElement:ve.current}});var de=sj(e),pe=ot(de,4),fe=pe[0],me=pe[1],Ie=pe[2],Me=pe[3],Be=ij(r,me),$e=X==="date"&&ee?"datetime":X,ze=_.useMemo(function(){return lj($e,Ie,Me,fe,Be)},[$e,Ie,Me,fe,Be]),Je=s.getNow(),yt=Bi(X,{value:j,postState:function(cn){return cn||"date"}}),at=ot(yt,2),gt=at[0],wt=at[1],Pe=gt==="date"&&ze?"datetime":gt,mt=Sj(s,r,$e),dt=Bi(T,{value:M}),ht=ot(dt,2),je=ht[0],St=ht[1],Ct=_.useMemo(function(){var Ut=df(je).filter(function(cn){return cn});return S?Ut:Ut.slice(0,1)},[je,S]),Lt=Zr(function(Ut){St(Ut),$&&(Ut===null||Ct.length!==Ut.length||Ct.some(function(cn,an){return!ja(s,r,cn,Ut[an],$e)}))&&($==null||$(S?Ut:Ut[0]))}),At=Zr(function(Ut){if(L==null||L(Ut),gt===X){var cn=S?mt(Ct,Ut):[Ut];Lt(cn)}}),Yt=Bi(N||Ct[0]||Je,{value:V}),Kt=ot(Yt,2),Dt=Kt[0],Wt=Kt[1];_.useEffect(function(){Ct[0]&&!V&&Wt(Ct[0])},[Ct[0]]);var Vt=function(cn,an){H==null||H(cn||V,an||gt)},Rt=function(cn){var an=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;Wt(cn),B==null||B(cn),an&&Vt(cn)},dn=function(cn,an){wt(cn),an&&Rt(an),Vt(an,cn)},hn=function(cn){if(At(cn),Rt(cn),gt!==X){var an=["decade","year"],Zt=[].concat(an,["month"]),Xt={quarter:[].concat(an,["quarter"]),week:[].concat(un(Zt),["week"]),date:[].concat(un(Zt),["date"])},Hn=Xt[X]||Zt,br=Hn.indexOf(gt),mr=Hn[br+1];mr&&dn(mr,cn)}},Pn=_.useMemo(function(){var Ut,cn;if(Array.isArray(Y)){var an=ot(Y,2);Ut=an[0],cn=an[1]}else Ut=Y;return!Ut&&!cn?null:(Ut=Ut||cn,cn=cn||Ut,s.isAfter(Ut,cn)?[cn,Ut]:[Ut,cn])},[Y,s]),Dn=JP(re,se,ae),yn=Ce[Pe]||dae[Pe]||Kw,Rn=_.useContext(Pd),kn=_.useMemo(function(){return We(We({},Rn),{},{hideHeader:we})},[Rn,we]),Cn="".concat(ge,"-panel"),nn=Ww(e,["showWeek","prevIcon","nextIcon","superPrevIcon","superNextIcon","disabledDate","minDate","maxDate","onHover"]);return _.createElement(Pd.Provider,{value:kn},_.createElement("div",{ref:ve,tabIndex:x,className:pt(Cn,De({},"".concat(Cn,"-rtl"),d==="rtl"))},_.createElement(yn,qt({},nn,{showTime:ze,prefixCls:ge,locale:Be,generateConfig:s,onModeChange:dn,pickerValue:Dt,onPickerValueChange:function(cn){Rt(cn,!0)},value:Ct[0],onSelect:hn,values:Ct,cellRender:Dn,hoverRangeValue:Pn,hoverValue:J}))))}var aE=_.memo(_.forwardRef(hae));function fae(e){var t=e.picker,n=e.multiplePanel,r=e.pickerValue,s=e.onPickerValueChange,d=e.needConfirm,p=e.onSubmit,i=e.range,x=e.hoverValue,S=_.useContext(Yl),T=S.prefixCls,M=S.generateConfig,$=_.useCallback(function(H,W){return u0(M,t,H,W)},[M,t]),L=_.useMemo(function(){return $(r,1)},[r,$]),N=function(W){s($(W,-1))},V={onCellDblClick:function(){d&&p()}},B=t==="time",j=We(We({},e),{},{hoverValue:null,hoverRangeValue:null,hideHeader:B});return i?j.hoverRangeValue=x:j.hoverValue=x,n?_.createElement("div",{className:"".concat(T,"-panels")},_.createElement(Pd.Provider,{value:We(We({},V),{},{hideNext:!0})},_.createElement(aE,j)),_.createElement(Pd.Provider,{value:We(We({},V),{},{hidePrev:!0})},_.createElement(aE,qt({},j,{pickerValue:L,onPickerValueChange:N})))):_.createElement(Pd.Provider,{value:We({},V)},_.createElement(aE,j))}function wz(e){return typeof e=="function"?e():e}function pae(e){var t=e.prefixCls,n=e.presets,r=e.onClick,s=e.onHover;return n.length?_.createElement("div",{className:"".concat(t,"-presets")},_.createElement("ul",null,n.map(function(d,p){var i=d.label,x=d.value;return _.createElement("li",{key:p,onClick:function(){r(wz(x))},onMouseEnter:function(){s(wz(x))},onMouseLeave:function(){s(null)}},i)}))):null}function Ej(e){var t=e.panelRender,n=e.internalMode,r=e.picker,s=e.showNow,d=e.range,p=e.multiple,i=e.activeOffset,x=i===void 0?0:i,S=e.placement,T=e.presets,M=e.onPresetHover,$=e.onPresetSubmit,L=e.onFocus,N=e.onBlur,V=e.onPanelMouseDown,B=e.direction,j=e.value,H=e.onSelect,W=e.isInvalid,X=e.defaultOpenValue,ee=e.onOk,J=e.onSubmit,Y=_.useContext(Yl),re=Y.prefixCls,se="".concat(re,"-panel"),ae=B==="rtl",ce=_.useRef(null),Ce=_.useRef(null),we=_.useState(0),ge=ot(we,2),ve=ge[0],de=ge[1],pe=_.useState(0),fe=ot(pe,2),me=fe[0],Ie=fe[1],Me=function(Lt){Lt.offsetWidth&&de(Lt.offsetWidth)};_.useEffect(function(){if(d){var Ct,Lt=((Ct=ce.current)===null||Ct===void 0?void 0:Ct.offsetWidth)||0,At=ve-Lt;x<=At?Ie(0):Ie(x+Lt-ve)}},[ve,x,d]);function Be(Ct){return Ct.filter(function(Lt){return Lt})}var $e=_.useMemo(function(){return Be(df(j))},[j]),ze=r==="time"&&!$e.length,Je=_.useMemo(function(){return ze?Be([X]):$e},[ze,$e,X]),yt=ze?X:$e,at=_.useMemo(function(){return Je.length?Je.some(function(Ct){return W(Ct)}):!0},[Je,W]),gt=function(){ze&&H(X),ee(),J()},wt=_.createElement("div",{className:"".concat(re,"-panel-layout")},_.createElement(pae,{prefixCls:re,presets:T,onClick:$,onHover:M}),_.createElement("div",null,_.createElement(fae,qt({},e,{value:yt})),_.createElement(eae,qt({},e,{showNow:p?!1:s,invalid:at,onSubmit:gt}))));t&&(wt=t(wt));var Pe="".concat(se,"-container"),mt="marginLeft",dt="marginRight",ht=_.createElement("div",{onMouseDown:V,tabIndex:-1,className:pt(Pe,"".concat(re,"-").concat(n,"-panel-container")),style:De(De({},ae?dt:mt,me),ae?mt:dt,"auto"),onFocus:L,onBlur:N},wt);if(d){var je=Uw(S,ae),St=Y6(je,ae);ht=_.createElement("div",{onMouseDown:V,ref:Ce,className:pt("".concat(re,"-range-wrapper"),"".concat(re,"-").concat(r,"-range-wrapper"))},_.createElement("div",{ref:ce,className:"".concat(re,"-range-arrow"),style:De({},St,x)}),_.createElement(ga,{onResize:Me},ht))}return ht}function Tj(e,t){var n=e.format,r=e.maskFormat,s=e.generateConfig,d=e.locale,p=e.preserveInvalidOnBlur,i=e.inputReadOnly,x=e.required,S=e["aria-required"],T=e.onSubmit,M=e.onFocus,$=e.onBlur,L=e.onInputChange,N=e.onInvalid,V=e.open,B=e.onOpenChange,j=e.onKeyDown,H=e.onChange,W=e.activeHelp,X=e.name,ee=e.autoComplete,J=e.id,Y=e.value,re=e.invalid,se=e.placeholder,ae=e.disabled,ce=e.activeIndex,Ce=e.allHelp,we=e.picker,ge=function(Be,$e){var ze=s.locale.parse(d.locale,Be,[$e]);return ze&&s.isValidate(ze)?ze:null},ve=n[0],de=_.useCallback(function(Me){return sa(Me,{locale:d,format:ve,generateConfig:s})},[d,s,ve]),pe=_.useMemo(function(){return Y.map(de)},[Y,de]),fe=_.useMemo(function(){var Me=we==="time"?8:10,Be=typeof ve=="function"?ve(s.getNow()).length:ve.length;return Math.max(Me,Be)+2},[ve,we,s]),me=function(Be){for(var $e=0;$e<n.length;$e+=1){var ze=n[$e];if(typeof ze=="string"){var Je=ge(Be,ze);if(Je)return Je}}return!1},Ie=function(Be){function $e(yt){return Be!==void 0?yt[Be]:yt}var ze=Ko(e,{aria:!0,data:!0}),Je=We(We({},ze),{},{format:r,validateFormat:function(at){return!!me(at)},preserveInvalidOnBlur:p,readOnly:i,required:x,"aria-required":S,name:X,autoComplete:ee,size:fe,id:$e(J),value:$e(pe)||"",invalid:$e(re),placeholder:$e(se),active:ce===Be,helped:Ce||W&&ce===Be,disabled:$e(ae),onFocus:function(at){M(at,Be)},onBlur:function(at){$(at,Be)},onSubmit:T,onChange:function(at){L();var gt=me(at);if(gt){N(!1,Be),H(gt,Be);return}N(!!at,Be)},onHelp:function(){B(!0,{index:Be})},onKeyDown:function(at){var gt=!1;if(j==null||j(at,function(){gt=!0}),!at.defaultPrevented&&!gt)switch(at.key){case"Escape":B(!1,{index:Be});break;case"Enter":V||B(!0);break}}},t==null?void 0:t({valueTexts:pe}));return Object.keys(Je).forEach(function(yt){Je[yt]===void 0&&delete Je[yt]}),Je};return[Ie,de]}var mae=["onMouseEnter","onMouseLeave"];function Ij(e){return _.useMemo(function(){return Ww(e,mae)},[e])}var gae=["icon","type"],vae=["onClear"];function Xw(e){var t=e.icon,n=e.type,r=Er(e,gae),s=_.useContext(Yl),d=s.prefixCls;return t?_.createElement("span",qt({className:"".concat(d,"-").concat(n)},r),t):null}function BI(e){var t=e.onClear,n=Er(e,vae);return _.createElement(Xw,qt({},n,{type:"clear",role:"button",onMouseDown:function(s){s.preventDefault()},onClick:function(s){s.stopPropagation(),t()}}))}var sE=["YYYY","MM","DD","HH","mm","ss","SSS"],Sz="顧",yae=function(){function e(t){zo(this,e),De(this,"format",void 0),De(this,"maskFormat",void 0),De(this,"cells",void 0),De(this,"maskCells",void 0),this.format=t;var n=sE.map(function(i){return"(".concat(i,")")}).join("|"),r=new RegExp(n,"g");this.maskFormat=t.replace(r,function(i){return Sz.repeat(i.length)});var s=new RegExp("(".concat(sE.join("|"),")")),d=(t.split(s)||[]).filter(function(i){return i}),p=0;this.cells=d.map(function(i){var x=sE.includes(i),S=p,T=p+i.length;return p=T,{text:i,mask:x,start:S,end:T}}),this.maskCells=this.cells.filter(function(i){return i.mask})}return Lo(e,[{key:"getSelection",value:function(n){var r=this.maskCells[n]||{},s=r.start,d=r.end;return[s||0,d||0]}},{key:"match",value:function(n){for(var r=0;r<this.maskFormat.length;r+=1){var s=this.maskFormat[r],d=n[r];if(!d||s!==Sz&&s!==d)return!1}return!0}},{key:"size",value:function(){return this.maskCells.length}},{key:"getMaskCellIndex",value:function(n){for(var r=Number.MAX_SAFE_INTEGER,s=0,d=0;d<this.maskCells.length;d+=1){var p=this.maskCells[d],i=p.start,x=p.end;if(n>=i&&n<=x)return d;var S=Math.min(Math.abs(n-i),Math.abs(n-x));S<r&&(r=S,s=d)}return s}}]),e}();function _ae(e){var t={YYYY:[0,9999,new Date().getFullYear()],MM:[1,12],DD:[1,31],HH:[0,23],mm:[0,59],ss:[0,59],SSS:[0,999]};return t[e]}var xae=["active","showActiveCls","suffixIcon","format","validateFormat","onChange","onInput","helped","onHelp","onSubmit","onKeyDown","preserveInvalidOnBlur","invalid","clearIcon"],jI=_.forwardRef(function(e,t){var n=e.active,r=e.showActiveCls,s=r===void 0?!0:r,d=e.suffixIcon,p=e.format,i=e.validateFormat,x=e.onChange;e.onInput;var S=e.helped,T=e.onHelp,M=e.onSubmit,$=e.onKeyDown,L=e.preserveInvalidOnBlur,N=L===void 0?!1:L,V=e.invalid,B=e.clearIcon,j=Er(e,xae),H=e.value,W=e.onFocus,X=e.onBlur,ee=e.onMouseUp,J=_.useContext(Yl),Y=J.prefixCls,re=J.input,se=re===void 0?"input":re,ae="".concat(Y,"-input"),ce=_.useState(!1),Ce=ot(ce,2),we=Ce[0],ge=Ce[1],ve=_.useState(H),de=ot(ve,2),pe=de[0],fe=de[1],me=_.useState(""),Ie=ot(me,2),Me=Ie[0],Be=Ie[1],$e=_.useState(null),ze=ot($e,2),Je=ze[0],yt=ze[1],at=_.useState(null),gt=ot(at,2),wt=gt[0],Pe=gt[1],mt=pe||"";_.useEffect(function(){fe(H)},[H]);var dt=_.useRef(),ht=_.useRef();_.useImperativeHandle(t,function(){return{nativeElement:dt.current,inputElement:ht.current,focus:function(Ut){ht.current.focus(Ut)},blur:function(){ht.current.blur()}}});var je=_.useMemo(function(){return new yae(p||"")},[p]),St=_.useMemo(function(){return S?[0,0]:je.getSelection(Je)},[je,Je,S]),Ct=ot(St,2),Lt=Ct[0],At=Ct[1],Yt=function(Ut){Ut&&Ut!==p&&Ut!==H&&T()},Kt=Zr(function(nn){i(nn)&&x(nn),fe(nn),Yt(nn)}),Dt=function(Ut){if(!p){var cn=Ut.target.value;Yt(cn),fe(cn),x(cn)}},Wt=function(Ut){var cn=Ut.clipboardData.getData("text");i(cn)&&Kt(cn)},Vt=_.useRef(!1),Rt=function(){Vt.current=!0},dn=function(Ut){var cn=Ut.target,an=cn.selectionStart,Zt=je.getMaskCellIndex(an);yt(Zt),Pe({}),ee==null||ee(Ut),Vt.current=!1},hn=function(Ut){ge(!0),yt(0),Be(""),W(Ut)},Pn=function(Ut){X(Ut)},Dn=function(Ut){ge(!1),Pn(Ut)};tR(n,function(){!n&&!N&&fe(H)});var yn=function(Ut){Ut.key==="Enter"&&i(mt)&&M(),$==null||$(Ut)},Rn=function(Ut){yn(Ut);var cn=Ut.key,an=null,Zt=null,Xt=At-Lt,Hn=p.slice(Lt,At),br=function(ur){yt(function(Mr){var tr=Mr+ur;return tr=Math.max(tr,0),tr=Math.min(tr,je.size()-1),tr})},mr=function(ur){var Mr=_ae(Hn),tr=ot(Mr,3),ft=tr[0],ye=tr[1],Se=tr[2],ke=mt.slice(Lt,At),Ze=Number(ke);if(isNaN(Ze))return String(Se||(ur>0?ft:ye));var Ae=Ze+ur,Ge=ye-ft+1;return String(ft+(Ge+Ae-ft)%Ge)};switch(cn){case"Backspace":case"Delete":an="",Zt=Hn;break;case"ArrowLeft":an="",br(-1);break;case"ArrowRight":an="",br(1);break;case"ArrowUp":an="",Zt=mr(1);break;case"ArrowDown":an="",Zt=mr(-1);break;default:isNaN(Number(cn))||(an=Me+cn,Zt=an);break}if(an!==null&&(Be(an),an.length>=Xt&&(br(1),Be(""))),Zt!==null){var pr=mt.slice(0,Lt)+YP(Zt,Xt)+mt.slice(At);Kt(pr.slice(0,p.length))}Pe({})},kn=_.useRef();Xr(function(){if(!(!we||!p||Vt.current)){if(!je.match(mt)){Kt(p);return}return ht.current.setSelectionRange(Lt,At),kn.current=ui(function(){ht.current.setSelectionRange(Lt,At)}),function(){ui.cancel(kn.current)}}},[je,p,we,mt,Je,Lt,At,wt,Kt]);var Cn=p?{onFocus:hn,onBlur:Dn,onKeyDown:Rn,onMouseDown:Rt,onMouseUp:dn,onPaste:Wt}:{};return _.createElement("div",{ref:dt,className:pt(ae,De(De({},"".concat(ae,"-active"),n&&s),"".concat(ae,"-placeholder"),S))},_.createElement(se,qt({ref:ht,"aria-invalid":V,autoComplete:"off"},j,{onKeyDown:yn,onBlur:Pn},Cn,{value:mt,onChange:Dt})),_.createElement(Xw,{type:"suffix",icon:d}),B)}),bae=["id","prefix","clearIcon","suffixIcon","separator","activeIndex","activeHelp","allHelp","focused","onFocus","onBlur","onKeyDown","locale","generateConfig","placeholder","className","style","onClick","onClear","value","onChange","onSubmit","onInputChange","format","maskFormat","preserveInvalidOnBlur","onInvalid","disabled","invalid","inputReadOnly","direction","onOpenChange","onActiveOffset","placement","onMouseDown","required","aria-required","autoFocus","tabIndex"],wae=["index"],Sae=["insetInlineStart","insetInlineEnd"];function Cae(e,t){var n=e.id,r=e.prefix,s=e.clearIcon,d=e.suffixIcon,p=e.separator,i=p===void 0?"~":p,x=e.activeIndex;e.activeHelp,e.allHelp;var S=e.focused;e.onFocus,e.onBlur,e.onKeyDown,e.locale,e.generateConfig;var T=e.placeholder,M=e.className,$=e.style,L=e.onClick,N=e.onClear,V=e.value;e.onChange,e.onSubmit,e.onInputChange,e.format,e.maskFormat,e.preserveInvalidOnBlur,e.onInvalid;var B=e.disabled,j=e.invalid;e.inputReadOnly;var H=e.direction;e.onOpenChange;var W=e.onActiveOffset,X=e.placement,ee=e.onMouseDown;e.required,e["aria-required"];var J=e.autoFocus,Y=e.tabIndex,re=Er(e,bae),se=H==="rtl",ae=_.useContext(Yl),ce=ae.prefixCls,Ce=_.useMemo(function(){if(typeof n=="string")return[n];var ht=n||{};return[ht.start,ht.end]},[n]),we=_.useRef(),ge=_.useRef(),ve=_.useRef(),de=function(je){var St;return(St=[ge,ve][je])===null||St===void 0?void 0:St.current};_.useImperativeHandle(t,function(){return{nativeElement:we.current,focus:function(je){if(cr(je)==="object"){var St,Ct=je||{},Lt=Ct.index,At=Lt===void 0?0:Lt,Yt=Er(Ct,wae);(St=de(At))===null||St===void 0||St.focus(Yt)}else{var Kt;(Kt=de(je??0))===null||Kt===void 0||Kt.focus()}},blur:function(){var je,St;(je=de(0))===null||je===void 0||je.blur(),(St=de(1))===null||St===void 0||St.blur()}}});var pe=Ij(re),fe=_.useMemo(function(){return Array.isArray(T)?T:[T,T]},[T]),me=Tj(We(We({},e),{},{id:Ce,placeholder:fe})),Ie=ot(me,1),Me=Ie[0],Be=Uw(X,se),$e=Y6(Be,se),ze=Be==null?void 0:Be.toLowerCase().endsWith("right"),Je=_.useState({position:"absolute",width:0}),yt=ot(Je,2),at=yt[0],gt=yt[1],wt=Zr(function(){var ht=de(x);if(ht){var je=ht.nativeElement,St=je.offsetWidth,Ct=je.offsetLeft,Lt=je.offsetParent,At=(Lt==null?void 0:Lt.offsetWidth)||0,Yt=ze?At-St-Ct:Ct;gt(function(Kt){Kt.insetInlineStart,Kt.insetInlineEnd;var Dt=Er(Kt,Sae);return We(We({},Dt),{},De({width:St},$e,Yt))}),W(Yt)}});_.useEffect(function(){wt()},[x]);var Pe=s&&(V[0]&&!B[0]||V[1]&&!B[1]),mt=J&&!B[0],dt=J&&!mt&&!B[1];return _.createElement(ga,{onResize:wt},_.createElement("div",qt({},pe,{className:pt(ce,"".concat(ce,"-range"),De(De(De(De({},"".concat(ce,"-focused"),S),"".concat(ce,"-disabled"),B.every(function(ht){return ht})),"".concat(ce,"-invalid"),j.some(function(ht){return ht})),"".concat(ce,"-rtl"),se),M),style:$,ref:we,onClick:L,onMouseDown:function(je){var St=je.target;St!==ge.current.inputElement&&St!==ve.current.inputElement&&je.preventDefault(),ee==null||ee(je)}}),r&&_.createElement("div",{className:"".concat(ce,"-prefix")},r),_.createElement(jI,qt({ref:ge},Me(0),{autoFocus:mt,tabIndex:Y,"date-range":"start"})),_.createElement("div",{className:"".concat(ce,"-range-separator")},i),_.createElement(jI,qt({ref:ve},Me(1),{autoFocus:dt,tabIndex:Y,"date-range":"end"})),_.createElement("div",{className:"".concat(ce,"-active-bar"),style:at}),_.createElement(Xw,{type:"suffix",icon:d}),Pe&&_.createElement(BI,{icon:s,onClear:N})))}var Eae=_.forwardRef(Cae);function Cz(e,t){var n=e??t;return Array.isArray(n)?n:[n,n]}function cb(e){return e===1?"end":"start"}function Tae(e,t){var n=dj(e,function(){var Gn=e.disabled,jn=e.allowEmpty,wr=Cz(Gn,!1),Jn=Cz(jn,!1);return{disabled:wr,allowEmpty:Jn}}),r=ot(n,6),s=r[0],d=r[1],p=r[2],i=r[3],x=r[4],S=r[5],T=s.prefixCls,M=s.styles,$=s.classNames,L=s.placement,N=s.defaultValue,V=s.value,B=s.needConfirm,j=s.onKeyDown,H=s.disabled,W=s.allowEmpty,X=s.disabledDate,ee=s.minDate,J=s.maxDate,Y=s.defaultOpen,re=s.open,se=s.onOpenChange,ae=s.locale,ce=s.generateConfig,Ce=s.picker,we=s.showNow,ge=s.showToday,ve=s.showTime,de=s.mode,pe=s.onPanelChange,fe=s.onCalendarChange,me=s.onOk,Ie=s.defaultPickerValue,Me=s.pickerValue,Be=s.onPickerValueChange,$e=s.inputReadOnly,ze=s.suffixIcon,Je=s.onFocus,yt=s.onBlur,at=s.presets,gt=s.ranges,wt=s.components,Pe=s.cellRender,mt=s.dateRender,dt=s.monthCellRender,ht=s.onClick,je=fj(t),St=hj(re,Y,H,se),Ct=ot(St,2),Lt=Ct[0],At=Ct[1],Yt=function(jn,wr){(H.some(function(Jn){return!Jn})||!jn)&&At(jn,wr)},Kt=xj(ce,ae,i,!0,!1,N,V,fe,me),Dt=ot(Kt,5),Wt=Dt[0],Vt=Dt[1],Rt=Dt[2],dn=Dt[3],hn=Dt[4],Pn=Rt(),Dn=mj(H,W,Lt),yn=ot(Dn,7),Rn=yn[0],kn=yn[1],Cn=yn[2],nn=yn[3],Ut=yn[4],cn=yn[5],an=yn[6],Zt=function(jn,wr){kn(!0),Je==null||Je(jn,{range:cb(wr??nn)})},Xt=function(jn,wr){kn(!1),yt==null||yt(jn,{range:cb(wr??nn)})},Hn=_.useMemo(function(){if(!ve)return null;var Gn=ve.disabledTime,jn=Gn?function(wr){var Jn=cb(nn),ti=ej(Pn,an,nn);return Gn(wr,Jn,{from:ti})}:void 0;return We(We({},ve),{},{disabledTime:jn})},[ve,nn,Pn,an]),br=Bi([Ce,Ce],{value:de}),mr=ot(br,2),pr=mr[0],Tr=mr[1],ur=pr[nn]||Ce,Mr=ur==="date"&&Hn?"datetime":ur,tr=Mr===Ce&&Mr!=="time",ft=wj(Ce,ur,we,ge,!0),ye=bj(s,Wt,Vt,Rt,dn,H,i,Rn,Lt,S),Se=ot(ye,3),ke=Se[0],Ze=Se[1],Ae=Se[2],Ge=Zoe(Pn,H,an,ce,ae,X),ut=nj(Pn,S,W),Qe=ot(ut,2),_t=Qe[0],It=Qe[1],bt=gj(ce,ae,Pn,pr,Lt,nn,d,tr,Ie,Me,Hn==null?void 0:Hn.defaultOpenValue,Be,ee,J),Mt=ot(bt,2),kt=Mt[0],Gt=Mt[1],vn=Zr(function(Gn,jn,wr){var Jn=T0(pr,nn,jn);if((Jn[0]!==pr[0]||Jn[1]!==pr[1])&&Tr(Jn),pe&&wr!==!1){var ti=un(Pn);Gn&&(ti[nn]=Gn),pe(ti,Jn)}}),On=function(jn,wr){return T0(Pn,wr,jn)},bn=function(jn,wr){var Jn=Pn;jn&&(Jn=On(jn,nn));var ti=cn(Jn);dn(Jn),ke(nn,ti===null),ti===null?Yt(!1,{force:!0}):wr||je.current.focus({index:ti})},zn=function(jn){var wr,Jn=jn.target.getRootNode();if(!je.current.nativeElement.contains((wr=Jn.activeElement)!==null&&wr!==void 0?wr:document.activeElement)){var ti=H.findIndex(function(Sr){return!Sr});ti>=0&&je.current.focus({index:ti})}Yt(!0),ht==null||ht(jn)},Mn=function(){Ze(null),Yt(!1,{force:!0})},wn=_.useState(null),_n=ot(wn,2),rr=_n[0],or=_n[1],kr=_.useState(null),zr=ot(kr,2),Hr=zr[0],ei=zr[1],Hi=_.useMemo(function(){return Hr||Pn},[Pn,Hr]);_.useEffect(function(){Lt||ei(null)},[Lt]);var ir=_.useState(0),Ar=ot(ir,2),Gr=Ar[0],Ei=Ar[1],fo=pj(at,gt),No=function(jn){ei(jn),or("preset")},qi=function(jn){var wr=Ze(jn);wr&&Yt(!1,{force:!0})},Ki=function(jn){bn(jn)},Ui=function(jn){ei(jn?On(jn,nn):null),or("cell")},Wi=function(jn){Yt(!0),Zt(jn)},yi=function(){Cn("panel")},ki=function(jn){var wr=T0(Pn,nn,jn);dn(wr),!B&&!p&&d===Mr&&bn(jn)},ar=function(){Yt(!1)},Xn=JP(Pe,mt,dt,cb(nn)),$r=Pn[nn]||null,Jr=Zr(function(Gn){return S(Gn,{activeIndex:nn})}),Un=_.useMemo(function(){var Gn=Ko(s,!1),jn=vo(s,[].concat(un(Object.keys(Gn)),["onChange","onCalendarChange","style","className","onPanelChange","disabledTime"]));return jn},[s]),sr=_.createElement(Ej,qt({},Un,{showNow:ft,showTime:Hn,range:!0,multiplePanel:tr,activeOffset:Gr,placement:L,disabledDate:Ge,onFocus:Wi,onBlur:Xt,onPanelMouseDown:yi,picker:Ce,mode:ur,internalMode:Mr,onPanelChange:vn,format:x,value:$r,isInvalid:Jr,onChange:null,onSelect:ki,pickerValue:kt,defaultOpenValue:df(ve==null?void 0:ve.defaultOpenValue)[nn],onPickerValueChange:Gt,hoverValue:Hi,onHover:Ui,needConfirm:B,onSubmit:bn,onOk:hn,presets:fo,onPresetHover:No,onPresetSubmit:qi,onNow:Ki,cellRender:Xn})),di=function(jn,wr){var Jn=On(jn,wr);dn(Jn)},Pi=function(){Cn("input")},mi=function(jn,wr){var Jn=an.length,ti=an[Jn-1];if(Jn&&ti!==wr&&B&&!W[ti]&&!Ae(ti)&&Pn[ti]){je.current.focus({index:ti});return}Cn("input"),Yt(!0,{inherit:!0}),nn!==wr&&Lt&&!B&&p&&bn(null,!0),Ut(wr),Zt(jn,wr)},Gi=function(jn,wr){if(Yt(!1),!B&&Cn()==="input"){var Jn=cn(Pn);ke(nn,Jn===null)}Xt(jn,wr)},Xi=function(jn,wr){jn.key==="Tab"&&bn(null,!0),j==null||j(jn,wr)},yo=_.useMemo(function(){return{prefixCls:T,locale:ae,generateConfig:ce,button:wt.button,input:wt.input}},[T,ae,ce,wt.button,wt.input]);return Xr(function(){Lt&&nn!==void 0&&vn(null,Ce,!1)},[Lt,nn,Ce]),Xr(function(){var Gn=Cn();!Lt&&Gn==="input"&&(Yt(!1),bn(null,!0)),!Lt&&p&&!B&&Gn==="panel"&&(Yt(!0),bn())},[Lt]),_.createElement(Yl.Provider,{value:yo},_.createElement(J6,qt({},tj(s),{popupElement:sr,popupStyle:M.popup,popupClassName:$.popup,visible:Lt,onClose:ar,range:!0}),_.createElement(Eae,qt({},s,{ref:je,suffixIcon:ze,activeIndex:Rn||Lt?nn:null,activeHelp:!!Hr,allHelp:!!Hr&&rr==="preset",focused:Rn,onFocus:mi,onBlur:Gi,onKeyDown:Xi,onSubmit:bn,value:Hi,maskFormat:x,onChange:di,onInputChange:Pi,format:i,inputReadOnly:$e,disabled:H,open:Lt,onOpenChange:Yt,onClick:zn,onClear:Mn,invalid:_t,onInvalid:It,onActiveOffset:Ei}))))}var Iae=_.forwardRef(Tae);function Mae(e){var t=e.prefixCls,n=e.value,r=e.onRemove,s=e.removeIcon,d=s===void 0?"×":s,p=e.formatDate,i=e.disabled,x=e.maxTagCount,S=e.placeholder,T="".concat(t,"-selector"),M="".concat(t,"-selection"),$="".concat(M,"-overflow");function L(B,j){return _.createElement("span",{className:pt("".concat(M,"-item")),title:typeof B=="string"?B:null},_.createElement("span",{className:"".concat(M,"-item-content")},B),!i&&j&&_.createElement("span",{onMouseDown:function(W){W.preventDefault()},onClick:j,className:"".concat(M,"-item-remove")},d))}function N(B){var j=p(B),H=function(X){X&&X.stopPropagation(),r(B)};return L(j,H)}function V(B){var j="+ ".concat(B.length," ...");return L(j)}return _.createElement("div",{className:T},_.createElement(Hl,{prefixCls:$,data:n,renderItem:N,renderRest:V,itemKey:function(j){return p(j)},maxCount:x}),!n.length&&_.createElement("span",{className:"".concat(t,"-selection-placeholder")},S))}var Pae=["id","open","prefix","clearIcon","suffixIcon","activeHelp","allHelp","focused","onFocus","onBlur","onKeyDown","locale","generateConfig","placeholder","className","style","onClick","onClear","internalPicker","value","onChange","onSubmit","onInputChange","multiple","maxTagCount","format","maskFormat","preserveInvalidOnBlur","onInvalid","disabled","invalid","inputReadOnly","direction","onOpenChange","onMouseDown","required","aria-required","autoFocus","tabIndex","removeIcon"];function Rae(e,t){e.id;var n=e.open,r=e.prefix,s=e.clearIcon,d=e.suffixIcon;e.activeHelp,e.allHelp;var p=e.focused;e.onFocus,e.onBlur,e.onKeyDown;var i=e.locale,x=e.generateConfig,S=e.placeholder,T=e.className,M=e.style,$=e.onClick,L=e.onClear,N=e.internalPicker,V=e.value,B=e.onChange,j=e.onSubmit;e.onInputChange;var H=e.multiple,W=e.maxTagCount;e.format,e.maskFormat,e.preserveInvalidOnBlur,e.onInvalid;var X=e.disabled,ee=e.invalid;e.inputReadOnly;var J=e.direction;e.onOpenChange;var Y=e.onMouseDown;e.required,e["aria-required"];var re=e.autoFocus,se=e.tabIndex,ae=e.removeIcon,ce=Er(e,Pae),Ce=J==="rtl",we=_.useContext(Yl),ge=we.prefixCls,ve=_.useRef(),de=_.useRef();_.useImperativeHandle(t,function(){return{nativeElement:ve.current,focus:function(at){var gt;(gt=de.current)===null||gt===void 0||gt.focus(at)},blur:function(){var at;(at=de.current)===null||at===void 0||at.blur()}}});var pe=Ij(ce),fe=function(at){B([at])},me=function(at){var gt=V.filter(function(wt){return wt&&!ja(x,i,wt,at,N)});B(gt),n||j()},Ie=Tj(We(We({},e),{},{onChange:fe}),function(yt){var at=yt.valueTexts;return{value:at[0]||"",active:p}}),Me=ot(Ie,2),Be=Me[0],$e=Me[1],ze=!!(s&&V.length&&!X),Je=H?_.createElement(_.Fragment,null,_.createElement(Mae,{prefixCls:ge,value:V,onRemove:me,formatDate:$e,maxTagCount:W,disabled:X,removeIcon:ae,placeholder:S}),_.createElement("input",{className:"".concat(ge,"-multiple-input"),value:V.map($e).join(","),ref:de,readOnly:!0,autoFocus:re,tabIndex:se}),_.createElement(Xw,{type:"suffix",icon:d}),ze&&_.createElement(BI,{icon:s,onClear:L})):_.createElement(jI,qt({ref:de},Be(),{autoFocus:re,tabIndex:se,suffixIcon:d,clearIcon:ze&&_.createElement(BI,{icon:s,onClear:L}),showActiveCls:!1}));return _.createElement("div",qt({},pe,{className:pt(ge,De(De(De(De(De({},"".concat(ge,"-multiple"),H),"".concat(ge,"-focused"),p),"".concat(ge,"-disabled"),X),"".concat(ge,"-invalid"),ee),"".concat(ge,"-rtl"),Ce),T),style:M,ref:ve,onClick:$,onMouseDown:function(at){var gt,wt=at.target;wt!==((gt=de.current)===null||gt===void 0?void 0:gt.inputElement)&&at.preventDefault(),Y==null||Y(at)}}),r&&_.createElement("div",{className:"".concat(ge,"-prefix")},r),Je)}var Oae=_.forwardRef(Rae);function Aae(e,t){var n=dj(e),r=ot(n,6),s=r[0],d=r[1],p=r[2],i=r[3],x=r[4],S=r[5],T=s,M=T.prefixCls,$=T.styles,L=T.classNames,N=T.order,V=T.defaultValue,B=T.value,j=T.needConfirm,H=T.onChange,W=T.onKeyDown,X=T.disabled,ee=T.disabledDate,J=T.minDate,Y=T.maxDate,re=T.defaultOpen,se=T.open,ae=T.onOpenChange,ce=T.locale,Ce=T.generateConfig,we=T.picker,ge=T.showNow,ve=T.showToday,de=T.showTime,pe=T.mode,fe=T.onPanelChange,me=T.onCalendarChange,Ie=T.onOk,Me=T.multiple,Be=T.defaultPickerValue,$e=T.pickerValue,ze=T.onPickerValueChange,Je=T.inputReadOnly,yt=T.suffixIcon,at=T.removeIcon,gt=T.onFocus,wt=T.onBlur,Pe=T.presets,mt=T.components,dt=T.cellRender,ht=T.dateRender,je=T.monthCellRender,St=T.onClick,Ct=fj(t);function Lt(Un){return Un===null?null:Me?Un:Un[0]}var At=Sj(Ce,ce,d),Yt=hj(se,re,[X],ae),Kt=ot(Yt,2),Dt=Kt[0],Wt=Kt[1],Vt=function(sr,di,Pi){if(me){var mi=We({},Pi);delete mi.range,me(Lt(sr),Lt(di),mi)}},Rt=function(sr){Ie==null||Ie(Lt(sr))},dn=xj(Ce,ce,i,!1,N,V,B,Vt,Rt),hn=ot(dn,5),Pn=hn[0],Dn=hn[1],yn=hn[2],Rn=hn[3],kn=hn[4],Cn=yn(),nn=mj([X]),Ut=ot(nn,4),cn=Ut[0],an=Ut[1],Zt=Ut[2],Xt=Ut[3],Hn=function(sr){an(!0),gt==null||gt(sr,{})},br=function(sr){an(!1),wt==null||wt(sr,{})},mr=Bi(we,{value:pe}),pr=ot(mr,2),Tr=pr[0],ur=pr[1],Mr=Tr==="date"&&de?"datetime":Tr,tr=wj(we,Tr,ge,ve),ft=H&&function(Un,sr){H(Lt(Un),Lt(sr))},ye=bj(We(We({},s),{},{onChange:ft}),Pn,Dn,yn,Rn,[],i,cn,Dt,S),Se=ot(ye,2),ke=Se[1],Ze=nj(Cn,S),Ae=ot(Ze,2),Ge=Ae[0],ut=Ae[1],Qe=_.useMemo(function(){return Ge.some(function(Un){return Un})},[Ge]),_t=function(sr,di){if(ze){var Pi=We(We({},di),{},{mode:di.mode[0]});delete Pi.range,ze(sr[0],Pi)}},It=gj(Ce,ce,Cn,[Tr],Dt,Xt,d,!1,Be,$e,df(de==null?void 0:de.defaultOpenValue),_t,J,Y),bt=ot(It,2),Mt=bt[0],kt=bt[1],Gt=Zr(function(Un,sr,di){if(ur(sr),fe&&di!==!1){var Pi=Un||Cn[Cn.length-1];fe(Pi,sr)}}),vn=function(){ke(yn()),Wt(!1,{force:!0})},On=function(sr){!X&&!Ct.current.nativeElement.contains(document.activeElement)&&Ct.current.focus(),Wt(!0),St==null||St(sr)},bn=function(){ke(null),Wt(!1,{force:!0})},zn=_.useState(null),Mn=ot(zn,2),wn=Mn[0],_n=Mn[1],rr=_.useState(null),or=ot(rr,2),kr=or[0],zr=or[1],Hr=_.useMemo(function(){var Un=[kr].concat(un(Cn)).filter(function(sr){return sr});return Me?Un:Un.slice(0,1)},[Cn,kr,Me]),ei=_.useMemo(function(){return!Me&&kr?[kr]:Cn.filter(function(Un){return Un})},[Cn,kr,Me]);_.useEffect(function(){Dt||zr(null)},[Dt]);var Hi=pj(Pe),ir=function(sr){zr(sr),_n("preset")},Ar=function(sr){var di=Me?At(yn(),sr):[sr],Pi=ke(di);Pi&&!Me&&Wt(!1,{force:!0})},Gr=function(sr){Ar(sr)},Ei=function(sr){zr(sr),_n("cell")},fo=function(sr){Wt(!0),Hn(sr)},No=function(sr){Zt("panel");var di=Me?At(yn(),sr):[sr];Rn(di),!j&&!p&&d===Mr&&vn()},qi=function(){Wt(!1)},Ki=JP(dt,ht,je),Ui=_.useMemo(function(){var Un=Ko(s,!1),sr=vo(s,[].concat(un(Object.keys(Un)),["onChange","onCalendarChange","style","className","onPanelChange"]));return We(We({},sr),{},{multiple:s.multiple})},[s]),Wi=_.createElement(Ej,qt({},Ui,{showNow:tr,showTime:de,disabledDate:ee,onFocus:fo,onBlur:br,picker:we,mode:Tr,internalMode:Mr,onPanelChange:Gt,format:x,value:Cn,isInvalid:S,onChange:null,onSelect:No,pickerValue:Mt,defaultOpenValue:de==null?void 0:de.defaultOpenValue,onPickerValueChange:kt,hoverValue:Hr,onHover:Ei,needConfirm:j,onSubmit:vn,onOk:kn,presets:Hi,onPresetHover:ir,onPresetSubmit:Ar,onNow:Gr,cellRender:Ki})),yi=function(sr){Rn(sr)},ki=function(){Zt("input")},ar=function(sr){Zt("input"),Wt(!0,{inherit:!0}),Hn(sr)},Xn=function(sr){Wt(!1),br(sr)},$r=function(sr,di){sr.key==="Tab"&&vn(),W==null||W(sr,di)},Jr=_.useMemo(function(){return{prefixCls:M,locale:ce,generateConfig:Ce,button:mt.button,input:mt.input}},[M,ce,Ce,mt.button,mt.input]);return Xr(function(){Dt&&Xt!==void 0&&Gt(null,we,!1)},[Dt,Xt,we]),Xr(function(){var Un=Zt();!Dt&&Un==="input"&&(Wt(!1),vn()),!Dt&&p&&!j&&Un==="panel"&&(Wt(!0),vn())},[Dt]),_.createElement(Yl.Provider,{value:Jr},_.createElement(J6,qt({},tj(s),{popupElement:Wi,popupStyle:$.popup,popupClassName:L.popup,visible:Dt,onClose:qi}),_.createElement(Oae,qt({},s,{ref:Ct,suffixIcon:yt,removeIcon:at,activeHelp:!!kr,allHelp:!!kr&&wn==="preset",focused:cn,onFocus:ar,onBlur:Xn,onKeyDown:$r,onSubmit:vn,value:ei,maskFormat:x,onChange:yi,onInputChange:ki,internalPicker:d,format:i,inputReadOnly:Je,disabled:X,open:Dt,onOpenChange:Wt,onClick:On,onClear:bn,invalid:Qe,onInvalid:function(sr){ut(sr,0)}}))))}var Dae=_.forwardRef(Aae);const Mj=_.createContext(null),$ae=Mj.Provider,Pj=_.createContext(null),kae=Pj.Provider;var zae=["prefixCls","className","style","checked","disabled","defaultChecked","type","title","onChange"],Rj=_.forwardRef(function(e,t){var n=e.prefixCls,r=n===void 0?"rc-checkbox":n,s=e.className,d=e.style,p=e.checked,i=e.disabled,x=e.defaultChecked,S=x===void 0?!1:x,T=e.type,M=T===void 0?"checkbox":T,$=e.title,L=e.onChange,N=Er(e,zae),V=_.useRef(null),B=_.useRef(null),j=Bi(S,{value:p}),H=ot(j,2),W=H[0],X=H[1];_.useImperativeHandle(t,function(){return{focus:function(re){var se;(se=V.current)===null||se===void 0||se.focus(re)},blur:function(){var re;(re=V.current)===null||re===void 0||re.blur()},input:V.current,nativeElement:B.current}});var ee=pt(r,s,De(De({},"".concat(r,"-checked"),W),"".concat(r,"-disabled"),i)),J=function(re){i||("checked"in e||X(re.target.checked),L==null||L({target:We(We({},e),{},{type:M,checked:re.target.checked}),stopPropagation:function(){re.stopPropagation()},preventDefault:function(){re.preventDefault()},nativeEvent:re.nativeEvent}))};return _.createElement("span",{className:ee,title:$,style:d,ref:B},_.createElement("input",qt({},N,{className:"".concat(r,"-input"),ref:V,onChange:J,disabled:i,checked:!!W,type:M})),_.createElement("span",{className:"".concat(r,"-inner")}))});const Lae=e=>{const{componentCls:t,antCls:n}=e,r=`${t}-group`;return{[r]:Object.assign(Object.assign({},lo(e)),{display:"inline-block",fontSize:0,[`&${r}-rtl`]:{direction:"rtl"},[`&${r}-block`]:{display:"flex"},[`${n}-badge ${n}-badge-count`]:{zIndex:1},[`> ${n}-badge:not(:first-child) > ${n}-button-wrapper`]:{borderInlineStart:"none"}})}},Nae=e=>{const{componentCls:t,wrapperMarginInlineEnd:n,colorPrimary:r,radioSize:s,motionDurationSlow:d,motionDurationMid:p,motionEaseInOutCirc:i,colorBgContainer:x,colorBorder:S,lineWidth:T,colorBgContainerDisabled:M,colorTextDisabled:$,paddingXS:L,dotColorDisabled:N,lineType:V,radioColor:B,radioBgColor:j,calc:H}=e,W=`${t}-inner`,ee=H(s).sub(H(4).mul(2)),J=H(1).mul(s).equal({unit:!0});return{[`${t}-wrapper`]:Object.assign(Object.assign({},lo(e)),{display:"inline-flex",alignItems:"baseline",marginInlineStart:0,marginInlineEnd:n,cursor:"pointer",[`&${t}-wrapper-rtl`]:{direction:"rtl"},"&-disabled":{cursor:"not-allowed",color:e.colorTextDisabled},"&::after":{display:"inline-block",width:0,overflow:"hidden",content:'"\\a0"'},"&-block":{flex:1,justifyContent:"center"},[`${t}-checked::after`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:"100%",height:"100%",border:`${nt(T)} ${V} ${r}`,borderRadius:"50%",visibility:"hidden",opacity:0,content:'""'},[t]:Object.assign(Object.assign({},lo(e)),{position:"relative",display:"inline-block",outline:"none",cursor:"pointer",alignSelf:"center",borderRadius:"50%"}),[`${t}-wrapper:hover &,
        &:hover ${W}`]:{borderColor:r},[`${t}-input:focus-visible + ${W}`]:Object.assign({},Ad(e)),[`${t}:hover::after, ${t}-wrapper:hover &::after`]:{visibility:"visible"},[`${t}-inner`]:{"&::after":{boxSizing:"border-box",position:"absolute",insetBlockStart:"50%",insetInlineStart:"50%",display:"block",width:J,height:J,marginBlockStart:H(1).mul(s).div(-2).equal({unit:!0}),marginInlineStart:H(1).mul(s).div(-2).equal({unit:!0}),backgroundColor:B,borderBlockStart:0,borderInlineStart:0,borderRadius:J,transform:"scale(0)",opacity:0,transition:`all ${d} ${i}`,content:'""'},boxSizing:"border-box",position:"relative",insetBlockStart:0,insetInlineStart:0,display:"block",width:J,height:J,backgroundColor:x,borderColor:S,borderStyle:"solid",borderWidth:T,borderRadius:"50%",transition:`all ${p}`},[`${t}-input`]:{position:"absolute",inset:0,zIndex:1,cursor:"pointer",opacity:0},[`${t}-checked`]:{[W]:{borderColor:r,backgroundColor:j,"&::after":{transform:`scale(${e.calc(e.dotSize).div(s).equal()})`,opacity:1,transition:`all ${d} ${i}`}}},[`${t}-disabled`]:{cursor:"not-allowed",[W]:{backgroundColor:M,borderColor:S,cursor:"not-allowed","&::after":{backgroundColor:N}},[`${t}-input`]:{cursor:"not-allowed"},[`${t}-disabled + span`]:{color:$,cursor:"not-allowed"},[`&${t}-checked`]:{[W]:{"&::after":{transform:`scale(${H(ee).div(s).equal()})`}}}},[`span${t} + *`]:{paddingInlineStart:L,paddingInlineEnd:L}})}},Fae=e=>{const{buttonColor:t,controlHeight:n,componentCls:r,lineWidth:s,lineType:d,colorBorder:p,motionDurationSlow:i,motionDurationMid:x,buttonPaddingInline:S,fontSize:T,buttonBg:M,fontSizeLG:$,controlHeightLG:L,controlHeightSM:N,paddingXS:V,borderRadius:B,borderRadiusSM:j,borderRadiusLG:H,buttonCheckedBg:W,buttonSolidCheckedColor:X,colorTextDisabled:ee,colorBgContainerDisabled:J,buttonCheckedBgDisabled:Y,buttonCheckedColorDisabled:re,colorPrimary:se,colorPrimaryHover:ae,colorPrimaryActive:ce,buttonSolidCheckedBg:Ce,buttonSolidCheckedHoverBg:we,buttonSolidCheckedActiveBg:ge,calc:ve}=e;return{[`${r}-button-wrapper`]:{position:"relative",display:"inline-block",height:n,margin:0,paddingInline:S,paddingBlock:0,color:t,fontSize:T,lineHeight:nt(ve(n).sub(ve(s).mul(2)).equal()),background:M,border:`${nt(s)} ${d} ${p}`,borderBlockStartWidth:ve(s).add(.02).equal(),borderInlineStartWidth:0,borderInlineEndWidth:s,cursor:"pointer",transition:[`color ${x}`,`background ${x}`,`box-shadow ${x}`].join(","),a:{color:t},[`> ${r}-button`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,zIndex:-1,width:"100%",height:"100%"},"&:not(:first-child)":{"&::before":{position:"absolute",insetBlockStart:ve(s).mul(-1).equal(),insetInlineStart:ve(s).mul(-1).equal(),display:"block",boxSizing:"content-box",width:1,height:"100%",paddingBlock:s,paddingInline:0,backgroundColor:p,transition:`background-color ${i}`,content:'""'}},"&:first-child":{borderInlineStart:`${nt(s)} ${d} ${p}`,borderStartStartRadius:B,borderEndStartRadius:B},"&:last-child":{borderStartEndRadius:B,borderEndEndRadius:B},"&:first-child:last-child":{borderRadius:B},[`${r}-group-large &`]:{height:L,fontSize:$,lineHeight:nt(ve(L).sub(ve(s).mul(2)).equal()),"&:first-child":{borderStartStartRadius:H,borderEndStartRadius:H},"&:last-child":{borderStartEndRadius:H,borderEndEndRadius:H}},[`${r}-group-small &`]:{height:N,paddingInline:ve(V).sub(s).equal(),paddingBlock:0,lineHeight:nt(ve(N).sub(ve(s).mul(2)).equal()),"&:first-child":{borderStartStartRadius:j,borderEndStartRadius:j},"&:last-child":{borderStartEndRadius:j,borderEndEndRadius:j}},"&:hover":{position:"relative",color:se},"&:has(:focus-visible)":Object.assign({},Ad(e)),[`${r}-inner, input[type='checkbox'], input[type='radio']`]:{width:0,height:0,opacity:0,pointerEvents:"none"},[`&-checked:not(${r}-button-wrapper-disabled)`]:{zIndex:1,color:se,background:W,borderColor:se,"&::before":{backgroundColor:se},"&:first-child":{borderColor:se},"&:hover":{color:ae,borderColor:ae,"&::before":{backgroundColor:ae}},"&:active":{color:ce,borderColor:ce,"&::before":{backgroundColor:ce}}},[`${r}-group-solid &-checked:not(${r}-button-wrapper-disabled)`]:{color:X,background:Ce,borderColor:Ce,"&:hover":{color:X,background:we,borderColor:we},"&:active":{color:X,background:ge,borderColor:ge}},"&-disabled":{color:ee,backgroundColor:J,borderColor:p,cursor:"not-allowed","&:first-child, &:hover":{color:ee,backgroundColor:J,borderColor:p}},[`&-disabled${r}-button-wrapper-checked`]:{color:re,backgroundColor:Y,borderColor:p,boxShadow:"none"},"&-block":{flex:1,textAlign:"center"}}}},Bae=e=>{const{wireframe:t,padding:n,marginXS:r,lineWidth:s,fontSizeLG:d,colorText:p,colorBgContainer:i,colorTextDisabled:x,controlItemBgActiveDisabled:S,colorTextLightSolid:T,colorPrimary:M,colorPrimaryHover:$,colorPrimaryActive:L,colorWhite:N}=e,V=4,B=d,j=t?B-V*2:B-(V+s)*2;return{radioSize:B,dotSize:j,dotColorDisabled:x,buttonSolidCheckedColor:T,buttonSolidCheckedBg:M,buttonSolidCheckedHoverBg:$,buttonSolidCheckedActiveBg:L,buttonBg:i,buttonCheckedBg:i,buttonColor:p,buttonCheckedBgDisabled:S,buttonCheckedColorDisabled:x,buttonPaddingInline:n-s,wrapperMarginInlineEnd:r,radioColor:t?M:N,radioBgColor:t?i:M}},Oj=Qi("Radio",e=>{const{controlOutline:t,controlOutlineWidth:n}=e,r=`0 0 0 ${nt(n)} ${t}`,d=pi(e,{radioFocusShadow:r,radioButtonFocusShadow:r});return[Lae(d),Nae(d),Fae(d)]},Bae,{unitless:{radioSize:!0,dotSize:!0}});var jae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Vae=(e,t)=>{var n,r;const s=_.useContext(Mj),d=_.useContext(Pj),{getPrefixCls:p,direction:i,radio:x}=_.useContext(fr),S=_.useRef(null),T=Ua(t,S),{isFormItemInput:M}=_.useContext(js),$=ge=>{var ve,de;(ve=e.onChange)===null||ve===void 0||ve.call(e,ge),(de=s==null?void 0:s.onChange)===null||de===void 0||de.call(s,ge)},{prefixCls:L,className:N,rootClassName:V,children:B,style:j,title:H}=e,W=jae(e,["prefixCls","className","rootClassName","children","style","title"]),X=p("radio",L),ee=((s==null?void 0:s.optionType)||d)==="button",J=ee?`${X}-button`:X,Y=Qo(X),[re,se,ae]=Oj(X,Y),ce=Object.assign({},W),Ce=_.useContext(ul);s&&(ce.name=s.name,ce.onChange=$,ce.checked=e.value===s.value,ce.disabled=(n=ce.disabled)!==null&&n!==void 0?n:s.disabled),ce.disabled=(r=ce.disabled)!==null&&r!==void 0?r:Ce;const we=pt(`${J}-wrapper`,{[`${J}-wrapper-checked`]:ce.checked,[`${J}-wrapper-disabled`]:ce.disabled,[`${J}-wrapper-rtl`]:i==="rtl",[`${J}-wrapper-in-form-item`]:M,[`${J}-wrapper-block`]:!!(s!=null&&s.block)},x==null?void 0:x.className,N,V,se,ae,Y);return re(_.createElement(SP,{component:"Radio",disabled:ce.disabled},_.createElement("label",{className:we,style:Object.assign(Object.assign({},x==null?void 0:x.style),j),onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,title:H},_.createElement(Rj,Object.assign({},ce,{className:pt(ce.className,{[ww]:!ee}),type:"radio",prefixCls:J,ref:T})),B!==void 0?_.createElement("span",null,B):null)))},$1=_.forwardRef(Vae),Hae=_.forwardRef((e,t)=>{const{getPrefixCls:n,direction:r}=_.useContext(fr),{prefixCls:s,className:d,rootClassName:p,options:i,buttonStyle:x="outline",disabled:S,children:T,size:M,style:$,id:L,optionType:N,name:V,defaultValue:B,value:j,block:H=!1,onChange:W,onMouseEnter:X,onMouseLeave:ee,onFocus:J,onBlur:Y}=e,[re,se]=Bi(B,{value:j}),ae=_.useCallback(Me=>{const Be=re,$e=Me.target.value;"value"in e||se($e),$e!==Be&&(W==null||W(Me))},[re,se,W]),ce=n("radio",s),Ce=`${ce}-group`,we=Qo(ce),[ge,ve,de]=Oj(ce,we);let pe=T;i&&i.length>0&&(pe=i.map(Me=>typeof Me=="string"||typeof Me=="number"?_.createElement($1,{key:Me.toString(),prefixCls:ce,disabled:S,value:Me,checked:re===Me},Me):_.createElement($1,{key:`radio-group-value-options-${Me.value}`,prefixCls:ce,disabled:Me.disabled||S,value:Me.value,checked:re===Me.value,title:Me.title,style:Me.style,id:Me.id,required:Me.required},Me.label)));const fe=as(M),me=pt(Ce,`${Ce}-${x}`,{[`${Ce}-${fe}`]:fe,[`${Ce}-rtl`]:r==="rtl",[`${Ce}-block`]:H},d,p,ve,de,we),Ie=_.useMemo(()=>({onChange:ae,value:re,disabled:S,name:V,optionType:N,block:H}),[ae,re,S,V,N,H]);return ge(_.createElement("div",Object.assign({},Ko(e,{aria:!0,data:!0}),{className:me,style:$,onMouseEnter:X,onMouseLeave:ee,onFocus:J,onBlur:Y,id:L,ref:t}),_.createElement($ae,{value:Ie},pe)))}),Uae=_.memo(Hae);var Wae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Gae=(e,t)=>{const{getPrefixCls:n}=_.useContext(fr),{prefixCls:r}=e,s=Wae(e,["prefixCls"]),d=n("radio",r);return _.createElement(kae,{value:"button"},_.createElement($1,Object.assign({prefixCls:d},s,{type:"radio",ref:t})))},qae=_.forwardRef(Gae),$y=$1;$y.Button=qae;$y.Group=Uae;$y.__ANT_RADIO=!0;function Zw(e){return pi(e,{inputAffixPadding:e.paddingXXS})}const Yw=e=>{const{controlHeight:t,fontSize:n,lineHeight:r,lineWidth:s,controlHeightSM:d,controlHeightLG:p,fontSizeLG:i,lineHeightLG:x,paddingSM:S,controlPaddingHorizontalSM:T,controlPaddingHorizontal:M,colorFillAlter:$,colorPrimaryHover:L,colorPrimary:N,controlOutlineWidth:V,controlOutline:B,colorErrorOutline:j,colorWarningOutline:H,colorBgContainer:W}=e;return{paddingBlock:Math.max(Math.round((t-n*r)/2*10)/10-s,0),paddingBlockSM:Math.max(Math.round((d-n*r)/2*10)/10-s,0),paddingBlockLG:Math.ceil((p-i*x)/2*10)/10-s,paddingInline:S-s,paddingInlineSM:T-s,paddingInlineLG:M-s,addonBg:$,activeBorderColor:N,hoverBorderColor:L,activeShadow:`0 0 0 ${V}px ${B}`,errorActiveShadow:`0 0 0 ${V}px ${j}`,warningActiveShadow:`0 0 0 ${V}px ${H}`,hoverBg:W,activeBg:W,inputFontSize:n,inputFontSizeLG:i,inputFontSizeSM:n}},Kae=e=>({borderColor:e.hoverBorderColor,backgroundColor:e.hoverBg}),Jw=e=>({color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled], textarea[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},Kae(pi(e,{hoverBorderColor:e.colorBorder,hoverBg:e.colorBgContainerDisabled})))}),rR=(e,t)=>({background:e.colorBgContainer,borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:t.borderColor,"&:hover":{borderColor:t.hoverBorderColor,backgroundColor:e.hoverBg},"&:focus, &:focus-within":{borderColor:t.activeBorderColor,boxShadow:t.activeShadow,outline:0,backgroundColor:e.activeBg}}),Ez=(e,t)=>({[`&${e.componentCls}-status-${t.status}:not(${e.componentCls}-disabled)`]:Object.assign(Object.assign({},rR(e,t)),{[`${e.componentCls}-prefix, ${e.componentCls}-suffix`]:{color:t.affixColor}}),[`&${e.componentCls}-status-${t.status}${e.componentCls}-disabled`]:{borderColor:t.borderColor}}),Aj=(e,t)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},rR(e,{borderColor:e.colorBorder,hoverBorderColor:e.hoverBorderColor,activeBorderColor:e.activeBorderColor,activeShadow:e.activeShadow})),{[`&${e.componentCls}-disabled, &[disabled]`]:Object.assign({},Jw(e))}),Ez(e,{status:"error",borderColor:e.colorError,hoverBorderColor:e.colorErrorBorderHover,activeBorderColor:e.colorError,activeShadow:e.errorActiveShadow,affixColor:e.colorError})),Ez(e,{status:"warning",borderColor:e.colorWarning,hoverBorderColor:e.colorWarningBorderHover,activeBorderColor:e.colorWarning,activeShadow:e.warningActiveShadow,affixColor:e.colorWarning})),t)}),Tz=(e,t)=>({[`&${e.componentCls}-group-wrapper-status-${t.status}`]:{[`${e.componentCls}-group-addon`]:{borderColor:t.addonBorderColor,color:t.addonColor}}}),Xae=e=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${e.componentCls}-group`]:{"&-addon":{background:e.addonBg,border:`${nt(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},Tz(e,{status:"error",addonBorderColor:e.colorError,addonColor:e.colorErrorText})),Tz(e,{status:"warning",addonBorderColor:e.colorWarning,addonColor:e.colorWarningText})),{[`&${e.componentCls}-group-wrapper-disabled`]:{[`${e.componentCls}-group-addon`]:Object.assign({},Jw(e))}})}),Dj=(e,t)=>{const{componentCls:n}=e;return{"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${n}-disabled, &[disabled]`]:{color:e.colorTextDisabled,cursor:"not-allowed"},[`&${n}-status-error`]:{"&, & input, & textarea":{color:e.colorError}},[`&${n}-status-warning`]:{"&, & input, & textarea":{color:e.colorWarning}}},t)}},$j=(e,t)=>({background:t.bg,borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:"transparent","input&, & input, textarea&, & textarea":{color:t==null?void 0:t.inputColor},"&:hover":{background:t.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:t.activeBorderColor,backgroundColor:e.activeBg}}),Iz=(e,t)=>({[`&${e.componentCls}-status-${t.status}:not(${e.componentCls}-disabled)`]:Object.assign(Object.assign({},$j(e,t)),{[`${e.componentCls}-prefix, ${e.componentCls}-suffix`]:{color:t.affixColor}})}),kj=(e,t)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},$j(e,{bg:e.colorFillTertiary,hoverBg:e.colorFillSecondary,activeBorderColor:e.activeBorderColor})),{[`&${e.componentCls}-disabled, &[disabled]`]:Object.assign({},Jw(e))}),Iz(e,{status:"error",bg:e.colorErrorBg,hoverBg:e.colorErrorBgHover,activeBorderColor:e.colorError,inputColor:e.colorErrorText,affixColor:e.colorError})),Iz(e,{status:"warning",bg:e.colorWarningBg,hoverBg:e.colorWarningBgHover,activeBorderColor:e.colorWarning,inputColor:e.colorWarningText,affixColor:e.colorWarning})),t)}),Mz=(e,t)=>({[`&${e.componentCls}-group-wrapper-status-${t.status}`]:{[`${e.componentCls}-group-addon`]:{background:t.addonBg,color:t.addonColor}}}),Zae=e=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${e.componentCls}-group`]:{"&-addon":{background:e.colorFillTertiary},[`${e.componentCls}-filled:not(:focus):not(:focus-within)`]:{"&:not(:first-child)":{borderInlineStart:`${nt(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},"&:not(:last-child)":{borderInlineEnd:`${nt(e.lineWidth)} ${e.lineType} ${e.colorSplit}`}}}},Mz(e,{status:"error",addonBg:e.colorErrorBg,addonColor:e.colorErrorText})),Mz(e,{status:"warning",addonBg:e.colorWarningBg,addonColor:e.colorWarningText})),{[`&${e.componentCls}-group-wrapper-disabled`]:{[`${e.componentCls}-group`]:{"&-addon":{background:e.colorFillTertiary,color:e.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${nt(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderTop:`${nt(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderBottom:`${nt(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${nt(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderTop:`${nt(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderBottom:`${nt(e.lineWidth)} ${e.lineType} ${e.colorBorder}`}}}})}),zj=e=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:e,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),Lj=e=>{const{paddingBlockLG:t,lineHeightLG:n,borderRadiusLG:r,paddingInlineLG:s}=e;return{padding:`${nt(t)} ${nt(s)}`,fontSize:e.inputFontSizeLG,lineHeight:n,borderRadius:r}},iR=e=>({padding:`${nt(e.paddingBlockSM)} ${nt(e.paddingInlineSM)}`,fontSize:e.inputFontSizeSM,borderRadius:e.borderRadiusSM}),oR=e=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${nt(e.paddingBlock)} ${nt(e.paddingInline)}`,color:e.colorText,fontSize:e.inputFontSize,lineHeight:e.lineHeight,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid}`},zj(e.colorTextPlaceholder)),{"textarea&":{maxWidth:"100%",height:"auto",minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:"bottom",transition:`all ${e.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},Lj(e)),"&-sm":Object.assign({},iR(e)),"&-rtl, &-textarea-rtl":{direction:"rtl"}}),Yae=e=>{const{componentCls:t,antCls:n}=e;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:e.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${t}, &-lg > ${t}-group-addon`]:Object.assign({},Lj(e)),[`&-sm ${t}, &-sm > ${t}-group-addon`]:Object.assign({},iR(e)),[`&-lg ${n}-select-single ${n}-select-selector`]:{height:e.controlHeightLG},[`&-sm ${n}-select-single ${n}-select-selector`]:{height:e.controlHeightSM},[`> ${t}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${t}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${nt(e.paddingInline)}`,color:e.colorText,fontWeight:"normal",fontSize:e.inputFontSize,textAlign:"center",borderRadius:e.borderRadius,transition:`all ${e.motionDurationSlow}`,lineHeight:1,[`${n}-select`]:{margin:`${nt(e.calc(e.paddingBlock).add(1).mul(-1).equal())} ${nt(e.calc(e.paddingInline).mul(-1).equal())}`,[`&${n}-select-single:not(${n}-select-customize-input):not(${n}-pagination-size-changer)`]:{[`${n}-select-selector`]:{backgroundColor:"inherit",border:`${nt(e.lineWidth)} ${e.lineType} transparent`,boxShadow:"none"}}},[`${n}-cascader-picker`]:{margin:`-9px ${nt(e.calc(e.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${n}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[t]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${t}-search-with-button &`]:{zIndex:0}}},[`> ${t}:first-child, ${t}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${n}-select ${n}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}-affix-wrapper`]:{[`&:not(:first-child) ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}:last-child, ${t}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${n}-select ${n}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${t}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${t}-search &`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius}},[`&:not(:first-child), ${t}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${t}-group-compact`]:Object.assign(Object.assign({display:"block"},ou()),{[`${t}-group-addon, ${t}-group-wrap, > ${t}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:e.lineWidth,"&:hover, &:focus":{zIndex:1}}},"& > *":{display:"inline-flex",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${t}-affix-wrapper,
        & > ${t}-number-affix-wrapper,
        & > ${n}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal(),borderInlineEndWidth:e.lineWidth},[t]:{float:"none"},[`& > ${n}-select > ${n}-select-selector,
      & > ${n}-select-auto-complete ${t},
      & > ${n}-cascader-picker ${t},
      & > ${t}-group-wrapper ${t}`]:{borderInlineEndWidth:e.lineWidth,borderRadius:0,"&:hover, &:focus":{zIndex:1}},[`& > ${n}-select-focused`]:{zIndex:1},[`& > ${n}-select > ${n}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${n}-select:first-child > ${n}-select-selector,
      & > ${n}-select-auto-complete:first-child ${t},
      & > ${n}-cascader-picker:first-child ${t}`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius},[`& > *:last-child,
      & > ${n}-select:last-child > ${n}-select-selector,
      & > ${n}-cascader-picker:last-child ${t},
      & > ${n}-cascader-picker-focused:last-child ${t}`]:{borderInlineEndWidth:e.lineWidth,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius},[`& > ${n}-select-auto-complete ${t}`]:{verticalAlign:"top"},[`${t}-group-wrapper + ${t}-group-wrapper`]:{marginInlineStart:e.calc(e.lineWidth).mul(-1).equal(),[`${t}-affix-wrapper`]:{borderRadius:0}},[`${t}-group-wrapper:not(:last-child)`]:{[`&${t}-search > ${t}-group`]:{[`& > ${t}-group-addon > ${t}-search-button`]:{borderRadius:0},[`& > ${t}`]:{borderStartStartRadius:e.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:e.borderRadius}}}})}},Jae=e=>{const{componentCls:t,controlHeightSM:n,lineWidth:r,calc:s}=e,p=s(n).sub(s(r).mul(2)).sub(16).div(2).equal();return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},lo(e)),oR(e)),Aj(e)),kj(e)),Dj(e)),{'&[type="color"]':{height:e.controlHeight,[`&${t}-lg`]:{height:e.controlHeightLG},[`&${t}-sm`]:{height:n,paddingTop:p,paddingBottom:p}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},Qae=e=>{const{componentCls:t}=e;return{[`${t}-clear-icon`]:{margin:0,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"&:hover":{color:e.colorTextTertiary},"&:active":{color:e.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${nt(e.inputAffixPadding)}`}}}},ese=e=>{const{componentCls:t,inputAffixPadding:n,colorTextDescription:r,motionDurationSlow:s,colorIcon:d,colorIconHover:p,iconCls:i}=e,x=`${t}-affix-wrapper`,S=`${t}-affix-wrapper-disabled`;return{[x]:Object.assign(Object.assign(Object.assign(Object.assign({},oR(e)),{display:"inline-flex",[`&:not(${t}-disabled):hover`]:{zIndex:1,[`${t}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${t}`]:{padding:0},[`> input${t}, > textarea${t}`]:{fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[t]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:e.paddingXS}},"&-show-count-suffix":{color:r},"&-show-count-has-suffix":{marginInlineEnd:e.paddingXXS},"&-prefix":{marginInlineEnd:n},"&-suffix":{marginInlineStart:n}}}),Qae(e)),{[`${i}${t}-password-icon`]:{color:d,cursor:"pointer",transition:`all ${s}`,"&:hover":{color:p}}}),[S]:{[`${i}${t}-password-icon`]:{color:d,cursor:"not-allowed","&:hover":{color:d}}}}},tse=e=>{const{componentCls:t,borderRadiusLG:n,borderRadiusSM:r}=e;return{[`${t}-group`]:Object.assign(Object.assign(Object.assign({},lo(e)),Yae(e)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${t}-group-addon`]:{borderRadius:n,fontSize:e.inputFontSizeLG}},"&-sm":{[`${t}-group-addon`]:{borderRadius:r}}},Xae(e)),Zae(e)),{[`&:not(${t}-compact-first-item):not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}, ${t}-group-addon`]:{borderRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-first-item`]:{[`${t}, ${t}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${t}-compact-first-item)${t}-compact-last-item`]:{[`${t}, ${t}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}}})})}},nse=e=>{const{componentCls:t,antCls:n}=e,r=`${t}-search`;return{[r]:{[t]:{"&:hover, &:focus":{[`+ ${t}-group-addon ${r}-button:not(${n}-btn-primary)`]:{borderInlineStartColor:e.colorPrimaryHover}}},[`${t}-affix-wrapper`]:{height:e.controlHeight,borderRadius:0},[`${t}-lg`]:{lineHeight:e.calc(e.lineHeightLG).sub(2e-4).equal()},[`> ${t}-group`]:{[`> ${t}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${r}-button`]:{marginInlineEnd:-1,paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderEndStartRadius:0,boxShadow:"none"},[`${r}-button:not(${n}-btn-primary)`]:{color:e.colorTextDescription,"&:hover":{color:e.colorPrimaryHover},"&:active":{color:e.colorPrimaryActive},[`&${n}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${r}-button`]:{height:e.controlHeight,"&:hover, &:focus":{zIndex:1}},"&-large":{[`${t}-affix-wrapper, ${r}-button`]:{height:e.controlHeightLG}},"&-small":{[`${t}-affix-wrapper, ${r}-button`]:{height:e.controlHeightSM}},"&-rtl":{direction:"rtl"},[`&${t}-compact-item`]:{[`&:not(${t}-compact-last-item)`]:{[`${t}-group-addon`]:{[`${t}-search-button`]:{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${t}-compact-first-item)`]:{[`${t},${t}-affix-wrapper`]:{borderRadius:0}},[`> ${t}-group-addon ${t}-search-button,
        > ${t},
        ${t}-affix-wrapper`]:{"&:hover, &:focus, &:active":{zIndex:2}},[`> ${t}-affix-wrapper-focused`]:{zIndex:2}}}}},rse=e=>{const{componentCls:t,paddingLG:n}=e,r=`${t}-textarea`;return{[r]:{position:"relative","&-show-count":{[`> ${t}`]:{height:"100%"},[`${t}-data-count`]:{position:"absolute",bottom:e.calc(e.fontSize).mul(e.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`
        &-allow-clear > ${t},
        &-affix-wrapper${r}-has-feedback ${t}
      `]:{paddingInlineEnd:n},[`&-affix-wrapper${t}-affix-wrapper`]:{padding:0,[`> textarea${t}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent","&:focus":{boxShadow:"none !important"}},[`${t}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${t}-clear-icon`]:{position:"absolute",insetInlineEnd:e.paddingInline,insetBlockStart:e.paddingXS},[`${r}-suffix`]:{position:"absolute",top:0,insetInlineEnd:e.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}},[`&-affix-wrapper${t}-affix-wrapper-sm`]:{[`${t}-suffix`]:{[`${t}-clear-icon`]:{insetInlineEnd:e.paddingInlineSM}}}}}},ise=e=>{const{componentCls:t}=e;return{[`${t}-out-of-range`]:{[`&, & input, & textarea, ${t}-show-count-suffix, ${t}-data-count`]:{color:e.colorError}}}},aR=Qi("Input",e=>{const t=pi(e,Zw(e));return[Jae(t),rse(t),ese(t),tse(t),nse(t),ise(t),Ow(t)]},Yw,{resetFont:!1}),lE=(e,t)=>{const{componentCls:n,controlHeight:r}=e,s=t?`${n}-${t}`:"",d=r6(e);return[{[`${n}-multiple${s}`]:{paddingBlock:d.containerPadding,paddingInlineStart:d.basePadding,minHeight:r,[`${n}-selection-item`]:{height:d.itemHeight,lineHeight:nt(d.itemLineHeight)}}}]},ose=e=>{const{componentCls:t,calc:n,lineWidth:r}=e,s=pi(e,{fontHeight:e.fontSize,selectHeight:e.controlHeightSM,multipleSelectItemHeight:e.multipleItemHeightSM,borderRadius:e.borderRadiusSM,borderRadiusSM:e.borderRadiusXS,controlHeight:e.controlHeightSM}),d=pi(e,{fontHeight:n(e.multipleItemHeightLG).sub(n(r).mul(2).equal()).equal(),fontSize:e.fontSizeLG,selectHeight:e.controlHeightLG,multipleSelectItemHeight:e.multipleItemHeightLG,borderRadius:e.borderRadiusLG,borderRadiusSM:e.borderRadius,controlHeight:e.controlHeightLG});return[lE(s,"small"),lE(e),lE(d,"large"),{[`${t}${t}-multiple`]:Object.assign(Object.assign({width:"100%",cursor:"text",[`${t}-selector`]:{flex:"auto",padding:0,position:"relative","&:after":{margin:0},[`${t}-selection-placeholder`]:{position:"absolute",top:"50%",insetInlineStart:e.inputPaddingHorizontalBase,insetInlineEnd:0,transform:"translateY(-50%)",transition:`all ${e.motionDurationSlow}`,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",flex:1,color:e.colorTextPlaceholder,pointerEvents:"none"}}},i6(e)),{[`${t}-multiple-input`]:{width:0,height:0,border:0,visibility:"hidden",position:"absolute",zIndex:-1}})}]},ase=e=>{const{pickerCellCls:t,pickerCellInnerCls:n,cellHeight:r,borderRadiusSM:s,motionDurationMid:d,cellHoverBg:p,lineWidth:i,lineType:x,colorPrimary:S,cellActiveWithRangeBg:T,colorTextLightSolid:M,colorTextDisabled:$,cellBgDisabled:L,colorFillSecondary:N}=e;return{"&::before":{position:"absolute",top:"50%",insetInlineStart:0,insetInlineEnd:0,zIndex:1,height:r,transform:"translateY(-50%)",content:'""',pointerEvents:"none"},[n]:{position:"relative",zIndex:2,display:"inline-block",minWidth:r,height:r,lineHeight:nt(r),borderRadius:s,transition:`background ${d}`},[`&:hover:not(${t}-in-view):not(${t}-disabled),
    &:hover:not(${t}-selected):not(${t}-range-start):not(${t}-range-end):not(${t}-disabled)`]:{[n]:{background:p}},[`&-in-view${t}-today ${n}`]:{"&::before":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:1,border:`${nt(i)} ${x} ${S}`,borderRadius:s,content:'""'}},[`&-in-view${t}-in-range,
      &-in-view${t}-range-start,
      &-in-view${t}-range-end`]:{position:"relative",[`&:not(${t}-disabled):before`]:{background:T}},[`&-in-view${t}-selected,
      &-in-view${t}-range-start,
      &-in-view${t}-range-end`]:{[`&:not(${t}-disabled) ${n}`]:{color:M,background:S},[`&${t}-disabled ${n}`]:{background:N}},[`&-in-view${t}-range-start:not(${t}-disabled):before`]:{insetInlineStart:"50%"},[`&-in-view${t}-range-end:not(${t}-disabled):before`]:{insetInlineEnd:"50%"},[`&-in-view${t}-range-start:not(${t}-range-end) ${n}`]:{borderStartStartRadius:s,borderEndStartRadius:s,borderStartEndRadius:0,borderEndEndRadius:0},[`&-in-view${t}-range-end:not(${t}-range-start) ${n}`]:{borderStartStartRadius:0,borderEndStartRadius:0,borderStartEndRadius:s,borderEndEndRadius:s},"&-disabled":{color:$,cursor:"not-allowed",[n]:{background:"transparent"},"&::before":{background:L}},[`&-disabled${t}-today ${n}::before`]:{borderColor:$}}},sse=e=>{const{componentCls:t,pickerCellCls:n,pickerCellInnerCls:r,pickerYearMonthCellWidth:s,pickerControlIconSize:d,cellWidth:p,paddingSM:i,paddingXS:x,paddingXXS:S,colorBgContainer:T,lineWidth:M,lineType:$,borderRadiusLG:L,colorPrimary:N,colorTextHeading:V,colorSplit:B,pickerControlIconBorderWidth:j,colorIcon:H,textHeight:W,motionDurationMid:X,colorIconHover:ee,fontWeightStrong:J,cellHeight:Y,pickerCellPaddingVertical:re,colorTextDisabled:se,colorText:ae,fontSize:ce,motionDurationSlow:Ce,withoutTimeCellHeight:we,pickerQuarterPanelContentHeight:ge,borderRadiusSM:ve,colorTextLightSolid:de,cellHoverBg:pe,timeColumnHeight:fe,timeColumnWidth:me,timeCellHeight:Ie,controlItemBgActive:Me,marginXXS:Be,pickerDatePanelPaddingHorizontal:$e,pickerControlIconMargin:ze}=e,Je=e.calc(p).mul(7).add(e.calc($e).mul(2)).equal();return{[t]:{"&-panel":{display:"inline-flex",flexDirection:"column",textAlign:"center",background:T,borderRadius:L,outline:"none","&-focused":{borderColor:N},"&-rtl":{[`${t}-prev-icon,
              ${t}-super-prev-icon`]:{transform:"rotate(45deg)"},[`${t}-next-icon,
              ${t}-super-next-icon`]:{transform:"rotate(-135deg)"},[`${t}-time-panel`]:{[`${t}-content`]:{direction:"ltr","> *":{direction:"rtl"}}}}},"&-decade-panel,\n        &-year-panel,\n        &-quarter-panel,\n        &-month-panel,\n        &-week-panel,\n        &-date-panel,\n        &-time-panel":{display:"flex",flexDirection:"column",width:Je},"&-header":{display:"flex",padding:`0 ${nt(x)}`,color:V,borderBottom:`${nt(M)} ${$} ${B}`,"> *":{flex:"none"},button:{padding:0,color:H,lineHeight:nt(W),background:"transparent",border:0,cursor:"pointer",transition:`color ${X}`,fontSize:"inherit",display:"inline-flex",alignItems:"center",justifyContent:"center"},"> button":{minWidth:"1.6em",fontSize:ce,"&:hover":{color:ee},"&:disabled":{opacity:.25,pointerEvents:"none"}},"&-view":{flex:"auto",fontWeight:J,lineHeight:nt(W),"> button":{color:"inherit",fontWeight:"inherit","&:not(:first-child)":{marginInlineStart:x},"&:hover":{color:N}}}},"&-prev-icon,\n        &-next-icon,\n        &-super-prev-icon,\n        &-super-next-icon":{position:"relative",width:d,height:d,"&::before":{position:"absolute",top:0,insetInlineStart:0,width:d,height:d,border:"0 solid currentcolor",borderBlockWidth:`${nt(j)} 0`,borderInlineWidth:`${nt(j)} 0`,content:'""'}},"&-super-prev-icon,\n        &-super-next-icon":{"&::after":{position:"absolute",top:ze,insetInlineStart:ze,display:"inline-block",width:d,height:d,border:"0 solid currentcolor",borderBlockWidth:`${nt(j)} 0`,borderInlineWidth:`${nt(j)} 0`,content:'""'}},"&-prev-icon, &-super-prev-icon":{transform:"rotate(-45deg)"},"&-next-icon, &-super-next-icon":{transform:"rotate(135deg)"},"&-content":{width:"100%",tableLayout:"fixed",borderCollapse:"collapse","th, td":{position:"relative",minWidth:Y,fontWeight:"normal"},th:{height:e.calc(Y).add(e.calc(re).mul(2)).equal(),color:ae,verticalAlign:"middle"}},"&-cell":Object.assign({padding:`${nt(re)} 0`,color:se,cursor:"pointer","&-in-view":{color:ae}},ase(e)),"&-decade-panel,\n        &-year-panel,\n        &-quarter-panel,\n        &-month-panel":{[`${t}-content`]:{height:e.calc(we).mul(4).equal()},[r]:{padding:`0 ${nt(x)}`}},"&-quarter-panel":{[`${t}-content`]:{height:ge}},"&-decade-panel":{[r]:{padding:`0 ${nt(e.calc(x).div(2).equal())}`},[`${t}-cell::before`]:{display:"none"}},"&-year-panel,\n        &-quarter-panel,\n        &-month-panel":{[`${t}-body`]:{padding:`0 ${nt(x)}`},[r]:{width:s}},"&-date-panel":{[`${t}-body`]:{padding:`${nt(x)} ${nt($e)}`},[`${t}-content th`]:{boxSizing:"border-box",padding:0}},"&-week-panel":{[`${t}-cell`]:{[`&:hover ${r},
            &-selected ${r},
            ${r}`]:{background:"transparent !important"}},"&-row":{td:{"&:before":{transition:`background ${X}`},"&:first-child:before":{borderStartStartRadius:ve,borderEndStartRadius:ve},"&:last-child:before":{borderStartEndRadius:ve,borderEndEndRadius:ve}},"&:hover td:before":{background:pe},"&-range-start td, &-range-end td, &-selected td, &-hover td":{[`&${n}`]:{"&:before":{background:N},[`&${t}-cell-week`]:{color:new Ji(de).setAlpha(.5).toHexString()},[r]:{color:de}}},"&-range-hover td:before":{background:Me}}},"&-week-panel, &-date-panel-show-week":{[`${t}-body`]:{padding:`${nt(x)} ${nt(i)}`},[`${t}-content th`]:{width:"auto"}},"&-datetime-panel":{display:"flex",[`${t}-time-panel`]:{borderInlineStart:`${nt(M)} ${$} ${B}`},[`${t}-date-panel,
          ${t}-time-panel`]:{transition:`opacity ${Ce}`},"&-active":{[`${t}-date-panel,
            ${t}-time-panel`]:{opacity:.3,"&-active":{opacity:1}}}},"&-time-panel":{width:"auto",minWidth:"auto",[`${t}-content`]:{display:"flex",flex:"auto",height:fe},"&-column":{flex:"1 0 auto",width:me,margin:`${nt(S)} 0`,padding:0,overflowY:"hidden",textAlign:"start",listStyle:"none",transition:`background ${X}`,overflowX:"hidden","&::-webkit-scrollbar":{width:8,backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{backgroundColor:e.colorTextTertiary,borderRadius:e.borderRadiusSM},"&":{scrollbarWidth:"thin",scrollbarColor:`${e.colorTextTertiary} transparent`},"&::after":{display:"block",height:`calc(100% - ${nt(Ie)})`,content:'""'},"&:not(:first-child)":{borderInlineStart:`${nt(M)} ${$} ${B}`},"&-active":{background:new Ji(Me).setAlpha(.2).toHexString()},"&:hover":{overflowY:"auto"},"> li":{margin:0,padding:0,[`&${t}-time-panel-cell`]:{marginInline:Be,[`${t}-time-panel-cell-inner`]:{display:"block",width:e.calc(me).sub(e.calc(Be).mul(2)).equal(),height:Ie,margin:0,paddingBlock:0,paddingInlineEnd:0,paddingInlineStart:e.calc(me).sub(Ie).div(2).equal(),color:ae,lineHeight:nt(Ie),borderRadius:ve,cursor:"pointer",transition:`background ${X}`,"&:hover":{background:pe}},"&-selected":{[`${t}-time-panel-cell-inner`]:{background:Me}},"&-disabled":{[`${t}-time-panel-cell-inner`]:{color:se,background:"transparent",cursor:"not-allowed"}}}}}}}}},lse=e=>{const{componentCls:t,textHeight:n,lineWidth:r,paddingSM:s,antCls:d,colorPrimary:p,cellActiveWithRangeBg:i,colorPrimaryBorder:x,lineType:S,colorSplit:T}=e;return{[`${t}-dropdown`]:{[`${t}-footer`]:{borderTop:`${nt(r)} ${S} ${T}`,"&-extra":{padding:`0 ${nt(s)}`,lineHeight:nt(e.calc(n).sub(e.calc(r).mul(2)).equal()),textAlign:"start","&:not(:last-child)":{borderBottom:`${nt(r)} ${S} ${T}`}}},[`${t}-panels + ${t}-footer ${t}-ranges`]:{justifyContent:"space-between"},[`${t}-ranges`]:{marginBlock:0,paddingInline:nt(s),overflow:"hidden",textAlign:"start",listStyle:"none",display:"flex",justifyContent:"center",alignItems:"center","> li":{lineHeight:nt(e.calc(n).sub(e.calc(r).mul(2)).equal()),display:"inline-block"},[`${t}-now-btn-disabled`]:{pointerEvents:"none",color:e.colorTextDisabled},[`${t}-preset > ${d}-tag-blue`]:{color:p,background:i,borderColor:x,cursor:"pointer"},[`${t}-ok`]:{paddingBlock:e.calc(r).mul(2).equal(),marginInlineStart:"auto"}}}}},cse=e=>{const{componentCls:t,controlHeightLG:n,paddingXXS:r,padding:s}=e;return{pickerCellCls:`${t}-cell`,pickerCellInnerCls:`${t}-cell-inner`,pickerYearMonthCellWidth:e.calc(n).mul(1.5).equal(),pickerQuarterPanelContentHeight:e.calc(n).mul(1.4).equal(),pickerCellPaddingVertical:e.calc(r).add(e.calc(r).div(2)).equal(),pickerCellBorderGap:2,pickerControlIconSize:7,pickerControlIconMargin:4,pickerControlIconBorderWidth:1.5,pickerDatePanelPaddingHorizontal:e.calc(s).add(e.calc(r).div(2)).equal()}},use=e=>{const{colorBgContainerDisabled:t,controlHeight:n,controlHeightSM:r,controlHeightLG:s,paddingXXS:d,lineWidth:p}=e,i=d*2,x=p*2,S=Math.min(n-i,n-x),T=Math.min(r-i,r-x),M=Math.min(s-i,s-x);return{INTERNAL_FIXED_ITEM_MARGIN:Math.floor(d/2),cellHoverBg:e.controlItemBgHover,cellActiveWithRangeBg:e.controlItemBgActive,cellHoverWithRangeBg:new Ji(e.colorPrimary).lighten(35).toHexString(),cellRangeBorderColor:new Ji(e.colorPrimary).lighten(20).toHexString(),cellBgDisabled:t,timeColumnWidth:s*1.4,timeColumnHeight:28*8,timeCellHeight:28,cellWidth:r*1.5,cellHeight:r,textHeight:s,withoutTimeCellHeight:s*1.65,multipleItemBg:e.colorFillSecondary,multipleItemBorderColor:"transparent",multipleItemHeight:S,multipleItemHeightSM:T,multipleItemHeightLG:M,multipleSelectorBgDisabled:t,multipleItemColorDisabled:e.colorTextDisabled,multipleItemBorderColorDisabled:"transparent"}},dse=e=>Object.assign(Object.assign(Object.assign(Object.assign({},Yw(e)),use(e)),Lw(e)),{presetsWidth:120,presetsMaxWidth:200,zIndexPopup:e.zIndexPopupBase+50}),hse=e=>{const{componentCls:t}=e;return{[t]:[Object.assign(Object.assign(Object.assign({},Aj(e)),kj(e)),Dj(e)),{"&-outlined":{[`&${t}-multiple ${t}-selection-item`]:{background:e.multipleItemBg,border:`${nt(e.lineWidth)} ${e.lineType} ${e.multipleItemBorderColor}`}},"&-filled":{[`&${t}-multiple ${t}-selection-item`]:{background:e.colorBgContainer,border:`${nt(e.lineWidth)} ${e.lineType} ${e.colorSplit}`}},"&-borderless":{[`&${t}-multiple ${t}-selection-item`]:{background:e.multipleItemBg,border:`${nt(e.lineWidth)} ${e.lineType} ${e.multipleItemBorderColor}`}}}]}},cE=(e,t,n,r)=>{const s=e.calc(n).add(2).equal(),d=e.max(e.calc(t).sub(s).div(2).equal(),0),p=e.max(e.calc(t).sub(s).sub(d).equal(),0);return{padding:`${nt(d)} ${nt(r)} ${nt(p)}`}},fse=e=>{const{componentCls:t,colorError:n,colorWarning:r}=e;return{[`${t}:not(${t}-disabled):not([disabled])`]:{[`&${t}-status-error`]:{[`${t}-active-bar`]:{background:n}},[`&${t}-status-warning`]:{[`${t}-active-bar`]:{background:r}}}}},pse=e=>{const{componentCls:t,antCls:n,controlHeight:r,paddingInline:s,lineWidth:d,lineType:p,colorBorder:i,borderRadius:x,motionDurationMid:S,colorTextDisabled:T,colorTextPlaceholder:M,controlHeightLG:$,fontSizeLG:L,controlHeightSM:N,paddingInlineSM:V,paddingXS:B,marginXS:j,colorTextDescription:H,lineWidthBold:W,colorPrimary:X,motionDurationSlow:ee,zIndexPopup:J,paddingXXS:Y,sizePopupArrow:re,colorBgElevated:se,borderRadiusLG:ae,boxShadowSecondary:ce,borderRadiusSM:Ce,colorSplit:we,cellHoverBg:ge,presetsWidth:ve,presetsMaxWidth:de,boxShadowPopoverArrow:pe,fontHeight:fe,fontHeightLG:me,lineHeightLG:Ie}=e;return[{[t]:Object.assign(Object.assign(Object.assign({},lo(e)),cE(e,r,fe,s)),{position:"relative",display:"inline-flex",alignItems:"center",lineHeight:1,borderRadius:x,transition:`border ${S}, box-shadow ${S}, background ${S}`,[`${t}-prefix`]:{marginInlineEnd:e.inputAffixPadding},[`${t}-input`]:{position:"relative",display:"inline-flex",alignItems:"center",width:"100%","> input":Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",color:"inherit",fontSize:e.fontSize,lineHeight:e.lineHeight,transition:`all ${S}`},zj(M)),{flex:"auto",minWidth:1,height:"auto",padding:0,background:"transparent",border:0,fontFamily:"inherit","&:focus":{boxShadow:"none",outline:0},"&[disabled]":{background:"transparent",color:T,cursor:"not-allowed"}}),"&-placeholder":{"> input":{color:M}}},"&-large":Object.assign(Object.assign({},cE(e,$,me,s)),{[`${t}-input > input`]:{fontSize:L,lineHeight:Ie}}),"&-small":Object.assign({},cE(e,N,fe,V)),[`${t}-suffix`]:{display:"flex",flex:"none",alignSelf:"center",marginInlineStart:e.calc(B).div(2).equal(),color:T,lineHeight:1,pointerEvents:"none",transition:`opacity ${S}, color ${S}`,"> *":{verticalAlign:"top","&:not(:last-child)":{marginInlineEnd:j}}},[`${t}-clear`]:{position:"absolute",top:"50%",insetInlineEnd:0,color:T,lineHeight:1,transform:"translateY(-50%)",cursor:"pointer",opacity:0,transition:`opacity ${S}, color ${S}`,"> *":{verticalAlign:"top"},"&:hover":{color:H}},"&:hover":{[`${t}-clear`]:{opacity:1},[`${t}-suffix:not(:last-child)`]:{opacity:0}},[`${t}-separator`]:{position:"relative",display:"inline-block",width:"1em",height:L,color:T,fontSize:L,verticalAlign:"top",cursor:"default",[`${t}-focused &`]:{color:H},[`${t}-range-separator &`]:{[`${t}-disabled &`]:{cursor:"not-allowed"}}},"&-range":{position:"relative",display:"inline-flex",[`${t}-active-bar`]:{bottom:e.calc(d).mul(-1).equal(),height:W,background:X,opacity:0,transition:`all ${ee} ease-out`,pointerEvents:"none"},[`&${t}-focused`]:{[`${t}-active-bar`]:{opacity:1}},[`${t}-range-separator`]:{alignItems:"center",padding:`0 ${nt(B)}`,lineHeight:1}},"&-range, &-multiple":{[`${t}-clear`]:{insetInlineEnd:s},[`&${t}-small`]:{[`${t}-clear`]:{insetInlineEnd:V}}},"&-dropdown":Object.assign(Object.assign(Object.assign({},lo(e)),sse(e)),{pointerEvents:"none",position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:J,[`&${t}-dropdown-hidden`]:{display:"none"},"&-rtl":{direction:"rtl"},[`&${t}-dropdown-placement-bottomLeft,
            &${t}-dropdown-placement-bottomRight`]:{[`${t}-range-arrow`]:{top:0,display:"block",transform:"translateY(-100%)"}},[`&${t}-dropdown-placement-topLeft,
            &${t}-dropdown-placement-topRight`]:{[`${t}-range-arrow`]:{bottom:0,display:"block",transform:"translateY(100%) rotate(180deg)"}},[`&${n}-slide-up-enter${n}-slide-up-enter-active${t}-dropdown-placement-topLeft,
          &${n}-slide-up-enter${n}-slide-up-enter-active${t}-dropdown-placement-topRight,
          &${n}-slide-up-appear${n}-slide-up-appear-active${t}-dropdown-placement-topLeft,
          &${n}-slide-up-appear${n}-slide-up-appear-active${t}-dropdown-placement-topRight`]:{animationName:Mw},[`&${n}-slide-up-enter${n}-slide-up-enter-active${t}-dropdown-placement-bottomLeft,
          &${n}-slide-up-enter${n}-slide-up-enter-active${t}-dropdown-placement-bottomRight,
          &${n}-slide-up-appear${n}-slide-up-appear-active${t}-dropdown-placement-bottomLeft,
          &${n}-slide-up-appear${n}-slide-up-appear-active${t}-dropdown-placement-bottomRight`]:{animationName:Tw},[`&${n}-slide-up-leave ${t}-panel-container`]:{pointerEvents:"none"},[`&${n}-slide-up-leave${n}-slide-up-leave-active${t}-dropdown-placement-topLeft,
          &${n}-slide-up-leave${n}-slide-up-leave-active${t}-dropdown-placement-topRight`]:{animationName:Pw},[`&${n}-slide-up-leave${n}-slide-up-leave-active${t}-dropdown-placement-bottomLeft,
          &${n}-slide-up-leave${n}-slide-up-leave-active${t}-dropdown-placement-bottomRight`]:{animationName:Iw},[`${t}-panel > ${t}-time-panel`]:{paddingTop:Y},[`${t}-range-wrapper`]:{display:"flex",position:"relative"},[`${t}-range-arrow`]:Object.assign(Object.assign({position:"absolute",zIndex:1,display:"none",paddingInline:e.calc(s).mul(1.5).equal(),boxSizing:"content-box",transition:`all ${ee} ease-out`},p6(e,se,pe)),{"&:before":{insetInlineStart:e.calc(s).mul(1.5).equal()}}),[`${t}-panel-container`]:{overflow:"hidden",verticalAlign:"top",background:se,borderRadius:ae,boxShadow:ce,transition:`margin ${ee}`,display:"inline-block",pointerEvents:"auto",[`${t}-panel-layout`]:{display:"flex",flexWrap:"nowrap",alignItems:"stretch"},[`${t}-presets`]:{display:"flex",flexDirection:"column",minWidth:ve,maxWidth:de,ul:{height:0,flex:"auto",listStyle:"none",overflow:"auto",margin:0,padding:B,borderInlineEnd:`${nt(d)} ${p} ${we}`,li:Object.assign(Object.assign({},iu),{borderRadius:Ce,paddingInline:B,paddingBlock:e.calc(N).sub(fe).div(2).equal(),cursor:"pointer",transition:`all ${ee}`,"+ li":{marginTop:j},"&:hover":{background:ge}})}},[`${t}-panels`]:{display:"inline-flex",flexWrap:"nowrap","&:last-child":{[`${t}-panel`]:{borderWidth:0}}},[`${t}-panel`]:{verticalAlign:"top",background:"transparent",borderRadius:0,borderWidth:0,[`${t}-content, table`]:{textAlign:"center"},"&-focused":{borderColor:i}}}}),"&-dropdown-range":{padding:`${nt(e.calc(re).mul(2).div(3).equal())} 0`,"&-hidden":{display:"none"}},"&-rtl":{direction:"rtl",[`${t}-separator`]:{transform:"rotate(180deg)"},[`${t}-footer`]:{"&-extra":{direction:"rtl"}}}})},Cc(e,"slide-up"),Cc(e,"slide-down"),pm(e,"move-up"),pm(e,"move-down")]},Nj=Qi("DatePicker",e=>{const t=pi(Zw(e),cse(e),{inputPaddingHorizontalBase:e.calc(e.paddingSM).sub(1).equal(),multipleSelectItemHeight:e.multipleItemHeight,selectHeight:e.controlHeight});return[lse(t),pse(t),hse(t),fse(t),ose(t),Ow(e,{focusElCls:`${e.componentCls}-focused`})]},dse);var mse={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},gse=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:mse}))},vse=_.forwardRef(gse);const Qw=_.createContext(null);var yse=function(t){var n=t.activeTabOffset,r=t.horizontal,s=t.rtl,d=t.indicator,p=d===void 0?{}:d,i=p.size,x=p.align,S=x===void 0?"center":x,T=_.useState(),M=ot(T,2),$=M[0],L=M[1],N=_.useRef(),V=Ft.useCallback(function(j){return typeof i=="function"?i(j):typeof i=="number"?i:j},[i]);function B(){ui.cancel(N.current)}return _.useEffect(function(){var j={};if(n)if(r){j.width=V(n.width);var H=s?"right":"left";S==="start"&&(j[H]=n[H]),S==="center"&&(j[H]=n[H]+n.width/2,j.transform=s?"translateX(50%)":"translateX(-50%)"),S==="end"&&(j[H]=n[H]+n.width,j.transform="translateX(-100%)")}else j.height=V(n.height),S==="start"&&(j.top=n.top),S==="center"&&(j.top=n.top+n.height/2,j.transform="translateY(-50%)"),S==="end"&&(j.top=n.top+n.height,j.transform="translateY(-100%)");return B(),N.current=ui(function(){L(j)}),B},[n,r,s,S,V]),{style:$}},Pz={width:0,height:0,left:0,top:0};function _se(e,t,n){return _.useMemo(function(){for(var r,s=new Map,d=t.get((r=e[0])===null||r===void 0?void 0:r.key)||Pz,p=d.left+d.width,i=0;i<e.length;i+=1){var x=e[i].key,S=t.get(x);if(!S){var T;S=t.get((T=e[i-1])===null||T===void 0?void 0:T.key)||Pz}var M=s.get(x)||We({},S);M.right=p-M.left-M.width,s.set(x,M)}return s},[e.map(function(r){return r.key}).join("_"),t,n])}function Rz(e,t){var n=_.useRef(e),r=_.useState({}),s=ot(r,2),d=s[1];function p(i){var x=typeof i=="function"?i(n.current):i;x!==n.current&&t(x,n.current),n.current=x,d({})}return[n.current,p]}var xse=.1,Oz=.01,Bb=20,Az=Math.pow(.995,Bb);function bse(e,t){var n=_.useState(),r=ot(n,2),s=r[0],d=r[1],p=_.useState(0),i=ot(p,2),x=i[0],S=i[1],T=_.useState(0),M=ot(T,2),$=M[0],L=M[1],N=_.useState(),V=ot(N,2),B=V[0],j=V[1],H=_.useRef();function W(se){var ae=se.touches[0],ce=ae.screenX,Ce=ae.screenY;d({x:ce,y:Ce}),window.clearInterval(H.current)}function X(se){if(s){var ae=se.touches[0],ce=ae.screenX,Ce=ae.screenY;d({x:ce,y:Ce});var we=ce-s.x,ge=Ce-s.y;t(we,ge);var ve=Date.now();S(ve),L(ve-x),j({x:we,y:ge})}}function ee(){if(s&&(d(null),j(null),B)){var se=B.x/$,ae=B.y/$,ce=Math.abs(se),Ce=Math.abs(ae);if(Math.max(ce,Ce)<xse)return;var we=se,ge=ae;H.current=window.setInterval(function(){if(Math.abs(we)<Oz&&Math.abs(ge)<Oz){window.clearInterval(H.current);return}we*=Az,ge*=Az,t(we*Bb,ge*Bb)},Bb)}}var J=_.useRef();function Y(se){var ae=se.deltaX,ce=se.deltaY,Ce=0,we=Math.abs(ae),ge=Math.abs(ce);we===ge?Ce=J.current==="x"?ae:ce:we>ge?(Ce=ae,J.current="x"):(Ce=ce,J.current="y"),t(-Ce,-Ce)&&se.preventDefault()}var re=_.useRef(null);re.current={onTouchStart:W,onTouchMove:X,onTouchEnd:ee,onWheel:Y},_.useEffect(function(){function se(we){re.current.onTouchStart(we)}function ae(we){re.current.onTouchMove(we)}function ce(we){re.current.onTouchEnd(we)}function Ce(we){re.current.onWheel(we)}return document.addEventListener("touchmove",ae,{passive:!1}),document.addEventListener("touchend",ce,{passive:!0}),e.current.addEventListener("touchstart",se,{passive:!0}),e.current.addEventListener("wheel",Ce,{passive:!1}),function(){document.removeEventListener("touchmove",ae),document.removeEventListener("touchend",ce)}},[])}function Fj(e){var t=_.useState(0),n=ot(t,2),r=n[0],s=n[1],d=_.useRef(0),p=_.useRef();return p.current=e,_1(function(){var i;(i=p.current)===null||i===void 0||i.call(p)},[r]),function(){d.current===r&&(d.current+=1,s(d.current))}}function wse(e){var t=_.useRef([]),n=_.useState({}),r=ot(n,2),s=r[1],d=_.useRef(typeof e=="function"?e():e),p=Fj(function(){var x=d.current;t.current.forEach(function(S){x=S(x)}),t.current=[],d.current=x,s({})});function i(x){t.current.push(x),p()}return[d.current,i]}var Dz={width:0,height:0,left:0,top:0,right:0};function Sse(e,t,n,r,s,d,p){var i=p.tabs,x=p.tabPosition,S=p.rtl,T,M,$;return["top","bottom"].includes(x)?(T="width",M=S?"right":"left",$=Math.abs(n)):(T="height",M="top",$=-n),_.useMemo(function(){if(!i.length)return[0,0];for(var L=i.length,N=L,V=0;V<L;V+=1){var B=e.get(i[V].key)||Dz;if(Math.floor(B[M]+B[T])>Math.floor($+t)){N=V-1;break}}for(var j=0,H=L-1;H>=0;H-=1){var W=e.get(i[H].key)||Dz;if(W[M]<$){j=H+1;break}}return j>=N?[0,0]:[j,N]},[e,t,r,s,d,$,x,i.map(function(L){return L.key}).join("_"),S])}function $z(e){var t;return e instanceof Map?(t={},e.forEach(function(n,r){t[r]=n})):t=e,JSON.stringify(t)}var Cse="TABS_DQ";function Bj(e){return String(e).replace(/"/g,Cse)}function jj(e,t,n,r){return!(!n||r||e===!1||e===void 0&&(t===!1||t===null))}var Vj=_.forwardRef(function(e,t){var n=e.prefixCls,r=e.editable,s=e.locale,d=e.style;return!r||r.showAdd===!1?null:_.createElement("button",{ref:t,type:"button",className:"".concat(n,"-nav-add"),style:d,"aria-label":(s==null?void 0:s.addAriaLabel)||"Add tab",onClick:function(i){r.onEdit("add",{event:i})}},r.addIcon||"+")}),kz=_.forwardRef(function(e,t){var n=e.position,r=e.prefixCls,s=e.extra;if(!s)return null;var d,p={};return cr(s)==="object"&&!_.isValidElement(s)?p=s:p.right=s,n==="right"&&(d=p.right),n==="left"&&(d=p.left),d?_.createElement("div",{className:"".concat(r,"-extra-content"),ref:t},d):null}),Ese=_.forwardRef(function(e,t){var n=e.prefixCls,r=e.id,s=e.tabs,d=e.locale,p=e.mobile,i=e.more,x=i===void 0?{}:i,S=e.style,T=e.className,M=e.editable,$=e.tabBarGutter,L=e.rtl,N=e.removeAriaLabel,V=e.onTabClick,B=e.getPopupContainer,j=e.popupClassName,H=_.useState(!1),W=ot(H,2),X=W[0],ee=W[1],J=_.useState(null),Y=ot(J,2),re=Y[0],se=Y[1],ae=x.icon,ce=ae===void 0?"More":ae,Ce="".concat(r,"-more-popup"),we="".concat(n,"-dropdown"),ge=re!==null?"".concat(Ce,"-").concat(re):null,ve=d==null?void 0:d.dropdownAriaLabel;function de($e,ze){$e.preventDefault(),$e.stopPropagation(),M.onEdit("remove",{key:ze,event:$e})}var pe=_.createElement(zm,{onClick:function(ze){var Je=ze.key,yt=ze.domEvent;V(Je,yt),ee(!1)},prefixCls:"".concat(we,"-menu"),id:Ce,tabIndex:-1,role:"listbox","aria-activedescendant":ge,selectedKeys:[re],"aria-label":ve!==void 0?ve:"expanded dropdown"},s.map(function($e){var ze=$e.closable,Je=$e.disabled,yt=$e.closeIcon,at=$e.key,gt=$e.label,wt=jj(ze,yt,M,Je);return _.createElement(Ay,{key:at,id:"".concat(Ce,"-").concat(at),role:"option","aria-controls":r&&"".concat(r,"-panel-").concat(at),disabled:Je},_.createElement("span",null,gt),wt&&_.createElement("button",{type:"button","aria-label":N||"remove",tabIndex:0,className:"".concat(we,"-menu-item-remove"),onClick:function(mt){mt.stopPropagation(),de(mt,at)}},yt||M.removeIcon||"×"))}));function fe($e){for(var ze=s.filter(function(wt){return!wt.disabled}),Je=ze.findIndex(function(wt){return wt.key===re})||0,yt=ze.length,at=0;at<yt;at+=1){Je=(Je+$e+yt)%yt;var gt=ze[Je];if(!gt.disabled){se(gt.key);return}}}function me($e){var ze=$e.which;if(!X){[gn.DOWN,gn.SPACE,gn.ENTER].includes(ze)&&(ee(!0),$e.preventDefault());return}switch(ze){case gn.UP:fe(-1),$e.preventDefault();break;case gn.DOWN:fe(1),$e.preventDefault();break;case gn.ESC:ee(!1);break;case gn.SPACE:case gn.ENTER:re!==null&&V(re,$e);break}}_.useEffect(function(){var $e=document.getElementById(ge);$e&&$e.scrollIntoView&&$e.scrollIntoView(!1)},[re]),_.useEffect(function(){X||se(null)},[X]);var Ie=De({},L?"marginRight":"marginLeft",$);s.length||(Ie.visibility="hidden",Ie.order=1);var Me=pt(De({},"".concat(we,"-rtl"),L)),Be=p?null:_.createElement(S6,qt({prefixCls:we,overlay:pe,visible:s.length?X:!1,onVisibleChange:ee,overlayClassName:pt(Me,j),mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:B},x),_.createElement("button",{type:"button",className:"".concat(n,"-nav-more"),style:Ie,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":Ce,id:"".concat(r,"-more"),"aria-expanded":X,onKeyDown:me},ce));return _.createElement("div",{className:pt("".concat(n,"-nav-operations"),T),style:S,ref:t},Be,_.createElement(Vj,{prefixCls:n,locale:d,editable:M}))});const Tse=_.memo(Ese,function(e,t){return t.tabMoving});var Ise=function(t){var n=t.prefixCls,r=t.id,s=t.active,d=t.tab,p=d.key,i=d.label,x=d.disabled,S=d.closeIcon,T=d.icon,M=t.closable,$=t.renderWrapper,L=t.removeAriaLabel,N=t.editable,V=t.onClick,B=t.onFocus,j=t.style,H="".concat(n,"-tab"),W=jj(M,S,N,x);function X(re){x||V(re)}function ee(re){re.preventDefault(),re.stopPropagation(),N.onEdit("remove",{key:p,event:re})}var J=_.useMemo(function(){return T&&typeof i=="string"?_.createElement("span",null,i):i},[i,T]),Y=_.createElement("div",{key:p,"data-node-key":Bj(p),className:pt(H,De(De(De({},"".concat(H,"-with-remove"),W),"".concat(H,"-active"),s),"".concat(H,"-disabled"),x)),style:j,onClick:X},_.createElement("div",{role:"tab","aria-selected":s,id:r&&"".concat(r,"-tab-").concat(p),className:"".concat(H,"-btn"),"aria-controls":r&&"".concat(r,"-panel-").concat(p),"aria-disabled":x,tabIndex:x?null:0,onClick:function(se){se.stopPropagation(),X(se)},onKeyDown:function(se){[gn.SPACE,gn.ENTER].includes(se.which)&&(se.preventDefault(),X(se))},onFocus:B},T&&_.createElement("span",{className:"".concat(H,"-icon")},T),i&&J),W&&_.createElement("button",{type:"button","aria-label":L||"remove",tabIndex:0,className:"".concat(H,"-remove"),onClick:function(se){se.stopPropagation(),ee(se)}},S||N.removeIcon||"×"));return $?$(Y):Y},Mse=function(t,n){var r=t.offsetWidth,s=t.offsetHeight,d=t.offsetTop,p=t.offsetLeft,i=t.getBoundingClientRect(),x=i.width,S=i.height,T=i.left,M=i.top;return Math.abs(x-r)<1?[x,S,T-n.left,M-n.top]:[r,s,p,d]},Mp=function(t){var n=t.current||{},r=n.offsetWidth,s=r===void 0?0:r,d=n.offsetHeight,p=d===void 0?0:d;if(t.current){var i=t.current.getBoundingClientRect(),x=i.width,S=i.height;if(Math.abs(x-s)<1)return[x,S]}return[s,p]},ub=function(t,n){return t[n?0:1]},zz=_.forwardRef(function(e,t){var n=e.className,r=e.style,s=e.id,d=e.animated,p=e.activeKey,i=e.rtl,x=e.extra,S=e.editable,T=e.locale,M=e.tabPosition,$=e.tabBarGutter,L=e.children,N=e.onTabClick,V=e.onTabScroll,B=e.indicator,j=_.useContext(Qw),H=j.prefixCls,W=j.tabs,X=_.useRef(null),ee=_.useRef(null),J=_.useRef(null),Y=_.useRef(null),re=_.useRef(null),se=_.useRef(null),ae=_.useRef(null),ce=M==="top"||M==="bottom",Ce=Rz(0,function(Mt,kt){ce&&V&&V({direction:Mt>kt?"left":"right"})}),we=ot(Ce,2),ge=we[0],ve=we[1],de=Rz(0,function(Mt,kt){!ce&&V&&V({direction:Mt>kt?"top":"bottom"})}),pe=ot(de,2),fe=pe[0],me=pe[1],Ie=_.useState([0,0]),Me=ot(Ie,2),Be=Me[0],$e=Me[1],ze=_.useState([0,0]),Je=ot(ze,2),yt=Je[0],at=Je[1],gt=_.useState([0,0]),wt=ot(gt,2),Pe=wt[0],mt=wt[1],dt=_.useState([0,0]),ht=ot(dt,2),je=ht[0],St=ht[1],Ct=wse(new Map),Lt=ot(Ct,2),At=Lt[0],Yt=Lt[1],Kt=_se(W,At,yt[0]),Dt=ub(Be,ce),Wt=ub(yt,ce),Vt=ub(Pe,ce),Rt=ub(je,ce),dn=Math.floor(Dt)<Math.floor(Wt+Vt),hn=dn?Dt-Rt:Dt-Vt,Pn="".concat(H,"-nav-operations-hidden"),Dn=0,yn=0;ce&&i?(Dn=0,yn=Math.max(0,Wt-hn)):(Dn=Math.min(0,hn-Wt),yn=0);function Rn(Mt){return Mt<Dn?Dn:Mt>yn?yn:Mt}var kn=_.useRef(null),Cn=_.useState(),nn=ot(Cn,2),Ut=nn[0],cn=nn[1];function an(){cn(Date.now())}function Zt(){kn.current&&clearTimeout(kn.current)}bse(Y,function(Mt,kt){function Gt(vn,On){vn(function(bn){var zn=Rn(bn+On);return zn})}return dn?(ce?Gt(ve,Mt):Gt(me,kt),Zt(),an(),!0):!1}),_.useEffect(function(){return Zt(),Ut&&(kn.current=setTimeout(function(){cn(0)},100)),Zt},[Ut]);var Xt=Sse(Kt,hn,ce?ge:fe,Wt,Vt,Rt,We(We({},e),{},{tabs:W})),Hn=ot(Xt,2),br=Hn[0],mr=Hn[1],pr=Zr(function(){var Mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p,kt=Kt.get(Mt)||{width:0,height:0,left:0,right:0,top:0};if(ce){var Gt=ge;i?kt.right<ge?Gt=kt.right:kt.right+kt.width>ge+hn&&(Gt=kt.right+kt.width-hn):kt.left<-ge?Gt=-kt.left:kt.left+kt.width>-ge+hn&&(Gt=-(kt.left+kt.width-hn)),me(0),ve(Rn(Gt))}else{var vn=fe;kt.top<-fe?vn=-kt.top:kt.top+kt.height>-fe+hn&&(vn=-(kt.top+kt.height-hn)),ve(0),me(Rn(vn))}}),Tr={};M==="top"||M==="bottom"?Tr[i?"marginRight":"marginLeft"]=$:Tr.marginTop=$;var ur=W.map(function(Mt,kt){var Gt=Mt.key;return _.createElement(Ise,{id:s,prefixCls:H,key:Gt,tab:Mt,style:kt===0?void 0:Tr,closable:Mt.closable,editable:S,active:Gt===p,renderWrapper:L,removeAriaLabel:T==null?void 0:T.removeAriaLabel,onClick:function(On){N(Gt,On)},onFocus:function(){pr(Gt),an(),Y.current&&(i||(Y.current.scrollLeft=0),Y.current.scrollTop=0)}})}),Mr=function(){return Yt(function(){var kt,Gt=new Map,vn=(kt=re.current)===null||kt===void 0?void 0:kt.getBoundingClientRect();return W.forEach(function(On){var bn,zn=On.key,Mn=(bn=re.current)===null||bn===void 0?void 0:bn.querySelector('[data-node-key="'.concat(Bj(zn),'"]'));if(Mn){var wn=Mse(Mn,vn),_n=ot(wn,4),rr=_n[0],or=_n[1],kr=_n[2],zr=_n[3];Gt.set(zn,{width:rr,height:or,left:kr,top:zr})}}),Gt})};_.useEffect(function(){Mr()},[W.map(function(Mt){return Mt.key}).join("_")]);var tr=Fj(function(){var Mt=Mp(X),kt=Mp(ee),Gt=Mp(J);$e([Mt[0]-kt[0]-Gt[0],Mt[1]-kt[1]-Gt[1]]);var vn=Mp(ae);mt(vn);var On=Mp(se);St(On);var bn=Mp(re);at([bn[0]-vn[0],bn[1]-vn[1]]),Mr()}),ft=W.slice(0,br),ye=W.slice(mr+1),Se=[].concat(un(ft),un(ye)),ke=Kt.get(p),Ze=yse({activeTabOffset:ke,horizontal:ce,indicator:B,rtl:i}),Ae=Ze.style;_.useEffect(function(){pr()},[p,Dn,yn,$z(ke),$z(Kt),ce]),_.useEffect(function(){tr()},[i]);var Ge=!!Se.length,ut="".concat(H,"-nav-wrap"),Qe,_t,It,bt;return ce?i?(_t=ge>0,Qe=ge!==yn):(Qe=ge<0,_t=ge!==Dn):(It=fe<0,bt=fe!==Dn),_.createElement(ga,{onResize:tr},_.createElement("div",{ref:lu(t,X),role:"tablist",className:pt("".concat(H,"-nav"),n),style:r,onKeyDown:function(){an()}},_.createElement(kz,{ref:ee,position:"left",extra:x,prefixCls:H}),_.createElement(ga,{onResize:tr},_.createElement("div",{className:pt(ut,De(De(De(De({},"".concat(ut,"-ping-left"),Qe),"".concat(ut,"-ping-right"),_t),"".concat(ut,"-ping-top"),It),"".concat(ut,"-ping-bottom"),bt)),ref:Y},_.createElement(ga,{onResize:tr},_.createElement("div",{ref:re,className:"".concat(H,"-nav-list"),style:{transform:"translate(".concat(ge,"px, ").concat(fe,"px)"),transition:Ut?"none":void 0}},ur,_.createElement(Vj,{ref:ae,prefixCls:H,locale:T,editable:S,style:We(We({},ur.length===0?void 0:Tr),{},{visibility:Ge?"hidden":null})}),_.createElement("div",{className:pt("".concat(H,"-ink-bar"),De({},"".concat(H,"-ink-bar-animated"),d.inkBar)),style:Ae}))))),_.createElement(Tse,qt({},e,{removeAriaLabel:T==null?void 0:T.removeAriaLabel,ref:se,prefixCls:H,tabs:Se,className:!Ge&&Pn,tabMoving:!!Ut})),_.createElement(kz,{ref:J,position:"right",extra:x,prefixCls:H})))}),Hj=_.forwardRef(function(e,t){var n=e.prefixCls,r=e.className,s=e.style,d=e.id,p=e.active,i=e.tabKey,x=e.children;return _.createElement("div",{id:d&&"".concat(d,"-panel-").concat(i),role:"tabpanel",tabIndex:p?0:-1,"aria-labelledby":d&&"".concat(d,"-tab-").concat(i),"aria-hidden":!p,style:s,className:pt(n,p&&"".concat(n,"-active"),r),ref:t},x)}),Pse=["renderTabBar"],Rse=["label","key"],Ose=function(t){var n=t.renderTabBar,r=Er(t,Pse),s=_.useContext(Qw),d=s.tabs;if(n){var p=We(We({},r),{},{panes:d.map(function(i){var x=i.label,S=i.key,T=Er(i,Rse);return _.createElement(Hj,qt({tab:x,key:S,tabKey:S},T))})});return n(p,zz)}return _.createElement(zz,r)},Ase=["key","forceRender","style","className","destroyInactiveTabPane"],Dse=function(t){var n=t.id,r=t.activeKey,s=t.animated,d=t.tabPosition,p=t.destroyInactiveTabPane,i=_.useContext(Qw),x=i.prefixCls,S=i.tabs,T=s.tabPane,M="".concat(x,"-tabpane");return _.createElement("div",{className:pt("".concat(x,"-content-holder"))},_.createElement("div",{className:pt("".concat(x,"-content"),"".concat(x,"-content-").concat(d),De({},"".concat(x,"-content-animated"),T))},S.map(function($){var L=$.key,N=$.forceRender,V=$.style,B=$.className,j=$.destroyInactiveTabPane,H=Er($,Ase),W=L===r;return _.createElement(dl,qt({key:L,visible:W,forceRender:N,removeOnLeave:!!(p||j),leavedClassName:"".concat(M,"-hidden")},s.tabPaneMotion),function(X,ee){var J=X.style,Y=X.className;return _.createElement(Hj,qt({},H,{prefixCls:M,id:n,tabKey:L,animated:T,active:W,style:We(We({},V),J),className:pt(B,Y),ref:ee}))})})))};function $se(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{inkBar:!0,tabPane:!1},t;return e===!1?t={inkBar:!1,tabPane:!1}:e===!0?t={inkBar:!0,tabPane:!1}:t=We({inkBar:!0},cr(e)==="object"?e:{}),t.tabPaneMotion&&t.tabPane===void 0&&(t.tabPane=!0),!t.tabPaneMotion&&t.tabPane&&(t.tabPane=!1),t}var kse=["id","prefixCls","className","items","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","more","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","getPopupContainer","popupClassName","indicator"],Lz=0,zse=_.forwardRef(function(e,t){var n=e.id,r=e.prefixCls,s=r===void 0?"rc-tabs":r,d=e.className,p=e.items,i=e.direction,x=e.activeKey,S=e.defaultActiveKey,T=e.editable,M=e.animated,$=e.tabPosition,L=$===void 0?"top":$,N=e.tabBarGutter,V=e.tabBarStyle,B=e.tabBarExtraContent,j=e.locale,H=e.more,W=e.destroyInactiveTabPane,X=e.renderTabBar,ee=e.onChange,J=e.onTabClick,Y=e.onTabScroll,re=e.getPopupContainer,se=e.popupClassName,ae=e.indicator,ce=Er(e,kse),Ce=_.useMemo(function(){return(p||[]).filter(function(je){return je&&cr(je)==="object"&&"key"in je})},[p]),we=i==="rtl",ge=$se(M),ve=_.useState(!1),de=ot(ve,2),pe=de[0],fe=de[1];_.useEffect(function(){fe(DP())},[]);var me=Bi(function(){var je;return(je=Ce[0])===null||je===void 0?void 0:je.key},{value:x,defaultValue:S}),Ie=ot(me,2),Me=Ie[0],Be=Ie[1],$e=_.useState(function(){return Ce.findIndex(function(je){return je.key===Me})}),ze=ot($e,2),Je=ze[0],yt=ze[1];_.useEffect(function(){var je=Ce.findIndex(function(Ct){return Ct.key===Me});if(je===-1){var St;je=Math.max(0,Math.min(Je,Ce.length-1)),Be((St=Ce[je])===null||St===void 0?void 0:St.key)}yt(je)},[Ce.map(function(je){return je.key}).join("_"),Me,Je]);var at=Bi(null,{value:n}),gt=ot(at,2),wt=gt[0],Pe=gt[1];_.useEffect(function(){n||(Pe("rc-tabs-".concat(Lz)),Lz+=1)},[]);function mt(je,St){J==null||J(je,St);var Ct=je!==Me;Be(je),Ct&&(ee==null||ee(je))}var dt={id:wt,activeKey:Me,animated:ge,tabPosition:L,rtl:we,mobile:pe},ht=We(We({},dt),{},{editable:T,locale:j,more:H,tabBarGutter:N,onTabClick:mt,onTabScroll:Y,extra:B,style:V,panes:null,getPopupContainer:re,popupClassName:se,indicator:ae});return _.createElement(Qw.Provider,{value:{tabs:Ce,prefixCls:s}},_.createElement("div",qt({ref:t,id:n,className:pt(s,"".concat(s,"-").concat(L),De(De(De({},"".concat(s,"-mobile"),pe),"".concat(s,"-editable"),T),"".concat(s,"-rtl"),we),d)},ce),_.createElement(Ose,qt({},ht,{renderTabBar:X})),_.createElement(Dse,qt({destroyInactiveTabPane:W},dt,{animated:ge}))))});const Lse={motionAppear:!1,motionEnter:!0,motionLeave:!0};function Nse(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{inkBar:!0,tabPane:!1},n;return t===!1?n={inkBar:!1,tabPane:!1}:t===!0?n={inkBar:!0,tabPane:!0}:n=Object.assign({inkBar:!0},typeof t=="object"?t:{}),n.tabPane&&(n.tabPaneMotion=Object.assign(Object.assign({},Lse),{motionName:Sc(e,"switch")})),n}var Fse=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};function Bse(e){return e.filter(t=>t)}function jse(e,t){if(e)return e;const n=Ha(t).map(r=>{if(_.isValidElement(r)){const{key:s,props:d}=r,p=d||{},{tab:i}=p,x=Fse(p,["tab"]);return Object.assign(Object.assign({key:String(s)},x),{label:i})}return null});return Bse(n)}const Vse=e=>{const{componentCls:t,motionDurationSlow:n}=e;return[{[t]:{[`${t}-switch`]:{"&-appear, &-enter":{transition:"none","&-start":{opacity:0},"&-active":{opacity:1,transition:`opacity ${n}`}},"&-leave":{position:"absolute",transition:"none",inset:0,"&-start":{opacity:1},"&-active":{opacity:0,transition:`opacity ${n}`}}}}},[Cc(e,"slide-up"),Cc(e,"slide-down")]]},Hse=e=>{const{componentCls:t,tabsCardPadding:n,cardBg:r,cardGutter:s,colorBorderSecondary:d,itemSelectedColor:p}=e;return{[`${t}-card`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{margin:0,padding:n,background:r,border:`${nt(e.lineWidth)} ${e.lineType} ${d}`,transition:`all ${e.motionDurationSlow} ${e.motionEaseInOut}`},[`${t}-tab-active`]:{color:p,background:e.colorBgContainer},[`${t}-ink-bar`]:{visibility:"hidden"}},[`&${t}-top, &${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab + ${t}-tab`]:{marginLeft:{_skip_check_:!0,value:nt(s)}}}},[`&${t}-top`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:`${nt(e.borderRadiusLG)} ${nt(e.borderRadiusLG)} 0 0`},[`${t}-tab-active`]:{borderBottomColor:e.colorBgContainer}}},[`&${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:`0 0 ${nt(e.borderRadiusLG)} ${nt(e.borderRadiusLG)}`},[`${t}-tab-active`]:{borderTopColor:e.colorBgContainer}}},[`&${t}-left, &${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab + ${t}-tab`]:{marginTop:nt(s)}}},[`&${t}-left`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`${nt(e.borderRadiusLG)} 0 0 ${nt(e.borderRadiusLG)}`}},[`${t}-tab-active`]:{borderRightColor:{_skip_check_:!0,value:e.colorBgContainer}}}},[`&${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${nt(e.borderRadiusLG)} ${nt(e.borderRadiusLG)} 0`}},[`${t}-tab-active`]:{borderLeftColor:{_skip_check_:!0,value:e.colorBgContainer}}}}}}},Use=e=>{const{componentCls:t,itemHoverColor:n,dropdownEdgeChildVerticalPadding:r}=e;return{[`${t}-dropdown`]:Object.assign(Object.assign({},lo(e)),{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:e.zIndexPopup,display:"block","&-hidden":{display:"none"},[`${t}-dropdown-menu`]:{maxHeight:e.tabsDropdownHeight,margin:0,padding:`${nt(r)} 0`,overflowX:"hidden",overflowY:"auto",textAlign:{_skip_check_:!0,value:"left"},listStyleType:"none",backgroundColor:e.colorBgContainer,backgroundClip:"padding-box",borderRadius:e.borderRadiusLG,outline:"none",boxShadow:e.boxShadowSecondary,"&-item":Object.assign(Object.assign({},iu),{display:"flex",alignItems:"center",minWidth:e.tabsDropdownWidth,margin:0,padding:`${nt(e.paddingXXS)} ${nt(e.paddingSM)}`,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,lineHeight:e.lineHeight,cursor:"pointer",transition:`all ${e.motionDurationSlow}`,"> span":{flex:1,whiteSpace:"nowrap"},"&-remove":{flex:"none",marginLeft:{_skip_check_:!0,value:e.marginSM},color:e.colorTextDescription,fontSize:e.fontSizeSM,background:"transparent",border:0,cursor:"pointer","&:hover":{color:n}},"&:hover":{background:e.controlItemBgHover},"&-disabled":{"&, &:hover":{color:e.colorTextDisabled,background:"transparent",cursor:"not-allowed"}}})}})}},Wse=e=>{const{componentCls:t,margin:n,colorBorderSecondary:r,horizontalMargin:s,verticalItemPadding:d,verticalItemMargin:p,calc:i}=e;return{[`${t}-top, ${t}-bottom`]:{flexDirection:"column",[`> ${t}-nav, > div > ${t}-nav`]:{margin:s,"&::before":{position:"absolute",right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},borderBottom:`${nt(e.lineWidth)} ${e.lineType} ${r}`,content:"''"},[`${t}-ink-bar`]:{height:e.lineWidthBold,"&-animated":{transition:`width ${e.motionDurationSlow}, left ${e.motionDurationSlow},
            right ${e.motionDurationSlow}`}},[`${t}-nav-wrap`]:{"&::before, &::after":{top:0,bottom:0,width:e.controlHeight},"&::before":{left:{_skip_check_:!0,value:0},boxShadow:e.boxShadowTabsOverflowLeft},"&::after":{right:{_skip_check_:!0,value:0},boxShadow:e.boxShadowTabsOverflowRight},[`&${t}-nav-wrap-ping-left::before`]:{opacity:1},[`&${t}-nav-wrap-ping-right::after`]:{opacity:1}}}},[`${t}-top`]:{[`> ${t}-nav,
        > div > ${t}-nav`]:{"&::before":{bottom:0},[`${t}-ink-bar`]:{bottom:0}}},[`${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{order:1,marginTop:n,marginBottom:0,"&::before":{top:0},[`${t}-ink-bar`]:{top:0}},[`> ${t}-content-holder, > div > ${t}-content-holder`]:{order:0}},[`${t}-left, ${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{flexDirection:"column",minWidth:i(e.controlHeight).mul(1.25).equal(),[`${t}-tab`]:{padding:d,textAlign:"center"},[`${t}-tab + ${t}-tab`]:{margin:p},[`${t}-nav-wrap`]:{flexDirection:"column","&::before, &::after":{right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},height:e.controlHeight},"&::before":{top:0,boxShadow:e.boxShadowTabsOverflowTop},"&::after":{bottom:0,boxShadow:e.boxShadowTabsOverflowBottom},[`&${t}-nav-wrap-ping-top::before`]:{opacity:1},[`&${t}-nav-wrap-ping-bottom::after`]:{opacity:1}},[`${t}-ink-bar`]:{width:e.lineWidthBold,"&-animated":{transition:`height ${e.motionDurationSlow}, top ${e.motionDurationSlow}`}},[`${t}-nav-list, ${t}-nav-operations`]:{flex:"1 0 auto",flexDirection:"column"}}},[`${t}-left`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-ink-bar`]:{right:{_skip_check_:!0,value:0}}},[`> ${t}-content-holder, > div > ${t}-content-holder`]:{marginLeft:{_skip_check_:!0,value:nt(i(e.lineWidth).mul(-1).equal())},borderLeft:{_skip_check_:!0,value:`${nt(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},[`> ${t}-content > ${t}-tabpane`]:{paddingLeft:{_skip_check_:!0,value:e.paddingLG}}}},[`${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{order:1,[`${t}-ink-bar`]:{left:{_skip_check_:!0,value:0}}},[`> ${t}-content-holder, > div > ${t}-content-holder`]:{order:0,marginRight:{_skip_check_:!0,value:i(e.lineWidth).mul(-1).equal()},borderRight:{_skip_check_:!0,value:`${nt(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},[`> ${t}-content > ${t}-tabpane`]:{paddingRight:{_skip_check_:!0,value:e.paddingLG}}}}}},Gse=e=>{const{componentCls:t,cardPaddingSM:n,cardPaddingLG:r,horizontalItemPaddingSM:s,horizontalItemPaddingLG:d}=e;return{[t]:{"&-small":{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:s,fontSize:e.titleFontSizeSM}}},"&-large":{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:d,fontSize:e.titleFontSizeLG}}}},[`${t}-card`]:{[`&${t}-small`]:{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:n}},[`&${t}-bottom`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:`0 0 ${nt(e.borderRadius)} ${nt(e.borderRadius)}`}},[`&${t}-top`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:`${nt(e.borderRadius)} ${nt(e.borderRadius)} 0 0`}},[`&${t}-right`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${nt(e.borderRadius)} ${nt(e.borderRadius)} 0`}}},[`&${t}-left`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`${nt(e.borderRadius)} 0 0 ${nt(e.borderRadius)}`}}}},[`&${t}-large`]:{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:r}}}}}},qse=e=>{const{componentCls:t,itemActiveColor:n,itemHoverColor:r,iconCls:s,tabsHorizontalItemMargin:d,horizontalItemPadding:p,itemSelectedColor:i,itemColor:x}=e,S=`${t}-tab`;return{[S]:{position:"relative",WebkitTouchCallout:"none",WebkitTapHighlightColor:"transparent",display:"inline-flex",alignItems:"center",padding:p,fontSize:e.titleFontSize,background:"transparent",border:0,outline:"none",cursor:"pointer",color:x,"&-btn, &-remove":Object.assign({"&:focus:not(:focus-visible), &:active":{color:n}},au(e)),"&-btn":{outline:"none",transition:`all ${e.motionDurationSlow}`,[`${S}-icon:not(:last-child)`]:{marginInlineEnd:e.marginSM}},"&-remove":{flex:"none",marginRight:{_skip_check_:!0,value:e.calc(e.marginXXS).mul(-1).equal()},marginLeft:{_skip_check_:!0,value:e.marginXS},color:e.colorTextDescription,fontSize:e.fontSizeSM,background:"transparent",border:"none",outline:"none",cursor:"pointer",transition:`all ${e.motionDurationSlow}`,"&:hover":{color:e.colorTextHeading}},"&:hover":{color:r},[`&${S}-active ${S}-btn`]:{color:i,textShadow:e.tabsActiveTextShadow},[`&${S}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed"},[`&${S}-disabled ${S}-btn, &${S}-disabled ${t}-remove`]:{"&:focus, &:active":{color:e.colorTextDisabled}},[`& ${S}-remove ${s}`]:{margin:0},[`${s}:not(:last-child)`]:{marginRight:{_skip_check_:!0,value:e.marginSM}}},[`${S} + ${S}`]:{margin:{_skip_check_:!0,value:d}}}},Kse=e=>{const{componentCls:t,tabsHorizontalItemMarginRTL:n,iconCls:r,cardGutter:s,calc:d}=e;return{[`${t}-rtl`]:{direction:"rtl",[`${t}-nav`]:{[`${t}-tab`]:{margin:{_skip_check_:!0,value:n},[`${t}-tab:last-of-type`]:{marginLeft:{_skip_check_:!0,value:0}},[r]:{marginRight:{_skip_check_:!0,value:0},marginLeft:{_skip_check_:!0,value:nt(e.marginSM)}},[`${t}-tab-remove`]:{marginRight:{_skip_check_:!0,value:nt(e.marginXS)},marginLeft:{_skip_check_:!0,value:nt(d(e.marginXXS).mul(-1).equal())},[r]:{margin:0}}}},[`&${t}-left`]:{[`> ${t}-nav`]:{order:1},[`> ${t}-content-holder`]:{order:0}},[`&${t}-right`]:{[`> ${t}-nav`]:{order:0},[`> ${t}-content-holder`]:{order:1}},[`&${t}-card${t}-top, &${t}-card${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab + ${t}-tab`]:{marginRight:{_skip_check_:!0,value:s},marginLeft:{_skip_check_:!0,value:0}}}}},[`${t}-dropdown-rtl`]:{direction:"rtl"},[`${t}-menu-item`]:{[`${t}-dropdown-rtl`]:{textAlign:{_skip_check_:!0,value:"right"}}}}},Xse=e=>{const{componentCls:t,tabsCardPadding:n,cardHeight:r,cardGutter:s,itemHoverColor:d,itemActiveColor:p,colorBorderSecondary:i}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},lo(e)),{display:"flex",[`> ${t}-nav, > div > ${t}-nav`]:{position:"relative",display:"flex",flex:"none",alignItems:"center",[`${t}-nav-wrap`]:{position:"relative",display:"flex",flex:"auto",alignSelf:"stretch",overflow:"hidden",whiteSpace:"nowrap",transform:"translate(0)","&::before, &::after":{position:"absolute",zIndex:1,opacity:0,transition:`opacity ${e.motionDurationSlow}`,content:"''",pointerEvents:"none"}},[`${t}-nav-list`]:{position:"relative",display:"flex",transition:`opacity ${e.motionDurationSlow}`},[`${t}-nav-operations`]:{display:"flex",alignSelf:"stretch"},[`${t}-nav-operations-hidden`]:{position:"absolute",visibility:"hidden",pointerEvents:"none"},[`${t}-nav-more`]:{position:"relative",padding:n,background:"transparent",border:0,color:e.colorText,"&::after":{position:"absolute",right:{_skip_check_:!0,value:0},bottom:0,left:{_skip_check_:!0,value:0},height:e.calc(e.controlHeightLG).div(8).equal(),transform:"translateY(100%)",content:"''"}},[`${t}-nav-add`]:Object.assign({minWidth:r,minHeight:r,marginLeft:{_skip_check_:!0,value:s},padding:`0 ${nt(e.paddingXS)}`,background:"transparent",border:`${nt(e.lineWidth)} ${e.lineType} ${i}`,borderRadius:`${nt(e.borderRadiusLG)} ${nt(e.borderRadiusLG)} 0 0`,outline:"none",cursor:"pointer",color:e.colorText,transition:`all ${e.motionDurationSlow} ${e.motionEaseInOut}`,"&:hover":{color:d},"&:active, &:focus:not(:focus-visible)":{color:p}},au(e))},[`${t}-extra-content`]:{flex:"none"},[`${t}-ink-bar`]:{position:"absolute",background:e.inkBarColor,pointerEvents:"none"}}),qse(e)),{[`${t}-content`]:{position:"relative",width:"100%"},[`${t}-content-holder`]:{flex:"auto",minWidth:0,minHeight:0},[`${t}-tabpane`]:{outline:"none","&-hidden":{display:"none"}}}),[`${t}-centered`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-nav-wrap`]:{[`&:not([class*='${t}-nav-wrap-ping']) > ${t}-nav-list`]:{margin:"auto"}}}}}},Zse=e=>{const t=e.controlHeightLG;return{zIndexPopup:e.zIndexPopupBase+50,cardBg:e.colorFillAlter,cardHeight:t,cardPadding:`${(t-Math.round(e.fontSize*e.lineHeight))/2-e.lineWidth}px ${e.padding}px`,cardPaddingSM:`${e.paddingXXS*1.5}px ${e.padding}px`,cardPaddingLG:`${e.paddingXS}px ${e.padding}px ${e.paddingXXS*1.5}px`,titleFontSize:e.fontSize,titleFontSizeLG:e.fontSizeLG,titleFontSizeSM:e.fontSize,inkBarColor:e.colorPrimary,horizontalMargin:`0 0 ${e.margin}px 0`,horizontalItemGutter:32,horizontalItemMargin:"",horizontalItemMarginRTL:"",horizontalItemPadding:`${e.paddingSM}px 0`,horizontalItemPaddingSM:`${e.paddingXS}px 0`,horizontalItemPaddingLG:`${e.padding}px 0`,verticalItemPadding:`${e.paddingXS}px ${e.paddingLG}px`,verticalItemMargin:`${e.margin}px 0 0 0`,itemColor:e.colorText,itemSelectedColor:e.colorPrimary,itemHoverColor:e.colorPrimaryHover,itemActiveColor:e.colorPrimaryActive,cardGutter:e.marginXXS/2}},Yse=Qi("Tabs",e=>{const t=pi(e,{tabsCardPadding:e.cardPadding,dropdownEdgeChildVerticalPadding:e.paddingXXS,tabsActiveTextShadow:"0 0 0.25px currentcolor",tabsDropdownHeight:200,tabsDropdownWidth:120,tabsHorizontalItemMargin:`0 0 0 ${nt(e.horizontalItemGutter)}`,tabsHorizontalItemMarginRTL:`0 0 0 ${nt(e.horizontalItemGutter)}`});return[Gse(t),Kse(t),Wse(t),Use(t),Hse(t),Xse(t),Vse(t)]},Zse),Jse=()=>null;var Qse=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Uj=e=>{var t,n,r,s,d,p,i,x,S,T,M;const{type:$,className:L,rootClassName:N,size:V,onEdit:B,hideAdd:j,centered:H,addIcon:W,removeIcon:X,moreIcon:ee,more:J,popupClassName:Y,children:re,items:se,animated:ae,style:ce,indicatorSize:Ce,indicator:we}=e,ge=Qse(e,["type","className","rootClassName","size","onEdit","hideAdd","centered","addIcon","removeIcon","moreIcon","more","popupClassName","children","items","animated","style","indicatorSize","indicator"]),{prefixCls:ve}=ge,{direction:de,tabs:pe,getPrefixCls:fe,getPopupContainer:me}=_.useContext(fr),Ie=fe("tabs",ve),Me=Qo(Ie),[Be,$e,ze]=Yse(Ie,Me);let Je;$==="editable-card"&&(Je={onEdit:(dt,ht)=>{let{key:je,event:St}=ht;B==null||B(dt==="add"?St:je,dt)},removeIcon:(t=X??(pe==null?void 0:pe.removeIcon))!==null&&t!==void 0?t:_.createElement(Om,null),addIcon:(W??(pe==null?void 0:pe.addIcon))||_.createElement(vse,null),showAdd:j!==!0});const yt=fe(),at=as(V),gt=jse(se,re),wt=Nse(Ie,ae),Pe=Object.assign(Object.assign({},pe==null?void 0:pe.style),ce),mt={align:(n=we==null?void 0:we.align)!==null&&n!==void 0?n:(r=pe==null?void 0:pe.indicator)===null||r===void 0?void 0:r.align,size:(i=(d=(s=we==null?void 0:we.size)!==null&&s!==void 0?s:Ce)!==null&&d!==void 0?d:(p=pe==null?void 0:pe.indicator)===null||p===void 0?void 0:p.size)!==null&&i!==void 0?i:pe==null?void 0:pe.indicatorSize};return Be(_.createElement(zse,Object.assign({direction:de,getPopupContainer:me},ge,{items:gt,className:pt({[`${Ie}-${at}`]:at,[`${Ie}-card`]:["card","editable-card"].includes($),[`${Ie}-editable-card`]:$==="editable-card",[`${Ie}-centered`]:H},pe==null?void 0:pe.className,L,N,$e,ze,Me),popupClassName:pt(Y,$e,ze,Me),style:Pe,editable:Je,more:Object.assign({icon:(M=(T=(S=(x=pe==null?void 0:pe.more)===null||x===void 0?void 0:x.icon)!==null&&S!==void 0?S:pe==null?void 0:pe.moreIcon)!==null&&T!==void 0?T:ee)!==null&&M!==void 0?M:_.createElement(ZP,null),transitionName:`${yt}-slide-up`},J),prefixCls:Ie,animated:wt,indicator:mt})))};Uj.TabPane=Jse;var ele=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Wj=e=>{var{prefixCls:t,className:n,hoverable:r=!0}=e,s=ele(e,["prefixCls","className","hoverable"]);const{getPrefixCls:d}=_.useContext(fr),p=d("card",t),i=pt(`${p}-grid`,n,{[`${p}-grid-hoverable`]:r});return _.createElement("div",Object.assign({},s,{className:i}))},tle=e=>{const{antCls:t,componentCls:n,headerHeight:r,cardPaddingBase:s,tabsMarginBottom:d}=e;return Object.assign(Object.assign({display:"flex",justifyContent:"center",flexDirection:"column",minHeight:r,marginBottom:-1,padding:`0 ${nt(s)}`,color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.headerFontSize,background:e.headerBg,borderBottom:`${nt(e.lineWidth)} ${e.lineType} ${e.colorBorderSecondary}`,borderRadius:`${nt(e.borderRadiusLG)} ${nt(e.borderRadiusLG)} 0 0`},ou()),{"&-wrapper":{width:"100%",display:"flex",alignItems:"center"},"&-title":Object.assign(Object.assign({display:"inline-block",flex:1},iu),{[`
          > ${n}-typography,
          > ${n}-typography-edit-content
        `]:{insetInlineStart:0,marginTop:0,marginBottom:0}}),[`${t}-tabs-top`]:{clear:"both",marginBottom:d,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,"&-bar":{borderBottom:`${nt(e.lineWidth)} ${e.lineType} ${e.colorBorderSecondary}`}}})},nle=e=>{const{cardPaddingBase:t,colorBorderSecondary:n,cardShadow:r,lineWidth:s}=e;return{width:"33.33%",padding:t,border:0,borderRadius:0,boxShadow:`
      ${nt(s)} 0 0 0 ${n},
      0 ${nt(s)} 0 0 ${n},
      ${nt(s)} ${nt(s)} 0 0 ${n},
      ${nt(s)} 0 0 0 ${n} inset,
      0 ${nt(s)} 0 0 ${n} inset;
    `,transition:`all ${e.motionDurationMid}`,"&-hoverable:hover":{position:"relative",zIndex:1,boxShadow:r}}},rle=e=>{const{componentCls:t,iconCls:n,actionsLiMargin:r,cardActionsIconSize:s,colorBorderSecondary:d,actionsBg:p}=e;return Object.assign(Object.assign({margin:0,padding:0,listStyle:"none",background:p,borderTop:`${nt(e.lineWidth)} ${e.lineType} ${d}`,display:"flex",borderRadius:`0 0 ${nt(e.borderRadiusLG)} ${nt(e.borderRadiusLG)}`},ou()),{"& > li":{margin:r,color:e.colorTextDescription,textAlign:"center","> span":{position:"relative",display:"block",minWidth:e.calc(e.cardActionsIconSize).mul(2).equal(),fontSize:e.fontSize,lineHeight:e.lineHeight,cursor:"pointer","&:hover":{color:e.colorPrimary,transition:`color ${e.motionDurationMid}`},[`a:not(${t}-btn), > ${n}`]:{display:"inline-block",width:"100%",color:e.colorTextDescription,lineHeight:nt(e.fontHeight),transition:`color ${e.motionDurationMid}`,"&:hover":{color:e.colorPrimary}},[`> ${n}`]:{fontSize:s,lineHeight:nt(e.calc(s).mul(e.lineHeight).equal())}},"&:not(:last-child)":{borderInlineEnd:`${nt(e.lineWidth)} ${e.lineType} ${d}`}}})},ile=e=>Object.assign(Object.assign({margin:`${nt(e.calc(e.marginXXS).mul(-1).equal())} 0`,display:"flex"},ou()),{"&-avatar":{paddingInlineEnd:e.padding},"&-detail":{overflow:"hidden",flex:1,"> div:not(:last-child)":{marginBottom:e.marginXS}},"&-title":Object.assign({color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG},iu),"&-description":{color:e.colorTextDescription}}),ole=e=>{const{componentCls:t,cardPaddingBase:n,colorFillAlter:r}=e;return{[`${t}-head`]:{padding:`0 ${nt(n)}`,background:r,"&-title":{fontSize:e.fontSize}},[`${t}-body`]:{padding:`${nt(e.padding)} ${nt(n)}`}}},ale=e=>{const{componentCls:t}=e;return{overflow:"hidden",[`${t}-body`]:{userSelect:"none"}}},sle=e=>{const{componentCls:t,cardShadow:n,cardHeadPadding:r,colorBorderSecondary:s,boxShadowTertiary:d,cardPaddingBase:p,extraColor:i}=e;return{[t]:Object.assign(Object.assign({},lo(e)),{position:"relative",background:e.colorBgContainer,borderRadius:e.borderRadiusLG,[`&:not(${t}-bordered)`]:{boxShadow:d},[`${t}-head`]:tle(e),[`${t}-extra`]:{marginInlineStart:"auto",color:i,fontWeight:"normal",fontSize:e.fontSize},[`${t}-body`]:Object.assign({padding:p,borderRadius:`0 0 ${nt(e.borderRadiusLG)} ${nt(e.borderRadiusLG)}`},ou()),[`${t}-grid`]:nle(e),[`${t}-cover`]:{"> *":{display:"block",width:"100%",borderRadius:`${nt(e.borderRadiusLG)} ${nt(e.borderRadiusLG)} 0 0`}},[`${t}-actions`]:rle(e),[`${t}-meta`]:ile(e)}),[`${t}-bordered`]:{border:`${nt(e.lineWidth)} ${e.lineType} ${s}`,[`${t}-cover`]:{marginTop:-1,marginInlineStart:-1,marginInlineEnd:-1}},[`${t}-hoverable`]:{cursor:"pointer",transition:`box-shadow ${e.motionDurationMid}, border-color ${e.motionDurationMid}`,"&:hover":{borderColor:"transparent",boxShadow:n}},[`${t}-contain-grid`]:{borderRadius:`${nt(e.borderRadiusLG)} ${nt(e.borderRadiusLG)} 0 0 `,[`${t}-body`]:{display:"flex",flexWrap:"wrap"},[`&:not(${t}-loading) ${t}-body`]:{marginBlockStart:e.calc(e.lineWidth).mul(-1).equal(),marginInlineStart:e.calc(e.lineWidth).mul(-1).equal(),padding:0}},[`${t}-contain-tabs`]:{[`> div${t}-head`]:{minHeight:0,[`${t}-head-title, ${t}-extra`]:{paddingTop:r}}},[`${t}-type-inner`]:ole(e),[`${t}-loading`]:ale(e),[`${t}-rtl`]:{direction:"rtl"}}},lle=e=>{const{componentCls:t,cardPaddingSM:n,headerHeightSM:r,headerFontSizeSM:s}=e;return{[`${t}-small`]:{[`> ${t}-head`]:{minHeight:r,padding:`0 ${nt(n)}`,fontSize:s,[`> ${t}-head-wrapper`]:{[`> ${t}-extra`]:{fontSize:e.fontSize}}},[`> ${t}-body`]:{padding:n}},[`${t}-small${t}-contain-tabs`]:{[`> ${t}-head`]:{[`${t}-head-title, ${t}-extra`]:{paddingTop:0,display:"flex",alignItems:"center"}}}}},cle=e=>({headerBg:"transparent",headerFontSize:e.fontSizeLG,headerFontSizeSM:e.fontSize,headerHeight:e.fontSizeLG*e.lineHeightLG+e.padding*2,headerHeightSM:e.fontSize*e.lineHeight+e.paddingXS*2,actionsBg:e.colorBgContainer,actionsLiMargin:`${e.paddingSM}px 0`,tabsMarginBottom:-e.padding-e.lineWidth,extraColor:e.colorText}),ule=Qi("Card",e=>{const t=pi(e,{cardShadow:e.boxShadowCard,cardHeadPadding:e.padding,cardPaddingBase:e.paddingLG,cardActionsIconSize:e.fontSize,cardPaddingSM:12});return[sle(t),lle(t)]},cle);var Nz=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const dle=e=>{const{actionClasses:t,actions:n=[],actionStyle:r}=e;return _.createElement("ul",{className:t,style:r},n.map((s,d)=>{const p=`action-${d}`;return _.createElement("li",{style:{width:`${100/n.length}%`},key:p},_.createElement("span",null,s))}))},hle=_.forwardRef((e,t)=>{const{prefixCls:n,className:r,rootClassName:s,style:d,extra:p,headStyle:i={},bodyStyle:x={},title:S,loading:T,bordered:M=!0,size:$,type:L,cover:N,actions:V,tabList:B,children:j,activeTabKey:H,defaultActiveTabKey:W,tabBarExtraContent:X,hoverable:ee,tabProps:J={},classNames:Y,styles:re}=e,se=Nz(e,["prefixCls","className","rootClassName","style","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps","classNames","styles"]),{getPrefixCls:ae,direction:ce,card:Ce}=_.useContext(fr),we=At=>{var Yt;(Yt=e.onTabChange)===null||Yt===void 0||Yt.call(e,At)},ge=At=>{var Yt;return pt((Yt=Ce==null?void 0:Ce.classNames)===null||Yt===void 0?void 0:Yt[At],Y==null?void 0:Y[At])},ve=At=>{var Yt;return Object.assign(Object.assign({},(Yt=Ce==null?void 0:Ce.styles)===null||Yt===void 0?void 0:Yt[At]),re==null?void 0:re[At])},de=_.useMemo(()=>{let At=!1;return _.Children.forEach(j,Yt=>{(Yt==null?void 0:Yt.type)===Wj&&(At=!0)}),At},[j]),pe=ae("card",n),[fe,me,Ie]=ule(pe),Me=_.createElement(Vd,{loading:!0,active:!0,paragraph:{rows:4},title:!1},j),Be=H!==void 0,$e=Object.assign(Object.assign({},J),{[Be?"activeKey":"defaultActiveKey"]:Be?H:W,tabBarExtraContent:X});let ze;const Je=as($),yt=!Je||Je==="default"?"large":Je,at=B?_.createElement(Uj,Object.assign({size:yt},$e,{className:`${pe}-head-tabs`,onChange:we,items:B.map(At=>{var{tab:Yt}=At,Kt=Nz(At,["tab"]);return Object.assign({label:Yt},Kt)})})):null;if(S||p||at){const At=pt(`${pe}-head`,ge("header")),Yt=pt(`${pe}-head-title`,ge("title")),Kt=pt(`${pe}-extra`,ge("extra")),Dt=Object.assign(Object.assign({},i),ve("header"));ze=_.createElement("div",{className:At,style:Dt},_.createElement("div",{className:`${pe}-head-wrapper`},S&&_.createElement("div",{className:Yt,style:ve("title")},S),p&&_.createElement("div",{className:Kt,style:ve("extra")},p)),at)}const gt=pt(`${pe}-cover`,ge("cover")),wt=N?_.createElement("div",{className:gt,style:ve("cover")},N):null,Pe=pt(`${pe}-body`,ge("body")),mt=Object.assign(Object.assign({},x),ve("body")),dt=_.createElement("div",{className:Pe,style:mt},T?Me:j),ht=pt(`${pe}-actions`,ge("actions")),je=V!=null&&V.length?_.createElement(dle,{actionClasses:ht,actionStyle:ve("actions"),actions:V}):null,St=vo(se,["onTabChange"]),Ct=pt(pe,Ce==null?void 0:Ce.className,{[`${pe}-loading`]:T,[`${pe}-bordered`]:M,[`${pe}-hoverable`]:ee,[`${pe}-contain-grid`]:de,[`${pe}-contain-tabs`]:B==null?void 0:B.length,[`${pe}-${Je}`]:Je,[`${pe}-type-${L}`]:!!L,[`${pe}-rtl`]:ce==="rtl"},r,s,me,Ie),Lt=Object.assign(Object.assign({},Ce==null?void 0:Ce.style),d);return fe(_.createElement("div",Object.assign({ref:t},St,{className:Ct,style:Lt}),ze,wt,dt,je))});var fle=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const ple=e=>{const{prefixCls:t,className:n,avatar:r,title:s,description:d}=e,p=fle(e,["prefixCls","className","avatar","title","description"]),{getPrefixCls:i}=_.useContext(fr),x=i("card",t),S=pt(`${x}-meta`,n),T=r?_.createElement("div",{className:`${x}-meta-avatar`},r):null,M=s?_.createElement("div",{className:`${x}-meta-title`},s):null,$=d?_.createElement("div",{className:`${x}-meta-description`},d):null,L=M||$?_.createElement("div",{className:`${x}-meta-detail`},M,$):null;return _.createElement("div",Object.assign({},p,{className:S}),T,L)},Fm=hle;Fm.Grid=Wj;Fm.Meta=ple;function mle(e,t,n){var r=n||{},s=r.noTrailing,d=s===void 0?!1:s,p=r.noLeading,i=p===void 0?!1:p,x=r.debounceMode,S=x===void 0?void 0:x,T,M=!1,$=0;function L(){T&&clearTimeout(T)}function N(B){var j=B||{},H=j.upcomingOnly,W=H===void 0?!1:H;L(),M=!W}function V(){for(var B=arguments.length,j=new Array(B),H=0;H<B;H++)j[H]=arguments[H];var W=this,X=Date.now()-$;if(M)return;function ee(){$=Date.now(),t.apply(W,j)}function J(){T=void 0}!i&&S&&!T&&ee(),L(),S===void 0&&X>e?i?($=Date.now(),d||(T=setTimeout(S?J:ee,e))):ee():d!==!0&&(T=setTimeout(S?J:ee,S===void 0?e-X:e))}return V.cancel=N,V}function gle(e,t,n){var r={},s=r.atBegin,d=s===void 0?!1:s;return mle(e,t,{debounceMode:d!==!1})}function ps(e,t){return e[t]}var vle=["children"];function Gj(e,t){return"".concat(e,"-").concat(t)}function yle(e){return e&&e.type&&e.type.isTreeNode}function ky(e,t){return e??t}function xm(e){var t=e||{},n=t.title,r=t._title,s=t.key,d=t.children,p=n||"title";return{title:p,_title:r||[p],key:s||"key",children:d||"children"}}function qj(e){function t(n){var r=Ha(n);return r.map(function(s){if(!yle(s))return go(!s,"Tree/TreeNode can only accept TreeNode as children."),null;var d=s.key,p=s.props,i=p.children,x=Er(p,vle),S=We({key:d},x),T=t(i);return T.length&&(S.children=T),S}).filter(function(s){return s})}return t(e)}function uE(e,t,n){var r=xm(n),s=r._title,d=r.key,p=r.children,i=new Set(t===!0?[]:t),x=[];function S(T){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return T.map(function($,L){for(var N=Gj(M?M.pos:"0",L),V=ky($[d],N),B,j=0;j<s.length;j+=1){var H=s[j];if($[H]!==void 0){B=$[H];break}}var W=Object.assign(vo($,[].concat(un(s),[d,p])),{title:B,key:V,parent:M,pos:N,children:null,data:$,isStart:[].concat(un(M?M.isStart:[]),[L===0]),isEnd:[].concat(un(M?M.isEnd:[]),[L===T.length-1])});return x.push(W),t===!0||i.has(V)?W.children=S($[p]||[],W):W.children=[],W})}return S(e),x}function _le(e,t,n){var r={};cr(n)==="object"?r=n:r={externalGetKey:n},r=r||{};var s=r,d=s.childrenPropName,p=s.externalGetKey,i=s.fieldNames,x=xm(i),S=x.key,T=x.children,M=d||T,$;p?typeof p=="string"?$=function(V){return V[p]}:typeof p=="function"&&($=function(V){return p(V)}):$=function(V,B){return ky(V[S],B)};function L(N,V,B,j){var H=N?N[M]:e,W=N?Gj(B.pos,V):"0",X=N?[].concat(un(j),[N]):[];if(N){var ee=$(N,W),J={node:N,index:V,pos:W,key:ee,parentPos:B.node?B.pos:null,level:B.level+1,nodes:X};t(J)}H&&H.forEach(function(Y,re){L(Y,re,{node:N,pos:W,level:B?B.level+1:-1},X)})}L(null)}function sR(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.initWrapper,r=t.processEntity,s=t.onProcessFinished,d=t.externalGetKey,p=t.childrenPropName,i=t.fieldNames,x=arguments.length>2?arguments[2]:void 0,S=d||x,T={},M={},$={posEntities:T,keyEntities:M};return n&&($=n($)||$),_le(e,function(L){var N=L.node,V=L.index,B=L.pos,j=L.key,H=L.parentPos,W=L.level,X=L.nodes,ee={node:N,nodes:X,index:V,key:j,pos:B,level:W},J=ky(j,B);T[B]=ee,M[J]=ee,ee.parent=T[H],ee.parent&&(ee.parent.children=ee.parent.children||[],ee.parent.children.push(ee)),r&&r(ee,$)},{externalGetKey:S,childrenPropName:p,fieldNames:i}),s&&s($),$}function I0(e,t){var n=t.expandedKeys,r=t.selectedKeys,s=t.loadedKeys,d=t.loadingKeys,p=t.checkedKeys,i=t.halfCheckedKeys,x=t.dragOverNodeKey,S=t.dropPosition,T=t.keyEntities,M=ps(T,e),$={eventKey:e,expanded:n.indexOf(e)!==-1,selected:r.indexOf(e)!==-1,loaded:s.indexOf(e)!==-1,loading:d.indexOf(e)!==-1,checked:p.indexOf(e)!==-1,halfChecked:i.indexOf(e)!==-1,pos:String(M?M.pos:""),dragOver:x===e&&S===0,dragOverGapTop:x===e&&S===-1,dragOverGapBottom:x===e&&S===1};return $}function Zo(e){var t=e.data,n=e.expanded,r=e.selected,s=e.checked,d=e.loaded,p=e.loading,i=e.halfChecked,x=e.dragOver,S=e.dragOverGapTop,T=e.dragOverGapBottom,M=e.pos,$=e.active,L=e.eventKey,N=We(We({},t),{},{expanded:n,selected:r,checked:s,loaded:d,loading:p,halfChecked:i,dragOver:x,dragOverGapTop:S,dragOverGapBottom:T,pos:M,active:$,key:L});return"props"in N||Object.defineProperty(N,"props",{get:function(){return go(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),e}}),N}function Kj(e,t){var n=new Set;return e.forEach(function(r){t.has(r)||n.add(r)}),n}function xle(e){var t=e||{},n=t.disabled,r=t.disableCheckbox,s=t.checkable;return!!(n||r)||s===!1}function ble(e,t,n,r){for(var s=new Set(e),d=new Set,p=0;p<=n;p+=1){var i=t.get(p)||new Set;i.forEach(function(M){var $=M.key,L=M.node,N=M.children,V=N===void 0?[]:N;s.has($)&&!r(L)&&V.filter(function(B){return!r(B.node)}).forEach(function(B){s.add(B.key)})})}for(var x=new Set,S=n;S>=0;S-=1){var T=t.get(S)||new Set;T.forEach(function(M){var $=M.parent,L=M.node;if(!(r(L)||!M.parent||x.has(M.parent.key))){if(r(M.parent.node)){x.add($.key);return}var N=!0,V=!1;($.children||[]).filter(function(B){return!r(B.node)}).forEach(function(B){var j=B.key,H=s.has(j);N&&!H&&(N=!1),!V&&(H||d.has(j))&&(V=!0)}),N&&s.add($.key),V&&d.add($.key),x.add($.key)}})}return{checkedKeys:Array.from(s),halfCheckedKeys:Array.from(Kj(d,s))}}function wle(e,t,n,r,s){for(var d=new Set(e),p=new Set(t),i=0;i<=r;i+=1){var x=n.get(i)||new Set;x.forEach(function($){var L=$.key,N=$.node,V=$.children,B=V===void 0?[]:V;!d.has(L)&&!p.has(L)&&!s(N)&&B.filter(function(j){return!s(j.node)}).forEach(function(j){d.delete(j.key)})})}p=new Set;for(var S=new Set,T=r;T>=0;T-=1){var M=n.get(T)||new Set;M.forEach(function($){var L=$.parent,N=$.node;if(!(s(N)||!$.parent||S.has($.parent.key))){if(s($.parent.node)){S.add(L.key);return}var V=!0,B=!1;(L.children||[]).filter(function(j){return!s(j.node)}).forEach(function(j){var H=j.key,W=d.has(H);V&&!W&&(V=!1),!B&&(W||p.has(H))&&(B=!0)}),V||d.delete(L.key),B&&p.add(L.key),S.add(L.key)}})}return{checkedKeys:Array.from(d),halfCheckedKeys:Array.from(Kj(p,d))}}function Qp(e,t,n,r){var s=[],d;r?d=r:d=xle;var p=new Set(e.filter(function(T){var M=!!ps(n,T);return M||s.push(T),M})),i=new Map,x=0;Object.keys(n).forEach(function(T){var M=n[T],$=M.level,L=i.get($);L||(L=new Set,i.set($,L)),L.add(M),x=Math.max(x,$)}),go(!s.length,"Tree missing follow keys: ".concat(s.slice(0,100).map(function(T){return"'".concat(T,"'")}).join(", ")));var S;return t===!0?S=ble(p,i,x,d):S=wle(p,t.halfCheckedKeys,i,x,d),S}const Sle=e=>{const{checkboxCls:t}=e,n=`${t}-wrapper`;return[{[`${t}-group`]:Object.assign(Object.assign({},lo(e)),{display:"inline-flex",flexWrap:"wrap",columnGap:e.marginXS,[`> ${e.antCls}-row`]:{flex:1}}),[n]:Object.assign(Object.assign({},lo(e)),{display:"inline-flex",alignItems:"baseline",cursor:"pointer","&:after":{display:"inline-block",width:0,overflow:"hidden",content:"'\\a0'"},[`& + ${n}`]:{marginInlineStart:0},[`&${n}-in-form-item`]:{'input[type="checkbox"]':{width:14,height:14}}}),[t]:Object.assign(Object.assign({},lo(e)),{position:"relative",whiteSpace:"nowrap",lineHeight:1,cursor:"pointer",borderRadius:e.borderRadiusSM,alignSelf:"center",[`${t}-input`]:{position:"absolute",inset:0,zIndex:1,cursor:"pointer",opacity:0,margin:0,[`&:focus-visible + ${t}-inner`]:Object.assign({},Ad(e))},[`${t}-inner`]:{boxSizing:"border-box",display:"block",width:e.checkboxSize,height:e.checkboxSize,direction:"ltr",backgroundColor:e.colorBgContainer,border:`${nt(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,borderCollapse:"separate",transition:`all ${e.motionDurationSlow}`,"&:after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"25%",display:"table",width:e.calc(e.checkboxSize).div(14).mul(5).equal(),height:e.calc(e.checkboxSize).div(14).mul(8).equal(),border:`${nt(e.lineWidthBold)} solid ${e.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${e.motionDurationFast} ${e.motionEaseInBack}, opacity ${e.motionDurationFast}`}},"& + span":{paddingInlineStart:e.paddingXS,paddingInlineEnd:e.paddingXS}})},{[`
        ${n}:not(${n}-disabled),
        ${t}:not(${t}-disabled)
      `]:{[`&:hover ${t}-inner`]:{borderColor:e.colorPrimary}},[`${n}:not(${n}-disabled)`]:{[`&:hover ${t}-checked:not(${t}-disabled) ${t}-inner`]:{backgroundColor:e.colorPrimaryHover,borderColor:"transparent"},[`&:hover ${t}-checked:not(${t}-disabled):after`]:{borderColor:e.colorPrimaryHover}}},{[`${t}-checked`]:{[`${t}-inner`]:{backgroundColor:e.colorPrimary,borderColor:e.colorPrimary,"&:after":{opacity:1,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`all ${e.motionDurationMid} ${e.motionEaseOutBack} ${e.motionDurationFast}`}}},[`
        ${n}-checked:not(${n}-disabled),
        ${t}-checked:not(${t}-disabled)
      `]:{[`&:hover ${t}-inner`]:{backgroundColor:e.colorPrimaryHover,borderColor:"transparent"}}},{[t]:{"&-indeterminate":{[`${t}-inner`]:{backgroundColor:`${e.colorBgContainer} !important`,borderColor:`${e.colorBorder} !important`,"&:after":{top:"50%",insetInlineStart:"50%",width:e.calc(e.fontSizeLG).div(2).equal(),height:e.calc(e.fontSizeLG).div(2).equal(),backgroundColor:e.colorPrimary,border:0,transform:"translate(-50%, -50%) scale(1)",opacity:1,content:'""'}},[`&:hover ${t}-inner`]:{backgroundColor:`${e.colorBgContainer} !important`,borderColor:`${e.colorPrimary} !important`}}}},{[`${n}-disabled`]:{cursor:"not-allowed"},[`${t}-disabled`]:{[`&, ${t}-input`]:{cursor:"not-allowed",pointerEvents:"none"},[`${t}-inner`]:{background:e.colorBgContainerDisabled,borderColor:e.colorBorder,"&:after":{borderColor:e.colorTextDisabled}},"&:after":{display:"none"},"& + span":{color:e.colorTextDisabled},[`&${t}-indeterminate ${t}-inner::after`]:{background:e.colorTextDisabled}}}]};function Xj(e,t){const n=pi(t,{checkboxCls:`.${e}`,checkboxSize:t.controlInteractiveSize});return[Sle(n)]}const Zj=Qi("Checkbox",(e,t)=>{let{prefixCls:n}=t;return[Xj(n,e)]}),Yj=Ft.createContext(null);var Cle=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Ele=(e,t)=>{var n;const{prefixCls:r,className:s,rootClassName:d,children:p,indeterminate:i=!1,style:x,onMouseEnter:S,onMouseLeave:T,skipGroup:M=!1,disabled:$}=e,L=Cle(e,["prefixCls","className","rootClassName","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup","disabled"]),{getPrefixCls:N,direction:V,checkbox:B}=_.useContext(fr),j=_.useContext(Yj),{isFormItemInput:H}=_.useContext(js),W=_.useContext(ul),X=(n=(j==null?void 0:j.disabled)||$)!==null&&n!==void 0?n:W,ee=_.useRef(L.value),J=_.useRef(null),Y=Ua(t,J);_.useEffect(()=>{j==null||j.registerValue(L.value)},[]),_.useEffect(()=>{if(!M)return L.value!==ee.current&&(j==null||j.cancelValue(ee.current),j==null||j.registerValue(L.value),ee.current=L.value),()=>j==null?void 0:j.cancelValue(L.value)},[L.value]),_.useEffect(()=>{var de;!((de=J.current)===null||de===void 0)&&de.input&&(J.current.input.indeterminate=i)},[i]);const re=N("checkbox",r),se=Qo(re),[ae,ce,Ce]=Zj(re,se),we=Object.assign({},L);j&&!M&&(we.onChange=function(){L.onChange&&L.onChange.apply(L,arguments),j.toggleOption&&j.toggleOption({label:p,value:L.value})},we.name=j.name,we.checked=j.value.includes(L.value));const ge=pt(`${re}-wrapper`,{[`${re}-rtl`]:V==="rtl",[`${re}-wrapper-checked`]:we.checked,[`${re}-wrapper-disabled`]:X,[`${re}-wrapper-in-form-item`]:H},B==null?void 0:B.className,s,d,Ce,se,ce),ve=pt({[`${re}-indeterminate`]:i},ww,ce);return ae(_.createElement(SP,{component:"Checkbox",disabled:X},_.createElement("label",{className:ge,style:Object.assign(Object.assign({},B==null?void 0:B.style),x),onMouseEnter:S,onMouseLeave:T},_.createElement(Rj,Object.assign({},we,{prefixCls:re,className:ve,disabled:X,ref:Y})),p!==void 0&&_.createElement("span",null,p))))},Jj=_.forwardRef(Ele);var Tle=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Ile=_.forwardRef((e,t)=>{const{defaultValue:n,children:r,options:s=[],prefixCls:d,className:p,rootClassName:i,style:x,onChange:S}=e,T=Tle(e,["defaultValue","children","options","prefixCls","className","rootClassName","style","onChange"]),{getPrefixCls:M,direction:$}=_.useContext(fr),[L,N]=_.useState(T.value||n||[]),[V,B]=_.useState([]);_.useEffect(()=>{"value"in T&&N(T.value||[])},[T.value]);const j=_.useMemo(()=>s.map(ve=>typeof ve=="string"||typeof ve=="number"?{label:ve,value:ve}:ve),[s]),H=ve=>{B(de=>de.filter(pe=>pe!==ve))},W=ve=>{B(de=>[].concat(un(de),[ve]))},X=ve=>{const de=L.indexOf(ve.value),pe=un(L);de===-1?pe.push(ve.value):pe.splice(de,1),"value"in T||N(pe),S==null||S(pe.filter(fe=>V.includes(fe)).sort((fe,me)=>{const Ie=j.findIndex(Be=>Be.value===fe),Me=j.findIndex(Be=>Be.value===me);return Ie-Me}))},ee=M("checkbox",d),J=`${ee}-group`,Y=Qo(ee),[re,se,ae]=Zj(ee,Y),ce=vo(T,["value","disabled"]),Ce=s.length?j.map(ve=>_.createElement(Jj,{prefixCls:ee,key:ve.value.toString(),disabled:"disabled"in ve?ve.disabled:T.disabled,value:ve.value,checked:L.includes(ve.value),onChange:ve.onChange,className:`${J}-item`,style:ve.style,title:ve.title,id:ve.id,required:ve.required},ve.label)):r,we={toggleOption:X,value:L,disabled:T.disabled,name:T.name,registerValue:W,cancelValue:H},ge=pt(J,{[`${J}-rtl`]:$==="rtl"},p,i,ae,Y,se);return re(_.createElement("div",Object.assign({className:ge,style:x},ce,{ref:t}),_.createElement(Yj.Provider,{value:we},Ce)))}),bm=Jj;bm.Group=Ile;bm.__ANT_CHECKBOX=!0;const Qj=_.createContext({}),Mle=e=>{const{componentCls:t}=e;return{[t]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},Ple=e=>{const{componentCls:t}=e;return{[t]:{position:"relative",maxWidth:"100%",minHeight:1}}},Rle=(e,t)=>{const{prefixCls:n,componentCls:r,gridColumns:s}=e,d={};for(let p=s;p>=0;p--)p===0?(d[`${r}${t}-${p}`]={display:"none"},d[`${r}-push-${p}`]={insetInlineStart:"auto"},d[`${r}-pull-${p}`]={insetInlineEnd:"auto"},d[`${r}${t}-push-${p}`]={insetInlineStart:"auto"},d[`${r}${t}-pull-${p}`]={insetInlineEnd:"auto"},d[`${r}${t}-offset-${p}`]={marginInlineStart:0},d[`${r}${t}-order-${p}`]={order:0}):(d[`${r}${t}-${p}`]=[{"--ant-display":"block",display:"block"},{display:"var(--ant-display)",flex:`0 0 ${p/s*100}%`,maxWidth:`${p/s*100}%`}],d[`${r}${t}-push-${p}`]={insetInlineStart:`${p/s*100}%`},d[`${r}${t}-pull-${p}`]={insetInlineEnd:`${p/s*100}%`},d[`${r}${t}-offset-${p}`]={marginInlineStart:`${p/s*100}%`},d[`${r}${t}-order-${p}`]={order:p});return d[`${r}${t}-flex`]={flex:`var(--${n}${t}-flex)`},d},VI=(e,t)=>Rle(e,t),Ole=(e,t,n)=>({[`@media (min-width: ${nt(t)})`]:Object.assign({},VI(e,n))}),Ale=()=>({}),Dle=()=>({}),$le=Qi("Grid",Mle,Ale),kle=Qi("Grid",e=>{const t=pi(e,{gridColumns:24}),n={"-sm":t.screenSMMin,"-md":t.screenMDMin,"-lg":t.screenLGMin,"-xl":t.screenXLMin,"-xxl":t.screenXXLMin};return[Ple(t),VI(t,""),VI(t,"-xs"),Object.keys(n).map(r=>Ole(t,n[r],r)).reduce((r,s)=>Object.assign(Object.assign({},r),s),{})]},Dle);var zle=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};function Fz(e){return typeof e=="number"?`${e} ${e} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(e)?`0 0 ${e}`:e}const Lle=["xs","sm","md","lg","xl","xxl"],Bz=_.forwardRef((e,t)=>{const{getPrefixCls:n,direction:r}=_.useContext(fr),{gutter:s,wrap:d}=_.useContext(Qj),{prefixCls:p,span:i,order:x,offset:S,push:T,pull:M,className:$,children:L,flex:N,style:V}=e,B=zle(e,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),j=n("col",p),[H,W,X]=kle(j),ee={};let J={};Lle.forEach(se=>{let ae={};const ce=e[se];typeof ce=="number"?ae.span=ce:typeof ce=="object"&&(ae=ce||{}),delete B[se],J=Object.assign(Object.assign({},J),{[`${j}-${se}-${ae.span}`]:ae.span!==void 0,[`${j}-${se}-order-${ae.order}`]:ae.order||ae.order===0,[`${j}-${se}-offset-${ae.offset}`]:ae.offset||ae.offset===0,[`${j}-${se}-push-${ae.push}`]:ae.push||ae.push===0,[`${j}-${se}-pull-${ae.pull}`]:ae.pull||ae.pull===0,[`${j}-rtl`]:r==="rtl"}),ae.flex&&(J[`${j}-${se}-flex`]=!0,ee[`--${j}-${se}-flex`]=Fz(ae.flex))});const Y=pt(j,{[`${j}-${i}`]:i!==void 0,[`${j}-order-${x}`]:x,[`${j}-offset-${S}`]:S,[`${j}-push-${T}`]:T,[`${j}-pull-${M}`]:M},$,J,W,X),re={};if(s&&s[0]>0){const se=s[0]/2;re.paddingLeft=se,re.paddingRight=se}return N&&(re.flex=Fz(N),d===!1&&!re.minWidth&&(re.minWidth=0)),H(_.createElement("div",Object.assign({},B,{style:Object.assign(Object.assign(Object.assign({},re),V),ee),className:Y,ref:t}),L))});var Nle=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};function jz(e,t){const[n,r]=_.useState(typeof e=="string"?e:""),s=()=>{if(typeof e=="string"&&r(e),typeof e=="object")for(let d=0;d<ym.length;d++){const p=ym[d];if(!t[p])continue;const i=e[p];if(i!==void 0){r(i);return}}};return _.useEffect(()=>{s()},[JSON.stringify(e),t]),n}const Fle=_.forwardRef((e,t)=>{const{prefixCls:n,justify:r,align:s,className:d,style:p,children:i,gutter:x=0,wrap:S}=e,T=Nle(e,["prefixCls","justify","align","className","style","children","gutter","wrap"]),{getPrefixCls:M,direction:$}=_.useContext(fr),[L,N]=_.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),[V,B]=_.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1}),j=jz(s,V),H=jz(r,V),W=_.useRef(x),X=u6();_.useEffect(()=>{const pe=X.subscribe(fe=>{B(fe);const me=W.current||0;(!Array.isArray(me)&&typeof me=="object"||Array.isArray(me)&&(typeof me[0]=="object"||typeof me[1]=="object"))&&N(fe)});return()=>X.unsubscribe(pe)},[]);const ee=()=>{const pe=[void 0,void 0];return(Array.isArray(x)?x:[x,void 0]).forEach((me,Ie)=>{if(typeof me=="object")for(let Me=0;Me<ym.length;Me++){const Be=ym[Me];if(L[Be]&&me[Be]!==void 0){pe[Ie]=me[Be];break}}else pe[Ie]=me}),pe},J=M("row",n),[Y,re,se]=$le(J),ae=ee(),ce=pt(J,{[`${J}-no-wrap`]:S===!1,[`${J}-${H}`]:H,[`${J}-${j}`]:j,[`${J}-rtl`]:$==="rtl"},d,re,se),Ce={},we=ae[0]!=null&&ae[0]>0?ae[0]/-2:void 0;we&&(Ce.marginLeft=we,Ce.marginRight=we);const[ge,ve]=ae;Ce.rowGap=ve;const de=_.useMemo(()=>({gutter:[ge,ve],wrap:S}),[ge,ve,S]);return Y(_.createElement(Qj.Provider,{value:de},_.createElement("div",Object.assign({},T,{className:ce,style:Object.assign(Object.assign({},Ce),p),ref:t}),i)))});function Ble(e){return!!(e.addonBefore||e.addonAfter)}function jle(e){return!!(e.prefix||e.suffix||e.allowClear)}function Vz(e,t,n){var r=t.cloneNode(!0),s=Object.create(e,{target:{value:r},currentTarget:{value:r}});return r.value=n,typeof t.selectionStart=="number"&&typeof t.selectionEnd=="number"&&(r.selectionStart=t.selectionStart,r.selectionEnd=t.selectionEnd),r.setSelectionRange=function(){t.setSelectionRange.apply(t,arguments)},s}function k1(e,t,n,r){if(n){var s=t;if(t.type==="click"){s=Vz(t,e,""),n(s);return}if(e.type!=="file"&&r!==void 0){s=Vz(t,e,r),n(s);return}n(s)}}function eV(e,t){if(e){e.focus(t);var n=t||{},r=n.cursor;if(r){var s=e.value.length;switch(r){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(s,s);break;default:e.setSelectionRange(0,s)}}}}var tV=Ft.forwardRef(function(e,t){var n,r,s=e.inputElement,d=e.children,p=e.prefixCls,i=e.prefix,x=e.suffix,S=e.addonBefore,T=e.addonAfter,M=e.className,$=e.style,L=e.disabled,N=e.readOnly,V=e.focused,B=e.triggerFocus,j=e.allowClear,H=e.value,W=e.handleReset,X=e.hidden,ee=e.classes,J=e.classNames,Y=e.dataAttrs,re=e.styles,se=e.components,ae=e.onClear,ce=d??s,Ce=(se==null?void 0:se.affixWrapper)||"span",we=(se==null?void 0:se.groupWrapper)||"span",ge=(se==null?void 0:se.wrapper)||"span",ve=(se==null?void 0:se.groupAddon)||"span",de=_.useRef(null),pe=function(je){var St;(St=de.current)!==null&&St!==void 0&&St.contains(je.target)&&(B==null||B())},fe=jle(e),me=_.cloneElement(ce,{value:H,className:pt(ce.props.className,!fe&&(J==null?void 0:J.variant))||null}),Ie=_.useRef(null);if(Ft.useImperativeHandle(t,function(){return{nativeElement:Ie.current||de.current}}),fe){var Me=null;if(j){var Be=!L&&!N&&H,$e="".concat(p,"-clear-icon"),ze=cr(j)==="object"&&j!==null&&j!==void 0&&j.clearIcon?j.clearIcon:"✖";Me=Ft.createElement("span",{onClick:function(je){W==null||W(je),ae==null||ae()},onMouseDown:function(je){return je.preventDefault()},className:pt($e,De(De({},"".concat($e,"-hidden"),!Be),"".concat($e,"-has-suffix"),!!x)),role:"button",tabIndex:-1},ze)}var Je="".concat(p,"-affix-wrapper"),yt=pt(Je,De(De(De(De(De({},"".concat(p,"-disabled"),L),"".concat(Je,"-disabled"),L),"".concat(Je,"-focused"),V),"".concat(Je,"-readonly"),N),"".concat(Je,"-input-with-clear-btn"),x&&j&&H),ee==null?void 0:ee.affixWrapper,J==null?void 0:J.affixWrapper,J==null?void 0:J.variant),at=(x||j)&&Ft.createElement("span",{className:pt("".concat(p,"-suffix"),J==null?void 0:J.suffix),style:re==null?void 0:re.suffix},Me,x);me=Ft.createElement(Ce,qt({className:yt,style:re==null?void 0:re.affixWrapper,onClick:pe},Y==null?void 0:Y.affixWrapper,{ref:de}),i&&Ft.createElement("span",{className:pt("".concat(p,"-prefix"),J==null?void 0:J.prefix),style:re==null?void 0:re.prefix},i),me,at)}if(Ble(e)){var gt="".concat(p,"-group"),wt="".concat(gt,"-addon"),Pe="".concat(gt,"-wrapper"),mt=pt("".concat(p,"-wrapper"),gt,ee==null?void 0:ee.wrapper,J==null?void 0:J.wrapper),dt=pt(Pe,De({},"".concat(Pe,"-disabled"),L),ee==null?void 0:ee.group,J==null?void 0:J.groupWrapper);me=Ft.createElement(we,{className:dt,ref:Ie},Ft.createElement(ge,{className:mt},S&&Ft.createElement(ve,{className:wt},S),me,T&&Ft.createElement(ve,{className:wt},T)))}return Ft.cloneElement(me,{className:pt((n=me.props)===null||n===void 0?void 0:n.className,M)||null,style:We(We({},(r=me.props)===null||r===void 0?void 0:r.style),$),hidden:X})}),Vle=["show"];function nV(e,t){return _.useMemo(function(){var n={};t&&(n.show=cr(t)==="object"&&t.formatter?t.formatter:!!t),n=We(We({},n),e);var r=n,s=r.show,d=Er(r,Vle);return We(We({},d),{},{show:!!s,showFormatter:typeof s=="function"?s:void 0,strategy:d.strategy||function(p){return p.length}})},[e,t])}var Hle=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","onKeyUp","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],Ule=_.forwardRef(function(e,t){var n=e.autoComplete,r=e.onChange,s=e.onFocus,d=e.onBlur,p=e.onPressEnter,i=e.onKeyDown,x=e.onKeyUp,S=e.prefixCls,T=S===void 0?"rc-input":S,M=e.disabled,$=e.htmlSize,L=e.className,N=e.maxLength,V=e.suffix,B=e.showCount,j=e.count,H=e.type,W=H===void 0?"text":H,X=e.classes,ee=e.classNames,J=e.styles,Y=e.onCompositionStart,re=e.onCompositionEnd,se=Er(e,Hle),ae=_.useState(!1),ce=ot(ae,2),Ce=ce[0],we=ce[1],ge=_.useRef(!1),ve=_.useRef(!1),de=_.useRef(null),pe=_.useRef(null),fe=function(Rt){de.current&&eV(de.current,Rt)},me=Bi(e.defaultValue,{value:e.value}),Ie=ot(me,2),Me=Ie[0],Be=Ie[1],$e=Me==null?"":String(Me),ze=_.useState(null),Je=ot(ze,2),yt=Je[0],at=Je[1],gt=nV(j,B),wt=gt.max||N,Pe=gt.strategy($e),mt=!!wt&&Pe>wt;_.useImperativeHandle(t,function(){var Vt;return{focus:fe,blur:function(){var dn;(dn=de.current)===null||dn===void 0||dn.blur()},setSelectionRange:function(dn,hn,Pn){var Dn;(Dn=de.current)===null||Dn===void 0||Dn.setSelectionRange(dn,hn,Pn)},select:function(){var dn;(dn=de.current)===null||dn===void 0||dn.select()},input:de.current,nativeElement:((Vt=pe.current)===null||Vt===void 0?void 0:Vt.nativeElement)||de.current}}),_.useEffect(function(){we(function(Vt){return Vt&&M?!1:Vt})},[M]);var dt=function(Rt,dn,hn){var Pn=dn;if(!ge.current&&gt.exceedFormatter&&gt.max&&gt.strategy(dn)>gt.max){if(Pn=gt.exceedFormatter(dn,{max:gt.max}),dn!==Pn){var Dn,yn;at([((Dn=de.current)===null||Dn===void 0?void 0:Dn.selectionStart)||0,((yn=de.current)===null||yn===void 0?void 0:yn.selectionEnd)||0])}}else if(hn.source==="compositionEnd")return;Be(Pn),de.current&&k1(de.current,Rt,r,Pn)};_.useEffect(function(){if(yt){var Vt;(Vt=de.current)===null||Vt===void 0||Vt.setSelectionRange.apply(Vt,un(yt))}},[yt]);var ht=function(Rt){dt(Rt,Rt.target.value,{source:"change"})},je=function(Rt){ge.current=!1,dt(Rt,Rt.currentTarget.value,{source:"compositionEnd"}),re==null||re(Rt)},St=function(Rt){p&&Rt.key==="Enter"&&!ve.current&&(ve.current=!0,p(Rt)),i==null||i(Rt)},Ct=function(Rt){Rt.key==="Enter"&&(ve.current=!1),x==null||x(Rt)},Lt=function(Rt){we(!0),s==null||s(Rt)},At=function(Rt){we(!1),d==null||d(Rt)},Yt=function(Rt){Be(""),fe(),de.current&&k1(de.current,Rt,r)},Kt=mt&&"".concat(T,"-out-of-range"),Dt=function(){var Rt=vo(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]);return Ft.createElement("input",qt({autoComplete:n},Rt,{onChange:ht,onFocus:Lt,onBlur:At,onKeyDown:St,onKeyUp:Ct,className:pt(T,De({},"".concat(T,"-disabled"),M),ee==null?void 0:ee.input),style:J==null?void 0:J.input,ref:de,size:$,type:W,onCompositionStart:function(hn){ge.current=!0,Y==null||Y(hn)},onCompositionEnd:je}))},Wt=function(){var Rt=Number(wt)>0;if(V||gt.show){var dn=gt.showFormatter?gt.showFormatter({value:$e,count:Pe,maxLength:wt}):"".concat(Pe).concat(Rt?" / ".concat(wt):"");return Ft.createElement(Ft.Fragment,null,gt.show&&Ft.createElement("span",{className:pt("".concat(T,"-show-count-suffix"),De({},"".concat(T,"-show-count-has-suffix"),!!V),ee==null?void 0:ee.count),style:We({},J==null?void 0:J.count)},dn),V)}return null};return Ft.createElement(tV,qt({},se,{prefixCls:T,className:pt(L,Kt),handleReset:Yt,value:$e,focused:Ce,triggerFocus:fe,suffix:Wt(),disabled:M,classes:X,classNames:ee,styles:J}),Dt())});const Wle=e=>{const{getPrefixCls:t,direction:n}=_.useContext(fr),{prefixCls:r,className:s}=e,d=t("input-group",r),p=t("input"),[i,x]=aR(p),S=pt(d,{[`${d}-lg`]:e.size==="large",[`${d}-sm`]:e.size==="small",[`${d}-compact`]:e.compact,[`${d}-rtl`]:n==="rtl"},x,s),T=_.useContext(js),M=_.useMemo(()=>Object.assign(Object.assign({},T),{isFormItemInput:!1}),[T]);return i(_.createElement("span",{className:S,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},_.createElement(js.Provider,{value:M},e.children)))},rV=e=>{let t;return typeof e=="object"&&(e!=null&&e.clearIcon)?t=e:e&&(t={clearIcon:Ft.createElement(_w,null)}),t};function iV(e,t){const n=_.useRef([]),r=()=>{n.current.push(setTimeout(()=>{var s,d,p,i;!((s=e.current)===null||s===void 0)&&s.input&&((d=e.current)===null||d===void 0?void 0:d.input.getAttribute("type"))==="password"&&(!((p=e.current)===null||p===void 0)&&p.input.hasAttribute("value"))&&((i=e.current)===null||i===void 0||i.input.removeAttribute("value"))}))};return _.useEffect(()=>(t&&r(),()=>n.current.forEach(s=>{s&&clearTimeout(s)})),[]),r}function Gle(e){return!!(e.prefix||e.suffix||e.allowClear||e.showCount)}var qle=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const eS=_.forwardRef((e,t)=>{var n;const{prefixCls:r,bordered:s=!0,status:d,size:p,disabled:i,onBlur:x,onFocus:S,suffix:T,allowClear:M,addonAfter:$,addonBefore:L,className:N,style:V,styles:B,rootClassName:j,onChange:H,classNames:W,variant:X}=e,ee=qle(e,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:J,direction:Y,input:re}=Ft.useContext(fr),se=J("input",r),ae=_.useRef(null),ce=Qo(se),[Ce,we,ge]=aR(se,ce),{compactSize:ve,compactItemClassnames:de}=cf(se,Y),pe=as(ht=>{var je;return(je=p??ve)!==null&&je!==void 0?je:ht}),fe=Ft.useContext(ul),me=i??fe,{status:Ie,hasFeedback:Me,feedbackIcon:Be}=_.useContext(js),$e=Dm(Ie,d),ze=Gle(e)||!!Me;_.useRef(ze);const Je=iV(ae,!0),yt=ht=>{Je(),x==null||x(ht)},at=ht=>{Je(),S==null||S(ht)},gt=ht=>{Je(),H==null||H(ht)},wt=(Me||T)&&Ft.createElement(Ft.Fragment,null,T,Me&&Be),Pe=rV(M??(re==null?void 0:re.allowClear)),[mt,dt]=$m("input",X,s);return Ce(Ft.createElement(Ule,Object.assign({ref:Ua(t,ae),prefixCls:se,autoComplete:re==null?void 0:re.autoComplete},ee,{disabled:me,onBlur:yt,onFocus:at,style:Object.assign(Object.assign({},re==null?void 0:re.style),V),styles:Object.assign(Object.assign({},re==null?void 0:re.styles),B),suffix:wt,allowClear:Pe,className:pt(N,j,ge,ce,de,re==null?void 0:re.className),onChange:gt,addonBefore:L&&Ft.createElement(Dd,{form:!0,space:!0},L),addonAfter:$&&Ft.createElement(Dd,{form:!0,space:!0},$),classNames:Object.assign(Object.assign(Object.assign({},W),re==null?void 0:re.classNames),{input:pt({[`${se}-sm`]:pe==="small",[`${se}-lg`]:pe==="large",[`${se}-rtl`]:Y==="rtl"},W==null?void 0:W.input,(n=re==null?void 0:re.classNames)===null||n===void 0?void 0:n.input,we),variant:pt({[`${se}-${mt}`]:dt},vm(se,$e)),affixWrapper:pt({[`${se}-affix-wrapper-sm`]:pe==="small",[`${se}-affix-wrapper-lg`]:pe==="large",[`${se}-affix-wrapper-rtl`]:Y==="rtl"},we),wrapper:pt({[`${se}-group-rtl`]:Y==="rtl"},we),groupWrapper:pt({[`${se}-group-wrapper-sm`]:pe==="small",[`${se}-group-wrapper-lg`]:pe==="large",[`${se}-group-wrapper-rtl`]:Y==="rtl",[`${se}-group-wrapper-${mt}`]:dt},vm(`${se}-group-wrapper`,$e,Me),we)})})))}),Kle=e=>{const{componentCls:t,paddingXS:n}=e;return{[t]:{display:"inline-flex",alignItems:"center",flexWrap:"nowrap",columnGap:n,"&-rtl":{direction:"rtl"},[`${t}-input`]:{textAlign:"center",paddingInline:e.paddingXXS},[`&${t}-sm ${t}-input`]:{paddingInline:e.calc(e.paddingXXS).div(2).equal()},[`&${t}-lg ${t}-input`]:{paddingInline:e.paddingXS}}}},Xle=Qi(["Input","OTP"],e=>{const t=pi(e,Zw(e));return[Kle(t)]},Yw);var Zle=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Yle=_.forwardRef((e,t)=>{const{value:n,onChange:r,onActiveChange:s,index:d,mask:p}=e,i=Zle(e,["value","onChange","onActiveChange","index","mask"]),x=n&&typeof p=="string"?p:n,S=N=>{r(d,N.target.value)},T=_.useRef(null);_.useImperativeHandle(t,()=>T.current);const M=()=>{ui(()=>{var N;const V=(N=T.current)===null||N===void 0?void 0:N.input;document.activeElement===V&&V&&V.select()})},$=N=>{const{key:V,ctrlKey:B,metaKey:j}=N;V==="ArrowLeft"?s(d-1):V==="ArrowRight"?s(d+1):V==="z"&&(B||j)&&N.preventDefault(),M()},L=N=>{N.key==="Backspace"&&!n&&s(d-1),M()};return _.createElement(eS,Object.assign({type:p===!0?"password":"text"},i,{ref:T,value:x,onInput:S,onFocus:M,onKeyDown:$,onKeyUp:L,onMouseDown:M,onMouseUp:M}))});var Jle=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};function db(e){return(e||"").split("")}const Qle=_.forwardRef((e,t)=>{const{prefixCls:n,length:r=6,size:s,defaultValue:d,value:p,onChange:i,formatter:x,variant:S,disabled:T,status:M,autoFocus:$,mask:L,type:N,onInput:V,inputMode:B}=e,j=Jle(e,["prefixCls","length","size","defaultValue","value","onChange","formatter","variant","disabled","status","autoFocus","mask","type","onInput","inputMode"]),{getPrefixCls:H,direction:W}=_.useContext(fr),X=H("otp",n),ee=Ko(j,{aria:!0,data:!0,attr:!0}),J=Qo(X),[Y,re,se]=Xle(X,J),ae=as(ze=>s??ze),ce=_.useContext(js),Ce=Dm(ce.status,M),we=_.useMemo(()=>Object.assign(Object.assign({},ce),{status:Ce,hasFeedback:!1,feedbackIcon:null}),[ce,Ce]),ge=_.useRef(null),ve=_.useRef({});_.useImperativeHandle(t,()=>({focus:()=>{var ze;(ze=ve.current[0])===null||ze===void 0||ze.focus()},blur:()=>{var ze;for(let Je=0;Je<r;Je+=1)(ze=ve.current[Je])===null||ze===void 0||ze.blur()},nativeElement:ge.current}));const de=ze=>x?x(ze):ze,[pe,fe]=_.useState(db(de(d||"")));_.useEffect(()=>{p!==void 0&&fe(db(p))},[p]);const me=Zr(ze=>{fe(ze),V&&V(ze),i&&ze.length===r&&ze.every(Je=>Je)&&ze.some((Je,yt)=>pe[yt]!==Je)&&i(ze.join(""))}),Ie=Zr((ze,Je)=>{let yt=un(pe);for(let gt=0;gt<ze;gt+=1)yt[gt]||(yt[gt]="");Je.length<=1?yt[ze]=Je:yt=yt.slice(0,ze).concat(db(Je)),yt=yt.slice(0,r);for(let gt=yt.length-1;gt>=0&&!yt[gt];gt-=1)yt.pop();const at=de(yt.map(gt=>gt||" ").join(""));return yt=db(at).map((gt,wt)=>gt===" "&&!yt[wt]?yt[wt]:gt),yt}),Me=(ze,Je)=>{var yt;const at=Ie(ze,Je),gt=Math.min(ze+Je.length,r-1);gt!==ze&&((yt=ve.current[gt])===null||yt===void 0||yt.focus()),me(at)},Be=ze=>{var Je;(Je=ve.current[ze])===null||Je===void 0||Je.focus()},$e={variant:S,disabled:T,status:Ce,mask:L,type:N,inputMode:B};return Y(_.createElement("div",Object.assign({},ee,{ref:ge,className:pt(X,{[`${X}-sm`]:ae==="small",[`${X}-lg`]:ae==="large",[`${X}-rtl`]:W==="rtl"},se,re)}),_.createElement(js.Provider,{value:we},Array.from({length:r}).map((ze,Je)=>{const yt=`otp-${Je}`,at=pe[Je]||"";return _.createElement(Yle,Object.assign({ref:gt=>{ve.current[Je]=gt},key:yt,index:Je,size:ae,htmlSize:1,className:`${X}-input`,onChange:Me,value:at,onActiveChange:Be,autoFocus:Je===0&&$},$e))}))))});var ece={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},tce=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:ece}))},nce=_.forwardRef(tce),rce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},ice=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:rce}))},oce=_.forwardRef(ice),ace=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const sce=e=>e?_.createElement(oce,null):_.createElement(nce,null),lce={click:"onClick",hover:"onMouseOver"},cce=_.forwardRef((e,t)=>{const{disabled:n,action:r="click",visibilityToggle:s=!0,iconRender:d=sce}=e,p=_.useContext(ul),i=n??p,x=typeof s=="object"&&s.visible!==void 0,[S,T]=_.useState(()=>x?s.visible:!1),M=_.useRef(null);_.useEffect(()=>{x&&T(s.visible)},[x,s]);const $=iV(M),L=()=>{i||(S&&$(),T(ae=>{var ce;const Ce=!ae;return typeof s=="object"&&((ce=s.onVisibleChange)===null||ce===void 0||ce.call(s,Ce)),Ce}))},N=ae=>{const ce=lce[r]||"",Ce=d(S),we={[ce]:L,className:`${ae}-icon`,key:"passwordIcon",onMouseDown:ge=>{ge.preventDefault()},onMouseUp:ge=>{ge.preventDefault()}};return _.cloneElement(_.isValidElement(Ce)?Ce:_.createElement("span",null,Ce),we)},{className:V,prefixCls:B,inputPrefixCls:j,size:H}=e,W=ace(e,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:X}=_.useContext(fr),ee=X("input",j),J=X("input-password",B),Y=s&&N(J),re=pt(J,V,{[`${J}-${H}`]:!!H}),se=Object.assign(Object.assign({},vo(W,["suffix","iconRender","visibilityToggle"])),{type:S?"text":"password",className:re,prefixCls:ee,suffix:Y});return H&&(se.size=H),_.createElement(eS,Object.assign({ref:Ua(t,M)},se))});var uce=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const dce=_.forwardRef((e,t)=>{const{prefixCls:n,inputPrefixCls:r,className:s,size:d,suffix:p,enterButton:i=!1,addonAfter:x,loading:S,disabled:T,onSearch:M,onChange:$,onCompositionStart:L,onCompositionEnd:N}=e,V=uce(e,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:B,direction:j}=_.useContext(fr),H=_.useRef(!1),W=B("input-search",n),X=B("input",r),{compactSize:ee}=cf(W,j),J=as(Ie=>{var Me;return(Me=d??ee)!==null&&Me!==void 0?Me:Ie}),Y=_.useRef(null),re=Ie=>{Ie!=null&&Ie.target&&Ie.type==="click"&&M&&M(Ie.target.value,Ie,{source:"clear"}),$==null||$(Ie)},se=Ie=>{var Me;document.activeElement===((Me=Y.current)===null||Me===void 0?void 0:Me.input)&&Ie.preventDefault()},ae=Ie=>{var Me,Be;M&&M((Be=(Me=Y.current)===null||Me===void 0?void 0:Me.input)===null||Be===void 0?void 0:Be.value,Ie,{source:"input"})},ce=Ie=>{H.current||S||ae(Ie)},Ce=typeof i=="boolean"?_.createElement(FP,null):null,we=`${W}-button`;let ge;const ve=i||{},de=ve.type&&ve.type.__ANT_BUTTON===!0;de||ve.type==="button"?ge=ns(ve,Object.assign({onMouseDown:se,onClick:Ie=>{var Me,Be;(Be=(Me=ve==null?void 0:ve.props)===null||Me===void 0?void 0:Me.onClick)===null||Be===void 0||Be.call(Me,Ie),ae(Ie)},key:"enterButton"},de?{className:we,size:J}:{})):ge=_.createElement(Di,{className:we,type:i?"primary":void 0,size:J,disabled:T,key:"enterButton",onMouseDown:se,onClick:ae,loading:S,icon:Ce},i),x&&(ge=[ge,ns(x,{key:"addonAfter"})]);const pe=pt(W,{[`${W}-rtl`]:j==="rtl",[`${W}-${J}`]:!!J,[`${W}-with-button`]:!!i},s),fe=Ie=>{H.current=!0,L==null||L(Ie)},me=Ie=>{H.current=!1,N==null||N(Ie)};return _.createElement(eS,Object.assign({ref:Ua(Y,t),onPressEnter:ce},V,{size:J,onCompositionStart:fe,onCompositionEnd:me,prefixCls:X,addonAfter:ge,suffix:p,onChange:re,className:pe,disabled:T}))});var hce=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,fce=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],dE={},As;function pce(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&dE[n])return dE[n];var r=window.getComputedStyle(e),s=r.getPropertyValue("box-sizing")||r.getPropertyValue("-moz-box-sizing")||r.getPropertyValue("-webkit-box-sizing"),d=parseFloat(r.getPropertyValue("padding-bottom"))+parseFloat(r.getPropertyValue("padding-top")),p=parseFloat(r.getPropertyValue("border-bottom-width"))+parseFloat(r.getPropertyValue("border-top-width")),i=fce.map(function(S){return"".concat(S,":").concat(r.getPropertyValue(S))}).join(";"),x={sizingStyle:i,paddingSize:d,borderSize:p,boxSizing:s};return t&&n&&(dE[n]=x),x}function mce(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;As||(As=document.createElement("textarea"),As.setAttribute("tab-index","-1"),As.setAttribute("aria-hidden","true"),As.setAttribute("name","hiddenTextarea"),document.body.appendChild(As)),e.getAttribute("wrap")?As.setAttribute("wrap",e.getAttribute("wrap")):As.removeAttribute("wrap");var s=pce(e,t),d=s.paddingSize,p=s.borderSize,i=s.boxSizing,x=s.sizingStyle;As.setAttribute("style","".concat(x,";").concat(hce)),As.value=e.value||e.placeholder||"";var S=void 0,T=void 0,M,$=As.scrollHeight;if(i==="border-box"?$+=p:i==="content-box"&&($-=d),n!==null||r!==null){As.value=" ";var L=As.scrollHeight-d;n!==null&&(S=L*n,i==="border-box"&&(S=S+d+p),$=Math.max(S,$)),r!==null&&(T=L*r,i==="border-box"&&(T=T+d+p),M=$>T?"":"hidden",$=Math.min(T,$))}var N={height:$,overflowY:M,resize:"none"};return S&&(N.minHeight=S),T&&(N.maxHeight=T),N}var gce=["prefixCls","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],hE=0,fE=1,pE=2,vce=_.forwardRef(function(e,t){var n=e,r=n.prefixCls,s=n.defaultValue,d=n.value,p=n.autoSize,i=n.onResize,x=n.className,S=n.style,T=n.disabled,M=n.onChange;n.onInternalAutoSize;var $=Er(n,gce),L=Bi(s,{value:d,postState:function(ze){return ze??""}}),N=ot(L,2),V=N[0],B=N[1],j=function(ze){B(ze.target.value),M==null||M(ze)},H=_.useRef();_.useImperativeHandle(t,function(){return{textArea:H.current}});var W=_.useMemo(function(){return p&&cr(p)==="object"?[p.minRows,p.maxRows]:[]},[p]),X=ot(W,2),ee=X[0],J=X[1],Y=!!p,re=function(){try{if(document.activeElement===H.current){var ze=H.current,Je=ze.selectionStart,yt=ze.selectionEnd,at=ze.scrollTop;H.current.setSelectionRange(Je,yt),H.current.scrollTop=at}}catch{}},se=_.useState(pE),ae=ot(se,2),ce=ae[0],Ce=ae[1],we=_.useState(),ge=ot(we,2),ve=ge[0],de=ge[1],pe=function(){Ce(hE)};Xr(function(){Y&&pe()},[d,ee,J,Y]),Xr(function(){if(ce===hE)Ce(fE);else if(ce===fE){var $e=mce(H.current,!1,ee,J);Ce(pE),de($e)}else re()},[ce]);var fe=_.useRef(),me=function(){ui.cancel(fe.current)},Ie=function(ze){ce===pE&&(i==null||i(ze),p&&(me(),fe.current=ui(function(){pe()})))};_.useEffect(function(){return me},[]);var Me=Y?ve:null,Be=We(We({},S),Me);return(ce===hE||ce===fE)&&(Be.overflowY="hidden",Be.overflowX="hidden"),_.createElement(ga,{onResize:Ie,disabled:!(p||i)},_.createElement("textarea",qt({},$,{ref:H,style:Be,className:pt(r,x,De({},"".concat(r,"-disabled"),T)),disabled:T,value:V,onChange:j})))}),yce=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize","onClear","onPressEnter","readOnly","autoSize","onKeyDown"],_ce=Ft.forwardRef(function(e,t){var n,r=e.defaultValue,s=e.value,d=e.onFocus,p=e.onBlur,i=e.onChange,x=e.allowClear,S=e.maxLength,T=e.onCompositionStart,M=e.onCompositionEnd,$=e.suffix,L=e.prefixCls,N=L===void 0?"rc-textarea":L,V=e.showCount,B=e.count,j=e.className,H=e.style,W=e.disabled,X=e.hidden,ee=e.classNames,J=e.styles,Y=e.onResize,re=e.onClear,se=e.onPressEnter,ae=e.readOnly,ce=e.autoSize,Ce=e.onKeyDown,we=Er(e,yce),ge=Bi(r,{value:s,defaultValue:r}),ve=ot(ge,2),de=ve[0],pe=ve[1],fe=de==null?"":String(de),me=Ft.useState(!1),Ie=ot(me,2),Me=Ie[0],Be=Ie[1],$e=Ft.useRef(!1),ze=Ft.useState(null),Je=ot(ze,2),yt=Je[0],at=Je[1],gt=_.useRef(null),wt=_.useRef(null),Pe=function(){var Ut;return(Ut=wt.current)===null||Ut===void 0?void 0:Ut.textArea},mt=function(){Pe().focus()};_.useImperativeHandle(t,function(){var nn;return{resizableTextArea:wt.current,focus:mt,blur:function(){Pe().blur()},nativeElement:((nn=gt.current)===null||nn===void 0?void 0:nn.nativeElement)||Pe()}}),_.useEffect(function(){Be(function(nn){return!W&&nn})},[W]);var dt=Ft.useState(null),ht=ot(dt,2),je=ht[0],St=ht[1];Ft.useEffect(function(){if(je){var nn;(nn=Pe()).setSelectionRange.apply(nn,un(je))}},[je]);var Ct=nV(B,V),Lt=(n=Ct.max)!==null&&n!==void 0?n:S,At=Number(Lt)>0,Yt=Ct.strategy(fe),Kt=!!Lt&&Yt>Lt,Dt=function(Ut,cn){var an=cn;!$e.current&&Ct.exceedFormatter&&Ct.max&&Ct.strategy(cn)>Ct.max&&(an=Ct.exceedFormatter(cn,{max:Ct.max}),cn!==an&&St([Pe().selectionStart||0,Pe().selectionEnd||0])),pe(an),k1(Ut.currentTarget,Ut,i,an)},Wt=function(Ut){$e.current=!0,T==null||T(Ut)},Vt=function(Ut){$e.current=!1,Dt(Ut,Ut.currentTarget.value),M==null||M(Ut)},Rt=function(Ut){Dt(Ut,Ut.target.value)},dn=function(Ut){Ut.key==="Enter"&&se&&se(Ut),Ce==null||Ce(Ut)},hn=function(Ut){Be(!0),d==null||d(Ut)},Pn=function(Ut){Be(!1),p==null||p(Ut)},Dn=function(Ut){pe(""),mt(),k1(Pe(),Ut,i)},yn=$,Rn;Ct.show&&(Ct.showFormatter?Rn=Ct.showFormatter({value:fe,count:Yt,maxLength:Lt}):Rn="".concat(Yt).concat(At?" / ".concat(Lt):""),yn=Ft.createElement(Ft.Fragment,null,yn,Ft.createElement("span",{className:pt("".concat(N,"-data-count"),ee==null?void 0:ee.count),style:J==null?void 0:J.count},Rn)));var kn=function(Ut){var cn;Y==null||Y(Ut),(cn=Pe())!==null&&cn!==void 0&&cn.style.height&&at(!0)},Cn=!ce&&!V&&!x;return Ft.createElement(tV,{ref:gt,value:fe,allowClear:x,handleReset:Dn,suffix:yn,prefixCls:N,classNames:We(We({},ee),{},{affixWrapper:pt(ee==null?void 0:ee.affixWrapper,De(De({},"".concat(N,"-show-count"),V),"".concat(N,"-textarea-allow-clear"),x))}),disabled:W,focused:Me,className:pt(j,Kt&&"".concat(N,"-out-of-range")),style:We(We({},H),yt&&!Cn?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof Rn=="string"?Rn:void 0}},hidden:X,readOnly:ae,onClear:re},Ft.createElement(vce,qt({},we,{autoSize:ce,maxLength:S,onKeyDown:dn,onChange:Rt,onFocus:hn,onBlur:Pn,onCompositionStart:Wt,onCompositionEnd:Vt,className:pt(ee==null?void 0:ee.textarea),style:We(We({},J==null?void 0:J.textarea),{},{resize:H==null?void 0:H.resize}),disabled:W,prefixCls:N,onResize:kn,ref:wt,readOnly:ae})))}),xce=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const oV=_.forwardRef((e,t)=>{var n,r;const{prefixCls:s,bordered:d=!0,size:p,disabled:i,status:x,allowClear:S,classNames:T,rootClassName:M,className:$,style:L,styles:N,variant:V}=e,B=xce(e,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant"]),{getPrefixCls:j,direction:H,textArea:W}=_.useContext(fr),X=as(p),ee=_.useContext(ul),J=i??ee,{status:Y,hasFeedback:re,feedbackIcon:se}=_.useContext(js),ae=Dm(Y,x),ce=_.useRef(null);_.useImperativeHandle(t,()=>{var Ie;return{resizableTextArea:(Ie=ce.current)===null||Ie===void 0?void 0:Ie.resizableTextArea,focus:Me=>{var Be,$e;eV(($e=(Be=ce.current)===null||Be===void 0?void 0:Be.resizableTextArea)===null||$e===void 0?void 0:$e.textArea,Me)},blur:()=>{var Me;return(Me=ce.current)===null||Me===void 0?void 0:Me.blur()}}});const Ce=j("input",s),we=Qo(Ce),[ge,ve,de]=aR(Ce,we),[pe,fe]=$m("textArea",V,d),me=rV(S??(W==null?void 0:W.allowClear));return ge(_.createElement(_ce,Object.assign({autoComplete:W==null?void 0:W.autoComplete},B,{style:Object.assign(Object.assign({},W==null?void 0:W.style),L),styles:Object.assign(Object.assign({},W==null?void 0:W.styles),N),disabled:J,allowClear:me,className:pt(de,we,$,M,W==null?void 0:W.className),classNames:Object.assign(Object.assign(Object.assign({},T),W==null?void 0:W.classNames),{textarea:pt({[`${Ce}-sm`]:X==="small",[`${Ce}-lg`]:X==="large"},ve,T==null?void 0:T.textarea,(n=W==null?void 0:W.classNames)===null||n===void 0?void 0:n.textarea),variant:pt({[`${Ce}-${pe}`]:fe},vm(Ce,ae)),affixWrapper:pt(`${Ce}-textarea-affix-wrapper`,{[`${Ce}-affix-wrapper-rtl`]:H==="rtl",[`${Ce}-affix-wrapper-sm`]:X==="small",[`${Ce}-affix-wrapper-lg`]:X==="large",[`${Ce}-textarea-show-count`]:e.showCount||((r=e.count)===null||r===void 0?void 0:r.show)},ve)}),prefixCls:Ce,suffix:re&&_.createElement("span",{className:`${Ce}-textarea-suffix`},se),ref:ce})))}),uu=eS;uu.Group=Wle;uu.Search=dce;uu.TextArea=oV;uu.Password=cce;uu.OTP=Qle;var bce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"}}]},name:"calendar",theme:"outlined"},wce=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:bce}))},aV=_.forwardRef(wce),Sce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},Cce=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:Sce}))},sV=_.forwardRef(Cce),Ece={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M873.1 596.2l-164-208A32 32 0 00684 376h-64.8c-6.7 0-10.4 7.7-6.3 13l144.3 183H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h695.9c26.8 0 41.7-30.8 25.2-51.8z"}}]},name:"swap-right",theme:"outlined"},Tce=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:Ece}))},Ice=_.forwardRef(Tce);function Mce(e,t,n){return n!==void 0?n:t==="year"&&e.lang.yearPlaceholder?e.lang.yearPlaceholder:t==="quarter"&&e.lang.quarterPlaceholder?e.lang.quarterPlaceholder:t==="month"&&e.lang.monthPlaceholder?e.lang.monthPlaceholder:t==="week"&&e.lang.weekPlaceholder?e.lang.weekPlaceholder:t==="time"&&e.timePickerLocale.placeholder?e.timePickerLocale.placeholder:e.lang.placeholder}function Pce(e,t,n){return n!==void 0?n:t==="year"&&e.lang.yearPlaceholder?e.lang.rangeYearPlaceholder:t==="quarter"&&e.lang.quarterPlaceholder?e.lang.rangeQuarterPlaceholder:t==="month"&&e.lang.monthPlaceholder?e.lang.rangeMonthPlaceholder:t==="week"&&e.lang.weekPlaceholder?e.lang.rangeWeekPlaceholder:t==="time"&&e.timePickerLocale.placeholder?e.timePickerLocale.rangePlaceholder:e.lang.rangePlaceholder}function lV(e,t){const{allowClear:n=!0}=e,{clearIcon:r,removeIcon:s}=l6(Object.assign(Object.assign({},e),{prefixCls:t,componentName:"DatePicker"}));return[_.useMemo(()=>n===!1?!1:Object.assign({clearIcon:r},n===!0?{}:n),[n,r]),s]}const[Rce,Oce]=["week","WeekPicker"],[Ace,Dce]=["month","MonthPicker"],[$ce,kce]=["year","YearPicker"],[zce,Lce]=["quarter","QuarterPicker"],[cV,Hz]=["time","TimePicker"],Nce=e=>_.createElement(Di,Object.assign({size:"small",type:"primary"},e));function uV(e){return _.useMemo(()=>Object.assign({button:Nce},e),[e])}var Fce=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Bce=e=>_.forwardRef((n,r)=>{var s;const{prefixCls:d,getPopupContainer:p,components:i,className:x,style:S,placement:T,size:M,disabled:$,bordered:L=!0,placeholder:N,popupClassName:V,dropdownClassName:B,status:j,rootClassName:H,variant:W,picker:X}=n,ee=Fce(n,["prefixCls","getPopupContainer","components","className","style","placement","size","disabled","bordered","placeholder","popupClassName","dropdownClassName","status","rootClassName","variant","picker"]),J=_.useRef(null),{getPrefixCls:Y,direction:re,getPopupContainer:se,rangePicker:ae}=_.useContext(fr),ce=Y("picker",d),{compactSize:Ce,compactItemClassnames:we}=cf(ce,re),ge=Y(),[ve,de]=$m("rangePicker",W,L),pe=Qo(ce),[fe,me,Ie]=Nj(ce,pe),[Me]=lV(n,ce),Be=uV(i),$e=as(je=>{var St;return(St=M??Ce)!==null&&St!==void 0?St:je}),ze=_.useContext(ul),Je=$??ze,yt=_.useContext(js),{hasFeedback:at,status:gt,feedbackIcon:wt}=yt,Pe=_.createElement(_.Fragment,null,X===cV?_.createElement(sV,null):_.createElement(aV,null),at&&wt);_.useImperativeHandle(r,()=>J.current);const[mt]=Zl("Calendar",x1),dt=Object.assign(Object.assign({},mt),n.locale),[ht]=jd("DatePicker",(s=n.popupStyle)===null||s===void 0?void 0:s.zIndex);return fe(_.createElement(Dd,{space:!0},_.createElement(Iae,Object.assign({separator:_.createElement("span",{"aria-label":"to",className:`${ce}-separator`},_.createElement(Ice,null)),disabled:Je,ref:J,placement:T,placeholder:Pce(dt,X,N),suffixIcon:Pe,prevIcon:_.createElement("span",{className:`${ce}-prev-icon`}),nextIcon:_.createElement("span",{className:`${ce}-next-icon`}),superPrevIcon:_.createElement("span",{className:`${ce}-super-prev-icon`}),superNextIcon:_.createElement("span",{className:`${ce}-super-next-icon`}),transitionName:`${ge}-slide-up`,picker:X},ee,{className:pt({[`${ce}-${$e}`]:$e,[`${ce}-${ve}`]:de},vm(ce,Dm(gt,j),at),me,we,x,ae==null?void 0:ae.className,Ie,pe,H),style:Object.assign(Object.assign({},ae==null?void 0:ae.style),S),locale:dt.lang,prefixCls:ce,getPopupContainer:p||se,generateConfig:e,components:Be,direction:re,classNames:{popup:pt(me,V||B,Ie,pe,H)},styles:{popup:Object.assign(Object.assign({},n.popupStyle),{zIndex:ht})},allowClear:Me}))))});var jce=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Vce=e=>{const t=(x,S)=>{const T=S===Hz?"timePicker":"datePicker";return _.forwardRef(($,L)=>{var N;const{prefixCls:V,getPopupContainer:B,components:j,style:H,className:W,rootClassName:X,size:ee,bordered:J,placement:Y,placeholder:re,popupClassName:se,dropdownClassName:ae,disabled:ce,status:Ce,variant:we,onCalendarChange:ge}=$,ve=jce($,["prefixCls","getPopupContainer","components","style","className","rootClassName","size","bordered","placement","placeholder","popupClassName","dropdownClassName","disabled","status","variant","onCalendarChange"]),{getPrefixCls:de,direction:pe,getPopupContainer:fe,[T]:me}=_.useContext(fr),Ie=de("picker",V),{compactSize:Me,compactItemClassnames:Be}=cf(Ie,pe),$e=_.useRef(null),[ze,Je]=$m("datePicker",we,J),yt=Qo(Ie),[at,gt,wt]=Nj(Ie,yt);_.useImperativeHandle(L,()=>$e.current);const Pe={showToday:!0},mt=x||$.picker,dt=de(),{onSelect:ht,multiple:je}=ve,St=ht&&x==="time"&&!je,Ct=(kn,Cn,nn)=>{ge==null||ge(kn,Cn,nn),St&&ht(kn)},[Lt,At]=lV($,Ie),Yt=uV(j),Kt=as(kn=>{var Cn;return(Cn=ee??Me)!==null&&Cn!==void 0?Cn:kn}),Dt=_.useContext(ul),Wt=ce??Dt,Vt=_.useContext(js),{hasFeedback:Rt,status:dn,feedbackIcon:hn}=Vt,Pn=_.createElement(_.Fragment,null,mt==="time"?_.createElement(sV,null):_.createElement(aV,null),Rt&&hn),[Dn]=Zl("DatePicker",x1),yn=Object.assign(Object.assign({},Dn),$.locale),[Rn]=jd("DatePicker",(N=$.popupStyle)===null||N===void 0?void 0:N.zIndex);return at(_.createElement(Dd,{space:!0},_.createElement(Dae,Object.assign({ref:$e,placeholder:Mce(yn,mt,re),suffixIcon:Pn,placement:Y,prevIcon:_.createElement("span",{className:`${Ie}-prev-icon`}),nextIcon:_.createElement("span",{className:`${Ie}-next-icon`}),superPrevIcon:_.createElement("span",{className:`${Ie}-super-prev-icon`}),superNextIcon:_.createElement("span",{className:`${Ie}-super-next-icon`}),transitionName:`${dt}-slide-up`,picker:x,onCalendarChange:Ct},Pe,ve,{locale:yn.lang,className:pt({[`${Ie}-${Kt}`]:Kt,[`${Ie}-${ze}`]:Je},vm(Ie,Dm(dn,Ce),Rt),gt,Be,me==null?void 0:me.className,W,wt,yt,X),style:Object.assign(Object.assign({},me==null?void 0:me.style),H),prefixCls:Ie,getPopupContainer:B||fe,generateConfig:e,components:Yt,direction:pe,disabled:Wt,classNames:{popup:pt(gt,wt,yt,X,se||ae)},styles:{popup:Object.assign(Object.assign({},$.popupStyle),{zIndex:Rn})},allowClear:Lt,removeIcon:At}))))})},n=t(),r=t(Rce,Oce),s=t(Ace,Dce),d=t($ce,kce),p=t(zce,Lce),i=t(cV,Hz);return{DatePicker:n,WeekPicker:r,MonthPicker:s,YearPicker:d,TimePicker:i,QuarterPicker:p}},dV=e=>{const{DatePicker:t,WeekPicker:n,MonthPicker:r,YearPicker:s,TimePicker:d,QuarterPicker:p}=Vce(e),i=Bce(e),x=t;return x.WeekPicker=n,x.MonthPicker=r,x.YearPicker=s,x.RangePicker=i,x.TimePicker=d,x.QuarterPicker=p,x},Ud=dV(zoe),Hce=Py(Ud,"picker",null);Ud._InternalPanelDoNotUseOrYouWillBeFired=Hce;const Uce=Py(Ud.RangePicker,"picker",null);Ud._InternalRangePanelDoNotUseOrYouWillBeFired=Uce;Ud.generatePicker=dV;var Uz=_.createContext(null),hV=_.createContext({}),Wce=["prefixCls","className","containerRef"],Gce=function(t){var n=t.prefixCls,r=t.className,s=t.containerRef,d=Er(t,Wce),p=_.useContext(hV),i=p.panel,x=lu(i,s);return _.createElement("div",qt({className:pt("".concat(n,"-content"),r),role:"dialog",ref:x},Ko(t,{aria:!0}),{"aria-modal":"true"},d))};function Wz(e){return typeof e=="string"&&String(Number(e))===e?(go(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(e)):e}var Gz={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function qce(e,t){var n,r,s,d=e.prefixCls,p=e.open,i=e.placement,x=e.inline,S=e.push,T=e.forceRender,M=e.autoFocus,$=e.keyboard,L=e.classNames,N=e.rootClassName,V=e.rootStyle,B=e.zIndex,j=e.className,H=e.id,W=e.style,X=e.motion,ee=e.width,J=e.height,Y=e.children,re=e.mask,se=e.maskClosable,ae=e.maskMotion,ce=e.maskClassName,Ce=e.maskStyle,we=e.afterOpenChange,ge=e.onClose,ve=e.onMouseEnter,de=e.onMouseOver,pe=e.onMouseLeave,fe=e.onClick,me=e.onKeyDown,Ie=e.onKeyUp,Me=e.styles,Be=e.drawerRender,$e=_.useRef(),ze=_.useRef(),Je=_.useRef();_.useImperativeHandle(t,function(){return $e.current});var yt=function(Wt){var Vt=Wt.keyCode,Rt=Wt.shiftKey;switch(Vt){case gn.TAB:{if(Vt===gn.TAB){if(!Rt&&document.activeElement===Je.current){var dn;(dn=ze.current)===null||dn===void 0||dn.focus({preventScroll:!0})}else if(Rt&&document.activeElement===ze.current){var hn;(hn=Je.current)===null||hn===void 0||hn.focus({preventScroll:!0})}}break}case gn.ESC:{ge&&$&&(Wt.stopPropagation(),ge(Wt));break}}};_.useEffect(function(){if(p&&M){var Dt;(Dt=$e.current)===null||Dt===void 0||Dt.focus({preventScroll:!0})}},[p]);var at=_.useState(!1),gt=ot(at,2),wt=gt[0],Pe=gt[1],mt=_.useContext(Uz),dt;typeof S=="boolean"?dt=S?{}:{distance:0}:dt=S||{};var ht=(n=(r=(s=dt)===null||s===void 0?void 0:s.distance)!==null&&r!==void 0?r:mt==null?void 0:mt.pushDistance)!==null&&n!==void 0?n:180,je=_.useMemo(function(){return{pushDistance:ht,push:function(){Pe(!0)},pull:function(){Pe(!1)}}},[ht]);_.useEffect(function(){if(p){var Dt;mt==null||(Dt=mt.push)===null||Dt===void 0||Dt.call(mt)}else{var Wt;mt==null||(Wt=mt.pull)===null||Wt===void 0||Wt.call(mt)}},[p]),_.useEffect(function(){return function(){var Dt;mt==null||(Dt=mt.pull)===null||Dt===void 0||Dt.call(mt)}},[]);var St=re&&_.createElement(dl,qt({key:"mask"},ae,{visible:p}),function(Dt,Wt){var Vt=Dt.className,Rt=Dt.style;return _.createElement("div",{className:pt("".concat(d,"-mask"),Vt,L==null?void 0:L.mask,ce),style:We(We(We({},Rt),Ce),Me==null?void 0:Me.mask),onClick:se&&p?ge:void 0,ref:Wt})}),Ct=typeof X=="function"?X(i):X,Lt={};if(wt&&ht)switch(i){case"top":Lt.transform="translateY(".concat(ht,"px)");break;case"bottom":Lt.transform="translateY(".concat(-ht,"px)");break;case"left":Lt.transform="translateX(".concat(ht,"px)");break;default:Lt.transform="translateX(".concat(-ht,"px)");break}i==="left"||i==="right"?Lt.width=Wz(ee):Lt.height=Wz(J);var At={onMouseEnter:ve,onMouseOver:de,onMouseLeave:pe,onClick:fe,onKeyDown:me,onKeyUp:Ie},Yt=_.createElement(dl,qt({key:"panel"},Ct,{visible:p,forceRender:T,onVisibleChanged:function(Wt){we==null||we(Wt)},removeOnLeave:!1,leavedClassName:"".concat(d,"-content-wrapper-hidden")}),function(Dt,Wt){var Vt=Dt.className,Rt=Dt.style,dn=_.createElement(Gce,qt({id:H,containerRef:Wt,prefixCls:d,className:pt(j,L==null?void 0:L.content),style:We(We({},W),Me==null?void 0:Me.content)},Ko(e,{aria:!0}),At),Y);return _.createElement("div",qt({className:pt("".concat(d,"-content-wrapper"),L==null?void 0:L.wrapper,Vt),style:We(We(We({},Lt),Rt),Me==null?void 0:Me.wrapper)},Ko(e,{data:!0})),Be?Be(dn):dn)}),Kt=We({},V);return B&&(Kt.zIndex=B),_.createElement(Uz.Provider,{value:je},_.createElement("div",{className:pt(d,"".concat(d,"-").concat(i),N,De(De({},"".concat(d,"-open"),p),"".concat(d,"-inline"),x)),style:Kt,tabIndex:-1,ref:$e,onKeyDown:yt},St,_.createElement("div",{tabIndex:0,ref:ze,style:Gz,"aria-hidden":"true","data-sentinel":"start"}),Yt,_.createElement("div",{tabIndex:0,ref:Je,style:Gz,"aria-hidden":"true","data-sentinel":"end"})))}var Kce=_.forwardRef(qce),Xce=function(t){var n=t.open,r=n===void 0?!1:n,s=t.prefixCls,d=s===void 0?"rc-drawer":s,p=t.placement,i=p===void 0?"right":p,x=t.autoFocus,S=x===void 0?!0:x,T=t.keyboard,M=T===void 0?!0:T,$=t.width,L=$===void 0?378:$,N=t.mask,V=N===void 0?!0:N,B=t.maskClosable,j=B===void 0?!0:B,H=t.getContainer,W=t.forceRender,X=t.afterOpenChange,ee=t.destroyOnClose,J=t.onMouseEnter,Y=t.onMouseOver,re=t.onMouseLeave,se=t.onClick,ae=t.onKeyDown,ce=t.onKeyUp,Ce=t.panelRef,we=_.useState(!1),ge=ot(we,2),ve=ge[0],de=ge[1],pe=_.useState(!1),fe=ot(pe,2),me=fe[0],Ie=fe[1];Xr(function(){Ie(!0)},[]);var Me=me?r:!1,Be=_.useRef(),$e=_.useRef();Xr(function(){Me&&($e.current=document.activeElement)},[Me]);var ze=function(wt){var Pe;if(de(wt),X==null||X(wt),!wt&&$e.current&&!((Pe=Be.current)!==null&&Pe!==void 0&&Pe.contains($e.current))){var mt;(mt=$e.current)===null||mt===void 0||mt.focus({preventScroll:!0})}},Je=_.useMemo(function(){return{panel:Ce}},[Ce]);if(!W&&!ve&&!Me&&ee)return null;var yt={onMouseEnter:J,onMouseOver:Y,onMouseLeave:re,onClick:se,onKeyDown:ae,onKeyUp:ce},at=We(We({},t),{},{open:Me,prefixCls:d,placement:i,autoFocus:S,keyboard:M,width:L,mask:V,maskClosable:j,inline:H===!1,afterOpenChange:ze,ref:Be},yt);return _.createElement(hV.Provider,{value:Je},_.createElement(Aw,{open:Me||W||ve,autoDestroy:!1,getContainer:H,autoLock:V&&(Me||ve)},_.createElement(Kce,at)))};const fV=e=>{var t,n;const{prefixCls:r,title:s,footer:d,extra:p,loading:i,onClose:x,headerStyle:S,bodyStyle:T,footerStyle:M,children:$,classNames:L,styles:N}=e,{drawer:V}=_.useContext(fr),B=_.useCallback(ee=>_.createElement("button",{type:"button",onClick:x,"aria-label":"Close",className:`${r}-close`},ee),[x]),[j,H]=S5(I1(e),I1(V),{closable:!0,closeIconRender:B}),W=_.useMemo(()=>{var ee,J;return!s&&!j?null:_.createElement("div",{style:Object.assign(Object.assign(Object.assign({},(ee=V==null?void 0:V.styles)===null||ee===void 0?void 0:ee.header),S),N==null?void 0:N.header),className:pt(`${r}-header`,{[`${r}-header-close-only`]:j&&!s&&!p},(J=V==null?void 0:V.classNames)===null||J===void 0?void 0:J.header,L==null?void 0:L.header)},_.createElement("div",{className:`${r}-header-title`},H,s&&_.createElement("div",{className:`${r}-title`},s)),p&&_.createElement("div",{className:`${r}-extra`},p))},[j,H,p,S,r,s]),X=_.useMemo(()=>{var ee,J;if(!d)return null;const Y=`${r}-footer`;return _.createElement("div",{className:pt(Y,(ee=V==null?void 0:V.classNames)===null||ee===void 0?void 0:ee.footer,L==null?void 0:L.footer),style:Object.assign(Object.assign(Object.assign({},(J=V==null?void 0:V.styles)===null||J===void 0?void 0:J.footer),M),N==null?void 0:N.footer)},d)},[d,M,r]);return _.createElement(_.Fragment,null,W,_.createElement("div",{className:pt(`${r}-body`,L==null?void 0:L.body,(t=V==null?void 0:V.classNames)===null||t===void 0?void 0:t.body),style:Object.assign(Object.assign(Object.assign({},(n=V==null?void 0:V.styles)===null||n===void 0?void 0:n.body),T),N==null?void 0:N.body)},i?_.createElement(Vd,{active:!0,title:!1,paragraph:{rows:5},className:`${r}-body-skeleton`}):$),X)},Zce=e=>{const t="100%";return{left:`translateX(-${t})`,right:`translateX(${t})`,top:`translateY(-${t})`,bottom:`translateY(${t})`}[e]},pV=(e,t)=>({"&-enter, &-appear":Object.assign(Object.assign({},e),{"&-active":t}),"&-leave":Object.assign(Object.assign({},t),{"&-active":e})}),mV=(e,t)=>Object.assign({"&-enter, &-appear, &-leave":{"&-start":{transition:"none"},"&-active":{transition:`all ${t}`}}},pV({opacity:e},{opacity:1})),Yce=(e,t)=>[mV(.7,t),pV({transform:Zce(e)},{transform:"none"})],Jce=e=>{const{componentCls:t,motionDurationSlow:n}=e;return{[t]:{[`${t}-mask-motion`]:mV(0,n),[`${t}-panel-motion`]:["left","right","top","bottom"].reduce((r,s)=>Object.assign(Object.assign({},r),{[`&-${s}`]:Yce(s,n)}),{})}}},Qce=e=>{const{borderRadiusSM:t,componentCls:n,zIndexPopup:r,colorBgMask:s,colorBgElevated:d,motionDurationSlow:p,motionDurationMid:i,paddingXS:x,padding:S,paddingLG:T,fontSizeLG:M,lineHeightLG:$,lineWidth:L,lineType:N,colorSplit:V,marginXS:B,colorIcon:j,colorIconHover:H,colorBgTextHover:W,colorBgTextActive:X,colorText:ee,fontWeightStrong:J,footerPaddingBlock:Y,footerPaddingInline:re,calc:se}=e,ae=`${n}-content-wrapper`;return{[n]:{position:"fixed",inset:0,zIndex:r,pointerEvents:"none",color:ee,"&-pure":{position:"relative",background:d,display:"flex",flexDirection:"column",[`&${n}-left`]:{boxShadow:e.boxShadowDrawerLeft},[`&${n}-right`]:{boxShadow:e.boxShadowDrawerRight},[`&${n}-top`]:{boxShadow:e.boxShadowDrawerUp},[`&${n}-bottom`]:{boxShadow:e.boxShadowDrawerDown}},"&-inline":{position:"absolute"},[`${n}-mask`]:{position:"absolute",inset:0,zIndex:r,background:s,pointerEvents:"auto"},[ae]:{position:"absolute",zIndex:r,maxWidth:"100vw",transition:`all ${p}`,"&-hidden":{display:"none"}},[`&-left > ${ae}`]:{top:0,bottom:0,left:{_skip_check_:!0,value:0},boxShadow:e.boxShadowDrawerLeft},[`&-right > ${ae}`]:{top:0,right:{_skip_check_:!0,value:0},bottom:0,boxShadow:e.boxShadowDrawerRight},[`&-top > ${ae}`]:{top:0,insetInline:0,boxShadow:e.boxShadowDrawerUp},[`&-bottom > ${ae}`]:{bottom:0,insetInline:0,boxShadow:e.boxShadowDrawerDown},[`${n}-content`]:{display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"auto",background:d,pointerEvents:"auto"},[`${n}-header`]:{display:"flex",flex:0,alignItems:"center",padding:`${nt(S)} ${nt(T)}`,fontSize:M,lineHeight:$,borderBottom:`${nt(L)} ${N} ${V}`,"&-title":{display:"flex",flex:1,alignItems:"center",minWidth:0,minHeight:0}},[`${n}-extra`]:{flex:"none"},[`${n}-close`]:Object.assign({display:"inline-flex",width:se(M).add(x).equal(),height:se(M).add(x).equal(),borderRadius:t,justifyContent:"center",alignItems:"center",marginInlineEnd:B,color:j,fontWeight:J,fontSize:M,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",textDecoration:"none",background:"transparent",border:0,cursor:"pointer",transition:`all ${i}`,textRendering:"auto","&:hover":{color:H,backgroundColor:W,textDecoration:"none"},"&:active":{backgroundColor:X}},au(e)),[`${n}-title`]:{flex:1,margin:0,fontWeight:e.fontWeightStrong,fontSize:M,lineHeight:$},[`${n}-body`]:{flex:1,minWidth:0,minHeight:0,padding:T,overflow:"auto",[`${n}-body-skeleton`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center"}},[`${n}-footer`]:{flexShrink:0,padding:`${nt(Y)} ${nt(re)}`,borderTop:`${nt(L)} ${N} ${V}`},"&-rtl":{direction:"rtl"}}}},eue=e=>({zIndexPopup:e.zIndexPopupBase,footerPaddingBlock:e.paddingXS,footerPaddingInline:e.padding}),gV=Qi("Drawer",e=>{const t=pi(e,{});return[Qce(t),Jce(t)]},eue);var vV=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const tue={distance:180},yV=e=>{const{rootClassName:t,width:n,height:r,size:s="default",mask:d=!0,push:p=tue,open:i,afterOpenChange:x,onClose:S,prefixCls:T,getContainer:M,style:$,className:L,visible:N,afterVisibleChange:V,maskStyle:B,drawerStyle:j,contentWrapperStyle:H}=e,W=vV(e,["rootClassName","width","height","size","mask","push","open","afterOpenChange","onClose","prefixCls","getContainer","style","className","visible","afterVisibleChange","maskStyle","drawerStyle","contentWrapperStyle"]),{getPopupContainer:X,getPrefixCls:ee,direction:J,drawer:Y}=_.useContext(fr),re=ee("drawer",T),[se,ae,ce]=gV(re),Ce=M===void 0&&X?()=>X(document.body):M,we=pt({"no-mask":!d,[`${re}-rtl`]:J==="rtl"},t,ae,ce),ge=_.useMemo(()=>n??(s==="large"?736:378),[n,s]),ve=_.useMemo(()=>r??(s==="large"?736:378),[r,s]),de={motionName:Sc(re,"mask-motion"),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500},pe=Je=>({motionName:Sc(re,`panel-motion-${Je}`),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500}),fe=E5(),[me,Ie]=jd("Drawer",W.zIndex),{classNames:Me={},styles:Be={}}=W,{classNames:$e={},styles:ze={}}=Y||{};return se(_.createElement(Dd,{form:!0,space:!0},_.createElement(by.Provider,{value:Ie},_.createElement(Xce,Object.assign({prefixCls:re,onClose:S,maskMotion:de,motion:pe},W,{classNames:{mask:pt(Me.mask,$e.mask),content:pt(Me.content,$e.content),wrapper:pt(Me.wrapper,$e.wrapper)},styles:{mask:Object.assign(Object.assign(Object.assign({},Be.mask),B),ze.mask),content:Object.assign(Object.assign(Object.assign({},Be.content),j),ze.content),wrapper:Object.assign(Object.assign(Object.assign({},Be.wrapper),H),ze.wrapper)},open:i??N,mask:d,push:p,width:ge,height:ve,style:Object.assign(Object.assign({},Y==null?void 0:Y.style),$),className:pt(Y==null?void 0:Y.className,L),rootClassName:we,getContainer:Ce,afterOpenChange:x??V,panelRef:fe,zIndex:me}),_.createElement(fV,Object.assign({prefixCls:re},W,{onClose:S}))))))},nue=e=>{const{prefixCls:t,style:n,className:r,placement:s="right"}=e,d=vV(e,["prefixCls","style","className","placement"]),{getPrefixCls:p}=_.useContext(fr),i=p("drawer",t),[x,S,T]=gV(i),M=pt(i,`${i}-pure`,`${i}-${s}`,S,T,r);return x(_.createElement("div",{className:M,style:n},_.createElement(fV,Object.assign({prefixCls:i},d))))};yV._InternalPanelDoNotUseOrYouWillBeFired=nue;function qz(e){return["small","middle","large"].includes(e)}function Kz(e){return e?typeof e=="number"&&!Number.isNaN(e):!1}const _V=Ft.createContext({latestIndex:0}),rue=_V.Provider,iue=e=>{let{className:t,index:n,children:r,split:s,style:d}=e;const{latestIndex:p}=_.useContext(_V);return r==null?null:_.createElement(_.Fragment,null,_.createElement("div",{className:t,style:d},r),n<p&&s&&_.createElement("span",{className:`${t}-split`},s))};var oue=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const aue=_.forwardRef((e,t)=>{var n,r,s;const{getPrefixCls:d,space:p,direction:i}=_.useContext(fr),{size:x=(n=p==null?void 0:p.size)!==null&&n!==void 0?n:"small",align:S,className:T,rootClassName:M,children:$,direction:L="horizontal",prefixCls:N,split:V,style:B,wrap:j=!1,classNames:H,styles:W}=e,X=oue(e,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),[ee,J]=Array.isArray(x)?x:[x,x],Y=qz(J),re=qz(ee),se=Kz(J),ae=Kz(ee),ce=Ha($,{keepEmpty:!0}),Ce=S===void 0&&L==="horizontal"?"center":S,we=d("space",N),[ge,ve,de]=t5(we),pe=pt(we,p==null?void 0:p.className,ve,`${we}-${L}`,{[`${we}-rtl`]:i==="rtl",[`${we}-align-${Ce}`]:Ce,[`${we}-gap-row-${J}`]:Y,[`${we}-gap-col-${ee}`]:re},T,M,de),fe=pt(`${we}-item`,(r=H==null?void 0:H.item)!==null&&r!==void 0?r:(s=p==null?void 0:p.classNames)===null||s===void 0?void 0:s.item);let me=0;const Ie=ce.map(($e,ze)=>{var Je,yt;$e!=null&&(me=ze);const at=($e==null?void 0:$e.key)||`${fe}-${ze}`;return _.createElement(iue,{className:fe,key:at,index:ze,split:V,style:(Je=W==null?void 0:W.item)!==null&&Je!==void 0?Je:(yt=p==null?void 0:p.styles)===null||yt===void 0?void 0:yt.item},$e)}),Me=_.useMemo(()=>({latestIndex:me}),[me]);if(ce.length===0)return null;const Be={};return j&&(Be.flexWrap="wrap"),!re&&ae&&(Be.columnGap=ee),!Y&&se&&(Be.rowGap=J),ge(_.createElement("div",Object.assign({ref:t,className:pe,style:Object.assign(Object.assign(Object.assign({},Be),p==null?void 0:p.style),B)},X),_.createElement(rue,{value:Me},Ie)))}),Ec=aue;Ec.Compact=oJ;var sue=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const xV=e=>{const{getPopupContainer:t,getPrefixCls:n,direction:r}=_.useContext(fr),{prefixCls:s,type:d="default",danger:p,disabled:i,loading:x,onClick:S,htmlType:T,children:M,className:$,menu:L,arrow:N,autoFocus:V,overlay:B,trigger:j,align:H,open:W,onOpenChange:X,placement:ee,getPopupContainer:J,href:Y,icon:re=_.createElement(ZP,null),title:se,buttonsRender:ae=gt=>gt,mouseEnterDelay:ce,mouseLeaveDelay:Ce,overlayClassName:we,overlayStyle:ge,destroyPopupOnHide:ve,dropdownRender:de}=e,pe=sue(e,["prefixCls","type","danger","disabled","loading","onClick","htmlType","children","className","menu","arrow","autoFocus","overlay","trigger","align","open","onOpenChange","placement","getPopupContainer","href","icon","title","buttonsRender","mouseEnterDelay","mouseLeaveDelay","overlayClassName","overlayStyle","destroyPopupOnHide","dropdownRender"]),fe=n("dropdown",s),me=`${fe}-button`,Ie={menu:L,arrow:N,autoFocus:V,align:H,disabled:i,trigger:i?[]:j,onOpenChange:X,getPopupContainer:J||t,mouseEnterDelay:ce,mouseLeaveDelay:Ce,overlayClassName:we,overlayStyle:ge,destroyPopupOnHide:ve,dropdownRender:de},{compactSize:Me,compactItemClassnames:Be}=cf(fe,r),$e=pt(me,Be,$);"overlay"in e&&(Ie.overlay=B),"open"in e&&(Ie.open=W),"placement"in e?Ie.placement=ee:Ie.placement=r==="rtl"?"bottomLeft":"bottomRight";const ze=_.createElement(Di,{type:d,danger:p,disabled:i,loading:x,onClick:S,htmlType:T,href:Y,title:se},M),Je=_.createElement(Di,{type:d,danger:p,icon:re}),[yt,at]=ae([ze,Je]);return _.createElement(Ec.Compact,Object.assign({className:$e,size:Me,block:!0},pe),yt,_.createElement(Hw,Object.assign({},Ie),at))};xV.__ANT_BUTTON=!0;const tS=Hw;tS.Button=xV;function Xz(e){var t=e.getBoundingClientRect(),n=document.documentElement;return{left:t.left+(window.pageXOffset||n.scrollLeft)-(n.clientLeft||document.body.clientLeft||0),top:t.top+(window.pageYOffset||n.scrollTop)-(n.clientTop||document.body.clientTop||0)}}function hb(e,t,n,r){var s=G0.unstable_batchedUpdates?function(p){G0.unstable_batchedUpdates(n,p)}:n;return e!=null&&e.addEventListener&&e.addEventListener(t,s,r),{remove:function(){e!=null&&e.removeEventListener&&e.removeEventListener(t,s,r)}}}function lue(e,t,n){return typeof n=="boolean"?n:e.length?!0:Ha(t).some(s=>s.type===F6)}var bV=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};function nS(e){let{suffixCls:t,tagName:n,displayName:r}=e;return s=>_.forwardRef((p,i)=>_.createElement(s,Object.assign({ref:i,suffixCls:t,tagName:n},p)))}const lR=_.forwardRef((e,t)=>{const{prefixCls:n,suffixCls:r,className:s,tagName:d}=e,p=bV(e,["prefixCls","suffixCls","className","tagName"]),{getPrefixCls:i}=_.useContext(fr),x=i("layout",n),[S,T,M]=N6(x),$=r?`${x}-${r}`:x;return S(_.createElement(d,Object.assign({className:pt(n||$,s,T,M),ref:t},p)))}),cue=_.forwardRef((e,t)=>{const{direction:n}=_.useContext(fr),[r,s]=_.useState([]),{prefixCls:d,className:p,rootClassName:i,children:x,hasSider:S,tagName:T,style:M}=e,$=bV(e,["prefixCls","className","rootClassName","children","hasSider","tagName","style"]),L=vo($,["suffixCls"]),{getPrefixCls:N,layout:V}=_.useContext(fr),B=N("layout",d),j=lue(r,x,S),[H,W,X]=N6(B),ee=pt(B,{[`${B}-has-sider`]:j,[`${B}-rtl`]:n==="rtl"},V==null?void 0:V.className,p,i,W,X),J=_.useMemo(()=>({siderHook:{addSider:Y=>{s(re=>[].concat(un(re),[Y]))},removeSider:Y=>{s(re=>re.filter(se=>se!==Y))}}}),[]);return H(_.createElement(k6.Provider,{value:J},_.createElement(T,Object.assign({ref:t,className:ee,style:Object.assign(Object.assign({},V==null?void 0:V.style),M)},L),x)))}),uue=nS({tagName:"div",displayName:"Layout"})(cue),due=nS({suffixCls:"header",tagName:"header",displayName:"Header"})(lR),hue=nS({suffixCls:"footer",tagName:"footer",displayName:"Footer"})(lR),fue=nS({suffixCls:"content",tagName:"main",displayName:"Content"})(lR),Bm=uue;Bm.Header=due;Bm.Footer=hue;Bm.Content=fue;Bm.Sider=F6;Bm._InternalSiderContext=Vw;const wV=function(){const e=Object.assign({},arguments.length<=0?void 0:arguments[0]);for(let t=1;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];n&&Object.keys(n).forEach(r=>{const s=n[r];s!==void 0&&(e[r]=s)})}return e};var pue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"},mue=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:pue}))},Zz=_.forwardRef(mue),gue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"},vue=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:gue}))},Yz=_.forwardRef(vue),yue={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"},_ue=["10","20","50","100"],xue=function(t){var n=t.pageSizeOptions,r=n===void 0?_ue:n,s=t.locale,d=t.changeSize,p=t.pageSize,i=t.goButton,x=t.quickGo,S=t.rootPrefixCls,T=t.selectComponentClass,M=t.selectPrefixCls,$=t.disabled,L=t.buildOptionText,N=t.showSizeChanger,V=Ft.useState(""),B=ot(V,2),j=B[0],H=B[1],W=function(){return!j||Number.isNaN(j)?void 0:Number(j)},X=typeof L=="function"?L:function(fe){return"".concat(fe," ").concat(s.items_per_page)},ee=function(me,Ie){if(d==null||d(Number(me)),cr(N)==="object"){var Me;(Me=N.onChange)===null||Me===void 0||Me.call(N,me,Ie)}},J=function(me){H(me.target.value)},Y=function(me){i||j===""||(H(""),!(me.relatedTarget&&(me.relatedTarget.className.indexOf("".concat(S,"-item-link"))>=0||me.relatedTarget.className.indexOf("".concat(S,"-item"))>=0))&&(x==null||x(W())))},re=function(me){j!==""&&(me.keyCode===gn.ENTER||me.type==="click")&&(H(""),x==null||x(W()))},se=function(){return r.some(function(me){return me.toString()===p.toString()})?r:r.concat([p.toString()]).sort(function(me,Ie){var Me=Number.isNaN(Number(me))?0:Number(me),Be=Number.isNaN(Number(Ie))?0:Number(Ie);return Me-Be})},ae="".concat(S,"-options");if(!N&&!x)return null;var ce=null,Ce=null,we=null;if(N&&T){var ge=cr(N)==="object"?N:{},ve=ge.options,de=ge.className,pe=ve?void 0:se().map(function(fe,me){return Ft.createElement(T.Option,{key:me,value:fe.toString()},X(fe))});ce=Ft.createElement(T,qt({disabled:$,prefixCls:M,showSearch:!1,optionLabelProp:ve?"label":"children",popupMatchSelectWidth:!1,value:(p||r[0]).toString(),getPopupContainer:function(me){return me.parentNode},"aria-label":s.page_size,defaultOpen:!1},cr(N)==="object"?N:null,{className:pt("".concat(ae,"-size-changer"),de),options:ve,onChange:ee}),pe)}return x&&(i&&(we=typeof i=="boolean"?Ft.createElement("button",{type:"button",onClick:re,onKeyUp:re,disabled:$,className:"".concat(ae,"-quick-jumper-button")},s.jump_to_confirm):Ft.createElement("span",{onClick:re,onKeyUp:re},i)),Ce=Ft.createElement("div",{className:"".concat(ae,"-quick-jumper")},s.jump_to,Ft.createElement("input",{disabled:$,type:"text",value:j,onChange:J,onKeyUp:re,onBlur:Y,"aria-label":s.page}),s.page,we)),Ft.createElement("li",{className:ae},ce,Ce)},e0=function(t){var n=t.rootPrefixCls,r=t.page,s=t.active,d=t.className,p=t.showTitle,i=t.onClick,x=t.onKeyPress,S=t.itemRender,T="".concat(n,"-item"),M=pt(T,"".concat(T,"-").concat(r),De(De({},"".concat(T,"-active"),s),"".concat(T,"-disabled"),!r),d),$=function(){i(r)},L=function(B){x(B,i,r)},N=S(r,"page",Ft.createElement("a",{rel:"nofollow"},r));return N?Ft.createElement("li",{title:p?String(r):null,className:M,onClick:$,onKeyDown:L,tabIndex:0},N):null},bue=function(t,n,r){return r};function Jz(){}function Qz(e){var t=Number(e);return typeof t=="number"&&!Number.isNaN(t)&&isFinite(t)&&Math.floor(t)===t}function Ah(e,t,n){var r=typeof e>"u"?t:e;return Math.floor((n-1)/r)+1}var wue=function(t){var n=t.prefixCls,r=n===void 0?"rc-pagination":n,s=t.selectPrefixCls,d=s===void 0?"rc-select":s,p=t.className,i=t.selectComponentClass,x=t.current,S=t.defaultCurrent,T=S===void 0?1:S,M=t.total,$=M===void 0?0:M,L=t.pageSize,N=t.defaultPageSize,V=N===void 0?10:N,B=t.onChange,j=B===void 0?Jz:B,H=t.hideOnSinglePage,W=t.align,X=t.showPrevNextJumpers,ee=X===void 0?!0:X,J=t.showQuickJumper,Y=t.showLessItems,re=t.showTitle,se=re===void 0?!0:re,ae=t.onShowSizeChange,ce=ae===void 0?Jz:ae,Ce=t.locale,we=Ce===void 0?yue:Ce,ge=t.style,ve=t.totalBoundaryShowSizeChanger,de=ve===void 0?50:ve,pe=t.disabled,fe=t.simple,me=t.showTotal,Ie=t.showSizeChanger,Me=Ie===void 0?$>de:Ie,Be=t.pageSizeOptions,$e=t.itemRender,ze=$e===void 0?bue:$e,Je=t.jumpPrevIcon,yt=t.jumpNextIcon,at=t.prevIcon,gt=t.nextIcon,wt=Ft.useRef(null),Pe=Bi(10,{value:L,defaultValue:V}),mt=ot(Pe,2),dt=mt[0],ht=mt[1],je=Bi(1,{value:x,defaultValue:T,postState:function(Ar){return Math.max(1,Math.min(Ar,Ah(void 0,dt,$)))}}),St=ot(je,2),Ct=St[0],Lt=St[1],At=Ft.useState(Ct),Yt=ot(At,2),Kt=Yt[0],Dt=Yt[1];_.useEffect(function(){Dt(Ct)},[Ct]);var Wt=Math.max(1,Ct-(Y?3:5)),Vt=Math.min(Ah(void 0,dt,$),Ct+(Y?3:5));function Rt(ir,Ar){var Gr=ir||Ft.createElement("button",{type:"button","aria-label":Ar,className:"".concat(r,"-item-link")});return typeof ir=="function"&&(Gr=Ft.createElement(ir,We({},t))),Gr}function dn(ir){var Ar=ir.target.value,Gr=Ah(void 0,dt,$),Ei;return Ar===""?Ei=Ar:Number.isNaN(Number(Ar))?Ei=Kt:Ar>=Gr?Ei=Gr:Ei=Number(Ar),Ei}function hn(ir){return Qz(ir)&&ir!==Ct&&Qz($)&&$>0}var Pn=$>dt?J:!1;function Dn(ir){(ir.keyCode===gn.UP||ir.keyCode===gn.DOWN)&&ir.preventDefault()}function yn(ir){var Ar=dn(ir);switch(Ar!==Kt&&Dt(Ar),ir.keyCode){case gn.ENTER:Cn(Ar);break;case gn.UP:Cn(Ar-1);break;case gn.DOWN:Cn(Ar+1);break}}function Rn(ir){Cn(dn(ir))}function kn(ir){var Ar=Ah(ir,dt,$),Gr=Ct>Ar&&Ar!==0?Ar:Ct;ht(ir),Dt(Gr),ce==null||ce(Ct,ir),Lt(Gr),j==null||j(Gr,ir)}function Cn(ir){if(hn(ir)&&!pe){var Ar=Ah(void 0,dt,$),Gr=ir;return ir>Ar?Gr=Ar:ir<1&&(Gr=1),Gr!==Kt&&Dt(Gr),Lt(Gr),j==null||j(Gr,dt),Gr}return Ct}var nn=Ct>1,Ut=Ct<Ah(void 0,dt,$);function cn(){nn&&Cn(Ct-1)}function an(){Ut&&Cn(Ct+1)}function Zt(){Cn(Wt)}function Xt(){Cn(Vt)}function Hn(ir,Ar){if(ir.key==="Enter"||ir.charCode===gn.ENTER||ir.keyCode===gn.ENTER){for(var Gr=arguments.length,Ei=new Array(Gr>2?Gr-2:0),fo=2;fo<Gr;fo++)Ei[fo-2]=arguments[fo];Ar.apply(void 0,Ei)}}function br(ir){Hn(ir,cn)}function mr(ir){Hn(ir,an)}function pr(ir){Hn(ir,Zt)}function Tr(ir){Hn(ir,Xt)}function ur(ir){var Ar=ze(ir,"prev",Rt(at,"prev page"));return Ft.isValidElement(Ar)?Ft.cloneElement(Ar,{disabled:!nn}):Ar}function Mr(ir){var Ar=ze(ir,"next",Rt(gt,"next page"));return Ft.isValidElement(Ar)?Ft.cloneElement(Ar,{disabled:!Ut}):Ar}function tr(ir){(ir.type==="click"||ir.keyCode===gn.ENTER)&&Cn(Kt)}var ft=null,ye=Ko(t,{aria:!0,data:!0}),Se=me&&Ft.createElement("li",{className:"".concat(r,"-total-text")},me($,[$===0?0:(Ct-1)*dt+1,Ct*dt>$?$:Ct*dt])),ke=null,Ze=Ah(void 0,dt,$);if(H&&$<=dt)return null;var Ae=[],Ge={rootPrefixCls:r,onClick:Cn,onKeyPress:Hn,showTitle:se,itemRender:ze,page:-1},ut=Ct-1>0?Ct-1:0,Qe=Ct+1<Ze?Ct+1:Ze,_t=J&&J.goButton,It=cr(fe)==="object"?fe.readOnly:!fe,bt=_t,Mt=null;fe&&(_t&&(typeof _t=="boolean"?bt=Ft.createElement("button",{type:"button",onClick:tr,onKeyUp:tr},we.jump_to_confirm):bt=Ft.createElement("span",{onClick:tr,onKeyUp:tr},_t),bt=Ft.createElement("li",{title:se?"".concat(we.jump_to).concat(Ct,"/").concat(Ze):null,className:"".concat(r,"-simple-pager")},bt)),Mt=Ft.createElement("li",{title:se?"".concat(Ct,"/").concat(Ze):null,className:"".concat(r,"-simple-pager")},It?Kt:Ft.createElement("input",{type:"text",value:Kt,disabled:pe,onKeyDown:Dn,onKeyUp:yn,onChange:yn,onBlur:Rn,size:3}),Ft.createElement("span",{className:"".concat(r,"-slash")},"/"),Ze));var kt=Y?1:2;if(Ze<=3+kt*2){Ze||Ae.push(Ft.createElement(e0,qt({},Ge,{key:"noPager",page:1,className:"".concat(r,"-item-disabled")})));for(var Gt=1;Gt<=Ze;Gt+=1)Ae.push(Ft.createElement(e0,qt({},Ge,{key:Gt,page:Gt,active:Ct===Gt})))}else{var vn=Y?we.prev_3:we.prev_5,On=Y?we.next_3:we.next_5,bn=ze(Wt,"jump-prev",Rt(Je,"prev page")),zn=ze(Vt,"jump-next",Rt(yt,"next page"));ee&&(ft=bn?Ft.createElement("li",{title:se?vn:null,key:"prev",onClick:Zt,tabIndex:0,onKeyDown:pr,className:pt("".concat(r,"-jump-prev"),De({},"".concat(r,"-jump-prev-custom-icon"),!!Je))},bn):null,ke=zn?Ft.createElement("li",{title:se?On:null,key:"next",onClick:Xt,tabIndex:0,onKeyDown:Tr,className:pt("".concat(r,"-jump-next"),De({},"".concat(r,"-jump-next-custom-icon"),!!yt))},zn):null);var Mn=Math.max(1,Ct-kt),wn=Math.min(Ct+kt,Ze);Ct-1<=kt&&(wn=1+kt*2),Ze-Ct<=kt&&(Mn=Ze-kt*2);for(var _n=Mn;_n<=wn;_n+=1)Ae.push(Ft.createElement(e0,qt({},Ge,{key:_n,page:_n,active:Ct===_n})));if(Ct-1>=kt*2&&Ct!==3&&(Ae[0]=Ft.cloneElement(Ae[0],{className:pt("".concat(r,"-item-after-jump-prev"),Ae[0].props.className)}),Ae.unshift(ft)),Ze-Ct>=kt*2&&Ct!==Ze-2){var rr=Ae[Ae.length-1];Ae[Ae.length-1]=Ft.cloneElement(rr,{className:pt("".concat(r,"-item-before-jump-next"),rr.props.className)}),Ae.push(ke)}Mn!==1&&Ae.unshift(Ft.createElement(e0,qt({},Ge,{key:1,page:1}))),wn!==Ze&&Ae.push(Ft.createElement(e0,qt({},Ge,{key:Ze,page:Ze})))}var or=ur(ut);if(or){var kr=!nn||!Ze;or=Ft.createElement("li",{title:se?we.prev_page:null,onClick:cn,tabIndex:kr?null:0,onKeyDown:br,className:pt("".concat(r,"-prev"),De({},"".concat(r,"-disabled"),kr)),"aria-disabled":kr},or)}var zr=Mr(Qe);if(zr){var Hr,ei;fe?(Hr=!Ut,ei=nn?0:null):(Hr=!Ut||!Ze,ei=Hr?null:0),zr=Ft.createElement("li",{title:se?we.next_page:null,onClick:an,tabIndex:ei,onKeyDown:mr,className:pt("".concat(r,"-next"),De({},"".concat(r,"-disabled"),Hr)),"aria-disabled":Hr},zr)}var Hi=pt(r,p,De(De(De(De(De({},"".concat(r,"-start"),W==="start"),"".concat(r,"-center"),W==="center"),"".concat(r,"-end"),W==="end"),"".concat(r,"-simple"),fe),"".concat(r,"-disabled"),pe));return Ft.createElement("ul",qt({className:Hi,style:ge,ref:wt},ye),Se,or,fe?Mt:Ae,zr,Ft.createElement(xue,{locale:we,rootPrefixCls:r,disabled:pe,selectComponentClass:i,selectPrefixCls:d,changeSize:kn,pageSize:dt,pageSizeOptions:Be,quickGo:Pn?Cn:null,goButton:bt,showSizeChanger:Me}))};const SV=e=>_.createElement(Ta,Object.assign({},e,{showSearch:!0,size:"small"})),CV=e=>_.createElement(Ta,Object.assign({},e,{showSearch:!0,size:"middle"}));SV.Option=Ta.Option;CV.Option=Ta.Option;const Sue=e=>{const{componentCls:t}=e;return{[`${t}-disabled`]:{"&, &:hover":{cursor:"not-allowed",[`${t}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed"}},"&:focus-visible":{cursor:"not-allowed",[`${t}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed"}}},[`&${t}-disabled`]:{cursor:"not-allowed",[`${t}-item`]:{cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},a:{color:e.colorTextDisabled,backgroundColor:"transparent",border:"none",cursor:"not-allowed"},"&-active":{borderColor:e.colorBorder,backgroundColor:e.itemActiveBgDisabled,"&:hover, &:active":{backgroundColor:e.itemActiveBgDisabled},a:{color:e.itemActiveColorDisabled}}},[`${t}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},[`${t}-simple&`]:{backgroundColor:"transparent","&:hover, &:active":{backgroundColor:"transparent"}}},[`${t}-simple-pager`]:{color:e.colorTextDisabled},[`${t}-jump-prev, ${t}-jump-next`]:{[`${t}-item-link-icon`]:{opacity:0},[`${t}-item-ellipsis`]:{opacity:1}}},[`&${t}-simple`]:{[`${t}-prev, ${t}-next`]:{[`&${t}-disabled ${t}-item-link`]:{"&:hover, &:active":{backgroundColor:"transparent"}}}}}},Cue=e=>{const{componentCls:t}=e;return{[`&${t}-mini ${t}-total-text, &${t}-mini ${t}-simple-pager`]:{height:e.itemSizeSM,lineHeight:nt(e.itemSizeSM)},[`&${t}-mini ${t}-item`]:{minWidth:e.itemSizeSM,height:e.itemSizeSM,margin:0,lineHeight:nt(e.calc(e.itemSizeSM).sub(2).equal())},[`&${t}-mini:not(${t}-disabled) ${t}-item:not(${t}-item-active)`]:{backgroundColor:"transparent",borderColor:"transparent","&:hover":{backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},[`&${t}-mini ${t}-prev, &${t}-mini ${t}-next`]:{minWidth:e.itemSizeSM,height:e.itemSizeSM,margin:0,lineHeight:nt(e.itemSizeSM)},[`&${t}-mini:not(${t}-disabled)`]:{[`${t}-prev, ${t}-next`]:{[`&:hover ${t}-item-link`]:{backgroundColor:e.colorBgTextHover},[`&:active ${t}-item-link`]:{backgroundColor:e.colorBgTextActive},[`&${t}-disabled:hover ${t}-item-link`]:{backgroundColor:"transparent"}}},[`
    &${t}-mini ${t}-prev ${t}-item-link,
    &${t}-mini ${t}-next ${t}-item-link
    `]:{backgroundColor:"transparent",borderColor:"transparent","&::after":{height:e.itemSizeSM,lineHeight:nt(e.itemSizeSM)}},[`&${t}-mini ${t}-jump-prev, &${t}-mini ${t}-jump-next`]:{height:e.itemSizeSM,marginInlineEnd:0,lineHeight:nt(e.itemSizeSM)},[`&${t}-mini ${t}-options`]:{marginInlineStart:e.paginationMiniOptionsMarginInlineStart,"&-size-changer":{top:e.miniOptionsSizeChangerTop},"&-quick-jumper":{height:e.itemSizeSM,lineHeight:nt(e.itemSizeSM),input:Object.assign(Object.assign({},iR(e)),{width:e.paginationMiniQuickJumperInputWidth,height:e.controlHeightSM})}}}},Eue=e=>{const{componentCls:t}=e;return{[`
    &${t}-simple ${t}-prev,
    &${t}-simple ${t}-next
    `]:{height:e.itemSizeSM,lineHeight:nt(e.itemSizeSM),verticalAlign:"top",[`${t}-item-link`]:{height:e.itemSizeSM,backgroundColor:"transparent",border:0,"&:hover":{backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive},"&::after":{height:e.itemSizeSM,lineHeight:nt(e.itemSizeSM)}}},[`&${t}-simple ${t}-simple-pager`]:{display:"inline-block",height:e.itemSizeSM,marginInlineEnd:e.marginXS,input:{boxSizing:"border-box",height:"100%",padding:`0 ${nt(e.paginationItemPaddingInline)}`,textAlign:"center",backgroundColor:e.itemInputBg,border:`${nt(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadius,outline:"none",transition:`border-color ${e.motionDurationMid}`,color:"inherit","&:hover":{borderColor:e.colorPrimary},"&:focus":{borderColor:e.colorPrimaryHover,boxShadow:`${nt(e.inputOutlineOffset)} 0 ${nt(e.controlOutlineWidth)} ${e.controlOutline}`},"&[disabled]":{color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,cursor:"not-allowed"}}}}},Tue=e=>{const{componentCls:t}=e;return{[`${t}-jump-prev, ${t}-jump-next`]:{outline:0,[`${t}-item-container`]:{position:"relative",[`${t}-item-link-icon`]:{color:e.colorPrimary,fontSize:e.fontSizeSM,opacity:0,transition:`all ${e.motionDurationMid}`,"&-svg":{top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,margin:"auto"}},[`${t}-item-ellipsis`]:{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,display:"block",margin:"auto",color:e.colorTextDisabled,letterSpacing:e.paginationEllipsisLetterSpacing,textAlign:"center",textIndent:e.paginationEllipsisTextIndent,opacity:1,transition:`all ${e.motionDurationMid}`}},"&:hover":{[`${t}-item-link-icon`]:{opacity:1},[`${t}-item-ellipsis`]:{opacity:0}}},[`
    ${t}-prev,
    ${t}-jump-prev,
    ${t}-jump-next
    `]:{marginInlineEnd:e.marginXS},[`
    ${t}-prev,
    ${t}-next,
    ${t}-jump-prev,
    ${t}-jump-next
    `]:{display:"inline-block",minWidth:e.itemSize,height:e.itemSize,color:e.colorText,fontFamily:e.fontFamily,lineHeight:nt(e.itemSize),textAlign:"center",verticalAlign:"middle",listStyle:"none",borderRadius:e.borderRadius,cursor:"pointer",transition:`all ${e.motionDurationMid}`},[`${t}-prev, ${t}-next`]:{outline:0,button:{color:e.colorText,cursor:"pointer",userSelect:"none"},[`${t}-item-link`]:{display:"block",width:"100%",height:"100%",padding:0,fontSize:e.fontSizeSM,textAlign:"center",backgroundColor:"transparent",border:`${nt(e.lineWidth)} ${e.lineType} transparent`,borderRadius:e.borderRadius,outline:"none",transition:`all ${e.motionDurationMid}`},[`&:hover ${t}-item-link`]:{backgroundColor:e.colorBgTextHover},[`&:active ${t}-item-link`]:{backgroundColor:e.colorBgTextActive},[`&${t}-disabled:hover`]:{[`${t}-item-link`]:{backgroundColor:"transparent"}}},[`${t}-slash`]:{marginInlineEnd:e.paginationSlashMarginInlineEnd,marginInlineStart:e.paginationSlashMarginInlineStart},[`${t}-options`]:{display:"inline-block",marginInlineStart:e.margin,verticalAlign:"middle","&-size-changer":{display:"inline-block",width:"auto"},"&-quick-jumper":{display:"inline-block",height:e.controlHeight,marginInlineStart:e.marginXS,lineHeight:nt(e.controlHeight),verticalAlign:"top",input:Object.assign(Object.assign(Object.assign({},oR(e)),rR(e,{borderColor:e.colorBorder,hoverBorderColor:e.colorPrimaryHover,activeBorderColor:e.colorPrimary,activeShadow:e.activeShadow})),{"&[disabled]":Object.assign({},Jw(e)),width:e.calc(e.controlHeightLG).mul(1.25).equal(),height:e.controlHeight,boxSizing:"border-box",margin:0,marginInlineStart:e.marginXS,marginInlineEnd:e.marginXS})}}}},Iue=e=>{const{componentCls:t}=e;return{[`${t}-item`]:{display:"inline-block",minWidth:e.itemSize,height:e.itemSize,marginInlineEnd:e.marginXS,fontFamily:e.fontFamily,lineHeight:nt(e.calc(e.itemSize).sub(2).equal()),textAlign:"center",verticalAlign:"middle",listStyle:"none",backgroundColor:e.itemBg,border:`${nt(e.lineWidth)} ${e.lineType} transparent`,borderRadius:e.borderRadius,outline:0,cursor:"pointer",userSelect:"none",a:{display:"block",padding:`0 ${nt(e.paginationItemPaddingInline)}`,color:e.colorText,"&:hover":{textDecoration:"none"}},[`&:not(${t}-item-active)`]:{"&:hover":{transition:`all ${e.motionDurationMid}`,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},"&-active":{fontWeight:e.fontWeightStrong,backgroundColor:e.itemActiveBg,borderColor:e.colorPrimary,a:{color:e.colorPrimary},"&:hover":{borderColor:e.colorPrimaryHover},"&:hover a":{color:e.colorPrimaryHover}}}}},Mue=e=>{const{componentCls:t}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},lo(e)),{display:"flex","&-start":{justifyContent:"start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"end"},"ul, ol":{margin:0,padding:0,listStyle:"none"},"&::after":{display:"block",clear:"both",height:0,overflow:"hidden",visibility:"hidden",content:'""'},[`${t}-total-text`]:{display:"inline-block",height:e.itemSize,marginInlineEnd:e.marginXS,lineHeight:nt(e.calc(e.itemSize).sub(2).equal()),verticalAlign:"middle"}}),Iue(e)),Tue(e)),Eue(e)),Cue(e)),Sue(e)),{[`@media only screen and (max-width: ${e.screenLG}px)`]:{[`${t}-item`]:{"&-after-jump-prev, &-before-jump-next":{display:"none"}}},[`@media only screen and (max-width: ${e.screenSM}px)`]:{[`${t}-options`]:{display:"none"}}}),[`&${e.componentCls}-rtl`]:{direction:"rtl"}}},Pue=e=>{const{componentCls:t}=e;return{[`${t}:not(${t}-disabled)`]:{[`${t}-item`]:Object.assign({},au(e)),[`${t}-jump-prev, ${t}-jump-next`]:{"&:focus-visible":Object.assign({[`${t}-item-link-icon`]:{opacity:1},[`${t}-item-ellipsis`]:{opacity:0}},Ad(e))},[`${t}-prev, ${t}-next`]:{[`&:focus-visible ${t}-item-link`]:Object.assign({},Ad(e))}}}},EV=e=>Object.assign({itemBg:e.colorBgContainer,itemSize:e.controlHeight,itemSizeSM:e.controlHeightSM,itemActiveBg:e.colorBgContainer,itemLinkBg:e.colorBgContainer,itemActiveColorDisabled:e.colorTextDisabled,itemActiveBgDisabled:e.controlItemBgActiveDisabled,itemInputBg:e.colorBgContainer,miniOptionsSizeChangerTop:0},Yw(e)),TV=e=>pi(e,{inputOutlineOffset:0,paginationMiniOptionsMarginInlineStart:e.calc(e.marginXXS).div(2).equal(),paginationMiniQuickJumperInputWidth:e.calc(e.controlHeightLG).mul(1.1).equal(),paginationItemPaddingInline:e.calc(e.marginXXS).mul(1.5).equal(),paginationEllipsisLetterSpacing:e.calc(e.marginXXS).div(2).equal(),paginationSlashMarginInlineStart:e.marginSM,paginationSlashMarginInlineEnd:e.marginSM,paginationEllipsisTextIndent:"0.13em"},Zw(e)),Rue=Qi("Pagination",e=>{const t=TV(e);return[Mue(t),Pue(t)]},EV),Oue=e=>{const{componentCls:t}=e;return{[`${t}${t}-bordered${t}-disabled:not(${t}-mini)`]:{"&, &:hover":{[`${t}-item-link`]:{borderColor:e.colorBorder}},"&:focus-visible":{[`${t}-item-link`]:{borderColor:e.colorBorder}},[`${t}-item, ${t}-item-link`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,[`&:hover:not(${t}-item-active)`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,a:{color:e.colorTextDisabled}},[`&${t}-item-active`]:{backgroundColor:e.itemActiveBgDisabled}},[`${t}-prev, ${t}-next`]:{"&:hover button":{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,color:e.colorTextDisabled},[`${t}-item-link`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder}}},[`${t}${t}-bordered:not(${t}-mini)`]:{[`${t}-prev, ${t}-next`]:{"&:hover button":{borderColor:e.colorPrimaryHover,backgroundColor:e.itemBg},[`${t}-item-link`]:{backgroundColor:e.itemLinkBg,borderColor:e.colorBorder},[`&:hover ${t}-item-link`]:{borderColor:e.colorPrimary,backgroundColor:e.itemBg,color:e.colorPrimary},[`&${t}-disabled`]:{[`${t}-item-link`]:{borderColor:e.colorBorder,color:e.colorTextDisabled}}},[`${t}-item`]:{backgroundColor:e.itemBg,border:`${nt(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,[`&:hover:not(${t}-item-active)`]:{borderColor:e.colorPrimary,backgroundColor:e.itemBg,a:{color:e.colorPrimary}},"&-active":{borderColor:e.colorPrimary}}}}},Aue=_P(["Pagination","bordered"],e=>{const t=TV(e);return[Oue(t)]},EV);var Due=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const $ue=e=>{const{align:t,prefixCls:n,selectPrefixCls:r,className:s,rootClassName:d,style:p,size:i,locale:x,selectComponentClass:S,responsive:T,showSizeChanger:M}=e,$=Due(e,["align","prefixCls","selectPrefixCls","className","rootClassName","style","size","locale","selectComponentClass","responsive","showSizeChanger"]),{xs:L}=BP(T),[,N]=Ra(),{getPrefixCls:V,direction:B,pagination:j={}}=_.useContext(fr),H=V("pagination",n),[W,X,ee]=Rue(H),J=M??j.showSizeChanger,Y=_.useMemo(()=>{const ve=_.createElement("span",{className:`${H}-item-ellipsis`},"•••"),de=_.createElement("button",{className:`${H}-item-link`,type:"button",tabIndex:-1},B==="rtl"?_.createElement(ly,null):_.createElement(R1,null)),pe=_.createElement("button",{className:`${H}-item-link`,type:"button",tabIndex:-1},B==="rtl"?_.createElement(R1,null):_.createElement(ly,null)),fe=_.createElement("a",{className:`${H}-item-link`},_.createElement("div",{className:`${H}-item-container`},B==="rtl"?_.createElement(Yz,{className:`${H}-item-link-icon`}):_.createElement(Zz,{className:`${H}-item-link-icon`}),ve)),me=_.createElement("a",{className:`${H}-item-link`},_.createElement("div",{className:`${H}-item-container`},B==="rtl"?_.createElement(Zz,{className:`${H}-item-link-icon`}):_.createElement(Yz,{className:`${H}-item-link-icon`}),ve));return{prevIcon:de,nextIcon:pe,jumpPrevIcon:fe,jumpNextIcon:me}},[B,H]),[re]=Zl("Pagination",lB),se=Object.assign(Object.assign({},re),x),ae=as(i),ce=ae==="small"||!!(L&&!ae&&T),Ce=V("select",r),we=pt({[`${H}-${t}`]:!!t,[`${H}-mini`]:ce,[`${H}-rtl`]:B==="rtl",[`${H}-bordered`]:N.wireframe},j==null?void 0:j.className,s,d,X,ee),ge=Object.assign(Object.assign({},j==null?void 0:j.style),p);return W(_.createElement(_.Fragment,null,N.wireframe&&_.createElement(Aue,{prefixCls:H}),_.createElement(wue,Object.assign({},Y,$,{style:ge,prefixCls:H,selectPrefixCls:Ce,className:we,selectComponentClass:S||(ce?SV:CV),locale:se,showSizeChanger:J}))))},z1=100,IV=z1/5,MV=z1/2-IV/2,mE=MV*2*Math.PI,eL=50,tL=e=>{const{dotClassName:t,style:n,hasCircleCls:r}=e;return _.createElement("circle",{className:pt(`${t}-circle`,{[`${t}-circle-bg`]:r}),r:MV,cx:eL,cy:eL,strokeWidth:IV,style:n})},kue=e=>{let{percent:t,prefixCls:n}=e;const r=`${n}-dot`,s=`${r}-holder`,d=`${s}-hidden`,[p,i]=_.useState(!1);Xr(()=>{t!==0&&i(!0)},[t!==0]);const x=Math.max(Math.min(t,100),0);if(!p)return null;const S={strokeDashoffset:`${mE/4}`,strokeDasharray:`${mE*x/100} ${mE*(100-x)/100}`};return _.createElement("span",{className:pt(s,`${r}-progress`,x<=0&&d)},_.createElement("svg",{viewBox:`0 0 ${z1} ${z1}`,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":x},_.createElement(tL,{dotClassName:r,hasCircleCls:!0}),_.createElement(tL,{dotClassName:r,style:S})))};function zue(e){const{prefixCls:t,percent:n=0}=e,r=`${t}-dot`,s=`${r}-holder`,d=`${s}-hidden`;return _.createElement(_.Fragment,null,_.createElement("span",{className:pt(s,n>0&&d)},_.createElement("span",{className:pt(r,`${t}-dot-spin`)},[1,2,3,4].map(p=>_.createElement("i",{className:`${t}-dot-item`,key:p})))),_.createElement(kue,{prefixCls:t,percent:n}))}function Lue(e){const{prefixCls:t,indicator:n,percent:r}=e,s=`${t}-dot`;return n&&_.isValidElement(n)?ns(n,{className:pt(n.props.className,s),percent:r}):_.createElement(zue,{prefixCls:t,percent:r})}const Nue=new Mi("antSpinMove",{to:{opacity:1}}),Fue=new Mi("antRotate",{to:{transform:"rotate(405deg)"}}),Bue=e=>{const{componentCls:t,calc:n}=e;return{[t]:Object.assign(Object.assign({},lo(e)),{position:"absolute",display:"none",color:e.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOutCirc}`,"&-spinning":{position:"relative",display:"inline-block",opacity:1},[`${t}-text`]:{fontSize:e.fontSize,paddingTop:n(n(e.dotSize).sub(e.fontSize)).div(2).add(2).equal()},"&-fullscreen":{position:"fixed",width:"100vw",height:"100vh",backgroundColor:e.colorBgMask,zIndex:e.zIndexPopupBase,inset:0,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",opacity:0,visibility:"hidden",transition:`all ${e.motionDurationMid}`,"&-show":{opacity:1,visibility:"visible"},[t]:{[`${t}-dot-holder`]:{color:e.colorWhite},[`${t}-text`]:{color:e.colorTextLightSolid}}},"&-nested-loading":{position:"relative",[`> div > ${t}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:e.contentHeight,[`${t}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:n(e.dotSize).mul(-1).div(2).equal()},[`${t}-text`]:{position:"absolute",top:"50%",width:"100%",textShadow:`0 1px 2px ${e.colorBgContainer}`},[`&${t}-show-text ${t}-dot`]:{marginTop:n(e.dotSize).div(2).mul(-1).sub(10).equal()},"&-sm":{[`${t}-dot`]:{margin:n(e.dotSizeSM).mul(-1).div(2).equal()},[`${t}-text`]:{paddingTop:n(n(e.dotSizeSM).sub(e.fontSize)).div(2).add(2).equal()},[`&${t}-show-text ${t}-dot`]:{marginTop:n(e.dotSizeSM).div(2).mul(-1).sub(10).equal()}},"&-lg":{[`${t}-dot`]:{margin:n(e.dotSizeLG).mul(-1).div(2).equal()},[`${t}-text`]:{paddingTop:n(n(e.dotSizeLG).sub(e.fontSize)).div(2).add(2).equal()},[`&${t}-show-text ${t}-dot`]:{marginTop:n(e.dotSizeLG).div(2).mul(-1).sub(10).equal()}}},[`${t}-container`]:{position:"relative",transition:`opacity ${e.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:e.colorBgContainer,opacity:0,transition:`all ${e.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${t}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none","&::after":{opacity:.4,pointerEvents:"auto"}}},"&-tip":{color:e.spinDotDefault},[`${t}-dot-holder`]:{width:"1em",height:"1em",fontSize:e.dotSize,display:"inline-block",transition:`transform ${e.motionDurationSlow} ease, opacity ${e.motionDurationSlow} ease`,transformOrigin:"50% 50%",lineHeight:1,color:e.colorPrimary,"&-hidden":{transform:"scale(0.3)",opacity:0}},[`${t}-dot-progress`]:{position:"absolute",top:"50%",transform:"translate(-50%, -50%)",insetInlineStart:"50%"},[`${t}-dot`]:{position:"relative",display:"inline-block",fontSize:e.dotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:n(e.dotSize).sub(n(e.marginXXS).div(2)).div(2).equal(),height:n(e.dotSize).sub(n(e.marginXXS).div(2)).div(2).equal(),background:"currentColor",borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:Nue,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0,animationDelay:"0s"},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:Fue,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"},"&-circle":{strokeLinecap:"round",transition:["stroke-dashoffset","stroke-dasharray","stroke","stroke-width","opacity"].map(r=>`${r} ${e.motionDurationSlow} ease`).join(","),fillOpacity:0,stroke:"currentcolor"},"&-circle-bg":{stroke:e.colorFillSecondary}},[`&-sm ${t}-dot`]:{"&, &-holder":{fontSize:e.dotSizeSM}},[`&-sm ${t}-dot-holder`]:{i:{width:n(n(e.dotSizeSM).sub(n(e.marginXXS).div(2))).div(2).equal(),height:n(n(e.dotSizeSM).sub(n(e.marginXXS).div(2))).div(2).equal()}},[`&-lg ${t}-dot`]:{"&, &-holder":{fontSize:e.dotSizeLG}},[`&-lg ${t}-dot-holder`]:{i:{width:n(n(e.dotSizeLG).sub(e.marginXXS)).div(2).equal(),height:n(n(e.dotSizeLG).sub(e.marginXXS)).div(2).equal()}},[`&${t}-show-text ${t}-text`]:{display:"block"}})}},jue=e=>{const{controlHeightLG:t,controlHeight:n}=e;return{contentHeight:400,dotSize:t/2,dotSizeSM:t*.35,dotSizeLG:n}},Vue=Qi("Spin",e=>{const t=pi(e,{spinDotDefault:e.colorTextDescription});return[Bue(t)]},jue),Hue=200,nL=[[30,.05],[70,.03],[96,.01]];function Uue(e,t){const[n,r]=_.useState(0),s=_.useRef(),d=t==="auto";return _.useEffect(()=>(d&&e&&(r(0),s.current=setInterval(()=>{r(p=>{const i=100-p;for(let x=0;x<nL.length;x+=1){const[S,T]=nL[x];if(p<=S)return p+i*T}return p})},Hue)),()=>{clearInterval(s.current)}),[d,e]),d?n:t}var Wue=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};let PV;function Gue(e,t){return!!e&&!!t&&!isNaN(Number(t))}const RV=e=>{var t;const{prefixCls:n,spinning:r=!0,delay:s=0,className:d,rootClassName:p,size:i="default",tip:x,wrapperClassName:S,style:T,children:M,fullscreen:$=!1,indicator:L,percent:N}=e,V=Wue(e,["prefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","fullscreen","indicator","percent"]),{getPrefixCls:B,direction:j,spin:H}=_.useContext(fr),W=B("spin",n),[X,ee,J]=Vue(W),[Y,re]=_.useState(()=>r&&!Gue(r,s)),se=Uue(Y,N);_.useEffect(()=>{if(r){const de=gle(s,()=>{re(!0)});return de(),()=>{var pe;(pe=de==null?void 0:de.cancel)===null||pe===void 0||pe.call(de)}}re(!1)},[s,r]);const ae=_.useMemo(()=>typeof M<"u"&&!$,[M,$]),ce=pt(W,H==null?void 0:H.className,{[`${W}-sm`]:i==="small",[`${W}-lg`]:i==="large",[`${W}-spinning`]:Y,[`${W}-show-text`]:!!x,[`${W}-rtl`]:j==="rtl"},d,!$&&p,ee,J),Ce=pt(`${W}-container`,{[`${W}-blur`]:Y}),we=(t=L??(H==null?void 0:H.indicator))!==null&&t!==void 0?t:PV,ge=Object.assign(Object.assign({},H==null?void 0:H.style),T),ve=_.createElement("div",Object.assign({},V,{style:ge,className:ce,"aria-live":"polite","aria-busy":Y}),_.createElement(Lue,{prefixCls:W,indicator:we,percent:se}),x&&(ae||$)?_.createElement("div",{className:`${W}-text`},x):null);return X(ae?_.createElement("div",Object.assign({},V,{className:pt(`${W}-nested-loading`,S,ee,J)}),Y&&_.createElement("div",{key:"loading"},ve),_.createElement("div",{className:Ce,key:"container"},M)):$?_.createElement("div",{className:pt(`${W}-fullscreen`,{[`${W}-fullscreen-show`]:Y},p,ee,J)},ve):ve)};RV.setDefaultIndicator=e=>{PV=e};function que(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)&&e==null?[]:Array.isArray(e)?e:[e]}let nl=null,Vh=e=>e(),dy=[],hy={};function rL(){const{getContainer:e,duration:t,rtl:n,maxCount:r,top:s}=hy,d=(e==null?void 0:e())||document.body;return{getContainer:()=>d,duration:t,rtl:n,maxCount:r,top:s}}const Kue=Ft.forwardRef((e,t)=>{const{messageConfig:n,sync:r}=e,{getPrefixCls:s}=_.useContext(fr),d=hy.prefixCls||s("message"),p=_.useContext(xte),[i,x]=JB(Object.assign(Object.assign(Object.assign({},n),{prefixCls:d}),p.message));return Ft.useImperativeHandle(t,()=>{const S=Object.assign({},i);return Object.keys(S).forEach(T=>{S[T]=function(){return r(),i[T].apply(i,arguments)}}),{instance:S,sync:r}}),x}),Xue=Ft.forwardRef((e,t)=>{const[n,r]=Ft.useState(rL),s=()=>{r(rL)};Ft.useEffect(s,[]);const d=NB(),p=d.getRootPrefixCls(),i=d.getIconPrefixCls(),x=d.getTheme(),S=Ft.createElement(Kue,{ref:t,sync:s,messageConfig:n});return Ft.createElement(cu,{prefixCls:p,iconPrefixCls:i,theme:x},d.holderRender?d.holderRender(S):S)});function rS(){if(!nl){const e=document.createDocumentFragment(),t={fragment:e};nl=t,Vh(()=>{wP(Ft.createElement(Xue,{ref:n=>{const{instance:r,sync:s}=n||{};Promise.resolve().then(()=>{!t.instance&&r&&(t.instance=r,t.sync=s,rS())})}}),e)});return}nl.instance&&(dy.forEach(e=>{const{type:t,skipped:n}=e;if(!n)switch(t){case"open":{Vh(()=>{const r=nl.instance.open(Object.assign(Object.assign({},hy),e.config));r==null||r.then(e.resolve),e.setCloseFn(r)});break}case"destroy":Vh(()=>{nl==null||nl.instance.destroy(e.key)});break;default:Vh(()=>{var r;const s=(r=nl.instance)[t].apply(r,un(e.args));s==null||s.then(e.resolve),e.setCloseFn(s)})}}),dy=[])}function Zue(e){hy=Object.assign(Object.assign({},hy),e),Vh(()=>{var t;(t=nl==null?void 0:nl.sync)===null||t===void 0||t.call(nl)})}function Yue(e){const t=bP(n=>{let r;const s={type:"open",config:e,resolve:n,setCloseFn:d=>{r=d}};return dy.push(s),()=>{r?Vh(()=>{r()}):s.skipped=!0}});return rS(),t}function Jue(e,t){const n=bP(r=>{let s;const d={type:e,args:t,resolve:r,setCloseFn:p=>{s=p}};return dy.push(d),()=>{s?Vh(()=>{s()}):d.skipped=!0}});return rS(),n}const Que=e=>{dy.push({type:"destroy",key:e}),rS()},ede=["success","info","warning","error","loading"],tde={open:Yue,destroy:Que,config:Zue,useMessage:LY,_InternalPanelDoNotUseOrYouWillBeFired:PY},Vi=tde;ede.forEach(e=>{Vi[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Jue(e,n)}});var nde=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const rde=e=>{const{prefixCls:t,className:n,closeIcon:r,closable:s,type:d,title:p,children:i,footer:x}=e,S=nde(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:T}=_.useContext(fr),M=T(),$=t||T("modal"),L=Qo(M),[N,V,B]=R5($,L),j=`${$}-confirm`;let H={};return d?H={closable:s??!1,title:"",footer:"",children:_.createElement(A5,Object.assign({},e,{prefixCls:$,confirmPrefixCls:j,rootPrefixCls:M,content:i}))}:H={closable:s??!0,title:p,footer:x!==null&&_.createElement(I5,Object.assign({},e)),children:i},N(_.createElement(p5,Object.assign({prefixCls:$,className:pt(V,`${$}-pure-panel`,d&&j,d&&`${j}-${d}`,n,B,L)},S,{closeIcon:T5($,r),closable:s},H)))},ide=j5(rde);function OV(e){return My(z5(e))}const Us=O5;Us.useModal=_te;Us.info=function(t){return My(L5(t))};Us.success=function(t){return My(N5(t))};Us.error=function(t){return My(F5(t))};Us.warning=OV;Us.warn=OV;Us.confirm=function(t){return My(B5(t))};Us.destroyAll=function(){for(;jh.length;){const t=jh.pop();t&&t()}};Us.config=pte;Us._InternalPanelDoNotUseOrYouWillBeFired=ide;const ode=e=>{const{componentCls:t,iconCls:n,antCls:r,zIndexPopup:s,colorText:d,colorWarning:p,marginXXS:i,marginXS:x,fontSize:S,fontWeightStrong:T,colorTextHeading:M}=e;return{[t]:{zIndex:s,[`&${r}-popover`]:{fontSize:S},[`${t}-message`]:{marginBottom:x,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${t}-message-icon ${n}`]:{color:p,fontSize:S,lineHeight:1,marginInlineEnd:x},[`${t}-title`]:{fontWeight:T,color:M,"&:only-child":{fontWeight:"normal"}},[`${t}-description`]:{marginTop:i,color:d}},[`${t}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:x}}}}},ade=e=>{const{zIndexPopupBase:t}=e;return{zIndexPopup:t+60}},AV=Qi("Popconfirm",e=>ode(e),ade,{resetStyle:!1});var sde=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const DV=e=>{const{prefixCls:t,okButtonProps:n,cancelButtonProps:r,title:s,description:d,cancelText:p,okText:i,okType:x="primary",icon:S=_.createElement(xw,null),showCancel:T=!0,close:M,onConfirm:$,onCancel:L,onPopupClick:N}=e,{getPrefixCls:V}=_.useContext(fr),[B]=Zl("Popconfirm",ru.Popconfirm),j=_m(s),H=_m(d);return _.createElement("div",{className:`${t}-inner-content`,onClick:N},_.createElement("div",{className:`${t}-message`},S&&_.createElement("span",{className:`${t}-message-icon`},S),_.createElement("div",{className:`${t}-message-text`},j&&_.createElement("div",{className:`${t}-title`},j),H&&_.createElement("div",{className:`${t}-description`},H))),_.createElement("div",{className:`${t}-buttons`},T&&_.createElement(Di,Object.assign({onClick:L,size:"small"},r),p||(B==null?void 0:B.cancelText)),_.createElement(OP,{buttonProps:Object.assign(Object.assign({size:"small"},CP(x)),n),actionFn:$,close:M,prefixCls:V("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},i||(B==null?void 0:B.okText))))},lde=e=>{const{prefixCls:t,placement:n,className:r,style:s}=e,d=sde(e,["prefixCls","placement","className","style"]),{getPrefixCls:p}=_.useContext(fr),i=p("popconfirm",t),[x]=AV(i);return x(_.createElement(b6,{placement:n,className:pt(i,r),style:s,content:_.createElement(DV,Object.assign({prefixCls:i},d))}))};var cde=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const ude=_.forwardRef((e,t)=>{var n,r;const{prefixCls:s,placement:d="top",trigger:p="click",okType:i="primary",icon:x=_.createElement(xw,null),children:S,overlayClassName:T,onOpenChange:M,onVisibleChange:$}=e,L=cde(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),{getPrefixCls:N}=_.useContext(fr),[V,B]=Bi(!1,{value:(n=e.open)!==null&&n!==void 0?n:e.visible,defaultValue:(r=e.defaultOpen)!==null&&r!==void 0?r:e.defaultVisible}),j=(se,ae)=>{B(se,!0),$==null||$(se),M==null||M(se,ae)},H=se=>{j(!1,se)},W=se=>{var ae;return(ae=e.onConfirm)===null||ae===void 0?void 0:ae.call(void 0,se)},X=se=>{var ae;j(!1,se),(ae=e.onCancel)===null||ae===void 0||ae.call(void 0,se)},ee=(se,ae)=>{const{disabled:ce=!1}=e;ce||j(se,ae)},J=N("popconfirm",s),Y=pt(J,T),[re]=AV(J);return re(_.createElement(Fw,Object.assign({},vo(L,["title"]),{trigger:p,placement:d,onOpenChange:ee,open:V,ref:t,overlayClassName:Y,content:_.createElement(DV,Object.assign({okType:i,icon:x},e,{prefixCls:J,close:H,onConfirm:W,onCancel:X})),"data-popover-inject":!0}),S))}),wm=ude;wm._InternalPanelDoNotUseOrYouWillBeFired=lde;var dde={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"},hde=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:dde}))},fde=_.forwardRef(hde),pde={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"outlined"},mde=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:pde}))},gde=_.forwardRef(mde),vde={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z"}}]},name:"caret-up",theme:"outlined"},yde=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:vde}))},_de=_.forwardRef(yde),xde={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},bde=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:xde}))},$V=_.forwardRef(bde),wde={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"},Sde=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:wde}))},Cde=_.forwardRef(Sde),Ede={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},Tde=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:Ede}))},Ide=_.forwardRef(Tde),Mde={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},Pde=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:Mde}))},cR=_.forwardRef(Pde),Rde={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},Ode=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:Rde}))},uR=_.forwardRef(Ode),Ade={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"},Dde=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:Ade}))},$de=_.forwardRef(Dde),kde={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"},zde=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:kde}))},kV=_.forwardRef(zde),Lde={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M349 838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V642H349v196zm531.1-684H143.9c-24.5 0-39.8 26.7-27.5 48l221.3 376h348.8l221.3-376c12.1-21.3-3.2-48-27.7-48z"}}]},name:"filter",theme:"filled"},Nde=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:Lde}))},Fde=_.forwardRef(Nde),Bde={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"},jde=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:Bde}))},Vde=_.forwardRef(jde),Hde={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},Ude=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:Hde}))},Wde=_.forwardRef(Ude),Gde={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z"}}]},name:"holder",theme:"outlined"},qde=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:Gde}))},Kde=_.forwardRef(qde),Xde={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},Zde=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:Xde}))},Yde=_.forwardRef(Zde),Jde={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M603.3 327.5l-246 178a7.95 7.95 0 000 12.9l246 178c5.3 3.8 12.7 0 12.7-6.5V643c0-10.2-4.9-19.9-13.2-25.9L457.4 512l145.4-105.2c8.3-6 13.2-15.6 13.2-25.9V334c0-6.5-7.4-10.3-12.7-6.5z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"left-circle",theme:"outlined"},Qde=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:Jde}))},ehe=_.forwardRef(Qde),the={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"}}]},name:"menu",theme:"outlined"},nhe=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:the}))},rhe=_.forwardRef(nhe),ihe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"},ohe=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:ihe}))},ahe=_.forwardRef(ohe),she={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"},lhe=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:she}))},che=_.forwardRef(lhe),uhe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},dhe=function(t,n){return _.createElement(ii,qt({},t,{ref:n,icon:uhe}))},zV=_.forwardRef(dhe),ud={},zy="rc-table-internal-hook";function dR(e){var t=_.createContext(void 0),n=function(s){var d=s.value,p=s.children,i=_.useRef(d);i.current=d;var x=_.useState(function(){return{getValue:function(){return i.current},listeners:new Set}}),S=ot(x,1),T=S[0];return Xr(function(){xc.unstable_batchedUpdates(function(){T.listeners.forEach(function(M){M(d)})})},[d]),_.createElement(t.Provider,{value:T},p)};return{Context:t,Provider:n,defaultValue:e}}function Pa(e,t){var n=Zr(typeof t=="function"?t:function(M){if(t===void 0)return M;if(!Array.isArray(t))return M[t];var $={};return t.forEach(function(L){$[L]=M[L]}),$}),r=_.useContext(e==null?void 0:e.Context),s=r||{},d=s.listeners,p=s.getValue,i=_.useRef();i.current=n(r?p():e==null?void 0:e.defaultValue);var x=_.useState({}),S=ot(x,2),T=S[1];return Xr(function(){if(!r)return;function M($){var L=n($);wc(i.current,L,!0)||T({})}return d.add(M),function(){d.delete(M)}},[r]),i.current}function hhe(){var e=_.createContext(null);function t(){return _.useContext(e)}function n(s,d){var p=bc(s),i=function(S,T){var M=p?{ref:T}:{},$=_.useRef(0),L=_.useRef(S),N=t();return N!==null?_.createElement(s,qt({},S,M)):((!d||d(L.current,S))&&($.current+=1),L.current=S,_.createElement(e.Provider,{value:$.current},_.createElement(s,qt({},S,M))))};return p?_.forwardRef(i):i}function r(s,d){var p=bc(s),i=function(S,T){var M=p?{ref:T}:{};return t(),_.createElement(s,qt({},S,M))};return p?_.memo(_.forwardRef(i),d):_.memo(i,d)}return{makeImmutable:n,responseImmutable:r,useImmutableMark:t}}var hR=hhe(),LV=hR.makeImmutable,jm=hR.responseImmutable,fhe=hR.useImmutableMark,ss=dR(),NV=_.createContext({renderWithProps:!1}),phe="RC_TABLE_KEY";function mhe(e){return e==null?[]:Array.isArray(e)?e:[e]}function iS(e){var t=[],n={};return e.forEach(function(r){for(var s=r||{},d=s.key,p=s.dataIndex,i=d||mhe(p).join("-")||phe;n[i];)i="".concat(i,"_next");n[i]=!0,t.push(i)}),t}function HI(e){return e!=null}function ghe(e){return typeof e=="number"&&!Number.isNaN(e)}function vhe(e){return e&&cr(e)==="object"&&!Array.isArray(e)&&!_.isValidElement(e)}function yhe(e,t,n,r,s,d){var p=_.useContext(NV),i=fhe(),x=af(function(){if(HI(r))return[r];var S=t==null||t===""?[]:Array.isArray(t)?t:[t],T=zs(e,S),M=T,$=void 0;if(s){var L=s(T,e,n);vhe(L)?(M=L.children,$=L.props,p.renderWithProps=!0):M=L}return[M,$]},[i,e,r,t,s,n],function(S,T){if(d){var M=ot(S,2),$=M[1],L=ot(T,2),N=L[1];return d(N,$)}return p.renderWithProps?!0:!wc(S,T,!0)});return x}function _he(e,t,n,r){var s=e+t-1;return e<=r&&s>=n}function xhe(e,t){return Pa(ss,function(n){var r=_he(e,t||1,n.hoverStartRow,n.hoverEndRow);return[r,n.onHover]})}var bhe=function(t){var n=t.ellipsis,r=t.rowType,s=t.children,d,p=n===!0?{showTitle:!0}:n;return p&&(p.showTitle||r==="header")&&(typeof s=="string"||typeof s=="number"?d=s.toString():_.isValidElement(s)&&typeof s.props.children=="string"&&(d=s.props.children)),d};function whe(e){var t,n,r,s,d,p,i,x,S=e.component,T=e.children,M=e.ellipsis,$=e.scope,L=e.prefixCls,N=e.className,V=e.align,B=e.record,j=e.render,H=e.dataIndex,W=e.renderIndex,X=e.shouldCellUpdate,ee=e.index,J=e.rowType,Y=e.colSpan,re=e.rowSpan,se=e.fixLeft,ae=e.fixRight,ce=e.firstFixLeft,Ce=e.lastFixLeft,we=e.firstFixRight,ge=e.lastFixRight,ve=e.appendNode,de=e.additionalProps,pe=de===void 0?{}:de,fe=e.isSticky,me="".concat(L,"-cell"),Ie=Pa(ss,["supportSticky","allColumnsFixedLeft","rowHoverable"]),Me=Ie.supportSticky,Be=Ie.allColumnsFixedLeft,$e=Ie.rowHoverable,ze=yhe(B,H,W,T,j,X),Je=ot(ze,2),yt=Je[0],at=Je[1],gt={},wt=typeof se=="number"&&Me,Pe=typeof ae=="number"&&Me;wt&&(gt.position="sticky",gt.left=se),Pe&&(gt.position="sticky",gt.right=ae);var mt=(t=(n=(r=at==null?void 0:at.colSpan)!==null&&r!==void 0?r:pe.colSpan)!==null&&n!==void 0?n:Y)!==null&&t!==void 0?t:1,dt=(s=(d=(p=at==null?void 0:at.rowSpan)!==null&&p!==void 0?p:pe.rowSpan)!==null&&d!==void 0?d:re)!==null&&s!==void 0?s:1,ht=xhe(ee,dt),je=ot(ht,2),St=je[0],Ct=je[1],Lt=Zr(function(Rt){var dn;B&&Ct(ee,ee+dt-1),pe==null||(dn=pe.onMouseEnter)===null||dn===void 0||dn.call(pe,Rt)}),At=Zr(function(Rt){var dn;B&&Ct(-1,-1),pe==null||(dn=pe.onMouseLeave)===null||dn===void 0||dn.call(pe,Rt)});if(mt===0||dt===0)return null;var Yt=(i=pe.title)!==null&&i!==void 0?i:bhe({rowType:J,ellipsis:M,children:yt}),Kt=pt(me,N,(x={},De(De(De(De(De(De(De(De(De(De(x,"".concat(me,"-fix-left"),wt&&Me),"".concat(me,"-fix-left-first"),ce&&Me),"".concat(me,"-fix-left-last"),Ce&&Me),"".concat(me,"-fix-left-all"),Ce&&Be&&Me),"".concat(me,"-fix-right"),Pe&&Me),"".concat(me,"-fix-right-first"),we&&Me),"".concat(me,"-fix-right-last"),ge&&Me),"".concat(me,"-ellipsis"),M),"".concat(me,"-with-append"),ve),"".concat(me,"-fix-sticky"),(wt||Pe)&&fe&&Me),De(x,"".concat(me,"-row-hover"),!at&&St)),pe.className,at==null?void 0:at.className),Dt={};V&&(Dt.textAlign=V);var Wt=We(We(We(We({},gt),pe.style),Dt),at==null?void 0:at.style),Vt=yt;return cr(Vt)==="object"&&!Array.isArray(Vt)&&!_.isValidElement(Vt)&&(Vt=null),M&&(Ce||we)&&(Vt=_.createElement("span",{className:"".concat(me,"-content")},Vt)),_.createElement(S,qt({},at,pe,{className:Kt,style:Wt,title:Yt,scope:$,onMouseEnter:$e?Lt:void 0,onMouseLeave:$e?At:void 0,colSpan:mt!==1?mt:null,rowSpan:dt!==1?dt:null}),ve,Vt)}const Vm=_.memo(whe);function fR(e,t,n,r,s){var d=n[e]||{},p=n[t]||{},i,x;d.fixed==="left"?i=r.left[s==="rtl"?t:e]:p.fixed==="right"&&(x=r.right[s==="rtl"?e:t]);var S=!1,T=!1,M=!1,$=!1,L=n[t+1],N=n[e-1],V=L&&!L.fixed||N&&!N.fixed||n.every(function(X){return X.fixed==="left"});if(s==="rtl"){if(i!==void 0){var B=N&&N.fixed==="left";$=!B&&V}else if(x!==void 0){var j=L&&L.fixed==="right";M=!j&&V}}else if(i!==void 0){var H=L&&L.fixed==="left";S=!H&&V}else if(x!==void 0){var W=N&&N.fixed==="right";T=!W&&V}return{fixLeft:i,fixRight:x,lastFixLeft:S,firstFixRight:T,lastFixRight:M,firstFixLeft:$,isSticky:r.isSticky}}var FV=_.createContext({});function She(e){var t=e.className,n=e.index,r=e.children,s=e.colSpan,d=s===void 0?1:s,p=e.rowSpan,i=e.align,x=Pa(ss,["prefixCls","direction"]),S=x.prefixCls,T=x.direction,M=_.useContext(FV),$=M.scrollColumnIndex,L=M.stickyOffsets,N=M.flattenColumns,V=n+d-1,B=V+1===$?d+1:d,j=fR(n,n+B-1,N,L,T);return _.createElement(Vm,qt({className:t,index:n,component:"td",prefixCls:S,record:null,dataIndex:null,align:i,colSpan:B,rowSpan:p,render:function(){return r}},j))}var Che=["children"];function Ehe(e){var t=e.children,n=Er(e,Che);return _.createElement("tr",n,t)}function oS(e){var t=e.children;return t}oS.Row=Ehe;oS.Cell=She;function The(e){var t=e.children,n=e.stickyOffsets,r=e.flattenColumns,s=Pa(ss,"prefixCls"),d=r.length-1,p=r[d],i=_.useMemo(function(){return{stickyOffsets:n,flattenColumns:r,scrollColumnIndex:p!=null&&p.scrollbar?d:null}},[p,r,d,n]);return _.createElement(FV.Provider,{value:i},_.createElement("tfoot",{className:"".concat(s,"-summary")},t))}const fb=jm(The);var BV=oS;function Ihe(e){return null}function Mhe(e){return null}function jV(e,t,n,r,s,d,p){e.push({record:t,indent:n,index:p});var i=d(t),x=s==null?void 0:s.has(i);if(t&&Array.isArray(t[r])&&x)for(var S=0;S<t[r].length;S+=1)jV(e,t[r][S],n+1,r,s,d,S)}function VV(e,t,n,r){var s=_.useMemo(function(){if(n!=null&&n.size){for(var d=[],p=0;p<(e==null?void 0:e.length);p+=1){var i=e[p];jV(d,i,0,t,n,r,p)}return d}return e==null?void 0:e.map(function(x,S){return{record:x,indent:0,index:S}})},[e,t,n,r]);return s}function HV(e,t,n,r){var s=Pa(ss,["prefixCls","fixedInfoList","flattenColumns","expandableType","expandRowByClick","onTriggerExpand","rowClassName","expandedRowClassName","indentSize","expandIcon","expandedRowRender","expandIconColumnIndex","expandedKeys","childrenColumnName","rowExpandable","onRow"]),d=s.flattenColumns,p=s.expandableType,i=s.expandedKeys,x=s.childrenColumnName,S=s.onTriggerExpand,T=s.rowExpandable,M=s.onRow,$=s.expandRowByClick,L=s.rowClassName,N=p==="nest",V=p==="row"&&(!T||T(e)),B=V||N,j=i&&i.has(t),H=x&&e&&e[x],W=Zr(S),X=M==null?void 0:M(e,n),ee=X==null?void 0:X.onClick,J=function(ae){$&&B&&S(e,ae);for(var ce=arguments.length,Ce=new Array(ce>1?ce-1:0),we=1;we<ce;we++)Ce[we-1]=arguments[we];ee==null||ee.apply(void 0,[ae].concat(Ce))},Y;typeof L=="string"?Y=L:typeof L=="function"&&(Y=L(e,n,r));var re=iS(d);return We(We({},s),{},{columnsKey:re,nestExpandable:N,expanded:j,hasNestChildren:H,record:e,onTriggerExpand:W,rowSupportExpand:V,expandable:B,rowProps:We(We({},X),{},{className:pt(Y,X==null?void 0:X.className),onClick:J})})}function UV(e){var t=e.prefixCls,n=e.children,r=e.component,s=e.cellComponent,d=e.className,p=e.expanded,i=e.colSpan,x=e.isEmpty,S=Pa(ss,["scrollbarSize","fixHeader","fixColumn","componentWidth","horizonScroll"]),T=S.scrollbarSize,M=S.fixHeader,$=S.fixColumn,L=S.componentWidth,N=S.horizonScroll,V=n;return(x?N&&L:$)&&(V=_.createElement("div",{style:{width:L-(M&&!x?T:0),position:"sticky",left:0,overflow:"hidden"},className:"".concat(t,"-expanded-row-fixed")},V)),_.createElement(r,{className:d,style:{display:p?null:"none"}},_.createElement(Vm,{component:s,prefixCls:t,colSpan:i},V))}function Phe(e){var t=e.prefixCls,n=e.record,r=e.onExpand,s=e.expanded,d=e.expandable,p="".concat(t,"-row-expand-icon");if(!d)return _.createElement("span",{className:pt(p,"".concat(t,"-row-spaced"))});var i=function(S){r(n,S),S.stopPropagation()};return _.createElement("span",{className:pt(p,De(De({},"".concat(t,"-row-expanded"),s),"".concat(t,"-row-collapsed"),!s)),onClick:i})}function Rhe(e,t,n){var r=[];function s(d){(d||[]).forEach(function(p,i){r.push(t(p,i)),s(p[n])})}return s(e),r}function WV(e,t,n,r){return typeof e=="string"?e:typeof e=="function"?e(t,n,r):""}function GV(e,t,n,r,s){var d=e.record,p=e.prefixCls,i=e.columnsKey,x=e.fixedInfoList,S=e.expandIconColumnIndex,T=e.nestExpandable,M=e.indentSize,$=e.expandIcon,L=e.expanded,N=e.hasNestChildren,V=e.onTriggerExpand,B=i[n],j=x[n],H;n===(S||0)&&T&&(H=_.createElement(_.Fragment,null,_.createElement("span",{style:{paddingLeft:"".concat(M*r,"px")},className:"".concat(p,"-row-indent indent-level-").concat(r)}),$({prefixCls:p,expanded:L,expandable:N,record:d,onExpand:V})));var W;return t.onCell&&(W=t.onCell(d,s)),{key:B,fixedInfo:j,appendCellNode:H,additionalCellProps:W||{}}}function Ohe(e){var t=e.className,n=e.style,r=e.record,s=e.index,d=e.renderIndex,p=e.rowKey,i=e.indent,x=i===void 0?0:i,S=e.rowComponent,T=e.cellComponent,M=e.scopeCellComponent,$=HV(r,p,s,x),L=$.prefixCls,N=$.flattenColumns,V=$.expandedRowClassName,B=$.expandedRowRender,j=$.rowProps,H=$.expanded,W=$.rowSupportExpand,X=_.useRef(!1);X.current||(X.current=H);var ee=WV(V,r,s,x),J=_.createElement(S,qt({},j,{"data-row-key":p,className:pt(t,"".concat(L,"-row"),"".concat(L,"-row-level-").concat(x),j==null?void 0:j.className,De({},ee,x>=1)),style:We(We({},n),j==null?void 0:j.style)}),N.map(function(se,ae){var ce=se.render,Ce=se.dataIndex,we=se.className,ge=GV($,se,ae,x,s),ve=ge.key,de=ge.fixedInfo,pe=ge.appendCellNode,fe=ge.additionalCellProps;return _.createElement(Vm,qt({className:we,ellipsis:se.ellipsis,align:se.align,scope:se.rowScope,component:se.rowScope?M:T,prefixCls:L,key:ve,record:r,index:s,renderIndex:d,dataIndex:Ce,render:ce,shouldCellUpdate:se.shouldCellUpdate},de,{appendNode:pe,additionalProps:fe}))})),Y;if(W&&(X.current||H)){var re=B(r,s,x+1,H);Y=_.createElement(UV,{expanded:H,className:pt("".concat(L,"-expanded-row"),"".concat(L,"-expanded-row-level-").concat(x+1),ee),prefixCls:L,component:S,cellComponent:T,colSpan:N.length,isEmpty:!1},re)}return _.createElement(_.Fragment,null,J,Y)}const Ahe=jm(Ohe);function Dhe(e){var t=e.columnKey,n=e.onColumnResize,r=_.useRef();return _.useEffect(function(){r.current&&n(t,r.current.offsetWidth)},[]),_.createElement(ga,{data:t},_.createElement("td",{ref:r,style:{padding:0,border:0,height:0}},_.createElement("div",{style:{height:0,overflow:"hidden"}}," ")))}function $he(e){var t=e.prefixCls,n=e.columnsKey,r=e.onColumnResize;return _.createElement("tr",{"aria-hidden":"true",className:"".concat(t,"-measure-row"),style:{height:0,fontSize:0}},_.createElement(ga.Collection,{onBatchResize:function(d){d.forEach(function(p){var i=p.data,x=p.size;r(i,x.offsetWidth)})}},n.map(function(s){return _.createElement(Dhe,{key:s,columnKey:s,onColumnResize:r})})))}function khe(e){var t=e.data,n=e.measureColumnWidth,r=Pa(ss,["prefixCls","getComponent","onColumnResize","flattenColumns","getRowKey","expandedKeys","childrenColumnName","emptyNode"]),s=r.prefixCls,d=r.getComponent,p=r.onColumnResize,i=r.flattenColumns,x=r.getRowKey,S=r.expandedKeys,T=r.childrenColumnName,M=r.emptyNode,$=VV(t,T,S,x),L=_.useRef({renderWithProps:!1}),N=d(["body","wrapper"],"tbody"),V=d(["body","row"],"tr"),B=d(["body","cell"],"td"),j=d(["body","cell"],"th"),H;t.length?H=$.map(function(X,ee){var J=X.record,Y=X.indent,re=X.index,se=x(J,ee);return _.createElement(Ahe,{key:se,rowKey:se,record:J,index:ee,renderIndex:re,rowComponent:V,cellComponent:B,scopeCellComponent:j,getRowKey:x,indent:Y})}):H=_.createElement(UV,{expanded:!0,className:"".concat(s,"-placeholder"),prefixCls:s,component:V,cellComponent:B,colSpan:i.length,isEmpty:!0},M);var W=iS(i);return _.createElement(NV.Provider,{value:L.current},_.createElement(N,{className:"".concat(s,"-tbody")},n&&_.createElement($he,{prefixCls:s,columnsKey:W,onColumnResize:p}),H))}const zhe=jm(khe);var Lhe=["expandable"],M0="RC_TABLE_INTERNAL_COL_DEFINE";function Nhe(e){var t=e.expandable,n=Er(e,Lhe),r;return"expandable"in e?r=We(We({},n),t):r=n,r.showExpandColumn===!1&&(r.expandIconColumnIndex=-1),r}var Fhe=["columnType"];function qV(e){for(var t=e.colWidths,n=e.columns,r=e.columCount,s=Pa(ss,["tableLayout"]),d=s.tableLayout,p=[],i=r||n.length,x=!1,S=i-1;S>=0;S-=1){var T=t[S],M=n&&n[S],$=void 0,L=void 0;if(M&&($=M[M0],d==="auto"&&(L=M.minWidth)),T||L||$||x){var N=$||{};N.columnType;var V=Er(N,Fhe);p.unshift(_.createElement("col",qt({key:S,style:{width:T,minWidth:L}},V))),x=!0}}return _.createElement("colgroup",null,p)}var Bhe=["className","noData","columns","flattenColumns","colWidths","columCount","stickyOffsets","direction","fixHeader","stickyTopOffset","stickyBottomOffset","stickyClassName","onScroll","maxContentScroll","children"];function jhe(e,t){return _.useMemo(function(){for(var n=[],r=0;r<t;r+=1){var s=e[r];if(s!==void 0)n[r]=s;else return null}return n},[e.join("_"),t])}var Vhe=_.forwardRef(function(e,t){var n=e.className,r=e.noData,s=e.columns,d=e.flattenColumns,p=e.colWidths,i=e.columCount,x=e.stickyOffsets,S=e.direction,T=e.fixHeader,M=e.stickyTopOffset,$=e.stickyBottomOffset,L=e.stickyClassName,N=e.onScroll,V=e.maxContentScroll,B=e.children,j=Er(e,Bhe),H=Pa(ss,["prefixCls","scrollbarSize","isSticky","getComponent"]),W=H.prefixCls,X=H.scrollbarSize,ee=H.isSticky,J=H.getComponent,Y=J(["header","table"],"table"),re=ee&&!T?0:X,se=_.useRef(null),ae=_.useCallback(function(fe){Z0(t,fe),Z0(se,fe)},[]);_.useEffect(function(){var fe;function me(Ie){var Me=Ie,Be=Me.currentTarget,$e=Me.deltaX;$e&&(N({currentTarget:Be,scrollLeft:Be.scrollLeft+$e}),Ie.preventDefault())}return(fe=se.current)===null||fe===void 0||fe.addEventListener("wheel",me,{passive:!1}),function(){var Ie;(Ie=se.current)===null||Ie===void 0||Ie.removeEventListener("wheel",me)}},[]);var ce=_.useMemo(function(){return d.every(function(fe){return fe.width})},[d]),Ce=d[d.length-1],we={fixed:Ce?Ce.fixed:null,scrollbar:!0,onHeaderCell:function(){return{className:"".concat(W,"-cell-scrollbar")}}},ge=_.useMemo(function(){return re?[].concat(un(s),[we]):s},[re,s]),ve=_.useMemo(function(){return re?[].concat(un(d),[we]):d},[re,d]),de=_.useMemo(function(){var fe=x.right,me=x.left;return We(We({},x),{},{left:S==="rtl"?[].concat(un(me.map(function(Ie){return Ie+re})),[0]):me,right:S==="rtl"?fe:[].concat(un(fe.map(function(Ie){return Ie+re})),[0]),isSticky:ee})},[re,x,ee]),pe=jhe(p,i);return _.createElement("div",{style:We({overflow:"hidden"},ee?{top:M,bottom:$}:{}),ref:ae,className:pt(n,De({},L,!!L))},_.createElement(Y,{style:{tableLayout:"fixed",visibility:r||pe?null:"hidden"}},(!r||!V||ce)&&_.createElement(qV,{colWidths:pe?[].concat(un(pe),[re]):[],columCount:i+1,columns:ve}),B(We(We({},j),{},{stickyOffsets:de,columns:ge,flattenColumns:ve}))))});const iL=_.memo(Vhe);var Hhe=function(t){var n=t.cells,r=t.stickyOffsets,s=t.flattenColumns,d=t.rowComponent,p=t.cellComponent,i=t.onHeaderRow,x=t.index,S=Pa(ss,["prefixCls","direction"]),T=S.prefixCls,M=S.direction,$;i&&($=i(n.map(function(N){return N.column}),x));var L=iS(n.map(function(N){return N.column}));return _.createElement(d,$,n.map(function(N,V){var B=N.column,j=fR(N.colStart,N.colEnd,s,r,M),H;return B&&B.onHeaderCell&&(H=N.column.onHeaderCell(B)),_.createElement(Vm,qt({},N,{scope:B.title?N.colSpan>1?"colgroup":"col":null,ellipsis:B.ellipsis,align:B.align,component:p,prefixCls:T,key:L[V]},j,{additionalProps:H,rowType:"header"}))}))};function Uhe(e){var t=[];function n(p,i){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;t[x]=t[x]||[];var S=i,T=p.filter(Boolean).map(function(M){var $={key:M.key,className:M.className||"",children:M.title,column:M,colStart:S},L=1,N=M.children;return N&&N.length>0&&(L=n(N,S,x+1).reduce(function(V,B){return V+B},0),$.hasSubColumns=!0),"colSpan"in M&&(L=M.colSpan),"rowSpan"in M&&($.rowSpan=M.rowSpan),$.colSpan=L,$.colEnd=$.colStart+L-1,t[x].push($),S+=L,L});return T}n(e,0);for(var r=t.length,s=function(i){t[i].forEach(function(x){!("rowSpan"in x)&&!x.hasSubColumns&&(x.rowSpan=r-i)})},d=0;d<r;d+=1)s(d);return t}var Whe=function(t){var n=t.stickyOffsets,r=t.columns,s=t.flattenColumns,d=t.onHeaderRow,p=Pa(ss,["prefixCls","getComponent"]),i=p.prefixCls,x=p.getComponent,S=_.useMemo(function(){return Uhe(r)},[r]),T=x(["header","wrapper"],"thead"),M=x(["header","row"],"tr"),$=x(["header","cell"],"th");return _.createElement(T,{className:"".concat(i,"-thead")},S.map(function(L,N){var V=_.createElement(Hhe,{key:N,flattenColumns:s,cells:L,stickyOffsets:n,rowComponent:M,cellComponent:$,onHeaderRow:d,index:N});return V}))};const oL=jm(Whe);function aL(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return typeof t=="number"?t:t.endsWith("%")?e*parseFloat(t)/100:null}function Ghe(e,t,n){return _.useMemo(function(){if(t&&t>0){var r=0,s=0;e.forEach(function($){var L=aL(t,$.width);L?r+=L:s+=1});var d=Math.max(t,n),p=Math.max(d-r,s),i=s,x=p/s,S=0,T=e.map(function($){var L=We({},$),N=aL(t,L.width);if(N)L.width=N;else{var V=Math.floor(x);L.width=i===1?p:V,p-=V,i-=1}return S+=L.width,L});if(S<d){var M=d/S;p=d,T.forEach(function($,L){var N=Math.floor($.width*M);$.width=L===T.length-1?p:N,p-=N})}return[T,Math.max(S,d)]}return[e,t]},[e,t,n])}var qhe=["children"],Khe=["fixed"];function pR(e){return Ha(e).filter(function(t){return _.isValidElement(t)}).map(function(t){var n=t.key,r=t.props,s=r.children,d=Er(r,qhe),p=We({key:n},d);return s&&(p.children=pR(s)),p})}function KV(e){return e.filter(function(t){return t&&cr(t)==="object"&&!t.hidden}).map(function(t){var n=t.children;return n&&n.length>0?We(We({},t),{},{children:KV(n)}):t})}function UI(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"key";return e.filter(function(n){return n&&cr(n)==="object"}).reduce(function(n,r,s){var d=r.fixed,p=d===!0?"left":d,i="".concat(t,"-").concat(s),x=r.children;return x&&x.length>0?[].concat(un(n),un(UI(x,i).map(function(S){return We({fixed:p},S)}))):[].concat(un(n),[We(We({key:i},r),{},{fixed:p})])},[])}function Xhe(e){return e.map(function(t){var n=t.fixed,r=Er(t,Khe),s=n;return n==="left"?s="right":n==="right"&&(s="left"),We({fixed:s},r)})}function Zhe(e,t){var n=e.prefixCls,r=e.columns,s=e.children,d=e.expandable,p=e.expandedKeys,i=e.columnTitle,x=e.getRowKey,S=e.onTriggerExpand,T=e.expandIcon,M=e.rowExpandable,$=e.expandIconColumnIndex,L=e.direction,N=e.expandRowByClick,V=e.columnWidth,B=e.fixed,j=e.scrollWidth,H=e.clientWidth,W=_.useMemo(function(){var Ce=r||pR(s)||[];return KV(Ce.slice())},[r,s]),X=_.useMemo(function(){if(d){var Ce=W.slice();if(!Ce.includes(ud)){var we=$||0;we>=0&&Ce.splice(we,0,ud)}var ge=Ce.indexOf(ud);Ce=Ce.filter(function(fe,me){return fe!==ud||me===ge});var ve=W[ge],de;(B==="left"||B)&&!$?de="left":(B==="right"||B)&&$===W.length?de="right":de=ve?ve.fixed:null;var pe=De(De(De(De(De(De({},M0,{className:"".concat(n,"-expand-icon-col"),columnType:"EXPAND_COLUMN"}),"title",i),"fixed",de),"className","".concat(n,"-row-expand-icon-cell")),"width",V),"render",function(me,Ie,Me){var Be=x(Ie,Me),$e=p.has(Be),ze=M?M(Ie):!0,Je=T({prefixCls:n,expanded:$e,expandable:ze,record:Ie,onExpand:S});return N?_.createElement("span",{onClick:function(at){return at.stopPropagation()}},Je):Je});return Ce.map(function(fe){return fe===ud?pe:fe})}return W.filter(function(fe){return fe!==ud})},[d,W,x,p,T,L]),ee=_.useMemo(function(){var Ce=X;return t&&(Ce=t(Ce)),Ce.length||(Ce=[{render:function(){return null}}]),Ce},[t,X,L]),J=_.useMemo(function(){return L==="rtl"?Xhe(UI(ee)):UI(ee)},[ee,L,j]),Y=_.useMemo(function(){for(var Ce=-1,we=J.length-1;we>=0;we-=1){var ge=J[we].fixed;if(ge==="left"||ge===!0){Ce=we;break}}if(Ce>=0)for(var ve=0;ve<=Ce;ve+=1){var de=J[ve].fixed;if(de!=="left"&&de!==!0)return!0}var pe=J.findIndex(function(Ie){var Me=Ie.fixed;return Me==="right"});if(pe>=0)for(var fe=pe;fe<J.length;fe+=1){var me=J[fe].fixed;if(me!=="right")return!0}return!1},[J]),re=Ghe(J,j,H),se=ot(re,2),ae=se[0],ce=se[1];return[ee,ae,ce,Y]}function Yhe(e,t,n){var r=Nhe(e),s=r.expandIcon,d=r.expandedRowKeys,p=r.defaultExpandedRowKeys,i=r.defaultExpandAllRows,x=r.expandedRowRender,S=r.onExpand,T=r.onExpandedRowsChange,M=r.childrenColumnName,$=s||Phe,L=M||"children",N=_.useMemo(function(){return x?"row":e.expandable&&e.internalHooks===zy&&e.expandable.__PARENT_RENDER_ICON__||t.some(function(ee){return ee&&cr(ee)==="object"&&ee[L]})?"nest":!1},[!!x,t]),V=_.useState(function(){return p||(i?Rhe(t,n,L):[])}),B=ot(V,2),j=B[0],H=B[1],W=_.useMemo(function(){return new Set(d||j||[])},[d,j]),X=_.useCallback(function(ee){var J=n(ee,t.indexOf(ee)),Y,re=W.has(J);re?(W.delete(J),Y=un(W)):Y=[].concat(un(W),[J]),H(Y),S&&S(!re,ee),T&&T(Y)},[n,W,t,S,T]);return[r,N,W,$,L,X]}function Jhe(e,t,n){var r=e.map(function(s,d){return fR(d,d,e,t,n)});return af(function(){return r},[r],function(s,d){return!wc(s,d)})}function XV(e){var t=_.useRef(e),n=_.useState({}),r=ot(n,2),s=r[1],d=_.useRef(null),p=_.useRef([]);function i(x){p.current.push(x);var S=Promise.resolve();d.current=S,S.then(function(){if(d.current===S){var T=p.current,M=t.current;p.current=[],T.forEach(function($){t.current=$(t.current)}),d.current=null,M!==t.current&&s({})}})}return _.useEffect(function(){return function(){d.current=null}},[]),[t.current,i]}function Qhe(e){var t=_.useRef(null),n=_.useRef();function r(){window.clearTimeout(n.current)}function s(p){t.current=p,r(),n.current=window.setTimeout(function(){t.current=null,n.current=void 0},100)}function d(){return t.current}return _.useEffect(function(){return r},[]),[s,d]}function efe(){var e=_.useState(-1),t=ot(e,2),n=t[0],r=t[1],s=_.useState(-1),d=ot(s,2),p=d[0],i=d[1],x=_.useCallback(function(S,T){r(S),i(T)},[]);return[n,p,x]}var sL=Ma()?window:null;function tfe(e,t){var n=cr(e)==="object"?e:{},r=n.offsetHeader,s=r===void 0?0:r,d=n.offsetSummary,p=d===void 0?0:d,i=n.offsetScroll,x=i===void 0?0:i,S=n.getContainer,T=S===void 0?function(){return sL}:S,M=T()||sL,$=!!e;return _.useMemo(function(){return{isSticky:$,stickyClassName:$?"".concat(t,"-sticky-holder"):"",offsetHeader:s,offsetSummary:p,offsetScroll:x,container:M}},[$,x,s,p,t,M])}function nfe(e,t,n){var r=_.useMemo(function(){var s=t.length,d=function(S,T,M){for(var $=[],L=0,N=S;N!==T;N+=M)$.push(L),t[N].fixed&&(L+=e[N]||0);return $},p=d(0,s,1),i=d(s-1,-1,-1).reverse();return n==="rtl"?{left:i,right:p}:{left:p,right:i}},[e,t,n]);return r}function lL(e){var t=e.className,n=e.children;return _.createElement("div",{className:t},n)}var rfe=function(t,n){var r,s,d=t.scrollBodyRef,p=t.onScroll,i=t.offsetScroll,x=t.container,S=Pa(ss,"prefixCls"),T=((r=d.current)===null||r===void 0?void 0:r.scrollWidth)||0,M=((s=d.current)===null||s===void 0?void 0:s.clientWidth)||0,$=T&&M*(M/T),L=_.useRef(),N=XV({scrollLeft:0,isHiddenScrollBar:!0}),V=ot(N,2),B=V[0],j=V[1],H=_.useRef({delta:0,x:0}),W=_.useState(!1),X=ot(W,2),ee=X[0],J=X[1],Y=_.useRef(null);_.useEffect(function(){return function(){ui.cancel(Y.current)}},[]);var re=function(){J(!1)},se=function(ge){ge.persist(),H.current.delta=ge.pageX-B.scrollLeft,H.current.x=0,J(!0),ge.preventDefault()},ae=function(ge){var ve,de=ge||((ve=window)===null||ve===void 0?void 0:ve.event),pe=de.buttons;if(!ee||pe===0){ee&&J(!1);return}var fe=H.current.x+ge.pageX-H.current.x-H.current.delta;fe<=0&&(fe=0),fe+$>=M&&(fe=M-$),p({scrollLeft:fe/M*(T+2)}),H.current.x=ge.pageX},ce=function(){Y.current=ui(function(){if(d.current){var ge=Xz(d.current).top,ve=ge+d.current.offsetHeight,de=x===window?document.documentElement.scrollTop+window.innerHeight:Xz(x).top+x.clientHeight;ve-fk()<=de||ge>=de-i?j(function(pe){return We(We({},pe),{},{isHiddenScrollBar:!0})}):j(function(pe){return We(We({},pe),{},{isHiddenScrollBar:!1})})}})},Ce=function(ge){j(function(ve){return We(We({},ve),{},{scrollLeft:ge/T*M||0})})};return _.useImperativeHandle(n,function(){return{setScrollLeft:Ce,checkScrollBarVisible:ce}}),_.useEffect(function(){var we=hb(document.body,"mouseup",re,!1),ge=hb(document.body,"mousemove",ae,!1);return ce(),function(){we.remove(),ge.remove()}},[$,ee]),_.useEffect(function(){var we=hb(x,"scroll",ce,!1),ge=hb(window,"resize",ce,!1);return function(){we.remove(),ge.remove()}},[x]),_.useEffect(function(){B.isHiddenScrollBar||j(function(we){var ge=d.current;return ge?We(We({},we),{},{scrollLeft:ge.scrollLeft/ge.scrollWidth*ge.clientWidth}):we})},[B.isHiddenScrollBar]),T<=M||!$||B.isHiddenScrollBar?null:_.createElement("div",{style:{height:fk(),width:M,bottom:i},className:"".concat(S,"-sticky-scroll")},_.createElement("div",{onMouseDown:se,ref:L,className:pt("".concat(S,"-sticky-scroll-bar"),De({},"".concat(S,"-sticky-scroll-bar-active"),ee)),style:{width:"".concat($,"px"),transform:"translate3d(".concat(B.scrollLeft,"px, 0, 0)")}}))};const ife=_.forwardRef(rfe);var ZV="rc-table",ofe=[],afe={};function sfe(){return"No Data"}function lfe(e,t){var n=We({rowKey:"key",prefixCls:ZV,emptyText:sfe},e),r=n.prefixCls,s=n.className,d=n.rowClassName,p=n.style,i=n.data,x=n.rowKey,S=n.scroll,T=n.tableLayout,M=n.direction,$=n.title,L=n.footer,N=n.summary,V=n.caption,B=n.id,j=n.showHeader,H=n.components,W=n.emptyText,X=n.onRow,ee=n.onHeaderRow,J=n.onScroll,Y=n.internalHooks,re=n.transformColumns,se=n.internalRefs,ae=n.tailor,ce=n.getContainerWidth,Ce=n.sticky,we=n.rowHoverable,ge=we===void 0?!0:we,ve=i||ofe,de=!!ve.length,pe=Y===zy,fe=_.useCallback(function(Gn,jn){return zs(H,Gn)||jn},[H]),me=_.useMemo(function(){return typeof x=="function"?x:function(Gn){var jn=Gn&&Gn[x];return jn}},[x]),Ie=fe(["body"]),Me=efe(),Be=ot(Me,3),$e=Be[0],ze=Be[1],Je=Be[2],yt=Yhe(n,ve,me),at=ot(yt,6),gt=at[0],wt=at[1],Pe=at[2],mt=at[3],dt=at[4],ht=at[5],je=S==null?void 0:S.x,St=_.useState(0),Ct=ot(St,2),Lt=Ct[0],At=Ct[1],Yt=Zhe(We(We(We({},n),gt),{},{expandable:!!gt.expandedRowRender,columnTitle:gt.columnTitle,expandedKeys:Pe,getRowKey:me,onTriggerExpand:ht,expandIcon:mt,expandIconColumnIndex:gt.expandIconColumnIndex,direction:M,scrollWidth:pe&&ae&&typeof je=="number"?je:null,clientWidth:Lt}),pe?re:null),Kt=ot(Yt,4),Dt=Kt[0],Wt=Kt[1],Vt=Kt[2],Rt=Kt[3],dn=Vt??je,hn=_.useMemo(function(){return{columns:Dt,flattenColumns:Wt}},[Dt,Wt]),Pn=_.useRef(),Dn=_.useRef(),yn=_.useRef(),Rn=_.useRef();_.useImperativeHandle(t,function(){return{nativeElement:Pn.current,scrollTo:function(jn){var wr;if(yn.current instanceof HTMLElement){var Jn=jn.index,ti=jn.top,Sr=jn.key;if(ghe(ti)){var ca;(ca=yn.current)===null||ca===void 0||ca.scrollTo({top:ti})}else{var Zn,Fo=Sr??me(ve[Jn]);(Zn=yn.current.querySelector('[data-row-key="'.concat(Fo,'"]')))===null||Zn===void 0||Zn.scrollIntoView()}}else(wr=yn.current)!==null&&wr!==void 0&&wr.scrollTo&&yn.current.scrollTo(jn)}}});var kn=_.useRef(),Cn=_.useState(!1),nn=ot(Cn,2),Ut=nn[0],cn=nn[1],an=_.useState(!1),Zt=ot(an,2),Xt=Zt[0],Hn=Zt[1],br=XV(new Map),mr=ot(br,2),pr=mr[0],Tr=mr[1],ur=iS(Wt),Mr=ur.map(function(Gn){return pr.get(Gn)}),tr=_.useMemo(function(){return Mr},[Mr.join("_")]),ft=nfe(tr,Wt,M),ye=S&&HI(S.y),Se=S&&HI(dn)||!!gt.fixed,ke=Se&&Wt.some(function(Gn){var jn=Gn.fixed;return jn}),Ze=_.useRef(),Ae=tfe(Ce,r),Ge=Ae.isSticky,ut=Ae.offsetHeader,Qe=Ae.offsetSummary,_t=Ae.offsetScroll,It=Ae.stickyClassName,bt=Ae.container,Mt=_.useMemo(function(){return N==null?void 0:N(ve)},[N,ve]),kt=(ye||Ge)&&_.isValidElement(Mt)&&Mt.type===oS&&Mt.props.fixed,Gt,vn,On;ye&&(vn={overflowY:de?"scroll":"auto",maxHeight:S.y}),Se&&(Gt={overflowX:"auto"},ye||(vn={overflowY:"hidden"}),On={width:dn===!0?"auto":dn,minWidth:"100%"});var bn=_.useCallback(function(Gn,jn){Sy(Pn.current)&&Tr(function(wr){if(wr.get(Gn)!==jn){var Jn=new Map(wr);return Jn.set(Gn,jn),Jn}return wr})},[]),zn=Qhe(),Mn=ot(zn,2),wn=Mn[0],_n=Mn[1];function rr(Gn,jn){jn&&(typeof jn=="function"?jn(Gn):jn.scrollLeft!==Gn&&(jn.scrollLeft=Gn,jn.scrollLeft!==Gn&&setTimeout(function(){jn.scrollLeft=Gn},0)))}var or=Zr(function(Gn){var jn=Gn.currentTarget,wr=Gn.scrollLeft,Jn=M==="rtl",ti=typeof wr=="number"?wr:jn.scrollLeft,Sr=jn||afe;if(!_n()||_n()===Sr){var ca;wn(Sr),rr(ti,Dn.current),rr(ti,yn.current),rr(ti,kn.current),rr(ti,(ca=Ze.current)===null||ca===void 0?void 0:ca.setScrollLeft)}var Zn=jn||Dn.current;if(Zn){var Fo=pe&&ae&&typeof dn=="number"?dn:Zn.scrollWidth,Xo=Zn.clientWidth;if(Fo===Xo){cn(!1),Hn(!1);return}Jn?(cn(-ti<Fo-Xo),Hn(-ti>0)):(cn(ti>0),Hn(ti<Fo-Xo))}}),kr=Zr(function(Gn){or(Gn),J==null||J(Gn)}),zr=function(){if(Se&&yn.current){var jn;or({currentTarget:PF(yn.current),scrollLeft:(jn=yn.current)===null||jn===void 0?void 0:jn.scrollLeft})}else cn(!1),Hn(!1)},Hr=function(jn){var wr,Jn=jn.width;(wr=Ze.current)===null||wr===void 0||wr.checkScrollBarVisible();var ti=Pn.current?Pn.current.offsetWidth:Jn;pe&&ce&&Pn.current&&(ti=ce(Pn.current,ti)||ti),ti!==Lt&&(zr(),At(ti))},ei=_.useRef(!1);_.useEffect(function(){ei.current&&zr()},[Se,i,Dt.length]),_.useEffect(function(){ei.current=!0},[]);var Hi=_.useState(0),ir=ot(Hi,2),Ar=ir[0],Gr=ir[1],Ei=_.useState(!0),fo=ot(Ei,2),No=fo[0],qi=fo[1];_.useEffect(function(){(!ae||!pe)&&(yn.current instanceof Element?Gr(mI(yn.current).width):Gr(mI(Rn.current).width)),qi(TI("position","sticky"))},[]),_.useEffect(function(){pe&&se&&(se.body.current=yn.current)});var Ki=_.useCallback(function(Gn){return _.createElement(_.Fragment,null,_.createElement(oL,Gn),kt==="top"&&_.createElement(fb,Gn,Mt))},[kt,Mt]),Ui=_.useCallback(function(Gn){return _.createElement(fb,Gn,Mt)},[Mt]),Wi=fe(["table"],"table"),yi=_.useMemo(function(){return T||(ke?dn==="max-content"?"auto":"fixed":ye||Ge||Wt.some(function(Gn){var jn=Gn.ellipsis;return jn})?"fixed":"auto")},[ye,ke,Wt,T,Ge]),ki,ar={colWidths:tr,columCount:Wt.length,stickyOffsets:ft,onHeaderRow:ee,fixHeader:ye,scroll:S},Xn=_.useMemo(function(){return de?null:typeof W=="function"?W():W},[de,W]),$r=_.createElement(zhe,{data:ve,measureColumnWidth:ye||Se||Ge}),Jr=_.createElement(qV,{colWidths:Wt.map(function(Gn){var jn=Gn.width;return jn}),columns:Wt}),Un=V!=null?_.createElement("caption",{className:"".concat(r,"-caption")},V):void 0,sr=Ko(n,{data:!0}),di=Ko(n,{aria:!0});if(ye||Ge){var Pi;typeof Ie=="function"?(Pi=Ie(ve,{scrollbarSize:Ar,ref:yn,onScroll:or}),ar.colWidths=Wt.map(function(Gn,jn){var wr=Gn.width,Jn=jn===Wt.length-1?wr-Ar:wr;return typeof Jn=="number"&&!Number.isNaN(Jn)?Jn:0})):Pi=_.createElement("div",{style:We(We({},Gt),vn),onScroll:kr,ref:yn,className:pt("".concat(r,"-body"))},_.createElement(Wi,qt({style:We(We({},On),{},{tableLayout:yi})},di),Un,Jr,$r,!kt&&Mt&&_.createElement(fb,{stickyOffsets:ft,flattenColumns:Wt},Mt)));var mi=We(We(We({noData:!ve.length,maxContentScroll:Se&&dn==="max-content"},ar),hn),{},{direction:M,stickyClassName:It,onScroll:or});ki=_.createElement(_.Fragment,null,j!==!1&&_.createElement(iL,qt({},mi,{stickyTopOffset:ut,className:"".concat(r,"-header"),ref:Dn}),Ki),Pi,kt&&kt!=="top"&&_.createElement(iL,qt({},mi,{stickyBottomOffset:Qe,className:"".concat(r,"-summary"),ref:kn}),Ui),Ge&&yn.current&&yn.current instanceof Element&&_.createElement(ife,{ref:Ze,offsetScroll:_t,scrollBodyRef:yn,onScroll:or,container:bt}))}else ki=_.createElement("div",{style:We(We({},Gt),vn),className:pt("".concat(r,"-content")),onScroll:or,ref:yn},_.createElement(Wi,qt({style:We(We({},On),{},{tableLayout:yi})},di),Un,Jr,j!==!1&&_.createElement(oL,qt({},ar,hn)),$r,Mt&&_.createElement(fb,{stickyOffsets:ft,flattenColumns:Wt},Mt)));var Gi=_.createElement("div",qt({className:pt(r,s,De(De(De(De(De(De(De(De(De(De({},"".concat(r,"-rtl"),M==="rtl"),"".concat(r,"-ping-left"),Ut),"".concat(r,"-ping-right"),Xt),"".concat(r,"-layout-fixed"),T==="fixed"),"".concat(r,"-fixed-header"),ye),"".concat(r,"-fixed-column"),ke),"".concat(r,"-fixed-column-gapped"),ke&&Rt),"".concat(r,"-scroll-horizontal"),Se),"".concat(r,"-has-fix-left"),Wt[0]&&Wt[0].fixed),"".concat(r,"-has-fix-right"),Wt[Wt.length-1]&&Wt[Wt.length-1].fixed==="right")),style:p,id:B,ref:Pn},sr),$&&_.createElement(lL,{className:"".concat(r,"-title")},$(ve)),_.createElement("div",{ref:Rn,className:"".concat(r,"-container")},ki),L&&_.createElement(lL,{className:"".concat(r,"-footer")},L(ve)));Se&&(Gi=_.createElement(ga,{onResize:Hr},Gi));var Xi=Jhe(Wt,ft,M),yo=_.useMemo(function(){return{scrollX:dn,prefixCls:r,getComponent:fe,scrollbarSize:Ar,direction:M,fixedInfoList:Xi,isSticky:Ge,supportSticky:No,componentWidth:Lt,fixHeader:ye,fixColumn:ke,horizonScroll:Se,tableLayout:yi,rowClassName:d,expandedRowClassName:gt.expandedRowClassName,expandIcon:mt,expandableType:wt,expandRowByClick:gt.expandRowByClick,expandedRowRender:gt.expandedRowRender,onTriggerExpand:ht,expandIconColumnIndex:gt.expandIconColumnIndex,indentSize:gt.indentSize,allColumnsFixedLeft:Wt.every(function(Gn){return Gn.fixed==="left"}),emptyNode:Xn,columns:Dt,flattenColumns:Wt,onColumnResize:bn,hoverStartRow:$e,hoverEndRow:ze,onHover:Je,rowExpandable:gt.rowExpandable,onRow:X,getRowKey:me,expandedKeys:Pe,childrenColumnName:dt,rowHoverable:ge}},[dn,r,fe,Ar,M,Xi,Ge,No,Lt,ye,ke,Se,yi,d,gt.expandedRowClassName,mt,wt,gt.expandRowByClick,gt.expandedRowRender,ht,gt.expandIconColumnIndex,gt.indentSize,Xn,Dt,Wt,bn,$e,ze,Je,gt.rowExpandable,X,me,Pe,dt,ge]);return _.createElement(ss.Provider,{value:yo},Gi)}var cfe=_.forwardRef(lfe);function YV(e){return LV(cfe,e)}var Hm=YV();Hm.EXPAND_COLUMN=ud;Hm.INTERNAL_HOOKS=zy;Hm.Column=Ihe;Hm.ColumnGroup=Mhe;Hm.Summary=BV;var mR=dR(null),JV=dR(null);function ufe(e,t,n){var r=t||1;return n[e+r]-(n[e]||0)}function dfe(e){var t=e.rowInfo,n=e.column,r=e.colIndex,s=e.indent,d=e.index,p=e.component,i=e.renderIndex,x=e.record,S=e.style,T=e.className,M=e.inverse,$=e.getHeight,L=n.render,N=n.dataIndex,V=n.className,B=n.width,j=Pa(JV,["columnsOffset"]),H=j.columnsOffset,W=GV(t,n,r,s,d),X=W.key,ee=W.fixedInfo,J=W.appendCellNode,Y=W.additionalCellProps,re=Y.style,se=Y.colSpan,ae=se===void 0?1:se,ce=Y.rowSpan,Ce=ce===void 0?1:ce,we=r-1,ge=ufe(we,ae,H),ve=ae>1?B-ge:0,de=We(We(We({},re),S),{},{flex:"0 0 ".concat(ge,"px"),width:"".concat(ge,"px"),marginRight:ve,pointerEvents:"auto"}),pe=_.useMemo(function(){return M?Ce<=1:ae===0||Ce===0||Ce>1},[Ce,ae,M]);pe?de.visibility="hidden":M&&(de.height=$==null?void 0:$(Ce));var fe=pe?function(){return null}:L,me={};return(Ce===0||ae===0)&&(me.rowSpan=1,me.colSpan=1),_.createElement(Vm,qt({className:pt(V,T),ellipsis:n.ellipsis,align:n.align,scope:n.rowScope,component:p,prefixCls:t.prefixCls,key:X,record:x,index:d,renderIndex:i,dataIndex:N,render:fe,shouldCellUpdate:n.shouldCellUpdate},ee,{appendNode:J,additionalProps:We(We({},Y),{},{style:de},me)}))}var hfe=["data","index","className","rowKey","style","extra","getHeight"],ffe=_.forwardRef(function(e,t){var n=e.data,r=e.index,s=e.className,d=e.rowKey,p=e.style,i=e.extra,x=e.getHeight,S=Er(e,hfe),T=n.record,M=n.indent,$=n.index,L=Pa(ss,["prefixCls","flattenColumns","fixColumn","componentWidth","scrollX"]),N=L.scrollX,V=L.flattenColumns,B=L.prefixCls,j=L.fixColumn,H=L.componentWidth,W=Pa(mR,["getComponent"]),X=W.getComponent,ee=HV(T,d,r,M),J=X(["body","row"],"div"),Y=X(["body","cell"],"div"),re=ee.rowSupportExpand,se=ee.expanded,ae=ee.rowProps,ce=ee.expandedRowRender,Ce=ee.expandedRowClassName,we;if(re&&se){var ge=ce(T,r,M+1,se),ve=WV(Ce,T,r,M),de={};j&&(de={style:De({},"--virtual-width","".concat(H,"px"))});var pe="".concat(B,"-expanded-row-cell");we=_.createElement(J,{className:pt("".concat(B,"-expanded-row"),"".concat(B,"-expanded-row-level-").concat(M+1),ve)},_.createElement(Vm,{component:Y,prefixCls:B,className:pt(pe,De({},"".concat(pe,"-fixed"),j)),additionalProps:de},ge))}var fe=We(We({},p),{},{width:N});i&&(fe.position="absolute",fe.pointerEvents="none");var me=_.createElement(J,qt({},ae,S,{"data-row-key":d,ref:re?null:t,className:pt(s,"".concat(B,"-row"),ae==null?void 0:ae.className,De({},"".concat(B,"-row-extra"),i)),style:We(We({},fe),ae==null?void 0:ae.style)}),V.map(function(Ie,Me){return _.createElement(dfe,{key:Me,component:Y,rowInfo:ee,column:Ie,colIndex:Me,indent:M,index:r,renderIndex:$,record:T,inverse:i,getHeight:x})}));return re?_.createElement("div",{ref:t},me,we):me}),cL=jm(ffe),pfe=_.forwardRef(function(e,t){var n=e.data,r=e.onScroll,s=Pa(ss,["flattenColumns","onColumnResize","getRowKey","prefixCls","expandedKeys","childrenColumnName","scrollX","direction"]),d=s.flattenColumns,p=s.onColumnResize,i=s.getRowKey,x=s.expandedKeys,S=s.prefixCls,T=s.childrenColumnName,M=s.scrollX,$=s.direction,L=Pa(mR),N=L.sticky,V=L.scrollY,B=L.listItemHeight,j=L.getComponent,H=L.onScroll,W=_.useRef(),X=VV(n,T,x,i),ee=_.useMemo(function(){var we=0;return d.map(function(ge){var ve=ge.width,de=ge.key;return we+=ve,[de,ve,we]})},[d]),J=_.useMemo(function(){return ee.map(function(we){return we[2]})},[ee]);_.useEffect(function(){ee.forEach(function(we){var ge=ot(we,2),ve=ge[0],de=ge[1];p(ve,de)})},[ee]),_.useImperativeHandle(t,function(){var we,ge={scrollTo:function(de){var pe;(pe=W.current)===null||pe===void 0||pe.scrollTo(de)},nativeElement:(we=W.current)===null||we===void 0?void 0:we.nativeElement};return Object.defineProperty(ge,"scrollLeft",{get:function(){var de;return((de=W.current)===null||de===void 0?void 0:de.getScrollInfo().x)||0},set:function(de){var pe;(pe=W.current)===null||pe===void 0||pe.scrollTo({left:de})}}),ge});var Y=function(ge,ve){var de,pe=(de=X[ve])===null||de===void 0?void 0:de.record,fe=ge.onCell;if(fe){var me,Ie=fe(pe,ve);return(me=Ie==null?void 0:Ie.rowSpan)!==null&&me!==void 0?me:1}return 1},re=function(ge){var ve=ge.start,de=ge.end,pe=ge.getSize,fe=ge.offsetY;if(de<0)return null;for(var me=d.filter(function(mt){return Y(mt,ve)===0}),Ie=ve,Me=function(dt){if(me=me.filter(function(ht){return Y(ht,dt)===0}),!me.length)return Ie=dt,1},Be=ve;Be>=0&&!Me(Be);Be-=1);for(var $e=d.filter(function(mt){return Y(mt,de)!==1}),ze=de,Je=function(dt){if($e=$e.filter(function(ht){return Y(ht,dt)!==1}),!$e.length)return ze=Math.max(dt-1,de),1},yt=de;yt<X.length&&!Je(yt);yt+=1);for(var at=[],gt=function(dt){var ht=X[dt];if(!ht)return 1;d.some(function(je){return Y(je,dt)>1})&&at.push(dt)},wt=Ie;wt<=ze;wt+=1)gt(wt);var Pe=at.map(function(mt){var dt=X[mt],ht=i(dt.record,mt),je=function(Lt){var At=mt+Lt-1,Yt=i(X[At].record,At),Kt=pe(ht,Yt);return Kt.bottom-Kt.top},St=pe(ht);return _.createElement(cL,{key:mt,data:dt,rowKey:ht,index:mt,style:{top:-fe+St.top},extra:!0,getHeight:je})});return Pe},se=_.useMemo(function(){return{columnsOffset:J}},[J]),ae="".concat(S,"-tbody"),ce=j(["body","wrapper"]),Ce={};return N&&(Ce.position="sticky",Ce.bottom=0,cr(N)==="object"&&N.offsetScroll&&(Ce.bottom=N.offsetScroll)),_.createElement(JV.Provider,{value:se},_.createElement(zw,{fullHeight:!1,ref:W,prefixCls:"".concat(ae,"-virtual"),styles:{horizontalScrollBar:Ce},className:ae,height:V,itemHeight:B||24,data:X,itemKey:function(ge){return i(ge.record)},component:ce,scrollWidth:M,direction:$,onVirtualScroll:function(ge){var ve,de=ge.x;r({currentTarget:(ve=W.current)===null||ve===void 0?void 0:ve.nativeElement,scrollLeft:de})},onScroll:H,extraRender:re},function(we,ge,ve){var de=i(we.record,ge);return _.createElement(cL,{data:we,rowKey:de,index:ge,style:ve.style})}))}),mfe=jm(pfe),gfe=function(t,n){var r=n.ref,s=n.onScroll;return _.createElement(mfe,{ref:r,data:t,onScroll:s})};function vfe(e,t){var n=e.data,r=e.columns,s=e.scroll,d=e.sticky,p=e.prefixCls,i=p===void 0?ZV:p,x=e.className,S=e.listItemHeight,T=e.components,M=e.onScroll,$=s||{},L=$.x,N=$.y;typeof L!="number"&&(L=1),typeof N!="number"&&(N=500);var V=Zr(function(H,W){return zs(T,H)||W}),B=Zr(M),j=_.useMemo(function(){return{sticky:d,scrollY:N,listItemHeight:S,getComponent:V,onScroll:B}},[d,N,S,V,B]);return _.createElement(mR.Provider,{value:j},_.createElement(Hm,qt({},e,{className:pt(x,"".concat(i,"-virtual")),scroll:We(We({},s),{},{x:L}),components:We(We({},T),{},{body:n!=null&&n.length?gfe:void 0}),columns:r,internalHooks:zy,tailor:!0,ref:t})))}var yfe=_.forwardRef(vfe);function QV(e){return LV(yfe,e)}QV();const _fe=e=>null,xfe=e=>null;var gR=_.createContext(null),bfe=function(t){for(var n=t.prefixCls,r=t.level,s=t.isStart,d=t.isEnd,p="".concat(n,"-indent-unit"),i=[],x=0;x<r;x+=1)i.push(_.createElement("span",{key:x,className:pt(p,De(De({},"".concat(p,"-start"),s[x]),"".concat(p,"-end"),d[x]))}));return _.createElement("span",{"aria-hidden":"true",className:"".concat(n,"-indent")},i)};const wfe=_.memo(bfe);var Sfe=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],uL="open",dL="close",Cfe="---",Efe=function(e){Kl(n,e);var t=Xl(n);function n(){var r;zo(this,n);for(var s=arguments.length,d=new Array(s),p=0;p<s;p++)d[p]=arguments[p];return r=t.call.apply(t,[this].concat(d)),De(An(r),"state",{dragNodeHighlight:!1}),De(An(r),"selectHandle",void 0),De(An(r),"cacheIndent",void 0),De(An(r),"onSelectorClick",function(i){var x=r.props.context.onNodeClick;x(i,Zo(r.props)),r.isSelectable()?r.onSelect(i):r.onCheck(i)}),De(An(r),"onSelectorDoubleClick",function(i){var x=r.props.context.onNodeDoubleClick;x(i,Zo(r.props))}),De(An(r),"onSelect",function(i){if(!r.isDisabled()){var x=r.props.context.onNodeSelect;x(i,Zo(r.props))}}),De(An(r),"onCheck",function(i){if(!r.isDisabled()){var x=r.props,S=x.disableCheckbox,T=x.checked,M=r.props.context.onNodeCheck;if(!(!r.isCheckable()||S)){var $=!T;M(i,Zo(r.props),$)}}}),De(An(r),"onMouseEnter",function(i){var x=r.props.context.onNodeMouseEnter;x(i,Zo(r.props))}),De(An(r),"onMouseLeave",function(i){var x=r.props.context.onNodeMouseLeave;x(i,Zo(r.props))}),De(An(r),"onContextMenu",function(i){var x=r.props.context.onNodeContextMenu;x(i,Zo(r.props))}),De(An(r),"onDragStart",function(i){var x=r.props.context.onNodeDragStart;i.stopPropagation(),r.setState({dragNodeHighlight:!0}),x(i,An(r));try{i.dataTransfer.setData("text/plain","")}catch{}}),De(An(r),"onDragEnter",function(i){var x=r.props.context.onNodeDragEnter;i.preventDefault(),i.stopPropagation(),x(i,An(r))}),De(An(r),"onDragOver",function(i){var x=r.props.context.onNodeDragOver;i.preventDefault(),i.stopPropagation(),x(i,An(r))}),De(An(r),"onDragLeave",function(i){var x=r.props.context.onNodeDragLeave;i.stopPropagation(),x(i,An(r))}),De(An(r),"onDragEnd",function(i){var x=r.props.context.onNodeDragEnd;i.stopPropagation(),r.setState({dragNodeHighlight:!1}),x(i,An(r))}),De(An(r),"onDrop",function(i){var x=r.props.context.onNodeDrop;i.preventDefault(),i.stopPropagation(),r.setState({dragNodeHighlight:!1}),x(i,An(r))}),De(An(r),"onExpand",function(i){var x=r.props,S=x.loading,T=x.context.onNodeExpand;S||T(i,Zo(r.props))}),De(An(r),"setSelectHandle",function(i){r.selectHandle=i}),De(An(r),"getNodeState",function(){var i=r.props.expanded;return r.isLeaf()?null:i?uL:dL}),De(An(r),"hasChildren",function(){var i=r.props.eventKey,x=r.props.context.keyEntities,S=ps(x,i)||{},T=S.children;return!!(T||[]).length}),De(An(r),"isLeaf",function(){var i=r.props,x=i.isLeaf,S=i.loaded,T=r.props.context.loadData,M=r.hasChildren();return x===!1?!1:x||!T&&!M||T&&S&&!M}),De(An(r),"isDisabled",function(){var i=r.props.disabled,x=r.props.context.disabled;return!!(x||i)}),De(An(r),"isCheckable",function(){var i=r.props.checkable,x=r.props.context.checkable;return!x||i===!1?!1:x}),De(An(r),"syncLoadData",function(i){var x=i.expanded,S=i.loading,T=i.loaded,M=r.props.context,$=M.loadData,L=M.onNodeLoad;S||$&&x&&!r.isLeaf()&&!T&&L(Zo(r.props))}),De(An(r),"isDraggable",function(){var i=r.props,x=i.data,S=i.context.draggable;return!!(S&&(!S.nodeDraggable||S.nodeDraggable(x)))}),De(An(r),"renderDragHandler",function(){var i=r.props.context,x=i.draggable,S=i.prefixCls;return x!=null&&x.icon?_.createElement("span",{className:"".concat(S,"-draggable-icon")},x.icon):null}),De(An(r),"renderSwitcherIconDom",function(i){var x=r.props.switcherIcon,S=r.props.context.switcherIcon,T=x||S;return typeof T=="function"?T(We(We({},r.props),{},{isLeaf:i})):T}),De(An(r),"renderSwitcher",function(){var i=r.props.expanded,x=r.props.context.prefixCls;if(r.isLeaf()){var S=r.renderSwitcherIconDom(!0);return S!==!1?_.createElement("span",{className:pt("".concat(x,"-switcher"),"".concat(x,"-switcher-noop"))},S):null}var T=pt("".concat(x,"-switcher"),"".concat(x,"-switcher_").concat(i?uL:dL)),M=r.renderSwitcherIconDom(!1);return M!==!1?_.createElement("span",{onClick:r.onExpand,className:T},M):null}),De(An(r),"renderCheckbox",function(){var i=r.props,x=i.checked,S=i.halfChecked,T=i.disableCheckbox,M=r.props.context.prefixCls,$=r.isDisabled(),L=r.isCheckable();if(!L)return null;var N=typeof L!="boolean"?L:null;return _.createElement("span",{className:pt("".concat(M,"-checkbox"),x&&"".concat(M,"-checkbox-checked"),!x&&S&&"".concat(M,"-checkbox-indeterminate"),($||T)&&"".concat(M,"-checkbox-disabled")),onClick:r.onCheck},N)}),De(An(r),"renderIcon",function(){var i=r.props.loading,x=r.props.context.prefixCls;return _.createElement("span",{className:pt("".concat(x,"-iconEle"),"".concat(x,"-icon__").concat(r.getNodeState()||"docu"),i&&"".concat(x,"-icon_loading"))})}),De(An(r),"renderSelector",function(){var i=r.state.dragNodeHighlight,x=r.props,S=x.title,T=S===void 0?Cfe:S,M=x.selected,$=x.icon,L=x.loading,N=x.data,V=r.props.context,B=V.prefixCls,j=V.showIcon,H=V.icon,W=V.loadData,X=V.titleRender,ee=r.isDisabled(),J="".concat(B,"-node-content-wrapper"),Y;if(j){var re=$||H;Y=re?_.createElement("span",{className:pt("".concat(B,"-iconEle"),"".concat(B,"-icon__customize"))},typeof re=="function"?re(r.props):re):r.renderIcon()}else W&&L&&(Y=r.renderIcon());var se;typeof T=="function"?se=T(N):X?se=X(N):se=T;var ae=_.createElement("span",{className:"".concat(B,"-title")},se);return _.createElement("span",{ref:r.setSelectHandle,title:typeof T=="string"?T:"",className:pt("".concat(J),"".concat(J,"-").concat(r.getNodeState()||"normal"),!ee&&(M||i)&&"".concat(B,"-node-selected")),onMouseEnter:r.onMouseEnter,onMouseLeave:r.onMouseLeave,onContextMenu:r.onContextMenu,onClick:r.onSelectorClick,onDoubleClick:r.onSelectorDoubleClick},Y,ae,r.renderDropIndicator())}),De(An(r),"renderDropIndicator",function(){var i=r.props,x=i.disabled,S=i.eventKey,T=r.props.context,M=T.draggable,$=T.dropLevelOffset,L=T.dropPosition,N=T.prefixCls,V=T.indent,B=T.dropIndicatorRender,j=T.dragOverNodeKey,H=T.direction,W=!!M,X=!x&&W&&j===S,ee=V??r.cacheIndent;return r.cacheIndent=V,X?B({dropPosition:L,dropLevelOffset:$,indent:ee,prefixCls:N,direction:H}):null}),r}return Lo(n,[{key:"componentDidMount",value:function(){this.syncLoadData(this.props)}},{key:"componentDidUpdate",value:function(){this.syncLoadData(this.props)}},{key:"isSelectable",value:function(){var s=this.props.selectable,d=this.props.context.selectable;return typeof s=="boolean"?s:d}},{key:"render",value:function(){var s,d=this.props,p=d.eventKey,i=d.className,x=d.style,S=d.dragOver,T=d.dragOverGapTop,M=d.dragOverGapBottom,$=d.isLeaf,L=d.isStart,N=d.isEnd,V=d.expanded,B=d.selected,j=d.checked,H=d.halfChecked,W=d.loading,X=d.domRef,ee=d.active;d.data;var J=d.onMouseMove,Y=d.selectable,re=Er(d,Sfe),se=this.props.context,ae=se.prefixCls,ce=se.filterTreeNode,Ce=se.keyEntities,we=se.dropContainerKey,ge=se.dropTargetKey,ve=se.draggingNodeKey,de=this.isDisabled(),pe=Ko(re,{aria:!0,data:!0}),fe=ps(Ce,p)||{},me=fe.level,Ie=N[N.length-1],Me=this.isDraggable(),Be=!de&&Me,$e=ve===p,ze=Y!==void 0?{"aria-selected":!!Y}:void 0;return _.createElement("div",qt({ref:X,className:pt(i,"".concat(ae,"-treenode"),(s={},De(De(De(De(De(De(De(De(De(De(s,"".concat(ae,"-treenode-disabled"),de),"".concat(ae,"-treenode-switcher-").concat(V?"open":"close"),!$),"".concat(ae,"-treenode-checkbox-checked"),j),"".concat(ae,"-treenode-checkbox-indeterminate"),H),"".concat(ae,"-treenode-selected"),B),"".concat(ae,"-treenode-loading"),W),"".concat(ae,"-treenode-active"),ee),"".concat(ae,"-treenode-leaf-last"),Ie),"".concat(ae,"-treenode-draggable"),Me),"dragging",$e),De(De(De(De(De(De(s,"drop-target",ge===p),"drop-container",we===p),"drag-over",!de&&S),"drag-over-gap-top",!de&&T),"drag-over-gap-bottom",!de&&M),"filter-node",ce&&ce(Zo(this.props))))),style:x,draggable:Be,"aria-grabbed":$e,onDragStart:Be?this.onDragStart:void 0,onDragEnter:Me?this.onDragEnter:void 0,onDragOver:Me?this.onDragOver:void 0,onDragLeave:Me?this.onDragLeave:void 0,onDrop:Me?this.onDrop:void 0,onDragEnd:Me?this.onDragEnd:void 0,onMouseMove:J},ze,pe),_.createElement(wfe,{prefixCls:ae,level:me,isStart:L,isEnd:N}),this.renderDragHandler(),this.renderSwitcher(),this.renderCheckbox(),this.renderSelector())}}]),n}(_.Component),Sm=function(t){return _.createElement(gR.Consumer,null,function(n){return _.createElement(Efe,qt({},t,{context:n}))})};Sm.displayName="TreeNode";Sm.isTreeNode=1;function fc(e,t){if(!e)return[];var n=e.slice(),r=n.indexOf(t);return r>=0&&n.splice(r,1),n}function Uc(e,t){var n=(e||[]).slice();return n.indexOf(t)===-1&&n.push(t),n}function vR(e){return e.split("-")}function Tfe(e,t){var n=[],r=ps(t,e);function s(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];d.forEach(function(p){var i=p.key,x=p.children;n.push(i),s(x)})}return s(r.children),n}function Ife(e){if(e.parent){var t=vR(e.pos);return Number(t[t.length-1])===e.parent.children.length-1}return!1}function Mfe(e){var t=vR(e.pos);return Number(t[t.length-1])===0}function hL(e,t,n,r,s,d,p,i,x,S){var T,M=e.clientX,$=e.clientY,L=e.target.getBoundingClientRect(),N=L.top,V=L.height,B=(S==="rtl"?-1:1)*(((s==null?void 0:s.x)||0)-M),j=(B-12)/r,H=x.filter(function(de){var pe;return(pe=i[de])===null||pe===void 0||(pe=pe.children)===null||pe===void 0?void 0:pe.length}),W=ps(i,n.props.eventKey);if($<N+V/2){var X=p.findIndex(function(de){return de.key===W.key}),ee=X<=0?0:X-1,J=p[ee].key;W=ps(i,J)}var Y=W.key,re=W,se=W.key,ae=0,ce=0;if(!H.includes(Y))for(var Ce=0;Ce<j&&Ife(W);Ce+=1)W=W.parent,ce+=1;var we=t.props.data,ge=W.node,ve=!0;return Mfe(W)&&W.level===0&&$<N+V/2&&d({dragNode:we,dropNode:ge,dropPosition:-1})&&W.key===n.props.eventKey?ae=-1:(re.children||[]).length&&H.includes(se)?d({dragNode:we,dropNode:ge,dropPosition:0})?ae=0:ve=!1:ce===0?j>-1.5?d({dragNode:we,dropNode:ge,dropPosition:1})?ae=1:ve=!1:d({dragNode:we,dropNode:ge,dropPosition:0})?ae=0:d({dragNode:we,dropNode:ge,dropPosition:1})?ae=1:ve=!1:d({dragNode:we,dropNode:ge,dropPosition:1})?ae=1:ve=!1,{dropPosition:ae,dropLevelOffset:ce,dropTargetKey:W.key,dropTargetPos:W.pos,dragOverNodeKey:se,dropContainerKey:ae===0?null:((T=W.parent)===null||T===void 0?void 0:T.key)||null,dropAllowed:ve}}function fL(e,t){if(e){var n=t.multiple;return n?e.slice():e.length?[e[0]]:e}}function gE(e){if(!e)return null;var t;if(Array.isArray(e))t={checkedKeys:e,halfCheckedKeys:void 0};else if(cr(e)==="object")t={checkedKeys:e.checked||void 0,halfCheckedKeys:e.halfChecked||void 0};else return go(!1,"`checkedKeys` is not an array or an object"),null;return t}function WI(e,t){var n=new Set;function r(s){if(!n.has(s)){var d=ps(t,s);if(d){n.add(s);var p=d.parent,i=d.node;i.disabled||p&&r(p.key)}}}return(e||[]).forEach(function(s){r(s)}),un(n)}function Pfe(e){const[t,n]=_.useState(null);return[_.useCallback((d,p,i)=>{const x=t??d,S=Math.min(x||0,d),T=Math.max(x||0,d),M=p.slice(S,T+1).map(N=>e(N)),$=M.some(N=>!i.has(N)),L=[];return M.forEach(N=>{$?(i.has(N)||L.push(N),i.add(N)):(i.delete(N),L.push(N))}),n($?T:null),L},[t]),d=>{n(d)}]}const sd={},GI="SELECT_ALL",qI="SELECT_INVERT",KI="SELECT_NONE",pL=[],e8=(e,t)=>{let n=[];return(t||[]).forEach(r=>{n.push(r),r&&typeof r=="object"&&e in r&&(n=[].concat(un(n),un(e8(e,r[e]))))}),n},Rfe=(e,t)=>{const{preserveSelectedRowKeys:n,selectedRowKeys:r,defaultSelectedRowKeys:s,getCheckboxProps:d,onChange:p,onSelect:i,onSelectAll:x,onSelectInvert:S,onSelectNone:T,onSelectMultiple:M,columnWidth:$,type:L,selections:N,fixed:V,renderCell:B,hideSelectAll:j,checkStrictly:H=!0}=t||{},{prefixCls:W,data:X,pageData:ee,getRecordByKey:J,getRowKey:Y,expandType:re,childrenColumnName:se,locale:ae,getPopupContainer:ce}=e,Ce=sf(),[we,ge]=Pfe(mt=>mt),[ve,de]=Bi(r||s||pL,{value:r}),pe=_.useRef(new Map),fe=_.useCallback(mt=>{if(n){const dt=new Map;mt.forEach(ht=>{let je=J(ht);!je&&pe.current.has(ht)&&(je=pe.current.get(ht)),dt.set(ht,je)}),pe.current=dt}},[J,n]);_.useEffect(()=>{fe(ve)},[ve]);const me=_.useMemo(()=>e8(se,ee),[se,ee]),{keyEntities:Ie}=_.useMemo(()=>{if(H)return{keyEntities:null};let mt=X;if(n){const dt=new Set(me.map((je,St)=>Y(je,St))),ht=Array.from(pe.current).reduce((je,St)=>{let[Ct,Lt]=St;return dt.has(Ct)?je:je.concat(Lt)},[]);mt=[].concat(un(mt),un(ht))}return sR(mt,{externalGetKey:Y,childrenPropName:se})},[X,Y,H,se,n,me]),Me=_.useMemo(()=>{const mt=new Map;return me.forEach((dt,ht)=>{const je=Y(dt,ht),St=(d?d(dt):null)||{};mt.set(je,St)}),mt},[me,Y,d]),Be=_.useCallback(mt=>{var dt;return!!(!((dt=Me.get(Y(mt)))===null||dt===void 0)&&dt.disabled)},[Me,Y]),[$e,ze]=_.useMemo(()=>{if(H)return[ve||[],[]];const{checkedKeys:mt,halfCheckedKeys:dt}=Qp(ve,!0,Ie,Be);return[mt||[],dt]},[ve,H,Ie,Be]),Je=_.useMemo(()=>{const mt=L==="radio"?$e.slice(0,1):$e;return new Set(mt)},[$e,L]),yt=_.useMemo(()=>L==="radio"?new Set:new Set(ze),[ze,L]);_.useEffect(()=>{t||de(pL)},[!!t]);const at=_.useCallback((mt,dt)=>{let ht,je;fe(mt),n?(ht=mt,je=mt.map(St=>pe.current.get(St))):(ht=[],je=[],mt.forEach(St=>{const Ct=J(St);Ct!==void 0&&(ht.push(St),je.push(Ct))})),de(ht),p==null||p(ht,je,{type:dt})},[de,J,p,n]),gt=_.useCallback((mt,dt,ht,je)=>{if(i){const St=ht.map(Ct=>J(Ct));i(J(mt),dt,St,je)}at(ht,"single")},[i,J,at]),wt=_.useMemo(()=>!N||j?null:(N===!0?[GI,qI,KI]:N).map(dt=>dt===GI?{key:"all",text:ae.selectionAll,onSelect(){at(X.map((ht,je)=>Y(ht,je)).filter(ht=>{const je=Me.get(ht);return!(je!=null&&je.disabled)||Je.has(ht)}),"all")}}:dt===qI?{key:"invert",text:ae.selectInvert,onSelect(){const ht=new Set(Je);ee.forEach((St,Ct)=>{const Lt=Y(St,Ct),At=Me.get(Lt);At!=null&&At.disabled||(ht.has(Lt)?ht.delete(Lt):ht.add(Lt))});const je=Array.from(ht);S&&(Ce.deprecated(!1,"onSelectInvert","onChange"),S(je)),at(je,"invert")}}:dt===KI?{key:"none",text:ae.selectNone,onSelect(){T==null||T(),at(Array.from(Je).filter(ht=>{const je=Me.get(ht);return je==null?void 0:je.disabled}),"none")}}:dt).map(dt=>Object.assign(Object.assign({},dt),{onSelect:function(){for(var ht,je,St=arguments.length,Ct=new Array(St),Lt=0;Lt<St;Lt++)Ct[Lt]=arguments[Lt];(je=dt.onSelect)===null||je===void 0||(ht=je).call.apply(ht,[dt].concat(Ct)),ge(null)}})),[N,Je,ee,Y,S,at]);return[_.useCallback(mt=>{var dt;if(!t)return mt.filter(Rn=>Rn!==sd);let ht=un(mt);const je=new Set(Je),St=me.map(Y).filter(Rn=>!Me.get(Rn).disabled),Ct=St.every(Rn=>je.has(Rn)),Lt=St.some(Rn=>je.has(Rn)),At=()=>{const Rn=[];Ct?St.forEach(Cn=>{je.delete(Cn),Rn.push(Cn)}):St.forEach(Cn=>{je.has(Cn)||(je.add(Cn),Rn.push(Cn))});const kn=Array.from(je);x==null||x(!Ct,kn.map(Cn=>J(Cn)),Rn.map(Cn=>J(Cn))),at(kn,"all"),ge(null)};let Yt,Kt;if(L!=="radio"){let Rn;if(wt){const cn={getPopupContainer:ce,items:wt.map((an,Zt)=>{const{key:Xt,text:Hn,onSelect:br}=an;return{key:Xt??Zt,onClick:()=>{br==null||br(St)},label:Hn}})};Rn=_.createElement("div",{className:`${W}-selection-extra`},_.createElement(tS,{menu:cn,getPopupContainer:ce},_.createElement("span",null,_.createElement(NP,null))))}const kn=me.map((cn,an)=>{const Zt=Y(cn,an),Xt=Me.get(Zt)||{};return Object.assign({checked:je.has(Zt)},Xt)}).filter(cn=>{let{disabled:an}=cn;return an}),Cn=!!kn.length&&kn.length===me.length,nn=Cn&&kn.every(cn=>{let{checked:an}=cn;return an}),Ut=Cn&&kn.some(cn=>{let{checked:an}=cn;return an});Kt=_.createElement(bm,{checked:Cn?nn:!!me.length&&Ct,indeterminate:Cn?!nn&&Ut:!Ct&&Lt,onChange:At,disabled:me.length===0||Cn,"aria-label":Rn?"Custom selection":"Select all",skipGroup:!0}),Yt=!j&&_.createElement("div",{className:`${W}-selection`},Kt,Rn)}let Dt;L==="radio"?Dt=(Rn,kn,Cn)=>{const nn=Y(kn,Cn),Ut=je.has(nn);return{node:_.createElement($y,Object.assign({},Me.get(nn),{checked:Ut,onClick:cn=>cn.stopPropagation(),onChange:cn=>{je.has(nn)||gt(nn,!0,[nn],cn.nativeEvent)}})),checked:Ut}}:Dt=(Rn,kn,Cn)=>{var nn;const Ut=Y(kn,Cn),cn=je.has(Ut),an=yt.has(Ut),Zt=Me.get(Ut);let Xt;return re==="nest"?Xt=an:Xt=(nn=Zt==null?void 0:Zt.indeterminate)!==null&&nn!==void 0?nn:an,{node:_.createElement(bm,Object.assign({},Zt,{indeterminate:Xt,checked:cn,skipGroup:!0,onClick:Hn=>Hn.stopPropagation(),onChange:Hn=>{let{nativeEvent:br}=Hn;const{shiftKey:mr}=br,pr=St.findIndex(ur=>ur===Ut),Tr=$e.some(ur=>St.includes(ur));if(mr&&H&&Tr){const ur=we(pr,St,je),Mr=Array.from(je);M==null||M(!cn,Mr.map(tr=>J(tr)),ur.map(tr=>J(tr))),at(Mr,"multiple")}else{const ur=$e;if(H){const Mr=cn?fc(ur,Ut):Uc(ur,Ut);gt(Ut,!cn,Mr,br)}else{const Mr=Qp([].concat(un(ur),[Ut]),!0,Ie,Be),{checkedKeys:tr,halfCheckedKeys:ft}=Mr;let ye=tr;if(cn){const Se=new Set(tr);Se.delete(Ut),ye=Qp(Array.from(Se),{checked:!1,halfCheckedKeys:ft},Ie,Be).checkedKeys}gt(Ut,!cn,ye,br)}}ge(cn?null:pr)}})),checked:cn}};const Wt=(Rn,kn,Cn)=>{const{node:nn,checked:Ut}=Dt(Rn,kn,Cn);return B?B(Ut,kn,Cn,nn):nn};if(!ht.includes(sd))if(ht.findIndex(Rn=>{var kn;return((kn=Rn[M0])===null||kn===void 0?void 0:kn.columnType)==="EXPAND_COLUMN"})===0){const[Rn,...kn]=ht;ht=[Rn,sd].concat(un(kn))}else ht=[sd].concat(un(ht));const Vt=ht.indexOf(sd);ht=ht.filter((Rn,kn)=>Rn!==sd||kn===Vt);const Rt=ht[Vt-1],dn=ht[Vt+1];let hn=V;hn===void 0&&((dn==null?void 0:dn.fixed)!==void 0?hn=dn.fixed:(Rt==null?void 0:Rt.fixed)!==void 0&&(hn=Rt.fixed)),hn&&Rt&&((dt=Rt[M0])===null||dt===void 0?void 0:dt.columnType)==="EXPAND_COLUMN"&&Rt.fixed===void 0&&(Rt.fixed=hn);const Pn=pt(`${W}-selection-col`,{[`${W}-selection-col-with-dropdown`]:N&&L==="checkbox"}),Dn=()=>t!=null&&t.columnTitle?typeof t.columnTitle=="function"?t.columnTitle(Kt):t.columnTitle:Yt,yn={fixed:hn,width:$,className:`${W}-selection-column`,title:Dn(),render:Wt,onCell:t.onCell,[M0]:{className:Pn}};return ht.map(Rn=>Rn===sd?yn:Rn)},[Y,me,t,$e,Je,yt,$,wt,re,Me,M,gt,Be]),Je]};function Ofe(e,t){return e._antProxy=e._antProxy||{},Object.keys(t).forEach(n=>{if(!(n in e._antProxy)){const r=e[n];e._antProxy[n]=r,e[n]=t[n]}}),e}function Afe(e,t){return _.useImperativeHandle(e,()=>{const n=t(),{nativeElement:r}=n;return typeof Proxy<"u"?new Proxy(r,{get(s,d){return n[d]?n[d]:Reflect.get(s,d)}}):Ofe(r,n)})}function Dfe(e){return t=>{const{prefixCls:n,onExpand:r,record:s,expanded:d,expandable:p}=t,i=`${n}-row-expand-icon`;return _.createElement("button",{type:"button",onClick:x=>{r(s,x),x.stopPropagation()},className:pt(i,{[`${i}-spaced`]:!p,[`${i}-expanded`]:p&&d,[`${i}-collapsed`]:p&&!d}),"aria-label":d?e.collapse:e.expand,"aria-expanded":d})}}function $fe(e){return(n,r)=>{const s=n.querySelector(`.${e}-container`);let d=r;if(s){const p=getComputedStyle(s),i=parseInt(p.borderLeftWidth,10),x=parseInt(p.borderRightWidth,10);d=r-i-x}return d}}const kd=(e,t)=>"key"in e&&e.key!==void 0&&e.key!==null?e.key:e.dataIndex?Array.isArray(e.dataIndex)?e.dataIndex.join("."):e.dataIndex:t;function Um(e,t){return t?`${t}-${e}`:`${e}`}const aS=(e,t)=>typeof e=="function"?e(t):e,kfe=(e,t)=>{const n=aS(e,t);return Object.prototype.toString.call(n)==="[object Object]"?"":n};function zfe(e){const t=_.useRef(e),n=d6();return[()=>t.current,r=>{t.current=r,n()}]}function Lfe(e){var t=e.dropPosition,n=e.dropLevelOffset,r=e.indent,s={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(t){case-1:s.top=0,s.left=-n*r;break;case 1:s.bottom=0,s.left=-n*r;break;case 0:s.bottom=0,s.left=r;break}return _.createElement("div",{style:s})}function t8(e){if(e==null)throw new TypeError("Cannot destructure "+e)}function Nfe(e,t){var n=_.useState(!1),r=ot(n,2),s=r[0],d=r[1];Xr(function(){if(s)return e(),function(){t()}},[s]),Xr(function(){return d(!0),function(){d(!1)}},[])}var Ffe=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],n8=function(t,n){var r=t.className,s=t.style,d=t.motion,p=t.motionNodes,i=t.motionType,x=t.onMotionStart,S=t.onMotionEnd,T=t.active,M=t.treeNodeRequiredProps,$=Er(t,Ffe),L=_.useState(!0),N=ot(L,2),V=N[0],B=N[1],j=_.useContext(gR),H=j.prefixCls,W=p&&i!=="hide";Xr(function(){p&&W!==V&&B(W)},[p]);var X=function(){p&&x()},ee=_.useRef(!1),J=function(){p&&!ee.current&&(ee.current=!0,S())};Nfe(X,J);var Y=function(se){W===se&&J()};return p?_.createElement(dl,qt({ref:n,visible:V},d,{motionAppear:i==="show",onVisibleChanged:Y}),function(re,se){var ae=re.className,ce=re.style;return _.createElement("div",{ref:se,className:pt("".concat(H,"-treenode-motion"),ae),style:ce},p.map(function(Ce){var we=Object.assign({},(t8(Ce.data),Ce.data)),ge=Ce.title,ve=Ce.key,de=Ce.isStart,pe=Ce.isEnd;delete we.children;var fe=I0(ve,M);return _.createElement(Sm,qt({},we,fe,{title:ge,active:T,data:Ce.data,key:ve,isStart:de,isEnd:pe}))}))}):_.createElement(Sm,qt({domRef:n,className:r,style:s},$,{active:T}))};n8.displayName="MotionTreeNode";var Bfe=_.forwardRef(n8);function jfe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=e.length,r=t.length;if(Math.abs(n-r)!==1)return{add:!1,key:null};function s(d,p){var i=new Map;d.forEach(function(S){i.set(S,!0)});var x=p.filter(function(S){return!i.has(S)});return x.length===1?x[0]:null}return n<r?{add:!0,key:s(e,t)}:{add:!1,key:s(t,e)}}function mL(e,t,n){var r=e.findIndex(function(i){return i.key===n}),s=e[r+1],d=t.findIndex(function(i){return i.key===n});if(s){var p=t.findIndex(function(i){return i.key===s.key});return t.slice(d+1,p)}return t.slice(d+1)}var Vfe=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],gL={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Hfe=function(){},ef="RC_TREE_MOTION_".concat(Math.random()),XI={key:ef},r8={key:ef,level:0,index:0,pos:"0",node:XI,nodes:[XI]},vL={parent:null,children:[],pos:r8.pos,data:XI,title:null,key:ef,isStart:[],isEnd:[]};function yL(e,t,n,r){return t===!1||!n?e:e.slice(0,Math.ceil(n/r)+1)}function _L(e){var t=e.key,n=e.pos;return ky(t,n)}function Ufe(e){for(var t=String(e.data.key),n=e;n.parent;)n=n.parent,t="".concat(n.data.key," > ").concat(t);return t}var i8=_.forwardRef(function(e,t){var n=e.prefixCls,r=e.data;e.selectable,e.checkable;var s=e.expandedKeys,d=e.selectedKeys,p=e.checkedKeys,i=e.loadedKeys,x=e.loadingKeys,S=e.halfCheckedKeys,T=e.keyEntities,M=e.disabled,$=e.dragging,L=e.dragOverNodeKey,N=e.dropPosition,V=e.motion,B=e.height,j=e.itemHeight,H=e.virtual,W=e.focusable,X=e.activeItem,ee=e.focused,J=e.tabIndex,Y=e.onKeyDown,re=e.onFocus,se=e.onBlur,ae=e.onActiveChange,ce=e.onListChangeStart,Ce=e.onListChangeEnd,we=Er(e,Vfe),ge=_.useRef(null),ve=_.useRef(null);_.useImperativeHandle(t,function(){return{scrollTo:function(Dt){ge.current.scrollTo(Dt)},getIndentWidth:function(){return ve.current.offsetWidth}}});var de=_.useState(s),pe=ot(de,2),fe=pe[0],me=pe[1],Ie=_.useState(r),Me=ot(Ie,2),Be=Me[0],$e=Me[1],ze=_.useState(r),Je=ot(ze,2),yt=Je[0],at=Je[1],gt=_.useState([]),wt=ot(gt,2),Pe=wt[0],mt=wt[1],dt=_.useState(null),ht=ot(dt,2),je=ht[0],St=ht[1],Ct=_.useRef(r);Ct.current=r;function Lt(){var Kt=Ct.current;$e(Kt),at(Kt),mt([]),St(null),Ce()}Xr(function(){me(s);var Kt=jfe(fe,s);if(Kt.key!==null)if(Kt.add){var Dt=Be.findIndex(function(Pn){var Dn=Pn.key;return Dn===Kt.key}),Wt=yL(mL(Be,r,Kt.key),H,B,j),Vt=Be.slice();Vt.splice(Dt+1,0,vL),at(Vt),mt(Wt),St("show")}else{var Rt=r.findIndex(function(Pn){var Dn=Pn.key;return Dn===Kt.key}),dn=yL(mL(r,Be,Kt.key),H,B,j),hn=r.slice();hn.splice(Rt+1,0,vL),at(hn),mt(dn),St("hide")}else Be!==r&&($e(r),at(r))},[s,r]),_.useEffect(function(){$||Lt()},[$]);var At=V?yt:r,Yt={expandedKeys:s,selectedKeys:d,loadedKeys:i,loadingKeys:x,checkedKeys:p,halfCheckedKeys:S,dragOverNodeKey:L,dropPosition:N,keyEntities:T};return _.createElement(_.Fragment,null,ee&&X&&_.createElement("span",{style:gL,"aria-live":"assertive"},Ufe(X)),_.createElement("div",null,_.createElement("input",{style:gL,disabled:W===!1||M,tabIndex:W!==!1?J:null,onKeyDown:Y,onFocus:re,onBlur:se,value:"",onChange:Hfe,"aria-label":"for screen reader"})),_.createElement("div",{className:"".concat(n,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},_.createElement("div",{className:"".concat(n,"-indent")},_.createElement("div",{ref:ve,className:"".concat(n,"-indent-unit")}))),_.createElement(zw,qt({},we,{data:At,itemKey:_L,height:B,fullHeight:!1,virtual:H,itemHeight:j,prefixCls:"".concat(n,"-list"),ref:ge,onVisibleChange:function(Dt){Dt.every(function(Wt){return _L(Wt)!==ef})&&Lt()}}),function(Kt){var Dt=Kt.pos,Wt=Object.assign({},(t8(Kt.data),Kt.data)),Vt=Kt.title,Rt=Kt.key,dn=Kt.isStart,hn=Kt.isEnd,Pn=ky(Rt,Dt);delete Wt.key,delete Wt.children;var Dn=I0(Pn,Yt);return _.createElement(Bfe,qt({},Wt,Dn,{title:Vt,active:!!X&&Rt===X.key,pos:Dt,data:Kt.data,isStart:dn,isEnd:hn,motion:V,motionNodes:Rt===ef?Pe:null,motionType:je,onMotionStart:ce,onMotionEnd:Lt,treeNodeRequiredProps:Yt,onMouseMove:function(){ae(null)}}))}))});i8.displayName="NodeList";var Wfe=10,yR=function(e){Kl(n,e);var t=Xl(n);function n(){var r;zo(this,n);for(var s=arguments.length,d=new Array(s),p=0;p<s;p++)d[p]=arguments[p];return r=t.call.apply(t,[this].concat(d)),De(An(r),"destroyed",!1),De(An(r),"delayedDragEnterLogic",void 0),De(An(r),"loadingRetryTimes",{}),De(An(r),"state",{keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:xm()}),De(An(r),"dragStartMousePosition",null),De(An(r),"dragNode",void 0),De(An(r),"currentMouseOverDroppableNodeKey",null),De(An(r),"listRef",_.createRef()),De(An(r),"onNodeDragStart",function(i,x){var S=r.state,T=S.expandedKeys,M=S.keyEntities,$=r.props.onDragStart,L=x.props.eventKey;r.dragNode=x,r.dragStartMousePosition={x:i.clientX,y:i.clientY};var N=fc(T,L);r.setState({draggingNodeKey:L,dragChildrenKeys:Tfe(L,M),indent:r.listRef.current.getIndentWidth()}),r.setExpandedKeys(N),window.addEventListener("dragend",r.onWindowDragEnd),$==null||$({event:i,node:Zo(x.props)})}),De(An(r),"onNodeDragEnter",function(i,x){var S=r.state,T=S.expandedKeys,M=S.keyEntities,$=S.dragChildrenKeys,L=S.flattenNodes,N=S.indent,V=r.props,B=V.onDragEnter,j=V.onExpand,H=V.allowDrop,W=V.direction,X=x.props,ee=X.pos,J=X.eventKey,Y=An(r),re=Y.dragNode;if(r.currentMouseOverDroppableNodeKey!==J&&(r.currentMouseOverDroppableNodeKey=J),!re){r.resetDragState();return}var se=hL(i,re,x,N,r.dragStartMousePosition,H,L,M,T,W),ae=se.dropPosition,ce=se.dropLevelOffset,Ce=se.dropTargetKey,we=se.dropContainerKey,ge=se.dropTargetPos,ve=se.dropAllowed,de=se.dragOverNodeKey;if($.indexOf(Ce)!==-1||!ve){r.resetDragState();return}if(r.delayedDragEnterLogic||(r.delayedDragEnterLogic={}),Object.keys(r.delayedDragEnterLogic).forEach(function(pe){clearTimeout(r.delayedDragEnterLogic[pe])}),re.props.eventKey!==x.props.eventKey&&(i.persist(),r.delayedDragEnterLogic[ee]=window.setTimeout(function(){if(r.state.draggingNodeKey!==null){var pe=un(T),fe=ps(M,x.props.eventKey);fe&&(fe.children||[]).length&&(pe=Uc(T,x.props.eventKey)),r.props.hasOwnProperty("expandedKeys")||r.setExpandedKeys(pe),j==null||j(pe,{node:Zo(x.props),expanded:!0,nativeEvent:i.nativeEvent})}},800)),re.props.eventKey===Ce&&ce===0){r.resetDragState();return}r.setState({dragOverNodeKey:de,dropPosition:ae,dropLevelOffset:ce,dropTargetKey:Ce,dropContainerKey:we,dropTargetPos:ge,dropAllowed:ve}),B==null||B({event:i,node:Zo(x.props),expandedKeys:T})}),De(An(r),"onNodeDragOver",function(i,x){var S=r.state,T=S.dragChildrenKeys,M=S.flattenNodes,$=S.keyEntities,L=S.expandedKeys,N=S.indent,V=r.props,B=V.onDragOver,j=V.allowDrop,H=V.direction,W=An(r),X=W.dragNode;if(X){var ee=hL(i,X,x,N,r.dragStartMousePosition,j,M,$,L,H),J=ee.dropPosition,Y=ee.dropLevelOffset,re=ee.dropTargetKey,se=ee.dropContainerKey,ae=ee.dropAllowed,ce=ee.dropTargetPos,Ce=ee.dragOverNodeKey;T.indexOf(re)!==-1||!ae||(X.props.eventKey===re&&Y===0?r.state.dropPosition===null&&r.state.dropLevelOffset===null&&r.state.dropTargetKey===null&&r.state.dropContainerKey===null&&r.state.dropTargetPos===null&&r.state.dropAllowed===!1&&r.state.dragOverNodeKey===null||r.resetDragState():J===r.state.dropPosition&&Y===r.state.dropLevelOffset&&re===r.state.dropTargetKey&&se===r.state.dropContainerKey&&ce===r.state.dropTargetPos&&ae===r.state.dropAllowed&&Ce===r.state.dragOverNodeKey||r.setState({dropPosition:J,dropLevelOffset:Y,dropTargetKey:re,dropContainerKey:se,dropTargetPos:ce,dropAllowed:ae,dragOverNodeKey:Ce}),B==null||B({event:i,node:Zo(x.props)}))}}),De(An(r),"onNodeDragLeave",function(i,x){r.currentMouseOverDroppableNodeKey===x.props.eventKey&&!i.currentTarget.contains(i.relatedTarget)&&(r.resetDragState(),r.currentMouseOverDroppableNodeKey=null);var S=r.props.onDragLeave;S==null||S({event:i,node:Zo(x.props)})}),De(An(r),"onWindowDragEnd",function(i){r.onNodeDragEnd(i,null,!0),window.removeEventListener("dragend",r.onWindowDragEnd)}),De(An(r),"onNodeDragEnd",function(i,x){var S=r.props.onDragEnd;r.setState({dragOverNodeKey:null}),r.cleanDragState(),S==null||S({event:i,node:Zo(x.props)}),r.dragNode=null,window.removeEventListener("dragend",r.onWindowDragEnd)}),De(An(r),"onNodeDrop",function(i,x){var S,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,M=r.state,$=M.dragChildrenKeys,L=M.dropPosition,N=M.dropTargetKey,V=M.dropTargetPos,B=M.dropAllowed;if(B){var j=r.props.onDrop;if(r.setState({dragOverNodeKey:null}),r.cleanDragState(),N!==null){var H=We(We({},I0(N,r.getTreeNodeRequiredProps())),{},{active:((S=r.getActiveItem())===null||S===void 0?void 0:S.key)===N,data:ps(r.state.keyEntities,N).node}),W=$.indexOf(N)!==-1;go(!W,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var X=vR(V),ee={event:i,node:Zo(H),dragNode:r.dragNode?Zo(r.dragNode.props):null,dragNodesKeys:[r.dragNode.props.eventKey].concat($),dropToGap:L!==0,dropPosition:L+Number(X[X.length-1])};T||j==null||j(ee),r.dragNode=null}}}),De(An(r),"cleanDragState",function(){var i=r.state.draggingNodeKey;i!==null&&r.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),r.dragStartMousePosition=null,r.currentMouseOverDroppableNodeKey=null}),De(An(r),"triggerExpandActionExpand",function(i,x){var S=r.state,T=S.expandedKeys,M=S.flattenNodes,$=x.expanded,L=x.key,N=x.isLeaf;if(!(N||i.shiftKey||i.metaKey||i.ctrlKey)){var V=M.filter(function(j){return j.key===L})[0],B=Zo(We(We({},I0(L,r.getTreeNodeRequiredProps())),{},{data:V.data}));r.setExpandedKeys($?fc(T,L):Uc(T,L)),r.onNodeExpand(i,B)}}),De(An(r),"onNodeClick",function(i,x){var S=r.props,T=S.onClick,M=S.expandAction;M==="click"&&r.triggerExpandActionExpand(i,x),T==null||T(i,x)}),De(An(r),"onNodeDoubleClick",function(i,x){var S=r.props,T=S.onDoubleClick,M=S.expandAction;M==="doubleClick"&&r.triggerExpandActionExpand(i,x),T==null||T(i,x)}),De(An(r),"onNodeSelect",function(i,x){var S=r.state.selectedKeys,T=r.state,M=T.keyEntities,$=T.fieldNames,L=r.props,N=L.onSelect,V=L.multiple,B=x.selected,j=x[$.key],H=!B;H?V?S=Uc(S,j):S=[j]:S=fc(S,j);var W=S.map(function(X){var ee=ps(M,X);return ee?ee.node:null}).filter(function(X){return X});r.setUncontrolledState({selectedKeys:S}),N==null||N(S,{event:"select",selected:H,node:x,selectedNodes:W,nativeEvent:i.nativeEvent})}),De(An(r),"onNodeCheck",function(i,x,S){var T=r.state,M=T.keyEntities,$=T.checkedKeys,L=T.halfCheckedKeys,N=r.props,V=N.checkStrictly,B=N.onCheck,j=x.key,H,W={event:"check",node:x,checked:S,nativeEvent:i.nativeEvent};if(V){var X=S?Uc($,j):fc($,j),ee=fc(L,j);H={checked:X,halfChecked:ee},W.checkedNodes=X.map(function(ce){return ps(M,ce)}).filter(function(ce){return ce}).map(function(ce){return ce.node}),r.setUncontrolledState({checkedKeys:X})}else{var J=Qp([].concat(un($),[j]),!0,M),Y=J.checkedKeys,re=J.halfCheckedKeys;if(!S){var se=new Set(Y);se.delete(j);var ae=Qp(Array.from(se),{checked:!1,halfCheckedKeys:re},M);Y=ae.checkedKeys,re=ae.halfCheckedKeys}H=Y,W.checkedNodes=[],W.checkedNodesPositions=[],W.halfCheckedKeys=re,Y.forEach(function(ce){var Ce=ps(M,ce);if(Ce){var we=Ce.node,ge=Ce.pos;W.checkedNodes.push(we),W.checkedNodesPositions.push({node:we,pos:ge})}}),r.setUncontrolledState({checkedKeys:Y},!1,{halfCheckedKeys:re})}B==null||B(H,W)}),De(An(r),"onNodeLoad",function(i){var x,S=i.key,T=r.state.keyEntities,M=ps(T,S);if(!(M!=null&&(x=M.children)!==null&&x!==void 0&&x.length)){var $=new Promise(function(L,N){r.setState(function(V){var B=V.loadedKeys,j=B===void 0?[]:B,H=V.loadingKeys,W=H===void 0?[]:H,X=r.props,ee=X.loadData,J=X.onLoad;if(!ee||j.indexOf(S)!==-1||W.indexOf(S)!==-1)return null;var Y=ee(i);return Y.then(function(){var re=r.state.loadedKeys,se=Uc(re,S);J==null||J(se,{event:"load",node:i}),r.setUncontrolledState({loadedKeys:se}),r.setState(function(ae){return{loadingKeys:fc(ae.loadingKeys,S)}}),L()}).catch(function(re){if(r.setState(function(ae){return{loadingKeys:fc(ae.loadingKeys,S)}}),r.loadingRetryTimes[S]=(r.loadingRetryTimes[S]||0)+1,r.loadingRetryTimes[S]>=Wfe){var se=r.state.loadedKeys;go(!1,"Retry for `loadData` many times but still failed. No more retry."),r.setUncontrolledState({loadedKeys:Uc(se,S)}),L()}N(re)}),{loadingKeys:Uc(W,S)}})});return $.catch(function(){}),$}}),De(An(r),"onNodeMouseEnter",function(i,x){var S=r.props.onMouseEnter;S==null||S({event:i,node:x})}),De(An(r),"onNodeMouseLeave",function(i,x){var S=r.props.onMouseLeave;S==null||S({event:i,node:x})}),De(An(r),"onNodeContextMenu",function(i,x){var S=r.props.onRightClick;S&&(i.preventDefault(),S({event:i,node:x}))}),De(An(r),"onFocus",function(){var i=r.props.onFocus;r.setState({focused:!0});for(var x=arguments.length,S=new Array(x),T=0;T<x;T++)S[T]=arguments[T];i==null||i.apply(void 0,S)}),De(An(r),"onBlur",function(){var i=r.props.onBlur;r.setState({focused:!1}),r.onActiveChange(null);for(var x=arguments.length,S=new Array(x),T=0;T<x;T++)S[T]=arguments[T];i==null||i.apply(void 0,S)}),De(An(r),"getTreeNodeRequiredProps",function(){var i=r.state,x=i.expandedKeys,S=i.selectedKeys,T=i.loadedKeys,M=i.loadingKeys,$=i.checkedKeys,L=i.halfCheckedKeys,N=i.dragOverNodeKey,V=i.dropPosition,B=i.keyEntities;return{expandedKeys:x||[],selectedKeys:S||[],loadedKeys:T||[],loadingKeys:M||[],checkedKeys:$||[],halfCheckedKeys:L||[],dragOverNodeKey:N,dropPosition:V,keyEntities:B}}),De(An(r),"setExpandedKeys",function(i){var x=r.state,S=x.treeData,T=x.fieldNames,M=uE(S,i,T);r.setUncontrolledState({expandedKeys:i,flattenNodes:M},!0)}),De(An(r),"onNodeExpand",function(i,x){var S=r.state.expandedKeys,T=r.state,M=T.listChanging,$=T.fieldNames,L=r.props,N=L.onExpand,V=L.loadData,B=x.expanded,j=x[$.key];if(!M){var H=S.indexOf(j),W=!B;if(go(B&&H!==-1||!B&&H===-1,"Expand state not sync with index check"),W?S=Uc(S,j):S=fc(S,j),r.setExpandedKeys(S),N==null||N(S,{node:x,expanded:W,nativeEvent:i.nativeEvent}),W&&V){var X=r.onNodeLoad(x);X&&X.then(function(){var ee=uE(r.state.treeData,S,$);r.setUncontrolledState({flattenNodes:ee})}).catch(function(){var ee=r.state.expandedKeys,J=fc(ee,j);r.setExpandedKeys(J)})}}}),De(An(r),"onListChangeStart",function(){r.setUncontrolledState({listChanging:!0})}),De(An(r),"onListChangeEnd",function(){setTimeout(function(){r.setUncontrolledState({listChanging:!1})})}),De(An(r),"onActiveChange",function(i){var x=r.state.activeKey,S=r.props,T=S.onActiveChange,M=S.itemScrollOffset,$=M===void 0?0:M;x!==i&&(r.setState({activeKey:i}),i!==null&&r.scrollTo({key:i,offset:$}),T==null||T(i))}),De(An(r),"getActiveItem",function(){var i=r.state,x=i.activeKey,S=i.flattenNodes;return x===null?null:S.find(function(T){var M=T.key;return M===x})||null}),De(An(r),"offsetActiveKey",function(i){var x=r.state,S=x.flattenNodes,T=x.activeKey,M=S.findIndex(function(N){var V=N.key;return V===T});M===-1&&i<0&&(M=S.length),M=(M+i+S.length)%S.length;var $=S[M];if($){var L=$.key;r.onActiveChange(L)}else r.onActiveChange(null)}),De(An(r),"onKeyDown",function(i){var x=r.state,S=x.activeKey,T=x.expandedKeys,M=x.checkedKeys,$=x.fieldNames,L=r.props,N=L.onKeyDown,V=L.checkable,B=L.selectable;switch(i.which){case gn.UP:{r.offsetActiveKey(-1),i.preventDefault();break}case gn.DOWN:{r.offsetActiveKey(1),i.preventDefault();break}}var j=r.getActiveItem();if(j&&j.data){var H=r.getTreeNodeRequiredProps(),W=j.data.isLeaf===!1||!!(j.data[$.children]||[]).length,X=Zo(We(We({},I0(S,H)),{},{data:j.data,active:!0}));switch(i.which){case gn.LEFT:{W&&T.includes(S)?r.onNodeExpand({},X):j.parent&&r.onActiveChange(j.parent.key),i.preventDefault();break}case gn.RIGHT:{W&&!T.includes(S)?r.onNodeExpand({},X):j.children&&j.children.length&&r.onActiveChange(j.children[0].key),i.preventDefault();break}case gn.ENTER:case gn.SPACE:{V&&!X.disabled&&X.checkable!==!1&&!X.disableCheckbox?r.onNodeCheck({},X,!M.includes(S)):!V&&B&&!X.disabled&&X.selectable!==!1&&r.onNodeSelect({},X);break}}}N==null||N(i)}),De(An(r),"setUncontrolledState",function(i){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!r.destroyed){var T=!1,M=!0,$={};Object.keys(i).forEach(function(L){if(r.props.hasOwnProperty(L)){M=!1;return}T=!0,$[L]=i[L]}),T&&(!x||M)&&r.setState(We(We({},$),S))}}),De(An(r),"scrollTo",function(i){r.listRef.current.scrollTo(i)}),r}return Lo(n,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var s=this.props,d=s.activeKey,p=s.itemScrollOffset,i=p===void 0?0:p;d!==void 0&&d!==this.state.activeKey&&(this.setState({activeKey:d}),d!==null&&this.scrollTo({key:d,offset:i}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var s=this.state,d=s.focused,p=s.flattenNodes,i=s.keyEntities,x=s.draggingNodeKey,S=s.activeKey,T=s.dropLevelOffset,M=s.dropContainerKey,$=s.dropTargetKey,L=s.dropPosition,N=s.dragOverNodeKey,V=s.indent,B=this.props,j=B.prefixCls,H=B.className,W=B.style,X=B.showLine,ee=B.focusable,J=B.tabIndex,Y=J===void 0?0:J,re=B.selectable,se=B.showIcon,ae=B.icon,ce=B.switcherIcon,Ce=B.draggable,we=B.checkable,ge=B.checkStrictly,ve=B.disabled,de=B.motion,pe=B.loadData,fe=B.filterTreeNode,me=B.height,Ie=B.itemHeight,Me=B.virtual,Be=B.titleRender,$e=B.dropIndicatorRender,ze=B.onContextMenu,Je=B.onScroll,yt=B.direction,at=B.rootClassName,gt=B.rootStyle,wt=Ko(this.props,{aria:!0,data:!0}),Pe;return Ce&&(cr(Ce)==="object"?Pe=Ce:typeof Ce=="function"?Pe={nodeDraggable:Ce}:Pe={}),_.createElement(gR.Provider,{value:{prefixCls:j,selectable:re,showIcon:se,icon:ae,switcherIcon:ce,draggable:Pe,draggingNodeKey:x,checkable:we,checkStrictly:ge,disabled:ve,keyEntities:i,dropLevelOffset:T,dropContainerKey:M,dropTargetKey:$,dropPosition:L,dragOverNodeKey:N,indent:V,direction:yt,dropIndicatorRender:$e,loadData:pe,filterTreeNode:fe,titleRender:Be,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop}},_.createElement("div",{role:"tree",className:pt(j,H,at,De(De(De({},"".concat(j,"-show-line"),X),"".concat(j,"-focused"),d),"".concat(j,"-active-focused"),S!==null)),style:gt},_.createElement(i8,qt({ref:this.listRef,prefixCls:j,style:W,data:p,disabled:ve,selectable:re,checkable:!!we,motion:de,dragging:x!==null,height:me,itemHeight:Ie,virtual:Me,focusable:ee,focused:d,tabIndex:Y,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:ze,onScroll:Je},this.getTreeNodeRequiredProps(),wt))))}}],[{key:"getDerivedStateFromProps",value:function(s,d){var p=d.prevProps,i={prevProps:s};function x(Y){return!p&&s.hasOwnProperty(Y)||p&&p[Y]!==s[Y]}var S,T=d.fieldNames;if(x("fieldNames")&&(T=xm(s.fieldNames),i.fieldNames=T),x("treeData")?S=s.treeData:x("children")&&(go(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),S=qj(s.children)),S){i.treeData=S;var M=sR(S,{fieldNames:T});i.keyEntities=We(De({},ef,r8),M.keyEntities)}var $=i.keyEntities||d.keyEntities;if(x("expandedKeys")||p&&x("autoExpandParent"))i.expandedKeys=s.autoExpandParent||!p&&s.defaultExpandParent?WI(s.expandedKeys,$):s.expandedKeys;else if(!p&&s.defaultExpandAll){var L=We({},$);delete L[ef];var N=[];Object.keys(L).forEach(function(Y){var re=L[Y];re.children&&re.children.length&&N.push(re.key)}),i.expandedKeys=N}else!p&&s.defaultExpandedKeys&&(i.expandedKeys=s.autoExpandParent||s.defaultExpandParent?WI(s.defaultExpandedKeys,$):s.defaultExpandedKeys);if(i.expandedKeys||delete i.expandedKeys,S||i.expandedKeys){var V=uE(S||d.treeData,i.expandedKeys||d.expandedKeys,T);i.flattenNodes=V}if(s.selectable&&(x("selectedKeys")?i.selectedKeys=fL(s.selectedKeys,s):!p&&s.defaultSelectedKeys&&(i.selectedKeys=fL(s.defaultSelectedKeys,s))),s.checkable){var B;if(x("checkedKeys")?B=gE(s.checkedKeys)||{}:!p&&s.defaultCheckedKeys?B=gE(s.defaultCheckedKeys)||{}:S&&(B=gE(s.checkedKeys)||{checkedKeys:d.checkedKeys,halfCheckedKeys:d.halfCheckedKeys}),B){var j=B,H=j.checkedKeys,W=H===void 0?[]:H,X=j.halfCheckedKeys,ee=X===void 0?[]:X;if(!s.checkStrictly){var J=Qp(W,!0,$);W=J.checkedKeys,ee=J.halfCheckedKeys}i.checkedKeys=W,i.halfCheckedKeys=ee}}return x("loadedKeys")&&(i.loadedKeys=s.loadedKeys),i}}]),n}(_.Component);De(yR,"defaultProps",{prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:Lfe,allowDrop:function(){return!0},expandAction:!1});De(yR,"TreeNode",Sm);const Gfe=e=>{let{treeCls:t,treeNodeCls:n,directoryNodeSelectedBg:r,directoryNodeSelectedColor:s,motionDurationMid:d,borderRadius:p,controlItemBgHover:i}=e;return{[`${t}${t}-directory ${n}`]:{[`${t}-node-content-wrapper`]:{position:"static",[`> *:not(${t}-drop-indicator)`]:{position:"relative"},"&:hover":{background:"transparent"},"&:before":{position:"absolute",inset:0,transition:`background-color ${d}`,content:'""',borderRadius:p},"&:hover:before":{background:i}},[`${t}-switcher`]:{marginInlineEnd:0},"&-selected":{[`${t}-switcher, ${t}-draggable-icon`]:{color:s,zIndex:1},[`${t}-node-content-wrapper`]:{color:s,background:"transparent","&:before, &:hover:before":{background:r}}}}}},qfe=new Mi("ant-tree-node-fx-do-not-use",{"0%":{opacity:0},"100%":{opacity:1}}),Kfe=(e,t)=>({[`.${e}-switcher-icon`]:{display:"inline-block",fontSize:10,verticalAlign:"baseline",svg:{transition:`transform ${t.motionDurationSlow}`}}}),Xfe=(e,t)=>({[`.${e}-drop-indicator`]:{position:"absolute",zIndex:1,height:2,backgroundColor:t.colorPrimary,borderRadius:1,pointerEvents:"none","&:after":{position:"absolute",top:-3,insetInlineStart:-6,width:8,height:8,backgroundColor:"transparent",border:`${nt(t.lineWidthBold)} solid ${t.colorPrimary}`,borderRadius:"50%",content:'""'}}}),Zfe=(e,t)=>{const{treeCls:n,treeNodeCls:r,treeNodePadding:s,titleHeight:d,indentSize:p,nodeSelectedBg:i,nodeHoverBg:x,colorTextQuaternary:S}=t,T=t.marginXXS;return{[n]:Object.assign(Object.assign({},lo(t)),{background:t.colorBgContainer,borderRadius:t.borderRadius,transition:`background-color ${t.motionDurationSlow}`,"&-rtl":{direction:"rtl"},[`&${n}-rtl ${n}-switcher_close ${n}-switcher-icon svg`]:{transform:"rotate(90deg)"},[`&-focused:not(:hover):not(${n}-active-focused)`]:Object.assign({},Ad(t)),[`${n}-list-holder-inner`]:{alignItems:"flex-start"},[`&${n}-block-node`]:{[`${n}-list-holder-inner`]:{alignItems:"stretch",[`${n}-node-content-wrapper`]:{flex:"auto"},[`${r}.dragging:after`]:{position:"absolute",inset:0,border:`1px solid ${t.colorPrimary}`,opacity:0,animationName:qfe,animationDuration:t.motionDurationSlow,animationPlayState:"running",animationFillMode:"forwards",content:'""',pointerEvents:"none",borderRadius:t.borderRadius}}},[r]:{display:"flex",alignItems:"flex-start",marginBottom:s,lineHeight:nt(d),position:"relative","&:before":{content:'""',position:"absolute",zIndex:1,insetInlineStart:0,width:"100%",top:"100%",height:s},[`&-disabled ${n}-node-content-wrapper`]:{color:t.colorTextDisabled,cursor:"not-allowed","&:hover":{background:"transparent"}},[`&:not(${r}-disabled)`]:{[`${n}-node-content-wrapper`]:{"&:hover":{color:t.nodeHoverColor}}},[`&-active ${n}-node-content-wrapper`]:{background:t.controlItemBgHover},[`&:not(${r}-disabled).filter-node ${n}-title`]:{color:t.colorPrimary,fontWeight:500},"&-draggable":{cursor:"grab",[`${n}-draggable-icon`]:{flexShrink:0,width:d,textAlign:"center",visibility:"visible",color:S},[`&${r}-disabled ${n}-draggable-icon`]:{visibility:"hidden"}}},[`${n}-indent`]:{alignSelf:"stretch",whiteSpace:"nowrap",userSelect:"none","&-unit":{display:"inline-block",width:p}},[`${n}-draggable-icon`]:{visibility:"hidden"},[`${n}-switcher`]:Object.assign(Object.assign({},Kfe(e,t)),{position:"relative",flex:"none",alignSelf:"stretch",width:d,margin:0,textAlign:"center",cursor:"pointer",userSelect:"none",transition:`all ${t.motionDurationSlow}`,marginInlineEnd:t.calc(t.calc(d).sub(t.controlInteractiveSize)).div(2).equal(),"&-noop":{cursor:"unset"},"&:before":{pointerEvents:"none",content:'""',width:d,height:d,position:"absolute",left:{_skip_check_:!0,value:0},top:0,borderRadius:t.borderRadius,transition:`all ${t.motionDurationSlow}`},[`&:not(${n}-switcher-noop):hover:before`]:{backgroundColor:t.colorBgTextHover},[`&_close ${n}-switcher-icon svg`]:{transform:"rotate(-90deg)"},"&-loading-icon":{color:t.colorPrimary},"&-leaf-line":{position:"relative",zIndex:1,display:"inline-block",width:"100%",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:t.calc(d).div(2).equal(),bottom:t.calc(s).mul(-1).equal(),marginInlineStart:-1,borderInlineEnd:`1px solid ${t.colorBorder}`,content:'""'},"&:after":{position:"absolute",width:t.calc(t.calc(d).div(2).equal()).mul(.8).equal(),height:t.calc(d).div(2).equal(),borderBottom:`1px solid ${t.colorBorder}`,content:'""'}}}),[`${n}-checkbox`]:{top:"initial",marginInlineEnd:T,alignSelf:"flex-start",marginTop:t.marginXXS},[`${n}-node-content-wrapper`]:Object.assign(Object.assign({position:"relative",minHeight:d,paddingBlock:0,paddingInline:t.paddingXS,background:"transparent",borderRadius:t.borderRadius,cursor:"pointer",transition:`all ${t.motionDurationMid}, border 0s, line-height 0s, box-shadow 0s`},Xfe(e,t)),{"&:hover":{backgroundColor:x},[`&${n}-node-selected`]:{color:t.nodeSelectedColor,backgroundColor:i},[`${n}-iconEle`]:{display:"inline-block",width:d,height:d,textAlign:"center",verticalAlign:"top","&:empty":{display:"none"}}}),[`${n}-unselectable ${n}-node-content-wrapper:hover`]:{backgroundColor:"transparent"},[`${r}.drop-container > [draggable]`]:{boxShadow:`0 0 0 2px ${t.colorPrimary}`},"&-show-line":{[`${n}-indent-unit`]:{position:"relative",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:t.calc(d).div(2).equal(),bottom:t.calc(s).mul(-1).equal(),borderInlineEnd:`1px solid ${t.colorBorder}`,content:'""'},"&-end:before":{display:"none"}},[`${n}-switcher`]:{background:"transparent","&-line-icon":{verticalAlign:"-0.15em"}}},[`${r}-leaf-last ${n}-switcher-leaf-line:before`]:{top:"auto !important",bottom:"auto !important",height:`${nt(t.calc(d).div(2).equal())} !important`}})}},Yfe=(e,t)=>{const n=`.${e}`,r=`${n}-treenode`,s=t.calc(t.paddingXS).div(2).equal(),d=pi(t,{treeCls:n,treeNodeCls:r,treeNodePadding:s});return[Zfe(e,d),Gfe(d)]},Jfe=e=>{const{controlHeightSM:t,controlItemBgHover:n,controlItemBgActive:r}=e,s=t;return{titleHeight:s,indentSize:s,nodeHoverBg:n,nodeHoverColor:e.colorText,nodeSelectedBg:r,nodeSelectedColor:e.colorText}},Qfe=e=>{const{colorTextLightSolid:t,colorPrimary:n}=e;return Object.assign(Object.assign({},Jfe(e)),{directoryNodeSelectedColor:t,directoryNodeSelectedBg:n})},epe=Qi("Tree",(e,t)=>{let{prefixCls:n}=t;return[{[e.componentCls]:Xj(`${n}-checkbox`,e)},Yfe(n,e),o5(e)]},Qfe),xL=4;function tpe(e){const{dropPosition:t,dropLevelOffset:n,prefixCls:r,indent:s,direction:d="ltr"}=e,p=d==="ltr"?"left":"right",i=d==="ltr"?"right":"left",x={[p]:-n*s+xL,[i]:0};switch(t){case-1:x.top=-3;break;case 1:x.bottom=-3;break;default:x.bottom=-3,x[p]=s+xL;break}return Ft.createElement("div",{style:x,className:`${r}-drop-indicator`})}const npe=e=>{const{prefixCls:t,switcherIcon:n,treeNodeProps:r,showLine:s,switcherLoadingIcon:d}=e,{isLeaf:p,expanded:i,loading:x}=r;if(x)return _.isValidElement(d)?d:_.createElement(xy,{className:`${t}-switcher-loading-icon`});let S;if(s&&typeof s=="object"&&(S=s.showLeafIcon),p){if(!s)return null;if(typeof S!="boolean"&&S){const $=typeof S=="function"?S(r):S,L=`${t}-switcher-line-custom-icon`;return _.isValidElement($)?ns($,{className:pt($.props.className||"",L)}):$}return S?_.createElement(kV,{className:`${t}-switcher-line-icon`}):_.createElement("span",{className:`${t}-switcher-leaf-line`})}const T=`${t}-switcher-icon`,M=typeof n=="function"?n(r):n;return _.isValidElement(M)?ns(M,{className:pt(M.props.className||"",T)}):M!==void 0?M:s?i?_.createElement(ahe,{className:`${t}-switcher-line-icon`}):_.createElement(che,{className:`${t}-switcher-line-icon`}):_.createElement(fde,{className:T})},o8=Ft.forwardRef((e,t)=>{var n;const{getPrefixCls:r,direction:s,virtual:d,tree:p}=Ft.useContext(fr),{prefixCls:i,className:x,showIcon:S=!1,showLine:T,switcherIcon:M,switcherLoadingIcon:$,blockNode:L=!1,children:N,checkable:V=!1,selectable:B=!0,draggable:j,motion:H,style:W}=e,X=r("tree",i),ee=r(),J=H??Object.assign(Object.assign({},e5(ee)),{motionAppear:!1}),Y=Object.assign(Object.assign({},e),{checkable:V,selectable:B,showIcon:S,motion:J,blockNode:L,showLine:!!T,dropIndicatorRender:tpe}),[re,se,ae]=epe(X),[,ce]=Ra(),Ce=ce.paddingXS/2+(((n=ce.Tree)===null||n===void 0?void 0:n.titleHeight)||ce.controlHeightSM),we=Ft.useMemo(()=>{if(!j)return!1;let ve={};switch(typeof j){case"function":ve.nodeDraggable=j;break;case"object":ve=Object.assign({},j);break}return ve.icon!==!1&&(ve.icon=ve.icon||Ft.createElement(Kde,null)),ve},[j]),ge=ve=>Ft.createElement(npe,{prefixCls:X,switcherIcon:M,switcherLoadingIcon:$,treeNodeProps:ve,showLine:T});return re(Ft.createElement(yR,Object.assign({itemHeight:Ce,ref:t,virtual:d},Y,{style:Object.assign(Object.assign({},p==null?void 0:p.style),W),prefixCls:X,className:pt({[`${X}-icon-hide`]:!S,[`${X}-block-node`]:L,[`${X}-unselectable`]:!B,[`${X}-rtl`]:s==="rtl"},p==null?void 0:p.className,x,se,ae),direction:s,checkable:V&&Ft.createElement("span",{className:`${X}-checkbox-inner`}),selectable:B,switcherIcon:ge,draggable:we}),N))}),bL=0,vE=1,wL=2;function _R(e,t,n){const{key:r,children:s}=n;function d(p){const i=p[r],x=p[s];t(i,p)!==!1&&_R(x||[],t,n)}e.forEach(d)}function rpe(e){let{treeData:t,expandedKeys:n,startKey:r,endKey:s,fieldNames:d}=e;const p=[];let i=bL;if(r&&r===s)return[r];if(!r||!s)return[];function x(S){return S===r||S===s}return _R(t,S=>{if(i===wL)return!1;if(x(S)){if(p.push(S),i===bL)i=vE;else if(i===vE)return i=wL,!1}else i===vE&&p.push(S);return n.includes(S)},xm(d)),p}function yE(e,t,n){const r=un(t),s=[];return _R(e,(d,p)=>{const i=r.indexOf(d);return i!==-1&&(s.push(p),r.splice(i,1)),!!r.length},xm(n)),s}var SL=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};function ipe(e){const{isLeaf:t,expanded:n}=e;return t?_.createElement(kV,null):n?_.createElement(Vde,null):_.createElement(Wde,null)}function CL(e){let{treeData:t,children:n}=e;return t||qj(n)}const ope=(e,t)=>{var{defaultExpandAll:n,defaultExpandParent:r,defaultExpandedKeys:s}=e,d=SL(e,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]);const p=_.useRef(),i=_.useRef(),x=()=>{const{keyEntities:re}=sR(CL(d));let se;return n?se=Object.keys(re):r?se=WI(d.expandedKeys||s||[],re):se=d.expandedKeys||s||[],se},[S,T]=_.useState(d.selectedKeys||d.defaultSelectedKeys||[]),[M,$]=_.useState(()=>x());_.useEffect(()=>{"selectedKeys"in d&&T(d.selectedKeys)},[d.selectedKeys]),_.useEffect(()=>{"expandedKeys"in d&&$(d.expandedKeys)},[d.expandedKeys]);const L=(re,se)=>{var ae;return"expandedKeys"in d||$(re),(ae=d.onExpand)===null||ae===void 0?void 0:ae.call(d,re,se)},N=(re,se)=>{var ae;const{multiple:ce,fieldNames:Ce}=d,{node:we,nativeEvent:ge}=se,{key:ve=""}=we,de=CL(d),pe=Object.assign(Object.assign({},se),{selected:!0}),fe=(ge==null?void 0:ge.ctrlKey)||(ge==null?void 0:ge.metaKey),me=ge==null?void 0:ge.shiftKey;let Ie;ce&&fe?(Ie=re,p.current=ve,i.current=Ie,pe.selectedNodes=yE(de,Ie,Ce)):ce&&me?(Ie=Array.from(new Set([].concat(un(i.current||[]),un(rpe({treeData:de,expandedKeys:M,startKey:ve,endKey:p.current,fieldNames:Ce}))))),pe.selectedNodes=yE(de,Ie,Ce)):(Ie=[ve],p.current=ve,i.current=Ie,pe.selectedNodes=yE(de,Ie,Ce)),(ae=d.onSelect)===null||ae===void 0||ae.call(d,Ie,pe),"selectedKeys"in d||T(Ie)},{getPrefixCls:V,direction:B}=_.useContext(fr),{prefixCls:j,className:H,showIcon:W=!0,expandAction:X="click"}=d,ee=SL(d,["prefixCls","className","showIcon","expandAction"]),J=V("tree",j),Y=pt(`${J}-directory`,{[`${J}-directory-rtl`]:B==="rtl"},H);return _.createElement(o8,Object.assign({icon:ipe,ref:t,blockNode:!0},ee,{showIcon:W,expandAction:X,prefixCls:J,className:Y,expandedKeys:M,selectedKeys:S,onSelect:N,onExpand:L}))},ape=_.forwardRef(ope),xR=o8;xR.DirectoryTree=ape;xR.TreeNode=Sm;const EL=e=>{const{value:t,filterSearch:n,tablePrefixCls:r,locale:s,onChange:d}=e;return n?_.createElement("div",{className:`${r}-filter-dropdown-search`},_.createElement(uu,{prefix:_.createElement(FP,null),placeholder:s.filterSearchPlaceholder,onChange:d,value:t,htmlSize:1,className:`${r}-filter-dropdown-search-input`})):null},spe=e=>{const{keyCode:t}=e;t===gn.ENTER&&e.stopPropagation()},lpe=_.forwardRef((e,t)=>_.createElement("div",{className:e.className,onClick:n=>n.stopPropagation(),onKeyDown:spe,ref:t},e.children));function em(e){let t=[];return(e||[]).forEach(n=>{let{value:r,children:s}=n;t.push(r),s&&(t=[].concat(un(t),un(em(s))))}),t}function cpe(e){return e.some(t=>{let{children:n}=t;return n})}function a8(e,t){return typeof t=="string"||typeof t=="number"?t==null?void 0:t.toString().toLowerCase().includes(e.trim().toLowerCase()):!1}function s8(e){let{filters:t,prefixCls:n,filteredKeys:r,filterMultiple:s,searchValue:d,filterSearch:p}=e;return t.map((i,x)=>{const S=String(i.value);if(i.children)return{key:S||x,label:i.text,popupClassName:`${n}-dropdown-submenu`,children:s8({filters:i.children,prefixCls:n,filteredKeys:r,filterMultiple:s,searchValue:d,filterSearch:p})};const T=s?bm:$y,M={key:i.value!==void 0?S:x,label:_.createElement(_.Fragment,null,_.createElement(T,{checked:r.includes(S)}),_.createElement("span",null,i.text))};return d.trim()?typeof p=="function"?p(d,i)?M:null:a8(d,i.text)?M:null:M})}function _E(e){return e||[]}const upe=e=>{var t,n,r,s;const{tablePrefixCls:d,prefixCls:p,column:i,dropdownPrefixCls:x,columnKey:S,filterOnClose:T,filterMultiple:M,filterMode:$="menu",filterSearch:L=!1,filterState:N,triggerFilter:V,locale:B,children:j,getPopupContainer:H,rootClassName:W}=e,{filterResetToDefaultFilteredValue:X,defaultFilteredValue:ee,filterDropdownProps:J={},filterDropdownOpen:Y,filterDropdownVisible:re,onFilterDropdownVisibleChange:se,onFilterDropdownOpenChange:ae}=i,[ce,Ce]=_.useState(!1),we=!!(N&&(!((t=N.filteredKeys)===null||t===void 0)&&t.length||N.forceFiltered)),ge=Dt=>{var Wt;Ce(Dt),(Wt=J.onOpenChange)===null||Wt===void 0||Wt.call(J,Dt),ae==null||ae(Dt),se==null||se(Dt)},ve=(s=(r=(n=J.open)!==null&&n!==void 0?n:Y)!==null&&r!==void 0?r:re)!==null&&s!==void 0?s:ce,de=N==null?void 0:N.filteredKeys,[pe,fe]=zfe(_E(de)),me=Dt=>{let{selectedKeys:Wt}=Dt;fe(Wt)},Ie=(Dt,Wt)=>{let{node:Vt,checked:Rt}=Wt;me(M?{selectedKeys:Dt}:{selectedKeys:Rt&&Vt.key?[Vt.key]:[]})};_.useEffect(()=>{ce&&me({selectedKeys:_E(de)})},[de]);const[Me,Be]=_.useState([]),$e=Dt=>{Be(Dt)},[ze,Je]=_.useState(""),yt=Dt=>{const{value:Wt}=Dt.target;Je(Wt)};_.useEffect(()=>{ce||Je("")},[ce]);const at=Dt=>{const Wt=Dt!=null&&Dt.length?Dt:null;if(Wt===null&&(!N||!N.filteredKeys)||wc(Wt,N==null?void 0:N.filteredKeys,!0))return null;V({column:i,key:S,filteredKeys:Wt})},gt=()=>{ge(!1),at(pe())},wt=function(){let{confirm:Dt,closeDropdown:Wt}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{confirm:!1,closeDropdown:!1};Dt&&at([]),Wt&&ge(!1),Je(""),fe(X?(ee||[]).map(Vt=>String(Vt)):[])},Pe=function(){let{closeDropdown:Dt}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{closeDropdown:!0};Dt&&ge(!1),at(pe())},mt=(Dt,Wt)=>{Wt.source==="trigger"&&(Dt&&de!==void 0&&fe(_E(de)),ge(Dt),!Dt&&!i.filterDropdown&&T&&gt())},dt=pt({[`${x}-menu-without-submenu`]:!cpe(i.filters||[])}),ht=Dt=>{if(Dt.target.checked){const Wt=em(i==null?void 0:i.filters).map(Vt=>String(Vt));fe(Wt)}else fe([])},je=Dt=>{let{filters:Wt}=Dt;return(Wt||[]).map((Vt,Rt)=>{const dn=String(Vt.value),hn={title:Vt.text,key:Vt.value!==void 0?dn:String(Rt)};return Vt.children&&(hn.children=je({filters:Vt.children})),hn})},St=Dt=>{var Wt;return Object.assign(Object.assign({},Dt),{text:Dt.title,value:Dt.key,children:((Wt=Dt.children)===null||Wt===void 0?void 0:Wt.map(Vt=>St(Vt)))||[]})};let Ct;const{direction:Lt,renderEmpty:At}=_.useContext(fr);if(typeof i.filterDropdown=="function")Ct=i.filterDropdown({prefixCls:`${x}-custom`,setSelectedKeys:Dt=>me({selectedKeys:Dt}),selectedKeys:pe(),confirm:Pe,clearFilters:wt,filters:i.filters,visible:ve,close:()=>{ge(!1)}});else if(i.filterDropdown)Ct=i.filterDropdown;else{const Dt=pe()||[],Wt=()=>{var Rt;const dn=(Rt=At==null?void 0:At("Table.filter"))!==null&&Rt!==void 0?Rt:_.createElement(qc,{image:qc.PRESENTED_IMAGE_SIMPLE,description:B.filterEmptyText,imageStyle:{height:24},style:{margin:0,padding:"16px 0"}});if((i.filters||[]).length===0)return dn;if($==="tree")return _.createElement(_.Fragment,null,_.createElement(EL,{filterSearch:L,value:ze,onChange:yt,tablePrefixCls:d,locale:B}),_.createElement("div",{className:`${d}-filter-dropdown-tree`},M?_.createElement(bm,{checked:Dt.length===em(i.filters).length,indeterminate:Dt.length>0&&Dt.length<em(i.filters).length,className:`${d}-filter-dropdown-checkall`,onChange:ht},B.filterCheckall):null,_.createElement(xR,{checkable:!0,selectable:!1,blockNode:!0,multiple:M,checkStrictly:!M,className:`${x}-menu`,onCheck:Ie,checkedKeys:Dt,selectedKeys:Dt,showIcon:!1,treeData:je({filters:i.filters}),autoExpandParent:!0,defaultExpandAll:!0,filterTreeNode:ze.trim()?Dn=>typeof L=="function"?L(ze,St(Dn)):a8(ze,Dn.title):void 0})));const hn=s8({filters:i.filters||[],filterSearch:L,prefixCls:p,filteredKeys:pe(),filterMultiple:M,searchValue:ze}),Pn=hn.every(Dn=>Dn===null);return _.createElement(_.Fragment,null,_.createElement(EL,{filterSearch:L,value:ze,onChange:yt,tablePrefixCls:d,locale:B}),Pn?dn:_.createElement(uf,{selectable:!0,multiple:M,prefixCls:`${x}-menu`,className:dt,onSelect:me,onDeselect:me,selectedKeys:Dt,getPopupContainer:H,openKeys:Me,onOpenChange:$e,items:hn}))},Vt=()=>X?wc((ee||[]).map(Rt=>String(Rt)),Dt,!0):Dt.length===0;Ct=_.createElement(_.Fragment,null,Wt(),_.createElement("div",{className:`${p}-dropdown-btns`},_.createElement(Di,{type:"link",size:"small",disabled:Vt(),onClick:()=>wt()},B.filterReset),_.createElement(Di,{type:"primary",size:"small",onClick:gt},B.filterConfirm)))}i.filterDropdown&&(Ct=_.createElement(V6,{selectable:void 0},Ct)),Ct=_.createElement(lpe,{className:`${p}-dropdown`},Ct);const Kt=wV({trigger:["click"],placement:Lt==="rtl"?"bottomLeft":"bottomRight",children:(()=>{let Dt;return typeof i.filterIcon=="function"?Dt=i.filterIcon(we):i.filterIcon?Dt=i.filterIcon:Dt=_.createElement(Fde,null),_.createElement("span",{role:"button",tabIndex:-1,className:pt(`${p}-trigger`,{active:we}),onClick:Wt=>{Wt.stopPropagation()}},Dt)})(),getPopupContainer:H},Object.assign(Object.assign({},J),{rootClassName:pt(W,J.rootClassName),open:ve,onOpenChange:mt,dropdownRender:()=>typeof(J==null?void 0:J.dropdownRender)=="function"?J.dropdownRender(Ct):Ct}));return _.createElement("div",{className:`${p}-column`},_.createElement("span",{className:`${d}-column-title`},j),_.createElement(tS,Object.assign({},Kt)))},ZI=(e,t,n)=>{let r=[];return(e||[]).forEach((s,d)=>{var p;const i=Um(d,n);if(s.filters||"filterDropdown"in s||"onFilter"in s)if("filteredValue"in s){let x=s.filteredValue;"filterDropdown"in s||(x=(p=x==null?void 0:x.map(String))!==null&&p!==void 0?p:x),r.push({column:s,key:kd(s,i),filteredKeys:x,forceFiltered:s.filtered})}else r.push({column:s,key:kd(s,i),filteredKeys:t&&s.defaultFilteredValue?s.defaultFilteredValue:void 0,forceFiltered:s.filtered});"children"in s&&(r=[].concat(un(r),un(ZI(s.children,t,i))))}),r};function l8(e,t,n,r,s,d,p,i,x){return n.map((S,T)=>{const M=Um(T,i),{filterOnClose:$=!0,filterMultiple:L=!0,filterMode:N,filterSearch:V}=S;let B=S;if(B.filters||B.filterDropdown){const j=kd(B,M),H=r.find(W=>{let{key:X}=W;return j===X});B=Object.assign(Object.assign({},B),{title:W=>_.createElement(upe,{tablePrefixCls:e,prefixCls:`${e}-filter`,dropdownPrefixCls:t,column:B,columnKey:j,filterState:H,filterOnClose:$,filterMultiple:L,filterMode:N,filterSearch:V,triggerFilter:d,locale:s,getPopupContainer:p,rootClassName:x},aS(S.title,W))})}return"children"in B&&(B=Object.assign(Object.assign({},B),{children:l8(e,t,B.children,r,s,d,p,M,x)})),B})}const TL=e=>{const t={};return e.forEach(n=>{let{key:r,filteredKeys:s,column:d}=n;const p=r,{filters:i,filterDropdown:x}=d;if(x)t[p]=s||null;else if(Array.isArray(s)){const S=em(i);t[p]=S.filter(T=>s.includes(String(T)))}else t[p]=null}),t},YI=(e,t,n)=>t.reduce((s,d)=>{const{column:{onFilter:p,filters:i},filteredKeys:x}=d;return p&&x&&x.length?s.map(S=>Object.assign({},S)).filter(S=>x.some(T=>{const M=em(i),$=M.findIndex(N=>String(N)===String(T)),L=$!==-1?M[$]:T;return S[n]&&(S[n]=YI(S[n],t,n)),p(L,S)})):s},e),c8=e=>e.flatMap(t=>"children"in t?[t].concat(un(c8(t.children||[]))):[t]),dpe=e=>{const{prefixCls:t,dropdownPrefixCls:n,mergedColumns:r,onFilterChange:s,getPopupContainer:d,locale:p,rootClassName:i}=e;sf();const x=_.useMemo(()=>c8(r||[]),[r]),[S,T]=_.useState(()=>ZI(x,!0)),M=_.useMemo(()=>{const V=ZI(x,!1);if(V.length===0)return V;let B=!0;if(V.forEach(j=>{let{filteredKeys:H}=j;H!==void 0&&(B=!1)}),B){const j=(x||[]).map((H,W)=>kd(H,Um(W)));return S.filter(H=>{let{key:W}=H;return j.includes(W)}).map(H=>{const W=x[j.findIndex(X=>X===H.key)];return Object.assign(Object.assign({},H),{column:Object.assign(Object.assign({},H.column),W),forceFiltered:W.filtered})})}return V},[x,S]),$=_.useMemo(()=>TL(M),[M]),L=V=>{const B=M.filter(j=>{let{key:H}=j;return H!==V.key});B.push(V),T(B),s(TL(B),B)};return[V=>l8(t,n,V,M,p,L,d,void 0,i),M,$]},hpe=(e,t,n)=>{const r=_.useRef({});function s(d){var p;if(!r.current||r.current.data!==e||r.current.childrenColumnName!==t||r.current.getRowKey!==n){let S=function(T){T.forEach((M,$)=>{const L=n(M,$);x.set(L,M),M&&typeof M=="object"&&t in M&&S(M[t]||[])})};var i=S;const x=new Map;S(e),r.current={data:e,childrenColumnName:t,kvMap:x,getRowKey:n}}return(p=r.current.kvMap)===null||p===void 0?void 0:p.get(d)}return[s]};var fpe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const u8=10;function ppe(e,t){const n={current:e.current,pageSize:e.pageSize};return Object.keys(t&&typeof t=="object"?t:{}).forEach(s=>{const d=e[s];typeof d!="function"&&(n[s]=d)}),n}function mpe(e,t,n){const r=n&&typeof n=="object"?n:{},{total:s=0}=r,d=fpe(r,["total"]),[p,i]=_.useState(()=>({current:"defaultCurrent"in d?d.defaultCurrent:1,pageSize:"defaultPageSize"in d?d.defaultPageSize:u8})),x=wV(p,d,{total:s>0?s:e}),S=Math.ceil((s||e)/x.pageSize);x.current>S&&(x.current=S||1);const T=($,L)=>{i({current:$??1,pageSize:L||x.pageSize})},M=($,L)=>{var N;n&&((N=n.onChange)===null||N===void 0||N.call(n,$,L)),T($,L),t($,L||(x==null?void 0:x.pageSize))};return n===!1?[{},()=>{}]:[Object.assign(Object.assign({},x),{onChange:M}),T]}const jb="ascend",xE="descend",L1=e=>typeof e.sorter=="object"&&typeof e.sorter.multiple=="number"?e.sorter.multiple:!1,IL=e=>typeof e=="function"?e:e&&typeof e=="object"&&e.compare?e.compare:!1,gpe=(e,t)=>t?e[e.indexOf(t)+1]:e[0],JI=(e,t,n)=>{let r=[];const s=(d,p)=>{r.push({column:d,key:kd(d,p),multiplePriority:L1(d),sortOrder:d.sortOrder})};return(e||[]).forEach((d,p)=>{const i=Um(p,n);d.children?("sortOrder"in d&&s(d,i),r=[].concat(un(r),un(JI(d.children,t,i)))):d.sorter&&("sortOrder"in d?s(d,i):t&&d.defaultSortOrder&&r.push({column:d,key:kd(d,i),multiplePriority:L1(d),sortOrder:d.defaultSortOrder}))}),r},d8=(e,t,n,r,s,d,p,i)=>(t||[]).map((S,T)=>{const M=Um(T,i);let $=S;if($.sorter){const L=$.sortDirections||s,N=$.showSorterTooltip===void 0?p:$.showSorterTooltip,V=kd($,M),B=n.find(se=>{let{key:ae}=se;return ae===V}),j=B?B.sortOrder:null,H=gpe(L,j);let W;if(S.sortIcon)W=S.sortIcon({sortOrder:j});else{const se=L.includes(jb)&&_.createElement(_de,{className:pt(`${e}-column-sorter-up`,{active:j===jb})}),ae=L.includes(xE)&&_.createElement(gde,{className:pt(`${e}-column-sorter-down`,{active:j===xE})});W=_.createElement("span",{className:pt(`${e}-column-sorter`,{[`${e}-column-sorter-full`]:!!(se&&ae)})},_.createElement("span",{className:`${e}-column-sorter-inner`,"aria-hidden":"true"},se,ae))}const{cancelSort:X,triggerAsc:ee,triggerDesc:J}=d||{};let Y=X;H===xE?Y=J:H===jb&&(Y=ee);const re=typeof N=="object"?Object.assign({title:Y},N):{title:Y};$=Object.assign(Object.assign({},$),{className:pt($.className,{[`${e}-column-sort`]:j}),title:se=>{const ae=`${e}-column-sorters`,ce=_.createElement("span",{className:`${e}-column-title`},aS(S.title,se)),Ce=_.createElement("div",{className:ae},ce,W);return N?typeof N!="boolean"&&(N==null?void 0:N.target)==="sorter-icon"?_.createElement("div",{className:`${ae} ${e}-column-sorters-tooltip-target-sorter`},ce,_.createElement($d,Object.assign({},re),W)):_.createElement($d,Object.assign({},re),Ce):Ce},onHeaderCell:se=>{var ae;const ce=((ae=S.onHeaderCell)===null||ae===void 0?void 0:ae.call(S,se))||{},Ce=ce.onClick,we=ce.onKeyDown;ce.onClick=de=>{r({column:S,key:V,sortOrder:H,multiplePriority:L1(S)}),Ce==null||Ce(de)},ce.onKeyDown=de=>{de.keyCode===gn.ENTER&&(r({column:S,key:V,sortOrder:H,multiplePriority:L1(S)}),we==null||we(de))};const ge=kfe(S.title,{}),ve=ge==null?void 0:ge.toString();return j?ce["aria-sort"]=j==="ascend"?"ascending":"descending":ce["aria-label"]=ve||"",ce.className=pt(ce.className,`${e}-column-has-sorters`),ce.tabIndex=0,S.ellipsis&&(ce.title=(ge??"").toString()),ce}})}return"children"in $&&($=Object.assign(Object.assign({},$),{children:d8(e,$.children,n,r,s,d,p,M)})),$}),ML=e=>{const{column:t,sortOrder:n}=e;return{column:t,order:n,field:t.dataIndex,columnKey:t.key}},PL=e=>{const t=e.filter(n=>{let{sortOrder:r}=n;return r}).map(ML);if(t.length===0&&e.length){const n=e.length-1;return Object.assign(Object.assign({},ML(e[n])),{column:void 0,order:void 0,field:void 0,columnKey:void 0})}return t.length<=1?t[0]||{}:t},QI=(e,t,n)=>{const r=t.slice().sort((p,i)=>i.multiplePriority-p.multiplePriority),s=e.slice(),d=r.filter(p=>{let{column:{sorter:i},sortOrder:x}=p;return IL(i)&&x});return d.length?s.sort((p,i)=>{for(let x=0;x<d.length;x+=1){const S=d[x],{column:{sorter:T},sortOrder:M}=S,$=IL(T);if($&&M){const L=$(p,i,M);if(L!==0)return M===jb?L:-L}}return 0}).map(p=>{const i=p[n];return i?Object.assign(Object.assign({},p),{[n]:QI(i,t,n)}):p}):s},vpe=e=>{const{prefixCls:t,mergedColumns:n,sortDirections:r,tableLocale:s,showSorterTooltip:d,onSorterChange:p}=e,[i,x]=_.useState(JI(n,!0)),S=(V,B)=>{const j=[];return V.forEach((H,W)=>{const X=Um(W,B);if(j.push(kd(H,X)),Array.isArray(H.children)){const ee=S(H.children,X);j.push.apply(j,un(ee))}}),j},T=_.useMemo(()=>{let V=!0;const B=JI(n,!1);if(!B.length){const X=S(n);return i.filter(ee=>{let{key:J}=ee;return X.includes(J)})}const j=[];function H(X){V?j.push(X):j.push(Object.assign(Object.assign({},X),{sortOrder:null}))}let W=null;return B.forEach(X=>{W===null?(H(X),X.sortOrder&&(X.multiplePriority===!1?V=!1:W=!0)):(W&&X.multiplePriority!==!1||(V=!1),H(X))}),j},[n,i]),M=_.useMemo(()=>{var V,B;const j=T.map(H=>{let{column:W,sortOrder:X}=H;return{column:W,order:X}});return{sortColumns:j,sortColumn:(V=j[0])===null||V===void 0?void 0:V.column,sortOrder:(B=j[0])===null||B===void 0?void 0:B.order}},[T]),$=V=>{let B;V.multiplePriority===!1||!T.length||T[0].multiplePriority===!1?B=[V]:B=[].concat(un(T.filter(j=>{let{key:H}=j;return H!==V.key})),[V]),x(B),p(PL(B),B)};return[V=>d8(t,V,T,$,r,s,d),T,M,()=>PL(T)]},h8=(e,t)=>e.map(r=>{const s=Object.assign({},r);return s.title=aS(r.title,t),"children"in s&&(s.children=h8(s.children,t)),s}),ype=e=>[_.useCallback(n=>h8(n,e),[e])],_pe=YV((e,t)=>{const{_renderTimes:n}=e,{_renderTimes:r}=t;return n!==r}),xpe=QV((e,t)=>{const{_renderTimes:n}=e,{_renderTimes:r}=t;return n!==r}),bpe=e=>{const{componentCls:t,lineWidth:n,lineType:r,tableBorderColor:s,tableHeaderBg:d,tablePaddingVertical:p,tablePaddingHorizontal:i,calc:x}=e,S=`${nt(n)} ${r} ${s}`,T=(M,$,L)=>({[`&${t}-${M}`]:{[`> ${t}-container`]:{[`> ${t}-content, > ${t}-body`]:{"\n            > table > tbody > tr > th,\n            > table > tbody > tr > td\n          ":{[`> ${t}-expanded-row-fixed`]:{margin:`${nt(x($).mul(-1).equal())}
              ${nt(x(x(L).add(n)).mul(-1).equal())}`}}}}}});return{[`${t}-wrapper`]:{[`${t}${t}-bordered`]:Object.assign(Object.assign(Object.assign({[`> ${t}-title`]:{border:S,borderBottom:0},[`> ${t}-container`]:{borderInlineStart:S,borderTop:S,[`
            > ${t}-content,
            > ${t}-header,
            > ${t}-body,
            > ${t}-summary
          `]:{"> table":{"\n                > thead > tr > th,\n                > thead > tr > td,\n                > tbody > tr > th,\n                > tbody > tr > td,\n                > tfoot > tr > th,\n                > tfoot > tr > td\n              ":{borderInlineEnd:S},"> thead":{"> tr:not(:last-child) > th":{borderBottom:S},"> tr > th::before":{backgroundColor:"transparent !important"}},"\n                > thead > tr,\n                > tbody > tr,\n                > tfoot > tr\n              ":{[`> ${t}-cell-fix-right-first::after`]:{borderInlineEnd:S}},"\n                > tbody > tr > th,\n                > tbody > tr > td\n              ":{[`> ${t}-expanded-row-fixed`]:{margin:`${nt(x(p).mul(-1).equal())} ${nt(x(x(i).add(n)).mul(-1).equal())}`,"&::after":{position:"absolute",top:0,insetInlineEnd:n,bottom:0,borderInlineEnd:S,content:'""'}}}}}},[`&${t}-scroll-horizontal`]:{[`> ${t}-container > ${t}-body`]:{"> table > tbody":{[`
                > tr${t}-expanded-row,
                > tr${t}-placeholder
              `]:{"> th, > td":{borderInlineEnd:0}}}}}},T("middle",e.tablePaddingVerticalMiddle,e.tablePaddingHorizontalMiddle)),T("small",e.tablePaddingVerticalSmall,e.tablePaddingHorizontalSmall)),{[`> ${t}-footer`]:{border:S,borderTop:0}}),[`${t}-cell`]:{[`${t}-container:first-child`]:{borderTop:0},"&-scrollbar:not([rowspan])":{boxShadow:`0 ${nt(n)} 0 ${nt(n)} ${d}`}},[`${t}-bordered ${t}-cell-scrollbar`]:{borderInlineEnd:S}}}},wpe=e=>{const{componentCls:t}=e;return{[`${t}-wrapper`]:{[`${t}-cell-ellipsis`]:Object.assign(Object.assign({},iu),{wordBreak:"keep-all",[`
          &${t}-cell-fix-left-last,
          &${t}-cell-fix-right-first
        `]:{overflow:"visible",[`${t}-cell-content`]:{display:"block",overflow:"hidden",textOverflow:"ellipsis"}},[`${t}-column-title`]:{overflow:"hidden",textOverflow:"ellipsis",wordBreak:"keep-all"}})}}},Spe=e=>{const{componentCls:t}=e;return{[`${t}-wrapper`]:{[`${t}-tbody > tr${t}-placeholder`]:{textAlign:"center",color:e.colorTextDisabled,"\n          &:hover > th,\n          &:hover > td,\n        ":{background:e.colorBgContainer}}}}},Cpe=e=>{const{componentCls:t,antCls:n,motionDurationSlow:r,lineWidth:s,paddingXS:d,lineType:p,tableBorderColor:i,tableExpandIconBg:x,tableExpandColumnWidth:S,borderRadius:T,tablePaddingVertical:M,tablePaddingHorizontal:$,tableExpandedRowBg:L,paddingXXS:N,expandIconMarginTop:V,expandIconSize:B,expandIconHalfInner:j,expandIconScale:H,calc:W}=e,X=`${nt(s)} ${p} ${i}`,ee=W(N).sub(s).equal();return{[`${t}-wrapper`]:{[`${t}-expand-icon-col`]:{width:S},[`${t}-row-expand-icon-cell`]:{textAlign:"center",[`${t}-row-expand-icon`]:{display:"inline-flex",float:"none",verticalAlign:"sub"}},[`${t}-row-indent`]:{height:1,float:"left"},[`${t}-row-expand-icon`]:Object.assign(Object.assign({},yP(e)),{position:"relative",float:"left",width:B,height:B,color:"inherit",lineHeight:nt(B),background:x,border:X,borderRadius:T,transform:`scale(${H})`,"&:focus, &:hover, &:active":{borderColor:"currentcolor"},"&::before, &::after":{position:"absolute",background:"currentcolor",transition:`transform ${r} ease-out`,content:'""'},"&::before":{top:j,insetInlineEnd:ee,insetInlineStart:ee,height:s},"&::after":{top:ee,bottom:ee,insetInlineStart:j,width:s,transform:"rotate(90deg)"},"&-collapsed::before":{transform:"rotate(-180deg)"},"&-collapsed::after":{transform:"rotate(0deg)"},"&-spaced":{"&::before, &::after":{display:"none",content:"none"},background:"transparent",border:0,visibility:"hidden"}}),[`${t}-row-indent + ${t}-row-expand-icon`]:{marginTop:V,marginInlineEnd:d},[`tr${t}-expanded-row`]:{"&, &:hover":{"> th, > td":{background:L}},[`${n}-descriptions-view`]:{display:"flex",table:{flex:"auto",width:"100%"}}},[`${t}-expanded-row-fixed`]:{position:"relative",margin:`${nt(W(M).mul(-1).equal())} ${nt(W($).mul(-1).equal())}`,padding:`${nt(M)} ${nt($)}`}}}},Epe=e=>{const{componentCls:t,antCls:n,iconCls:r,tableFilterDropdownWidth:s,tableFilterDropdownSearchWidth:d,paddingXXS:p,paddingXS:i,colorText:x,lineWidth:S,lineType:T,tableBorderColor:M,headerIconColor:$,fontSizeSM:L,tablePaddingHorizontal:N,borderRadius:V,motionDurationSlow:B,colorTextDescription:j,colorPrimary:H,tableHeaderFilterActiveBg:W,colorTextDisabled:X,tableFilterDropdownBg:ee,tableFilterDropdownHeight:J,controlItemBgHover:Y,controlItemBgActive:re,boxShadowSecondary:se,filterDropdownMenuBg:ae,calc:ce}=e,Ce=`${n}-dropdown`,we=`${t}-filter-dropdown`,ge=`${n}-tree`,ve=`${nt(S)} ${T} ${M}`;return[{[`${t}-wrapper`]:{[`${t}-filter-column`]:{display:"flex",justifyContent:"space-between"},[`${t}-filter-trigger`]:{position:"relative",display:"flex",alignItems:"center",marginBlock:ce(p).mul(-1).equal(),marginInline:`${nt(p)} ${nt(ce(N).div(2).mul(-1).equal())}`,padding:`0 ${nt(p)}`,color:$,fontSize:L,borderRadius:V,cursor:"pointer",transition:`all ${B}`,"&:hover":{color:j,background:W},"&.active":{color:H}}}},{[`${n}-dropdown`]:{[we]:Object.assign(Object.assign({},lo(e)),{minWidth:s,backgroundColor:ee,borderRadius:V,boxShadow:se,overflow:"hidden",[`${Ce}-menu`]:{maxHeight:J,overflowX:"hidden",border:0,boxShadow:"none",borderRadius:"unset",backgroundColor:ae,"&:empty::after":{display:"block",padding:`${nt(i)} 0`,color:X,fontSize:L,textAlign:"center",content:'"Not Found"'}},[`${we}-tree`]:{paddingBlock:`${nt(i)} 0`,paddingInline:i,[ge]:{padding:0},[`${ge}-treenode ${ge}-node-content-wrapper:hover`]:{backgroundColor:Y},[`${ge}-treenode-checkbox-checked ${ge}-node-content-wrapper`]:{"&, &:hover":{backgroundColor:re}}},[`${we}-search`]:{padding:i,borderBottom:ve,"&-input":{input:{minWidth:d},[r]:{color:X}}},[`${we}-checkall`]:{width:"100%",marginBottom:p,marginInlineStart:p},[`${we}-btns`]:{display:"flex",justifyContent:"space-between",padding:`${nt(ce(i).sub(S).equal())} ${nt(i)}`,overflow:"hidden",borderTop:ve}})}},{[`${n}-dropdown ${we}, ${we}-submenu`]:{[`${n}-checkbox-wrapper + span`]:{paddingInlineStart:i,color:x},"> ul":{maxHeight:"calc(100vh - 130px)",overflowX:"hidden",overflowY:"auto"}}}]},Tpe=e=>{const{componentCls:t,lineWidth:n,colorSplit:r,motionDurationSlow:s,zIndexTableFixed:d,tableBg:p,zIndexTableSticky:i,calc:x}=e,S=r;return{[`${t}-wrapper`]:{[`
        ${t}-cell-fix-left,
        ${t}-cell-fix-right
      `]:{position:"sticky !important",zIndex:d,background:p},[`
        ${t}-cell-fix-left-first::after,
        ${t}-cell-fix-left-last::after
      `]:{position:"absolute",top:0,right:{_skip_check_:!0,value:0},bottom:x(n).mul(-1).equal(),width:30,transform:"translateX(100%)",transition:`box-shadow ${s}`,content:'""',pointerEvents:"none"},[`${t}-cell-fix-left-all::after`]:{display:"none"},[`
        ${t}-cell-fix-right-first::after,
        ${t}-cell-fix-right-last::after
      `]:{position:"absolute",top:0,bottom:x(n).mul(-1).equal(),left:{_skip_check_:!0,value:0},width:30,transform:"translateX(-100%)",transition:`box-shadow ${s}`,content:'""',pointerEvents:"none"},[`${t}-container`]:{position:"relative","&::before, &::after":{position:"absolute",top:0,bottom:0,zIndex:x(i).add(1).equal({unit:!1}),width:30,transition:`box-shadow ${s}`,content:'""',pointerEvents:"none"},"&::before":{insetInlineStart:0},"&::after":{insetInlineEnd:0}},[`${t}-ping-left`]:{[`&:not(${t}-has-fix-left) ${t}-container::before`]:{boxShadow:`inset 10px 0 8px -8px ${S}`},[`
          ${t}-cell-fix-left-first::after,
          ${t}-cell-fix-left-last::after
        `]:{boxShadow:`inset 10px 0 8px -8px ${S}`},[`${t}-cell-fix-left-last::before`]:{backgroundColor:"transparent !important"}},[`${t}-ping-right`]:{[`&:not(${t}-has-fix-right) ${t}-container::after`]:{boxShadow:`inset -10px 0 8px -8px ${S}`},[`
          ${t}-cell-fix-right-first::after,
          ${t}-cell-fix-right-last::after
        `]:{boxShadow:`inset -10px 0 8px -8px ${S}`}},[`${t}-fixed-column-gapped`]:{[`
        ${t}-cell-fix-left-first::after,
        ${t}-cell-fix-left-last::after,
        ${t}-cell-fix-right-first::after,
        ${t}-cell-fix-right-last::after
      `]:{boxShadow:"none"}}}}},Ipe=e=>{const{componentCls:t,antCls:n,margin:r}=e;return{[`${t}-wrapper`]:{[`${t}-pagination${n}-pagination`]:{margin:`${nt(r)} 0`},[`${t}-pagination`]:{display:"flex",flexWrap:"wrap",rowGap:e.paddingXS,"> *":{flex:"none"},"&-left":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-right":{justifyContent:"flex-end"}}}}},Mpe=e=>{const{componentCls:t,tableRadius:n}=e;return{[`${t}-wrapper`]:{[t]:{[`${t}-title, ${t}-header`]:{borderRadius:`${nt(n)} ${nt(n)} 0 0`},[`${t}-title + ${t}-container`]:{borderStartStartRadius:0,borderStartEndRadius:0,[`${t}-header, table`]:{borderRadius:0},"table > thead > tr:first-child":{"th:first-child, th:last-child, td:first-child, td:last-child":{borderRadius:0}}},"&-container":{borderStartStartRadius:n,borderStartEndRadius:n,"table > thead > tr:first-child":{"> *:first-child":{borderStartStartRadius:n},"> *:last-child":{borderStartEndRadius:n}}},"&-footer":{borderRadius:`0 0 ${nt(n)} ${nt(n)}`}}}}},Ppe=e=>{const{componentCls:t}=e;return{[`${t}-wrapper-rtl`]:{direction:"rtl",table:{direction:"rtl"},[`${t}-pagination-left`]:{justifyContent:"flex-end"},[`${t}-pagination-right`]:{justifyContent:"flex-start"},[`${t}-row-expand-icon`]:{float:"right","&::after":{transform:"rotate(-90deg)"},"&-collapsed::before":{transform:"rotate(180deg)"},"&-collapsed::after":{transform:"rotate(0deg)"}},[`${t}-container`]:{"&::before":{insetInlineStart:"unset",insetInlineEnd:0},"&::after":{insetInlineStart:0,insetInlineEnd:"unset"},[`${t}-row-indent`]:{float:"right"}}}}},Rpe=e=>{const{componentCls:t,antCls:n,iconCls:r,fontSizeIcon:s,padding:d,paddingXS:p,headerIconColor:i,headerIconHoverColor:x,tableSelectionColumnWidth:S,tableSelectedRowBg:T,tableSelectedRowHoverBg:M,tableRowHoverBg:$,tablePaddingHorizontal:L,calc:N}=e;return{[`${t}-wrapper`]:{[`${t}-selection-col`]:{width:S,[`&${t}-selection-col-with-dropdown`]:{width:N(S).add(s).add(N(d).div(4)).equal()}},[`${t}-bordered ${t}-selection-col`]:{width:N(S).add(N(p).mul(2)).equal(),[`&${t}-selection-col-with-dropdown`]:{width:N(S).add(s).add(N(d).div(4)).add(N(p).mul(2)).equal()}},[`
        table tr th${t}-selection-column,
        table tr td${t}-selection-column,
        ${t}-selection-column
      `]:{paddingInlineEnd:e.paddingXS,paddingInlineStart:e.paddingXS,textAlign:"center",[`${n}-radio-wrapper`]:{marginInlineEnd:0}},[`table tr th${t}-selection-column${t}-cell-fix-left`]:{zIndex:N(e.zIndexTableFixed).add(1).equal({unit:!1})},[`table tr th${t}-selection-column::after`]:{backgroundColor:"transparent !important"},[`${t}-selection`]:{position:"relative",display:"inline-flex",flexDirection:"column"},[`${t}-selection-extra`]:{position:"absolute",top:0,zIndex:1,cursor:"pointer",transition:`all ${e.motionDurationSlow}`,marginInlineStart:"100%",paddingInlineStart:nt(N(L).div(4).equal()),[r]:{color:i,fontSize:s,verticalAlign:"baseline","&:hover":{color:x}}},[`${t}-tbody`]:{[`${t}-row`]:{[`&${t}-row-selected`]:{[`> ${t}-cell`]:{background:T,"&-row-hover":{background:M}}},[`> ${t}-cell-row-hover`]:{background:$}}}}}},Ope=e=>{const{componentCls:t,tableExpandColumnWidth:n,calc:r}=e,s=(d,p,i,x)=>({[`${t}${t}-${d}`]:{fontSize:x,[`
        ${t}-title,
        ${t}-footer,
        ${t}-cell,
        ${t}-thead > tr > th,
        ${t}-tbody > tr > th,
        ${t}-tbody > tr > td,
        tfoot > tr > th,
        tfoot > tr > td
      `]:{padding:`${nt(p)} ${nt(i)}`},[`${t}-filter-trigger`]:{marginInlineEnd:nt(r(i).div(2).mul(-1).equal())},[`${t}-expanded-row-fixed`]:{margin:`${nt(r(p).mul(-1).equal())} ${nt(r(i).mul(-1).equal())}`},[`${t}-tbody`]:{[`${t}-wrapper:only-child ${t}`]:{marginBlock:nt(r(p).mul(-1).equal()),marginInline:`${nt(r(n).sub(i).equal())} ${nt(r(i).mul(-1).equal())}`}},[`${t}-selection-extra`]:{paddingInlineStart:nt(r(i).div(4).equal())}}});return{[`${t}-wrapper`]:Object.assign(Object.assign({},s("middle",e.tablePaddingVerticalMiddle,e.tablePaddingHorizontalMiddle,e.tableFontSizeMiddle)),s("small",e.tablePaddingVerticalSmall,e.tablePaddingHorizontalSmall,e.tableFontSizeSmall))}},Ape=e=>{const{componentCls:t,marginXXS:n,fontSizeIcon:r,headerIconColor:s,headerIconHoverColor:d}=e;return{[`${t}-wrapper`]:{[`${t}-thead th${t}-column-has-sorters`]:{outline:"none",cursor:"pointer",transition:`all ${e.motionDurationSlow}, left 0s`,"&:hover":{background:e.tableHeaderSortHoverBg,"&::before":{backgroundColor:"transparent !important"}},"&:focus-visible":{color:e.colorPrimary},[`
          &${t}-cell-fix-left:hover,
          &${t}-cell-fix-right:hover
        `]:{background:e.tableFixedHeaderSortActiveBg}},[`${t}-thead th${t}-column-sort`]:{background:e.tableHeaderSortBg,"&::before":{backgroundColor:"transparent !important"}},[`td${t}-column-sort`]:{background:e.tableBodySortBg},[`${t}-column-title`]:{position:"relative",zIndex:1,flex:1},[`${t}-column-sorters`]:{display:"flex",flex:"auto",alignItems:"center",justifyContent:"space-between","&::after":{position:"absolute",inset:0,width:"100%",height:"100%",content:'""'}},[`${t}-column-sorters-tooltip-target-sorter`]:{"&::after":{content:"none"}},[`${t}-column-sorter`]:{marginInlineStart:n,color:s,fontSize:0,transition:`color ${e.motionDurationSlow}`,"&-inner":{display:"inline-flex",flexDirection:"column",alignItems:"center"},"&-up, &-down":{fontSize:r,"&.active":{color:e.colorPrimary}},[`${t}-column-sorter-up + ${t}-column-sorter-down`]:{marginTop:"-0.3em"}},[`${t}-column-sorters:hover ${t}-column-sorter`]:{color:d}}}},Dpe=e=>{const{componentCls:t,opacityLoading:n,tableScrollThumbBg:r,tableScrollThumbBgHover:s,tableScrollThumbSize:d,tableScrollBg:p,zIndexTableSticky:i,stickyScrollBarBorderRadius:x,lineWidth:S,lineType:T,tableBorderColor:M}=e,$=`${nt(S)} ${T} ${M}`;return{[`${t}-wrapper`]:{[`${t}-sticky`]:{"&-holder":{position:"sticky",zIndex:i,background:e.colorBgContainer},"&-scroll":{position:"sticky",bottom:0,height:`${nt(d)} !important`,zIndex:i,display:"flex",alignItems:"center",background:p,borderTop:$,opacity:n,"&:hover":{transformOrigin:"center bottom"},"&-bar":{height:d,backgroundColor:r,borderRadius:x,transition:`all ${e.motionDurationSlow}, transform none`,position:"absolute",bottom:0,"&:hover, &-active":{backgroundColor:s}}}}}}},RL=e=>{const{componentCls:t,lineWidth:n,tableBorderColor:r,calc:s}=e,d=`${nt(n)} ${e.lineType} ${r}`;return{[`${t}-wrapper`]:{[`${t}-summary`]:{position:"relative",zIndex:e.zIndexTableFixed,background:e.tableBg,"> tr":{"> th, > td":{borderBottom:d}}},[`div${t}-summary`]:{boxShadow:`0 ${nt(s(n).mul(-1).equal())} 0 ${r}`}}}},$pe=e=>{const{componentCls:t,motionDurationMid:n,lineWidth:r,lineType:s,tableBorderColor:d,calc:p}=e,i=`${nt(r)} ${s} ${d}`,x=`${t}-expanded-row-cell`;return{[`${t}-wrapper`]:{[`${t}-tbody-virtual`]:{[`${t}-tbody-virtual-holder-inner`]:{[`
            & > ${t}-row, 
            & > div:not(${t}-row) > ${t}-row
          `]:{display:"flex",boxSizing:"border-box",width:"100%"}},[`${t}-cell`]:{borderBottom:i,transition:`background ${n}`},[`${t}-expanded-row`]:{[`${x}${x}-fixed`]:{position:"sticky",insetInlineStart:0,overflow:"hidden",width:`calc(var(--virtual-width) - ${nt(r)})`,borderInlineEnd:"none"}}},[`${t}-bordered`]:{[`${t}-tbody-virtual`]:{"&:after":{content:'""',insetInline:0,bottom:0,borderBottom:i,position:"absolute"},[`${t}-cell`]:{borderInlineEnd:i,[`&${t}-cell-fix-right-first:before`]:{content:'""',position:"absolute",insetBlock:0,insetInlineStart:p(r).mul(-1).equal(),borderInlineStart:i}}},[`&${t}-virtual`]:{[`${t}-placeholder ${t}-cell`]:{borderInlineEnd:i,borderBottom:i}}}}}},kpe=e=>{const{componentCls:t,fontWeightStrong:n,tablePaddingVertical:r,tablePaddingHorizontal:s,tableExpandColumnWidth:d,lineWidth:p,lineType:i,tableBorderColor:x,tableFontSize:S,tableBg:T,tableRadius:M,tableHeaderTextColor:$,motionDurationMid:L,tableHeaderBg:N,tableHeaderCellSplitColor:V,tableFooterTextColor:B,tableFooterBg:j,calc:H}=e,W=`${nt(p)} ${i} ${x}`;return{[`${t}-wrapper`]:Object.assign(Object.assign({clear:"both",maxWidth:"100%"},ou()),{[t]:Object.assign(Object.assign({},lo(e)),{fontSize:S,background:T,borderRadius:`${nt(M)} ${nt(M)} 0 0`,scrollbarColor:`${e.tableScrollThumbBg} ${e.tableScrollBg}`}),table:{width:"100%",textAlign:"start",borderRadius:`${nt(M)} ${nt(M)} 0 0`,borderCollapse:"separate",borderSpacing:0},[`
          ${t}-cell,
          ${t}-thead > tr > th,
          ${t}-tbody > tr > th,
          ${t}-tbody > tr > td,
          tfoot > tr > th,
          tfoot > tr > td
        `]:{position:"relative",padding:`${nt(r)} ${nt(s)}`,overflowWrap:"break-word"},[`${t}-title`]:{padding:`${nt(r)} ${nt(s)}`},[`${t}-thead`]:{"\n          > tr > th,\n          > tr > td\n        ":{position:"relative",color:$,fontWeight:n,textAlign:"start",background:N,borderBottom:W,transition:`background ${L} ease`,"&[colspan]:not([colspan='1'])":{textAlign:"center"},[`&:not(:last-child):not(${t}-selection-column):not(${t}-row-expand-icon-cell):not([colspan])::before`]:{position:"absolute",top:"50%",insetInlineEnd:0,width:1,height:"1.6em",backgroundColor:V,transform:"translateY(-50%)",transition:`background-color ${L}`,content:'""'}},"> tr:not(:last-child) > th[colspan]":{borderBottom:0}},[`${t}-tbody`]:{"> tr":{"> th, > td":{transition:`background ${L}, border-color ${L}`,borderBottom:W,[`
              > ${t}-wrapper:only-child,
              > ${t}-expanded-row-fixed > ${t}-wrapper:only-child
            `]:{[t]:{marginBlock:nt(H(r).mul(-1).equal()),marginInline:`${nt(H(d).sub(s).equal())}
                ${nt(H(s).mul(-1).equal())}`,[`${t}-tbody > tr:last-child > td`]:{borderBottom:0,"&:first-child, &:last-child":{borderRadius:0}}}}},"> th":{position:"relative",color:$,fontWeight:n,textAlign:"start",background:N,borderBottom:W,transition:`background ${L} ease`}}},[`${t}-footer`]:{padding:`${nt(r)} ${nt(s)}`,color:B,background:j}})}},zpe=e=>{const{colorFillAlter:t,colorBgContainer:n,colorTextHeading:r,colorFillSecondary:s,colorFillContent:d,controlItemBgActive:p,controlItemBgActiveHover:i,padding:x,paddingSM:S,paddingXS:T,colorBorderSecondary:M,borderRadiusLG:$,controlHeight:L,colorTextPlaceholder:N,fontSize:V,fontSizeSM:B,lineHeight:j,lineWidth:H,colorIcon:W,colorIconHover:X,opacityLoading:ee,controlInteractiveSize:J}=e,Y=new Ji(s).onBackground(n).toHexShortString(),re=new Ji(d).onBackground(n).toHexShortString(),se=new Ji(t).onBackground(n).toHexShortString(),ae=new Ji(W),ce=new Ji(X),Ce=J/2-H,we=Ce*2+H*3;return{headerBg:se,headerColor:r,headerSortActiveBg:Y,headerSortHoverBg:re,bodySortBg:se,rowHoverBg:se,rowSelectedBg:p,rowSelectedHoverBg:i,rowExpandedBg:t,cellPaddingBlock:x,cellPaddingInline:x,cellPaddingBlockMD:S,cellPaddingInlineMD:T,cellPaddingBlockSM:T,cellPaddingInlineSM:T,borderColor:M,headerBorderRadius:$,footerBg:se,footerColor:r,cellFontSize:V,cellFontSizeMD:V,cellFontSizeSM:V,headerSplitColor:M,fixedHeaderSortActiveBg:Y,headerFilterHoverBg:d,filterDropdownMenuBg:n,filterDropdownBg:n,expandIconBg:n,selectionColumnWidth:L,stickyScrollBarBg:N,stickyScrollBarBorderRadius:100,expandIconMarginTop:(V*j-H*3)/2-Math.ceil((B*1.4-H*3)/2),headerIconColor:ae.clone().setAlpha(ae.getAlpha()*ee).toRgbString(),headerIconHoverColor:ce.clone().setAlpha(ce.getAlpha()*ee).toRgbString(),expandIconHalfInner:Ce,expandIconSize:we,expandIconScale:J/we}},OL=2,Lpe=Qi("Table",e=>{const{colorTextHeading:t,colorSplit:n,colorBgContainer:r,controlInteractiveSize:s,headerBg:d,headerColor:p,headerSortActiveBg:i,headerSortHoverBg:x,bodySortBg:S,rowHoverBg:T,rowSelectedBg:M,rowSelectedHoverBg:$,rowExpandedBg:L,cellPaddingBlock:N,cellPaddingInline:V,cellPaddingBlockMD:B,cellPaddingInlineMD:j,cellPaddingBlockSM:H,cellPaddingInlineSM:W,borderColor:X,footerBg:ee,footerColor:J,headerBorderRadius:Y,cellFontSize:re,cellFontSizeMD:se,cellFontSizeSM:ae,headerSplitColor:ce,fixedHeaderSortActiveBg:Ce,headerFilterHoverBg:we,filterDropdownBg:ge,expandIconBg:ve,selectionColumnWidth:de,stickyScrollBarBg:pe,calc:fe}=e,me=pi(e,{tableFontSize:re,tableBg:r,tableRadius:Y,tablePaddingVertical:N,tablePaddingHorizontal:V,tablePaddingVerticalMiddle:B,tablePaddingHorizontalMiddle:j,tablePaddingVerticalSmall:H,tablePaddingHorizontalSmall:W,tableBorderColor:X,tableHeaderTextColor:p,tableHeaderBg:d,tableFooterTextColor:J,tableFooterBg:ee,tableHeaderCellSplitColor:ce,tableHeaderSortBg:i,tableHeaderSortHoverBg:x,tableBodySortBg:S,tableFixedHeaderSortActiveBg:Ce,tableHeaderFilterActiveBg:we,tableFilterDropdownBg:ge,tableRowHoverBg:T,tableSelectedRowBg:M,tableSelectedRowHoverBg:$,zIndexTableFixed:OL,zIndexTableSticky:fe(OL).add(1).equal({unit:!1}),tableFontSizeMiddle:se,tableFontSizeSmall:ae,tableSelectionColumnWidth:de,tableExpandIconBg:ve,tableExpandColumnWidth:fe(s).add(fe(e.padding).mul(2)).equal(),tableExpandedRowBg:L,tableFilterDropdownWidth:120,tableFilterDropdownHeight:264,tableFilterDropdownSearchWidth:140,tableScrollThumbSize:8,tableScrollThumbBg:pe,tableScrollThumbBgHover:t,tableScrollBg:n});return[kpe(me),Ipe(me),RL(me),Ape(me),Epe(me),bpe(me),Mpe(me),Cpe(me),RL(me),Spe(me),Rpe(me),Tpe(me),Dpe(me),wpe(me),Ope(me),Ppe(me),$pe(me)]},zpe,{unitless:{expandIconScale:!0}}),Npe=[],Fpe=(e,t)=>{var n,r;const{prefixCls:s,className:d,rootClassName:p,style:i,size:x,bordered:S,dropdownPrefixCls:T,dataSource:M,pagination:$,rowSelection:L,rowKey:N="key",rowClassName:V,columns:B,children:j,childrenColumnName:H,onChange:W,getPopupContainer:X,loading:ee,expandIcon:J,expandable:Y,expandedRowRender:re,expandIconColumnIndex:se,indentSize:ae,scroll:ce,sortDirections:Ce,locale:we,showSorterTooltip:ge={target:"full-header"},virtual:ve}=e;sf();const de=_.useMemo(()=>B||pR(j),[B,j]),pe=_.useMemo(()=>de.some(bt=>bt.responsive),[de]),fe=BP(pe),me=_.useMemo(()=>{const bt=new Set(Object.keys(fe).filter(Mt=>fe[Mt]));return de.filter(Mt=>!Mt.responsive||Mt.responsive.some(kt=>bt.has(kt)))},[de,fe]),Ie=vo(e,["className","style","columns"]),{locale:Me=ru,direction:Be,table:$e,renderEmpty:ze,getPrefixCls:Je,getPopupContainer:yt}=_.useContext(fr),at=as(x),gt=Object.assign(Object.assign({},Me.Table),we),wt=M||Npe,Pe=Je("table",s),mt=Je("dropdown",T),[,dt]=Ra(),ht=Qo(Pe),[je,St,Ct]=Lpe(Pe,ht),Lt=Object.assign(Object.assign({childrenColumnName:H,expandIconColumnIndex:se},Y),{expandIcon:(n=Y==null?void 0:Y.expandIcon)!==null&&n!==void 0?n:(r=$e==null?void 0:$e.expandable)===null||r===void 0?void 0:r.expandIcon}),{childrenColumnName:At="children"}=Lt,Yt=_.useMemo(()=>wt.some(bt=>bt==null?void 0:bt[At])?"nest":re||Y!=null&&Y.expandedRowRender?"row":null,[wt]),Kt={body:_.useRef()},Dt=$fe(Pe),Wt=_.useRef(null),Vt=_.useRef(null);Afe(t,()=>Object.assign(Object.assign({},Vt.current),{nativeElement:Wt.current}));const Rt=_.useMemo(()=>typeof N=="function"?N:bt=>bt==null?void 0:bt[N],[N]),[dn]=hpe(wt,At,Rt),hn={},Pn=function(bt,Mt){let kt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;var Gt,vn,On,bn;const zn=Object.assign(Object.assign({},hn),bt);kt&&((Gt=hn.resetPagination)===null||Gt===void 0||Gt.call(hn),!((vn=zn.pagination)===null||vn===void 0)&&vn.current&&(zn.pagination.current=1),$&&((On=$.onChange)===null||On===void 0||On.call($,1,(bn=zn.pagination)===null||bn===void 0?void 0:bn.pageSize))),ce&&ce.scrollToFirstRowOnChange!==!1&&Kt.body.current&&uY(0,{getContainer:()=>Kt.body.current}),W==null||W(zn.pagination,zn.filters,zn.sorter,{currentDataSource:YI(QI(wt,zn.sorterStates,At),zn.filterStates,At),action:Mt})},Dn=(bt,Mt)=>{Pn({sorter:bt,sorterStates:Mt},"sort",!1)},[yn,Rn,kn,Cn]=vpe({prefixCls:Pe,mergedColumns:me,onSorterChange:Dn,sortDirections:Ce||["ascend","descend"],tableLocale:gt,showSorterTooltip:ge}),nn=_.useMemo(()=>QI(wt,Rn,At),[wt,Rn]);hn.sorter=Cn(),hn.sorterStates=Rn;const Ut=(bt,Mt)=>{Pn({filters:bt,filterStates:Mt},"filter",!0)},[cn,an,Zt]=dpe({prefixCls:Pe,locale:gt,dropdownPrefixCls:mt,mergedColumns:me,onFilterChange:Ut,getPopupContainer:X||yt,rootClassName:pt(p,ht)}),Xt=YI(nn,an,At);hn.filters=Zt,hn.filterStates=an;const Hn=_.useMemo(()=>{const bt={};return Object.keys(Zt).forEach(Mt=>{Zt[Mt]!==null&&(bt[Mt]=Zt[Mt])}),Object.assign(Object.assign({},kn),{filters:bt})},[kn,Zt]),[br]=ype(Hn),mr=(bt,Mt)=>{Pn({pagination:Object.assign(Object.assign({},hn.pagination),{current:bt,pageSize:Mt})},"paginate")},[pr,Tr]=mpe(Xt.length,mr,$);hn.pagination=$===!1?{}:ppe(pr,$),hn.resetPagination=Tr;const ur=_.useMemo(()=>{if($===!1||!pr.pageSize)return Xt;const{current:bt=1,total:Mt,pageSize:kt=u8}=pr;return Xt.length<Mt?Xt.length>kt?Xt.slice((bt-1)*kt,bt*kt):Xt:Xt.slice((bt-1)*kt,bt*kt)},[!!$,Xt,pr==null?void 0:pr.current,pr==null?void 0:pr.pageSize,pr==null?void 0:pr.total]),[Mr,tr]=Rfe({prefixCls:Pe,data:Xt,pageData:ur,getRowKey:Rt,getRecordByKey:dn,expandType:Yt,childrenColumnName:At,locale:gt,getPopupContainer:X||yt},L),ft=(bt,Mt,kt)=>{let Gt;return typeof V=="function"?Gt=pt(V(bt,Mt,kt)):Gt=pt(V),pt({[`${Pe}-row-selected`]:tr.has(Rt(bt,Mt))},Gt)};Lt.__PARENT_RENDER_ICON__=Lt.expandIcon,Lt.expandIcon=Lt.expandIcon||J||Dfe(gt),Yt==="nest"&&Lt.expandIconColumnIndex===void 0?Lt.expandIconColumnIndex=L?1:0:Lt.expandIconColumnIndex>0&&L&&(Lt.expandIconColumnIndex-=1),typeof Lt.indentSize!="number"&&(Lt.indentSize=typeof ae=="number"?ae:15);const ye=_.useCallback(bt=>br(Mr(cn(yn(bt)))),[yn,cn,Mr]);let Se,ke;if($!==!1&&(pr!=null&&pr.total)){let bt;pr.size?bt=pr.size:bt=at==="small"||at==="middle"?"small":void 0;const Mt=vn=>_.createElement($ue,Object.assign({},pr,{className:pt(`${Pe}-pagination ${Pe}-pagination-${vn}`,pr.className),size:bt})),kt=Be==="rtl"?"left":"right",{position:Gt}=pr;if(Gt!==null&&Array.isArray(Gt)){const vn=Gt.find(zn=>zn.includes("top")),On=Gt.find(zn=>zn.includes("bottom")),bn=Gt.every(zn=>`${zn}`=="none");!vn&&!On&&!bn&&(ke=Mt(kt)),vn&&(Se=Mt(vn.toLowerCase().replace("top",""))),On&&(ke=Mt(On.toLowerCase().replace("bottom","")))}else ke=Mt(kt)}let Ze;typeof ee=="boolean"?Ze={spinning:ee}:typeof ee=="object"&&(Ze=Object.assign({spinning:!0},ee));const Ae=pt(Ct,ht,`${Pe}-wrapper`,$e==null?void 0:$e.className,{[`${Pe}-wrapper-rtl`]:Be==="rtl"},d,p,St),Ge=Object.assign(Object.assign({},$e==null?void 0:$e.style),i),ut=typeof(we==null?void 0:we.emptyText)<"u"?we.emptyText:(ze==null?void 0:ze("Table"))||_.createElement(n6,{componentName:"Table"}),Qe=ve?xpe:_pe,_t={},It=_.useMemo(()=>{const{fontSize:bt,lineHeight:Mt,padding:kt,paddingXS:Gt,paddingSM:vn}=dt,On=Math.floor(bt*Mt);switch(at){case"large":return kt*2+On;case"small":return Gt*2+On;default:return vn*2+On}},[dt,at]);return ve&&(_t.listItemHeight=It),je(_.createElement("div",{ref:Wt,className:Ae,style:Ge},_.createElement(RV,Object.assign({spinning:!1},Ze),Se,_.createElement(Qe,Object.assign({},_t,Ie,{ref:Vt,columns:me,direction:Be,expandable:Lt,prefixCls:Pe,className:pt({[`${Pe}-middle`]:at==="middle",[`${Pe}-small`]:at==="small",[`${Pe}-bordered`]:S,[`${Pe}-empty`]:wt.length===0},Ct,ht,St),data:ur,rowKey:Rt,rowClassName:ft,emptyText:ut,internalHooks:zy,internalRefs:Kt,transformColumns:ye,getContainerWidth:Dt})),ke)))},Bpe=_.forwardRef(Fpe),jpe=(e,t)=>{const n=_.useRef(0);return n.current+=1,_.createElement(Bpe,Object.assign({},e,{ref:t,_renderTimes:n.current}))},Jl=_.forwardRef(jpe);Jl.SELECTION_COLUMN=sd;Jl.EXPAND_COLUMN=ud;Jl.SELECTION_ALL=GI;Jl.SELECTION_INVERT=qI;Jl.SELECTION_NONE=KI;Jl.Column=_fe;Jl.ColumnGroup=xfe;Jl.Summary=BV;var Vpe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const{TimePicker:Hpe,RangePicker:Upe}=Ud,Wpe=_.forwardRef((e,t)=>_.createElement(Upe,Object.assign({},e,{picker:"time",mode:void 0,ref:t}))),Wm=_.forwardRef((e,t)=>{var{addon:n,renderExtraFooter:r,variant:s,bordered:d}=e,p=Vpe(e,["addon","renderExtraFooter","variant","bordered"]);const[i]=$m("timePicker",s,d),x=_.useMemo(()=>{if(r)return r;if(n)return n},[n,r]);return _.createElement(Hpe,Object.assign({},p,{mode:void 0,ref:t,renderExtraFooter:x,variant:i}))}),f8=Py(Wm,"picker");Wm._InternalPanelDoNotUseOrYouWillBeFired=f8;Wm.RangePicker=Wpe;Wm._InternalPanelDoNotUseOrYouWillBeFired=f8;const Gpe=(e,t,n,r)=>{const{titleMarginBottom:s,fontWeightStrong:d}=r;return{marginBottom:s,color:n,fontWeight:d,fontSize:e,lineHeight:t}},qpe=e=>{const t=[1,2,3,4,5],n={};return t.forEach(r=>{n[`
      h${r}&,
      div&-h${r},
      div&-h${r} > textarea,
      h${r}
    `]=Gpe(e[`fontSizeHeading${r}`],e[`lineHeightHeading${r}`],e.colorTextHeading,e)}),n},Kpe=e=>{const{componentCls:t}=e;return{"a&, a":Object.assign(Object.assign({},yP(e)),{userSelect:"text",[`&[disabled], &${t}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:e.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},Xpe=e=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:b1[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:e.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),Zpe=e=>{const{componentCls:t,paddingSM:n}=e,r=n;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:e.calc(e.paddingSM).mul(-1).equal(),marginTop:e.calc(r).mul(-1).equal(),marginBottom:`calc(1em - ${nt(r)})`},[`${t}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:e.calc(e.marginXS).add(2).equal(),insetBlockEnd:e.marginXS,color:e.colorTextDescription,fontWeight:"normal",fontSize:e.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},Ype=e=>({[`${e.componentCls}-copy-success`]:{"\n    &,\n    &:hover,\n    &:focus":{color:e.colorSuccess}},[`${e.componentCls}-copy-icon-only`]:{marginInlineStart:0}}),Jpe=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-ellipsis-single-line":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),Qpe=e=>{const{componentCls:t,titleMarginTop:n}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.colorText,wordBreak:"break-word",lineHeight:e.lineHeight,[`&${t}-secondary`]:{color:e.colorTextDescription},[`&${t}-success`]:{color:e.colorSuccess},[`&${t}-warning`]:{color:e.colorWarning},[`&${t}-danger`]:{color:e.colorError,"a&:active, a&:focus":{color:e.colorErrorActive},"a&:hover":{color:e.colorErrorHover}},[`&${t}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},qpe(e)),{[`
      & + h1${t},
      & + h2${t},
      & + h3${t},
      & + h4${t},
      & + h5${t}
      `]:{marginTop:n},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:n}}}),Xpe(e)),Kpe(e)),{[`
        ${t}-expand,
        ${t}-collapse,
        ${t}-edit,
        ${t}-copy
      `]:Object.assign(Object.assign({},yP(e)),{marginInlineStart:e.marginXXS})}),Zpe(e)),Ype(e)),Jpe()),{"&-rtl":{direction:"rtl"}})}},eme=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"}),p8=Qi("Typography",e=>[Qpe(e)],eme),tme=e=>{const{prefixCls:t,"aria-label":n,className:r,style:s,direction:d,maxLength:p,autoSize:i=!0,value:x,onSave:S,onCancel:T,onEnd:M,component:$,enterIcon:L=_.createElement($de,null)}=e,N=_.useRef(null),V=_.useRef(!1),B=_.useRef(),[j,H]=_.useState(x);_.useEffect(()=>{H(x)},[x]),_.useEffect(()=>{var ge;if(!((ge=N.current)===null||ge===void 0)&&ge.resizableTextArea){const{textArea:ve}=N.current.resizableTextArea;ve.focus();const{length:de}=ve.value;ve.setSelectionRange(de,de)}},[]);const W=ge=>{let{target:ve}=ge;H(ve.value.replace(/[\n\r]/g,""))},X=()=>{V.current=!0},ee=()=>{V.current=!1},J=ge=>{let{keyCode:ve}=ge;V.current||(B.current=ve)},Y=()=>{S(j.trim())},re=ge=>{let{keyCode:ve,ctrlKey:de,altKey:pe,metaKey:fe,shiftKey:me}=ge;B.current!==ve||V.current||de||pe||fe||me||(ve===gn.ENTER?(Y(),M==null||M()):ve===gn.ESC&&T())},se=()=>{Y()},[ae,ce,Ce]=p8(t),we=pt(t,`${t}-edit-content`,{[`${t}-rtl`]:d==="rtl",[`${t}-${$}`]:!!$},r,ce,Ce);return ae(_.createElement("div",{className:we,style:s},_.createElement(oV,{ref:N,maxLength:p,value:j,onChange:W,onKeyDown:J,onKeyUp:re,onCompositionStart:X,onCompositionEnd:ee,onBlur:se,"aria-label":n,rows:1,autoSize:i}),L!==null?ns(L,{className:`${t}-edit-content-confirm`}):null))};var nme=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||n.forEach(function(s){e.addRange(s)}),t&&t.focus()}},rme=nme,AL={"text/plain":"Text","text/html":"Url",default:"Text"},ime="Copy to clipboard: #{key}, Enter";function ome(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function ame(e,t){var n,r,s,d,p,i,x=!1;t||(t={}),n=t.debug||!1;try{s=rme(),d=document.createRange(),p=document.getSelection(),i=document.createElement("span"),i.textContent=e,i.ariaHidden="true",i.style.all="unset",i.style.position="fixed",i.style.top=0,i.style.clip="rect(0, 0, 0, 0)",i.style.whiteSpace="pre",i.style.webkitUserSelect="text",i.style.MozUserSelect="text",i.style.msUserSelect="text",i.style.userSelect="text",i.addEventListener("copy",function(T){if(T.stopPropagation(),t.format)if(T.preventDefault(),typeof T.clipboardData>"u"){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var M=AL[t.format]||AL.default;window.clipboardData.setData(M,e)}else T.clipboardData.clearData(),T.clipboardData.setData(t.format,e);t.onCopy&&(T.preventDefault(),t.onCopy(T.clipboardData))}),document.body.appendChild(i),d.selectNodeContents(i),p.addRange(d);var S=document.execCommand("copy");if(!S)throw new Error("copy command was unsuccessful");x=!0}catch(T){n&&console.error("unable to copy using execCommand: ",T),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),x=!0}catch(M){n&&console.error("unable to copy using clipboardData: ",M),n&&console.error("falling back to prompt"),r=ome("message"in t?t.message:ime),window.prompt(r,e)}}finally{p&&(typeof p.removeRange=="function"?p.removeRange(d):p.removeAllRanges()),i&&document.body.removeChild(i),s()}return x}var sme=ame;const lme=hl(sme);var cme=function(e,t,n,r){function s(d){return d instanceof n?d:new n(function(p){p(d)})}return new(n||(n=Promise))(function(d,p){function i(T){try{S(r.next(T))}catch(M){p(M)}}function x(T){try{S(r.throw(T))}catch(M){p(M)}}function S(T){T.done?d(T.value):s(T.value).then(i,x)}S((r=r.apply(e,t||[])).next())})};const ume=e=>{let{copyConfig:t,children:n}=e;const[r,s]=_.useState(!1),[d,p]=_.useState(!1),i=_.useRef(null),x=()=>{i.current&&clearTimeout(i.current)},S={};t.format&&(S.format=t.format),_.useEffect(()=>x,[]);const T=Zr(M=>cme(void 0,void 0,void 0,function*(){var $;M==null||M.preventDefault(),M==null||M.stopPropagation(),p(!0);try{const L=typeof t.text=="function"?yield t.text():t.text;lme(L||que(n,!0).join("")||"",S),p(!1),s(!0),x(),i.current=setTimeout(()=>{s(!1)},3e3),($=t.onCopy)===null||$===void 0||$.call(t,M)}catch(L){throw p(!1),L}}));return{copied:r,copyLoading:d,onClick:T}};function bE(e,t){return _.useMemo(()=>{const n=!!e;return[n,Object.assign(Object.assign({},t),n&&typeof e=="object"?e:null)]},[e])}const dme=e=>{const t=_.useRef();return _.useEffect(()=>{t.current=e}),t.current},hme=(e,t,n)=>_.useMemo(()=>e===!0?{title:t??n}:_.isValidElement(e)?{title:e}:typeof e=="object"?Object.assign({title:t??n},e):{title:e},[e,t,n]);var fme=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const m8=_.forwardRef((e,t)=>{const{prefixCls:n,component:r="article",className:s,rootClassName:d,setContentRef:p,children:i,direction:x,style:S}=e,T=fme(e,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:M,direction:$,typography:L}=_.useContext(fr),N=x??$,V=p?Ua(t,p):t,B=M("typography",n),[j,H,W]=p8(B),X=pt(B,L==null?void 0:L.className,{[`${B}-rtl`]:N==="rtl"},s,d,H,W),ee=Object.assign(Object.assign({},L==null?void 0:L.style),S);return j(_.createElement(r,Object.assign({className:X,style:ee,ref:V},T),i))});function DL(e){return e===!1?[!1,!1]:Array.isArray(e)?e:[e]}function wE(e,t,n){return e===!0||e===void 0?t:e||n&&t}function pme(e){const t=document.createElement("em");e.appendChild(t);const n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return e.removeChild(t),n.left>r.left||r.right>n.right||n.top>r.top||r.bottom>n.bottom}const bR=e=>["string","number"].includes(typeof e),mme=e=>{let{prefixCls:t,copied:n,locale:r,iconOnly:s,tooltips:d,icon:p,tabIndex:i,onCopy:x,loading:S}=e;const T=DL(d),M=DL(p),{copied:$,copy:L}=r??{},N=n?$:L,V=wE(T[n?1:0],N),B=typeof V=="string"?V:N;return _.createElement($d,{title:V},_.createElement("button",{type:"button",className:pt(`${t}-copy`,{[`${t}-copy-success`]:n,[`${t}-copy-icon-only`]:s}),onClick:x,"aria-label":B,tabIndex:i},n?wE(M[1],_.createElement(s6,null),!0):wE(M[0],S?_.createElement(xy,null):_.createElement(Ide,null),!0)))},pb=_.forwardRef((e,t)=>{let{style:n,children:r}=e;const s=_.useRef(null);return _.useImperativeHandle(t,()=>({isExceed:()=>{const d=s.current;return d.scrollHeight>d.clientHeight},getHeight:()=>s.current.clientHeight})),_.createElement("span",{"aria-hidden":!0,ref:s,style:Object.assign({position:"fixed",display:"block",left:0,top:0,pointerEvents:"none",backgroundColor:"rgba(255, 0, 0, 0.65)"},n)},r)}),gme=e=>e.reduce((t,n)=>t+(bR(n)?String(n).length:1),0);function $L(e,t){let n=0;const r=[];for(let s=0;s<e.length;s+=1){if(n===t)return r;const d=e[s],i=bR(d)?String(d).length:1,x=n+i;if(x>t){const S=t-n;return r.push(String(d).slice(0,S)),r}r.push(d),n=x}return e}const SE=0,CE=1,EE=2,TE=3,kL=4,mb={display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical"};function vme(e){const{enableMeasure:t,width:n,text:r,children:s,rows:d,expanded:p,miscDeps:i,onEllipsis:x}=e,S=_.useMemo(()=>Ha(r),[r]),T=_.useMemo(()=>gme(S),[r]),M=_.useMemo(()=>s(S,!1),[r]),[$,L]=_.useState(null),N=_.useRef(null),V=_.useRef(null),B=_.useRef(null),j=_.useRef(null),H=_.useRef(null),[W,X]=_.useState(!1),[ee,J]=_.useState(SE),[Y,re]=_.useState(0),[se,ae]=_.useState(null);Xr(()=>{J(t&&n&&T?CE:SE)},[n,r,d,t,S]),Xr(()=>{var ge,ve,de,pe;if(ee===CE){J(EE);const fe=V.current&&getComputedStyle(V.current).whiteSpace;ae(fe)}else if(ee===EE){const fe=!!(!((ge=B.current)===null||ge===void 0)&&ge.isExceed());J(fe?TE:kL),L(fe?[0,T]:null),X(fe);const me=((ve=B.current)===null||ve===void 0?void 0:ve.getHeight())||0,Ie=d===1?0:((de=j.current)===null||de===void 0?void 0:de.getHeight())||0,Me=((pe=H.current)===null||pe===void 0?void 0:pe.getHeight())||0,Be=Math.max(me,Ie+Me);re(Be+1),x(fe)}},[ee]);const ce=$?Math.ceil(($[0]+$[1])/2):0;Xr(()=>{var ge;const[ve,de]=$||[0,0];if(ve!==de){const fe=(((ge=N.current)===null||ge===void 0?void 0:ge.getHeight())||0)>Y;let me=ce;de-ve===1&&(me=fe?ve:de),L(fe?[ve,me]:[me,de])}},[$,ce]);const Ce=_.useMemo(()=>{if(!t)return s(S,!1);if(ee!==TE||!$||$[0]!==$[1]){const ge=s(S,!1);return[kL,SE].includes(ee)?ge:_.createElement("span",{style:Object.assign(Object.assign({},mb),{WebkitLineClamp:d})},ge)}return s(p?S:$L(S,$[0]),W)},[p,ee,$,S].concat(un(i))),we={width:n,margin:0,padding:0,whiteSpace:se==="nowrap"?"normal":"inherit"};return _.createElement(_.Fragment,null,Ce,ee===EE&&_.createElement(_.Fragment,null,_.createElement(pb,{style:Object.assign(Object.assign(Object.assign({},we),mb),{WebkitLineClamp:d}),ref:B},M),_.createElement(pb,{style:Object.assign(Object.assign(Object.assign({},we),mb),{WebkitLineClamp:d-1}),ref:j},M),_.createElement(pb,{style:Object.assign(Object.assign(Object.assign({},we),mb),{WebkitLineClamp:1}),ref:H},s([],!0))),ee===TE&&$&&$[0]!==$[1]&&_.createElement(pb,{style:Object.assign(Object.assign({},we),{top:400}),ref:N},s($L(S,ce),!0)),ee===CE&&_.createElement("span",{style:{whiteSpace:"inherit"},ref:V}))}const yme=e=>{let{enableEllipsis:t,isEllipsis:n,children:r,tooltipProps:s}=e;return!(s!=null&&s.title)||!t?r:_.createElement($d,Object.assign({open:n?void 0:!1},s),r)};var _me=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};function xme(e,t){let{mark:n,code:r,underline:s,delete:d,strong:p,keyboard:i,italic:x}=e,S=t;function T(M,$){$&&(S=_.createElement(M,{},S))}return T("strong",p),T("u",s),T("del",d),T("code",r),T("mark",n),T("kbd",i),T("i",x),S}const bme="...",sS=_.forwardRef((e,t)=>{var n;const{prefixCls:r,className:s,style:d,type:p,disabled:i,children:x,ellipsis:S,editable:T,copyable:M,component:$,title:L}=e,N=_me(e,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:V,direction:B}=_.useContext(fr),[j]=Zl("Text"),H=_.useRef(null),W=_.useRef(null),X=V("typography",r),ee=vo(N,["mark","code","delete","underline","strong","keyboard","italic"]),[J,Y]=bE(T),[re,se]=Bi(!1,{value:Y.editing}),{triggerType:ae=["icon"]}=Y,ce=an=>{var Zt;an&&((Zt=Y.onStart)===null||Zt===void 0||Zt.call(Y)),se(an)},Ce=dme(re);Xr(()=>{var an;!re&&Ce&&((an=W.current)===null||an===void 0||an.focus())},[re]);const we=an=>{an==null||an.preventDefault(),ce(!0)},ge=an=>{var Zt;(Zt=Y.onChange)===null||Zt===void 0||Zt.call(Y,an),ce(!1)},ve=()=>{var an;(an=Y.onCancel)===null||an===void 0||an.call(Y),ce(!1)},[de,pe]=bE(M),{copied:fe,copyLoading:me,onClick:Ie}=ume({copyConfig:pe,children:x}),[Me,Be]=_.useState(!1),[$e,ze]=_.useState(!1),[Je,yt]=_.useState(!1),[at,gt]=_.useState(!1),[wt,Pe]=_.useState(!0),[mt,dt]=bE(S,{expandable:!1,symbol:an=>an?j==null?void 0:j.collapse:j==null?void 0:j.expand}),[ht,je]=Bi(dt.defaultExpanded||!1,{value:dt.expanded}),St=mt&&(!ht||dt.expandable==="collapsible"),{rows:Ct=1}=dt,Lt=_.useMemo(()=>St&&(dt.suffix!==void 0||dt.onEllipsis||dt.expandable||J||de),[St,dt,J,de]);Xr(()=>{mt&&!Lt&&(Be(TI("webkitLineClamp")),ze(TI("textOverflow")))},[Lt,mt]);const[At,Yt]=_.useState(St),Kt=_.useMemo(()=>Lt?!1:Ct===1?$e:Me,[Lt,$e,Me]);Xr(()=>{Yt(Kt&&St)},[Kt,St]);const Dt=St&&(At?at:Je),Wt=St&&Ct===1&&At,Vt=St&&Ct>1&&At,Rt=(an,Zt)=>{var Xt;je(Zt.expanded),(Xt=dt.onExpand)===null||Xt===void 0||Xt.call(dt,an,Zt)},[dn,hn]=_.useState(0),Pn=an=>{let{offsetWidth:Zt}=an;hn(Zt)},Dn=an=>{var Zt;yt(an),Je!==an&&((Zt=dt.onEllipsis)===null||Zt===void 0||Zt.call(dt,an))};_.useEffect(()=>{const an=H.current;if(mt&&At&&an){const Zt=pme(an);at!==Zt&&gt(Zt)}},[mt,At,x,Vt,wt,dn]),_.useEffect(()=>{const an=H.current;if(typeof IntersectionObserver>"u"||!an||!At||!St)return;const Zt=new IntersectionObserver(()=>{Pe(!!an.offsetParent)});return Zt.observe(an),()=>{Zt.disconnect()}},[At,St]);const yn=hme(dt.tooltip,Y.text,x),Rn=_.useMemo(()=>{if(!(!mt||At))return[Y.text,x,L,yn.title].find(bR)},[mt,At,L,yn.title,Dt]);if(re)return _.createElement(tme,{value:(n=Y.text)!==null&&n!==void 0?n:typeof x=="string"?x:"",onSave:ge,onCancel:ve,onEnd:Y.onEnd,prefixCls:X,className:s,style:d,direction:B,component:$,maxLength:Y.maxLength,autoSize:Y.autoSize,enterIcon:Y.enterIcon});const kn=()=>{const{expandable:an,symbol:Zt}=dt;return an?_.createElement("button",{type:"button",key:"expand",className:`${X}-${ht?"collapse":"expand"}`,onClick:Xt=>Rt(Xt,{expanded:!ht}),"aria-label":ht?j.collapse:j==null?void 0:j.expand},typeof Zt=="function"?Zt(ht):Zt):null},Cn=()=>{if(!J)return;const{icon:an,tooltip:Zt,tabIndex:Xt}=Y,Hn=Ha(Zt)[0]||(j==null?void 0:j.edit),br=typeof Hn=="string"?Hn:"";return ae.includes("icon")?_.createElement($d,{key:"edit",title:Zt===!1?"":Hn},_.createElement("button",{type:"button",ref:W,className:`${X}-edit`,onClick:we,"aria-label":br,tabIndex:Xt},an||_.createElement(uR,{role:"button"}))):null},nn=()=>de?_.createElement(mme,Object.assign({key:"copy"},pe,{prefixCls:X,copied:fe,locale:j,onCopy:Ie,loading:me,iconOnly:x==null})):null,Ut=an=>[an&&kn(),Cn(),nn()],cn=an=>[an&&!ht&&_.createElement("span",{"aria-hidden":!0,key:"ellipsis"},bme),dt.suffix,Ut(an)];return _.createElement(ga,{onResize:Pn,disabled:!St},an=>_.createElement(yme,{tooltipProps:yn,enableEllipsis:St,isEllipsis:Dt},_.createElement(m8,Object.assign({className:pt({[`${X}-${p}`]:p,[`${X}-disabled`]:i,[`${X}-ellipsis`]:mt,[`${X}-ellipsis-single-line`]:Wt,[`${X}-ellipsis-multiple-line`]:Vt},s),prefixCls:r,style:Object.assign(Object.assign({},d),{WebkitLineClamp:Vt?Ct:void 0}),component:$,ref:Ua(an,H,t),direction:B,onClick:ae.includes("text")?we:void 0,"aria-label":Rn==null?void 0:Rn.toString(),title:L},ee),_.createElement(vme,{enableMeasure:St&&!At,text:x,rows:Ct,width:dn,onEllipsis:Dn,expanded:ht,miscDeps:[fe,ht,me,J,de,j]},(Zt,Xt)=>xme(e,_.createElement(_.Fragment,null,Zt.length>0&&Xt&&!ht&&Rn?_.createElement("span",{key:"show-content","aria-hidden":!0},Zt):Zt,cn(Xt)))))))});var wme=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Sme=_.forwardRef((e,t)=>{var{ellipsis:n,rel:r}=e,s=wme(e,["ellipsis","rel"]);const d=Object.assign(Object.assign({},s),{rel:r===void 0&&s.target==="_blank"?"noopener noreferrer":r});return delete d.navigate,_.createElement(sS,Object.assign({},d,{ref:t,ellipsis:!!n,component:"a"}))}),Cme=_.forwardRef((e,t)=>_.createElement(sS,Object.assign({ref:t},e,{component:"div"})));var Eme=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Tme=(e,t)=>{var{ellipsis:n}=e,r=Eme(e,["ellipsis"]);const s=_.useMemo(()=>n&&typeof n=="object"?vo(n,["expandable","rows"]):n,[n]);return _.createElement(sS,Object.assign({ref:t},r,{ellipsis:s,component:"span"}))},Ime=_.forwardRef(Tme);var Mme=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Pme=[1,2,3,4,5],Rme=_.forwardRef((e,t)=>{const{level:n=1}=e,r=Mme(e,["level"]),s=Pme.includes(n)?`h${n}`:"h1";return _.createElement(sS,Object.assign({ref:t},r,{component:s}))}),Gl=m8;Gl.Text=Ime;Gl.Link=Sme;Gl.Title=Rme;Gl.Paragraph=Cme;const Ome="_SafeplaceHeader_1heyr_1",Ame="_logo_1heyr_25",hc={SafeplaceHeader:Ome,logo:Ame,"logo-link":"_logo-link_1heyr_41","logo-img":"_logo-img_1heyr_57","user-section":"_user-section_1heyr_65","ant-dropdown-link":"_ant-dropdown-link_1heyr_77","menu-button":"_menu-button_1heyr_91"},Dme="/assets/hermanos-DEgHvprl.png",g8="/assets/icon-profile-CvnGdK37.png",$me="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23000000'%3e%3cpath%20d='M418-340q24%2024%2062%2023.5t56-27.5l224-336-336%20224q-27%2018-28.5%2055t22.5%2061Zm62-460q59%200%20113.5%2016.5T696-734l-76%2048q-33-17-68.5-25.5T480-720q-133%200-226.5%2093.5T160-400q0%2042%2011.5%2083t32.5%2077h552q23-38%2033.5-79t10.5-85q0-36-8.5-70T766-540l48-76q30%2047%2047.5%20100T880-406q1%2057-13%20109t-41%2099q-11%2018-30%2028t-40%2010H204q-21%200-40-10t-30-28q-26-45-40-95.5T80-400q0-83%2031.5-155.5t86-127Q252-737%20325-768.5T480-800Zm7%20313Z'/%3e%3c/svg%3e",kme="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23000000'%3e%3cpath%20d='M480-480q-66%200-113-47t-47-113q0-66%2047-113t113-47q66%200%20113%2047t47%20113q0%2066-47%20113t-113%2047ZM160-160v-112q0-34%2017.5-62.5T224-378q62-31%20126-46.5T480-440q66%200%20130%2015.5T736-378q29%2015%2046.5%2043.5T800-272v112H160Zm80-80h480v-32q0-11-5.5-20T700-306q-54-27-109-40.5T480-360q-56%200-111%2013.5T260-306q-9%205-14.5%2014t-5.5%2020v32Zm240-320q33%200%2056.5-23.5T560-640q0-33-23.5-56.5T480-720q-33%200-56.5%2023.5T400-640q0%2033%2023.5%2056.5T480-560Zm0-80Zm0%20400Z'/%3e%3c/svg%3e",zme="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23000000'%3e%3cpath%20d='M200-120q-33%200-56.5-23.5T120-200v-560q0-33%2023.5-56.5T200-840h280v80H200v560h280v80H200Zm440-160-55-58%20102-102H360v-80h327L585-622l55-58%20200%20200-200%20200Z'/%3e%3c/svg%3e",Lme="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23000000'%3e%3cpath%20d='M480-80q-83%200-156-31.5T197-197q-54-54-85.5-127T80-480q0-83%2031.5-156T197-763q54-54%20127-85.5T480-880q146%200%20255.5%2091.5T872-559h-82q-19-73-68.5-130.5T600-776v16q0%2033-23.5%2056.5T520-680h-80v80q0%2017-11.5%2028.5T400-560h-80v80h80v120h-40L168-552q-3%2018-5.5%2036t-2.5%2036q0%20131%2092%20225t228%2095v80Zm364-20L716-228q-21%2012-45%2020t-51%208q-75%200-127.5-52.5T440-380q0-75%2052.5-127.5T620-560q75%200%20127.5%2052.5T800-380q0%2027-8%2051t-20%2045l128%20128-56%2056ZM620-280q42%200%2071-29t29-71q0-42-29-71t-71-29q-42%200-71%2029t-29%2071q0%2042%2029%2071t71%2029Z'/%3e%3c/svg%3e",{Header:Nme}=Bm,{Text:zL}=Gl,v8=()=>{const[e,t]=_.useState(!1),n=ql(),{logout:r,user:s}=_.useContext(_c),d=s==null?void 0:s.role,p=()=>t(!0),i=()=>t(!1),x=()=>d==="company"?"/admin-dashboard":d==="user"?"/user-dashboard":d==="admin"?"/admin":"/",S=()=>{try{r(),n("/"),Vi.success("Sesión cerrada exitosamente")}catch($){console.error("Error al cerrar sesión:",$),Vi.error("Hubo un problema al cerrar la sesión")}},T=[{key:"1",icon:he.jsx("img",{src:$me,alt:"Dashboard",className:hc.icon}),label:he.jsx(Ba,{to:x(),children:"Dashboard"})},{key:"2",icon:he.jsx("img",{src:kme,alt:"Cuenta",className:hc.icon}),label:he.jsx(Ba,{to:"/profile",children:"Cuenta"})},{key:"3",icon:he.jsx("img",{src:Lme,alt:"Blog",className:hc.icon}),label:he.jsx(Ba,{to:"/blog",children:"Blog"})},{key:"4",icon:he.jsx("img",{src:zme,alt:"Cerrar Sesion",className:hc.icon}),label:he.jsx("a",{onClick:S,children:"Cerrar Sesión"})}],M={items:T};return he.jsxs(Nme,{className:hc.SafeplaceHeader,children:[he.jsx("div",{className:hc.logo,style:{display:"flex",alignItems:"center"},children:he.jsxs(Ba,{to:x(),className:"logo-link",children:[he.jsx(zL,{strong:!0,style:{color:"#ffff",fontSize:"32px",padding:"10px",fontFamily:"Ubuntu",fontWeight:"300",userSelect:"none"},children:"SafePlace"}),he.jsx("img",{src:Dme,alt:"SafePlace Icon",style:{marginLeft:"8px",width:"40px",height:"40px"},className:hc["logo-img"]})]})}),he.jsx(Di,{className:hc["menu-button"],type:"text",icon:he.jsx(rhe,{}),onClick:p,style:{pointerEvents:"auto"}}),he.jsx(yV,{title:"Menú",placement:"right",closable:!0,onClose:i,open:e,width:200,children:he.jsx(uf,{mode:"vertical",onClick:i,items:T})}),he.jsx("div",{className:hc["user-section"],style:{pointerEvents:"auto"},children:he.jsx(tS,{menu:M,trigger:["click"],children:he.jsxs("div",{className:hc["ant-dropdown-link"],onClick:$=>$.preventDefault(),children:[he.jsx(w6,{src:g8,size:"large"}),he.jsx(zL,{style:{marginLeft:"8px",marginRight:"10px",color:"white"},children:(s==null?void 0:s.companyName)||(s==null?void 0:s.firstname)||"not defined"}),he.jsx(NP,{})]})})})]})},y8=()=>he.jsx(Fm,{style:{width:"100%",height:"40px",display:"flex",alignItems:"center"},children:he.jsx("h2",{children:"Lista denuncias"})});function _8(e,t){return function(){return e.apply(t,arguments)}}const{toString:Fme}=Object.prototype,{getPrototypeOf:wR}=Object,lS=(e=>t=>{const n=Fme.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ql=e=>(e=e.toLowerCase(),t=>lS(t)===e),cS=e=>t=>typeof t===e,{isArray:Gm}=Array,fy=cS("undefined");function Bme(e){return e!==null&&!fy(e)&&e.constructor!==null&&!fy(e.constructor)&&Fs(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const x8=Ql("ArrayBuffer");function jme(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&x8(e.buffer),t}const Vme=cS("string"),Fs=cS("function"),b8=cS("number"),uS=e=>e!==null&&typeof e=="object",Hme=e=>e===!0||e===!1,Vb=e=>{if(lS(e)!=="object")return!1;const t=wR(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Ume=Ql("Date"),Wme=Ql("File"),Gme=Ql("Blob"),qme=Ql("FileList"),Kme=e=>uS(e)&&Fs(e.pipe),Xme=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Fs(e.append)&&((t=lS(e))==="formdata"||t==="object"&&Fs(e.toString)&&e.toString()==="[object FormData]"))},Zme=Ql("URLSearchParams"),[Yme,Jme,Qme,ege]=["ReadableStream","Request","Response","Headers"].map(Ql),tge=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ly(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),Gm(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{const d=n?Object.getOwnPropertyNames(e):Object.keys(e),p=d.length;let i;for(r=0;r<p;r++)i=d[r],t.call(null,e[i],i,e)}}function w8(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const Hh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,S8=e=>!fy(e)&&e!==Hh;function eM(){const{caseless:e}=S8(this)&&this||{},t={},n=(r,s)=>{const d=e&&w8(t,s)||s;Vb(t[d])&&Vb(r)?t[d]=eM(t[d],r):Vb(r)?t[d]=eM({},r):Gm(r)?t[d]=r.slice():t[d]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Ly(arguments[r],n);return t}const nge=(e,t,n,{allOwnKeys:r}={})=>(Ly(t,(s,d)=>{n&&Fs(s)?e[d]=_8(s,n):e[d]=s},{allOwnKeys:r}),e),rge=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),ige=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},oge=(e,t,n,r)=>{let s,d,p;const i={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),d=s.length;d-- >0;)p=s[d],(!r||r(p,e,t))&&!i[p]&&(t[p]=e[p],i[p]=!0);e=n!==!1&&wR(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},age=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},sge=e=>{if(!e)return null;if(Gm(e))return e;let t=e.length;if(!b8(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},lge=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&wR(Uint8Array)),cge=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=r.next())&&!s.done;){const d=s.value;t.call(e,d[0],d[1])}},uge=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},dge=Ql("HTMLFormElement"),hge=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),LL=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),fge=Ql("RegExp"),C8=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Ly(n,(s,d)=>{let p;(p=t(s,d,e))!==!1&&(r[d]=p||s)}),Object.defineProperties(e,r)},pge=e=>{C8(e,(t,n)=>{if(Fs(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Fs(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},mge=(e,t)=>{const n={},r=s=>{s.forEach(d=>{n[d]=!0})};return Gm(e)?r(e):r(String(e).split(t)),n},gge=()=>{},vge=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,IE="abcdefghijklmnopqrstuvwxyz",NL="0123456789",E8={DIGIT:NL,ALPHA:IE,ALPHA_DIGIT:IE+IE.toUpperCase()+NL},yge=(e=16,t=E8.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function _ge(e){return!!(e&&Fs(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const xge=e=>{const t=new Array(10),n=(r,s)=>{if(uS(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[s]=r;const d=Gm(r)?[]:{};return Ly(r,(p,i)=>{const x=n(p,s+1);!fy(x)&&(d[i]=x)}),t[s]=void 0,d}}return r};return n(e,0)},bge=Ql("AsyncFunction"),wge=e=>e&&(uS(e)||Fs(e))&&Fs(e.then)&&Fs(e.catch),T8=((e,t)=>e?setImmediate:t?((n,r)=>(Hh.addEventListener("message",({source:s,data:d})=>{s===Hh&&d===n&&r.length&&r.shift()()},!1),s=>{r.push(s),Hh.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Fs(Hh.postMessage)),Sge=typeof queueMicrotask<"u"?queueMicrotask.bind(Hh):typeof process<"u"&&process.nextTick||T8,xn={isArray:Gm,isArrayBuffer:x8,isBuffer:Bme,isFormData:Xme,isArrayBufferView:jme,isString:Vme,isNumber:b8,isBoolean:Hme,isObject:uS,isPlainObject:Vb,isReadableStream:Yme,isRequest:Jme,isResponse:Qme,isHeaders:ege,isUndefined:fy,isDate:Ume,isFile:Wme,isBlob:Gme,isRegExp:fge,isFunction:Fs,isStream:Kme,isURLSearchParams:Zme,isTypedArray:lge,isFileList:qme,forEach:Ly,merge:eM,extend:nge,trim:tge,stripBOM:rge,inherits:ige,toFlatObject:oge,kindOf:lS,kindOfTest:Ql,endsWith:age,toArray:sge,forEachEntry:cge,matchAll:uge,isHTMLForm:dge,hasOwnProperty:LL,hasOwnProp:LL,reduceDescriptors:C8,freezeMethods:pge,toObjectSet:mge,toCamelCase:hge,noop:gge,toFiniteNumber:vge,findKey:w8,global:Hh,isContextDefined:S8,ALPHABET:E8,generateString:yge,isSpecCompliantForm:_ge,toJSONObject:xge,isAsyncFn:bge,isThenable:wge,setImmediate:T8,asap:Sge};function ci(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}xn.inherits(ci,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:xn.toJSONObject(this.config),code:this.code,status:this.status}}});const I8=ci.prototype,M8={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{M8[e]={value:e}});Object.defineProperties(ci,M8);Object.defineProperty(I8,"isAxiosError",{value:!0});ci.from=(e,t,n,r,s,d)=>{const p=Object.create(I8);return xn.toFlatObject(e,p,function(x){return x!==Error.prototype},i=>i!=="isAxiosError"),ci.call(p,e.message,t,n,r,s),p.cause=e,p.name=e.name,d&&Object.assign(p,d),p};const Cge=null;function tM(e){return xn.isPlainObject(e)||xn.isArray(e)}function P8(e){return xn.endsWith(e,"[]")?e.slice(0,-2):e}function FL(e,t,n){return e?e.concat(t).map(function(s,d){return s=P8(s),!n&&d?"["+s+"]":s}).join(n?".":""):t}function Ege(e){return xn.isArray(e)&&!e.some(tM)}const Tge=xn.toFlatObject(xn,{},null,function(t){return/^is[A-Z]/.test(t)});function dS(e,t,n){if(!xn.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=xn.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(V,B){return!xn.isUndefined(B[V])});const r=n.metaTokens,s=n.visitor||T,d=n.dots,p=n.indexes,x=(n.Blob||typeof Blob<"u"&&Blob)&&xn.isSpecCompliantForm(t);if(!xn.isFunction(s))throw new TypeError("visitor must be a function");function S(N){if(N===null)return"";if(xn.isDate(N))return N.toISOString();if(!x&&xn.isBlob(N))throw new ci("Blob is not supported. Use a Buffer instead.");return xn.isArrayBuffer(N)||xn.isTypedArray(N)?x&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function T(N,V,B){let j=N;if(N&&!B&&typeof N=="object"){if(xn.endsWith(V,"{}"))V=r?V:V.slice(0,-2),N=JSON.stringify(N);else if(xn.isArray(N)&&Ege(N)||(xn.isFileList(N)||xn.endsWith(V,"[]"))&&(j=xn.toArray(N)))return V=P8(V),j.forEach(function(W,X){!(xn.isUndefined(W)||W===null)&&t.append(p===!0?FL([V],X,d):p===null?V:V+"[]",S(W))}),!1}return tM(N)?!0:(t.append(FL(B,V,d),S(N)),!1)}const M=[],$=Object.assign(Tge,{defaultVisitor:T,convertValue:S,isVisitable:tM});function L(N,V){if(!xn.isUndefined(N)){if(M.indexOf(N)!==-1)throw Error("Circular reference detected in "+V.join("."));M.push(N),xn.forEach(N,function(j,H){(!(xn.isUndefined(j)||j===null)&&s.call(t,j,xn.isString(H)?H.trim():H,V,$))===!0&&L(j,V?V.concat(H):[H])}),M.pop()}}if(!xn.isObject(e))throw new TypeError("data must be an object");return L(e),t}function BL(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function SR(e,t){this._pairs=[],e&&dS(e,this,t)}const R8=SR.prototype;R8.append=function(t,n){this._pairs.push([t,n])};R8.toString=function(t){const n=t?function(r){return t.call(this,r,BL)}:BL;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Ige(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function O8(e,t,n){if(!t)return e;const r=n&&n.encode||Ige,s=n&&n.serialize;let d;if(s?d=s(t,n):d=xn.isURLSearchParams(t)?t.toString():new SR(t,n).toString(r),d){const p=e.indexOf("#");p!==-1&&(e=e.slice(0,p)),e+=(e.indexOf("?")===-1?"?":"&")+d}return e}class jL{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){xn.forEach(this.handlers,function(r){r!==null&&t(r)})}}const A8={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Mge=typeof URLSearchParams<"u"?URLSearchParams:SR,Pge=typeof FormData<"u"?FormData:null,Rge=typeof Blob<"u"?Blob:null,Oge={isBrowser:!0,classes:{URLSearchParams:Mge,FormData:Pge,Blob:Rge},protocols:["http","https","file","blob","url","data"]},CR=typeof window<"u"&&typeof document<"u",nM=typeof navigator=="object"&&navigator||void 0,Age=CR&&(!nM||["ReactNative","NativeScript","NS"].indexOf(nM.product)<0),Dge=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",$ge=CR&&window.location.href||"http://localhost",kge=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:CR,hasStandardBrowserEnv:Age,hasStandardBrowserWebWorkerEnv:Dge,navigator:nM,origin:$ge},Symbol.toStringTag,{value:"Module"})),_s={...kge,...Oge};function zge(e,t){return dS(e,new _s.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,d){return _s.isNode&&xn.isBuffer(n)?(this.append(r,n.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)}},t))}function Lge(e){return xn.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Nge(e){const t={},n=Object.keys(e);let r;const s=n.length;let d;for(r=0;r<s;r++)d=n[r],t[d]=e[d];return t}function D8(e){function t(n,r,s,d){let p=n[d++];if(p==="__proto__")return!0;const i=Number.isFinite(+p),x=d>=n.length;return p=!p&&xn.isArray(s)?s.length:p,x?(xn.hasOwnProp(s,p)?s[p]=[s[p],r]:s[p]=r,!i):((!s[p]||!xn.isObject(s[p]))&&(s[p]=[]),t(n,r,s[p],d)&&xn.isArray(s[p])&&(s[p]=Nge(s[p])),!i)}if(xn.isFormData(e)&&xn.isFunction(e.entries)){const n={};return xn.forEachEntry(e,(r,s)=>{t(Lge(r),s,n,0)}),n}return null}function Fge(e,t,n){if(xn.isString(e))try{return(t||JSON.parse)(e),xn.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Ny={transitional:A8,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,d=xn.isObject(t);if(d&&xn.isHTMLForm(t)&&(t=new FormData(t)),xn.isFormData(t))return s?JSON.stringify(D8(t)):t;if(xn.isArrayBuffer(t)||xn.isBuffer(t)||xn.isStream(t)||xn.isFile(t)||xn.isBlob(t)||xn.isReadableStream(t))return t;if(xn.isArrayBufferView(t))return t.buffer;if(xn.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(d){if(r.indexOf("application/x-www-form-urlencoded")>-1)return zge(t,this.formSerializer).toString();if((i=xn.isFileList(t))||r.indexOf("multipart/form-data")>-1){const x=this.env&&this.env.FormData;return dS(i?{"files[]":t}:t,x&&new x,this.formSerializer)}}return d||s?(n.setContentType("application/json",!1),Fge(t)):t}],transformResponse:[function(t){const n=this.transitional||Ny.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(xn.isResponse(t)||xn.isReadableStream(t))return t;if(t&&xn.isString(t)&&(r&&!this.responseType||s)){const p=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(i){if(p)throw i.name==="SyntaxError"?ci.from(i,ci.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_s.classes.FormData,Blob:_s.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};xn.forEach(["delete","get","head","post","put","patch"],e=>{Ny.headers[e]={}});const Bge=xn.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),jge=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(p){s=p.indexOf(":"),n=p.substring(0,s).trim().toLowerCase(),r=p.substring(s+1).trim(),!(!n||t[n]&&Bge[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},VL=Symbol("internals");function t0(e){return e&&String(e).trim().toLowerCase()}function Hb(e){return e===!1||e==null?e:xn.isArray(e)?e.map(Hb):String(e)}function Vge(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const Hge=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function ME(e,t,n,r,s){if(xn.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!xn.isString(t)){if(xn.isString(r))return t.indexOf(r)!==-1;if(xn.isRegExp(r))return r.test(t)}}function Uge(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function Wge(e,t){const n=xn.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,d,p){return this[r].call(this,t,s,d,p)},configurable:!0})})}let xs=class{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function d(i,x,S){const T=t0(x);if(!T)throw new Error("header name must be a non-empty string");const M=xn.findKey(s,T);(!M||s[M]===void 0||S===!0||S===void 0&&s[M]!==!1)&&(s[M||x]=Hb(i))}const p=(i,x)=>xn.forEach(i,(S,T)=>d(S,T,x));if(xn.isPlainObject(t)||t instanceof this.constructor)p(t,n);else if(xn.isString(t)&&(t=t.trim())&&!Hge(t))p(jge(t),n);else if(xn.isHeaders(t))for(const[i,x]of t.entries())d(x,i,r);else t!=null&&d(n,t,r);return this}get(t,n){if(t=t0(t),t){const r=xn.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return Vge(s);if(xn.isFunction(n))return n.call(this,s,r);if(xn.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=t0(t),t){const r=xn.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||ME(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function d(p){if(p=t0(p),p){const i=xn.findKey(r,p);i&&(!n||ME(r,r[i],i,n))&&(delete r[i],s=!0)}}return xn.isArray(t)?t.forEach(d):d(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const d=n[r];(!t||ME(this,this[d],d,t,!0))&&(delete this[d],s=!0)}return s}normalize(t){const n=this,r={};return xn.forEach(this,(s,d)=>{const p=xn.findKey(r,d);if(p){n[p]=Hb(s),delete n[d];return}const i=t?Uge(d):String(d).trim();i!==d&&delete n[d],n[i]=Hb(s),r[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return xn.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&xn.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[VL]=this[VL]={accessors:{}}).accessors,s=this.prototype;function d(p){const i=t0(p);r[i]||(Wge(s,p),r[i]=!0)}return xn.isArray(t)?t.forEach(d):d(t),this}};xs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);xn.reduceDescriptors(xs.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});xn.freezeMethods(xs);function PE(e,t){const n=this||Ny,r=t||n,s=xs.from(r.headers);let d=r.data;return xn.forEach(e,function(i){d=i.call(n,d,s.normalize(),t?t.status:void 0)}),s.normalize(),d}function $8(e){return!!(e&&e.__CANCEL__)}function qm(e,t,n){ci.call(this,e??"canceled",ci.ERR_CANCELED,t,n),this.name="CanceledError"}xn.inherits(qm,ci,{__CANCEL__:!0});function k8(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new ci("Request failed with status code "+n.status,[ci.ERR_BAD_REQUEST,ci.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Gge(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function qge(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,d=0,p;return t=t!==void 0?t:1e3,function(x){const S=Date.now(),T=r[d];p||(p=S),n[s]=x,r[s]=S;let M=d,$=0;for(;M!==s;)$+=n[M++],M=M%e;if(s=(s+1)%e,s===d&&(d=(d+1)%e),S-p<t)return;const L=T&&S-T;return L?Math.round($*1e3/L):void 0}}function Kge(e,t){let n=0,r=1e3/t,s,d;const p=(S,T=Date.now())=>{n=T,s=null,d&&(clearTimeout(d),d=null),e.apply(null,S)};return[(...S)=>{const T=Date.now(),M=T-n;M>=r?p(S,T):(s=S,d||(d=setTimeout(()=>{d=null,p(s)},r-M)))},()=>s&&p(s)]}const N1=(e,t,n=3)=>{let r=0;const s=qge(50,250);return Kge(d=>{const p=d.loaded,i=d.lengthComputable?d.total:void 0,x=p-r,S=s(x),T=p<=i;r=p;const M={loaded:p,total:i,progress:i?p/i:void 0,bytes:x,rate:S||void 0,estimated:S&&i&&T?(i-p)/S:void 0,event:d,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(M)},n)},HL=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},UL=e=>(...t)=>xn.asap(()=>e(...t)),Xge=_s.hasStandardBrowserEnv?function(){const t=_s.navigator&&/(msie|trident)/i.test(_s.navigator.userAgent),n=document.createElement("a");let r;function s(d){let p=d;return t&&(n.setAttribute("href",p),p=n.href),n.setAttribute("href",p),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(p){const i=xn.isString(p)?s(p):p;return i.protocol===r.protocol&&i.host===r.host}}():function(){return function(){return!0}}(),Zge=_s.hasStandardBrowserEnv?{write(e,t,n,r,s,d){const p=[e+"="+encodeURIComponent(t)];xn.isNumber(n)&&p.push("expires="+new Date(n).toGMTString()),xn.isString(r)&&p.push("path="+r),xn.isString(s)&&p.push("domain="+s),d===!0&&p.push("secure"),document.cookie=p.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Yge(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Jge(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function z8(e,t){return e&&!Yge(t)?Jge(e,t):t}const WL=e=>e instanceof xs?{...e}:e;function tf(e,t){t=t||{};const n={};function r(S,T,M){return xn.isPlainObject(S)&&xn.isPlainObject(T)?xn.merge.call({caseless:M},S,T):xn.isPlainObject(T)?xn.merge({},T):xn.isArray(T)?T.slice():T}function s(S,T,M){if(xn.isUndefined(T)){if(!xn.isUndefined(S))return r(void 0,S,M)}else return r(S,T,M)}function d(S,T){if(!xn.isUndefined(T))return r(void 0,T)}function p(S,T){if(xn.isUndefined(T)){if(!xn.isUndefined(S))return r(void 0,S)}else return r(void 0,T)}function i(S,T,M){if(M in t)return r(S,T);if(M in e)return r(void 0,S)}const x={url:d,method:d,data:d,baseURL:p,transformRequest:p,transformResponse:p,paramsSerializer:p,timeout:p,timeoutMessage:p,withCredentials:p,withXSRFToken:p,adapter:p,responseType:p,xsrfCookieName:p,xsrfHeaderName:p,onUploadProgress:p,onDownloadProgress:p,decompress:p,maxContentLength:p,maxBodyLength:p,beforeRedirect:p,transport:p,httpAgent:p,httpsAgent:p,cancelToken:p,socketPath:p,responseEncoding:p,validateStatus:i,headers:(S,T)=>s(WL(S),WL(T),!0)};return xn.forEach(Object.keys(Object.assign({},e,t)),function(T){const M=x[T]||s,$=M(e[T],t[T],T);xn.isUndefined($)&&M!==i||(n[T]=$)}),n}const L8=e=>{const t=tf({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:d,headers:p,auth:i}=t;t.headers=p=xs.from(p),t.url=O8(z8(t.baseURL,t.url),e.params,e.paramsSerializer),i&&p.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):"")));let x;if(xn.isFormData(n)){if(_s.hasStandardBrowserEnv||_s.hasStandardBrowserWebWorkerEnv)p.setContentType(void 0);else if((x=p.getContentType())!==!1){const[S,...T]=x?x.split(";").map(M=>M.trim()).filter(Boolean):[];p.setContentType([S||"multipart/form-data",...T].join("; "))}}if(_s.hasStandardBrowserEnv&&(r&&xn.isFunction(r)&&(r=r(t)),r||r!==!1&&Xge(t.url))){const S=s&&d&&Zge.read(d);S&&p.set(s,S)}return t},Qge=typeof XMLHttpRequest<"u",eve=Qge&&function(e){return new Promise(function(n,r){const s=L8(e);let d=s.data;const p=xs.from(s.headers).normalize();let{responseType:i,onUploadProgress:x,onDownloadProgress:S}=s,T,M,$,L,N;function V(){L&&L(),N&&N(),s.cancelToken&&s.cancelToken.unsubscribe(T),s.signal&&s.signal.removeEventListener("abort",T)}let B=new XMLHttpRequest;B.open(s.method.toUpperCase(),s.url,!0),B.timeout=s.timeout;function j(){if(!B)return;const W=xs.from("getAllResponseHeaders"in B&&B.getAllResponseHeaders()),ee={data:!i||i==="text"||i==="json"?B.responseText:B.response,status:B.status,statusText:B.statusText,headers:W,config:e,request:B};k8(function(Y){n(Y),V()},function(Y){r(Y),V()},ee),B=null}"onloadend"in B?B.onloadend=j:B.onreadystatechange=function(){!B||B.readyState!==4||B.status===0&&!(B.responseURL&&B.responseURL.indexOf("file:")===0)||setTimeout(j)},B.onabort=function(){B&&(r(new ci("Request aborted",ci.ECONNABORTED,e,B)),B=null)},B.onerror=function(){r(new ci("Network Error",ci.ERR_NETWORK,e,B)),B=null},B.ontimeout=function(){let X=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const ee=s.transitional||A8;s.timeoutErrorMessage&&(X=s.timeoutErrorMessage),r(new ci(X,ee.clarifyTimeoutError?ci.ETIMEDOUT:ci.ECONNABORTED,e,B)),B=null},d===void 0&&p.setContentType(null),"setRequestHeader"in B&&xn.forEach(p.toJSON(),function(X,ee){B.setRequestHeader(ee,X)}),xn.isUndefined(s.withCredentials)||(B.withCredentials=!!s.withCredentials),i&&i!=="json"&&(B.responseType=s.responseType),S&&([$,N]=N1(S,!0),B.addEventListener("progress",$)),x&&B.upload&&([M,L]=N1(x),B.upload.addEventListener("progress",M),B.upload.addEventListener("loadend",L)),(s.cancelToken||s.signal)&&(T=W=>{B&&(r(!W||W.type?new qm(null,e,B):W),B.abort(),B=null)},s.cancelToken&&s.cancelToken.subscribe(T),s.signal&&(s.signal.aborted?T():s.signal.addEventListener("abort",T)));const H=Gge(s.url);if(H&&_s.protocols.indexOf(H)===-1){r(new ci("Unsupported protocol "+H+":",ci.ERR_BAD_REQUEST,e));return}B.send(d||null)})},tve=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,s;const d=function(S){if(!s){s=!0,i();const T=S instanceof Error?S:this.reason;r.abort(T instanceof ci?T:new qm(T instanceof Error?T.message:T))}};let p=t&&setTimeout(()=>{p=null,d(new ci(`timeout ${t} of ms exceeded`,ci.ETIMEDOUT))},t);const i=()=>{e&&(p&&clearTimeout(p),p=null,e.forEach(S=>{S.unsubscribe?S.unsubscribe(d):S.removeEventListener("abort",d)}),e=null)};e.forEach(S=>S.addEventListener("abort",d));const{signal:x}=r;return x.unsubscribe=()=>xn.asap(i),x}},nve=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,s;for(;r<n;)s=r+t,yield e.slice(r,s),r=s},rve=async function*(e,t){for await(const n of ive(e))yield*nve(n,t)},ive=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},GL=(e,t,n,r)=>{const s=rve(e,t);let d=0,p,i=x=>{p||(p=!0,r&&r(x))};return new ReadableStream({async pull(x){try{const{done:S,value:T}=await s.next();if(S){i(),x.close();return}let M=T.byteLength;if(n){let $=d+=M;n($)}x.enqueue(new Uint8Array(T))}catch(S){throw i(S),S}},cancel(x){return i(x),s.return()}},{highWaterMark:2})},hS=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",N8=hS&&typeof ReadableStream=="function",ove=hS&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),F8=(e,...t)=>{try{return!!e(...t)}catch{return!1}},ave=N8&&F8(()=>{let e=!1;const t=new Request(_s.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),qL=64*1024,rM=N8&&F8(()=>xn.isReadableStream(new Response("").body)),F1={stream:rM&&(e=>e.body)};hS&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!F1[t]&&(F1[t]=xn.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new ci(`Response type '${t}' is not supported`,ci.ERR_NOT_SUPPORT,r)})})})(new Response);const sve=async e=>{if(e==null)return 0;if(xn.isBlob(e))return e.size;if(xn.isSpecCompliantForm(e))return(await new Request(_s.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(xn.isArrayBufferView(e)||xn.isArrayBuffer(e))return e.byteLength;if(xn.isURLSearchParams(e)&&(e=e+""),xn.isString(e))return(await ove(e)).byteLength},lve=async(e,t)=>{const n=xn.toFiniteNumber(e.getContentLength());return n??sve(t)},cve=hS&&(async e=>{let{url:t,method:n,data:r,signal:s,cancelToken:d,timeout:p,onDownloadProgress:i,onUploadProgress:x,responseType:S,headers:T,withCredentials:M="same-origin",fetchOptions:$}=L8(e);S=S?(S+"").toLowerCase():"text";let L=tve([s,d&&d.toAbortSignal()],p),N;const V=L&&L.unsubscribe&&(()=>{L.unsubscribe()});let B;try{if(x&&ave&&n!=="get"&&n!=="head"&&(B=await lve(T,r))!==0){let ee=new Request(t,{method:"POST",body:r,duplex:"half"}),J;if(xn.isFormData(r)&&(J=ee.headers.get("content-type"))&&T.setContentType(J),ee.body){const[Y,re]=HL(B,N1(UL(x)));r=GL(ee.body,qL,Y,re)}}xn.isString(M)||(M=M?"include":"omit");const j="credentials"in Request.prototype;N=new Request(t,{...$,signal:L,method:n.toUpperCase(),headers:T.normalize().toJSON(),body:r,duplex:"half",credentials:j?M:void 0});let H=await fetch(N);const W=rM&&(S==="stream"||S==="response");if(rM&&(i||W&&V)){const ee={};["status","statusText","headers"].forEach(se=>{ee[se]=H[se]});const J=xn.toFiniteNumber(H.headers.get("content-length")),[Y,re]=i&&HL(J,N1(UL(i),!0))||[];H=new Response(GL(H.body,qL,Y,()=>{re&&re(),V&&V()}),ee)}S=S||"text";let X=await F1[xn.findKey(F1,S)||"text"](H,e);return!W&&V&&V(),await new Promise((ee,J)=>{k8(ee,J,{data:X,headers:xs.from(H.headers),status:H.status,statusText:H.statusText,config:e,request:N})})}catch(j){throw V&&V(),j&&j.name==="TypeError"&&/fetch/i.test(j.message)?Object.assign(new ci("Network Error",ci.ERR_NETWORK,e,N),{cause:j.cause||j}):ci.from(j,j&&j.code,e,N)}}),iM={http:Cge,xhr:eve,fetch:cve};xn.forEach(iM,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const KL=e=>`- ${e}`,uve=e=>xn.isFunction(e)||e===null||e===!1,B8={getAdapter:e=>{e=xn.isArray(e)?e:[e];const{length:t}=e;let n,r;const s={};for(let d=0;d<t;d++){n=e[d];let p;if(r=n,!uve(n)&&(r=iM[(p=String(n)).toLowerCase()],r===void 0))throw new ci(`Unknown adapter '${p}'`);if(r)break;s[p||"#"+d]=r}if(!r){const d=Object.entries(s).map(([i,x])=>`adapter ${i} `+(x===!1?"is not supported by the environment":"is not available in the build"));let p=t?d.length>1?`since :
`+d.map(KL).join(`
`):" "+KL(d[0]):"as no adapter specified";throw new ci("There is no suitable adapter to dispatch the request "+p,"ERR_NOT_SUPPORT")}return r},adapters:iM};function RE(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new qm(null,e)}function XL(e){return RE(e),e.headers=xs.from(e.headers),e.data=PE.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),B8.getAdapter(e.adapter||Ny.adapter)(e).then(function(r){return RE(e),r.data=PE.call(e,e.transformResponse,r),r.headers=xs.from(r.headers),r},function(r){return $8(r)||(RE(e),r&&r.response&&(r.response.data=PE.call(e,e.transformResponse,r.response),r.response.headers=xs.from(r.response.headers))),Promise.reject(r)})}const j8="1.7.7",ER={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ER[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const ZL={};ER.transitional=function(t,n,r){function s(d,p){return"[Axios v"+j8+"] Transitional option '"+d+"'"+p+(r?". "+r:"")}return(d,p,i)=>{if(t===!1)throw new ci(s(p," has been removed"+(n?" in "+n:"")),ci.ERR_DEPRECATED);return n&&!ZL[p]&&(ZL[p]=!0,console.warn(s(p," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(d,p,i):!0}};function dve(e,t,n){if(typeof e!="object")throw new ci("options must be an object",ci.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const d=r[s],p=t[d];if(p){const i=e[d],x=i===void 0||p(i,d,e);if(x!==!0)throw new ci("option "+d+" must be "+x,ci.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ci("Unknown option "+d,ci.ERR_BAD_OPTION)}}const oM={assertOptions:dve,validators:ER},rd=oM.validators;let qh=class{constructor(t){this.defaults=t,this.interceptors={request:new jL,response:new jL}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let s;Error.captureStackTrace?Error.captureStackTrace(s={}):s=new Error;const d=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?d&&!String(r.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+d):r.stack=d}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=tf(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:d}=n;r!==void 0&&oM.assertOptions(r,{silentJSONParsing:rd.transitional(rd.boolean),forcedJSONParsing:rd.transitional(rd.boolean),clarifyTimeoutError:rd.transitional(rd.boolean)},!1),s!=null&&(xn.isFunction(s)?n.paramsSerializer={serialize:s}:oM.assertOptions(s,{encode:rd.function,serialize:rd.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let p=d&&xn.merge(d.common,d[n.method]);d&&xn.forEach(["delete","get","head","post","put","patch","common"],N=>{delete d[N]}),n.headers=xs.concat(p,d);const i=[];let x=!0;this.interceptors.request.forEach(function(V){typeof V.runWhen=="function"&&V.runWhen(n)===!1||(x=x&&V.synchronous,i.unshift(V.fulfilled,V.rejected))});const S=[];this.interceptors.response.forEach(function(V){S.push(V.fulfilled,V.rejected)});let T,M=0,$;if(!x){const N=[XL.bind(this),void 0];for(N.unshift.apply(N,i),N.push.apply(N,S),$=N.length,T=Promise.resolve(n);M<$;)T=T.then(N[M++],N[M++]);return T}$=i.length;let L=n;for(M=0;M<$;){const N=i[M++],V=i[M++];try{L=N(L)}catch(B){V.call(this,B);break}}try{T=XL.call(this,L)}catch(N){return Promise.reject(N)}for(M=0,$=S.length;M<$;)T=T.then(S[M++],S[M++]);return T}getUri(t){t=tf(this.defaults,t);const n=z8(t.baseURL,t.url);return O8(n,t.params,t.paramsSerializer)}};xn.forEach(["delete","get","head","options"],function(t){qh.prototype[t]=function(n,r){return this.request(tf(r||{},{method:t,url:n,data:(r||{}).data}))}});xn.forEach(["post","put","patch"],function(t){function n(r){return function(d,p,i){return this.request(tf(i||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:d,data:p}))}}qh.prototype[t]=n(),qh.prototype[t+"Form"]=n(!0)});let hve=class V8{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(d){n=d});const r=this;this.promise.then(s=>{if(!r._listeners)return;let d=r._listeners.length;for(;d-- >0;)r._listeners[d](s);r._listeners=null}),this.promise.then=s=>{let d;const p=new Promise(i=>{r.subscribe(i),d=i}).then(s);return p.cancel=function(){r.unsubscribe(d)},p},t(function(d,p,i){r.reason||(r.reason=new qm(d,p,i),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new V8(function(s){t=s}),cancel:t}}};function fve(e){return function(n){return e.apply(null,n)}}function pve(e){return xn.isObject(e)&&e.isAxiosError===!0}const aM={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(aM).forEach(([e,t])=>{aM[t]=e});function H8(e){const t=new qh(e),n=_8(qh.prototype.request,t);return xn.extend(n,qh.prototype,t,{allOwnKeys:!0}),xn.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return H8(tf(e,s))},n}const $i=H8(Ny);$i.Axios=qh;$i.CanceledError=qm;$i.CancelToken=hve;$i.isCancel=$8;$i.VERSION=j8;$i.toFormData=dS;$i.AxiosError=ci;$i.Cancel=$i.CanceledError;$i.all=function(t){return Promise.all(t)};$i.spread=fve;$i.isAxiosError=pve;$i.mergeConfig=tf;$i.AxiosHeaders=xs;$i.formToJSON=e=>D8(xn.isHTMLForm(e)?new FormData(e):e);$i.getAdapter=B8.getAdapter;$i.HttpStatusCode=aM;$i.default=$i;const{Axios:z0e,AxiosError:L0e,CanceledError:N0e,isCancel:F0e,CancelToken:B0e,VERSION:j0e,all:V0e,Cancel:H0e,isAxiosError:U0e,spread:W0e,toFormData:G0e,AxiosHeaders:q0e,HttpStatusCode:K0e,formToJSON:X0e,getAdapter:Z0e,mergeConfig:Y0e}=$i,{Search:mve}=uu,{RangePicker:gve}=Ud,{Option:fa}=Ta,U8=()=>{const[e,t]=_.useState([]),[n,r]=_.useState([]),[s,d]=_.useState(""),[p,i]=_.useState(null),[x,S]=_.useState(null),[T,M]=_.useState(null),[$,L]=_.useState([]),N=ql();_.useEffect(()=>{(async()=>{try{const Y=await $i.get("https://safeplace.site/api/user-form");t(Y.data.map(re=>({key:re._id,id:re._id,description:re.description,type:re.complaintType,status:re.status,date:Wo(re.date).format("YYYY-MM-DD"),time:re.time}))),r(Y.data.map(re=>({key:re._id,id:re._id,description:re.description,type:re.complaintType,status:re.status,date:Wo(re.date).format("YYYY-MM-DD"),time:re.time})))}catch(Y){console.error("Error al obtener las quejas:",Y)}})()},[]);const V=()=>{let J=[...e];if(s&&(J=J.filter(Y=>Y.id.includes(s)||Y.description.toLowerCase().includes(s.toLowerCase()))),p){const[Y,re]=p;J=J.filter(se=>{const ae=new Date(se.date);return ae>=Y&&ae<=re})}x&&(J=J.filter(Y=>Y.type===x)),T&&(J=J.filter(Y=>Y.status===T)),r(J)},B=()=>{d(""),i(null),S(null),M(null),r(e)},j=async()=>{try{await Promise.all($.map(Y=>$i.delete(`https://safeplace.site/api/user-form/${Y}`))),Vi.success("Denuncias eliminadas exitosamente");const J=e.filter(Y=>!$.includes(Y.key));t(J),r(J),L([])}catch{Vi.error("Error al eliminar las denuncias")}},H=async J=>{try{await $i.delete(`https://safeplace.site/api/user-form/${J}`),Vi.success("Denuncia eliminada exitosamente");const Y=e.filter(re=>re.id!==J);t(Y),r(Y)}catch{Vi.error("Error al eliminar la denuncia")}},W=J=>{N(`/review-complaint/${J}`)},X=async(J,Y)=>{try{await $i.put(`https://safeplace.site/api/user-form/${J}`,{status:Y}),Vi.success("Estado actualizado exitosamente");const re=e.map(se=>se.id===J?{...se,status:Y}:se);t(re),r(re)}catch{Vi.error("Error al actualizar el estado")}},ee=[{title:"ID",dataIndex:"id",key:"id"},{title:"Descripción",dataIndex:"description",key:"description"},{title:"Fecha",dataIndex:"date",key:"date"},{title:"Hora",dataIndex:"time",key:"time"},{title:"Tipo",dataIndex:"type",key:"type"},{title:"Estado",dataIndex:"status",key:"status",render:(J,Y)=>he.jsx(wm,{title:"¿Estás seguro de que deseas actualizar el estado?",onConfirm:()=>X(Y.id,Y.status),onCancel:()=>Vi.info("Cancelado"),okText:"Sí",cancelText:"No",children:he.jsxs(Ta,{defaultValue:Y.status,style:{width:180},virtual:!1,onChange:re=>{Y.status=re,r([...n])},children:[he.jsx(fa,{value:"Pendiente",children:"Pendiente"}),he.jsx(fa,{value:"Resuelto",children:"Resuelto"}),he.jsx(fa,{value:"En proceso",children:"En proceso"})]})})},{title:"Acciones",key:"actions",render:(J,Y)=>he.jsxs(Ec,{children:[he.jsx(Ba,{to:`/review-complaint/${Y.id}`,children:he.jsx(Di,{type:"link",icon:he.jsx(uR,{}),onClick:()=>W(Y.id),children:"Ver o Editar"})}),he.jsx(wm,{title:"¿Estás seguro de eliminar esta denuncia?",onConfirm:()=>H(Y.id),onCancel:()=>Vi.info("Eliminación cancelada"),okText:"Sí",cancelText:"No",children:he.jsx(Di,{type:"link",icon:he.jsx(cR,{}),danger:!0,children:"Eliminar"})})]})}];return he.jsx("div",{style:{padding:20,display:"flex",justifyContent:"center"},children:he.jsxs("div",{style:{width:"100vw",backgroundColor:"#fff",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",borderRadius:"10px"},children:[he.jsxs(Ec,{style:{marginBottom:0,alignItems:"center",padding:"10px 20px",backgroundColor:"#fff",borderBottom:"1px solid #f0f0f0",borderRadius:"10px 10px 0 0"},align:"center",children:[he.jsx(mve,{placeholder:"Buscar por ID o descripción",value:s,onChange:J=>d(J.target.value),onSearch:()=>{let J=[...e];s.match(/^[a-fA-F0-9]{24}$/)?J=J.filter(Y=>Y.id===s):J=J.filter(Y=>Y.description.toLowerCase().includes(s.toLowerCase())),r(J)},style:{margin:0,width:450,backgroundColor:"#fff"}}),he.jsx(gve,{value:p,onChange:J=>i(J),style:{width:250,backgroundColor:"#fff"}}),he.jsxs(Ta,{value:x,style:{width:180,backgroundColor:"#fff"},onChange:J=>S(J),placeholder:"Tipo denuncia",virtual:!1,children:[he.jsx(fa,{value:"Acoso",children:"Acoso"}),he.jsx(fa,{value:"Discriminacion",children:"Discriminación"}),he.jsx(fa,{value:"Violencia",children:"Violencia"}),he.jsx(fa,{value:"Corrupción y fraude",children:"Corrupción y fraude"}),he.jsx(fa,{value:"Incumplimiento de normativas",children:"Incumplimiento de normativas"}),he.jsx(fa,{value:"Abuso y maltrato",children:"Abuso y maltrato"}),he.jsx(fa,{value:"Contenido prohibido",children:"Contenido prohibido"}),he.jsx(fa,{value:"Crimen",children:"Crimen"}),he.jsx(fa,{value:"Drogas",children:"Drogas"}),he.jsx(fa,{value:"Terrorismo",children:"Terrorismo"}),he.jsx(fa,{value:"otro",children:"Otro"})]}),he.jsxs(Ta,{value:T,style:{width:180,backgroundColor:"#fff"},onChange:J=>M(J),placeholder:"Estado",children:[he.jsx(fa,{value:null,children:"Estado"}),he.jsx(fa,{value:"Pendiente",children:"Pendiente"}),he.jsx(fa,{value:"Resuelto",children:"Resuelto"}),he.jsx(fa,{value:"En proceso",children:"En proceso"})]}),he.jsx(Di,{type:"primary",onClick:V,children:"Filtrar"}),he.jsx(Di,{onClick:B,children:"Reset"}),he.jsx(Di,{type:"primary",onClick:j,disabled:$.length===0,children:"Eliminar"}),he.jsx(Di,{type:"default",icon:he.jsx(zV,{}),onClick:B})]}),he.jsx(Jl,{rowSelection:{selectedRowKeys:$,onChange:L},columns:ee,dataSource:n,pagination:{pageSize:9,showSizeChanger:!0,pageSizeOptions:["9","10","20","50"]},style:{borderRadius:"0 0 10px 10px",paddingRight:"10px",paddingLeft:"10px"}})]})})},vve=()=>he.jsx(he.Fragment,{children:he.jsxs("main",{children:[he.jsx("div",{className:"AdminPanelDescription",children:he.jsx(y8,{})}),he.jsx("div",{className:"ComplaintTable",children:he.jsx(U8,{})})]})}),YL=({text:e,color:t,textColor:n,borderColor:r,onClick:s})=>{const d={backgroundColor:t,border:`2px solid ${r}`,color:n,padding:"10px 20px",textAlign:"center",textDecoration:"none",display:"inline-block",fontSize:"16px",fontWeight:"bold",width:"160px",height:"60px",margin:"4px 2px",cursor:"pointer",borderRadius:"50px",borderColor:r};return he.jsx("button",{style:d,onClick:s,children:e})};/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yve=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),W8=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _ve={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xve=_.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:d,iconNode:p,...i},x)=>_.createElement("svg",{ref:x,..._ve,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:W8("lucide",s),...i},[...p.map(([S,T])=>_.createElement(S,T)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=(e,t)=>{const n=_.forwardRef(({className:r,...s},d)=>_.createElement(xve,{ref:d,iconNode:t,className:W8(`lucide-${yve(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=Km("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bve=Km("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wve=Km("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sve=Km("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=Km("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cve=Km("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Eve=({title:e,body:t,username:n,date:r,status:s,location:d,time:p})=>{const i=x=>{switch(x==null?void 0:x.toLowerCase()){case"resuelto":return{backgroundColor:"#E6F3FF",color:"#0066CC",border:"1px solid #99CCFF"};case"en proceso":return{backgroundColor:"#FFF7E6",color:"#B35C00",border:"1px solid #FFB366"};case"pendiente":default:return{backgroundColor:"#FFE6E6",color:"#CC0000",border:"1px solid #FF9999"}}};return he.jsxs("div",{className:"card",children:[he.jsx("div",{className:"card-header",children:he.jsx("h3",{children:e})}),he.jsx("div",{className:"card-body",children:he.jsx("p",{children:t})}),he.jsxs("div",{className:"card-footer",children:[he.jsx(Cve,{className:"user-icon",size:24}),he.jsx("label",{id:"username",children:n}),he.jsx("div",{style:{...i(s),padding:"4px 12px",borderRadius:"16px",fontSize:"0.875rem",fontWeight:"500",display:"inline-block"},children:s||"Pendiente"}),he.jsx("p",{id:"date",children:r}),he.jsx("p",{id:"time",children:p})]})]})},Tve=({complaintsPerPage:e,totalComplaints:t,paginate:n,currentPage:r,setComplaintsPerPage:s})=>{const d=Math.ceil(t/e),p=()=>{const T=[],M=[];for(let L=1;L<=d;L++)(L===1||L===d||L>=r-2&&L<=r+2)&&T.push(L);let $;for(let L of T)$&&(L-$===2?M.push($+1):L-$!==1&&M.push("...")),M.push(L),$=L;return M},i=(r-1)*e+1,x=Math.min(i+e-1,t);return he.jsxs("div",{className:"pagination-container",children:[he.jsx("div",{className:"pagination-info",children:`${i}-${x} de ${t} denuncias`}),he.jsxs("div",{className:"pagination-controls",children:[he.jsxs("nav",{className:"pagination-nav",children:[he.jsx("button",{onClick:()=>n(r-1),disabled:r===1,className:"pagination-button prev","aria-label":"Página anterior",children:he.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:he.jsx("path",{d:"M15 18l-6-6 6-6"})})}),p().map((S,T)=>S==="..."?he.jsx("span",{className:"pagination-dots",children:S},`dots-${T}`):he.jsx("button",{onClick:()=>n(S),className:`pagination-button ${r===S?"active":""}`,"aria-label":`Ir a la página ${S}`,children:S},S)),he.jsx("button",{onClick:()=>n(r+1),disabled:r===d,className:"pagination-button next","aria-label":"Página siguiente",children:he.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:he.jsx("path",{d:"M9 18l6-6-6-6"})})})]}),he.jsx("select",{className:"pagination-select",value:e,onChange:S=>s(Number(S.target.value)),"aria-label":"Denuncias por página",children:[5,10,20,50].map(S=>he.jsxs("option",{value:S,children:[S,"/página"]},S))})]})]})},Ive=()=>he.jsxs(he.Fragment,{children:[he.jsxs("header",{children:[he.jsx(v8,{}),he.jsxs("div",{id:"title",children:[he.jsx(Sve,{className:"shield-icon",size:60}),he.jsx("h1",{className:"public-complaints-txt",children:"Denuncias Públicas"})]})]}),he.jsxs("section",{id:"warning",children:[he.jsxs("div",{id:"warning-header",children:[he.jsx(wve,{className:"info-icon",size:30,color:"black"}),he.jsx("p",{children:"Aviso Importante"})]}),he.jsx("div",{id:"warning-body",children:he.jsx("p",{children:"Las denuncias son serias y fundamentadas. Por favor, asegúrate de que toda la información proporcionada sea verídica. Las falsas denuncias falsas no sera toleradas."})})]})]}),Mve="_root_1h44e_1",Pve="_buttons_1h44e_39",DE={root:Mve,"call-action":"_call-action_1h44e_13",buttons:Pve},Rve=()=>{const[e,t]=_.useState([]),[n,r]=_.useState(1),[s,d]=_.useState(5),[p,i]=_.useState(!0),[x,S]=_.useState(null);_.useEffect(()=>{(async()=>{try{const B=await fetch("https://safeplace.site/api/user-form/");if(!B.ok)throw new Error(`Error: ${B.status}`);const j=await B.json(),W=(await Promise.all(j.map(async X=>{if(!X.isAnonymous&&X.userId)try{const ee=await fetch(`https://safeplace.site/api/users/${X.userId}`);if(ee.ok){const J=await ee.json();return{...X,userDetails:J}}}catch(ee){console.error(`Error fetching user details for complaint ${X._id}:`,ee)}return X}))).sort((X,ee)=>new Date(ee.date)-new Date(X.date));t(W),i(!1)}catch(B){console.error("Error fetching complaints:",B),S(B.message),i(!1)}})()},[]);const T=n*s,M=T-s,$=e.slice(M,T),L=V=>r(V),N=V=>{const B={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(V).toLocaleDateString("es-ES",B)};return p?he.jsx("div",{className:"flex items-center justify-center min-h-screen",children:he.jsx("div",{className:"text-xl",children:"Cargando denuncias..."})}):x?he.jsx("div",{className:"flex items-center justify-center min-h-screen",children:he.jsxs("div",{className:"text-xl text-red-600",children:["Error: ",x]})}):he.jsxs("div",{className:DE.root,children:[he.jsx("header",{children:he.jsx(Ive,{})}),he.jsxs("main",{className:"container mx-auto px-4",children:[he.jsx("section",{className:"mb-8",children:he.jsx(Tve,{complaintsPerPage:s,totalComplaints:e.length,paginate:L,currentPage:n,setComplaintsPerPage:d})}),he.jsx("section",{className:"space-y-6",children:$.map(V=>{let B;return V.isAnonymous?B="Anónimo":V.userDetails?B=`${V.userDetails.firstname} ${V.userDetails.lastname}`:B="Error al cargar usuario",he.jsx(Eve,{title:V.complaintType,body:V.description,username:B,date:N(V.date),status:V.status,location:V.location,time:V.time},V._id)})}),e.length===0&&he.jsx("div",{className:"text-center py-10",children:he.jsx("p",{className:"text-xl text-gray-600",children:"No hay denuncias disponibles en este momento"})}),he.jsxs("section",{className:DE["call-action"],children:[he.jsx("p",{className:"text-xl mb-4",children:"¿Quieres que tus denuncias se muestren?"}),he.jsxs("div",{className:DE.buttons,children:[he.jsx(Ba,{to:"/register-user",children:he.jsx(YL,{text:"Registrarse",color:"#252B42",textColor:"white",borderColor:"#252B42"})}),he.jsx(Ba,{to:"/login",children:he.jsx(YL,{text:"Ingresa",color:"transparent",textColor:"#252B42",borderColor:"#252B42"})})]})]})]})]})},id=({children:e,variant:t="primary",className:n="",type:r="button",onClick:s,...d})=>{const p=`button button-${t} ${n}`;return he.jsx("button",{type:r,className:p,onClick:s,...d,children:e})},Ove="_header_1y58m_53",Ave="_logo_1y58m_73",Dve="_navigation_1y58m_117",$ve="_firstPage_1y58m_165",kve="_title_1y58m_185",zve="_slogan_1y58m_201",Lve="_italic_1y58m_213",Nve="_bold_1y58m_223",Fve="_card_1y58m_587",Bve="_footer_1y58m_677",jr={"image-container-landing":"_image-container-landing_1y58m_23","landing-container":"_landing-container_1y58m_35",header:Ove,"logo-container":"_logo-container_1y58m_73",logo:Ave,"user-icon":"_user-icon_1y58m_93","logo-text":"_logo-text_1y58m_103",navigation:Dve,"nav-list":"_nav-list_1y58m_125","nav-link":"_nav-link_1y58m_145",firstPage:$ve,title:kve,slogan:zve,italic:Lve,bold:Nve,"cta-section":"_cta-section_1y58m_231","cta-text":"_cta-text_1y58m_239","button-container":"_button-container_1y58m_251","benefits-section":"_benefits-section_1y58m_309","benefits-container":"_benefits-container_1y58m_321","benefits-title":"_benefits-title_1y58m_331","benefits-subtitle":"_benefits-subtitle_1y58m_347","benefits-grid":"_benefits-grid_1y58m_361","benefit-item":"_benefit-item_1y58m_379","benefit-icon-container":"_benefit-icon-container_1y58m_391","benefit-icon":"_benefit-icon_1y58m_391","benefit-text":"_benefit-text_1y58m_425","benefits-buttons":"_benefits-buttons_1y58m_437","enlaces-container":"_enlaces-container_1y58m_523","enlaces-section":"_enlaces-section_1y58m_533","enlaces-title":"_enlaces-title_1y58m_545","enlaces-grid":"_enlaces-grid_1y58m_559",card:Fve,"card-title":"_card-title_1y58m_617","empresa-section":"_empresa-section_1y58m_633","empresa-title":"_empresa-title_1y58m_651","empresa-description":"_empresa-description_1y58m_665",footer:Bve},jve=[{icon:he.jsx(AE,{className:jr["benefit-icon"]}),text:"Plantea tu denuncia mediante una plataforma segura"},{icon:he.jsx(OE,{className:jr["benefit-icon"]}),text:"Permite que tus empleados denuncien irregularidades"},{icon:he.jsx(AE,{className:jr["benefit-icon"]}),text:"Verifica el estado de las denuncias que has hecho"},{icon:he.jsx(OE,{className:jr["benefit-icon"]}),text:"Posee un centro de control de denuncias"},{icon:he.jsx(AE,{className:jr["benefit-icon"]}),text:"Tus denuncias serán remitidas a las entidades encargadas."},{icon:he.jsx(OE,{className:jr["benefit-icon"]}),text:"Haz que tus empleados se sientan valiosos"}],Vve=({className:e,...t})=>he.jsx("div",{className:`${jr["landing-page"]} ${e}`,children:he.jsxs("div",{className:jr["image-container-landing"],children:[he.jsxs("div",{className:jr["landing-container"],children:[he.jsxs("header",{className:jr.header,children:[he.jsxs("div",{className:jr["logo-container"],children:[he.jsx("div",{className:jr.logo,children:he.jsx("img",{src:"/logo.png",alt:"Logo de SafePlace"})}),he.jsx("span",{className:jr["logo-text"],children:"SafePlace"})]}),he.jsx("nav",{className:jr.navigation,children:he.jsxs("ul",{className:jr["nav-list"],children:[he.jsx("li",{children:he.jsx("a",{href:"",className:jr["nav-link"],children:"Inicio"})}),he.jsx("li",{children:he.jsx("a",{href:"#benefits",className:jr["nav-link"],children:"Beneficios"})}),he.jsx("li",{children:he.jsx("a",{href:"#links",className:jr["nav-link"],children:"Enlaces"})}),he.jsx("li",{children:he.jsx("a",{href:"#companies",className:jr["nav-link"],children:"Para empresas"})})]})})]}),he.jsxs("main",{className:jr.firstPage,children:[he.jsx("h1",{className:jr.title,children:"Bienvenido!"}),he.jsx("div",{className:jr.slogan,children:he.jsxs("p",{children:['"Tu ',he.jsx("span",{className:jr.italic,children:"voz"}),", nuestro",he.jsx("span",{className:jr.bold,children:" compromiso"}),":",he.jsx("span",{className:jr.italic,children:" Denuncia y transforma."}),'"']})}),he.jsxs("div",{className:jr["cta-section"],children:[he.jsxs("p",{className:jr["cta-text"],children:["¿Quieres realizar una ",he.jsx("span",{className:jr.italic,children:"denuncia"}),"? Únete a nuestra comunidad"]}),he.jsx("div",{className:jr["button-container"],children:he.jsxs("div",{className:jr["button-container"],children:[he.jsx(Ba,{to:"/register-user",children:he.jsx(id,{variant:"primary",children:" Registrarse"})}),he.jsx(Ba,{to:"/signin",children:he.jsx(id,{variant:"primary",children:"Ingresa"})})]})})]})]})]}),he.jsx("section",{id:"benefits",className:jr["benefits-section"],children:he.jsxs("div",{className:jr["benefits-container"],children:[he.jsx("h2",{className:jr["benefits-title"],children:"Nuestros beneficios"}),he.jsx("p",{className:jr["benefits-subtitle"],children:"Checa los beneficios que te ofrecemos."}),he.jsx("div",{className:jr["benefits-grid"],children:jve.map((n,r)=>he.jsxs("div",{className:jr["benefit-item"],children:[he.jsx("div",{className:jr["benefit-icon-container"],children:n.icon}),he.jsx("p",{className:jr["benefit-text"],children:n.text})]},r))}),he.jsxs("div",{className:jr["benefits-buttons"],children:[he.jsx(Ba,{to:"/register-company",children:he.jsx(id,{variant:"primary",children:"Registrarse"})}),he.jsx(Ba,{to:"/signin",children:he.jsx(id,{variant:"secondary",children:"Ingresa"})})]})]})}),he.jsx("div",{id:"links",className:jr["enlaces-container"],children:he.jsxs("section",{className:jr["enlaces-section"],children:[he.jsx("h2",{className:jr["enlaces-title"],children:"Enlaces"}),he.jsxs("div",{className:jr["enlaces-grid"],children:[he.jsxs("div",{className:jr.card,children:[he.jsx("img",{src:"/blog.png",alt:"Persona pensativa con teléfono"}),he.jsx("h3",{className:jr["card-title"],children:"Ingresa a nuestro blog!"}),he.jsx(Ba,{to:"/blog",children:he.jsx(id,{variant:"card",children:"Ir al blog"})})]}),he.jsxs("div",{className:jr.card,children:[he.jsx("img",{src:"/faqs.png",alt:"Ilustración de personas conversando"}),he.jsx("h3",{className:jr["card-title"],children:"Tienes alguna duda?"}),he.jsx(id,{variant:"card",children:"Ir a preguntas frecuentes"})]}),he.jsxs("div",{className:jr.card,children:[he.jsx("img",{src:"/tutorial.png",alt:"Workspace con laptop"}),he.jsx("h3",{className:jr["card-title"],children:"Ingresa a nuestro tutorial de ingreso de denuncias"}),he.jsx(id,{variant:"card",children:"Tutorial de ingreso de denuncias"})]})]}),he.jsxs("div",{id:"companies",className:jr["empresa-section"],children:[he.jsx("h2",{className:jr["empresa-title"],children:"¿Eres una empresa?"}),he.jsx("p",{className:jr["empresa-description"],children:"Contrata nuestros servicios para brindarle seguridad a tus empleados"}),he.jsx(Ba,{to:"/register-company",children:he.jsx(id,{variant:"empresa",children:"Contáctanos para el servicio"})})]}),he.jsxs("div",{className:jr.footer,children:[he.jsx("p",{children:"Created by Kolashanpan Lovers"}),he.jsx("p",{children:"Términos y condiciones legales"})]})]})})]})}),{Text:Hve,Title:Uve}=Gl,Xm=({visible:e,onClose:t,title:n="Ocurrió un error.",message:r=""})=>he.jsx(Us,{open:e,onCancel:t,footer:null,centered:!0,closable:!1,style:{textAlign:"center",padding:"24px"},children:he.jsxs(Ec,{direction:"vertical",size:"large",style:{textAlign:"center"},children:[he.jsx(Cde,{style:{fontSize:48,color:"red"}}),he.jsx(Uve,{level:3,children:n}),r&&he.jsx(Hve,{children:r}),he.jsx(Di,{type:"primary",onClick:t,children:"Hecho"})]})}),Wve=()=>{const e=ql(),[t,n]=_.useState({email:"",password:"",rememberMe:!1}),{removeToken:r}=_.useContext(_c),{handleSaveToken:s}=_.useContext(_c),{handleSaveUser:d}=_.useContext(_c),[p,i]=_.useState(!1),[x,S]=_.useState(""),T=L=>{const{name:N,value:V,type:B,checked:j}=L.target;n({...t,[N]:B==="checkbox"?j:V})},M=async L=>{r(),L.preventDefault();const{email:N,password:V}=t;try{const j=await fetch("https://safeplace.site/api/users/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:N,password:V})});if(!j.ok){const W=await j.json();throw console.error("Error response:",W),new Error("Login failed: "+W.message)}const H=await j.json();s(H.token),d(H.user),j.ok&&Vi.success("Inicio de sesión exitoso"),H.user.role==="admin"?e("/admin"):H.user.role==="user"?e("/user-dashboard"):H.user.role==="company"?e("/admin-dashboard"):e("/")}catch{S("Error al iniciar sesión"),i(!0)}},$=()=>{i(!1)};return he.jsx("main",{children:he.jsx("div",{className:"safe-place-container",children:he.jsxs("div",{className:"login-form",children:[he.jsx("h1",{children:"SafePlace"}),he.jsx("div",{className:"icon-container",children:he.jsx("img",{src:"logo.png",alt:"SafePlace Icon"})}),he.jsx("h2",{children:"Sistema de Denuncias"}),he.jsx("p",{className:"subtitle",children:"Denuncia fácil, acción inmediata."}),he.jsx("div",{className:"tabs",children:he.jsx("button",{className:"tab-active",children:"Iniciar Sesión"})}),he.jsxs("form",{onSubmit:M,children:[he.jsx("div",{className:"form-group",children:he.jsx("input",{type:"email",name:"email",placeholder:"Email",className:"form-input",value:t.email,onChange:T})}),he.jsx("div",{className:"form-group",children:he.jsx("input",{type:"password",name:"password",placeholder:"Contraseña",className:"form-input",value:t.password,onChange:T})}),he.jsx("div",{className:"forgot-password",children:he.jsx("a",{href:"/forgot-password",children:"¿Contraseña olvidada?"})}),he.jsx("button",{type:"submit",className:"submit-button",children:"Iniciar Sesión"})]}),he.jsx(Xm,{visible:p,onClose:$,message:x})]})})})},Gve="_editing_11jcg_37",$E={"profile-card":"_profile-card_11jcg_5",editing:Gve,"profile-body":"_profile-body_11jcg_45"},qve=()=>{const{user:e}=_.useContext(_c),[t,n]=_.useState({firstName:e==null?void 0:e.firstname,lastName:e==null?void 0:e.lastname,country:e==null?void 0:e.country,email:e==null?void 0:e.email,gender:e==null?void 0:e.gender});return he.jsxs("div",{className:$E["profile-card"],children:[he.jsx("img",{src:g8,alt:"Avatar",className:$E["profile-card img"]}),he.jsx("h2",{children:t.firstName}),he.jsx("div",{className:$E["profile-body"],children:he.jsxs(he.Fragment,{children:[he.jsxs("p",{children:[he.jsx("strong",{children:"Nombre:"})," ",t.firstName]}),he.jsxs("p",{children:[he.jsx("strong",{children:"Apellidos:"})," ",t.lastName]}),he.jsxs("p",{children:[he.jsx("strong",{children:"País:"})," ",t.country]}),he.jsxs("p",{children:[he.jsx("strong",{children:"Correo electronico:"})," ",t.email]}),he.jsxs("p",{children:[he.jsx("strong",{children:"Genéro:"})," ",t.gender]})]})})]})},Kve=()=>he.jsx(he.Fragment,{children:he.jsx("main",{children:he.jsx(qve,{})})}),Xve="_subtitle_1nvya_63",Yi={"safe-place-container":"_safe-place-container_1nvya_1","main-class-page":"_main-class-page_1nvya_21","register-form":"_register-form_1nvya_35","icon-container":"_icon-container_1nvya_55",subtitle:Xve,"form-group":"_form-group_1nvya_73","form-input":"_form-input_1nvya_81","sector-options":"_sector-options_1nvya_97","radio-container":"_radio-container_1nvya_111","phone-group":"_phone-group_1nvya_125","country-code":"_country-code_1nvya_135","phone-input":"_phone-input_1nvya_151","submit-button":"_submit-button_1nvya_159","company-info-popover":"_company-info-popover_1nvya_213","company-phone-popover":"_company-phone-popover_1nvya_229","country-popover":"_country-popover_1nvya_241"},Fy=({title:e,content:t})=>he.jsx(Fw,{content:he.jsxs("div",{style:{width:250},children:[he.jsx(Gl.Title,{level:5,children:e}),he.jsx(Gl.Text,{children:t})]}),trigger:"hover",children:he.jsx(Yde,{style:{fontSize:"15px",cursor:"pointer",color:"gray"}})}),Zve=()=>he.jsx(Fy,{title:"¿Para qué utilizamos el nombre de empresa, tipo de organización y sede principal?",content:"Para fines de control de nuestros beneficiarios y administración de usuarios."}),G8=()=>he.jsx(Fy,{title:"¿Para qué utilizamos tu país?",content:"Utilizamos tu país para la comunicación con las entidades de tu país."}),Yve=()=>he.jsx(Fy,{title:"¿Para qué utilizamos tu teléfono?",content:"Para fines de control de nuestros beneficiarios y administración de usuarios."}),q8=()=>{const[e,t]=_.useState(null),[n,r]=_.useState(!1);return{post:async(d,p)=>{r(!0),t(null);try{const x=await fetch(`https://safeplace.site/api${d}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(!x.ok){const T=await x.json();throw new Error(T.message||"Error en la solicitud")}const S=await x.json();return r(!1),S}catch(i){throw t(i.message),r(!1),i}},error:e,loading:n}},{Text:Jve,Title:Qve}=Gl,K8=({visible:e,onClose:t})=>he.jsx(Us,{visible:e,onCancel:t,footer:null,centered:!0,closable:!1,bodyStyle:{textAlign:"center",padding:"24px"},children:he.jsxs(Ec,{direction:"vertical",size:"large",style:{textAlign:"center"},children:[he.jsx($V,{style:{fontSize:48,color:"green"}}),he.jsx(Qve,{level:3,children:"¡Registro completado exitosamente!"}),he.jsx(Jve,{children:"Haz clic en ‘Hecho’ para continuar y explorar las opciones disponibles."}),he.jsx(Di,{type:"primary",onClick:t,children:"Hecho"})]})}),e0e=()=>{const[e,t]=_.useState({institutionName:"",sector:"",address:"",phone_number:"",country:"",email:"",password:"",confirmPassword:"",role:"company"}),n=ql(),{post:r}=q8(),[s,d]=_.useState(!1),[p,i]=_.useState(""),[x,S]=_.useState(!1),T=()=>e.password!==e.confirmPassword?(i("Las contraseñas no coinciden"),d(!0),!1):!0,M=N=>{const{name:V,value:B}=N.target;t({...e,[V]:B})},$=async N=>{if(N.preventDefault(),T()){const{confirmPassword:V,...B}=e;try{const j=await r("/users/signup-company",B);S(!0)}catch(j){i(j.message),d(!0)}}},L=()=>{S(!1),n("/admin-dashboard")};return he.jsx("main",{className:Yi["main-class-page"],children:he.jsx("div",{className:Yi["safe-place-container"],children:he.jsxs("div",{className:Yi["register-form"],children:[he.jsx("h1",{children:"SafePlace"}),he.jsx("div",{className:Yi["icon-container"],children:he.jsx("img",{src:"/logo.png",alt:"SafePlace Icon"})}),he.jsx("h2",{children:"Sistema de Denuncias"}),he.jsx("p",{className:Yi.subtitle,children:"Denuncia fácil, acción inmediata."}),he.jsxs("form",{onSubmit:$,children:[he.jsxs("div",{className:Yi["form-group"],children:[he.jsx("input",{type:"text",name:"institutionName",placeholder:"Nombre de la Institución o Empresa",className:Yi["form-input"],value:e.name,onChange:M}),he.jsx("div",{className:Yi["company-info-popover"],children:he.jsx(Zve,{})})]}),he.jsxs("div",{className:Yi["sector-options"],children:[he.jsxs("label",{className:Yi["radio-container"],children:[he.jsx("input",{type:"radio",name:"sector",value:"Privado",checked:e.sector==="Privado",onChange:M}),he.jsx("span",{children:"Sector Privado"})]}),he.jsxs("label",{className:Yi["radio-container"],children:[he.jsx("input",{type:"radio",name:"sector",value:"Público",checked:e.sector==="Público",onChange:M}),he.jsx("span",{children:"Sector Público"})]}),he.jsxs("label",{className:Yi["radio-container"],children:[he.jsx("input",{type:"radio",name:"sector",value:"ONG",checked:e.sector==="ONG",onChange:M}),he.jsx("span",{children:"ONG"})]})]}),he.jsx("div",{className:Yi["form-group"],children:he.jsx("input",{type:"text",name:"address",placeholder:"Dirección de la sede principal",className:Yi["form-input"],value:e.address,onChange:M})}),he.jsxs("div",{className:`${Yi["form-group"]} ${Yi["phone-group"]}`,children:[he.jsx("select",{className:Yi["country-code"],children:he.jsx("option",{children:"+503"})}),he.jsx("input",{type:"tel",name:"phone_number",placeholder:"Teléfono de contacto",className:`${Yi["form-input"]} ${Yi["phone-input"]}`,value:e.phone,onChange:M}),he.jsx("div",{className:Yi["company-phone-popover"],children:he.jsx(Yve,{})})]}),he.jsxs("div",{className:Yi["form-group"],children:[he.jsx("input",{type:"text",name:"country",placeholder:"El Salvador",className:Yi["form-input"],value:e.country,onChange:M}),he.jsx("div",{className:Yi["country-popover"],children:he.jsx(G8,{})})]}),he.jsx("div",{className:Yi["form-group"],children:he.jsx("input",{type:"email",name:"email",placeholder:"Correo Electrónico",className:Yi["form-input"],value:e.email,onChange:M})}),he.jsx("div",{className:Yi["form-group"],children:he.jsx("input",{type:"password",name:"password",placeholder:"Contraseña",className:Yi["form-input"],value:e.password,onChange:M})}),he.jsx("div",{className:Yi["form-group"],children:he.jsx("input",{type:"password",name:"confirmPassword",placeholder:"Confirmar Contraseña",className:Yi["form-input"],value:e.confirmPassword,onChange:M})}),he.jsx("button",{type:"submit",className:Yi["submit-button"],children:"Continuar"})]}),he.jsx(Xm,{visible:s,onClose:()=>d(!1),message:p}),he.jsx(K8,{visible:x,onClose:L})]})})})},t0e=()=>he.jsx(Fy,{title:"¿Para qué utilizamos tu nombre y apellido?",content:"Utilizamos tu nombre para la identificación interna de nuestras denuncias."}),n0e=()=>he.jsx(Fy,{title:"¿Para qué utilizamos tu teléfono?",content:"Utilizamos tu télefono, en dado caso, necesitamos más información."}),r0e="_subtitle_59bj5_103",i0e="_tabs_59bj5_115",o0e="_tab_59bj5_115",a0e="_genderType_59bj5_265",so={"safe-place-container":"_safe-place-container_59bj5_1","register-form":"_register-form_59bj5_23","login-form":"_login-form_59bj5_45","icon-container":"_icon-container_59bj5_65",subtitle:r0e,tabs:i0e,tab:o0e,"tab-active":"_tab-active_59bj5_145","form-group":"_form-group_59bj5_165","form-input":"_form-input_59bj5_173","form-checkbox":"_form-checkbox_59bj5_189","forgot-password":"_forgot-password_59bj5_203","submit-button":"_submit-button_59bj5_221","gender-options":"_gender-options_59bj5_251",genderType:a0e,"code-group":"_code-group_59bj5_275","code-select":"_code-select_59bj5_285","code-input":"_code-input_59bj5_301","name-popover":"_name-popover_59bj5_331","phone-popover":"_phone-popover_59bj5_343","country-popover":"_country-popover_59bj5_355"},s0e=()=>{const[e,t]=_.useState({firstname:"",lastname:"",email:"",phone_number:"",country:"",gender:"",password:"",confirmPassword:"",role:"user"}),[n,r]=_.useState(!1),[s,d]=_.useState(""),[p,i]=_.useState(!1),x=()=>e.password!==e.confirmPassword?(d("Las contraseñas no coinciden"),r(!0),!1):!0,S=ql(),{post:T}=q8(),M=N=>{const{name:V,value:B}=N.target;t({...e,[V]:B})},$=async N=>{if(N.preventDefault(),x()){const{confirmPassword:V,...B}=e;try{const j=await T("/users/signup-user",B);i(!0)}catch(j){d(j.message),r(!0)}}},L=()=>{i(!1),S("/user-dashboard")};return he.jsx("div",{className:so["safe-place-container"],children:he.jsxs("div",{className:so["register-form"],children:[he.jsx("h1",{children:"SafePlace"}),he.jsx("div",{className:so["icon-container"],children:he.jsx("img",{src:"/logo.png",alt:"SafePlace Icon"})}),he.jsx("h2",{children:"Sistema de Denuncias"}),he.jsx("p",{className:so.subtitle,children:"Denuncia fácil, acción inmediata."}),he.jsxs("form",{onSubmit:$,children:[he.jsxs("div",{className:so["form-group"],children:[he.jsx("input",{type:"text",name:"firstname",placeholder:"Nombre",className:so["form-input"],value:e.firstname,onChange:M}),he.jsx("div",{className:so["name-popover"],children:he.jsx(t0e,{})})]}),he.jsx("div",{className:so["form-group"],children:he.jsx("input",{type:"text",name:"lastname",placeholder:"Apellidos",className:so["form-input"],value:e.lastname,onChange:M})}),he.jsx("div",{className:so["form-group"],children:he.jsx("input",{type:"email",name:"email",placeholder:"Correo Electrónico",className:so["form-input"],value:e.email,onChange:M})}),he.jsxs("div",{className:`${so["form-group"]} ${so["code-group"]}`,children:[he.jsx("input",{type:"text",name:"phone_number",placeholder:"Número de Teléfono",className:`${so["form-input"]} ${so["code-input"]}`,value:e.phone_number,onChange:M}),he.jsx("div",{className:so["phone-popover"],children:he.jsx(n0e,{})})]}),he.jsxs("div",{className:so["form-group"],children:[he.jsx("input",{type:"text",name:"country",placeholder:"El Salvador",className:so["form-input"],value:e.country,onChange:M}),he.jsx("div",{className:so["country-popover"],children:he.jsx(G8,{})})]}),he.jsxs("div",{className:so["gender-options"],children:[he.jsxs("label",{className:so.genderType,children:[he.jsx("input",{type:"radio",name:"gender",value:"Masculino",checked:e.gender==="Masculino",onChange:M}),"Masculino"]}),he.jsxs("label",{className:so.genderType,children:[he.jsx("input",{type:"radio",name:"gender",value:"Femenino",checked:e.gender==="Femenino",onChange:M}),"Femenino"]}),he.jsxs("label",{className:so.genderType,children:[he.jsx("input",{type:"radio",name:"gender",value:"Otro genéro",checked:e.gender==="Otro genéro",onChange:M}),"Otro"]})]}),he.jsx("div",{className:so["form-group"],children:he.jsx("input",{type:"password",name:"password",placeholder:"Contraseña",className:so["form-input"],value:e.password,onChange:M})}),he.jsx("div",{className:so["form-group"],children:he.jsx("input",{type:"password",name:"confirmPassword",placeholder:"Confirmar Contraseña",className:so["form-input"],onChange:M})}),he.jsx("button",{type:"submit",className:so["submit-button"],children:"Registrarse"})]}),he.jsx(Xm,{visible:n,onClose:()=>r(!1),message:s}),he.jsx(K8,{visible:p,onClose:L})]})})};var X8={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(zd,function(){var n,r,s;function d(i,x){if(!n)n=x;else if(!r)r=x;else{var S="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+n+")(sharedChunk); ("+r+")(sharedChunk); self.onerror = null;",T={};n(T),s=x(T),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(s.workerUrl=window.URL.createObjectURL(new Blob([S],{type:"text/javascript"})))}}d(["exports"],function(i){function x(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var S,T={},M={};function $(){if(S)return M;S=1,Object.defineProperty(M,"__esModule",{value:!0}),M.setMatrixArrayType=function(v){M.ARRAY_TYPE=o=v},M.toRadian=function(v){return v*h},M.equals=function(v,f){return Math.abs(v-f)<=u*Math.max(1,Math.abs(v),Math.abs(f))},M.RANDOM=M.ARRAY_TYPE=M.EPSILON=void 0;var u=1e-6;M.EPSILON=u;var o=typeof Float32Array<"u"?Float32Array:Array;M.ARRAY_TYPE=o;var l=Math.random;M.RANDOM=l;var h=Math.PI/180;return Math.hypot||(Math.hypot=function(){for(var v=0,f=arguments.length;f--;)v+=arguments[f]*arguments[f];return Math.sqrt(v)}),M}var L,N={};function V(){if(L)return N;function u(f){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},u(f)}L=1,Object.defineProperty(N,"__esModule",{value:!0}),N.create=function(){var f=new o.ARRAY_TYPE(4);return o.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f},N.clone=function(f){var y=new o.ARRAY_TYPE(4);return y[0]=f[0],y[1]=f[1],y[2]=f[2],y[3]=f[3],y},N.copy=function(f,y){return f[0]=y[0],f[1]=y[1],f[2]=y[2],f[3]=y[3],f},N.identity=function(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=1,f},N.fromValues=function(f,y,E,O){var k=new o.ARRAY_TYPE(4);return k[0]=f,k[1]=y,k[2]=E,k[3]=O,k},N.set=function(f,y,E,O,k){return f[0]=y,f[1]=E,f[2]=O,f[3]=k,f},N.transpose=function(f,y){if(f===y){var E=y[1];f[1]=y[2],f[2]=E}else f[0]=y[0],f[1]=y[2],f[2]=y[1],f[3]=y[3];return f},N.invert=function(f,y){var E=y[0],O=y[1],k=y[2],w=y[3],R=E*w-k*O;return R?(f[0]=w*(R=1/R),f[1]=-O*R,f[2]=-k*R,f[3]=E*R,f):null},N.adjoint=function(f,y){var E=y[0];return f[0]=y[3],f[1]=-y[1],f[2]=-y[2],f[3]=E,f},N.determinant=function(f){return f[0]*f[3]-f[2]*f[1]},N.multiply=h,N.rotate=function(f,y,E){var O=y[0],k=y[1],w=y[2],R=y[3],D=Math.sin(E),P=Math.cos(E);return f[0]=O*P+w*D,f[1]=k*P+R*D,f[2]=O*-D+w*P,f[3]=k*-D+R*P,f},N.scale=function(f,y,E){var O=y[1],k=y[2],w=y[3],R=E[0],D=E[1];return f[0]=y[0]*R,f[1]=O*R,f[2]=k*D,f[3]=w*D,f},N.fromRotation=function(f,y){var E=Math.sin(y),O=Math.cos(y);return f[0]=O,f[1]=E,f[2]=-E,f[3]=O,f},N.fromScaling=function(f,y){return f[0]=y[0],f[1]=0,f[2]=0,f[3]=y[1],f},N.str=function(f){return"mat2("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+")"},N.frob=function(f){return Math.hypot(f[0],f[1],f[2],f[3])},N.LDU=function(f,y,E,O){return f[2]=O[2]/O[0],E[0]=O[0],E[1]=O[1],E[3]=O[3]-f[2]*E[1],[f,y,E]},N.add=function(f,y,E){return f[0]=y[0]+E[0],f[1]=y[1]+E[1],f[2]=y[2]+E[2],f[3]=y[3]+E[3],f},N.subtract=v,N.exactEquals=function(f,y){return f[0]===y[0]&&f[1]===y[1]&&f[2]===y[2]&&f[3]===y[3]},N.equals=function(f,y){var E=f[0],O=f[1],k=f[2],w=f[3],R=y[0],D=y[1],P=y[2],A=y[3];return Math.abs(E-R)<=o.EPSILON*Math.max(1,Math.abs(E),Math.abs(R))&&Math.abs(O-D)<=o.EPSILON*Math.max(1,Math.abs(O),Math.abs(D))&&Math.abs(k-P)<=o.EPSILON*Math.max(1,Math.abs(k),Math.abs(P))&&Math.abs(w-A)<=o.EPSILON*Math.max(1,Math.abs(w),Math.abs(A))},N.multiplyScalar=function(f,y,E){return f[0]=y[0]*E,f[1]=y[1]*E,f[2]=y[2]*E,f[3]=y[3]*E,f},N.multiplyScalarAndAdd=function(f,y,E,O){return f[0]=y[0]+E[0]*O,f[1]=y[1]+E[1]*O,f[2]=y[2]+E[2]*O,f[3]=y[3]+E[3]*O,f},N.sub=N.mul=void 0;var o=function(f,y){if(f&&f.__esModule)return f;if(f===null||u(f)!=="object"&&typeof f!="function")return{default:f};var E=l(void 0);if(E&&E.has(f))return E.get(f);var O={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in f)if(w!=="default"&&Object.prototype.hasOwnProperty.call(f,w)){var R=k?Object.getOwnPropertyDescriptor(f,w):null;R&&(R.get||R.set)?Object.defineProperty(O,w,R):O[w]=f[w]}return O.default=f,E&&E.set(f,O),O}($());function l(f){if(typeof WeakMap!="function")return null;var y=new WeakMap,E=new WeakMap;return(l=function(O){return O?E:y})(f)}function h(f,y,E){var O=y[0],k=y[1],w=y[2],R=y[3],D=E[0],P=E[1],A=E[2],F=E[3];return f[0]=O*D+w*P,f[1]=k*D+R*P,f[2]=O*A+w*F,f[3]=k*A+R*F,f}function v(f,y,E){return f[0]=y[0]-E[0],f[1]=y[1]-E[1],f[2]=y[2]-E[2],f[3]=y[3]-E[3],f}return N.mul=h,N.sub=v,N}var B,j={};function H(){if(B)return j;function u(f){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},u(f)}B=1,Object.defineProperty(j,"__esModule",{value:!0}),j.create=function(){var f=new o.ARRAY_TYPE(6);return o.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0,f[4]=0,f[5]=0),f[0]=1,f[3]=1,f},j.clone=function(f){var y=new o.ARRAY_TYPE(6);return y[0]=f[0],y[1]=f[1],y[2]=f[2],y[3]=f[3],y[4]=f[4],y[5]=f[5],y},j.copy=function(f,y){return f[0]=y[0],f[1]=y[1],f[2]=y[2],f[3]=y[3],f[4]=y[4],f[5]=y[5],f},j.identity=function(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=1,f[4]=0,f[5]=0,f},j.fromValues=function(f,y,E,O,k,w){var R=new o.ARRAY_TYPE(6);return R[0]=f,R[1]=y,R[2]=E,R[3]=O,R[4]=k,R[5]=w,R},j.set=function(f,y,E,O,k,w,R){return f[0]=y,f[1]=E,f[2]=O,f[3]=k,f[4]=w,f[5]=R,f},j.invert=function(f,y){var E=y[0],O=y[1],k=y[2],w=y[3],R=y[4],D=y[5],P=E*w-O*k;return P?(f[0]=w*(P=1/P),f[1]=-O*P,f[2]=-k*P,f[3]=E*P,f[4]=(k*D-w*R)*P,f[5]=(O*R-E*D)*P,f):null},j.determinant=function(f){return f[0]*f[3]-f[1]*f[2]},j.multiply=h,j.rotate=function(f,y,E){var O=y[0],k=y[1],w=y[2],R=y[3],D=y[4],P=y[5],A=Math.sin(E),F=Math.cos(E);return f[0]=O*F+w*A,f[1]=k*F+R*A,f[2]=O*-A+w*F,f[3]=k*-A+R*F,f[4]=D,f[5]=P,f},j.scale=function(f,y,E){var O=y[1],k=y[2],w=y[3],R=y[4],D=y[5],P=E[0],A=E[1];return f[0]=y[0]*P,f[1]=O*P,f[2]=k*A,f[3]=w*A,f[4]=R,f[5]=D,f},j.translate=function(f,y,E){var O=y[0],k=y[1],w=y[2],R=y[3],D=y[4],P=y[5],A=E[0],F=E[1];return f[0]=O,f[1]=k,f[2]=w,f[3]=R,f[4]=O*A+w*F+D,f[5]=k*A+R*F+P,f},j.fromRotation=function(f,y){var E=Math.sin(y),O=Math.cos(y);return f[0]=O,f[1]=E,f[2]=-E,f[3]=O,f[4]=0,f[5]=0,f},j.fromScaling=function(f,y){return f[0]=y[0],f[1]=0,f[2]=0,f[3]=y[1],f[4]=0,f[5]=0,f},j.fromTranslation=function(f,y){return f[0]=1,f[1]=0,f[2]=0,f[3]=1,f[4]=y[0],f[5]=y[1],f},j.str=function(f){return"mat2d("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+")"},j.frob=function(f){return Math.hypot(f[0],f[1],f[2],f[3],f[4],f[5],1)},j.add=function(f,y,E){return f[0]=y[0]+E[0],f[1]=y[1]+E[1],f[2]=y[2]+E[2],f[3]=y[3]+E[3],f[4]=y[4]+E[4],f[5]=y[5]+E[5],f},j.subtract=v,j.multiplyScalar=function(f,y,E){return f[0]=y[0]*E,f[1]=y[1]*E,f[2]=y[2]*E,f[3]=y[3]*E,f[4]=y[4]*E,f[5]=y[5]*E,f},j.multiplyScalarAndAdd=function(f,y,E,O){return f[0]=y[0]+E[0]*O,f[1]=y[1]+E[1]*O,f[2]=y[2]+E[2]*O,f[3]=y[3]+E[3]*O,f[4]=y[4]+E[4]*O,f[5]=y[5]+E[5]*O,f},j.exactEquals=function(f,y){return f[0]===y[0]&&f[1]===y[1]&&f[2]===y[2]&&f[3]===y[3]&&f[4]===y[4]&&f[5]===y[5]},j.equals=function(f,y){var E=f[0],O=f[1],k=f[2],w=f[3],R=f[4],D=f[5],P=y[0],A=y[1],F=y[2],q=y[3],Z=y[4],ie=y[5];return Math.abs(E-P)<=o.EPSILON*Math.max(1,Math.abs(E),Math.abs(P))&&Math.abs(O-A)<=o.EPSILON*Math.max(1,Math.abs(O),Math.abs(A))&&Math.abs(k-F)<=o.EPSILON*Math.max(1,Math.abs(k),Math.abs(F))&&Math.abs(w-q)<=o.EPSILON*Math.max(1,Math.abs(w),Math.abs(q))&&Math.abs(R-Z)<=o.EPSILON*Math.max(1,Math.abs(R),Math.abs(Z))&&Math.abs(D-ie)<=o.EPSILON*Math.max(1,Math.abs(D),Math.abs(ie))},j.sub=j.mul=void 0;var o=function(f,y){if(f&&f.__esModule)return f;if(f===null||u(f)!=="object"&&typeof f!="function")return{default:f};var E=l(void 0);if(E&&E.has(f))return E.get(f);var O={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in f)if(w!=="default"&&Object.prototype.hasOwnProperty.call(f,w)){var R=k?Object.getOwnPropertyDescriptor(f,w):null;R&&(R.get||R.set)?Object.defineProperty(O,w,R):O[w]=f[w]}return O.default=f,E&&E.set(f,O),O}($());function l(f){if(typeof WeakMap!="function")return null;var y=new WeakMap,E=new WeakMap;return(l=function(O){return O?E:y})(f)}function h(f,y,E){var O=y[0],k=y[1],w=y[2],R=y[3],D=y[4],P=y[5],A=E[0],F=E[1],q=E[2],Z=E[3],ie=E[4],oe=E[5];return f[0]=O*A+w*F,f[1]=k*A+R*F,f[2]=O*q+w*Z,f[3]=k*q+R*Z,f[4]=O*ie+w*oe+D,f[5]=k*ie+R*oe+P,f}function v(f,y,E){return f[0]=y[0]-E[0],f[1]=y[1]-E[1],f[2]=y[2]-E[2],f[3]=y[3]-E[3],f[4]=y[4]-E[4],f[5]=y[5]-E[5],f}return j.mul=h,j.sub=v,j}var W,X={};function ee(){if(W)return X;function u(f){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},u(f)}W=1,Object.defineProperty(X,"__esModule",{value:!0}),X.create=function(){var f=new o.ARRAY_TYPE(9);return o.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f},X.fromMat4=function(f,y){return f[0]=y[0],f[1]=y[1],f[2]=y[2],f[3]=y[4],f[4]=y[5],f[5]=y[6],f[6]=y[8],f[7]=y[9],f[8]=y[10],f},X.clone=function(f){var y=new o.ARRAY_TYPE(9);return y[0]=f[0],y[1]=f[1],y[2]=f[2],y[3]=f[3],y[4]=f[4],y[5]=f[5],y[6]=f[6],y[7]=f[7],y[8]=f[8],y},X.copy=function(f,y){return f[0]=y[0],f[1]=y[1],f[2]=y[2],f[3]=y[3],f[4]=y[4],f[5]=y[5],f[6]=y[6],f[7]=y[7],f[8]=y[8],f},X.fromValues=function(f,y,E,O,k,w,R,D,P){var A=new o.ARRAY_TYPE(9);return A[0]=f,A[1]=y,A[2]=E,A[3]=O,A[4]=k,A[5]=w,A[6]=R,A[7]=D,A[8]=P,A},X.set=function(f,y,E,O,k,w,R,D,P,A){return f[0]=y,f[1]=E,f[2]=O,f[3]=k,f[4]=w,f[5]=R,f[6]=D,f[7]=P,f[8]=A,f},X.identity=function(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=1,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},X.transpose=function(f,y){if(f===y){var E=y[1],O=y[2],k=y[5];f[1]=y[3],f[2]=y[6],f[3]=E,f[5]=y[7],f[6]=O,f[7]=k}else f[0]=y[0],f[1]=y[3],f[2]=y[6],f[3]=y[1],f[4]=y[4],f[5]=y[7],f[6]=y[2],f[7]=y[5],f[8]=y[8];return f},X.invert=function(f,y){var E=y[0],O=y[1],k=y[2],w=y[3],R=y[4],D=y[5],P=y[6],A=y[7],F=y[8],q=F*R-D*A,Z=-F*w+D*P,ie=A*w-R*P,oe=E*q+O*Z+k*ie;return oe?(f[0]=q*(oe=1/oe),f[1]=(-F*O+k*A)*oe,f[2]=(D*O-k*R)*oe,f[3]=Z*oe,f[4]=(F*E-k*P)*oe,f[5]=(-D*E+k*w)*oe,f[6]=ie*oe,f[7]=(-A*E+O*P)*oe,f[8]=(R*E-O*w)*oe,f):null},X.adjoint=function(f,y){var E=y[0],O=y[1],k=y[2],w=y[3],R=y[4],D=y[5],P=y[6],A=y[7],F=y[8];return f[0]=R*F-D*A,f[1]=k*A-O*F,f[2]=O*D-k*R,f[3]=D*P-w*F,f[4]=E*F-k*P,f[5]=k*w-E*D,f[6]=w*A-R*P,f[7]=O*P-E*A,f[8]=E*R-O*w,f},X.determinant=function(f){var y=f[3],E=f[4],O=f[5],k=f[6],w=f[7],R=f[8];return f[0]*(R*E-O*w)+f[1]*(-R*y+O*k)+f[2]*(w*y-E*k)},X.multiply=h,X.translate=function(f,y,E){var O=y[0],k=y[1],w=y[2],R=y[3],D=y[4],P=y[5],A=y[6],F=y[7],q=y[8],Z=E[0],ie=E[1];return f[0]=O,f[1]=k,f[2]=w,f[3]=R,f[4]=D,f[5]=P,f[6]=Z*O+ie*R+A,f[7]=Z*k+ie*D+F,f[8]=Z*w+ie*P+q,f},X.rotate=function(f,y,E){var O=y[0],k=y[1],w=y[2],R=y[3],D=y[4],P=y[5],A=y[6],F=y[7],q=y[8],Z=Math.sin(E),ie=Math.cos(E);return f[0]=ie*O+Z*R,f[1]=ie*k+Z*D,f[2]=ie*w+Z*P,f[3]=ie*R-Z*O,f[4]=ie*D-Z*k,f[5]=ie*P-Z*w,f[6]=A,f[7]=F,f[8]=q,f},X.scale=function(f,y,E){var O=E[0],k=E[1];return f[0]=O*y[0],f[1]=O*y[1],f[2]=O*y[2],f[3]=k*y[3],f[4]=k*y[4],f[5]=k*y[5],f[6]=y[6],f[7]=y[7],f[8]=y[8],f},X.fromTranslation=function(f,y){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=1,f[5]=0,f[6]=y[0],f[7]=y[1],f[8]=1,f},X.fromRotation=function(f,y){var E=Math.sin(y),O=Math.cos(y);return f[0]=O,f[1]=E,f[2]=0,f[3]=-E,f[4]=O,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},X.fromScaling=function(f,y){return f[0]=y[0],f[1]=0,f[2]=0,f[3]=0,f[4]=y[1],f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},X.fromMat2d=function(f,y){return f[0]=y[0],f[1]=y[1],f[2]=0,f[3]=y[2],f[4]=y[3],f[5]=0,f[6]=y[4],f[7]=y[5],f[8]=1,f},X.fromQuat=function(f,y){var E=y[0],O=y[1],k=y[2],w=y[3],R=E+E,D=O+O,P=k+k,A=E*R,F=O*R,q=O*D,Z=k*R,ie=k*D,oe=k*P,te=w*R,ue=w*D,_e=w*P;return f[0]=1-q-oe,f[3]=F-_e,f[6]=Z+ue,f[1]=F+_e,f[4]=1-A-oe,f[7]=ie-te,f[2]=Z-ue,f[5]=ie+te,f[8]=1-A-q,f},X.normalFromMat4=function(f,y){var E=y[0],O=y[1],k=y[2],w=y[3],R=y[4],D=y[5],P=y[6],A=y[7],F=y[8],q=y[9],Z=y[10],ie=y[11],oe=y[12],te=y[13],ue=y[14],_e=y[15],Re=E*D-O*R,Ue=E*P-k*R,Le=E*A-w*R,Fe=O*P-k*D,tt=O*A-w*D,Ne=k*A-w*P,et=F*te-q*oe,lt=F*ue-Z*oe,ct=F*_e-ie*oe,xt=q*ue-Z*te,Pt=q*_e-ie*te,$t=Z*_e-ie*ue,Tt=Re*$t-Ue*Pt+Le*xt+Fe*ct-tt*lt+Ne*et;return Tt?(f[0]=(D*$t-P*Pt+A*xt)*(Tt=1/Tt),f[1]=(P*ct-R*$t-A*lt)*Tt,f[2]=(R*Pt-D*ct+A*et)*Tt,f[3]=(k*Pt-O*$t-w*xt)*Tt,f[4]=(E*$t-k*ct+w*lt)*Tt,f[5]=(O*ct-E*Pt-w*et)*Tt,f[6]=(te*Ne-ue*tt+_e*Fe)*Tt,f[7]=(ue*Le-oe*Ne-_e*Ue)*Tt,f[8]=(oe*tt-te*Le+_e*Re)*Tt,f):null},X.projection=function(f,y,E){return f[0]=2/y,f[1]=0,f[2]=0,f[3]=0,f[4]=-2/E,f[5]=0,f[6]=-1,f[7]=1,f[8]=1,f},X.str=function(f){return"mat3("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+", "+f[6]+", "+f[7]+", "+f[8]+")"},X.frob=function(f){return Math.hypot(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8])},X.add=function(f,y,E){return f[0]=y[0]+E[0],f[1]=y[1]+E[1],f[2]=y[2]+E[2],f[3]=y[3]+E[3],f[4]=y[4]+E[4],f[5]=y[5]+E[5],f[6]=y[6]+E[6],f[7]=y[7]+E[7],f[8]=y[8]+E[8],f},X.subtract=v,X.multiplyScalar=function(f,y,E){return f[0]=y[0]*E,f[1]=y[1]*E,f[2]=y[2]*E,f[3]=y[3]*E,f[4]=y[4]*E,f[5]=y[5]*E,f[6]=y[6]*E,f[7]=y[7]*E,f[8]=y[8]*E,f},X.multiplyScalarAndAdd=function(f,y,E,O){return f[0]=y[0]+E[0]*O,f[1]=y[1]+E[1]*O,f[2]=y[2]+E[2]*O,f[3]=y[3]+E[3]*O,f[4]=y[4]+E[4]*O,f[5]=y[5]+E[5]*O,f[6]=y[6]+E[6]*O,f[7]=y[7]+E[7]*O,f[8]=y[8]+E[8]*O,f},X.exactEquals=function(f,y){return f[0]===y[0]&&f[1]===y[1]&&f[2]===y[2]&&f[3]===y[3]&&f[4]===y[4]&&f[5]===y[5]&&f[6]===y[6]&&f[7]===y[7]&&f[8]===y[8]},X.equals=function(f,y){var E=f[0],O=f[1],k=f[2],w=f[3],R=f[4],D=f[5],P=f[6],A=f[7],F=f[8],q=y[0],Z=y[1],ie=y[2],oe=y[3],te=y[4],ue=y[5],_e=y[6],Re=y[7],Ue=y[8];return Math.abs(E-q)<=o.EPSILON*Math.max(1,Math.abs(E),Math.abs(q))&&Math.abs(O-Z)<=o.EPSILON*Math.max(1,Math.abs(O),Math.abs(Z))&&Math.abs(k-ie)<=o.EPSILON*Math.max(1,Math.abs(k),Math.abs(ie))&&Math.abs(w-oe)<=o.EPSILON*Math.max(1,Math.abs(w),Math.abs(oe))&&Math.abs(R-te)<=o.EPSILON*Math.max(1,Math.abs(R),Math.abs(te))&&Math.abs(D-ue)<=o.EPSILON*Math.max(1,Math.abs(D),Math.abs(ue))&&Math.abs(P-_e)<=o.EPSILON*Math.max(1,Math.abs(P),Math.abs(_e))&&Math.abs(A-Re)<=o.EPSILON*Math.max(1,Math.abs(A),Math.abs(Re))&&Math.abs(F-Ue)<=o.EPSILON*Math.max(1,Math.abs(F),Math.abs(Ue))},X.sub=X.mul=void 0;var o=function(f,y){if(f&&f.__esModule)return f;if(f===null||u(f)!=="object"&&typeof f!="function")return{default:f};var E=l(void 0);if(E&&E.has(f))return E.get(f);var O={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in f)if(w!=="default"&&Object.prototype.hasOwnProperty.call(f,w)){var R=k?Object.getOwnPropertyDescriptor(f,w):null;R&&(R.get||R.set)?Object.defineProperty(O,w,R):O[w]=f[w]}return O.default=f,E&&E.set(f,O),O}($());function l(f){if(typeof WeakMap!="function")return null;var y=new WeakMap,E=new WeakMap;return(l=function(O){return O?E:y})(f)}function h(f,y,E){var O=y[0],k=y[1],w=y[2],R=y[3],D=y[4],P=y[5],A=y[6],F=y[7],q=y[8],Z=E[0],ie=E[1],oe=E[2],te=E[3],ue=E[4],_e=E[5],Re=E[6],Ue=E[7],Le=E[8];return f[0]=Z*O+ie*R+oe*A,f[1]=Z*k+ie*D+oe*F,f[2]=Z*w+ie*P+oe*q,f[3]=te*O+ue*R+_e*A,f[4]=te*k+ue*D+_e*F,f[5]=te*w+ue*P+_e*q,f[6]=Re*O+Ue*R+Le*A,f[7]=Re*k+Ue*D+Le*F,f[8]=Re*w+Ue*P+Le*q,f}function v(f,y,E){return f[0]=y[0]-E[0],f[1]=y[1]-E[1],f[2]=y[2]-E[2],f[3]=y[3]-E[3],f[4]=y[4]-E[4],f[5]=y[5]-E[5],f[6]=y[6]-E[6],f[7]=y[7]-E[7],f[8]=y[8]-E[8],f}return X.mul=h,X.sub=v,X}var J,Y={};function re(){if(J)return Y;function u(w){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},u(w)}J=1,Object.defineProperty(Y,"__esModule",{value:!0}),Y.create=function(){var w=new o.ARRAY_TYPE(16);return o.ARRAY_TYPE!=Float32Array&&(w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[11]=0,w[12]=0,w[13]=0,w[14]=0),w[0]=1,w[5]=1,w[10]=1,w[15]=1,w},Y.clone=function(w){var R=new o.ARRAY_TYPE(16);return R[0]=w[0],R[1]=w[1],R[2]=w[2],R[3]=w[3],R[4]=w[4],R[5]=w[5],R[6]=w[6],R[7]=w[7],R[8]=w[8],R[9]=w[9],R[10]=w[10],R[11]=w[11],R[12]=w[12],R[13]=w[13],R[14]=w[14],R[15]=w[15],R},Y.copy=function(w,R){return w[0]=R[0],w[1]=R[1],w[2]=R[2],w[3]=R[3],w[4]=R[4],w[5]=R[5],w[6]=R[6],w[7]=R[7],w[8]=R[8],w[9]=R[9],w[10]=R[10],w[11]=R[11],w[12]=R[12],w[13]=R[13],w[14]=R[14],w[15]=R[15],w},Y.fromValues=function(w,R,D,P,A,F,q,Z,ie,oe,te,ue,_e,Re,Ue,Le){var Fe=new o.ARRAY_TYPE(16);return Fe[0]=w,Fe[1]=R,Fe[2]=D,Fe[3]=P,Fe[4]=A,Fe[5]=F,Fe[6]=q,Fe[7]=Z,Fe[8]=ie,Fe[9]=oe,Fe[10]=te,Fe[11]=ue,Fe[12]=_e,Fe[13]=Re,Fe[14]=Ue,Fe[15]=Le,Fe},Y.set=function(w,R,D,P,A,F,q,Z,ie,oe,te,ue,_e,Re,Ue,Le,Fe){return w[0]=R,w[1]=D,w[2]=P,w[3]=A,w[4]=F,w[5]=q,w[6]=Z,w[7]=ie,w[8]=oe,w[9]=te,w[10]=ue,w[11]=_e,w[12]=Re,w[13]=Ue,w[14]=Le,w[15]=Fe,w},Y.identity=h,Y.transpose=function(w,R){if(w===R){var D=R[1],P=R[2],A=R[3],F=R[6],q=R[7],Z=R[11];w[1]=R[4],w[2]=R[8],w[3]=R[12],w[4]=D,w[6]=R[9],w[7]=R[13],w[8]=P,w[9]=F,w[11]=R[14],w[12]=A,w[13]=q,w[14]=Z}else w[0]=R[0],w[1]=R[4],w[2]=R[8],w[3]=R[12],w[4]=R[1],w[5]=R[5],w[6]=R[9],w[7]=R[13],w[8]=R[2],w[9]=R[6],w[10]=R[10],w[11]=R[14],w[12]=R[3],w[13]=R[7],w[14]=R[11],w[15]=R[15];return w},Y.invert=function(w,R){var D=R[0],P=R[1],A=R[2],F=R[3],q=R[4],Z=R[5],ie=R[6],oe=R[7],te=R[8],ue=R[9],_e=R[10],Re=R[11],Ue=R[12],Le=R[13],Fe=R[14],tt=R[15],Ne=D*Z-P*q,et=D*ie-A*q,lt=D*oe-F*q,ct=P*ie-A*Z,xt=P*oe-F*Z,Pt=A*oe-F*ie,$t=te*Le-ue*Ue,Tt=te*Fe-_e*Ue,Ht=te*tt-Re*Ue,sn=ue*Fe-_e*Le,Bt=ue*tt-Re*Le,Nn=_e*tt-Re*Fe,En=Ne*Nn-et*Bt+lt*sn+ct*Ht-xt*Tt+Pt*$t;return En?(w[0]=(Z*Nn-ie*Bt+oe*sn)*(En=1/En),w[1]=(A*Bt-P*Nn-F*sn)*En,w[2]=(Le*Pt-Fe*xt+tt*ct)*En,w[3]=(_e*xt-ue*Pt-Re*ct)*En,w[4]=(ie*Ht-q*Nn-oe*Tt)*En,w[5]=(D*Nn-A*Ht+F*Tt)*En,w[6]=(Fe*lt-Ue*Pt-tt*et)*En,w[7]=(te*Pt-_e*lt+Re*et)*En,w[8]=(q*Bt-Z*Ht+oe*$t)*En,w[9]=(P*Ht-D*Bt-F*$t)*En,w[10]=(Ue*xt-Le*lt+tt*Ne)*En,w[11]=(ue*lt-te*xt-Re*Ne)*En,w[12]=(Z*Tt-q*sn-ie*$t)*En,w[13]=(D*sn-P*Tt+A*$t)*En,w[14]=(Le*et-Ue*ct-Fe*Ne)*En,w[15]=(te*ct-ue*et+_e*Ne)*En,w):null},Y.adjoint=function(w,R){var D=R[0],P=R[1],A=R[2],F=R[3],q=R[4],Z=R[5],ie=R[6],oe=R[7],te=R[8],ue=R[9],_e=R[10],Re=R[11],Ue=R[12],Le=R[13],Fe=R[14],tt=R[15];return w[0]=Z*(_e*tt-Re*Fe)-ue*(ie*tt-oe*Fe)+Le*(ie*Re-oe*_e),w[1]=-(P*(_e*tt-Re*Fe)-ue*(A*tt-F*Fe)+Le*(A*Re-F*_e)),w[2]=P*(ie*tt-oe*Fe)-Z*(A*tt-F*Fe)+Le*(A*oe-F*ie),w[3]=-(P*(ie*Re-oe*_e)-Z*(A*Re-F*_e)+ue*(A*oe-F*ie)),w[4]=-(q*(_e*tt-Re*Fe)-te*(ie*tt-oe*Fe)+Ue*(ie*Re-oe*_e)),w[5]=D*(_e*tt-Re*Fe)-te*(A*tt-F*Fe)+Ue*(A*Re-F*_e),w[6]=-(D*(ie*tt-oe*Fe)-q*(A*tt-F*Fe)+Ue*(A*oe-F*ie)),w[7]=D*(ie*Re-oe*_e)-q*(A*Re-F*_e)+te*(A*oe-F*ie),w[8]=q*(ue*tt-Re*Le)-te*(Z*tt-oe*Le)+Ue*(Z*Re-oe*ue),w[9]=-(D*(ue*tt-Re*Le)-te*(P*tt-F*Le)+Ue*(P*Re-F*ue)),w[10]=D*(Z*tt-oe*Le)-q*(P*tt-F*Le)+Ue*(P*oe-F*Z),w[11]=-(D*(Z*Re-oe*ue)-q*(P*Re-F*ue)+te*(P*oe-F*Z)),w[12]=-(q*(ue*Fe-_e*Le)-te*(Z*Fe-ie*Le)+Ue*(Z*_e-ie*ue)),w[13]=D*(ue*Fe-_e*Le)-te*(P*Fe-A*Le)+Ue*(P*_e-A*ue),w[14]=-(D*(Z*Fe-ie*Le)-q*(P*Fe-A*Le)+Ue*(P*ie-A*Z)),w[15]=D*(Z*_e-ie*ue)-q*(P*_e-A*ue)+te*(P*ie-A*Z),w},Y.determinant=function(w){var R=w[0],D=w[1],P=w[2],A=w[3],F=w[4],q=w[5],Z=w[6],ie=w[7],oe=w[8],te=w[9],ue=w[10],_e=w[11],Re=w[12],Ue=w[13],Le=w[14],Fe=w[15];return(R*q-D*F)*(ue*Fe-_e*Le)-(R*Z-P*F)*(te*Fe-_e*Ue)+(R*ie-A*F)*(te*Le-ue*Ue)+(D*Z-P*q)*(oe*Fe-_e*Re)-(D*ie-A*q)*(oe*Le-ue*Re)+(P*ie-A*Z)*(oe*Ue-te*Re)},Y.multiply=v,Y.translate=function(w,R,D){var P,A,F,q,Z,ie,oe,te,ue,_e,Re,Ue,Le=D[0],Fe=D[1],tt=D[2];return R===w?(w[12]=R[0]*Le+R[4]*Fe+R[8]*tt+R[12],w[13]=R[1]*Le+R[5]*Fe+R[9]*tt+R[13],w[14]=R[2]*Le+R[6]*Fe+R[10]*tt+R[14],w[15]=R[3]*Le+R[7]*Fe+R[11]*tt+R[15]):(A=R[1],F=R[2],q=R[3],Z=R[4],ie=R[5],oe=R[6],te=R[7],ue=R[8],_e=R[9],Re=R[10],Ue=R[11],w[0]=P=R[0],w[1]=A,w[2]=F,w[3]=q,w[4]=Z,w[5]=ie,w[6]=oe,w[7]=te,w[8]=ue,w[9]=_e,w[10]=Re,w[11]=Ue,w[12]=P*Le+Z*Fe+ue*tt+R[12],w[13]=A*Le+ie*Fe+_e*tt+R[13],w[14]=F*Le+oe*Fe+Re*tt+R[14],w[15]=q*Le+te*Fe+Ue*tt+R[15]),w},Y.scale=function(w,R,D){var P=D[0],A=D[1],F=D[2];return w[0]=R[0]*P,w[1]=R[1]*P,w[2]=R[2]*P,w[3]=R[3]*P,w[4]=R[4]*A,w[5]=R[5]*A,w[6]=R[6]*A,w[7]=R[7]*A,w[8]=R[8]*F,w[9]=R[9]*F,w[10]=R[10]*F,w[11]=R[11]*F,w[12]=R[12],w[13]=R[13],w[14]=R[14],w[15]=R[15],w},Y.rotate=function(w,R,D,P){var A,F,q,Z,ie,oe,te,ue,_e,Re,Ue,Le,Fe,tt,Ne,et,lt,ct,xt,Pt,$t,Tt,Ht,sn,Bt=P[0],Nn=P[1],En=P[2],pn=Math.hypot(Bt,Nn,En);return pn<o.EPSILON?null:(Bt*=pn=1/pn,Nn*=pn,En*=pn,A=Math.sin(D),F=Math.cos(D),ie=R[1],oe=R[2],te=R[3],_e=R[5],Re=R[6],Ue=R[7],Fe=R[9],tt=R[10],Ne=R[11],et=Bt*Bt*(q=1-F)+F,xt=Bt*Nn*q-En*A,Pt=Nn*Nn*q+F,$t=En*Nn*q+Bt*A,Tt=Bt*En*q+Nn*A,Ht=Nn*En*q-Bt*A,sn=En*En*q+F,w[0]=(Z=R[0])*et+(ue=R[4])*(lt=Nn*Bt*q+En*A)+(Le=R[8])*(ct=En*Bt*q-Nn*A),w[1]=ie*et+_e*lt+Fe*ct,w[2]=oe*et+Re*lt+tt*ct,w[3]=te*et+Ue*lt+Ne*ct,w[4]=Z*xt+ue*Pt+Le*$t,w[5]=ie*xt+_e*Pt+Fe*$t,w[6]=oe*xt+Re*Pt+tt*$t,w[7]=te*xt+Ue*Pt+Ne*$t,w[8]=Z*Tt+ue*Ht+Le*sn,w[9]=ie*Tt+_e*Ht+Fe*sn,w[10]=oe*Tt+Re*Ht+tt*sn,w[11]=te*Tt+Ue*Ht+Ne*sn,R!==w&&(w[12]=R[12],w[13]=R[13],w[14]=R[14],w[15]=R[15]),w)},Y.rotateX=function(w,R,D){var P=Math.sin(D),A=Math.cos(D),F=R[4],q=R[5],Z=R[6],ie=R[7],oe=R[8],te=R[9],ue=R[10],_e=R[11];return R!==w&&(w[0]=R[0],w[1]=R[1],w[2]=R[2],w[3]=R[3],w[12]=R[12],w[13]=R[13],w[14]=R[14],w[15]=R[15]),w[4]=F*A+oe*P,w[5]=q*A+te*P,w[6]=Z*A+ue*P,w[7]=ie*A+_e*P,w[8]=oe*A-F*P,w[9]=te*A-q*P,w[10]=ue*A-Z*P,w[11]=_e*A-ie*P,w},Y.rotateY=function(w,R,D){var P=Math.sin(D),A=Math.cos(D),F=R[0],q=R[1],Z=R[2],ie=R[3],oe=R[8],te=R[9],ue=R[10],_e=R[11];return R!==w&&(w[4]=R[4],w[5]=R[5],w[6]=R[6],w[7]=R[7],w[12]=R[12],w[13]=R[13],w[14]=R[14],w[15]=R[15]),w[0]=F*A-oe*P,w[1]=q*A-te*P,w[2]=Z*A-ue*P,w[3]=ie*A-_e*P,w[8]=F*P+oe*A,w[9]=q*P+te*A,w[10]=Z*P+ue*A,w[11]=ie*P+_e*A,w},Y.rotateZ=function(w,R,D){var P=Math.sin(D),A=Math.cos(D),F=R[0],q=R[1],Z=R[2],ie=R[3],oe=R[4],te=R[5],ue=R[6],_e=R[7];return R!==w&&(w[8]=R[8],w[9]=R[9],w[10]=R[10],w[11]=R[11],w[12]=R[12],w[13]=R[13],w[14]=R[14],w[15]=R[15]),w[0]=F*A+oe*P,w[1]=q*A+te*P,w[2]=Z*A+ue*P,w[3]=ie*A+_e*P,w[4]=oe*A-F*P,w[5]=te*A-q*P,w[6]=ue*A-Z*P,w[7]=_e*A-ie*P,w},Y.fromTranslation=function(w,R){return w[0]=1,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=1,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=1,w[11]=0,w[12]=R[0],w[13]=R[1],w[14]=R[2],w[15]=1,w},Y.fromScaling=function(w,R){return w[0]=R[0],w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=R[1],w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=R[2],w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w},Y.fromRotation=function(w,R,D){var P,A,F,q=D[0],Z=D[1],ie=D[2],oe=Math.hypot(q,Z,ie);return oe<o.EPSILON?null:(q*=oe=1/oe,Z*=oe,ie*=oe,P=Math.sin(R),A=Math.cos(R),w[0]=q*q*(F=1-A)+A,w[1]=Z*q*F+ie*P,w[2]=ie*q*F-Z*P,w[3]=0,w[4]=q*Z*F-ie*P,w[5]=Z*Z*F+A,w[6]=ie*Z*F+q*P,w[7]=0,w[8]=q*ie*F+Z*P,w[9]=Z*ie*F-q*P,w[10]=ie*ie*F+A,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w)},Y.fromXRotation=function(w,R){var D=Math.sin(R),P=Math.cos(R);return w[0]=1,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=P,w[6]=D,w[7]=0,w[8]=0,w[9]=-D,w[10]=P,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w},Y.fromYRotation=function(w,R){var D=Math.sin(R),P=Math.cos(R);return w[0]=P,w[1]=0,w[2]=-D,w[3]=0,w[4]=0,w[5]=1,w[6]=0,w[7]=0,w[8]=D,w[9]=0,w[10]=P,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w},Y.fromZRotation=function(w,R){var D=Math.sin(R),P=Math.cos(R);return w[0]=P,w[1]=D,w[2]=0,w[3]=0,w[4]=-D,w[5]=P,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=1,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w},Y.fromRotationTranslation=f,Y.fromQuat2=function(w,R){var D=new o.ARRAY_TYPE(3),P=-R[0],A=-R[1],F=-R[2],q=R[3],Z=R[4],ie=R[5],oe=R[6],te=R[7],ue=P*P+A*A+F*F+q*q;return ue>0?(D[0]=2*(Z*q+te*P+ie*F-oe*A)/ue,D[1]=2*(ie*q+te*A+oe*P-Z*F)/ue,D[2]=2*(oe*q+te*F+Z*A-ie*P)/ue):(D[0]=2*(Z*q+te*P+ie*F-oe*A),D[1]=2*(ie*q+te*A+oe*P-Z*F),D[2]=2*(oe*q+te*F+Z*A-ie*P)),f(w,R,D),w},Y.getTranslation=function(w,R){return w[0]=R[12],w[1]=R[13],w[2]=R[14],w},Y.getScaling=y,Y.getRotation=function(w,R){var D=new o.ARRAY_TYPE(3);y(D,R);var P=1/D[0],A=1/D[1],F=1/D[2],q=R[0]*P,Z=R[1]*A,ie=R[2]*F,oe=R[4]*P,te=R[5]*A,ue=R[6]*F,_e=R[8]*P,Re=R[9]*A,Ue=R[10]*F,Le=q+te+Ue,Fe=0;return Le>0?(Fe=2*Math.sqrt(Le+1),w[3]=.25*Fe,w[0]=(ue-Re)/Fe,w[1]=(_e-ie)/Fe,w[2]=(Z-oe)/Fe):q>te&&q>Ue?(Fe=2*Math.sqrt(1+q-te-Ue),w[3]=(ue-Re)/Fe,w[0]=.25*Fe,w[1]=(Z+oe)/Fe,w[2]=(_e+ie)/Fe):te>Ue?(Fe=2*Math.sqrt(1+te-q-Ue),w[3]=(_e-ie)/Fe,w[0]=(Z+oe)/Fe,w[1]=.25*Fe,w[2]=(ue+Re)/Fe):(Fe=2*Math.sqrt(1+Ue-q-te),w[3]=(Z-oe)/Fe,w[0]=(_e+ie)/Fe,w[1]=(ue+Re)/Fe,w[2]=.25*Fe),w},Y.fromRotationTranslationScale=function(w,R,D,P){var A=R[0],F=R[1],q=R[2],Z=R[3],ie=A+A,oe=F+F,te=q+q,ue=A*ie,_e=A*oe,Re=A*te,Ue=F*oe,Le=F*te,Fe=q*te,tt=Z*ie,Ne=Z*oe,et=Z*te,lt=P[0],ct=P[1],xt=P[2];return w[0]=(1-(Ue+Fe))*lt,w[1]=(_e+et)*lt,w[2]=(Re-Ne)*lt,w[3]=0,w[4]=(_e-et)*ct,w[5]=(1-(ue+Fe))*ct,w[6]=(Le+tt)*ct,w[7]=0,w[8]=(Re+Ne)*xt,w[9]=(Le-tt)*xt,w[10]=(1-(ue+Ue))*xt,w[11]=0,w[12]=D[0],w[13]=D[1],w[14]=D[2],w[15]=1,w},Y.fromRotationTranslationScaleOrigin=function(w,R,D,P,A){var F=R[0],q=R[1],Z=R[2],ie=R[3],oe=F+F,te=q+q,ue=Z+Z,_e=F*oe,Re=F*te,Ue=F*ue,Le=q*te,Fe=q*ue,tt=Z*ue,Ne=ie*oe,et=ie*te,lt=ie*ue,ct=P[0],xt=P[1],Pt=P[2],$t=A[0],Tt=A[1],Ht=A[2],sn=(1-(Le+tt))*ct,Bt=(Re+lt)*ct,Nn=(Ue-et)*ct,En=(Re-lt)*xt,pn=(1-(_e+tt))*xt,on=(Fe+Ne)*xt,er=(Ue+et)*Pt,Ln=(Fe-Ne)*Pt,Vn=(1-(_e+Le))*Pt;return w[0]=sn,w[1]=Bt,w[2]=Nn,w[3]=0,w[4]=En,w[5]=pn,w[6]=on,w[7]=0,w[8]=er,w[9]=Ln,w[10]=Vn,w[11]=0,w[12]=D[0]+$t-(sn*$t+En*Tt+er*Ht),w[13]=D[1]+Tt-(Bt*$t+pn*Tt+Ln*Ht),w[14]=D[2]+Ht-(Nn*$t+on*Tt+Vn*Ht),w[15]=1,w},Y.fromQuat=function(w,R){var D=R[0],P=R[1],A=R[2],F=R[3],q=D+D,Z=P+P,ie=A+A,oe=D*q,te=P*q,ue=P*Z,_e=A*q,Re=A*Z,Ue=A*ie,Le=F*q,Fe=F*Z,tt=F*ie;return w[0]=1-ue-Ue,w[1]=te+tt,w[2]=_e-Fe,w[3]=0,w[4]=te-tt,w[5]=1-oe-Ue,w[6]=Re+Le,w[7]=0,w[8]=_e+Fe,w[9]=Re-Le,w[10]=1-oe-ue,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w},Y.frustum=function(w,R,D,P,A,F,q){var Z=1/(D-R),ie=1/(A-P),oe=1/(F-q);return w[0]=2*F*Z,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=2*F*ie,w[6]=0,w[7]=0,w[8]=(D+R)*Z,w[9]=(A+P)*ie,w[10]=(q+F)*oe,w[11]=-1,w[12]=0,w[13]=0,w[14]=q*F*2*oe,w[15]=0,w},Y.perspectiveNO=E,Y.perspectiveZO=function(w,R,D,P,A){var F,q=1/Math.tan(R/2);return w[0]=q/D,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=q,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[11]=-1,w[12]=0,w[13]=0,w[15]=0,A!=null&&A!==1/0?(w[10]=A*(F=1/(P-A)),w[14]=A*P*F):(w[10]=-1,w[14]=-P),w},Y.perspectiveFromFieldOfView=function(w,R,D,P){var A=Math.tan(R.upDegrees*Math.PI/180),F=Math.tan(R.downDegrees*Math.PI/180),q=Math.tan(R.leftDegrees*Math.PI/180),Z=Math.tan(R.rightDegrees*Math.PI/180),ie=2/(q+Z),oe=2/(A+F);return w[0]=ie,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=oe,w[6]=0,w[7]=0,w[8]=-(q-Z)*ie*.5,w[9]=(A-F)*oe*.5,w[10]=P/(D-P),w[11]=-1,w[12]=0,w[13]=0,w[14]=P*D/(D-P),w[15]=0,w},Y.orthoNO=O,Y.orthoZO=function(w,R,D,P,A,F,q){var Z=1/(R-D),ie=1/(P-A),oe=1/(F-q);return w[0]=-2*Z,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=-2*ie,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=oe,w[11]=0,w[12]=(R+D)*Z,w[13]=(A+P)*ie,w[14]=F*oe,w[15]=1,w},Y.lookAt=function(w,R,D,P){var A,F,q,Z,ie,oe,te,ue,_e,Re,Ue=R[0],Le=R[1],Fe=R[2],tt=P[0],Ne=P[1],et=P[2],lt=D[0],ct=D[1],xt=D[2];return Math.abs(Ue-lt)<o.EPSILON&&Math.abs(Le-ct)<o.EPSILON&&Math.abs(Fe-xt)<o.EPSILON?h(w):(te=Ue-lt,ue=Le-ct,_e=Fe-xt,A=Ne*(_e*=Re=1/Math.hypot(te,ue,_e))-et*(ue*=Re),F=et*(te*=Re)-tt*_e,q=tt*ue-Ne*te,(Re=Math.hypot(A,F,q))?(A*=Re=1/Re,F*=Re,q*=Re):(A=0,F=0,q=0),Z=ue*q-_e*F,ie=_e*A-te*q,oe=te*F-ue*A,(Re=Math.hypot(Z,ie,oe))?(Z*=Re=1/Re,ie*=Re,oe*=Re):(Z=0,ie=0,oe=0),w[0]=A,w[1]=Z,w[2]=te,w[3]=0,w[4]=F,w[5]=ie,w[6]=ue,w[7]=0,w[8]=q,w[9]=oe,w[10]=_e,w[11]=0,w[12]=-(A*Ue+F*Le+q*Fe),w[13]=-(Z*Ue+ie*Le+oe*Fe),w[14]=-(te*Ue+ue*Le+_e*Fe),w[15]=1,w)},Y.targetTo=function(w,R,D,P){var A=R[0],F=R[1],q=R[2],Z=P[0],ie=P[1],oe=P[2],te=A-D[0],ue=F-D[1],_e=q-D[2],Re=te*te+ue*ue+_e*_e;Re>0&&(te*=Re=1/Math.sqrt(Re),ue*=Re,_e*=Re);var Ue=ie*_e-oe*ue,Le=oe*te-Z*_e,Fe=Z*ue-ie*te;return(Re=Ue*Ue+Le*Le+Fe*Fe)>0&&(Ue*=Re=1/Math.sqrt(Re),Le*=Re,Fe*=Re),w[0]=Ue,w[1]=Le,w[2]=Fe,w[3]=0,w[4]=ue*Fe-_e*Le,w[5]=_e*Ue-te*Fe,w[6]=te*Le-ue*Ue,w[7]=0,w[8]=te,w[9]=ue,w[10]=_e,w[11]=0,w[12]=A,w[13]=F,w[14]=q,w[15]=1,w},Y.str=function(w){return"mat4("+w[0]+", "+w[1]+", "+w[2]+", "+w[3]+", "+w[4]+", "+w[5]+", "+w[6]+", "+w[7]+", "+w[8]+", "+w[9]+", "+w[10]+", "+w[11]+", "+w[12]+", "+w[13]+", "+w[14]+", "+w[15]+")"},Y.frob=function(w){return Math.hypot(w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7],w[8],w[9],w[10],w[11],w[12],w[13],w[14],w[15])},Y.add=function(w,R,D){return w[0]=R[0]+D[0],w[1]=R[1]+D[1],w[2]=R[2]+D[2],w[3]=R[3]+D[3],w[4]=R[4]+D[4],w[5]=R[5]+D[5],w[6]=R[6]+D[6],w[7]=R[7]+D[7],w[8]=R[8]+D[8],w[9]=R[9]+D[9],w[10]=R[10]+D[10],w[11]=R[11]+D[11],w[12]=R[12]+D[12],w[13]=R[13]+D[13],w[14]=R[14]+D[14],w[15]=R[15]+D[15],w},Y.subtract=k,Y.multiplyScalar=function(w,R,D){return w[0]=R[0]*D,w[1]=R[1]*D,w[2]=R[2]*D,w[3]=R[3]*D,w[4]=R[4]*D,w[5]=R[5]*D,w[6]=R[6]*D,w[7]=R[7]*D,w[8]=R[8]*D,w[9]=R[9]*D,w[10]=R[10]*D,w[11]=R[11]*D,w[12]=R[12]*D,w[13]=R[13]*D,w[14]=R[14]*D,w[15]=R[15]*D,w},Y.multiplyScalarAndAdd=function(w,R,D,P){return w[0]=R[0]+D[0]*P,w[1]=R[1]+D[1]*P,w[2]=R[2]+D[2]*P,w[3]=R[3]+D[3]*P,w[4]=R[4]+D[4]*P,w[5]=R[5]+D[5]*P,w[6]=R[6]+D[6]*P,w[7]=R[7]+D[7]*P,w[8]=R[8]+D[8]*P,w[9]=R[9]+D[9]*P,w[10]=R[10]+D[10]*P,w[11]=R[11]+D[11]*P,w[12]=R[12]+D[12]*P,w[13]=R[13]+D[13]*P,w[14]=R[14]+D[14]*P,w[15]=R[15]+D[15]*P,w},Y.exactEquals=function(w,R){return w[0]===R[0]&&w[1]===R[1]&&w[2]===R[2]&&w[3]===R[3]&&w[4]===R[4]&&w[5]===R[5]&&w[6]===R[6]&&w[7]===R[7]&&w[8]===R[8]&&w[9]===R[9]&&w[10]===R[10]&&w[11]===R[11]&&w[12]===R[12]&&w[13]===R[13]&&w[14]===R[14]&&w[15]===R[15]},Y.equals=function(w,R){var D=w[0],P=w[1],A=w[2],F=w[3],q=w[4],Z=w[5],ie=w[6],oe=w[7],te=w[8],ue=w[9],_e=w[10],Re=w[11],Ue=w[12],Le=w[13],Fe=w[14],tt=w[15],Ne=R[0],et=R[1],lt=R[2],ct=R[3],xt=R[4],Pt=R[5],$t=R[6],Tt=R[7],Ht=R[8],sn=R[9],Bt=R[10],Nn=R[11],En=R[12],pn=R[13],on=R[14],er=R[15];return Math.abs(D-Ne)<=o.EPSILON*Math.max(1,Math.abs(D),Math.abs(Ne))&&Math.abs(P-et)<=o.EPSILON*Math.max(1,Math.abs(P),Math.abs(et))&&Math.abs(A-lt)<=o.EPSILON*Math.max(1,Math.abs(A),Math.abs(lt))&&Math.abs(F-ct)<=o.EPSILON*Math.max(1,Math.abs(F),Math.abs(ct))&&Math.abs(q-xt)<=o.EPSILON*Math.max(1,Math.abs(q),Math.abs(xt))&&Math.abs(Z-Pt)<=o.EPSILON*Math.max(1,Math.abs(Z),Math.abs(Pt))&&Math.abs(ie-$t)<=o.EPSILON*Math.max(1,Math.abs(ie),Math.abs($t))&&Math.abs(oe-Tt)<=o.EPSILON*Math.max(1,Math.abs(oe),Math.abs(Tt))&&Math.abs(te-Ht)<=o.EPSILON*Math.max(1,Math.abs(te),Math.abs(Ht))&&Math.abs(ue-sn)<=o.EPSILON*Math.max(1,Math.abs(ue),Math.abs(sn))&&Math.abs(_e-Bt)<=o.EPSILON*Math.max(1,Math.abs(_e),Math.abs(Bt))&&Math.abs(Re-Nn)<=o.EPSILON*Math.max(1,Math.abs(Re),Math.abs(Nn))&&Math.abs(Ue-En)<=o.EPSILON*Math.max(1,Math.abs(Ue),Math.abs(En))&&Math.abs(Le-pn)<=o.EPSILON*Math.max(1,Math.abs(Le),Math.abs(pn))&&Math.abs(Fe-on)<=o.EPSILON*Math.max(1,Math.abs(Fe),Math.abs(on))&&Math.abs(tt-er)<=o.EPSILON*Math.max(1,Math.abs(tt),Math.abs(er))},Y.sub=Y.mul=Y.ortho=Y.perspective=void 0;var o=function(w,R){if(w&&w.__esModule)return w;if(w===null||u(w)!=="object"&&typeof w!="function")return{default:w};var D=l(void 0);if(D&&D.has(w))return D.get(w);var P={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var F in w)if(F!=="default"&&Object.prototype.hasOwnProperty.call(w,F)){var q=A?Object.getOwnPropertyDescriptor(w,F):null;q&&(q.get||q.set)?Object.defineProperty(P,F,q):P[F]=w[F]}return P.default=w,D&&D.set(w,P),P}($());function l(w){if(typeof WeakMap!="function")return null;var R=new WeakMap,D=new WeakMap;return(l=function(P){return P?D:R})(w)}function h(w){return w[0]=1,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=1,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=1,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w}function v(w,R,D){var P=R[0],A=R[1],F=R[2],q=R[3],Z=R[4],ie=R[5],oe=R[6],te=R[7],ue=R[8],_e=R[9],Re=R[10],Ue=R[11],Le=R[12],Fe=R[13],tt=R[14],Ne=R[15],et=D[0],lt=D[1],ct=D[2],xt=D[3];return w[0]=et*P+lt*Z+ct*ue+xt*Le,w[1]=et*A+lt*ie+ct*_e+xt*Fe,w[2]=et*F+lt*oe+ct*Re+xt*tt,w[3]=et*q+lt*te+ct*Ue+xt*Ne,w[4]=(et=D[4])*P+(lt=D[5])*Z+(ct=D[6])*ue+(xt=D[7])*Le,w[5]=et*A+lt*ie+ct*_e+xt*Fe,w[6]=et*F+lt*oe+ct*Re+xt*tt,w[7]=et*q+lt*te+ct*Ue+xt*Ne,w[8]=(et=D[8])*P+(lt=D[9])*Z+(ct=D[10])*ue+(xt=D[11])*Le,w[9]=et*A+lt*ie+ct*_e+xt*Fe,w[10]=et*F+lt*oe+ct*Re+xt*tt,w[11]=et*q+lt*te+ct*Ue+xt*Ne,w[12]=(et=D[12])*P+(lt=D[13])*Z+(ct=D[14])*ue+(xt=D[15])*Le,w[13]=et*A+lt*ie+ct*_e+xt*Fe,w[14]=et*F+lt*oe+ct*Re+xt*tt,w[15]=et*q+lt*te+ct*Ue+xt*Ne,w}function f(w,R,D){var P=R[0],A=R[1],F=R[2],q=R[3],Z=P+P,ie=A+A,oe=F+F,te=P*Z,ue=P*ie,_e=P*oe,Re=A*ie,Ue=A*oe,Le=F*oe,Fe=q*Z,tt=q*ie,Ne=q*oe;return w[0]=1-(Re+Le),w[1]=ue+Ne,w[2]=_e-tt,w[3]=0,w[4]=ue-Ne,w[5]=1-(te+Le),w[6]=Ue+Fe,w[7]=0,w[8]=_e+tt,w[9]=Ue-Fe,w[10]=1-(te+Re),w[11]=0,w[12]=D[0],w[13]=D[1],w[14]=D[2],w[15]=1,w}function y(w,R){var D=R[4],P=R[5],A=R[6],F=R[8],q=R[9],Z=R[10];return w[0]=Math.hypot(R[0],R[1],R[2]),w[1]=Math.hypot(D,P,A),w[2]=Math.hypot(F,q,Z),w}function E(w,R,D,P,A){var F,q=1/Math.tan(R/2);return w[0]=q/D,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=q,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[11]=-1,w[12]=0,w[13]=0,w[15]=0,A!=null&&A!==1/0?(w[10]=(A+P)*(F=1/(P-A)),w[14]=2*A*P*F):(w[10]=-1,w[14]=-2*P),w}function O(w,R,D,P,A,F,q){var Z=1/(R-D),ie=1/(P-A),oe=1/(F-q);return w[0]=-2*Z,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=-2*ie,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=2*oe,w[11]=0,w[12]=(R+D)*Z,w[13]=(A+P)*ie,w[14]=(q+F)*oe,w[15]=1,w}function k(w,R,D){return w[0]=R[0]-D[0],w[1]=R[1]-D[1],w[2]=R[2]-D[2],w[3]=R[3]-D[3],w[4]=R[4]-D[4],w[5]=R[5]-D[5],w[6]=R[6]-D[6],w[7]=R[7]-D[7],w[8]=R[8]-D[8],w[9]=R[9]-D[9],w[10]=R[10]-D[10],w[11]=R[11]-D[11],w[12]=R[12]-D[12],w[13]=R[13]-D[13],w[14]=R[14]-D[14],w[15]=R[15]-D[15],w}return Y.perspective=E,Y.ortho=O,Y.mul=v,Y.sub=k,Y}var se,ae={},ce={};function Ce(){if(se)return ce;function u(A){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},u(A)}se=1,Object.defineProperty(ce,"__esModule",{value:!0}),ce.create=h,ce.clone=function(A){var F=new o.ARRAY_TYPE(3);return F[0]=A[0],F[1]=A[1],F[2]=A[2],F},ce.length=v,ce.fromValues=function(A,F,q){var Z=new o.ARRAY_TYPE(3);return Z[0]=A,Z[1]=F,Z[2]=q,Z},ce.copy=function(A,F){return A[0]=F[0],A[1]=F[1],A[2]=F[2],A},ce.set=function(A,F,q,Z){return A[0]=F,A[1]=q,A[2]=Z,A},ce.add=function(A,F,q){return A[0]=F[0]+q[0],A[1]=F[1]+q[1],A[2]=F[2]+q[2],A},ce.subtract=f,ce.multiply=y,ce.divide=E,ce.ceil=function(A,F){return A[0]=Math.ceil(F[0]),A[1]=Math.ceil(F[1]),A[2]=Math.ceil(F[2]),A},ce.floor=function(A,F){return A[0]=Math.floor(F[0]),A[1]=Math.floor(F[1]),A[2]=Math.floor(F[2]),A},ce.min=function(A,F,q){return A[0]=Math.min(F[0],q[0]),A[1]=Math.min(F[1],q[1]),A[2]=Math.min(F[2],q[2]),A},ce.max=function(A,F,q){return A[0]=Math.max(F[0],q[0]),A[1]=Math.max(F[1],q[1]),A[2]=Math.max(F[2],q[2]),A},ce.round=function(A,F){return A[0]=Math.round(F[0]),A[1]=Math.round(F[1]),A[2]=Math.round(F[2]),A},ce.scale=function(A,F,q){return A[0]=F[0]*q,A[1]=F[1]*q,A[2]=F[2]*q,A},ce.scaleAndAdd=function(A,F,q,Z){return A[0]=F[0]+q[0]*Z,A[1]=F[1]+q[1]*Z,A[2]=F[2]+q[2]*Z,A},ce.distance=O,ce.squaredDistance=k,ce.squaredLength=w,ce.negate=function(A,F){return A[0]=-F[0],A[1]=-F[1],A[2]=-F[2],A},ce.inverse=function(A,F){return A[0]=1/F[0],A[1]=1/F[1],A[2]=1/F[2],A},ce.normalize=function(A,F){var q=F[0],Z=F[1],ie=F[2],oe=q*q+Z*Z+ie*ie;return oe>0&&(oe=1/Math.sqrt(oe)),A[0]=F[0]*oe,A[1]=F[1]*oe,A[2]=F[2]*oe,A},ce.dot=R,ce.cross=function(A,F,q){var Z=F[0],ie=F[1],oe=F[2],te=q[0],ue=q[1],_e=q[2];return A[0]=ie*_e-oe*ue,A[1]=oe*te-Z*_e,A[2]=Z*ue-ie*te,A},ce.lerp=function(A,F,q,Z){var ie=F[0],oe=F[1],te=F[2];return A[0]=ie+Z*(q[0]-ie),A[1]=oe+Z*(q[1]-oe),A[2]=te+Z*(q[2]-te),A},ce.hermite=function(A,F,q,Z,ie,oe){var te=oe*oe,ue=te*(2*oe-3)+1,_e=te*(oe-2)+oe,Re=te*(oe-1),Ue=te*(3-2*oe);return A[0]=F[0]*ue+q[0]*_e+Z[0]*Re+ie[0]*Ue,A[1]=F[1]*ue+q[1]*_e+Z[1]*Re+ie[1]*Ue,A[2]=F[2]*ue+q[2]*_e+Z[2]*Re+ie[2]*Ue,A},ce.bezier=function(A,F,q,Z,ie,oe){var te=1-oe,ue=te*te,_e=oe*oe,Re=ue*te,Ue=3*oe*ue,Le=3*_e*te,Fe=_e*oe;return A[0]=F[0]*Re+q[0]*Ue+Z[0]*Le+ie[0]*Fe,A[1]=F[1]*Re+q[1]*Ue+Z[1]*Le+ie[1]*Fe,A[2]=F[2]*Re+q[2]*Ue+Z[2]*Le+ie[2]*Fe,A},ce.random=function(A,F){F=F||1;var q=2*o.RANDOM()*Math.PI,Z=2*o.RANDOM()-1,ie=Math.sqrt(1-Z*Z)*F;return A[0]=Math.cos(q)*ie,A[1]=Math.sin(q)*ie,A[2]=Z*F,A},ce.transformMat4=function(A,F,q){var Z=F[0],ie=F[1],oe=F[2],te=q[3]*Z+q[7]*ie+q[11]*oe+q[15];return A[0]=(q[0]*Z+q[4]*ie+q[8]*oe+q[12])/(te=te||1),A[1]=(q[1]*Z+q[5]*ie+q[9]*oe+q[13])/te,A[2]=(q[2]*Z+q[6]*ie+q[10]*oe+q[14])/te,A},ce.transformMat3=function(A,F,q){var Z=F[0],ie=F[1],oe=F[2];return A[0]=Z*q[0]+ie*q[3]+oe*q[6],A[1]=Z*q[1]+ie*q[4]+oe*q[7],A[2]=Z*q[2]+ie*q[5]+oe*q[8],A},ce.transformQuat=function(A,F,q){var Z=q[0],ie=q[1],oe=q[2],te=F[0],ue=F[1],_e=F[2],Re=ie*_e-oe*ue,Ue=oe*te-Z*_e,Le=Z*ue-ie*te,Fe=ie*Le-oe*Ue,tt=oe*Re-Z*Le,Ne=Z*Ue-ie*Re,et=2*q[3];return Ue*=et,Le*=et,tt*=2,Ne*=2,A[0]=te+(Re*=et)+(Fe*=2),A[1]=ue+Ue+tt,A[2]=_e+Le+Ne,A},ce.rotateX=function(A,F,q,Z){var ie=[],oe=[];return ie[0]=F[0]-q[0],ie[1]=F[1]-q[1],ie[2]=F[2]-q[2],oe[0]=ie[0],oe[1]=ie[1]*Math.cos(Z)-ie[2]*Math.sin(Z),oe[2]=ie[1]*Math.sin(Z)+ie[2]*Math.cos(Z),A[0]=oe[0]+q[0],A[1]=oe[1]+q[1],A[2]=oe[2]+q[2],A},ce.rotateY=function(A,F,q,Z){var ie=[],oe=[];return ie[0]=F[0]-q[0],ie[1]=F[1]-q[1],ie[2]=F[2]-q[2],oe[0]=ie[2]*Math.sin(Z)+ie[0]*Math.cos(Z),oe[1]=ie[1],oe[2]=ie[2]*Math.cos(Z)-ie[0]*Math.sin(Z),A[0]=oe[0]+q[0],A[1]=oe[1]+q[1],A[2]=oe[2]+q[2],A},ce.rotateZ=function(A,F,q,Z){var ie=[],oe=[];return ie[0]=F[0]-q[0],ie[1]=F[1]-q[1],ie[2]=F[2]-q[2],oe[0]=ie[0]*Math.cos(Z)-ie[1]*Math.sin(Z),oe[1]=ie[0]*Math.sin(Z)+ie[1]*Math.cos(Z),oe[2]=ie[2],A[0]=oe[0]+q[0],A[1]=oe[1]+q[1],A[2]=oe[2]+q[2],A},ce.angle=function(A,F){var q=A[0],Z=A[1],ie=A[2],oe=F[0],te=F[1],ue=F[2],_e=Math.sqrt(q*q+Z*Z+ie*ie)*Math.sqrt(oe*oe+te*te+ue*ue),Re=_e&&R(A,F)/_e;return Math.acos(Math.min(Math.max(Re,-1),1))},ce.zero=function(A){return A[0]=0,A[1]=0,A[2]=0,A},ce.str=function(A){return"vec3("+A[0]+", "+A[1]+", "+A[2]+")"},ce.exactEquals=function(A,F){return A[0]===F[0]&&A[1]===F[1]&&A[2]===F[2]},ce.equals=function(A,F){var q=A[0],Z=A[1],ie=A[2],oe=F[0],te=F[1],ue=F[2];return Math.abs(q-oe)<=o.EPSILON*Math.max(1,Math.abs(q),Math.abs(oe))&&Math.abs(Z-te)<=o.EPSILON*Math.max(1,Math.abs(Z),Math.abs(te))&&Math.abs(ie-ue)<=o.EPSILON*Math.max(1,Math.abs(ie),Math.abs(ue))},ce.forEach=ce.sqrLen=ce.len=ce.sqrDist=ce.dist=ce.div=ce.mul=ce.sub=void 0;var o=function(A,F){if(A&&A.__esModule)return A;if(A===null||u(A)!=="object"&&typeof A!="function")return{default:A};var q=l(void 0);if(q&&q.has(A))return q.get(A);var Z={},ie=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var oe in A)if(oe!=="default"&&Object.prototype.hasOwnProperty.call(A,oe)){var te=ie?Object.getOwnPropertyDescriptor(A,oe):null;te&&(te.get||te.set)?Object.defineProperty(Z,oe,te):Z[oe]=A[oe]}return Z.default=A,q&&q.set(A,Z),Z}($());function l(A){if(typeof WeakMap!="function")return null;var F=new WeakMap,q=new WeakMap;return(l=function(Z){return Z?q:F})(A)}function h(){var A=new o.ARRAY_TYPE(3);return o.ARRAY_TYPE!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0),A}function v(A){return Math.hypot(A[0],A[1],A[2])}function f(A,F,q){return A[0]=F[0]-q[0],A[1]=F[1]-q[1],A[2]=F[2]-q[2],A}function y(A,F,q){return A[0]=F[0]*q[0],A[1]=F[1]*q[1],A[2]=F[2]*q[2],A}function E(A,F,q){return A[0]=F[0]/q[0],A[1]=F[1]/q[1],A[2]=F[2]/q[2],A}function O(A,F){return Math.hypot(F[0]-A[0],F[1]-A[1],F[2]-A[2])}function k(A,F){var q=F[0]-A[0],Z=F[1]-A[1],ie=F[2]-A[2];return q*q+Z*Z+ie*ie}function w(A){var F=A[0],q=A[1],Z=A[2];return F*F+q*q+Z*Z}function R(A,F){return A[0]*F[0]+A[1]*F[1]+A[2]*F[2]}ce.sub=f,ce.mul=y,ce.div=E,ce.dist=O,ce.sqrDist=k,ce.len=v,ce.sqrLen=w;var D,P=(D=h(),function(A,F,q,Z,ie,oe){var te,ue;for(F||(F=3),q||(q=0),ue=Z?Math.min(Z*F+q,A.length):A.length,te=q;te<ue;te+=F)D[0]=A[te],D[1]=A[te+1],D[2]=A[te+2],ie(D,D,oe),A[te]=D[0],A[te+1]=D[1],A[te+2]=D[2];return A});return ce.forEach=P,ce}var we,ge,ve={};function de(){if(we)return ve;function u(P){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},u(P)}we=1,Object.defineProperty(ve,"__esModule",{value:!0}),ve.create=h,ve.clone=function(P){var A=new o.ARRAY_TYPE(4);return A[0]=P[0],A[1]=P[1],A[2]=P[2],A[3]=P[3],A},ve.fromValues=function(P,A,F,q){var Z=new o.ARRAY_TYPE(4);return Z[0]=P,Z[1]=A,Z[2]=F,Z[3]=q,Z},ve.copy=function(P,A){return P[0]=A[0],P[1]=A[1],P[2]=A[2],P[3]=A[3],P},ve.set=function(P,A,F,q,Z){return P[0]=A,P[1]=F,P[2]=q,P[3]=Z,P},ve.add=function(P,A,F){return P[0]=A[0]+F[0],P[1]=A[1]+F[1],P[2]=A[2]+F[2],P[3]=A[3]+F[3],P},ve.subtract=v,ve.multiply=f,ve.divide=y,ve.ceil=function(P,A){return P[0]=Math.ceil(A[0]),P[1]=Math.ceil(A[1]),P[2]=Math.ceil(A[2]),P[3]=Math.ceil(A[3]),P},ve.floor=function(P,A){return P[0]=Math.floor(A[0]),P[1]=Math.floor(A[1]),P[2]=Math.floor(A[2]),P[3]=Math.floor(A[3]),P},ve.min=function(P,A,F){return P[0]=Math.min(A[0],F[0]),P[1]=Math.min(A[1],F[1]),P[2]=Math.min(A[2],F[2]),P[3]=Math.min(A[3],F[3]),P},ve.max=function(P,A,F){return P[0]=Math.max(A[0],F[0]),P[1]=Math.max(A[1],F[1]),P[2]=Math.max(A[2],F[2]),P[3]=Math.max(A[3],F[3]),P},ve.round=function(P,A){return P[0]=Math.round(A[0]),P[1]=Math.round(A[1]),P[2]=Math.round(A[2]),P[3]=Math.round(A[3]),P},ve.scale=function(P,A,F){return P[0]=A[0]*F,P[1]=A[1]*F,P[2]=A[2]*F,P[3]=A[3]*F,P},ve.scaleAndAdd=function(P,A,F,q){return P[0]=A[0]+F[0]*q,P[1]=A[1]+F[1]*q,P[2]=A[2]+F[2]*q,P[3]=A[3]+F[3]*q,P},ve.distance=E,ve.squaredDistance=O,ve.length=k,ve.squaredLength=w,ve.negate=function(P,A){return P[0]=-A[0],P[1]=-A[1],P[2]=-A[2],P[3]=-A[3],P},ve.inverse=function(P,A){return P[0]=1/A[0],P[1]=1/A[1],P[2]=1/A[2],P[3]=1/A[3],P},ve.normalize=function(P,A){var F=A[0],q=A[1],Z=A[2],ie=A[3],oe=F*F+q*q+Z*Z+ie*ie;return oe>0&&(oe=1/Math.sqrt(oe)),P[0]=F*oe,P[1]=q*oe,P[2]=Z*oe,P[3]=ie*oe,P},ve.dot=function(P,A){return P[0]*A[0]+P[1]*A[1]+P[2]*A[2]+P[3]*A[3]},ve.cross=function(P,A,F,q){var Z=F[0]*q[1]-F[1]*q[0],ie=F[0]*q[2]-F[2]*q[0],oe=F[0]*q[3]-F[3]*q[0],te=F[1]*q[2]-F[2]*q[1],ue=F[1]*q[3]-F[3]*q[1],_e=F[2]*q[3]-F[3]*q[2],Re=A[0],Ue=A[1],Le=A[2],Fe=A[3];return P[0]=Ue*_e-Le*ue+Fe*te,P[1]=-Re*_e+Le*oe-Fe*ie,P[2]=Re*ue-Ue*oe+Fe*Z,P[3]=-Re*te+Ue*ie-Le*Z,P},ve.lerp=function(P,A,F,q){var Z=A[0],ie=A[1],oe=A[2],te=A[3];return P[0]=Z+q*(F[0]-Z),P[1]=ie+q*(F[1]-ie),P[2]=oe+q*(F[2]-oe),P[3]=te+q*(F[3]-te),P},ve.random=function(P,A){var F,q,Z,ie,oe,te;A=A||1;do oe=(F=2*o.RANDOM()-1)*F+(q=2*o.RANDOM()-1)*q;while(oe>=1);do te=(Z=2*o.RANDOM()-1)*Z+(ie=2*o.RANDOM()-1)*ie;while(te>=1);var ue=Math.sqrt((1-oe)/te);return P[0]=A*F,P[1]=A*q,P[2]=A*Z*ue,P[3]=A*ie*ue,P},ve.transformMat4=function(P,A,F){var q=A[0],Z=A[1],ie=A[2],oe=A[3];return P[0]=F[0]*q+F[4]*Z+F[8]*ie+F[12]*oe,P[1]=F[1]*q+F[5]*Z+F[9]*ie+F[13]*oe,P[2]=F[2]*q+F[6]*Z+F[10]*ie+F[14]*oe,P[3]=F[3]*q+F[7]*Z+F[11]*ie+F[15]*oe,P},ve.transformQuat=function(P,A,F){var q=A[0],Z=A[1],ie=A[2],oe=F[0],te=F[1],ue=F[2],_e=F[3],Re=_e*q+te*ie-ue*Z,Ue=_e*Z+ue*q-oe*ie,Le=_e*ie+oe*Z-te*q,Fe=-oe*q-te*Z-ue*ie;return P[0]=Re*_e+Fe*-oe+Ue*-ue-Le*-te,P[1]=Ue*_e+Fe*-te+Le*-oe-Re*-ue,P[2]=Le*_e+Fe*-ue+Re*-te-Ue*-oe,P[3]=A[3],P},ve.zero=function(P){return P[0]=0,P[1]=0,P[2]=0,P[3]=0,P},ve.str=function(P){return"vec4("+P[0]+", "+P[1]+", "+P[2]+", "+P[3]+")"},ve.exactEquals=function(P,A){return P[0]===A[0]&&P[1]===A[1]&&P[2]===A[2]&&P[3]===A[3]},ve.equals=function(P,A){var F=P[0],q=P[1],Z=P[2],ie=P[3],oe=A[0],te=A[1],ue=A[2],_e=A[3];return Math.abs(F-oe)<=o.EPSILON*Math.max(1,Math.abs(F),Math.abs(oe))&&Math.abs(q-te)<=o.EPSILON*Math.max(1,Math.abs(q),Math.abs(te))&&Math.abs(Z-ue)<=o.EPSILON*Math.max(1,Math.abs(Z),Math.abs(ue))&&Math.abs(ie-_e)<=o.EPSILON*Math.max(1,Math.abs(ie),Math.abs(_e))},ve.forEach=ve.sqrLen=ve.len=ve.sqrDist=ve.dist=ve.div=ve.mul=ve.sub=void 0;var o=function(P,A){if(P&&P.__esModule)return P;if(P===null||u(P)!=="object"&&typeof P!="function")return{default:P};var F=l(void 0);if(F&&F.has(P))return F.get(P);var q={},Z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ie in P)if(ie!=="default"&&Object.prototype.hasOwnProperty.call(P,ie)){var oe=Z?Object.getOwnPropertyDescriptor(P,ie):null;oe&&(oe.get||oe.set)?Object.defineProperty(q,ie,oe):q[ie]=P[ie]}return q.default=P,F&&F.set(P,q),q}($());function l(P){if(typeof WeakMap!="function")return null;var A=new WeakMap,F=new WeakMap;return(l=function(q){return q?F:A})(P)}function h(){var P=new o.ARRAY_TYPE(4);return o.ARRAY_TYPE!=Float32Array&&(P[0]=0,P[1]=0,P[2]=0,P[3]=0),P}function v(P,A,F){return P[0]=A[0]-F[0],P[1]=A[1]-F[1],P[2]=A[2]-F[2],P[3]=A[3]-F[3],P}function f(P,A,F){return P[0]=A[0]*F[0],P[1]=A[1]*F[1],P[2]=A[2]*F[2],P[3]=A[3]*F[3],P}function y(P,A,F){return P[0]=A[0]/F[0],P[1]=A[1]/F[1],P[2]=A[2]/F[2],P[3]=A[3]/F[3],P}function E(P,A){return Math.hypot(A[0]-P[0],A[1]-P[1],A[2]-P[2],A[3]-P[3])}function O(P,A){var F=A[0]-P[0],q=A[1]-P[1],Z=A[2]-P[2],ie=A[3]-P[3];return F*F+q*q+Z*Z+ie*ie}function k(P){return Math.hypot(P[0],P[1],P[2],P[3])}function w(P){var A=P[0],F=P[1],q=P[2],Z=P[3];return A*A+F*F+q*q+Z*Z}ve.sub=v,ve.mul=f,ve.div=y,ve.dist=E,ve.sqrDist=O,ve.len=k,ve.sqrLen=w;var R,D=(R=h(),function(P,A,F,q,Z,ie){var oe,te;for(A||(A=4),F||(F=0),te=q?Math.min(q*A+F,P.length):P.length,oe=F;oe<te;oe+=A)R[0]=P[oe],R[1]=P[oe+1],R[2]=P[oe+2],R[3]=P[oe+3],Z(R,R,ie),P[oe]=R[0],P[oe+1]=R[1],P[oe+2]=R[2],P[oe+3]=R[3];return P});return ve.forEach=D,ve}function pe(){if(ge)return ae;function u(Ne){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},u(Ne)}ge=1,Object.defineProperty(ae,"__esModule",{value:!0}),ae.create=E,ae.identity=function(Ne){return Ne[0]=0,Ne[1]=0,Ne[2]=0,Ne[3]=1,Ne},ae.setAxisAngle=O,ae.getAxisAngle=function(Ne,et){var lt=2*Math.acos(et[3]),ct=Math.sin(lt/2);return ct>o.EPSILON?(Ne[0]=et[0]/ct,Ne[1]=et[1]/ct,Ne[2]=et[2]/ct):(Ne[0]=1,Ne[1]=0,Ne[2]=0),lt},ae.getAngle=function(Ne,et){var lt=F(Ne,et);return Math.acos(2*lt*lt-1)},ae.multiply=k,ae.rotateX=function(Ne,et,lt){lt*=.5;var ct=et[0],xt=et[1],Pt=et[2],$t=et[3],Tt=Math.sin(lt),Ht=Math.cos(lt);return Ne[0]=ct*Ht+$t*Tt,Ne[1]=xt*Ht+Pt*Tt,Ne[2]=Pt*Ht-xt*Tt,Ne[3]=$t*Ht-ct*Tt,Ne},ae.rotateY=function(Ne,et,lt){lt*=.5;var ct=et[0],xt=et[1],Pt=et[2],$t=et[3],Tt=Math.sin(lt),Ht=Math.cos(lt);return Ne[0]=ct*Ht-Pt*Tt,Ne[1]=xt*Ht+$t*Tt,Ne[2]=Pt*Ht+ct*Tt,Ne[3]=$t*Ht-xt*Tt,Ne},ae.rotateZ=function(Ne,et,lt){lt*=.5;var ct=et[0],xt=et[1],Pt=et[2],$t=et[3],Tt=Math.sin(lt),Ht=Math.cos(lt);return Ne[0]=ct*Ht+xt*Tt,Ne[1]=xt*Ht-ct*Tt,Ne[2]=Pt*Ht+$t*Tt,Ne[3]=$t*Ht-Pt*Tt,Ne},ae.calculateW=function(Ne,et){var lt=et[0],ct=et[1],xt=et[2];return Ne[0]=lt,Ne[1]=ct,Ne[2]=xt,Ne[3]=Math.sqrt(Math.abs(1-lt*lt-ct*ct-xt*xt)),Ne},ae.exp=w,ae.ln=R,ae.pow=function(Ne,et,lt){return R(Ne,et),A(Ne,Ne,lt),w(Ne,Ne),Ne},ae.slerp=D,ae.random=function(Ne){var et=o.RANDOM(),lt=o.RANDOM(),ct=o.RANDOM(),xt=Math.sqrt(1-et),Pt=Math.sqrt(et);return Ne[0]=xt*Math.sin(2*Math.PI*lt),Ne[1]=xt*Math.cos(2*Math.PI*lt),Ne[2]=Pt*Math.sin(2*Math.PI*ct),Ne[3]=Pt*Math.cos(2*Math.PI*ct),Ne},ae.invert=function(Ne,et){var lt=et[0],ct=et[1],xt=et[2],Pt=et[3],$t=lt*lt+ct*ct+xt*xt+Pt*Pt,Tt=$t?1/$t:0;return Ne[0]=-lt*Tt,Ne[1]=-ct*Tt,Ne[2]=-xt*Tt,Ne[3]=Pt*Tt,Ne},ae.conjugate=function(Ne,et){return Ne[0]=-et[0],Ne[1]=-et[1],Ne[2]=-et[2],Ne[3]=et[3],Ne},ae.fromMat3=P,ae.fromEuler=function(Ne,et,lt,ct){var xt=.5*Math.PI/180;et*=xt,lt*=xt,ct*=xt;var Pt=Math.sin(et),$t=Math.cos(et),Tt=Math.sin(lt),Ht=Math.cos(lt),sn=Math.sin(ct),Bt=Math.cos(ct);return Ne[0]=Pt*Ht*Bt-$t*Tt*sn,Ne[1]=$t*Tt*Bt+Pt*Ht*sn,Ne[2]=$t*Ht*sn-Pt*Tt*Bt,Ne[3]=$t*Ht*Bt+Pt*Tt*sn,Ne},ae.str=function(Ne){return"quat("+Ne[0]+", "+Ne[1]+", "+Ne[2]+", "+Ne[3]+")"},ae.setAxes=ae.sqlerp=ae.rotationTo=ae.equals=ae.exactEquals=ae.normalize=ae.sqrLen=ae.squaredLength=ae.len=ae.length=ae.lerp=ae.dot=ae.scale=ae.mul=ae.add=ae.set=ae.copy=ae.fromValues=ae.clone=void 0;var o=y($()),l=y(ee()),h=y(Ce()),v=y(de());function f(Ne){if(typeof WeakMap!="function")return null;var et=new WeakMap,lt=new WeakMap;return(f=function(ct){return ct?lt:et})(Ne)}function y(Ne,et){if(Ne&&Ne.__esModule)return Ne;if(Ne===null||u(Ne)!=="object"&&typeof Ne!="function")return{default:Ne};var lt=f(et);if(lt&&lt.has(Ne))return lt.get(Ne);var ct={},xt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Pt in Ne)if(Pt!=="default"&&Object.prototype.hasOwnProperty.call(Ne,Pt)){var $t=xt?Object.getOwnPropertyDescriptor(Ne,Pt):null;$t&&($t.get||$t.set)?Object.defineProperty(ct,Pt,$t):ct[Pt]=Ne[Pt]}return ct.default=Ne,lt&&lt.set(Ne,ct),ct}function E(){var Ne=new o.ARRAY_TYPE(4);return o.ARRAY_TYPE!=Float32Array&&(Ne[0]=0,Ne[1]=0,Ne[2]=0),Ne[3]=1,Ne}function O(Ne,et,lt){lt*=.5;var ct=Math.sin(lt);return Ne[0]=ct*et[0],Ne[1]=ct*et[1],Ne[2]=ct*et[2],Ne[3]=Math.cos(lt),Ne}function k(Ne,et,lt){var ct=et[0],xt=et[1],Pt=et[2],$t=et[3],Tt=lt[0],Ht=lt[1],sn=lt[2],Bt=lt[3];return Ne[0]=ct*Bt+$t*Tt+xt*sn-Pt*Ht,Ne[1]=xt*Bt+$t*Ht+Pt*Tt-ct*sn,Ne[2]=Pt*Bt+$t*sn+ct*Ht-xt*Tt,Ne[3]=$t*Bt-ct*Tt-xt*Ht-Pt*sn,Ne}function w(Ne,et){var lt=et[0],ct=et[1],xt=et[2],Pt=et[3],$t=Math.sqrt(lt*lt+ct*ct+xt*xt),Tt=Math.exp(Pt),Ht=$t>0?Tt*Math.sin($t)/$t:0;return Ne[0]=lt*Ht,Ne[1]=ct*Ht,Ne[2]=xt*Ht,Ne[3]=Tt*Math.cos($t),Ne}function R(Ne,et){var lt=et[0],ct=et[1],xt=et[2],Pt=et[3],$t=Math.sqrt(lt*lt+ct*ct+xt*xt),Tt=$t>0?Math.atan2($t,Pt)/$t:0;return Ne[0]=lt*Tt,Ne[1]=ct*Tt,Ne[2]=xt*Tt,Ne[3]=.5*Math.log(lt*lt+ct*ct+xt*xt+Pt*Pt),Ne}function D(Ne,et,lt,ct){var xt,Pt,$t,Tt,Ht,sn=et[0],Bt=et[1],Nn=et[2],En=et[3],pn=lt[0],on=lt[1],er=lt[2],Ln=lt[3];return(Pt=sn*pn+Bt*on+Nn*er+En*Ln)<0&&(Pt=-Pt,pn=-pn,on=-on,er=-er,Ln=-Ln),1-Pt>o.EPSILON?(xt=Math.acos(Pt),$t=Math.sin(xt),Tt=Math.sin((1-ct)*xt)/$t,Ht=Math.sin(ct*xt)/$t):(Tt=1-ct,Ht=ct),Ne[0]=Tt*sn+Ht*pn,Ne[1]=Tt*Bt+Ht*on,Ne[2]=Tt*Nn+Ht*er,Ne[3]=Tt*En+Ht*Ln,Ne}function P(Ne,et){var lt,ct=et[0]+et[4]+et[8];if(ct>0)lt=Math.sqrt(ct+1),Ne[3]=.5*lt,Ne[0]=(et[5]-et[7])*(lt=.5/lt),Ne[1]=(et[6]-et[2])*lt,Ne[2]=(et[1]-et[3])*lt;else{var xt=0;et[4]>et[0]&&(xt=1),et[8]>et[3*xt+xt]&&(xt=2);var Pt=(xt+1)%3,$t=(xt+2)%3;lt=Math.sqrt(et[3*xt+xt]-et[3*Pt+Pt]-et[3*$t+$t]+1),Ne[xt]=.5*lt,Ne[3]=(et[3*Pt+$t]-et[3*$t+Pt])*(lt=.5/lt),Ne[Pt]=(et[3*Pt+xt]+et[3*xt+Pt])*lt,Ne[$t]=(et[3*$t+xt]+et[3*xt+$t])*lt}return Ne}ae.clone=v.clone,ae.fromValues=v.fromValues,ae.copy=v.copy,ae.set=v.set,ae.add=v.add,ae.mul=k;var A=v.scale;ae.scale=A;var F=v.dot;ae.dot=F,ae.lerp=v.lerp;var q=v.length;ae.length=q,ae.len=q;var Z=v.squaredLength;ae.squaredLength=Z,ae.sqrLen=Z;var ie=v.normalize;ae.normalize=ie,ae.exactEquals=v.exactEquals,ae.equals=v.equals;var oe,te,ue,_e=(oe=h.create(),te=h.fromValues(1,0,0),ue=h.fromValues(0,1,0),function(Ne,et,lt){var ct=h.dot(et,lt);return ct<-.999999?(h.cross(oe,te,et),h.len(oe)<1e-6&&h.cross(oe,ue,et),h.normalize(oe,oe),O(Ne,oe,Math.PI),Ne):ct>.999999?(Ne[0]=0,Ne[1]=0,Ne[2]=0,Ne[3]=1,Ne):(h.cross(oe,et,lt),Ne[0]=oe[0],Ne[1]=oe[1],Ne[2]=oe[2],Ne[3]=1+ct,ie(Ne,Ne))});ae.rotationTo=_e;var Re,Ue,Le=(Re=E(),Ue=E(),function(Ne,et,lt,ct,xt,Pt){return D(Re,et,xt,Pt),D(Ue,lt,ct,Pt),D(Ne,Re,Ue,2*Pt*(1-Pt)),Ne});ae.sqlerp=Le;var Fe,tt=(Fe=l.create(),function(Ne,et,lt,ct){return Fe[0]=lt[0],Fe[3]=lt[1],Fe[6]=lt[2],Fe[1]=ct[0],Fe[4]=ct[1],Fe[7]=ct[2],Fe[2]=-et[0],Fe[5]=-et[1],Fe[8]=-et[2],ie(Ne,P(Ne,Fe))});return ae.setAxes=tt,ae}var fe,me={};function Ie(){if(fe)return me;function u(D){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},u(D)}fe=1,Object.defineProperty(me,"__esModule",{value:!0}),me.create=function(){var D=new o.ARRAY_TYPE(8);return o.ARRAY_TYPE!=Float32Array&&(D[0]=0,D[1]=0,D[2]=0,D[4]=0,D[5]=0,D[6]=0,D[7]=0),D[3]=1,D},me.clone=function(D){var P=new o.ARRAY_TYPE(8);return P[0]=D[0],P[1]=D[1],P[2]=D[2],P[3]=D[3],P[4]=D[4],P[5]=D[5],P[6]=D[6],P[7]=D[7],P},me.fromValues=function(D,P,A,F,q,Z,ie,oe){var te=new o.ARRAY_TYPE(8);return te[0]=D,te[1]=P,te[2]=A,te[3]=F,te[4]=q,te[5]=Z,te[6]=ie,te[7]=oe,te},me.fromRotationTranslationValues=function(D,P,A,F,q,Z,ie){var oe=new o.ARRAY_TYPE(8);oe[0]=D,oe[1]=P,oe[2]=A,oe[3]=F;var te=.5*q,ue=.5*Z,_e=.5*ie;return oe[4]=te*F+ue*A-_e*P,oe[5]=ue*F+_e*D-te*A,oe[6]=_e*F+te*P-ue*D,oe[7]=-te*D-ue*P-_e*A,oe},me.fromRotationTranslation=y,me.fromTranslation=function(D,P){return D[0]=0,D[1]=0,D[2]=0,D[3]=1,D[4]=.5*P[0],D[5]=.5*P[1],D[6]=.5*P[2],D[7]=0,D},me.fromRotation=function(D,P){return D[0]=P[0],D[1]=P[1],D[2]=P[2],D[3]=P[3],D[4]=0,D[5]=0,D[6]=0,D[7]=0,D},me.fromMat4=function(D,P){var A=l.create();h.getRotation(A,P);var F=new o.ARRAY_TYPE(3);return h.getTranslation(F,P),y(D,A,F),D},me.copy=E,me.identity=function(D){return D[0]=0,D[1]=0,D[2]=0,D[3]=1,D[4]=0,D[5]=0,D[6]=0,D[7]=0,D},me.set=function(D,P,A,F,q,Z,ie,oe,te){return D[0]=P,D[1]=A,D[2]=F,D[3]=q,D[4]=Z,D[5]=ie,D[6]=oe,D[7]=te,D},me.getDual=function(D,P){return D[0]=P[4],D[1]=P[5],D[2]=P[6],D[3]=P[7],D},me.setDual=function(D,P){return D[4]=P[0],D[5]=P[1],D[6]=P[2],D[7]=P[3],D},me.getTranslation=function(D,P){var A=P[4],F=P[5],q=P[6],Z=P[7],ie=-P[0],oe=-P[1],te=-P[2],ue=P[3];return D[0]=2*(A*ue+Z*ie+F*te-q*oe),D[1]=2*(F*ue+Z*oe+q*ie-A*te),D[2]=2*(q*ue+Z*te+A*oe-F*ie),D},me.translate=function(D,P,A){var F=P[0],q=P[1],Z=P[2],ie=P[3],oe=.5*A[0],te=.5*A[1],ue=.5*A[2],_e=P[4],Re=P[5],Ue=P[6],Le=P[7];return D[0]=F,D[1]=q,D[2]=Z,D[3]=ie,D[4]=ie*oe+q*ue-Z*te+_e,D[5]=ie*te+Z*oe-F*ue+Re,D[6]=ie*ue+F*te-q*oe+Ue,D[7]=-F*oe-q*te-Z*ue+Le,D},me.rotateX=function(D,P,A){var F=-P[0],q=-P[1],Z=-P[2],ie=P[3],oe=P[4],te=P[5],ue=P[6],_e=P[7],Re=oe*ie+_e*F+te*Z-ue*q,Ue=te*ie+_e*q+ue*F-oe*Z,Le=ue*ie+_e*Z+oe*q-te*F,Fe=_e*ie-oe*F-te*q-ue*Z;return l.rotateX(D,P,A),D[4]=Re*(ie=D[3])+Fe*(F=D[0])+Ue*(Z=D[2])-Le*(q=D[1]),D[5]=Ue*ie+Fe*q+Le*F-Re*Z,D[6]=Le*ie+Fe*Z+Re*q-Ue*F,D[7]=Fe*ie-Re*F-Ue*q-Le*Z,D},me.rotateY=function(D,P,A){var F=-P[0],q=-P[1],Z=-P[2],ie=P[3],oe=P[4],te=P[5],ue=P[6],_e=P[7],Re=oe*ie+_e*F+te*Z-ue*q,Ue=te*ie+_e*q+ue*F-oe*Z,Le=ue*ie+_e*Z+oe*q-te*F,Fe=_e*ie-oe*F-te*q-ue*Z;return l.rotateY(D,P,A),D[4]=Re*(ie=D[3])+Fe*(F=D[0])+Ue*(Z=D[2])-Le*(q=D[1]),D[5]=Ue*ie+Fe*q+Le*F-Re*Z,D[6]=Le*ie+Fe*Z+Re*q-Ue*F,D[7]=Fe*ie-Re*F-Ue*q-Le*Z,D},me.rotateZ=function(D,P,A){var F=-P[0],q=-P[1],Z=-P[2],ie=P[3],oe=P[4],te=P[5],ue=P[6],_e=P[7],Re=oe*ie+_e*F+te*Z-ue*q,Ue=te*ie+_e*q+ue*F-oe*Z,Le=ue*ie+_e*Z+oe*q-te*F,Fe=_e*ie-oe*F-te*q-ue*Z;return l.rotateZ(D,P,A),D[4]=Re*(ie=D[3])+Fe*(F=D[0])+Ue*(Z=D[2])-Le*(q=D[1]),D[5]=Ue*ie+Fe*q+Le*F-Re*Z,D[6]=Le*ie+Fe*Z+Re*q-Ue*F,D[7]=Fe*ie-Re*F-Ue*q-Le*Z,D},me.rotateByQuatAppend=function(D,P,A){var F=A[0],q=A[1],Z=A[2],ie=A[3],oe=P[0],te=P[1],ue=P[2],_e=P[3];return D[0]=oe*ie+_e*F+te*Z-ue*q,D[1]=te*ie+_e*q+ue*F-oe*Z,D[2]=ue*ie+_e*Z+oe*q-te*F,D[3]=_e*ie-oe*F-te*q-ue*Z,D[4]=(oe=P[4])*ie+(_e=P[7])*F+(te=P[5])*Z-(ue=P[6])*q,D[5]=te*ie+_e*q+ue*F-oe*Z,D[6]=ue*ie+_e*Z+oe*q-te*F,D[7]=_e*ie-oe*F-te*q-ue*Z,D},me.rotateByQuatPrepend=function(D,P,A){var F=P[0],q=P[1],Z=P[2],ie=P[3],oe=A[0],te=A[1],ue=A[2],_e=A[3];return D[0]=F*_e+ie*oe+q*ue-Z*te,D[1]=q*_e+ie*te+Z*oe-F*ue,D[2]=Z*_e+ie*ue+F*te-q*oe,D[3]=ie*_e-F*oe-q*te-Z*ue,D[4]=F*(_e=A[7])+ie*(oe=A[4])+q*(ue=A[6])-Z*(te=A[5]),D[5]=q*_e+ie*te+Z*oe-F*ue,D[6]=Z*_e+ie*ue+F*te-q*oe,D[7]=ie*_e-F*oe-q*te-Z*ue,D},me.rotateAroundAxis=function(D,P,A,F){if(Math.abs(F)<o.EPSILON)return E(D,P);var q=Math.hypot(A[0],A[1],A[2]);F*=.5;var Z=Math.sin(F),ie=Z*A[0]/q,oe=Z*A[1]/q,te=Z*A[2]/q,ue=Math.cos(F),_e=P[0],Re=P[1],Ue=P[2],Le=P[3];D[0]=_e*ue+Le*ie+Re*te-Ue*oe,D[1]=Re*ue+Le*oe+Ue*ie-_e*te,D[2]=Ue*ue+Le*te+_e*oe-Re*ie,D[3]=Le*ue-_e*ie-Re*oe-Ue*te;var Fe=P[4],tt=P[5],Ne=P[6],et=P[7];return D[4]=Fe*ue+et*ie+tt*te-Ne*oe,D[5]=tt*ue+et*oe+Ne*ie-Fe*te,D[6]=Ne*ue+et*te+Fe*oe-tt*ie,D[7]=et*ue-Fe*ie-tt*oe-Ne*te,D},me.add=function(D,P,A){return D[0]=P[0]+A[0],D[1]=P[1]+A[1],D[2]=P[2]+A[2],D[3]=P[3]+A[3],D[4]=P[4]+A[4],D[5]=P[5]+A[5],D[6]=P[6]+A[6],D[7]=P[7]+A[7],D},me.multiply=O,me.scale=function(D,P,A){return D[0]=P[0]*A,D[1]=P[1]*A,D[2]=P[2]*A,D[3]=P[3]*A,D[4]=P[4]*A,D[5]=P[5]*A,D[6]=P[6]*A,D[7]=P[7]*A,D},me.lerp=function(D,P,A,F){var q=1-F;return k(P,A)<0&&(F=-F),D[0]=P[0]*q+A[0]*F,D[1]=P[1]*q+A[1]*F,D[2]=P[2]*q+A[2]*F,D[3]=P[3]*q+A[3]*F,D[4]=P[4]*q+A[4]*F,D[5]=P[5]*q+A[5]*F,D[6]=P[6]*q+A[6]*F,D[7]=P[7]*q+A[7]*F,D},me.invert=function(D,P){var A=R(P);return D[0]=-P[0]/A,D[1]=-P[1]/A,D[2]=-P[2]/A,D[3]=P[3]/A,D[4]=-P[4]/A,D[5]=-P[5]/A,D[6]=-P[6]/A,D[7]=P[7]/A,D},me.conjugate=function(D,P){return D[0]=-P[0],D[1]=-P[1],D[2]=-P[2],D[3]=P[3],D[4]=-P[4],D[5]=-P[5],D[6]=-P[6],D[7]=P[7],D},me.normalize=function(D,P){var A=R(P);if(A>0){A=Math.sqrt(A);var F=P[0]/A,q=P[1]/A,Z=P[2]/A,ie=P[3]/A,oe=P[4],te=P[5],ue=P[6],_e=P[7],Re=F*oe+q*te+Z*ue+ie*_e;D[0]=F,D[1]=q,D[2]=Z,D[3]=ie,D[4]=(oe-F*Re)/A,D[5]=(te-q*Re)/A,D[6]=(ue-Z*Re)/A,D[7]=(_e-ie*Re)/A}return D},me.str=function(D){return"quat2("+D[0]+", "+D[1]+", "+D[2]+", "+D[3]+", "+D[4]+", "+D[5]+", "+D[6]+", "+D[7]+")"},me.exactEquals=function(D,P){return D[0]===P[0]&&D[1]===P[1]&&D[2]===P[2]&&D[3]===P[3]&&D[4]===P[4]&&D[5]===P[5]&&D[6]===P[6]&&D[7]===P[7]},me.equals=function(D,P){var A=D[0],F=D[1],q=D[2],Z=D[3],ie=D[4],oe=D[5],te=D[6],ue=D[7],_e=P[0],Re=P[1],Ue=P[2],Le=P[3],Fe=P[4],tt=P[5],Ne=P[6],et=P[7];return Math.abs(A-_e)<=o.EPSILON*Math.max(1,Math.abs(A),Math.abs(_e))&&Math.abs(F-Re)<=o.EPSILON*Math.max(1,Math.abs(F),Math.abs(Re))&&Math.abs(q-Ue)<=o.EPSILON*Math.max(1,Math.abs(q),Math.abs(Ue))&&Math.abs(Z-Le)<=o.EPSILON*Math.max(1,Math.abs(Z),Math.abs(Le))&&Math.abs(ie-Fe)<=o.EPSILON*Math.max(1,Math.abs(ie),Math.abs(Fe))&&Math.abs(oe-tt)<=o.EPSILON*Math.max(1,Math.abs(oe),Math.abs(tt))&&Math.abs(te-Ne)<=o.EPSILON*Math.max(1,Math.abs(te),Math.abs(Ne))&&Math.abs(ue-et)<=o.EPSILON*Math.max(1,Math.abs(ue),Math.abs(et))},me.sqrLen=me.squaredLength=me.len=me.length=me.dot=me.mul=me.setReal=me.getReal=void 0;var o=f($()),l=f(pe()),h=f(re());function v(D){if(typeof WeakMap!="function")return null;var P=new WeakMap,A=new WeakMap;return(v=function(F){return F?A:P})(D)}function f(D,P){if(D&&D.__esModule)return D;if(D===null||u(D)!=="object"&&typeof D!="function")return{default:D};var A=v(P);if(A&&A.has(D))return A.get(D);var F={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Z in D)if(Z!=="default"&&Object.prototype.hasOwnProperty.call(D,Z)){var ie=q?Object.getOwnPropertyDescriptor(D,Z):null;ie&&(ie.get||ie.set)?Object.defineProperty(F,Z,ie):F[Z]=D[Z]}return F.default=D,A&&A.set(D,F),F}function y(D,P,A){var F=.5*A[0],q=.5*A[1],Z=.5*A[2],ie=P[0],oe=P[1],te=P[2],ue=P[3];return D[0]=ie,D[1]=oe,D[2]=te,D[3]=ue,D[4]=F*ue+q*te-Z*oe,D[5]=q*ue+Z*ie-F*te,D[6]=Z*ue+F*oe-q*ie,D[7]=-F*ie-q*oe-Z*te,D}function E(D,P){return D[0]=P[0],D[1]=P[1],D[2]=P[2],D[3]=P[3],D[4]=P[4],D[5]=P[5],D[6]=P[6],D[7]=P[7],D}function O(D,P,A){var F=P[0],q=P[1],Z=P[2],ie=P[3],oe=A[4],te=A[5],ue=A[6],_e=A[7],Re=P[4],Ue=P[5],Le=P[6],Fe=P[7],tt=A[0],Ne=A[1],et=A[2],lt=A[3];return D[0]=F*lt+ie*tt+q*et-Z*Ne,D[1]=q*lt+ie*Ne+Z*tt-F*et,D[2]=Z*lt+ie*et+F*Ne-q*tt,D[3]=ie*lt-F*tt-q*Ne-Z*et,D[4]=F*_e+ie*oe+q*ue-Z*te+Re*lt+Fe*tt+Ue*et-Le*Ne,D[5]=q*_e+ie*te+Z*oe-F*ue+Ue*lt+Fe*Ne+Le*tt-Re*et,D[6]=Z*_e+ie*ue+F*te-q*oe+Le*lt+Fe*et+Re*Ne-Ue*tt,D[7]=ie*_e-F*oe-q*te-Z*ue+Fe*lt-Re*tt-Ue*Ne-Le*et,D}me.getReal=l.copy,me.setReal=l.copy,me.mul=O;var k=l.dot;me.dot=k;var w=l.length;me.length=w,me.len=w;var R=l.squaredLength;return me.squaredLength=R,me.sqrLen=R,me}var Me,Be,$e={};function ze(){if(Me)return $e;function u(P){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},u(P)}Me=1,Object.defineProperty($e,"__esModule",{value:!0}),$e.create=h,$e.clone=function(P){var A=new o.ARRAY_TYPE(2);return A[0]=P[0],A[1]=P[1],A},$e.fromValues=function(P,A){var F=new o.ARRAY_TYPE(2);return F[0]=P,F[1]=A,F},$e.copy=function(P,A){return P[0]=A[0],P[1]=A[1],P},$e.set=function(P,A,F){return P[0]=A,P[1]=F,P},$e.add=function(P,A,F){return P[0]=A[0]+F[0],P[1]=A[1]+F[1],P},$e.subtract=v,$e.multiply=f,$e.divide=y,$e.ceil=function(P,A){return P[0]=Math.ceil(A[0]),P[1]=Math.ceil(A[1]),P},$e.floor=function(P,A){return P[0]=Math.floor(A[0]),P[1]=Math.floor(A[1]),P},$e.min=function(P,A,F){return P[0]=Math.min(A[0],F[0]),P[1]=Math.min(A[1],F[1]),P},$e.max=function(P,A,F){return P[0]=Math.max(A[0],F[0]),P[1]=Math.max(A[1],F[1]),P},$e.round=function(P,A){return P[0]=Math.round(A[0]),P[1]=Math.round(A[1]),P},$e.scale=function(P,A,F){return P[0]=A[0]*F,P[1]=A[1]*F,P},$e.scaleAndAdd=function(P,A,F,q){return P[0]=A[0]+F[0]*q,P[1]=A[1]+F[1]*q,P},$e.distance=E,$e.squaredDistance=O,$e.length=k,$e.squaredLength=w,$e.negate=function(P,A){return P[0]=-A[0],P[1]=-A[1],P},$e.inverse=function(P,A){return P[0]=1/A[0],P[1]=1/A[1],P},$e.normalize=function(P,A){var F=A[0],q=A[1],Z=F*F+q*q;return Z>0&&(Z=1/Math.sqrt(Z)),P[0]=A[0]*Z,P[1]=A[1]*Z,P},$e.dot=function(P,A){return P[0]*A[0]+P[1]*A[1]},$e.cross=function(P,A,F){var q=A[0]*F[1]-A[1]*F[0];return P[0]=P[1]=0,P[2]=q,P},$e.lerp=function(P,A,F,q){var Z=A[0],ie=A[1];return P[0]=Z+q*(F[0]-Z),P[1]=ie+q*(F[1]-ie),P},$e.random=function(P,A){A=A||1;var F=2*o.RANDOM()*Math.PI;return P[0]=Math.cos(F)*A,P[1]=Math.sin(F)*A,P},$e.transformMat2=function(P,A,F){var q=A[0],Z=A[1];return P[0]=F[0]*q+F[2]*Z,P[1]=F[1]*q+F[3]*Z,P},$e.transformMat2d=function(P,A,F){var q=A[0],Z=A[1];return P[0]=F[0]*q+F[2]*Z+F[4],P[1]=F[1]*q+F[3]*Z+F[5],P},$e.transformMat3=function(P,A,F){var q=A[0],Z=A[1];return P[0]=F[0]*q+F[3]*Z+F[6],P[1]=F[1]*q+F[4]*Z+F[7],P},$e.transformMat4=function(P,A,F){var q=A[0],Z=A[1];return P[0]=F[0]*q+F[4]*Z+F[12],P[1]=F[1]*q+F[5]*Z+F[13],P},$e.rotate=function(P,A,F,q){var Z=A[0]-F[0],ie=A[1]-F[1],oe=Math.sin(q),te=Math.cos(q);return P[0]=Z*te-ie*oe+F[0],P[1]=Z*oe+ie*te+F[1],P},$e.angle=function(P,A){var F=P[0],q=P[1],Z=A[0],ie=A[1],oe=Math.sqrt(F*F+q*q)*Math.sqrt(Z*Z+ie*ie);return Math.acos(Math.min(Math.max(oe&&(F*Z+q*ie)/oe,-1),1))},$e.zero=function(P){return P[0]=0,P[1]=0,P},$e.str=function(P){return"vec2("+P[0]+", "+P[1]+")"},$e.exactEquals=function(P,A){return P[0]===A[0]&&P[1]===A[1]},$e.equals=function(P,A){var F=P[0],q=P[1],Z=A[0],ie=A[1];return Math.abs(F-Z)<=o.EPSILON*Math.max(1,Math.abs(F),Math.abs(Z))&&Math.abs(q-ie)<=o.EPSILON*Math.max(1,Math.abs(q),Math.abs(ie))},$e.forEach=$e.sqrLen=$e.sqrDist=$e.dist=$e.div=$e.mul=$e.sub=$e.len=void 0;var o=function(P,A){if(P&&P.__esModule)return P;if(P===null||u(P)!=="object"&&typeof P!="function")return{default:P};var F=l(void 0);if(F&&F.has(P))return F.get(P);var q={},Z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ie in P)if(ie!=="default"&&Object.prototype.hasOwnProperty.call(P,ie)){var oe=Z?Object.getOwnPropertyDescriptor(P,ie):null;oe&&(oe.get||oe.set)?Object.defineProperty(q,ie,oe):q[ie]=P[ie]}return q.default=P,F&&F.set(P,q),q}($());function l(P){if(typeof WeakMap!="function")return null;var A=new WeakMap,F=new WeakMap;return(l=function(q){return q?F:A})(P)}function h(){var P=new o.ARRAY_TYPE(2);return o.ARRAY_TYPE!=Float32Array&&(P[0]=0,P[1]=0),P}function v(P,A,F){return P[0]=A[0]-F[0],P[1]=A[1]-F[1],P}function f(P,A,F){return P[0]=A[0]*F[0],P[1]=A[1]*F[1],P}function y(P,A,F){return P[0]=A[0]/F[0],P[1]=A[1]/F[1],P}function E(P,A){return Math.hypot(A[0]-P[0],A[1]-P[1])}function O(P,A){var F=A[0]-P[0],q=A[1]-P[1];return F*F+q*q}function k(P){return Math.hypot(P[0],P[1])}function w(P){var A=P[0],F=P[1];return A*A+F*F}$e.len=k,$e.sub=v,$e.mul=f,$e.div=y,$e.dist=E,$e.sqrDist=O,$e.sqrLen=w;var R,D=(R=h(),function(P,A,F,q,Z,ie){var oe,te;for(A||(A=2),F||(F=0),te=q?Math.min(q*A+F,P.length):P.length,oe=F;oe<te;oe+=A)R[0]=P[oe],R[1]=P[oe+1],Z(R,R,ie),P[oe]=R[0],P[oe+1]=R[1];return P});return $e.forEach=D,$e}function Je(){if(Be)return T;function u(P){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},u(P)}Be=1,Object.defineProperty(T,"__esModule",{value:!0}),T.vec4=T.vec3=T.vec2=T.quat2=T.quat=T.mat4=T.mat3=T.mat2d=T.mat2=T.glMatrix=void 0;var o=D($());T.glMatrix=o;var l=D(V());T.mat2=l;var h=D(H());T.mat2d=h;var v=D(ee());T.mat3=v;var f=D(re());T.mat4=f;var y=D(pe());T.quat=y;var E=D(Ie());T.quat2=E;var O=D(ze());T.vec2=O;var k=D(Ce());T.vec3=k;var w=D(de());function R(P){if(typeof WeakMap!="function")return null;var A=new WeakMap,F=new WeakMap;return(R=function(q){return q?F:A})(P)}function D(P,A){if(P&&P.__esModule)return P;if(P===null||u(P)!=="object"&&typeof P!="function")return{default:P};var F=R(A);if(F&&F.has(P))return F.get(P);var q={},Z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ie in P)if(ie!=="default"&&Object.prototype.hasOwnProperty.call(P,ie)){var oe=Z?Object.getOwnPropertyDescriptor(P,ie):null;oe&&(oe.get||oe.set)?Object.defineProperty(q,ie,oe):q[ie]=P[ie]}return q.default=P,F&&F.set(P,q),q}return T.vec4=w,T}var yt,at,gt,wt,Pe=Je(),mt=function(){if(at)return yt;function u(o,l,h,v){this.cx=3*o,this.bx=3*(h-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(v-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=l,this.p2x=h,this.p2y=v}return at=1,yt=u,u.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,l){if(l===void 0&&(l=1e-6),o<0)return 0;if(o>1)return 1;for(var h=o,v=0;v<8;v++){var f=this.sampleCurveX(h)-o;if(Math.abs(f)<l)return h;var y=this.sampleCurveDerivativeX(h);if(Math.abs(y)<1e-6)break;h-=f/y}var E=0,O=1;for(h=o,v=0;v<20&&(f=this.sampleCurveX(h),!(Math.abs(f-o)<l));v++)o>f?E=h:O=h,h=.5*(O-E)+E;return h},solve:function(o,l){return this.sampleCurveY(this.solveCurveX(o,l))}},yt}(),dt=x(mt);function ht(){if(wt)return gt;function u(o,l){this.x=o,this.y=l}return wt=1,gt=u,u.prototype={clone:function(){return new u(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,l){return this.clone()._rotateAround(o,l)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var l=o.x-this.x,h=o.y-this.y;return l*l+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,l){return Math.atan2(this.x*l-this.y*o,this.x*o+this.y*l)},_matMult:function(o){var l=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=l,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var l=Math.cos(o),h=Math.sin(o),v=h*this.x+l*this.y;return this.x=l*this.x-h*this.y,this.y=v,this},_rotateAround:function(o,l){var h=Math.cos(o),v=Math.sin(o),f=l.y+v*(this.x-l.x)+h*(this.y-l.y);return this.x=l.x+h*(this.x-l.x)-v*(this.y-l.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},u.convert=function(o){return o instanceof u?o:Array.isArray(o)?new u(o[0],o[1]):o},gt}var je=x(ht());function St(u,o){if(Array.isArray(u)){if(!Array.isArray(o)||u.length!==o.length)return!1;for(let l=0;l<u.length;l++)if(!St(u[l],o[l]))return!1;return!0}if(typeof u=="object"&&u!==null&&o!==null){if(typeof o!="object"||Object.keys(u).length!==Object.keys(o).length)return!1;for(const l in u)if(!St(u[l],o[l]))return!1;return!0}return u===o}const Ct=Math.PI/180,Lt=180/Math.PI;function At(u){return u*Ct}function Yt(u){return u*Lt}const Kt=[[0,0],[1,0],[1,1],[0,1]];function Dt(u){if(u<=0)return 0;if(u>=1)return 1;const o=u*u,l=o*u;return 4*(u<.5?l:3*(u-o)+l-.75)}function Wt(u,o,l,h){const v=new dt(u,o,l,h);return function(f){return v.solve(f)}}const Vt=Wt(.25,.1,.25,1);function Rt(u,o,l){return Math.min(l,Math.max(o,u))}function dn(u,o,l){return(l=Rt((l-u)/(o-u),0,1))*l*(3-2*l)}function hn(u,o,l){const h=l-o,v=((u-o)%h+h)%h+o;return v===o?l:v}function Pn(u,o,l){if(!u.length)return l(null,[]);let h=u.length;const v=new Array(u.length);let f=null;u.forEach((y,E)=>{o(y,(O,k)=>{O&&(f=O),v[E]=k,--h==0&&l(f,v)})})}function Dn(u,...o){for(const l of o)for(const h in l)u[h]=l[h];return u}let yn=1;function Rn(){return yn++}function kn(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))}function Cn(u,o){u.forEach(l=>{o[l]&&(o[l]=o[l].bind(o))})}function nn(u,o){return u.indexOf(o,u.length-o.length)!==-1}function Ut(u,o,l){const h={};for(const v in u)h[v]=o.call(this,u[v],v,u);return h}function cn(u,o,l){const h={};for(const v in u)o.call(this,u[v],v,u)&&(h[v]=u[v]);return h}function an(u){return Array.isArray(u)?u.map(an):typeof u=="object"&&u?Ut(u,an):u}const Zt={};function Xt(u){Zt[u]||(typeof console<"u"&&console.warn(u),Zt[u]=!0)}function Hn(u,o,l){return(l.y-u.y)*(o.x-u.x)>(o.y-u.y)*(l.x-u.x)}function br(u){let o=0;for(let l,h,v=0,f=u.length,y=f-1;v<f;y=v++)l=u[v],h=u[y],o+=(h.x-l.x)*(l.y+h.y);return o}function mr([u,o,l]){const h=At(o+90),v=At(l);return{x:u*Math.cos(h)*Math.sin(v),y:u*Math.sin(h)*Math.sin(v),z:u*Math.cos(v),azimuthal:o,polar:l}}function pr(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Tr(u){const o={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,h,v,f)=>{const y=v||f;return o[h]=!y||y.toLowerCase(),""}),o["max-age"]){const l=parseInt(o["max-age"],10);isNaN(l)?delete o["max-age"]:o["max-age"]=l}return o}let ur=null;function Mr(u,o){return[u[4*o],u[4*o+1],u[4*o+2],u[4*o+3]]}function tr(u,o,l,h){for(;o<l;){const v=o+l>>1;u[v]<h?o=v+1:l=v}return o}function ft(u,o,l,h){for(;o<l;){const v=o+l>>1;u[v]<=h?o=v+1:l=v}return o}function ye(u){return u>0?1/(1.001-u):1+u}function Se(u){return u>0?1-1/(1.001-u):-u}const ke={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!ke.API_URL)return null;try{const u=new URL(ke.API_URL);return u.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":u.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function Ze(u){return ke.API_URL_REGEX.test(u)}function Ae(u){return ke.API_SPRITE_REGEX.test(u)}let Ge,ut,Qe,_t,It,bt;function Mt(){return Ge==null&&(Ge=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),Ge}const kt={now:()=>_t!==void 0?_t:performance.now(),setNow(u){_t=u},restoreNow(){_t=void 0},frame(u){const o=requestAnimationFrame(u);return{cancel:()=>cancelAnimationFrame(o)}},getImageData(u,o=0){const{width:l,height:h}=u;It||(It=document.createElement("canvas"));const v=It.getContext("2d",{willReadFrequently:!0});if(!v)throw new Error("failed to create canvas 2d context");return(l>It.width||h>It.height)&&(It.width=l,It.height=h),v.clearRect(-o,-o,l+2*o,h+2*o),v.drawImage(u,0,0,l,h),v.getImageData(-o,-o,l+2*o,h+2*o)},resolveURL:u=>(ut||(ut=document.createElement("a")),ut.href=u,ut.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(Qe==null&&(Qe=window.matchMedia("(prefers-reduced-motion: reduce)")),Qe.matches)},hasCanvasFingerprintNoise(){if(bt!==void 0)return bt;if(!Mt())return bt=!1,!1;const u=new OffscreenCanvas(85,1),o=u.getContext("2d",{willReadFrequently:!0});let l=0;for(let v=0;v<u.width;++v)o.fillStyle=`rgba(${l++},${l++},${l++}, 255)`,o.fillRect(v,0,1,1);const h=o.getImageData(0,0,u.width,u.height);l=0;for(let v=0;v<h.data.length;++v)if(v%4!=3&&l++!==h.data[v])return bt=!0,!0;return bt=!1,!1}};function Gt(u,o){const l=u.indexOf("?");if(l<0)return`${u}?${new URLSearchParams(o).toString()}`;const h=new URLSearchParams(u.slice(l));for(const v in o)h.set(v,o[v]);return`${u.slice(0,l)}?${h.toString()}`}function vn(u,o={persistentParams:[]}){const l=u.indexOf("?");if(l<0)return u;const h=new URLSearchParams,v=new URLSearchParams(u.slice(l));for(const y of o.persistentParams){const E=v.get(y);E&&h.set(y,E)}const f=h.toString();return`${u.slice(0,l)}${f.length>0?`?${f}`:""}`}const On="mapbox-tiles";let bn=500,zn=50;const Mn=["language","worldview","jobid"];let wn,_n;function rr(){try{return caches}catch{}}function or(){const u=rr();u&&wn==null&&(wn=u.open(On))}let kr=1/0;const zr={supported:!1,testSupport:function(u){!Hi&&ei&&(ir?Gr(u):Hr=u)}};let Hr,ei,Hi=!1,ir=!1;const Ar=typeof self<"u"?self:{};function Gr(u){const o=u.createTexture();u.bindTexture(u.TEXTURE_2D,o);try{if(u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,ei),u.isContextLost())return;zr.supported=!0}catch{}u.deleteTexture(o),Hi=!0}Ar.document&&(ei=Ar.document.createElement("img"),ei.onload=function(){Hr&&Gr(Hr),Hr=null,ir=!0},ei.onerror=function(){Hi=!0,Hr=null},ei.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Ei={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(Ei);class fo extends Error{constructor(o,l,h){l===401&&Ze(h)&&(o+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(o),this.status=l,this.url=h}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const No=pr()?()=>self.worker&&self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,qi=function(u,o){if(!(/^file:/.test(l=u.url)||/^file:/.test(No())&&!/^\w+:/.test(l))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(h,v){const f=new AbortController,y=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,referrer:No(),referrerPolicy:h.referrerPolicy,signal:f.signal});let E=!1,O=!1;const k=(w=y.url).indexOf("sku=")>0&&Ze(w);var w;h.type==="json"&&y.headers.set("Accept","application/json");const R=(P,A,F)=>{if(O)return;if(P&&P.message!=="SecurityError"&&Xt(P.toString()),A&&F)return D(A);const q=Date.now();fetch(y).then(Z=>{if(Z.ok){const ie=k?Z.clone():null;return D(Z,ie,q)}return v(new fo(Z.statusText,Z.status,h.url))}).catch(Z=>{Z.name!=="AbortError"&&v(new Error(`${Z.message} ${h.url}`))})},D=(P,A,F)=>{(h.type==="arrayBuffer"?P.arrayBuffer():h.type==="json"?P.json():P.text()).then(q=>{O||(A&&F&&function(Z,ie,oe){if(or(),wn==null)return;const te=Tr(ie.headers.get("Cache-Control")||"");if(te["no-store"])return;const ue={status:ie.status,statusText:ie.statusText,headers:new Headers};ie.headers.forEach((Ue,Le)=>ue.headers.set(Le,Ue)),te["max-age"]&&ue.headers.set("Expires",new Date(oe+1e3*te["max-age"]).toUTCString());const _e=ue.headers.get("Expires");if(!_e||new Date(_e).getTime()-oe<42e4)return;let Re=vn(Z.url,{persistentParams:Mn});if(ie.status===206){const Ue=Z.headers.get("Range");if(!Ue)return;ue.status=200,Re=Gt(Re,{range:Ue})}(function(Ue,Le){if(_n===void 0)try{new Response(new ReadableStream),_n=!0}catch{_n=!1}_n?Le(Ue.body):Ue.blob().then(Le)})(ie,Ue=>{const Le=new Response((Fe=ie.status)!==200&&Fe!==404&&[101,103,204,205,304].includes(Fe)?null:Ue,ue);var Fe;or(),wn!=null&&wn.then(tt=>tt.put(Re,Le)).catch(tt=>Xt(tt.message))})}(y,A,F),E=!0,v(null,q,P.headers.get("Cache-Control"),P.headers.get("Expires")))}).catch(q=>{O||v(new Error(q.message))})};return k?function(P,A){if(or(),wn==null)return A(null);wn.then(F=>{let q=vn(P.url,{persistentParams:Mn});const Z=P.headers.get("Range");Z&&(q=Gt(q,{range:Z})),F.match(q).then(ie=>{const oe=function(te){if(!te)return!1;const ue=new Date(te.headers.get("Expires")||0),_e=Tr(te.headers.get("Cache-Control")||"");return ue>Date.now()&&!_e["no-cache"]}(ie);F.delete(q),oe&&F.put(q,ie.clone()),A(null,ie,oe)}).catch(A)}).catch(A)}(y,R):R(null,null),{cancel:()=>{O=!0,E||f.abort()}}}(u,o);if(pr()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",u,o,void 0,!0)}var l;return function(h,v){const f=new XMLHttpRequest;f.open(h.method||"GET",h.url,!0),h.type==="arrayBuffer"&&(f.responseType="arraybuffer");for(const y in h.headers)f.setRequestHeader(y,h.headers[y]);return h.type==="json"&&(f.responseType="text",f.setRequestHeader("Accept","application/json")),f.withCredentials=h.credentials==="include",f.onerror=()=>{v(new Error(f.statusText))},f.onload=()=>{if((f.status>=200&&f.status<300||f.status===0)&&f.response!==null){let y=f.response;if(h.type==="json")try{y=JSON.parse(f.response)}catch(E){return v(E)}v(null,y,f.getResponseHeader("Cache-Control"),f.getResponseHeader("Expires"))}else v(new fo(f.statusText,f.status,h.url))},f.send(h.body),{cancel:()=>f.abort()}}(u,o)},Ki=function(u,o){return qi(Dn(u,{type:"arrayBuffer"}),o)};function Ui(u){const o=document.createElement("a");return o.href=u,o.protocol===location.protocol&&o.host===location.host}const Wi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let yi,ki;yi=[],ki=0;const ar=function(u,o){if(zr.supported&&(u.headers||(u.headers={}),u.headers.accept="image/webp,*/*"),ki>=ke.MAX_PARALLEL_IMAGE_REQUESTS){const f={requestParameters:u,callback:o,cancelled:!1,cancel(){this.cancelled=!0}};return yi.push(f),f}ki++;let l=!1;const h=()=>{if(!l)for(l=!0,ki--;yi.length&&ki<ke.MAX_PARALLEL_IMAGE_REQUESTS;){const f=yi.shift(),{requestParameters:y,callback:E,cancelled:O}=f;O||(f.cancel=ar(y,E).cancel)}},v=Ki(u,(f,y,E,O)=>{h(),f?o(f):y&&(self.createImageBitmap?function(k,w){const R=new Blob([new Uint8Array(k)],{type:"image/png"});createImageBitmap(R).then(D=>{w(null,D)}).catch(D=>{w(new Error(`Could not load image because of ${D.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(y,(k,w)=>o(k,w,E,O)):function(k,w){const R=new Image;R.onload=()=>{w(null,R),URL.revokeObjectURL(R.src),R.onload=null,requestAnimationFrame(()=>{R.src=Wi})},R.onerror=()=>w(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const D=new Blob([new Uint8Array(k)],{type:"image/png"});R.src=k.byteLength?URL.createObjectURL(D):Wi}(y,(k,w)=>o(k,w,E,O)))});return{cancel:()=>{v.cancel(),h()}}};var Xn,$r,Jr,Un={exports:{}},sr={exports:{}},di={exports:{}},Pi=function(){if(Jr)return Un.exports;Jr=1;var u=(Xn||(Xn=1,sr.exports=function(l,h){var v,f,y,E,O,k,w,R;for(f=l.length-(v=3&l.length),y=h,O=3432918353,k=461845907,R=0;R<f;)w=255&l.charCodeAt(R)|(255&l.charCodeAt(++R))<<8|(255&l.charCodeAt(++R))<<16|(255&l.charCodeAt(++R))<<24,++R,y=27492+(65535&(E=5*(65535&(y=(y^=w=(65535&(w=(w=(65535&w)*O+(((w>>>16)*O&65535)<<16)&4294967295)<<15|w>>>17))*k+(((w>>>16)*k&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(E>>>16)&65535)<<16);switch(w=0,v){case 3:w^=(255&l.charCodeAt(R+2))<<16;case 2:w^=(255&l.charCodeAt(R+1))<<8;case 1:y^=w=(65535&(w=(w=(65535&(w^=255&l.charCodeAt(R)))*O+(((w>>>16)*O&65535)<<16)&4294967295)<<15|w>>>17))*k+(((w>>>16)*k&65535)<<16)&4294967295}return y^=l.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0}),sr.exports),o=($r||($r=1,di.exports=function(l,h){for(var v,f=l.length,y=h^f,E=0;f>=4;)v=1540483477*(65535&(v=255&l.charCodeAt(E)|(255&l.charCodeAt(++E))<<8|(255&l.charCodeAt(++E))<<16|(255&l.charCodeAt(++E))<<24))+((1540483477*(v>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(v=1540483477*(65535&(v^=v>>>24))+((1540483477*(v>>>16)&65535)<<16)),f-=4,++E;switch(f){case 3:y^=(255&l.charCodeAt(E+2))<<16;case 2:y^=(255&l.charCodeAt(E+1))<<8;case 1:y=1540483477*(65535&(y^=255&l.charCodeAt(E)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0}),di.exports);return Un.exports=u,Un.exports.murmur3=u,Un.exports.murmur2=o,Un.exports}(),mi=x(Pi);class Gi{constructor(o,...l){Dn(this,l[0]||{}),this.type=o}}class Xi extends Gi{constructor(o,l={}){super("error",Dn({error:o},l))}}function yo(u,o,l){l[u]&&l[u].indexOf(o)!==-1||(l[u]=l[u]||[],l[u].push(o))}function Gn(u,o,l){if(l&&l[u]){const h=l[u].indexOf(o);h!==-1&&l[u].splice(h,1)}}class jn{on(o,l){return this._listeners=this._listeners||{},yo(o,l,this._listeners),this}off(o,l){return Gn(o,l,this._listeners),Gn(o,l,this._oneTimeListeners),this}once(o,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},yo(o,l,this._oneTimeListeners),this):new Promise(h=>this.once(o,h))}fire(o,l){const h=typeof o=="string"?new Gi(o,l):o,v=h.type;if(this.listens(v)){h.target=this;const f=this._listeners&&this._listeners[v]?this._listeners[v].slice():[];for(const O of f)O.call(this,h);const y=this._oneTimeListeners&&this._oneTimeListeners[v]?this._oneTimeListeners[v].slice():[];for(const O of y)Gn(v,O,this._oneTimeListeners),O.call(this,h);const E=this._eventedParent;E&&(Dn(h,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),E.fire(h))}else h instanceof Xi&&console.error(h.error);return this}listens(o){return!!(this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o))}setEventedParent(o,l){return this._eventedParent=o,this._eventedParentData=l,this}}var wr,Jn={},ti=function(){if(wr)return Jn;wr=1;var u={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function o(f){return(f=Math.round(f))<0?0:f>255?255:f}function l(f){return o(f[f.length-1]==="%"?parseFloat(f)/100*255:parseInt(f))}function h(f){return(y=f[f.length-1]==="%"?parseFloat(f)/100:parseFloat(f))<0?0:y>1?1:y;var y}function v(f,y,E){return E<0?E+=1:E>1&&(E-=1),6*E<1?f+(y-f)*E*6:2*E<1?y:3*E<2?f+(y-f)*(2/3-E)*6:f}try{Jn.parseCSSColor=function(f){var y,E=f.replace(/ /g,"").toLowerCase();if(E in u)return u[E].slice();if(E[0]==="#")return E.length===4?(y=parseInt(E.substr(1),16))>=0&&y<=4095?[(3840&y)>>4|(3840&y)>>8,240&y|(240&y)>>4,15&y|(15&y)<<4,1]:null:E.length===7&&(y=parseInt(E.substr(1),16))>=0&&y<=16777215?[(16711680&y)>>16,(65280&y)>>8,255&y,1]:null;var O=E.indexOf("("),k=E.indexOf(")");if(O!==-1&&k+1===E.length){var w=E.substr(0,O),R=E.substr(O+1,k-(O+1)).split(","),D=1;switch(w){case"rgba":if(R.length!==4)return null;D=h(R.pop());case"rgb":return R.length!==3?null:[l(R[0]),l(R[1]),l(R[2]),D];case"hsla":if(R.length!==4)return null;D=h(R.pop());case"hsl":if(R.length!==3)return null;var P=(parseFloat(R[0])%360+360)%360/360,A=h(R[1]),F=h(R[2]),q=F<=.5?F*(A+1):F+A-F*A,Z=2*F-q;return[o(255*v(Z,q,P+1/3)),o(255*v(Z,q,P)),o(255*v(Z,q,P-1/3)),D];default:return null}}return null}}catch{}return Jn}();class Sr{constructor(o,l,h,v=1){this.r=o,this.g=l,this.b=h,this.a=v}static parse(o){if(!o)return;if(o instanceof Sr)return o;if(typeof o!="string")return;const l=ti.parseCSSColor(o);return l?new Sr(l[0]/255*l[3],l[1]/255*l[3],l[2]/255*l[3],l[3]):void 0}toString(){const[o,l,h,v]=this.a===0?[0,0,0,0]:[255*this.r/this.a,255*this.g/this.a,255*this.b/this.a,this.a];return`rgba(${Math.round(o)},${Math.round(l)},${Math.round(h)},${v})`}toRenderColor(o){const{r:l,g:h,b:v,a:f}=this;return new ca(o,l,h,v,f)}}class ca{constructor(o,l,h,v,f){if(o){const y=o.image.height,E=y*y;l=f===0?0:l/f*(y-1),h=f===0?0:h/f*(y-1),v=f===0?0:v/f*(y-1);const O=Math.floor(l),k=Math.floor(h),w=Math.floor(v),R=Math.ceil(l),D=Math.ceil(h),P=Math.ceil(v),A=l-O,F=h-k,q=v-w,Z=o.image.data,ie=4*(O+k*E+w*y),oe=4*(O+k*E+P*y),te=4*(O+D*E+w*y),ue=4*(O+D*E+P*y),_e=4*(R+k*E+w*y),Re=4*(R+k*E+P*y),Ue=4*(R+D*E+w*y),Le=4*(R+D*E+P*y);if(ie<0||Le>=Z.length)throw new Error("out of range");this.r=Zn(Zn(Zn(Z[ie],Z[oe],q),Zn(Z[te],Z[ue],q),F),Zn(Zn(Z[_e],Z[Re],q),Zn(Z[Ue],Z[Le],q),F),A)/255*f,this.g=Zn(Zn(Zn(Z[ie+1],Z[oe+1],q),Zn(Z[te+1],Z[ue+1],q),F),Zn(Zn(Z[_e+1],Z[Re+1],q),Zn(Z[Ue+1],Z[Le+1],q),F),A)/255*f,this.b=Zn(Zn(Zn(Z[ie+2],Z[oe+2],q),Zn(Z[te+2],Z[ue+2],q),F),Zn(Zn(Z[_e+2],Z[Re+2],q),Zn(Z[Ue+2],Z[Le+2],q),F),A)/255*f,this.a=f}else this.r=l,this.g=h,this.b=v,this.a=f}toArray(){const{r:o,g:l,b:h,a:v}=this;return v===0?[0,0,0,0]:[255*o/v,255*l/v,255*h/v,v]}toArray01(){const{r:o,g:l,b:h,a:v}=this;return v===0?[0,0,0,0]:[o/v,l/v,h/v,v]}toArray01Scaled(o){const{r:l,g:h,b:v,a:f}=this;return f===0?[0,0,0]:[l/f*o,h/f*o,v/f*o]}toArray01PremultipliedAlpha(){const{r:o,g:l,b:h,a:v}=this;return[o,l,h,v]}toArray01Linear(){const{r:o,g:l,b:h,a:v}=this;return v===0?[0,0,0,0]:[Math.pow(o/v,2.2),Math.pow(l/v,2.2),Math.pow(h/v,2.2),v]}}function Zn(u,o,l){return u*(1-l)+o*l}function Fo(u,o,l){return u.map((h,v)=>Zn(h,o[v],l))}Sr.black=new Sr(0,0,0,1),Sr.white=new Sr(1,1,1,1),Sr.transparent=new Sr(0,0,0,0),Sr.red=new Sr(1,0,0,1),Sr.blue=new Sr(0,0,1,1);var Xo=Object.freeze({__proto__:null,array:Fo,color:function(u,o,l){return new Sr(Zn(u.r,o.r,l),Zn(u.g,o.g,l),Zn(u.b,o.b,l),Zn(u.a,o.a,l))},number:Zn});function bs(u,...o){for(const l of o)for(const h in l)u[h]=l[h];return u}class ua extends Error{constructor(o,l){super(l),this.message=l,this.key=o}}class ec{constructor(o,l=[]){this.parent=o,this.bindings={};for(const[h,v]of l)this.bindings[h]=v}concat(o){return new ec(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}const dr={kind:"null"},ln={kind:"number"},gr={kind:"string"},yr={kind:"boolean"},hi={kind:"color"},Mo={kind:"object"},Ur={kind:"value"},Ic={kind:"collator"},ws={kind:"formatted"},du={kind:"resolvedImage"};function va(u,o){return{kind:"array",itemType:u,N:o}}function co(u){if(u.kind==="array"){const o=co(u.itemType);return typeof u.N=="number"?`array<${o}, ${u.N}>`:u.itemType.kind==="value"?"array":`array<${o}>`}return u.kind}const By=[dr,ln,gr,yr,hi,ws,Mo,va(Ur),du];function hu(u,o){if(o.kind==="error")return null;if(u.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!hu(u.itemType,o.itemType))&&(typeof u.N!="number"||u.N===o.N))return null}else{if(u.kind===o.kind)return null;if(u.kind==="value"){for(const l of By)if(!hu(l,o))return null}}return`Expected ${co(u)} but found ${co(o)} instead.`}function fu(u,o){return o.some(l=>l.kind===u.kind)}function Ws(u,o){return o.some(l=>l==="null"?u===null:l==="array"?Array.isArray(u):l==="object"?u&&!Array.isArray(u)&&typeof u=="object":l===typeof u)}class ff{constructor(o,l,h){this.sensitivity=o?l?"variant":"case":l?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,l){return this.collator.compare(o,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Wa{constructor(o,l,h,v,f){this.text=o.normalize?o.normalize():o,this.image=l,this.scale=h,this.fontStack=v,this.textColor=f}}class da{constructor(o){this.sections=o}static fromString(o){return new da([new Wa(o,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(o=>o.text.length!==0||o.image&&o.image.namePrimary.length!==0)}static factory(o){return o instanceof da?o:da.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map(o=>o.text).join("")}serialize(){const o=["format"];for(const l of this.sections){if(l.image){o.push(["image",l.image.namePrimary]);continue}o.push(l.text);const h={};l.fontStack&&(h["text-font"]=["literal",l.fontStack.split(",")]),l.scale&&(h["font-scale"]=l.scale),l.textColor&&(h["text-color"]=["rgba"].concat(l.textColor.toRenderColor(null).toArray())),o.push(h)}return o}}class ya{constructor(o){this.namePrimary=o.namePrimary,o.nameSecondary&&(this.nameSecondary=o.nameSecondary),this.available=o.available}toString(){return this.nameSecondary?`[${this.namePrimary},${this.nameSecondary}]`:this.namePrimary}static fromString(o,l){return o?new ya({namePrimary:o,nameSecondary:l,available:!1}):null}serialize(){return this.nameSecondary?["image",this.namePrimary,this.nameSecondary]:["image",this.namePrimary]}}function jy(u,o,l,h){return typeof u=="number"&&u>=0&&u<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof l=="number"&&l>=0&&l<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[u,o,l,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[u,o,l,h]:[u,o,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function tc(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof Sr||u instanceof ff||u instanceof da||u instanceof ya)return!0;if(Array.isArray(u)){for(const o of u)if(!tc(o))return!1;return!0}if(typeof u=="object"){for(const o in u)if(!tc(u[o]))return!1;return!0}return!1}function _o(u){if(u===null)return dr;if(typeof u=="string")return gr;if(typeof u=="boolean")return yr;if(typeof u=="number")return ln;if(u instanceof Sr)return hi;if(u instanceof ff)return Ic;if(u instanceof da)return ws;if(u instanceof ya)return du;if(Array.isArray(u)){const o=u.length;let l;for(const h of u){const v=_o(h);if(l){if(l===v)continue;l=Ur;break}l=v}return va(l||Ur,o)}return Mo}function _a(u){const o=typeof u;return u===null?"":o==="string"||o==="number"||o==="boolean"?String(u):u instanceof Sr||u instanceof da||u instanceof ya?u.toString():JSON.stringify(u)}class Ss{constructor(o,l){this.type=o,this.value=l}static parse(o,l){if(o.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!tc(o[1]))return l.error("invalid value");const h=o[1];let v=_o(h);const f=l.expectedType;return v.kind!=="array"||v.N!==0||!f||f.kind!=="array"||typeof f.N=="number"&&f.N!==0||(v=f),new Ss(v,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Sr?["rgba"].concat(this.value.toRenderColor(null).toArray()):this.value instanceof da?this.value.serialize():this.value}}class Bo{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}}const Zm={string:gr,number:ln,boolean:yr,object:Mo};class Cs{constructor(o,l){this.type=o,this.args=l}static parse(o,l){if(o.length<2)return l.error("Expected at least one argument.");let h,v=1;const f=o[0];if(f==="array"){let E,O;if(o.length>2){const k=o[1];if(typeof k!="string"||!(k in Zm)||k==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);E=Zm[k],v++}else E=Ur;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return l.error('The length argument to "array" must be a positive integer literal',2);O=o[2],v++}h=va(E,O)}else h=Zm[f];const y=[];for(;v<o.length;v++){const E=l.parse(o[v],v,Ur);if(!E)return null;y.push(E)}return new Cs(h,y)}evaluate(o){for(let l=0;l<this.args.length;l++){const h=this.args[l].evaluate(o);if(!hu(this.type,_o(h)))return h;if(l===this.args.length-1)throw new Bo(`The expression ${JSON.stringify(this.args[l].serialize())} evaluated to ${co(_o(h))} but was expected to be of type ${co(this.type)}.`)}return null}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){const o=this.type,l=[o.kind];if(o.kind==="array"){const h=o.itemType;if(h.kind==="string"||h.kind==="number"||h.kind==="boolean"){l.push(h.kind);const v=o.N;(typeof v=="number"||this.args.length>1)&&l.push(v)}}return l.concat(this.args.map(h=>h.serialize()))}}class pu{constructor(o){this.type=ws,this.sections=o}static parse(o,l){if(o.length<2)return l.error("Expected at least one argument.");const h=o[1];if(!Array.isArray(h)&&typeof h=="object")return l.error("First argument must be an image or text section.");const v=[];let f=!1;for(let y=1;y<=o.length-1;++y){const E=o[y];if(f&&typeof E=="object"&&!Array.isArray(E)){f=!1;let O=null;if(E["font-scale"]&&(O=l.parseObjectValue(E["font-scale"],y,"font-scale",ln),!O))return null;let k=null;if(E["text-font"]&&(k=l.parseObjectValue(E["text-font"],y,"text-font",va(gr)),!k))return null;let w=null;if(E["text-color"]&&(w=l.parseObjectValue(E["text-color"],y,"text-color",hi),!w))return null;const R=v[v.length-1];R.scale=O,R.font=k,R.textColor=w}else{const O=l.parse(o[y],y,Ur);if(!O)return null;const k=O.type.kind;if(k!=="string"&&k!=="value"&&k!=="null"&&k!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");f=!0,v.push({content:O,scale:null,font:null,textColor:null})}}return new pu(v)}evaluate(o){return new da(this.sections.map(l=>{const h=l.content.evaluate(o);return _o(h)===du?new Wa("",h,null,null,null):new Wa(_a(h),null,l.scale?l.scale.evaluate(o):null,l.font?l.font.evaluate(o).join(","):null,l.textColor?l.textColor.evaluate(o):null)}))}eachChild(o){for(const l of this.sections)o(l.content),l.scale&&o(l.scale),l.font&&o(l.font),l.textColor&&o(l.textColor)}outputDefined(){return!1}serialize(){const o=["format"];for(const l of this.sections){o.push(l.content.serialize());const h={};l.scale&&(h["font-scale"]=l.scale.serialize()),l.font&&(h["text-font"]=l.font.serialize()),l.textColor&&(h["text-color"]=l.textColor.serialize()),o.push(h)}return o}}class Mc{constructor(o,l){this.type=du,this.inputPrimary=o,this.inputSecondary=l}static parse(o,l){if(o.length<2)return l.error("Expected two or more arguments.");const h=l.parse(o[1],1,gr);if(!h)return l.error("No image name provided.");if(o.length===2)return new Mc(h);const v=l.parse(o[2],1,gr);return v?new Mc(h,v):l.error("Secondary image variant is not a string.")}evaluate(o){const l=ya.fromString(this.inputPrimary.evaluate(o),this.inputSecondary?this.inputSecondary.evaluate(o):void 0);return l&&o.availableImages&&(l.available=o.availableImages.indexOf(l.namePrimary)>-1,l.nameSecondary&&l.available&&o.availableImages&&(l.available=o.availableImages.indexOf(l.nameSecondary)>-1)),l}eachChild(o){o(this.inputPrimary),this.inputSecondary&&o(this.inputSecondary)}outputDefined(){return!1}serialize(){return this.inputSecondary?["image",this.inputPrimary.serialize(),this.inputSecondary.serialize()]:["image",this.inputPrimary.serialize()]}}function Pc(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}const pf={"to-boolean":yr,"to-color":hi,"to-number":ln,"to-string":gr};class pl{constructor(o,l){this.type=o,this.args=l}static parse(o,l){if(o.length<2)return l.error("Expected at least one argument.");const h=o[0],v=[];let f=dr;if(h==="to-array"){if(!Array.isArray(o[1]))return null;const y=o[1].length;if(l.expectedType){if(l.expectedType.kind!=="array")return l.error(`Expected ${l.expectedType.kind} but found array.`);f=va(l.expectedType.itemType,y)}else{if(!(y>0&&tc(o[1][0])))return null;f=va(_o(o[1][0]),y)}for(let E=0;E<y;E++){const O=o[1][E];let k;if(Pc(O)==="array")k=l.parse(O,void 0,f.itemType);else{const w=Pc(O);if(w!==f.itemType.kind)return l.error(`Expected ${f.itemType.kind} but found ${w}.`);k=l.registry.literal.parse(["literal",O===void 0?null:O],l)}if(!k)return null;v.push(k)}}else{if((h==="to-boolean"||h==="to-string")&&o.length!==2)return l.error("Expected one argument.");f=pf[h];for(let y=1;y<o.length;y++){const E=l.parse(o[y],y,Ur);if(!E)return null;v.push(E)}}return new pl(f,v)}evaluate(o){if(this.type.kind==="boolean")return!!this.args[0].evaluate(o);if(this.type.kind==="color"){let l,h;for(const v of this.args){if(l=v.evaluate(o),h=null,l instanceof Sr)return l;if(typeof l=="string"){const f=o.parseColor(l);if(f)return f}else if(Array.isArray(l)&&(h=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:jy(l[0],l[1],l[2],l[3]),!h))return new Sr(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new Bo(h||`Could not parse color from value '${typeof l=="string"?l:String(JSON.stringify(l))}'`)}if(this.type.kind==="number"){let l=null;for(const h of this.args){if(l=h.evaluate(o),l===null)return 0;const v=Number(l);if(!isNaN(v))return v}throw new Bo(`Could not convert ${JSON.stringify(l)} to number.`)}return this.type.kind==="formatted"?da.fromString(_a(this.args[0].evaluate(o))):this.type.kind==="resolvedImage"?ya.fromString(_a(this.args[0].evaluate(o))):this.type.kind==="array"?this.args.map(l=>l.evaluate(o)):_a(this.args[0].evaluate(o))}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){if(this.type.kind==="formatted")return new pu([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Mc(this.args[0]).serialize();const o=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(l=>{o.push(l.serialize())}),o}}const fS=["Unknown","Point","LineString","Polygon"];class Vy{constructor(o,l){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=o,this.options=l}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?fS[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(o){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const o=this.featureDistanceData.center,l=this.featureDistanceData.scale,{x:h,y:v}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(h*l-o[0])+this.featureDistanceData.bearing[1]*(v*l-o[1])}return 0}parseColor(o){let l=this._parseColorCache[o];return l||(l=this._parseColorCache[o]=Sr.parse(o)),l}getConfig(o){return this.options?this.options.get(o):null}}class Oa{constructor(o,l,h,v,f){this.name=o,this.type=l,this._evaluate=h,this.args=v,this._overloadIndex=f}evaluate(o){if(!this._evaluate){const l=Oa.definitions[this.name];this._evaluate=Array.isArray(l)?l[2]:l.overloads[this._overloadIndex][1]}return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(o=>o.serialize()))}static parse(o,l){const h=o[0],v=Oa.definitions[h];if(!v)return l.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const f=Array.isArray(v)?v[0]:v.type,y=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,E=[];let O=null,k=-1;for(const[w,R]of y){if(Array.isArray(w)&&w.length!==o.length-1)continue;E.push(w),k++,O=new e_(l.registry,l.path,null,l.scope,void 0,l._scope,l.options);const D=[];let P=!1;for(let A=1;A<o.length;A++){const F=o[A],q=Array.isArray(w)?w[A-1]:w.type,Z=O.parse(F,1+D.length,q);if(!Z){P=!0;break}D.push(Z)}if(!P)if(Array.isArray(w)&&w.length!==D.length)O.error(`Expected ${w.length} arguments, but found ${D.length} instead.`);else{for(let A=0;A<D.length;A++){const F=Array.isArray(w)?w[A]:w.type,q=D[A];O.concat(A+1).checkSubtype(F,q.type)}if(O.errors.length===0)return new Oa(h,f,R,D,k)}}if(E.length===1)l.errors.push(...O.errors);else{const w=(E.length?E:y.map(([D])=>D)).map(pS).join(" | "),R=[];for(let D=1;D<o.length;D++){const P=l.parse(o[D],1+R.length);if(!P)return null;R.push(co(P.type))}l.error(`Expected arguments of type ${w}, but found (${R.join(", ")}) instead.`)}return null}static register(o,l){Oa.definitions=l;for(const h in l)o[h]=Oa}}function pS(u){return Array.isArray(u)?`(${u.map(co).join(", ")})`:`(${co(u.type)}...)`}class mf{constructor(o,l,h){this.type=Ic,this.locale=h,this.caseSensitive=o,this.diacriticSensitive=l}static parse(o,l){if(o.length!==2)return l.error("Expected one argument.");const h=o[1];if(typeof h!="object"||Array.isArray(h))return l.error("Collator options argument must be an object.");const v=h["case-sensitive"]===void 0?l.parse(!1,1,yr):l.parseObjectValue(h["case-sensitive"],1,"case-sensitive",yr);if(!v)return null;const f=h["diacritic-sensitive"]===void 0?l.parse(!1,1,yr):l.parseObjectValue(h["diacritic-sensitive"],1,"diacritic-sensitive",yr);if(!f)return null;let y=null;return h.locale&&(y=l.parseObjectValue(h.locale,1,"locale",gr),!y)?null:new mf(v,f,y)}evaluate(o){return new ff(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}serialize(){const o={};return o["case-sensitive"]=this.caseSensitive.serialize(),o["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(o.locale=this.locale.serialize()),["collator",o]}}function Hy(u,o,l=0,h=u.length-1,v=gu){for(;h>l;){if(h-l>600){const O=h-l+1,k=o-l+1,w=Math.log(O),R=.5*Math.exp(2*w/3),D=.5*Math.sqrt(w*R*(O-R)/O)*(k-O/2<0?-1:1);Hy(u,o,Math.max(l,Math.floor(o-k*R/O+D)),Math.min(h,Math.floor(o+(O-k)*R/O+D)),v)}const f=u[o];let y=l,E=h;for(mu(u,l,o),v(u[h],f)>0&&mu(u,l,h);y<E;){for(mu(u,y,E),y++,E--;v(u[y],f)<0;)y++;for(;v(u[E],f)>0;)E--}v(u[l],f)===0?mu(u,l,E):(E++,mu(u,E,h)),E<=o&&(l=E+1),o<=E&&(h=E-1)}}function mu(u,o,l){const h=u[o];u[o]=u[l],u[l]=h}function gu(u,o){return u<o?-1:u>o?1:0}function mS(u){let o=0;for(let l,h,v=0,f=u.length,y=f-1;v<f;y=v++)l=u[v],h=u[y],o+=(h.x-l.x)*(l.y+h.y);return o}function Wd(u,o){u[0]=Math.min(u[0],o[0]),u[1]=Math.min(u[1],o[1]),u[2]=Math.max(u[2],o[0]),u[3]=Math.max(u[3],o[1])}function Rc(u,o){return!(u[0]<=o[0]||u[2]>=o[2]||u[1]<=o[1]||u[3]>=o[3])}function gS(u,o,l){const h=u[0]-o[0],v=u[1]-o[1],f=u[0]-l[0],y=u[1]-l[1];return h*y-f*v==0&&h*f<=0&&v*y<=0}function vu(u,o,l=!1){let h=!1;for(let E=0,O=o.length;E<O;E++){const k=o[E];for(let w=0,R=k.length,D=R-1;w<R;D=w++){const P=k[D],A=k[w];if(gS(u,P,A))return l;(f=P)[1]>(v=u)[1]!=(y=A)[1]>v[1]&&v[0]<(y[0]-f[0])*(v[1]-f[1])/(y[1]-f[1])+f[0]&&(h=!h)}}var v,f,y;return h}function Uy(u,o,l,h){const v=h[0]-l[0],f=h[1]-l[1],y=(u[0]-l[0])*f-v*(u[1]-l[1]),E=(o[0]-l[0])*f-v*(o[1]-l[1]);return y>0&&E<0||y<0&&E>0}function gf(u,o,l,h){return(v=[h[0]-l[0],h[1]-l[1]])[0]*(f=[o[0]-u[0],o[1]-u[1]])[1]-v[1]*f[0]!=0&&!(!Uy(u,o,l,h)||!Uy(l,h,u,o));var v,f}const Ga=8192;function Br(u,o){const l=(180+u[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,v=Math.pow(2,o.z);return[Math.round(l*v*Ga),Math.round(h*v*Ga)]}function lr(u,o){for(let l=0;l<o.length;l++)if(vu(u,o[l]))return!0;return!1}function Ym(u,o,l){for(const h of l)for(let v=0,f=h.length,y=f-1;v<f;y=v++)if(gf(u,o,h[y],h[v]))return!0;return!1}function Ir(u,o){for(let l=0;l<u.length;++l)if(!vu(u[l],o))return!1;for(let l=0;l<u.length-1;++l)if(Ym(u[l],u[l+1],o))return!1;return!0}function Jm(u,o){for(let l=0;l<o.length;l++)if(Ir(u,o[l]))return!0;return!1}function Gd(u,o,l){const h=[];for(let v=0;v<u.length;v++){const f=[];for(let y=0;y<u[v].length;y++){const E=Br(u[v][y],l);Wd(o,E),f.push(E)}h.push(f)}return h}function _r(u,o,l){const h=[];for(let v=0;v<u.length;v++){const f=Gd(u[v],o,l);h.push(f)}return h}function Qm(u,o,l,h){if(u[0]<l[0]||u[0]>l[2]){const v=.5*h;let f=u[0]-l[0]>v?-h:l[0]-u[0]>v?h:0;f===0&&(f=u[0]-l[2]>v?-h:l[2]-u[0]>v?h:0),u[0]+=f}Wd(o,u)}function vf(u,o,l,h){const v=Math.pow(2,h.z)*Ga,f=[h.x*Ga,h.y*Ga],y=[];if(!u)return y;for(const E of u)for(const O of E){const k=[O.x+f[0],O.y+f[1]];Qm(k,o,l,v),y.push(k)}return y}function eg(u,o,l,h){const v=Math.pow(2,h.z)*Ga,f=[h.x*Ga,h.y*Ga],y=[];if(!u)return y;for(const O of u){const k=[];for(const w of O){const R=[w.x+f[0],w.y+f[1]];Wd(o,R),k.push(R)}y.push(k)}if(o[2]-o[0]<=v/2){(E=o)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const O of y)for(const k of O)Qm(k,o,l,v)}var E;return y}class nc{constructor(o,l){this.type=yr,this.geojson=o,this.geometries=l}static parse(o,l){if(o.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(tc(o[1])){const h=o[1];if(h.type==="FeatureCollection")for(let v=0;v<h.features.length;++v){const f=h.features[v].geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new nc(h,h.features[v].geometry)}else if(h.type==="Feature"){const v=h.geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new nc(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new nc(h,h)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(l,h){const v=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],y=l.canonicalID();if(!y)return!1;if(h.type==="Polygon"){const E=Gd(h.coordinates,f,y),O=vf(l.geometry(),v,f,y);if(!Rc(v,f))return!1;for(const k of O)if(!vu(k,E))return!1}if(h.type==="MultiPolygon"){const E=_r(h.coordinates,f,y),O=vf(l.geometry(),v,f,y);if(!Rc(v,f))return!1;for(const k of O)if(!lr(k,E))return!1}return!0}(o,this.geometries);if(o.geometryType()==="LineString")return function(l,h){const v=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],y=l.canonicalID();if(!y)return!1;if(h.type==="Polygon"){const E=Gd(h.coordinates,f,y),O=eg(l.geometry(),v,f,y);if(!Rc(v,f))return!1;for(const k of O)if(!Ir(k,E))return!1}if(h.type==="MultiPolygon"){const E=_r(h.coordinates,f,y),O=eg(l.geometry(),v,f,y);if(!Rc(v,f))return!1;for(const k of O)if(!Jm(k,E))return!1}return!0}(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const Oc={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},ea=1/298.257223563,yf=ea*(2-ea),yu=Math.PI/180;class _u{static fromTile(o,l,h){const v=Math.PI*(1-2*(o+.5)/Math.pow(2,l)),f=Math.atan(.5*(Math.exp(v)-Math.exp(-v)))/yu;return new _u(f,h)}static get units(){return Oc}constructor(o,l){if(o===void 0)throw new Error("No latitude given.");if(l&&!Oc[l])throw new Error(`Unknown unit ${l}. Use one of: ${Object.keys(Oc).join(", ")}`);const h=6378.137*yu*(l?Oc[l]:1),v=Math.cos(o*yu),f=1/(1-yf*(1-v*v)),y=Math.sqrt(f);this.kx=h*y*v,this.ky=h*y*f*(1-yf)}distance(o,l){const h=eo(o[0]-l[0])*this.kx,v=(o[1]-l[1])*this.ky;return Math.sqrt(h*h+v*v)}bearing(o,l){const h=eo(l[0]-o[0])*this.kx;return Math.atan2(h,(l[1]-o[1])*this.ky)/yu}destination(o,l,h){const v=h*yu;return this.offset(o,Math.sin(v)*l,Math.cos(v)*l)}offset(o,l,h){return[o[0]+l/this.kx,o[1]+h/this.ky]}lineDistance(o){let l=0;for(let h=0;h<o.length-1;h++)l+=this.distance(o[h],o[h+1]);return l}area(o){let l=0;for(let h=0;h<o.length;h++){const v=o[h];for(let f=0,y=v.length,E=y-1;f<y;E=f++)l+=eo(v[f][0]-v[E][0])*(v[f][1]+v[E][1])*(h?-1:1)}return Math.abs(l)/2*this.kx*this.ky}along(o,l){let h=0;if(l<=0)return o[0];for(let v=0;v<o.length-1;v++){const f=o[v],y=o[v+1],E=this.distance(f,y);if(h+=E,h>l)return ml(f,y,(l-(h-E))/E)}return o[o.length-1]}pointToSegmentDistance(o,l,h){let[v,f]=l,y=eo(h[0]-v)*this.kx,E=(h[1]-f)*this.ky;if(y!==0||E!==0){const O=(eo(o[0]-v)*this.kx*y+(o[1]-f)*this.ky*E)/(y*y+E*E);O>1?(v=h[0],f=h[1]):O>0&&(v+=y/this.kx*O,f+=E/this.ky*O)}return y=eo(o[0]-v)*this.kx,E=(o[1]-f)*this.ky,Math.sqrt(y*y+E*E)}pointOnLine(o,l){let h=1/0,v=o[0][0],f=o[0][1],y=0,E=0;for(let O=0;O<o.length-1;O++){let k=o[O][0],w=o[O][1],R=eo(o[O+1][0]-k)*this.kx,D=(o[O+1][1]-w)*this.ky,P=0;R===0&&D===0||(P=(eo(l[0]-k)*this.kx*R+(l[1]-w)*this.ky*D)/(R*R+D*D),P>1?(k=o[O+1][0],w=o[O+1][1]):P>0&&(k+=R/this.kx*P,w+=D/this.ky*P)),R=eo(l[0]-k)*this.kx,D=(l[1]-w)*this.ky;const A=R*R+D*D;A<h&&(h=A,v=k,f=w,y=O,E=P)}return{point:[v,f],index:y,t:Math.max(0,Math.min(1,E))}}lineSlice(o,l,h){let v=this.pointOnLine(h,o),f=this.pointOnLine(h,l);if(v.index>f.index||v.index===f.index&&v.t>f.t){const k=v;v=f,f=k}const y=[v.point],E=v.index+1,O=f.index;!_f(h[E],y[0])&&E<=O&&y.push(h[E]);for(let k=E+1;k<=O;k++)y.push(h[k]);return _f(h[O],f.point)||y.push(f.point),y}lineSliceAlong(o,l,h){let v=0;const f=[];for(let y=0;y<h.length-1;y++){const E=h[y],O=h[y+1],k=this.distance(E,O);if(v+=k,v>o&&f.length===0&&f.push(ml(E,O,(o-(v-k))/k)),v>=l)return f.push(ml(E,O,(l-(v-k))/k)),f;v>o&&f.push(O)}return f}bufferPoint(o,l){const h=l/this.ky,v=l/this.kx;return[o[0]-v,o[1]-h,o[0]+v,o[1]+h]}bufferBBox(o,l){const h=l/this.ky,v=l/this.kx;return[o[0]-v,o[1]-h,o[2]+v,o[3]+h]}insideBBox(o,l){return eo(o[0]-l[0])>=0&&eo(o[0]-l[2])<=0&&o[1]>=l[1]&&o[1]<=l[3]}}function _f(u,o){return u[0]===o[0]&&u[1]===o[1]}function ml(u,o,l){const h=eo(o[0]-u[0]);return[u[0]+h*l,u[1]+(o[1]-u[1])*l]}function eo(u){for(;u<-180;)u+=360;for(;u>180;)u-=360;return u}class tg{constructor(o=[],l=(h,v)=>h<v?-1:h>v?1:0){if(this.data=o,this.length=this.data.length,this.compare=l,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(o){this.data.push(o),this._up(this.length++)}pop(){if(this.length===0)return;const o=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:l,compare:h}=this,v=l[o];for(;o>0;){const f=o-1>>1,y=l[f];if(h(v,y)>=0)break;l[o]=y,o=f}l[o]=v}_down(o){const{data:l,compare:h}=this,v=this.length>>1,f=l[o];for(;o<v;){let y=1+(o<<1);const E=y+1;if(E<this.length&&h(l[E],l[y])<0&&(y=E),h(l[y],f)>=0)break;l[o]=l[y],o=y}l[o]=f}}var Tn=8192;function Wy(u,o){return o.dist-u.dist}const xu=100,xf=50;function bf(u){const o=[1/0,1/0,-1/0,-1/0];if(o.length!==u.length)return!1;for(let l=0;l<o.length;l++)if(o[l]!==u[l])return!1;return!0}function wf(u){return u[1]-u[0]+1}function gl(u,o){const l=u[1]>=u[0]&&u[1]<o;return l||console.warn("Distance Expression: Index is out of range"),l}function ng(u,o){if(u[0]>u[1])return[null,null];const l=wf(u);if(o){if(l===2)return[u,null];const h=Math.floor(l/2);return[[u[0],u[0]+h],[u[0]+h,u[1]]]}{if(l===1)return[u,null];const h=Math.floor(l/2)-1;return[[u[0],u[0]+h],[u[0]+h+1,u[1]]]}}function qa(u,o){const l=[1/0,1/0,-1/0,-1/0];if(!gl(o,u.length))return l;for(let h=o[0];h<=o[1];++h)Wd(l,u[h]);return l}function Sf(u){const o=[1/0,1/0,-1/0,-1/0];for(let l=0;l<u.length;++l)for(let h=0;h<u[l].length;++h)Wd(o,u[l][h]);return o}function bu(u,o,l){if(bf(u)||bf(o))return NaN;let h=0,v=0;return u[2]<o[0]&&(h=o[0]-u[2]),u[0]>o[2]&&(h=u[0]-o[2]),u[1]>o[3]&&(v=u[1]-o[3]),u[3]<o[1]&&(v=o[1]-u[3]),l.distance([0,0],[h,v])}function Gy(u){return 360*u-180}function qy(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}function Ka(u,o){const l=Math.pow(2,o.z),h=(u.y/Tn+o.y)/l;return[Gy((u.x/Tn+o.x)/l),qy(h)]}function Ky(u,o){const l=[];for(let h=0;h<u.length;++h)l.push(Ka(u[h],o));return l}function rg(u,o,l){const h=l.pointOnLine(o,u).point;return l.distance(u,h)}function ig(u,o,l,h,v){const f=l.slice(h[0],h[1]+1);let y=1/0;for(let E=o[0];E<=o[1];++E)if((y=Math.min(y,rg(u[E],f,v)))===0)return 0;return y}function Cf(u,o,l,h,v){const f=Math.min(v.pointToSegmentDistance(u,l,h),v.pointToSegmentDistance(o,l,h)),y=Math.min(v.pointToSegmentDistance(l,u,o),v.pointToSegmentDistance(h,u,o));return Math.min(f,y)}function Xy(u,o,l,h,v){if(!gl(o,u.length)||!gl(h,l.length))return NaN;let f=1/0;for(let y=o[0];y<o[1];++y)for(let E=h[0];E<h[1];++E){if(gf(u[y],u[y+1],l[E],l[E+1]))return 0;f=Math.min(f,Cf(u[y],u[y+1],l[E],l[E+1],v))}return f}function Zy(u,o,l,h,v){if(!gl(o,u.length)||!gl(h,l.length))return NaN;let f=1/0;for(let y=o[0];y<=o[1];++y)for(let E=h[0];E<=h[1];++E)if((f=Math.min(f,v.distance(u[y],l[E])))===0)return f;return f}function Yy(u,o,l){if(vu(u,o,!0))return 0;let h=1/0;for(const v of o){const f=v.length;if(f<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(v[0]!==v[f-1]&&(h=Math.min(h,l.pointToSegmentDistance(u,v[f-1],v[0])))===0||(h=Math.min(h,rg(u,v,l)))===0)return h}return h}function Jy(u,o,l,h){if(!gl(o,u.length))return NaN;for(let f=o[0];f<=o[1];++f)if(vu(u[f],l,!0))return 0;let v=1/0;for(let f=o[0];f<o[1];++f)for(const y of l)for(let E=0,O=y.length,k=O-1;E<O;k=E++){if(gf(u[f],u[f+1],y[k],y[E]))return 0;v=Math.min(v,Cf(u[f],u[f+1],y[k],y[E],h))}return v}function og(u,o){for(const l of u)for(let h=0;h<=l.length-1;++h)if(vu(l[h],o,!0))return!0;return!1}function Qy(u,o,l,h=1/0){const v=Sf(u),f=Sf(o);if(h!==1/0&&bu(v,f,l)>=h)return h;if(Rc(v,f)){if(og(u,o))return 0}else if(og(o,u))return 0;let y=h;for(const E of u)for(let O=0,k=E.length,w=k-1;O<k;w=O++)for(const R of o)for(let D=0,P=R.length,A=P-1;D<P;A=D++){if(gf(E[w],E[O],R[A],R[D]))return 0;y=Math.min(y,Cf(E[w],E[O],R[A],R[D],l))}return y}function qd(u,o,l,h,v,f,y){if(f===null||y===null)return;const E=bu(qa(h,f),qa(v,y),l);E<o&&u.push({dist:E,range1:f,range2:y})}function Ef(u,o,l,h,v=1/0){let f=Math.min(h.distance(u[0],l[0][0]),v);if(f===0)return f;const y=new tg([{dist:0,range1:[0,u.length-1],range2:[0,0]}],Wy),E=o?xf:xu,O=Sf(l);for(;y.length;){const k=y.pop();if(k.dist>=f)continue;const w=k.range1;if(wf(w)<=E){if(!gl(w,u.length))return NaN;if(o){const R=Jy(u,w,l,h);if((f=Math.min(f,R))===0)return f}else for(let R=w[0];R<=w[1];++R){const D=Yy(u[R],l,h);if((f=Math.min(f,D))===0)return f}}else{const R=ng(w,o);if(R[0]!==null){const D=bu(qa(u,R[0]),O,h);D<f&&y.push({dist:D,range1:R[0],range2:[0,0]})}if(R[1]!==null){const D=bu(qa(u,R[1]),O,h);D<f&&y.push({dist:D,range1:R[1],range2:[0,0]})}}}return f}function Kd(u,o,l,h,v,f=1/0){let y=Math.min(f,v.distance(u[0],l[0]));if(y===0)return y;const E=new tg([{dist:0,range1:[0,u.length-1],range2:[0,l.length-1]}],Wy),O=o?xf:xu,k=h?xf:xu;for(;E.length;){const w=E.pop();if(w.dist>=y)continue;const R=w.range1,D=w.range2;if(wf(R)<=O&&wf(D)<=k){if(!gl(R,u.length)||!gl(D,l.length))return NaN;if(o&&h?y=Math.min(y,Xy(u,R,l,D,v)):o||h?o&&!h?y=Math.min(y,ig(l,D,u,R,v)):!o&&h&&(y=Math.min(y,ig(u,R,l,D,v))):y=Math.min(y,Zy(u,R,l,D,v)),y===0)return y}else{const P=ng(R,o),A=ng(D,h);qd(E,y,v,u,l,P[0],A[0]),qd(E,y,v,u,l,P[0],A[1]),qd(E,y,v,u,l,P[1],A[0]),qd(E,y,v,u,l,P[1],A[1])}}return y}function wu(u,o,l,h,v=1/0){let f=v;const y=qa(u,[0,u.length-1]);for(const E of l)if(!(f!==1/0&&bu(y,qa(E,[0,E.length-1]),h)>=f)&&(f=Math.min(f,Kd(u,o,E,!0,h,f)),f===0))return f;return f}function Xd(u,o,l,h,v=1/0){let f=v;const y=qa(u,[0,u.length-1]);for(const E of l){if(f!==1/0&&bu(y,Sf(E),h)>=f)continue;const O=Ef(u,o,E,h,f);if(isNaN(O))return O;if((f=Math.min(f,O))===0)return f}return f}function Tf(u){return u==="Point"||u==="MultiPoint"||u==="LineString"||u==="MultiLineString"||u==="Polygon"||u==="MultiPolygon"}class rc{constructor(o,l){this.type=ln,this.geojson=o,this.geometries=l}static parse(o,l){if(o.length!==2)return l.error(`'distance' expression requires either one argument, but found ' ${o.length-1} instead.`);if(tc(o[1])){const h=o[1];if(h.type==="FeatureCollection"){for(let v=0;v<h.features.length;++v)if(Tf(h.features[v].geometry.type))return new rc(h,h.features[v].geometry)}else if(h.type==="Feature"){if(Tf(h.geometry.type))return new rc(h,h.geometry)}else if(Tf(h.type))return new rc(h,h)}return l.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(o){const l=o.geometry(),h=o.canonicalID();if(l!=null&&h!=null){if(o.geometryType()==="Point")return function(v,f,y){const E=[];for(const k of v)for(const w of k)E.push(Ka(w,f));const O=new _u(E[0][1],"meters");return y.type==="Point"||y.type==="MultiPoint"||y.type==="LineString"?Kd(E,!1,y.type==="Point"?[y.coordinates]:y.coordinates,y.type==="LineString",O):y.type==="MultiLineString"?wu(E,!1,y.coordinates,O):y.type==="Polygon"||y.type==="MultiPolygon"?Xd(E,!1,y.type==="Polygon"?[y.coordinates]:y.coordinates,O):null}(l,h,this.geometries);if(o.geometryType()==="LineString")return function(v,f,y){const E=[];for(const k of v){const w=[];for(const R of k)w.push(Ka(R,f));E.push(w)}const O=new _u(E[0][0][1],"meters");if(y.type==="Point"||y.type==="MultiPoint"||y.type==="LineString")return wu(y.type==="Point"?[y.coordinates]:y.coordinates,y.type==="LineString",E,O);if(y.type==="MultiLineString"){let k=1/0;for(let w=0;w<y.coordinates.length;w++){const R=wu(y.coordinates[w],!0,E,O,k);if(isNaN(R))return R;if((k=Math.min(k,R))===0)return k}return k}if(y.type==="Polygon"||y.type==="MultiPolygon"){let k=1/0;for(let w=0;w<E.length;w++){const R=Xd(E[w],!0,y.type==="Polygon"?[y.coordinates]:y.coordinates,O,k);if(isNaN(R))return R;if((k=Math.min(k,R))===0)return k}return k}return null}(l,h,this.geometries);if(o.geometryType()==="Polygon")return function(v,f,y){const E=[];for(const k of function(w,R){const D=w.length;if(D<=1)return[w];const P=[];let A,F;for(let q=0;q<D;q++){const Z=mS(w[q]);Z!==0&&(w[q].area=Math.abs(Z),F===void 0&&(F=Z<0),F===Z<0?(A&&P.push(A),A=[w[q]]):A.push(w[q]))}return A&&P.push(A),P}(v)){const w=[];for(let R=0;R<k.length;++R)w.push(Ky(k[R],f));E.push(w)}const O=new _u(E[0][0][0][1],"meters");if(y.type==="Point"||y.type==="MultiPoint"||y.type==="LineString")return Xd(y.type==="Point"?[y.coordinates]:y.coordinates,y.type==="LineString",E,O);if(y.type==="MultiLineString"){let k=1/0;for(let w=0;w<y.coordinates.length;w++){const R=Xd(y.coordinates[w],!0,E,O,k);if(isNaN(R))return R;if((k=Math.min(k,R))===0)return k}return k}return y.type==="Polygon"||y.type==="MultiPolygon"?function(k,w,R){let D=1/0;for(const P of k)for(const A of w){const F=Qy(P,A,R,D);if(isNaN(F))return F;if((D=Math.min(D,F))===0)return D}return D}(y.type==="Polygon"?[y.coordinates]:y.coordinates,E,O):null}(l,h,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function ic(u,o){switch(u){case"string":return _a(o);case"number":return+o;case"boolean":return!!o;case"color":return Sr.parse(o);case"formatted":return da.fromString(_a(o));case"resolvedImage":return ya.fromString(_a(o))}return o}function qr(u,o,l,h){return h!==void 0&&(u=h*Math.round(u/h)),o!==void 0&&u<o&&(u=o),l!==void 0&&u>l&&(u=l),u}class Su{constructor(o,l,h){this.type=o,this.key=l,this.scope=h}static parse(o,l){let h=l.expectedType;if(h==null&&(h=Ur),o.length<2||o.length>3)return l.error("Invalid number of arguments for 'config' expression.");const v=l.parse(o[1],1);if(!(v instanceof Ss))return l.error("Key name of 'config' expression must be a string literal.");if(o.length>=3){const f=l.parse(o[2],2);return f instanceof Ss?new Su(h,_a(v.value),_a(f.value)):l.error("Scope of 'config' expression must be a string literal.")}return new Su(h,_a(v.value))}evaluate(o){const l=[this.key,this.scope,o.scope].filter(Boolean).join(""),h=o.getConfig(l);if(!h)return null;const{type:v,value:f,values:y,minValue:E,maxValue:O,stepValue:k}=h,w=h.default.evaluate(o);let R=w;if(f){const D=o.scope;o.scope=(D||"").split("").slice(1).join(""),R=f.evaluate(o),o.scope=D}return v&&(R=ic(v,R)),R===void 0||E===void 0&&O===void 0&&k===void 0||(typeof R=="number"?R=qr(R,E,O,k):Array.isArray(R)&&(R=R.map(D=>typeof D=="number"?qr(D,E,O,k):D))),f!==void 0&&R!==void 0&&y&&!y.includes(R)&&(R=w,v&&(R=ic(v,R))),(v&&v!==this.type||R!==void 0&&_o(R)!==this.type)&&(R=ic(this.type.kind,R)),R}eachChild(){}outputDefined(){return!1}serialize(){const o=["config",this.key];return this.scope&&o.concat(this.key),o}}function Zd(u){if(u instanceof Oa&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof nc||u instanceof rc)return!1;let o=!0;return u.eachChild(l=>{o&&!Zd(l)&&(o=!1)}),o}function If(u){if(u instanceof Oa&&u.name==="feature-state")return!1;let o=!0;return u.eachChild(l=>{o&&!If(l)&&(o=!1)}),o}function Yd(u){if(u instanceof Su)return new Set([u.key]);let o=new Set;return u.eachChild(l=>{o=new Set([...o,...Yd(l)])}),o}function Cu(u,o){if(u instanceof Oa&&o.indexOf(u.name)>=0)return!1;let l=!0;return u.eachChild(h=>{l&&!Cu(h,o)&&(l=!1)}),l}class bi{constructor(o,l){this.type=l.type,this.name=o,this.boundExpression=l}static parse(o,l){if(o.length!==2||typeof o[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const h=o[1];return l.scope.has(h)?new bi(h,l.scope.get(h)):l.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class ag{constructor(o,l=[],h,v=new ec,f=[],y,E){this.registry=o,this.path=l,this.key=l.map(O=>typeof O=="string"?`['${O}']`:`[${O}]`).join(""),this.scope=v,this.errors=f,this.expectedType=h,this._scope=y,this.options=E}parse(o,l,h,v,f={}){return l||h?this.concat(l,null,h,v)._parse(o,f):this._parse(o,f)}parseObjectValue(o,l,h,v,f,y={}){return this.concat(l,h,v,f)._parse(o,y)}_parse(o,l){function h(v,f,y){return y==="assert"?new Cs(f,[v]):y==="coerce"?new pl(f,[v]):v}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const v=typeof o[0]=="string"?this.registry[o[0]]:void 0;if(v){let f=v.parse(o,this);if(!f)return null;if(this.expectedType){const y=this.expectedType,E=f.type;if(y.kind!=="string"&&y.kind!=="number"&&y.kind!=="boolean"&&y.kind!=="object"&&y.kind!=="array"||E.kind!=="value")if(y.kind!=="color"&&y.kind!=="formatted"&&y.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string"){if(this.checkSubtype(y,E))return null}else f=h(f,y,l.typeAnnotation||"coerce");else f=h(f,y,l.typeAnnotation||"assert")}if(!(f instanceof Ss)&&f.type.kind!=="resolvedImage"&&sg(f)){const y=new Vy(this._scope,this.options);try{f=new Ss(f.type,f.evaluate(y))}catch(E){return this.error(E.message),null}}return f}return pl.parse(["to-array",o],this)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,l,h,v){let f=typeof o=="number"?this.path.concat(o):this.path;f=typeof l=="string"?f.concat(l):f;const y=v?this.scope.concat(v):this.scope;return new ag(this.registry,f,h||null,y,this.errors,this._scope,this.options)}error(o,...l){const h=`${this.key}${l.map(v=>`[${v}]`).join("")}`;this.errors.push(new ua(h,o))}checkSubtype(o,l){const h=hu(o,l);return h&&this.error(h),h}}var e_=ag;function sg(u){if(u instanceof bi)return sg(u.boundExpression);if(u instanceof Oa&&u.name==="error"||u instanceof mf||u instanceof nc||u instanceof rc||u instanceof Su)return!1;const o=u instanceof pl||u instanceof Cs;let l=!0;return u.eachChild(h=>{l=o?l&&sg(h):l&&h instanceof Ss}),!!l&&Zd(u)&&Cu(u,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function Mf(u,o){const l=u.length-1;let h,v,f=0,y=l,E=0;for(;f<=y;)if(E=Math.floor((f+y)/2),h=u[E],v=u[E+1],h<=o){if(E===l||o<v)return E;f=E+1}else{if(!(h>o))throw new Bo("Input is not a number.");y=E-1}return 0}class Jd{constructor(o,l,h){this.type=o,this.input=l,this.labels=[],this.outputs=[];for(const[v,f]of h)this.labels.push(v),this.outputs.push(f)}static parse(o,l){if(o.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return l.error("Expected an even number of arguments.");const h=l.parse(o[1],1,ln);if(!h)return null;const v=[];let f=null;l.expectedType&&l.expectedType.kind!=="value"&&(f=l.expectedType);for(let y=1;y<o.length;y+=2){const E=y===1?-1/0:o[y],O=o[y+1],k=y,w=y+1;if(typeof E!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(v.length&&v[v.length-1][0]>=E)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);const R=l.parse(O,w,f);if(!R)return null;f=f||R.type,v.push([E,R])}return new Jd(f,h,v)}evaluate(o){const l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(o);const v=this.input.evaluate(o);if(v<=l[0])return h[0].evaluate(o);const f=l.length;return v>=l[f-1]?h[f-1].evaluate(o):h[Mf(l,v)].evaluate(o)}eachChild(o){o(this.input);for(const l of this.outputs)o(l)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}serialize(){const o=["step",this.input.serialize()];for(let l=0;l<this.labels.length;l++)l>0&&o.push(this.labels[l]),o.push(this.outputs[l].serialize());return o}}const t_=.95047,n_=1.08883,r_=4/29,Eu=6/29,i_=3*Eu*Eu,vS=Eu*Eu*Eu,yS=Math.PI/180,_S=180/Math.PI;function lg(u){return u>vS?Math.pow(u,1/3):u/i_+r_}function cg(u){return u>Eu?u*u*u:i_*(u-r_)}function ug(u){return 255*(u<=.0031308?12.92*u:1.055*Math.pow(u,1/2.4)-.055)}function dg(u){return(u/=255)<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function o_(u){const o=dg(u.r),l=dg(u.g),h=dg(u.b),v=lg((.4124564*o+.3575761*l+.1804375*h)/t_),f=lg((.2126729*o+.7151522*l+.072175*h)/1);return{l:116*f-16,a:500*(v-f),b:200*(f-lg((.0193339*o+.119192*l+.9503041*h)/n_)),alpha:u.a}}function a_(u){let o=(u.l+16)/116,l=isNaN(u.a)?o:o+u.a/500,h=isNaN(u.b)?o:o-u.b/200;return o=1*cg(o),l=t_*cg(l),h=n_*cg(h),new Sr(ug(3.2404542*l-1.5371385*o-.4985314*h),ug(-.969266*l+1.8760108*o+.041556*h),ug(.0556434*l-.2040259*o+1.0572252*h),u.alpha)}function xS(u,o,l){const h=o-u;return u+l*(h>180||h<-180?h-360*Math.round(h/360):h)}const Qd={forward:o_,reverse:a_,interpolate:function(u,o,l){return{l:Zn(u.l,o.l,l),a:Zn(u.a,o.a,l),b:Zn(u.b,o.b,l),alpha:Zn(u.alpha,o.alpha,l)}}},eh={forward:function(u){const{l:o,a:l,b:h}=o_(u),v=Math.atan2(h,l)*_S;return{h:v<0?v+360:v,c:Math.sqrt(l*l+h*h),l:o,alpha:u.a}},reverse:function(u){const o=u.h*yS,l=u.c;return a_({l:u.l,a:Math.cos(o)*l,b:Math.sin(o)*l,alpha:u.alpha})},interpolate:function(u,o,l){return{h:xS(u.h,o.h,l),c:Zn(u.c,o.c,l),l:Zn(u.l,o.l,l),alpha:Zn(u.alpha,o.alpha,l)}}};var s_=Object.freeze({__proto__:null,hcl:eh,lab:Qd});class Xa{constructor(o,l,h,v,f){this.type=o,this.operator=l,this.interpolation=h,this.input=v,this.labels=[],this.outputs=[];for(const[y,E]of f)this.labels.push(y),this.outputs.push(E)}static interpolationFactor(o,l,h,v){let f=0;if(o.name==="exponential")f=hg(l,o.base,h,v);else if(o.name==="linear")f=hg(l,1,h,v);else if(o.name==="cubic-bezier"){const y=o.controlPoints;f=new dt(y[0],y[1],y[2],y[3]).solve(hg(l,1,h,v))}return f}static parse(o,l){let[h,v,f,...y]=o;if(!Array.isArray(v)||v.length===0)return l.error("Expected an interpolation type expression.",1);if(v[0]==="linear")v={name:"linear"};else if(v[0]==="exponential"){const k=v[1];if(typeof k!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);v={name:"exponential",base:k}}else{if(v[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(v[0])}`,1,0);{const k=v.slice(1);if(k.length!==4||k.some(w=>typeof w!="number"||w<0||w>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);v={name:"cubic-bezier",controlPoints:k}}}if(o.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(f=l.parse(f,2,ln),!f)return null;const E=[];let O=null;h==="interpolate-hcl"||h==="interpolate-lab"?O=hi:l.expectedType&&l.expectedType.kind!=="value"&&(O=l.expectedType);for(let k=0;k<y.length;k+=2){const w=y[k],R=y[k+1],D=k+3,P=k+4;if(typeof w!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(E.length&&E[E.length-1][0]>=w)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',D);const A=l.parse(R,P,O);if(!A)return null;O=O||A.type,E.push([w,A])}return O.kind==="number"||O.kind==="color"||O.kind==="array"&&O.itemType.kind==="number"&&typeof O.N=="number"?new Xa(O,h,v,f,E):l.error(`Type ${co(O)} is not interpolatable.`)}evaluate(o){const l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(o);const v=this.input.evaluate(o);if(v<=l[0])return h[0].evaluate(o);const f=l.length;if(v>=l[f-1])return h[f-1].evaluate(o);const y=Mf(l,v),E=Xa.interpolationFactor(this.interpolation,v,l[y],l[y+1]),O=h[y].evaluate(o),k=h[y+1].evaluate(o);return this.operator==="interpolate"?Xo[this.type.kind.toLowerCase()](O,k,E):this.operator==="interpolate-hcl"?eh.reverse(eh.interpolate(eh.forward(O),eh.forward(k),E)):Qd.reverse(Qd.interpolate(Qd.forward(O),Qd.forward(k),E))}eachChild(o){o(this.input);for(const l of this.outputs)o(l)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}serialize(){let o;o=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const l=[this.operator,o,this.input.serialize()];for(let h=0;h<this.labels.length;h++)l.push(this.labels[h],this.outputs[h].serialize());return l}}function hg(u,o,l,h){const v=h-l,f=u-l;return v===0?0:o===1?f/v:(Math.pow(o,f)-1)/(Math.pow(o,v)-1)}class Pf{constructor(o,l){this.type=o,this.args=l}static parse(o,l){if(o.length<2)return l.error("Expectected at least one argument.");let h=null;const v=l.expectedType;v&&v.kind!=="value"&&(h=v);const f=[];for(const E of o.slice(1)){const O=l.parse(E,1+f.length,h,void 0,{typeAnnotation:"omit"});if(!O)return null;h=h||O.type,f.push(O)}const y=v&&f.some(E=>hu(v,E.type));return new Pf(y?Ur:h,f)}evaluate(o){let l,h=null,v=0;for(const f of this.args){if(v++,h=f.evaluate(o),h&&h instanceof ya&&!h.available&&(l||(l=h),h=null,v===this.args.length))return l;if(h!==null)break}return h}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){const o=["coalesce"];return this.eachChild(l=>{o.push(l.serialize())}),o}}class Rf{constructor(o,l){this.type=l.type,this.bindings=[].concat(o),this.result=l}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const l of this.bindings)o(l[1]);o(this.result)}static parse(o,l){if(o.length<4)return l.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const h=[];for(let f=1;f<o.length-1;f+=2){const y=o[f];if(typeof y!="string")return l.error(`Expected string, but found ${typeof y} instead.`,f);if(/[^a-zA-Z0-9_]/.test(y))return l.error("Variable names must contain only alphanumeric characters or '_'.",f);const E=l.parse(o[f+1],f+1);if(!E)return null;h.push([y,E])}const v=l.parse(o[o.length-1],o.length-1,l.expectedType,h);return v?new Rf(h,v):null}outputDefined(){return this.result.outputDefined()}serialize(){const o=["let"];for(const[l,h]of this.bindings)o.push(l,h.serialize());return o.push(this.result.serialize()),o}}class fg{constructor(o,l,h){this.type=o,this.index=l,this.input=h}static parse(o,l){if(o.length!==3)return l.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const h=l.parse(o[1],1,ln),v=l.parse(o[2],2,va(l.expectedType||Ur));return h&&v?new fg(v.type.itemType,h,v):null}evaluate(o){const l=this.index.evaluate(o),h=this.input.evaluate(o);if(l<0)throw new Bo(`Array index out of bounds: ${l} < 0.`);if(l>h.length-1)throw new Bo(`Array index out of bounds: ${l} > ${h.length-1}.`);if(l===Math.floor(l))return h[l];const v=Math.floor(l),f=Math.ceil(l),y=h[v],E=h[f];if(typeof y!="number"||typeof E!="number")throw new Bo(`Cannot interpolate between non-number values at index ${l}.`);const O=l-v;return y*(1-O)+E*O}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class pg{constructor(o,l){this.type=yr,this.needle=o,this.haystack=l}static parse(o,l){if(o.length!==3)return l.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const h=l.parse(o[1],1,Ur),v=l.parse(o[2],2,Ur);return h&&v?fu(h.type,[yr,gr,ln,dr,Ur])?new pg(h,v):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${co(h.type)} instead`):null}evaluate(o){const l=this.needle.evaluate(o),h=this.haystack.evaluate(o);if(h==null)return!1;if(!Ws(l,["boolean","string","number","null"]))throw new Bo(`Expected first argument to be of type boolean, string, number or null, but found ${co(_o(l))} instead.`);if(!Ws(h,["string","array"]))throw new Bo(`Expected second argument to be of type array or string, but found ${co(_o(h))} instead.`);return h.indexOf(l)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Of{constructor(o,l,h){this.type=ln,this.needle=o,this.haystack=l,this.fromIndex=h}static parse(o,l){if(o.length<=2||o.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const h=l.parse(o[1],1,Ur),v=l.parse(o[2],2,Ur);if(!h||!v)return null;if(!fu(h.type,[yr,gr,ln,dr,Ur]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${co(h.type)} instead`);if(o.length===4){const f=l.parse(o[3],3,ln);return f?new Of(h,v,f):null}return new Of(h,v)}evaluate(o){const l=this.needle.evaluate(o),h=this.haystack.evaluate(o);if(!Ws(l,["boolean","string","number","null"]))throw new Bo(`Expected first argument to be of type boolean, string, number or null, but found ${co(_o(l))} instead.`);if(!Ws(h,["string","array"]))throw new Bo(`Expected second argument to be of type array or string, but found ${co(_o(h))} instead.`);if(this.fromIndex){const v=this.fromIndex.evaluate(o);return h.indexOf(l,v)}return h.indexOf(l)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const o=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),o]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class mg{constructor(o,l,h,v,f,y){this.inputType=o,this.type=l,this.input=h,this.cases=v,this.outputs=f,this.otherwise=y}static parse(o,l){if(o.length<5)return l.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return l.error("Expected an even number of arguments.");let h,v;l.expectedType&&l.expectedType.kind!=="value"&&(v=l.expectedType);const f={},y=[];for(let k=2;k<o.length-1;k+=2){let w=o[k];const R=o[k+1];Array.isArray(w)||(w=[w]);const D=l.concat(k);if(w.length===0)return D.error("Expected at least one branch label.");for(const A of w){if(typeof A!="number"&&typeof A!="string")return D.error("Branch labels must be numbers or strings.");if(typeof A=="number"&&Math.abs(A)>Number.MAX_SAFE_INTEGER)return D.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof A=="number"&&Math.floor(A)!==A)return D.error("Numeric branch labels must be integer values.");if(h){if(D.checkSubtype(h,_o(A)))return null}else h=_o(A);if(f[String(A)]!==void 0)return D.error("Branch labels must be unique.");f[String(A)]=y.length}const P=l.parse(R,k,v);if(!P)return null;v=v||P.type,y.push(P)}const E=l.parse(o[1],1,Ur);if(!E)return null;const O=l.parse(o[o.length-1],o.length-1,v);return O?E.type.kind!=="value"&&l.concat(1).checkSubtype(h,E.type)?null:new mg(h,v,E,f,y,O):null}evaluate(o){const l=this.input.evaluate(o);return(_o(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const o=["match",this.input.serialize()],l=Object.keys(this.cases).sort(),h=[],v={};for(const y of l){const E=v[this.cases[y]];E===void 0?(v[this.cases[y]]=h.length,h.push([this.cases[y],[y]])):h[E][1].push(y)}const f=y=>this.inputType.kind==="number"?Number(y):y;for(const[y,E]of h)o.push(E.length===1?f(E[0]):E.map(f)),o.push(this.outputs[y].serialize());return o.push(this.otherwise.serialize()),o}}class th{constructor(o,l,h){this.type=o,this.branches=l,this.otherwise=h}static parse(o,l){if(o.length<4)return l.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return l.error("Expected an odd number of arguments.");let h;l.expectedType&&l.expectedType.kind!=="value"&&(h=l.expectedType);const v=[];for(let y=1;y<o.length-1;y+=2){const E=l.parse(o[y],y,yr);if(!E)return null;const O=l.parse(o[y+1],y+1,h);if(!O)return null;v.push([E,O]),h=h||O.type}const f=l.parse(o[o.length-1],o.length-1,h);return f?new th(h,v,f):null}evaluate(o){for(const[l,h]of this.branches)if(l.evaluate(o))return h.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[l,h]of this.branches)o(l),o(h);o(this.otherwise)}outputDefined(){return this.branches.every(([o,l])=>l.outputDefined())&&this.otherwise.outputDefined()}serialize(){const o=["case"];return this.eachChild(l=>{o.push(l.serialize())}),o}}class Af{constructor(o,l,h,v){this.type=o,this.input=l,this.beginIndex=h,this.endIndex=v}static parse(o,l){if(o.length<=2||o.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const h=l.parse(o[1],1,Ur),v=l.parse(o[2],2,ln);if(!h||!v)return null;if(!fu(h.type,[va(Ur),gr,Ur]))return l.error(`Expected first argument to be of type array or string, but found ${co(h.type)} instead`);if(o.length===4){const f=l.parse(o[3],3,ln);return f?new Af(h.type,h,v,f):null}return new Af(h.type,h,v)}evaluate(o){const l=this.input.evaluate(o),h=this.beginIndex.evaluate(o);if(!Ws(l,["string","array"]))throw new Bo(`Expected first argument to be of type array or string, but found ${co(_o(l))} instead.`);if(this.endIndex){const v=this.endIndex.evaluate(o);return l.slice(h,v)}return l.slice(h)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const o=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),o]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function gg(u,o){return u==="=="||u==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function l_(u,o,l,h){return h.compare(o,l)===0}function Tu(u,o,l){const h=u!=="=="&&u!=="!=";return class Z8{constructor(f,y,E){this.type=yr,this.lhs=f,this.rhs=y,this.collator=E,this.hasUntypedArgument=f.type.kind==="value"||y.type.kind==="value"}static parse(f,y){if(f.length!==3&&f.length!==4)return y.error("Expected two or three arguments.");const E=f[0];let O=y.parse(f[1],1,Ur);if(!O)return null;if(!gg(E,O.type))return y.concat(1).error(`"${E}" comparisons are not supported for type '${co(O.type)}'.`);let k=y.parse(f[2],2,Ur);if(!k)return null;if(!gg(E,k.type))return y.concat(2).error(`"${E}" comparisons are not supported for type '${co(k.type)}'.`);if(O.type.kind!==k.type.kind&&O.type.kind!=="value"&&k.type.kind!=="value")return y.error(`Cannot compare types '${co(O.type)}' and '${co(k.type)}'.`);h&&(O.type.kind==="value"&&k.type.kind!=="value"?O=new Cs(k.type,[O]):O.type.kind!=="value"&&k.type.kind==="value"&&(k=new Cs(O.type,[k])));let w=null;if(f.length===4){if(O.type.kind!=="string"&&k.type.kind!=="string"&&O.type.kind!=="value"&&k.type.kind!=="value")return y.error("Cannot use collator to compare non-string types.");if(w=y.parse(f[3],3,Ic),!w)return null}return new Z8(O,k,w)}evaluate(f){const y=this.lhs.evaluate(f),E=this.rhs.evaluate(f);if(h&&this.hasUntypedArgument){const O=_o(y),k=_o(E);if(O.kind!==k.kind||O.kind!=="string"&&O.kind!=="number")throw new Bo(`Expected arguments for "${u}" to be (string, string) or (number, number), but found (${O.kind}, ${k.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const O=_o(y),k=_o(E);if(O.kind!=="string"||k.kind!=="string")return o(f,y,E)}return this.collator?l(f,y,E,this.collator.evaluate(f)):o(f,y,E)}eachChild(f){f(this.lhs),f(this.rhs),this.collator&&f(this.collator)}outputDefined(){return!0}serialize(){const f=[u];return this.eachChild(y=>{f.push(y.serialize())}),f}}}const bS=Tu("==",function(u,o,l){return o===l},l_),c_=Tu("!=",function(u,o,l){return o!==l},function(u,o,l,h){return!l_(0,o,l,h)}),u_=Tu("<",function(u,o,l){return o<l},function(u,o,l,h){return h.compare(o,l)<0}),Iu=Tu(">",function(u,o,l){return o>l},function(u,o,l,h){return h.compare(o,l)>0}),d_=Tu("<=",function(u,o,l){return o<=l},function(u,o,l,h){return h.compare(o,l)<=0}),h_=Tu(">=",function(u,o,l){return o>=l},function(u,o,l,h){return h.compare(o,l)>=0});class vg{constructor(o,l,h,v,f,y){this.type=gr,this.number=o,this.locale=l,this.currency=h,this.unit=v,this.minFractionDigits=f,this.maxFractionDigits=y}static parse(o,l){if(o.length!==3)return l.error("Expected two arguments.");const h=l.parse(o[1],1,ln);if(!h)return null;const v=o[2];if(typeof v!="object"||Array.isArray(v))return l.error("NumberFormat options argument must be an object.");let f=null;if(v.locale&&(f=l.parseObjectValue(v.locale,2,"locale",gr),!f))return null;let y=null;if(v.currency&&(y=l.parseObjectValue(v.currency,2,"currency",gr),!y))return null;let E=null;if(v.unit&&(E=l.parseObjectValue(v.unit,2,"unit",gr),!E))return null;let O=null;if(v["min-fraction-digits"]&&(O=l.parseObjectValue(v["min-fraction-digits"],2,"min-fraction-digits",ln),!O))return null;let k=null;return v["max-fraction-digits"]&&(k=l.parseObjectValue(v["max-fraction-digits"],2,"max-fraction-digits",ln),!k)?null:new vg(h,f,y,E,O,k)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(o):void 0,unit:this.unit?this.unit.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.unit&&o(this.unit),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const o={};return this.locale&&(o.locale=this.locale.serialize()),this.currency&&(o.currency=this.currency.serialize()),this.unit&&(o.unit=this.unit.serialize()),this.minFractionDigits&&(o["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(o["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),o]}}class nh{constructor(o){this.type=ln,this.input=o}static parse(o,l){if(o.length!==2)return l.error(`Expected 1 argument, but found ${o.length-1} instead.`);const h=l.parse(o[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${co(h.type)} instead.`):new nh(h):null}evaluate(o){const l=this.input.evaluate(o);if(typeof l=="string"||Array.isArray(l))return l.length;throw new Bo(`Expected value to be of type string or array, but found ${co(_o(l))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}serialize(){const o=["length"];return this.eachChild(l=>{o.push(l.serialize())}),o}}function Df(u){return function(){u=1831565813+(u|=0)|0;let o=Math.imul(u^u>>>15,1|u);return o=o+Math.imul(o^o>>>7,61|o)^o,((o^o>>>14)>>>0)/4294967296}}const Mu={"==":bS,"!=":c_,">":Iu,"<":u_,">=":h_,"<=":d_,array:Cs,at:fg,boolean:Cs,case:th,coalesce:Pf,collator:mf,format:pu,image:Mc,in:pg,"index-of":Of,interpolate:Xa,"interpolate-hcl":Xa,"interpolate-lab":Xa,length:nh,let:Rf,literal:Ss,match:mg,number:Cs,"number-format":vg,object:Cs,slice:Af,step:Jd,string:Cs,"to-boolean":pl,"to-color":pl,"to-number":pl,"to-string":pl,var:bi,within:nc,distance:rc,config:Su};function f_(u,[o,l,h,v]){o=o.evaluate(u),l=l.evaluate(u),h=h.evaluate(u);const f=v?v.evaluate(u):1,y=jy(o,l,h,f);if(y)throw new Bo(y);return new Sr(o/255*f,l/255*f,h/255*f,f)}function yg(u,[o,l,h,v]){o=o.evaluate(u),l=l.evaluate(u),h=h.evaluate(u);const f=v?v.evaluate(u):1,y=function(k,w,R,D){return typeof k=="number"&&k>=0&&k<=360?typeof w=="number"&&w>=0&&w<=100&&typeof R=="number"&&R>=0&&R<=100?D===void 0||typeof D=="number"&&D>=0&&D<=1?null:`Invalid hsla value [${[k,w,R,D].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof D=="number"?[k,w,R,D]:[k,w,R]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof D=="number"?[k,w,R,D]:[k,w,R]).join(", ")}]: 'h' must be between 0 and 360.`}(o,l,h,f);if(y)throw new Bo(y);const E=`hsla(${o}, ${l}%, ${h}%, ${f})`,O=Sr.parse(E);if(!O)throw new Bo(`Failed to parse HSLA color: ${E}`);return O}function _g(u,o){return u in o}function xg(u,o){const l=o[u];return l===void 0?null:l}function Ac(u){return{type:u}}function p_(u){return{result:"success",value:u}}function vl(u){return{result:"error",value:u}}function $f(u,o){return!!u&&!!u.parameters&&u.parameters.indexOf(o)>-1}function Dc(u){return u["property-type"]==="data-driven"}function m_(u){return $f(u.expression,"measure-light")}function bg(u){return $f(u.expression,"zoom")}function wg(u){return!!u.expression&&u.expression.interpolated}function Sg(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)}function g_(u){return u}function Cg(u,o){const l=o.type==="color",h=u.stops&&typeof u.stops[0][0]=="object",v=h||!(h||u.property!==void 0),f=u.type||(wg(o)?"exponential":"interval");if(l&&((u=bs({},u)).stops&&(u.stops=u.stops.map(k=>[k[0],Sr.parse(k[1])])),u.default=Sr.parse(u.default?u.default:o.default)),u.colorSpace&&u.colorSpace!=="rgb"&&!s_[u.colorSpace])throw new Error(`Unknown color space: ${u.colorSpace}`);let y,E,O;if(f==="exponential")y=Eg;else if(f==="interval")y=SS;else if(f==="categorical"){y=wS,E=Object.create(null);for(const k of u.stops)E[k[0]]=k[1];O=typeof u.stops[0][0]}else{if(f!=="identity")throw new Error(`Unknown function type "${f}"`);y=CS}if(h){const k={},w=[];for(let P=0;P<u.stops.length;P++){const A=u.stops[P],F=A[0].zoom;k[F]===void 0&&(k[F]={zoom:F,type:u.type,property:u.property,default:u.default,stops:[]},w.push(F)),k[F].stops.push([A[0].value,A[1]])}const R=[];for(const P of w)R.push([k[P].zoom,Cg(k[P],o)]);const D={name:"linear"};return{kind:"composite",interpolationType:D,interpolationFactor:Xa.interpolationFactor.bind(void 0,D),zoomStops:R.map(P=>P[0]),evaluate:({zoom:P},A)=>Eg({stops:R,base:u.base},o,P).evaluate(P,A)}}if(v){const k=f==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:k,interpolationFactor:Xa.interpolationFactor.bind(void 0,k),zoomStops:u.stops.map(w=>w[0]),evaluate:({zoom:w})=>y(u,o,w,E,O)}}return{kind:"source",evaluate(k,w){const R=w&&w.properties?w.properties[u.property]:void 0;return R===void 0?rh(u.default,o.default):y(u,o,R,E,O)}}}function rh(u,o,l){return u!==void 0?u:o!==void 0?o:l!==void 0?l:void 0}function wS(u,o,l,h,v){return rh(typeof l===v?h[l]:void 0,u.default,o.default)}function SS(u,o,l){if(Pc(l)!=="number")return rh(u.default,o.default);const h=u.stops.length;if(h===1||l<=u.stops[0][0])return u.stops[0][1];if(l>=u.stops[h-1][0])return u.stops[h-1][1];const v=Mf(u.stops.map(f=>f[0]),l);return u.stops[v][1]}function Eg(u,o,l){const h=u.base!==void 0?u.base:1;if(Pc(l)!=="number")return rh(u.default,o.default);const v=u.stops.length;if(v===1||l<=u.stops[0][0])return u.stops[0][1];if(l>=u.stops[v-1][0])return u.stops[v-1][1];const f=Mf(u.stops.map(w=>w[0]),l),y=function(w,R,D,P){const A=P-D,F=w-D;return A===0?0:R===1?F/A:(Math.pow(R,F)-1)/(Math.pow(R,A)-1)}(l,h,u.stops[f][0],u.stops[f+1][0]),E=u.stops[f][1],O=u.stops[f+1][1];let k=Xo[o.type]||g_;if(u.colorSpace&&u.colorSpace!=="rgb"){const w=s_[u.colorSpace];k=(R,D)=>w.reverse(w.interpolate(w.forward(R),w.forward(D),y))}return typeof E.evaluate=="function"?{evaluate(...w){const R=E.evaluate.apply(void 0,w),D=O.evaluate.apply(void 0,w);if(R!==void 0&&D!==void 0)return k(R,D,y)}}:k(E,O,y)}function CS(u,o,l){return o.type==="color"?l=Sr.parse(l):o.type==="formatted"?l=da.fromString(l.toString()):o.type==="resolvedImage"?l=ya.fromString(l.toString()):Pc(l)===o.type||o.type==="enum"&&o.values[l]||(l=void 0),rh(l,u.default,o.default)}Oa.register(Mu,{error:[{kind:"error"},[gr],(u,[o])=>{throw new Bo(o.evaluate(u))}],typeof:[gr,[Ur],(u,[o])=>co(_o(o.evaluate(u)))],"to-rgba":[va(ln,4),[hi],(u,[o])=>o.evaluate(u).toRenderColor(null).toArray()],rgb:[hi,[ln,ln,ln],f_],rgba:[hi,[ln,ln,ln,ln],f_],hsl:[hi,[ln,ln,ln],yg],hsla:[hi,[ln,ln,ln,ln],yg],has:{type:yr,overloads:[[[gr],(u,[o])=>_g(o.evaluate(u),u.properties())],[[gr,Mo],(u,[o,l])=>_g(o.evaluate(u),l.evaluate(u))]]},get:{type:Ur,overloads:[[[gr],(u,[o])=>xg(o.evaluate(u),u.properties())],[[gr,Mo],(u,[o,l])=>xg(o.evaluate(u),l.evaluate(u))]]},"feature-state":[Ur,[gr],(u,[o])=>xg(o.evaluate(u),u.featureState||{})],properties:[Mo,[],u=>u.properties()],"geometry-type":[gr,[],u=>u.geometryType()],id:[Ur,[],u=>u.id()],zoom:[ln,[],u=>u.globals.zoom],pitch:[ln,[],u=>u.globals.pitch||0],"distance-from-center":[ln,[],u=>u.distanceFromCenter()],"measure-light":[ln,[gr],(u,[o])=>u.measureLight(o.evaluate(u))],"heatmap-density":[ln,[],u=>u.globals.heatmapDensity||0],"line-progress":[ln,[],u=>u.globals.lineProgress||0],"raster-value":[ln,[],u=>u.globals.rasterValue||0],"raster-particle-speed":[ln,[],u=>u.globals.rasterParticleSpeed||0],"sky-radial-progress":[ln,[],u=>u.globals.skyRadialProgress||0],accumulated:[Ur,[],u=>u.globals.accumulated===void 0?null:u.globals.accumulated],"+":[ln,Ac(ln),(u,o)=>{let l=0;for(const h of o)l+=h.evaluate(u);return l}],"*":[ln,Ac(ln),(u,o)=>{let l=1;for(const h of o)l*=h.evaluate(u);return l}],"-":{type:ln,overloads:[[[ln,ln],(u,[o,l])=>o.evaluate(u)-l.evaluate(u)],[[ln],(u,[o])=>-o.evaluate(u)]]},"/":[ln,[ln,ln],(u,[o,l])=>o.evaluate(u)/l.evaluate(u)],"%":[ln,[ln,ln],(u,[o,l])=>o.evaluate(u)%l.evaluate(u)],ln2:[ln,[],()=>Math.LN2],pi:[ln,[],()=>Math.PI],e:[ln,[],()=>Math.E],"^":[ln,[ln,ln],(u,[o,l])=>Math.pow(o.evaluate(u),l.evaluate(u))],sqrt:[ln,[ln],(u,[o])=>Math.sqrt(o.evaluate(u))],log10:[ln,[ln],(u,[o])=>Math.log(o.evaluate(u))/Math.LN10],ln:[ln,[ln],(u,[o])=>Math.log(o.evaluate(u))],log2:[ln,[ln],(u,[o])=>Math.log(o.evaluate(u))/Math.LN2],sin:[ln,[ln],(u,[o])=>Math.sin(o.evaluate(u))],cos:[ln,[ln],(u,[o])=>Math.cos(o.evaluate(u))],tan:[ln,[ln],(u,[o])=>Math.tan(o.evaluate(u))],asin:[ln,[ln],(u,[o])=>Math.asin(o.evaluate(u))],acos:[ln,[ln],(u,[o])=>Math.acos(o.evaluate(u))],atan:[ln,[ln],(u,[o])=>Math.atan(o.evaluate(u))],min:[ln,Ac(ln),(u,o)=>Math.min(...o.map(l=>l.evaluate(u)))],max:[ln,Ac(ln),(u,o)=>Math.max(...o.map(l=>l.evaluate(u)))],abs:[ln,[ln],(u,[o])=>Math.abs(o.evaluate(u))],round:[ln,[ln],(u,[o])=>{const l=o.evaluate(u);return l<0?-Math.round(-l):Math.round(l)}],floor:[ln,[ln],(u,[o])=>Math.floor(o.evaluate(u))],ceil:[ln,[ln],(u,[o])=>Math.ceil(o.evaluate(u))],"filter-==":[yr,[gr,Ur],(u,[o,l])=>u.properties()[o.value]===l.value],"filter-id-==":[yr,[Ur],(u,[o])=>u.id()===o.value],"filter-type-==":[yr,[gr],(u,[o])=>u.geometryType()===o.value],"filter-<":[yr,[gr,Ur],(u,[o,l])=>{const h=u.properties()[o.value],v=l.value;return typeof h==typeof v&&h<v}],"filter-id-<":[yr,[Ur],(u,[o])=>{const l=u.id(),h=o.value;return typeof l==typeof h&&l<h}],"filter->":[yr,[gr,Ur],(u,[o,l])=>{const h=u.properties()[o.value],v=l.value;return typeof h==typeof v&&h>v}],"filter-id->":[yr,[Ur],(u,[o])=>{const l=u.id(),h=o.value;return typeof l==typeof h&&l>h}],"filter-<=":[yr,[gr,Ur],(u,[o,l])=>{const h=u.properties()[o.value],v=l.value;return typeof h==typeof v&&h<=v}],"filter-id-<=":[yr,[Ur],(u,[o])=>{const l=u.id(),h=o.value;return typeof l==typeof h&&l<=h}],"filter->=":[yr,[gr,Ur],(u,[o,l])=>{const h=u.properties()[o.value],v=l.value;return typeof h==typeof v&&h>=v}],"filter-id->=":[yr,[Ur],(u,[o])=>{const l=u.id(),h=o.value;return typeof l==typeof h&&l>=h}],"filter-has":[yr,[Ur],(u,[o])=>o.value in u.properties()],"filter-has-id":[yr,[],u=>u.id()!==null&&u.id()!==void 0],"filter-type-in":[yr,[va(gr)],(u,[o])=>o.value.indexOf(u.geometryType())>=0],"filter-id-in":[yr,[va(Ur)],(u,[o])=>o.value.indexOf(u.id())>=0],"filter-in-small":[yr,[gr,va(Ur)],(u,[o,l])=>l.value.indexOf(u.properties()[o.value])>=0],"filter-in-large":[yr,[gr,va(Ur)],(u,[o,l])=>function(h,v,f,y){for(;f<=y;){const E=f+y>>1;if(v[E]===h)return!0;v[E]>h?y=E-1:f=E+1}return!1}(u.properties()[o.value],l.value,0,l.value.length-1)],all:{type:yr,overloads:[[[yr,yr],(u,[o,l])=>o.evaluate(u)&&l.evaluate(u)],[Ac(yr),(u,o)=>{for(const l of o)if(!l.evaluate(u))return!1;return!0}]]},any:{type:yr,overloads:[[[yr,yr],(u,[o,l])=>o.evaluate(u)||l.evaluate(u)],[Ac(yr),(u,o)=>{for(const l of o)if(l.evaluate(u))return!0;return!1}]]},"!":[yr,[yr],(u,[o])=>!o.evaluate(u)],"is-supported-script":[yr,[gr],(u,[o])=>{const l=u.globals&&u.globals.isSupportedScript;return!l||l(o.evaluate(u))}],upcase:[gr,[gr],(u,[o])=>o.evaluate(u).toUpperCase()],downcase:[gr,[gr],(u,[o])=>o.evaluate(u).toLowerCase()],concat:[gr,Ac(Ur),(u,o)=>o.map(l=>_a(l.evaluate(u))).join("")],"resolved-locale":[gr,[Ic],(u,[o])=>o.evaluate(u).resolvedLocale()],random:[ln,[ln,ln,Ur],(u,o)=>{const[l,h,v]=o.map(y=>y.evaluate(u));if(l>h||l===h)return l;let f;if(typeof v=="string")f=function(y){let E=0;if(y.length===0)return E;for(let O=0;O<y.length;O++)E=(E<<5)-E+y.charCodeAt(O),E|=0;return E}(v);else{if(typeof v!="number")throw new Bo(`Invalid seed input: ${v}`);f=v}return l+Df(f)()*(h-l)}]});class Tg{constructor(o,l,h,v){this.expression=o,this._warningHistory={},this._evaluator=new Vy(h,v),this._defaultValue=l?function(f){return f.type==="color"&&(Sg(f.default)||Array.isArray(f.default))?new Sr(0,0,0,0):f.type==="color"?Sr.parse(f.default)||null:f.default===void 0?null:f.default}(l):null,this._enumValues=l&&l.type==="enum"?l.values:null,this.configDependencies=Yd(o)}evaluateWithoutErrorHandling(o,l,h,v,f,y,E,O){return this._evaluator.globals=o,this._evaluator.feature=l,this._evaluator.featureState=h,this._evaluator.canonical=v||null,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=y,this._evaluator.featureTileCoord=E||null,this._evaluator.featureDistanceData=O||null,this.expression.evaluate(this._evaluator)}evaluate(o,l,h,v,f,y,E,O){this._evaluator.globals=o,this._evaluator.feature=l||null,this._evaluator.featureState=h||null,this._evaluator.canonical=v||null,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=y||null,this._evaluator.featureTileCoord=E||null,this._evaluator.featureDistanceData=O||null;try{const k=this.expression.evaluate(this._evaluator);if(k==null||typeof k=="number"&&k!=k)return this._defaultValue;if(this._enumValues&&!(k in this._enumValues))throw new Bo(`Expected value to be one of ${Object.keys(this._enumValues).map(w=>JSON.stringify(w)).join(", ")}, but found ${JSON.stringify(k)} instead.`);return k}catch(k){return this._warningHistory[k.message]||(this._warningHistory[k.message]=!0,typeof console<"u"&&console.warn(`Failed to evaluate expression "${JSON.stringify(this.expression.serialize())}". ${k.message}`)),this._defaultValue}}}function kf(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in Mu}function Pu(u,o,l,h){const v=new e_(Mu,[],o?function(y){const E={color:hi,string:gr,number:ln,enum:gr,boolean:yr,formatted:ws,resolvedImage:du};return y.type==="array"?va(E[y.value]||Ur,y.length):E[y.type]}(o):void 0,void 0,void 0,l,h),f=v.parse(u,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?p_(new Tg(f,o,l,h)):vl(v.errors)}class zf{constructor(o,l,h){this.kind=o,this._styleExpression=l,this.isLightConstant=h,this.isStateDependent=o!=="constant"&&!If(l.expression),this.configDependencies=Yd(l.expression)}evaluateWithoutErrorHandling(o,l,h,v,f,y){return this._styleExpression.evaluateWithoutErrorHandling(o,l,h,v,f,y)}evaluate(o,l,h,v,f,y){return this._styleExpression.evaluate(o,l,h,v,f,y)}}class ih{constructor(o,l,h,v,f){this.kind=o,this.zoomStops=h,this._styleExpression=l,this.isStateDependent=o!=="camera"&&!If(l.expression),this.isLightConstant=f,this.configDependencies=Yd(l.expression),this.interpolationType=v}evaluateWithoutErrorHandling(o,l,h,v,f,y){return this._styleExpression.evaluateWithoutErrorHandling(o,l,h,v,f,y)}evaluate(o,l,h,v,f,y){return this._styleExpression.evaluate(o,l,h,v,f,y)}interpolationFactor(o,l,h){return this.interpolationType?Xa.interpolationFactor(this.interpolationType,o,l,h):0}}function $c(u,o,l,h){if((u=Pu(u,o,l,h)).result==="error")return u;const v=u.value.expression,f=Zd(v);if(!f&&!Dc(o))return vl([new ua("","data expressions not supported")]);const y=Cu(v,["zoom","pitch","distance-from-center"]);if(!y&&!bg(o))return vl([new ua("","zoom expressions not supported")]);const E=Cu(v,["measure-light"]);if(!E&&!m_(o))return vl([new ua("","measure-light expression not supported")]);const O=Cu(v,["line-progress"]);if(!O&&!function(R){return $f(R.expression,"line-progress")}(o))return vl([new ua("","line-progress expression not supported")]);const k=o.expression&&o.expression.relaxZoomRestriction,w=Nf(v);return w||y||k?w instanceof ua?vl([w]):w instanceof Xa&&!wg(o)?vl([new ua("",'"interpolate" expressions cannot be used with this property')]):p_(w?new ih(f&&O?"camera":"composite",u.value,w.labels,w instanceof Xa?w.interpolation:void 0,E):new zf(f&&O?"constant":"source",u.value,E)):vl([new ua("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class Lf{constructor(o,l){this._parameters=o,this._specification=l,bs(this,Cg(this._parameters,this._specification))}static deserialize(o){return new Lf(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function Nf(u){let o=null;if(u instanceof Rf)o=Nf(u.result);else if(u instanceof Pf){for(const l of u.args)if(o=Nf(l),o)break}else(u instanceof Jd||u instanceof Xa)&&u.input instanceof Oa&&u.input.name==="zoom"&&(o=u);return o instanceof ua||u.eachChild(l=>{const h=Nf(l);h instanceof ua?o=h:o&&h&&o!==h&&(o=new ua("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}var Ig,Mg,v_=function(){if(Mg)return Ig;Mg=1,Ig=o;var u=3;function o(l,h,v){var f=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;var y=new Int32Array(this.arrayBuffer);l=y[0],this.d=(h=y[1])+2*(v=y[2]);for(var E=0;E<this.d*this.d;E++){var O=y[u+E],k=y[u+E+1];f.push(O===k?null:y.subarray(O,k))}var w=y[u+f.length+1];this.keys=y.subarray(y[u+f.length],w),this.bboxes=y.subarray(w),this.insert=this._insertReadonly}else{this.d=h+2*v;for(var R=0;R<this.d*this.d;R++)f.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=l,this.padding=v,this.scale=h/l,this.uid=0;var D=v/h*l;this.min=-D,this.max=l+D}return o.prototype.insert=function(l,h,v,f,y){this._forEachCell(h,v,f,y,this._insertCell,this.uid++),this.keys.push(l),this.bboxes.push(h),this.bboxes.push(v),this.bboxes.push(f),this.bboxes.push(y)},o.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},o.prototype._insertCell=function(l,h,v,f,y,E){this.cells[y].push(E)},o.prototype.query=function(l,h,v,f,y){var E=this.min,O=this.max;if(l<=E&&h<=E&&O<=v&&O<=f&&!y)return Array.prototype.slice.call(this.keys);var k=[];return this._forEachCell(l,h,v,f,this._queryCell,k,{},y),k},o.prototype._queryCell=function(l,h,v,f,y,E,O,k){var w=this.cells[y];if(w!==null)for(var R=this.keys,D=this.bboxes,P=0;P<w.length;P++){var A=w[P];if(O[A]===void 0){var F=4*A;(k?k(D[F+0],D[F+1],D[F+2],D[F+3]):l<=D[F+2]&&h<=D[F+3]&&v>=D[F+0]&&f>=D[F+1])?(O[A]=!0,E.push(R[A])):O[A]=!1}}},o.prototype._forEachCell=function(l,h,v,f,y,E,O,k){for(var w=this._convertToCellCoord(l),R=this._convertToCellCoord(h),D=this._convertToCellCoord(v),P=this._convertToCellCoord(f),A=w;A<=D;A++)for(var F=R;F<=P;F++){var q=this.d*F+A;if((!k||k(this._convertFromCellCoord(A),this._convertFromCellCoord(F),this._convertFromCellCoord(A+1),this._convertFromCellCoord(F+1)))&&y.call(this,l,h,v,f,q,E,O,k))return}},o.prototype._convertFromCellCoord=function(l){return(l-this.padding)/this.scale},o.prototype._convertToCellCoord=function(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))},o.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var l=this.cells,h=u+this.cells.length+1+1,v=0,f=0;f<this.cells.length;f++)v+=this.cells[f].length;var y=new Int32Array(h+v+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;for(var E=h,O=0;O<l.length;O++){var k=l[O];y[u+O]=E,y.set(k,E),E+=k.length}return y[u+l.length]=E,y.set(this.keys,E),y[u+l.length+1]=E+=this.keys.length,y.set(this.bboxes,E),E+=this.bboxes.length,y.buffer},Ig}(),kc=x(v_);const oh={};function Fn(u,o,l={}){Object.defineProperty(u,"_classRegistryKey",{value:o,writable:!1}),oh[o]={klass:u,omit:l.omit||[]}}Fn(Object,"Object"),kc.serialize=function(u,o){const l=u.toArrayBuffer();return o&&o.add(l),{buffer:l}},kc.deserialize=function(u){return new kc(u.buffer)},Object.defineProperty(kc,"name",{value:"Grid"}),Fn(kc,"Grid"),Fn(Sr,"Color"),Fn(Error,"Error"),Fn(da,"Formatted"),Fn(Wa,"FormattedSection"),Fn(fo,"AJAXError"),Fn(ya,"ResolvedImage"),Fn(Lf,"StylePropertyFunction"),Fn(Tg,"StyleExpression",{omit:["_evaluator"]}),Fn(ih,"ZoomDependentExpression"),Fn(zf,"ZoomConstantExpression"),Fn(Oa,"CompoundExpression",{omit:["_evaluate"]});for(const u in Mu)oh[Mu[u]._classRegistryKey]||Fn(Mu[u],`Expression${u}`);function Ff(u){return u&&typeof ArrayBuffer<"u"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function Pg(u){return self.ImageBitmap&&u instanceof ImageBitmap}function zc(u,o){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp)return u;if(Ff(u)||Pg(u))return o&&o.add(u),u;if(ArrayBuffer.isView(u)){const l=u;return o&&o.add(l.buffer),l}if(u instanceof ImageData)return o&&o.add(u.data.buffer),u;if(Array.isArray(u)){const l=[];for(const h of u)l.push(zc(h,o));return l}if(u instanceof Map){const l={$name:"Map"};for(const[h,v]of u.entries())l[h]=zc(v);return l}if(u instanceof Set){const l={$name:"Set"};let h=0;for(const v of u.values())l[++h]=zc(v);return l}if(typeof u=="object"){const l=u.constructor,h=l._classRegistryKey;if(!h)throw new Error(`can't serialize object of unregistered class ${h}`);const v=l.serialize?l.serialize(u,o):{};if(!l.serialize){for(const f in u)u.hasOwnProperty(f)&&(oh[h].omit.indexOf(f)>=0||(v[f]=zc(u[f],o)));u instanceof Error&&(v.message=u.message)}if(v.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(v.$name=h),v}throw new Error("can't serialize object of type "+typeof u)}function Aa(u){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||Ff(u)||Pg(u)||ArrayBuffer.isView(u)||u instanceof ImageData)return u;if(Array.isArray(u))return u.map(Aa);if(typeof u=="object"){const o=u.$name||"Object";if(o==="Map"){const v=new Map;for(const f of Object.keys(u))f!=="$name"&&v.set(f,Aa(u[f]));return v}if(o==="Set"){const v=new Set;for(const f of Object.keys(u))f!=="$name"&&v.add(Aa(u[f]));return v}const{klass:l}=oh[o];if(!l)throw new Error(`can't deserialize unregistered class ${o}`);if(l.deserialize)return l.deserialize(u);const h=Object.create(l.prototype);for(const v of Object.keys(u))v!=="$name"&&(h[v]=Aa(u[v]));return h}throw new Error("can't deserialize object of type "+typeof u)}const Kn={"Latin-1 Supplement":u=>u>=128&&u<=255,Arabic:u=>u>=1536&&u<=1791,"Arabic Supplement":u=>u>=1872&&u<=1919,"Arabic Extended-A":u=>u>=2208&&u<=2303,"Hangul Jamo":u=>u>=4352&&u<=4607,"Unified Canadian Aboriginal Syllabics":u=>u>=5120&&u<=5759,Khmer:u=>u>=6016&&u<=6143,"Unified Canadian Aboriginal Syllabics Extended":u=>u>=6320&&u<=6399,"General Punctuation":u=>u>=8192&&u<=8303,"Letterlike Symbols":u=>u>=8448&&u<=8527,"Number Forms":u=>u>=8528&&u<=8591,"Miscellaneous Technical":u=>u>=8960&&u<=9215,"Control Pictures":u=>u>=9216&&u<=9279,"Optical Character Recognition":u=>u>=9280&&u<=9311,"Enclosed Alphanumerics":u=>u>=9312&&u<=9471,"Geometric Shapes":u=>u>=9632&&u<=9727,"Miscellaneous Symbols":u=>u>=9728&&u<=9983,"Miscellaneous Symbols and Arrows":u=>u>=11008&&u<=11263,"CJK Radicals Supplement":u=>u>=11904&&u<=12031,"Kangxi Radicals":u=>u>=12032&&u<=12255,"Ideographic Description Characters":u=>u>=12272&&u<=12287,"CJK Symbols and Punctuation":u=>u>=12288&&u<=12351,Hiragana:u=>u>=12352&&u<=12447,Katakana:u=>u>=12448&&u<=12543,Bopomofo:u=>u>=12544&&u<=12591,"Hangul Compatibility Jamo":u=>u>=12592&&u<=12687,Kanbun:u=>u>=12688&&u<=12703,"Bopomofo Extended":u=>u>=12704&&u<=12735,"CJK Strokes":u=>u>=12736&&u<=12783,"Katakana Phonetic Extensions":u=>u>=12784&&u<=12799,"Enclosed CJK Letters and Months":u=>u>=12800&&u<=13055,"CJK Compatibility":u=>u>=13056&&u<=13311,"CJK Unified Ideographs Extension A":u=>u>=13312&&u<=19903,"Yijing Hexagram Symbols":u=>u>=19904&&u<=19967,"CJK Unified Ideographs":u=>u>=19968&&u<=40959,"Yi Syllables":u=>u>=40960&&u<=42127,"Yi Radicals":u=>u>=42128&&u<=42191,"Hangul Jamo Extended-A":u=>u>=43360&&u<=43391,"Hangul Syllables":u=>u>=44032&&u<=55215,"Hangul Jamo Extended-B":u=>u>=55216&&u<=55295,"Private Use Area":u=>u>=57344&&u<=63743,"CJK Compatibility Ideographs":u=>u>=63744&&u<=64255,"Arabic Presentation Forms-A":u=>u>=64336&&u<=65023,"Vertical Forms":u=>u>=65040&&u<=65055,"CJK Compatibility Forms":u=>u>=65072&&u<=65103,"Small Form Variants":u=>u>=65104&&u<=65135,"Arabic Presentation Forms-B":u=>u>=65136&&u<=65279,"Halfwidth and Fullwidth Forms":u=>u>=65280&&u<=65519,Osage:u=>u>=66736&&u<=66815,"CJK Unified Ideographs Extension B":u=>u>=131072&&u<=173791};function Rg(u){for(const o of u)if(Ru(o.charCodeAt(0)))return!0;return!1}function y_(u){for(const o of u)if(!ES(o.charCodeAt(0)))return!1;return!0}function ES(u){return!(Kn.Arabic(u)||Kn["Arabic Supplement"](u)||Kn["Arabic Extended-A"](u)||Kn["Arabic Presentation Forms-A"](u)||Kn["Arabic Presentation Forms-B"](u))}function Ru(u){return!(u!==746&&u!==747&&(u<4352||!(Kn["Bopomofo Extended"](u)||Kn.Bopomofo(u)||Kn["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||Kn["CJK Compatibility Ideographs"](u)||Kn["CJK Compatibility"](u)||Kn["CJK Radicals Supplement"](u)||Kn["CJK Strokes"](u)||!(!Kn["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||Kn["CJK Unified Ideographs Extension A"](u)||Kn["CJK Unified Ideographs"](u)||Kn["Enclosed CJK Letters and Months"](u)||Kn["Hangul Compatibility Jamo"](u)||Kn["Hangul Jamo Extended-A"](u)||Kn["Hangul Jamo Extended-B"](u)||Kn["Hangul Jamo"](u)||Kn["Hangul Syllables"](u)||Kn.Hiragana(u)||Kn["Ideographic Description Characters"](u)||Kn.Kanbun(u)||Kn["Kangxi Radicals"](u)||Kn["Katakana Phonetic Extensions"](u)||Kn.Katakana(u)&&u!==12540||!(!Kn["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!Kn["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||Kn["Unified Canadian Aboriginal Syllabics"](u)||Kn["Unified Canadian Aboriginal Syllabics Extended"](u)||Kn["Vertical Forms"](u)||Kn["Yijing Hexagram Symbols"](u)||Kn["Yi Syllables"](u)||Kn["Yi Radicals"](u))))}function Og(u){return!(Ru(u)||function(o){return!!(Kn["Latin-1 Supplement"](o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||Kn["General Punctuation"](o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||Kn["Letterlike Symbols"](o)||Kn["Number Forms"](o)||Kn["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||Kn["Control Pictures"](o)&&o!==9251||Kn["Optical Character Recognition"](o)||Kn["Enclosed Alphanumerics"](o)||Kn["Geometric Shapes"](o)||Kn["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||Kn["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||Kn["CJK Symbols and Punctuation"](o)||Kn.Katakana(o)||Kn["Private Use Area"](o)||Kn["CJK Compatibility Forms"](o)||Kn["Small Form Variants"](o)||Kn["Halfwidth and Fullwidth Forms"](o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)}(u))}function ah(u){return u>=1424&&u<=2303||Kn["Arabic Presentation Forms-A"](u)||Kn["Arabic Presentation Forms-B"](u)}function __(u,o){return!(!o&&ah(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||Kn.Khmer(u))}function TS(u){for(const o of u)if(ah(o.charCodeAt(0)))return!0;return!1}const Ag="deferred",sh="loading",lh="loaded";let Bf=null,ta="unavailable",Za=null;const x_=function(u){u&&typeof u=="string"&&u.indexOf("NetworkError")>-1&&(ta="error"),Bf&&Bf(u)};function Dg(){$g.fire(new Gi("pluginStateChange",{pluginStatus:ta,pluginURL:Za}))}const $g=new jn,kg=function(){return ta},b_=function(){if(ta!==Ag||!Za)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ta=sh,Dg(),Za&&Ki({url:Za},u=>{u?x_(u):(ta=lh,Dg())})},Ya={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>ta===lh||Ya.applyArabicShaping!=null,isLoading:()=>ta===sh,setState(u){ta=u.pluginStatus,Za=u.pluginURL},isParsed:()=>Ya.applyArabicShaping!=null&&Ya.processBidirectionalText!=null&&Ya.processStyledBidirectionalText!=null,getPluginURL:()=>Za};class Zi{constructor(o,l){this.zoom=o,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.transition=l.transition,this.pitch=l.pitch,this.brightness=l.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(o){return function(l,h){for(const v of l)if(!__(v.charCodeAt(0),h))return!1;return!0}(o,Ya.isLoaded())}}class jf{constructor(o,l,h,v){this.property=o,this.value=l,this.expression=function(f,y,E,O){if(Sg(f))return new Lf(f,y);if(kf(f)||Array.isArray(f)&&f.length>0){const k=$c(f,y,E,O);if(k.result==="error")throw new Error(k.value.map(w=>`${w.key}: ${w.message}`).join(", "));return k.value}{let k=f;return typeof f=="string"&&y.type==="color"&&(k=Sr.parse(f)),{kind:"constant",configDependencies:new Set,evaluate:()=>k}}}(l===void 0?o.specification.default:l,o.specification,h,v)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(o,l,h){return this.property.possiblyEvaluate(this,o,l,h)}}class zg{constructor(o,l,h){this.property=o,this.value=new jf(o,void 0,l,h)}transitioned(o,l){return new S_(this.property,this.value,l,Dn({},o.transition,this.transition),o.now)}untransitioned(){return new S_(this.property,this.value,null,{},0)}}class w_{constructor(o,l,h){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues),this._scope=l,this._options=h,this.configDependencies=new Set}getValue(o){return an(this._values[o].value.value)}setValue(o,l){this._values.hasOwnProperty(o)||(this._values[o]=new zg(this._values[o].property,this._scope,this._options)),this._values[o].value=new jf(this._values[o].property,l===null?void 0:an(l),this._scope,this._options),this._values[o].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[o].value.expression.configDependencies]))}setTransitionOrValue(o,l){l&&(this._options=l);const h=this._properties.properties;if(o)for(const v in o){const f=o[v];if(nn(v,"-transition")){const y=v.slice(0,-11);h[y]&&this.setTransition(y,f)}else h.hasOwnProperty(v)&&this.setValue(v,f)}}getTransition(o){return an(this._values[o].transition)}setTransition(o,l){this._values.hasOwnProperty(o)||(this._values[o]=new zg(this._values[o].property)),this._values[o].transition=an(l)||void 0}serialize(){const o={};for(const l of Object.keys(this._values)){const h=this.getValue(l);h!==void 0&&(o[l]=h);const v=this.getTransition(l);v!==void 0&&(o[`${l}-transition`]=v)}return o}transitioned(o,l){const h=new C_(this._properties);for(const v of Object.keys(this._values))h._values[v]=this._values[v].transitioned(o,l._values[v]);return h}untransitioned(){const o=new C_(this._properties);for(const l of Object.keys(this._values))o._values[l]=this._values[l].untransitioned();return o}}class S_{constructor(o,l,h,v,f){const y=v.delay||0,E=v.duration||0;f=f||0,this.property=o,this.value=l,this.begin=f+y,this.end=this.begin+E,o.specification.transition&&(v.delay||v.duration)&&(this.prior=h)}possiblyEvaluate(o,l,h){const v=o.now||0,f=this.value.possiblyEvaluate(o,l,h),y=this.prior;if(y){if(v>this.end)return this.prior=null,f;if(this.value.isDataDriven())return this.prior=null,f;if(v<this.begin)return y.possiblyEvaluate(o,l,h);{const E=(v-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(o,l,h),f,Dt(E))}}return f}}class C_{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,l,h){const v=new Au(this._properties);for(const f of Object.keys(this._values))v._values[f]=this._values[f].possiblyEvaluate(o,l,h);return v}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class IS{constructor(o,l,h){this._properties=o,this._values=Object.create(o.defaultPropertyValues),this._scope=l,this._options=h,this.configDependencies=new Set}getValue(o){return an(this._values[o].value)}setValue(o,l){this._values[o]=new jf(this._values[o].property,l===null?void 0:an(l),this._scope,this._options),this._values[o].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[o].expression.configDependencies]))}serialize(){const o={};for(const l of Object.keys(this._values)){const h=this.getValue(l);h!==void 0&&(o[l]=h)}return o}possiblyEvaluate(o,l,h){const v=new Au(this._properties);for(const f of Object.keys(this._values))v._values[f]=this._values[f].possiblyEvaluate(o,l,h);return v}}class Ou{constructor(o,l,h){this.property=o,this.value=l,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,l,h,v){return this.property.evaluate(this.value,this.parameters,o,l,h,v)}}class Au{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class mn{constructor(o){this.specification=o}possiblyEvaluate(o,l){return o.expression.evaluate(l)}interpolate(o,l,h){const v=Xo[this.specification.type];return v?v(o,l,h):o}}class Yn{constructor(o,l){this.specification=o,this.overrides=l}possiblyEvaluate(o,l,h,v){return new Ou(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(l,null,{},h,v)}:o.expression,l)}interpolate(o,l,h){if(o.value.kind!=="constant"||l.value.kind!=="constant")return o;if(o.value.value===void 0||l.value.value===void 0)return new Ou(this,{kind:"constant",value:void 0},o.parameters);const v=Xo[this.specification.type];return v?new Ou(this,{kind:"constant",value:v(o.value.value,l.value.value,h)},o.parameters):o}evaluate(o,l,h,v,f,y){return o.kind==="constant"?o.value:o.evaluate(l,h,v,f,y)}}class Du{constructor(o){this.specification=o}possiblyEvaluate(o,l,h,v){return!!o.expression.evaluate(l,null,{},h,v)}interpolate(){return!1}}class Ri{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const l=new Zi(0,{});for(const h in o){const v=o[h];v.specification.overridable&&this.overridableProperties.push(h);const f=this.defaultPropertyValues[h]=new jf(v,void 0),y=this.defaultTransitionablePropertyValues[h]=new zg(v);this.defaultTransitioningPropertyValues[h]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=f.possiblyEvaluate(l)}}}Fn(Yn,"DataDrivenProperty"),Fn(mn,"DataConstantProperty"),Fn(Du,"ColorRampProperty");var Ot=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"imports":{"type":"array","value":"import"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"experimental":true,"type":"featuresets"}},"featuresets":{"experimental":true,"*":{"type":"featureset"}},"featureset":{"experimental":true,"metadata":{"type":"*"},"selectors":{"type":"array","value":"selector"}},"selector":{"experimental":true,"layer":{"type":"string","required":true},"properties":{"type":"selectorProperty","required":false},"featureNamespace":{"type":"string","required":false}},"selectorProperty":{"experimental":true,"*":{"type":"*"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","property-type":"data-constant","expression":{},"required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"property-type":"data-constant"},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"experimental":true,"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"raster-particle":{"experimental":true},"hillshade":{},"model":{"experimental":true},"background":{},"sky":{},"slot":{},"clip":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{},"property-type":"data-constant","experimental":true},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{},"property-type":"data-constant","experimental":true}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-base":1,"hd-road-markup":1},"default":"none","experimental":true,"private":true,"expression":{},"property-type":"data-constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","experimental":true,"default":0,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"line-elevation-reference":{"type":"enum","values":{"none":1,"sea":1,"ground":1,"hd-road-markup":1},"default":"none","experimental":true,"expression":{},"property-type":"data-constant"},"line-cross-slope":{"type":"number","experimental":true,"expression":{},"property-type":"constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1,"hd-road-markup":1},"default":"ground","experimental":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_hillshade":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster-particle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_clip":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_model":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"snow":{"density":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","property-type":"data-constant","default":0,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"centerThinning":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,90],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"rain":{"density":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","property-type":"data-constant","default":0,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"centerThinning":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,80],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"colorTheme":{"data":{"type":"string","property-type":"data-constant","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-height-alignment":{"type":"enum","experimental":true,"values":{"terrain":1,"flat":1},"default":"flat","property-type":"data-constant"},"fill-extrusion-base-alignment":{"type":"enum","experimental":true,"values":{"terrain":1,"flat":1},"default":"terrain","property-type":"data-constant"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","experimental":true,"default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","experimental":true,"default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"experimental":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-trim-fade-range":{"type":"array","value":"number","experimental":true,"length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-trim-color":{"type":"color","experimental":true,"default":"transparent","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"property-type":"data-constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"experimental":true,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-particle-count":{"type":"number","default":512,"minimum":1,"property-type":"data-constant"},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1,"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1,"property-type":"data-constant"},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]},"property-type":"data-constant"},"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"model-front-cutoff":{"type":"array","private":true,"value":"number","property-type":"data-constant","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Lg(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function Lc(u){if(Array.isArray(u))return u.map(Lc);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){const o={};for(const l in u)o[l]=Lc(u[l]);return o}return Lg(u)}function Ng(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(const o of u.slice(1))if(!Ng(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}function Vf(u,o="",l=null,h="fill"){if(u==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Ng(u)||(u=Hf(u));const v=u;let f=!0;try{f=function(w){if(!Es(w))return w;let R=Lc(w);return Fg(R),R=yl(R),R}(v)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(v,null,2)}
        `)}let y=null,E=null;if(h!=="background"&&h!=="sky"&&h!=="slot"){E=Ot[`filter_${h}`];const w=Pu(f,E,o,l);if(w.result==="error")throw new Error(w.value.map(R=>`${R.key}: ${R.message}`).join(", "));y=(R,D,P)=>w.value.evaluate(R,D,{},P)}let O=null,k=null;if(f!==v){const w=Pu(v,E,o,l);if(w.result==="error")throw new Error(w.value.map(R=>`${R.key}: ${R.message}`).join(", "));O=(R,D,P,A,F)=>w.value.evaluate(R,D,{},P,void 0,void 0,A,F),k=!Zd(w.value.expression)}return{filter:y,dynamicFilter:O||void 0,needGeometry:E_(f),needFeature:!!k}}function yl(u){if(!Array.isArray(u))return u;const o=function(l){if(MS.has(l[0])){for(let h=1;h<l.length;h++)if(Es(l[h]))return!0}return l}(u);return o===!0?o:o.map(l=>yl(l))}function Fg(u){let o=!1;const l=[];if(u[0]==="case"){for(let h=1;h<u.length-1;h+=2)o=o||Es(u[h]),l.push(u[h+1]);l.push(u[u.length-1])}else if(u[0]==="match"){o=o||Es(u[1]);for(let h=2;h<u.length-1;h+=2)l.push(u[h+1]);l.push(u[u.length-1])}else if(u[0]==="step"){o=o||Es(u[1]);for(let h=1;h<u.length-1;h+=2)l.push(u[h+1])}o&&(u.length=0,u.push("any",...l));for(let h=1;h<u.length;h++)Fg(u[h])}function Es(u){if(!Array.isArray(u))return!1;if((o=u[0])==="pitch"||o==="distance-from-center")return!0;var o;for(let l=1;l<u.length;l++)if(Es(u[l]))return!0;return!1}const MS=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function PS(u,o){return u<o?-1:u>o?1:0}function E_(u){if(!Array.isArray(u))return!1;if(u[0]==="within"||u[0]==="distance")return!0;for(let o=1;o<u.length;o++)if(E_(u[o]))return!0;return!1}function Hf(u){if(!u)return!0;const o=u[0];return u.length<=1?o!=="any":o==="=="?Bg(u[1],u[2],"=="):o==="!="?Nc(Bg(u[1],u[2],"==")):o==="<"||o===">"||o==="<="||o===">="?Bg(u[1],u[2],o):o==="any"?(l=u.slice(1),["any"].concat(l.map(Hf))):o==="all"?["all"].concat(u.slice(1).map(Hf)):o==="none"?["all"].concat(u.slice(1).map(Hf).map(Nc)):o==="in"?jg(u[1],u.slice(2)):o==="!in"?Nc(jg(u[1],u.slice(2))):o==="has"?Uf(u[1]):o!=="!has"||Nc(Uf(u[1]));var l}function Bg(u,o,l){switch(u){case"$type":return[`filter-type-${l}`,o];case"$id":return[`filter-id-${l}`,o];default:return[`filter-${l}`,u,o]}}function jg(u,o){if(o.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(l=>typeof l!=typeof o[0])?["filter-in-large",u,["literal",o.sort(PS)]]:["filter-in-small",u,["literal",o]]}}function Uf(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function Nc(u){return["!",u]}const ch="";function Wf(u,o){return o?`${u}${ch}${o}`:u}const T_="-transition",Gs=new Set(["fill","line","background","hillshade","raster"]);class xa extends jn{constructor(o,l,h,v,f){if(super(),this.id=o.id,this.fqid=Wf(this.id,h),this.type=o.type,this.scope=h,this.lut=v,this.options=f,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.configDependencies=new Set,o.type!=="custom"){if(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type&&o.type!=="background"&&o.type!=="sky"&&o.type!=="slot"){this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter;const y=Pu(this.filter,Ot[`filter_${o.type}`]);y.result!=="error"&&(this.configDependencies=new Set([...this.configDependencies,...y.value.configDependencies]))}if(o.slot&&(this.slot=o.slot),l.layout&&(this._unevaluatedLayout=new IS(l.layout,this.scope,f),this.configDependencies=new Set([...this.configDependencies,...this._unevaluatedLayout.configDependencies])),l.paint){this._transitionablePaint=new w_(l.paint,this.scope,f);for(const y in o.paint)this.setPaintProperty(y,o.paint[y]);for(const y in o.layout)this.setLayoutProperty(y,o.layout[y]);this.configDependencies=new Set([...this.configDependencies,...this._transitionablePaint.configDependencies]),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Au(l.paint)}}}onAdd(o){}onRemove(o){}isDraped(o){return!this.is3D()&&Gs.has(this.type)}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,l){if(this.type==="custom"&&o==="visibility")return void(this.visibility=l);const h=this._unevaluatedLayout;h._properties.properties[o]&&(h.setValue(o,l),this.configDependencies=new Set([...this.configDependencies,...h.configDependencies]),o==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this._unevaluatedLayout._values.visibility&&(this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0}))}getPaintProperty(o){return nn(o,T_)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,l){const h=this._transitionablePaint,v=h._properties.properties;if(nn(o,T_)){const R=o.slice(0,-11);return v[R]&&h.setTransition(R,l||void 0),!1}if(!v[o])return!1;const f=h._values[o],y=f.value.isDataDriven(),E=f.value;h.setValue(o,l),this.configDependencies=new Set([...this.configDependencies,...h.configDependencies]),this._handleSpecialPaintPropertyUpdate(o);const O=h._values[o].value,k=O.isDataDriven(),w=nn(o,"pattern")||o==="line-dasharray";return k||y||w||this._handleOverridablePaintPropertyUpdate(o,E,O)}_handleSpecialPaintPropertyUpdate(o){}getProgramIds(){return null}getDefaultProgramParams(o,l,h){return null}_handleOverridablePaintPropertyUpdate(o,l,h){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,l){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,l)}serialize(){return cn({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(o,l)=>!(o===void 0||l==="layout"&&!Object.keys(o).length||l==="paint"&&!Object.keys(o).length))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const o in this.paint._values){const l=this.paint.get(o);if(l instanceof Ou&&Dc(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}compileFilter(o){this._filterCompiled||(this._featureFilter=Vf(this.filter,this.scope,o),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(o){this._stats&&(o.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(o){}queryIntersectsFeature(o,l,h,v,f,y,E,O,k){}queryIntersectsMatchingFeature(o,l,h,v){}}const I_={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class uh{constructor(o,l){this._structArray=o,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Oi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,l){return o._trim(),l&&(o.isTransferred=!0,l.add(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const l=Object.create(this.prototype);return l.arrayBuffer=o.arrayBuffer,l.length=o.length,l.capacity=o.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...o){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...o){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Qr(u,o=1){let l=0,h=0;return{members:u.map(v=>{const f=I_[v.type].BYTES_PER_ELEMENT,y=l=M_(l,Math.max(o,f)),E=v.components||1;return h=Math.max(h,f),l+=f*E,{name:v.name,type:v.type,components:E,offset:y}}),size:M_(l,Math.max(h,o)),alignment:o}}function M_(u,o){return Math.ceil(u/o)*o}class oc extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l){const h=this.length;return this.resize(h+1),this.emplace(h,o,l)}emplace(o,l,h){const v=2*o;return this.int16[v+0]=l,this.int16[v+1]=h,o}}oc.prototype.bytesPerElement=4,Fn(oc,"StructArrayLayout2i4");class Gf extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,h){const v=this.length;return this.resize(v+1),this.emplace(v,o,l,h)}emplace(o,l,h,v){const f=3*o;return this.int16[f+0]=l,this.int16[f+1]=h,this.int16[f+2]=v,o}}Gf.prototype.bytesPerElement=6,Fn(Gf,"StructArrayLayout3i6");class $u extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,h,v){const f=this.length;return this.resize(f+1),this.emplace(f,o,l,h,v)}emplace(o,l,h,v,f){const y=4*o;return this.int16[y+0]=l,this.int16[y+1]=h,this.int16[y+2]=v,this.int16[y+3]=f,o}}$u.prototype.bytesPerElement=8,Fn($u,"StructArrayLayout4i8");class Vg extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,h,v,f){const y=this.length;return this.resize(y+1),this.emplace(y,o,l,h,v,f)}emplace(o,l,h,v,f,y){const E=5*o;return this.int16[E+0]=l,this.int16[E+1]=h,this.int16[E+2]=v,this.int16[E+3]=f,this.int16[E+4]=y,o}}Vg.prototype.bytesPerElement=10,Fn(Vg,"StructArrayLayout5i10");class dh extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,h,v,f,y,E){const O=this.length;return this.resize(O+1),this.emplace(O,o,l,h,v,f,y,E)}emplace(o,l,h,v,f,y,E,O){const k=6*o,w=12*o,R=3*o;return this.int16[k+0]=l,this.int16[k+1]=h,this.uint8[w+4]=v,this.uint8[w+5]=f,this.uint8[w+6]=y,this.uint8[w+7]=E,this.float32[R+2]=O,o}}dh.prototype.bytesPerElement=12,Fn(dh,"StructArrayLayout2i4ub1f12");class _l extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,h,v){const f=this.length;return this.resize(f+1),this.emplace(f,o,l,h,v)}emplace(o,l,h,v,f){const y=4*o;return this.float32[y+0]=l,this.float32[y+1]=h,this.float32[y+2]=v,this.float32[y+3]=f,o}}_l.prototype.bytesPerElement=16,Fn(_l,"StructArrayLayout4f16");class ac extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,h){const v=this.length;return this.resize(v+1),this.emplace(v,o,l,h)}emplace(o,l,h,v){const f=3*o;return this.float32[f+0]=l,this.float32[f+1]=h,this.float32[f+2]=v,o}}ac.prototype.bytesPerElement=12,Fn(ac,"StructArrayLayout3f12");class xl extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,h,v,f){const y=this.length;return this.resize(y+1),this.emplace(y,o,l,h,v,f)}emplace(o,l,h,v,f,y){const E=6*o,O=3*o;return this.uint16[E+0]=l,this.uint16[E+1]=h,this.uint16[E+2]=v,this.uint16[E+3]=f,this.float32[O+2]=y,o}}xl.prototype.bytesPerElement=12,Fn(xl,"StructArrayLayout4ui1f12");class qf extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,h,v){const f=this.length;return this.resize(f+1),this.emplace(f,o,l,h,v)}emplace(o,l,h,v,f){const y=4*o;return this.uint16[y+0]=l,this.uint16[y+1]=h,this.uint16[y+2]=v,this.uint16[y+3]=f,o}}qf.prototype.bytesPerElement=8,Fn(qf,"StructArrayLayout4ui8");class hh extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,h,v,f,y){const E=this.length;return this.resize(E+1),this.emplace(E,o,l,h,v,f,y)}emplace(o,l,h,v,f,y,E){const O=6*o;return this.int16[O+0]=l,this.int16[O+1]=h,this.int16[O+2]=v,this.int16[O+3]=f,this.int16[O+4]=y,this.int16[O+5]=E,o}}hh.prototype.bytesPerElement=12,Fn(hh,"StructArrayLayout6i12");class ku extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,h,v,f,y,E,O,k,w,R,D){const P=this.length;return this.resize(P+1),this.emplace(P,o,l,h,v,f,y,E,O,k,w,R,D)}emplace(o,l,h,v,f,y,E,O,k,w,R,D,P){const A=12*o;return this.int16[A+0]=l,this.int16[A+1]=h,this.int16[A+2]=v,this.int16[A+3]=f,this.uint16[A+4]=y,this.uint16[A+5]=E,this.uint16[A+6]=O,this.uint16[A+7]=k,this.int16[A+8]=w,this.int16[A+9]=R,this.int16[A+10]=D,this.int16[A+11]=P,o}}ku.prototype.bytesPerElement=24,Fn(ku,"StructArrayLayout4i4ui4i24");class Hg extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,h,v,f,y){const E=this.length;return this.resize(E+1),this.emplace(E,o,l,h,v,f,y)}emplace(o,l,h,v,f,y,E){const O=10*o,k=5*o;return this.int16[O+0]=l,this.int16[O+1]=h,this.int16[O+2]=v,this.float32[k+2]=f,this.float32[k+3]=y,this.float32[k+4]=E,o}}Hg.prototype.bytesPerElement=20,Fn(Hg,"StructArrayLayout3i3f20");class Ug extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const l=this.length;return this.resize(l+1),this.emplace(l,o)}emplace(o,l){return this.uint32[1*o+0]=l,o}}Ug.prototype.bytesPerElement=4,Fn(Ug,"StructArrayLayout1ul4");class sc extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l){const h=this.length;return this.resize(h+1),this.emplace(h,o,l)}emplace(o,l,h){const v=2*o;return this.uint16[v+0]=l,this.uint16[v+1]=h,o}}sc.prototype.bytesPerElement=4,Fn(sc,"StructArrayLayout2ui4");class Wg extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,h,v,f,y,E,O,k,w,R,D,P){const A=this.length;return this.resize(A+1),this.emplace(A,o,l,h,v,f,y,E,O,k,w,R,D,P)}emplace(o,l,h,v,f,y,E,O,k,w,R,D,P,A){const F=20*o,q=10*o;return this.int16[F+0]=l,this.int16[F+1]=h,this.int16[F+2]=v,this.int16[F+3]=f,this.int16[F+4]=y,this.float32[q+3]=E,this.float32[q+4]=O,this.float32[q+5]=k,this.float32[q+6]=w,this.int16[F+14]=R,this.uint32[q+8]=D,this.uint16[F+18]=P,this.uint16[F+19]=A,o}}Wg.prototype.bytesPerElement=40,Fn(Wg,"StructArrayLayout5i4f1i1ul2ui40");class Kf extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,h,v,f,y,E){const O=this.length;return this.resize(O+1),this.emplace(O,o,l,h,v,f,y,E)}emplace(o,l,h,v,f,y,E,O){const k=8*o;return this.int16[k+0]=l,this.int16[k+1]=h,this.int16[k+2]=v,this.int16[k+4]=f,this.int16[k+5]=y,this.int16[k+6]=E,this.int16[k+7]=O,o}}Kf.prototype.bytesPerElement=16,Fn(Kf,"StructArrayLayout3i2i2i16");class zu extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,h,v,f){const y=this.length;return this.resize(y+1),this.emplace(y,o,l,h,v,f)}emplace(o,l,h,v,f,y){const E=4*o,O=8*o;return this.float32[E+0]=l,this.float32[E+1]=h,this.float32[E+2]=v,this.int16[O+6]=f,this.int16[O+7]=y,o}}zu.prototype.bytesPerElement=16,Fn(zu,"StructArrayLayout2f1f2i16");class Lu extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,h,v,f,y){const E=this.length;return this.resize(E+1),this.emplace(E,o,l,h,v,f,y)}emplace(o,l,h,v,f,y,E){const O=20*o,k=5*o;return this.uint8[O+0]=l,this.uint8[O+1]=h,this.float32[k+1]=v,this.float32[k+2]=f,this.float32[k+3]=y,this.float32[k+4]=E,o}}Lu.prototype.bytesPerElement=20,Fn(Lu,"StructArrayLayout2ub4f20");class ji extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,h){const v=this.length;return this.resize(v+1),this.emplace(v,o,l,h)}emplace(o,l,h,v){const f=3*o;return this.uint16[f+0]=l,this.uint16[f+1]=h,this.uint16[f+2]=v,o}}ji.prototype.bytesPerElement=6,Fn(ji,"StructArrayLayout3ui6");class Nu extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,l,h,v,f,y,E,O,k,w,R,D,P,A,F,q,Z,ie,oe,te,ue){const _e=this.length;return this.resize(_e+1),this.emplace(_e,o,l,h,v,f,y,E,O,k,w,R,D,P,A,F,q,Z,ie,oe,te,ue)}emplace(o,l,h,v,f,y,E,O,k,w,R,D,P,A,F,q,Z,ie,oe,te,ue,_e){const Re=30*o,Ue=15*o,Le=60*o;return this.int16[Re+0]=l,this.int16[Re+1]=h,this.int16[Re+2]=v,this.float32[Ue+2]=f,this.float32[Ue+3]=y,this.uint16[Re+8]=E,this.uint16[Re+9]=O,this.uint32[Ue+5]=k,this.uint32[Ue+6]=w,this.uint32[Ue+7]=R,this.uint16[Re+16]=D,this.uint16[Re+17]=P,this.uint16[Re+18]=A,this.float32[Ue+10]=F,this.float32[Ue+11]=q,this.uint8[Le+48]=Z,this.uint8[Le+49]=ie,this.uint8[Le+50]=oe,this.uint32[Ue+13]=te,this.int16[Re+28]=ue,this.uint8[Le+58]=_e,o}}Nu.prototype.bytesPerElement=60,Fn(Nu,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Gg extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,l,h,v,f,y,E,O,k,w,R,D,P,A,F,q,Z,ie,oe,te,ue,_e,Re,Ue,Le,Fe,tt,Ne,et,lt,ct,xt){const Pt=this.length;return this.resize(Pt+1),this.emplace(Pt,o,l,h,v,f,y,E,O,k,w,R,D,P,A,F,q,Z,ie,oe,te,ue,_e,Re,Ue,Le,Fe,tt,Ne,et,lt,ct,xt)}emplace(o,l,h,v,f,y,E,O,k,w,R,D,P,A,F,q,Z,ie,oe,te,ue,_e,Re,Ue,Le,Fe,tt,Ne,et,lt,ct,xt,Pt){const $t=20*o,Tt=40*o,Ht=80*o;return this.float32[$t+0]=l,this.float32[$t+1]=h,this.int16[Tt+4]=v,this.int16[Tt+5]=f,this.int16[Tt+6]=y,this.int16[Tt+7]=E,this.int16[Tt+8]=O,this.int16[Tt+9]=k,this.int16[Tt+10]=w,this.int16[Tt+11]=R,this.int16[Tt+12]=D,this.uint16[Tt+13]=P,this.uint16[Tt+14]=A,this.uint16[Tt+15]=F,this.uint16[Tt+16]=q,this.uint16[Tt+17]=Z,this.uint16[Tt+18]=ie,this.uint16[Tt+19]=oe,this.uint16[Tt+20]=te,this.uint16[Tt+21]=ue,this.uint16[Tt+22]=_e,this.uint16[Tt+23]=Re,this.uint16[Tt+24]=Ue,this.uint16[Tt+25]=Le,this.uint16[Tt+26]=Fe,this.uint16[Tt+27]=tt,this.uint32[$t+14]=Ne,this.float32[$t+15]=et,this.float32[$t+16]=lt,this.float32[$t+17]=ct,this.float32[$t+18]=xt,this.uint8[Ht+76]=Pt,o}}Gg.prototype.bytesPerElement=80,Fn(Gg,"StructArrayLayout2f9i15ui1ul4f1ub80");class Fu extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const l=this.length;return this.resize(l+1),this.emplace(l,o)}emplace(o,l){return this.float32[1*o+0]=l,o}}Fu.prototype.bytesPerElement=4,Fn(Fu,"StructArrayLayout1f4");class Fc extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,h,v,f){const y=this.length;return this.resize(y+1),this.emplace(y,o,l,h,v,f)}emplace(o,l,h,v,f,y){const E=5*o;return this.float32[E+0]=l,this.float32[E+1]=h,this.float32[E+2]=v,this.float32[E+3]=f,this.float32[E+4]=y,o}}Fc.prototype.bytesPerElement=20,Fn(Fc,"StructArrayLayout5f20");class qg extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,h,v,f,y,E){const O=this.length;return this.resize(O+1),this.emplace(O,o,l,h,v,f,y,E)}emplace(o,l,h,v,f,y,E,O){const k=7*o;return this.float32[k+0]=l,this.float32[k+1]=h,this.float32[k+2]=v,this.float32[k+3]=f,this.float32[k+4]=y,this.float32[k+5]=E,this.float32[k+6]=O,o}}qg.prototype.bytesPerElement=28,Fn(qg,"StructArrayLayout7f28");class Xf extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,h,v,f,y,E,O,k,w,R){const D=this.length;return this.resize(D+1),this.emplace(D,o,l,h,v,f,y,E,O,k,w,R)}emplace(o,l,h,v,f,y,E,O,k,w,R,D){const P=11*o;return this.float32[P+0]=l,this.float32[P+1]=h,this.float32[P+2]=v,this.float32[P+3]=f,this.float32[P+4]=y,this.float32[P+5]=E,this.float32[P+6]=O,this.float32[P+7]=k,this.float32[P+8]=w,this.float32[P+9]=R,this.float32[P+10]=D,o}}Xf.prototype.bytesPerElement=44,Fn(Xf,"StructArrayLayout11f44");class P_ extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,h,v,f,y,E,O,k){const w=this.length;return this.resize(w+1),this.emplace(w,o,l,h,v,f,y,E,O,k)}emplace(o,l,h,v,f,y,E,O,k,w){const R=9*o;return this.float32[R+0]=l,this.float32[R+1]=h,this.float32[R+2]=v,this.float32[R+3]=f,this.float32[R+4]=y,this.float32[R+5]=E,this.float32[R+6]=O,this.float32[R+7]=k,this.float32[R+8]=w,o}}P_.prototype.bytesPerElement=36,Fn(P_,"StructArrayLayout9f36");class fh extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,h,v){const f=this.length;return this.resize(f+1),this.emplace(f,o,l,h,v)}emplace(o,l,h,v,f){const y=6*o;return this.uint32[3*o+0]=l,this.uint16[y+2]=h,this.uint16[y+3]=v,this.uint16[y+4]=f,o}}fh.prototype.bytesPerElement=12,Fn(fh,"StructArrayLayout1ul3ui12");class Kg extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const l=this.length;return this.resize(l+1),this.emplace(l,o)}emplace(o,l){return this.uint16[1*o+0]=l,o}}Kg.prototype.bytesPerElement=2,Fn(Kg,"StructArrayLayout1ui2");class ph extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l){const h=this.length;return this.resize(h+1),this.emplace(h,o,l)}emplace(o,l,h){const v=2*o;return this.float32[v+0]=l,this.float32[v+1]=h,o}}ph.prototype.bytesPerElement=8,Fn(ph,"StructArrayLayout2f8");class mh extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,h,v,f,y,E,O,k,w,R,D,P,A,F,q){const Z=this.length;return this.resize(Z+1),this.emplace(Z,o,l,h,v,f,y,E,O,k,w,R,D,P,A,F,q)}emplace(o,l,h,v,f,y,E,O,k,w,R,D,P,A,F,q,Z){const ie=16*o;return this.float32[ie+0]=l,this.float32[ie+1]=h,this.float32[ie+2]=v,this.float32[ie+3]=f,this.float32[ie+4]=y,this.float32[ie+5]=E,this.float32[ie+6]=O,this.float32[ie+7]=k,this.float32[ie+8]=w,this.float32[ie+9]=R,this.float32[ie+10]=D,this.float32[ie+11]=P,this.float32[ie+12]=A,this.float32[ie+13]=F,this.float32[ie+14]=q,this.float32[ie+15]=Z,o}}mh.prototype.bytesPerElement=64,Fn(mh,"StructArrayLayout16f64");class Zf extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,h,v,f,y,E){const O=this.length;return this.resize(O+1),this.emplace(O,o,l,h,v,f,y,E)}emplace(o,l,h,v,f,y,E,O){const k=10*o,w=5*o;return this.uint16[k+0]=l,this.uint16[k+1]=h,this.uint16[k+2]=v,this.uint16[k+3]=f,this.float32[w+2]=y,this.float32[w+3]=E,this.float32[w+4]=O,o}}Zf.prototype.bytesPerElement=20,Fn(Zf,"StructArrayLayout4ui3f20");class Yf extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o){const l=this.length;return this.resize(l+1),this.emplace(l,o)}emplace(o,l){return this.int16[1*o+0]=l,o}}Yf.prototype.bytesPerElement=2,Fn(Yf,"StructArrayLayout1i2");class Jf extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(o){const l=this.length;return this.resize(l+1),this.emplace(l,o)}emplace(o,l){return this.uint8[1*o+0]=l,o}}Jf.prototype.bytesPerElement=1,Fn(Jf,"StructArrayLayout1ub1");class R_ extends uh{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}R_.prototype.size=40;class Qf extends Wg{get(o){return new R_(this,o)}}Fn(Qf,"CollisionBoxArray");class gh extends uh{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(o){this._structArray.uint8[this._pos1+49]=o}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(o){this._structArray.uint8[this._pos1+50]=o}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(o){this._structArray.uint32[this._pos4+13]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(o){this._structArray.uint8[this._pos1+58]=o}}gh.prototype.size=60;class Xg extends Nu{get(o){return new gh(this,o)}}Fn(Xg,"PlacedSymbolArray");class O_ extends uh{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(o){this._structArray.uint32[this._pos4+14]=o}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(o){this._structArray.float32[this._pos4+18]=o}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}}O_.prototype.size=80;class Zg extends Gg{get(o){return new O_(this,o)}}Fn(Zg,"SymbolInstanceArray");class A_ extends Fu{getoffsetX(o){return this.float32[1*o+0]}}Fn(A_,"GlyphOffsetArray");class ep extends oc{getx(o){return this.int16[2*o+0]}gety(o){return this.int16[2*o+1]}}Fn(ep,"SymbolLineVertexArray");class D_ extends uh{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}D_.prototype.size=12;class $_ extends fh{get(o){return new D_(this,o)}}Fn($_,"FeatureIndexArray");class k_ extends sc{geta_centroid_pos0(o){return this.uint16[2*o+0]}geta_centroid_pos1(o){return this.uint16[2*o+1]}}Fn(k_,"FillExtrusionCentroidArray");class z_ extends uh{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}z_.prototype.size=6;class Yg extends Gf{get(o){return new z_(this,o)}}Fn(Yg,"FillExtrusionWallArray");const RS=Qr([{name:"a_pos",components:2,type:"Int16"}],4),OS=Qr([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class io{constructor(o=[]){this.segments=o}_prepareSegment(o,l,h,v){let f=this.segments[this.segments.length-1];return o>io.MAX_VERTEX_ARRAY_LENGTH&&Xt(`Max vertices per segment is ${io.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!f||f.vertexLength+o>io.MAX_VERTEX_ARRAY_LENGTH||f.sortKey!==v)&&(f={vertexOffset:l,primitiveOffset:h,vertexLength:0,primitiveLength:0},v!==void 0&&(f.sortKey=v),this.segments.push(f)),f}prepareSegment(o,l,h,v){return this._prepareSegment(o,l.length,h.length,v)}get(){return this.segments}destroy(){for(const o of this.segments)for(const l in o.vaos)o.vaos[l].destroy()}static simpleSegment(o,l,h,v){return new io([{vertexOffset:o,primitiveOffset:l,vertexLength:h,primitiveLength:v,vaos:{},sortKey:0}])}}function L_(u,o){return 256*(u=Rt(Math.floor(u),0,255))+Rt(Math.floor(o),0,255)}io.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Fn(io,"SegmentVector");const AS=Qr([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),DS=Qr([{name:"a_dash",components:4,type:"Uint16"}]);class vh{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(o,l,h,v){this.ids.push(N_(o)),this.positions.push(l,h,v)}eachPosition(o,l){const h=N_(o);let v=0,f=this.ids.length-1;for(;v<f;){const y=v+f>>1;this.ids[y]>=h?f=y:v=y+1}for(;this.ids[v]===h;)l(this.positions[3*v],this.positions[3*v+1],this.positions[3*v+2]),v++}static serialize(o,l){const h=new Float64Array(o.ids),v=new Uint32Array(o.positions);return Bu(h,v,0,h.length-1),l&&(l.add(h.buffer),l.add(v.buffer)),{ids:h,positions:v}}static deserialize(o){const l=new vh;let h;l.ids=o.ids,l.positions=o.positions;for(const v of l.ids)v!==h&&l.uniqueIds.push(v),h=v;return l.indexed=!0,l}}function N_(u){const o=+u;return!isNaN(o)&&Number.MIN_SAFE_INTEGER<=o&&o<=Number.MAX_SAFE_INTEGER?o:mi(String(u))}function Bu(u,o,l,h){for(;l<h;){const v=u[l+h>>1];let f=l-1,y=h+1;for(;;){do f++;while(u[f]<v);do y--;while(u[y]>v);if(f>=y)break;tp(u,f,y),tp(o,3*f,3*y),tp(o,3*f+1,3*y+1),tp(o,3*f+2,3*y+2)}y-l<h-y?(Bu(u,o,l,y),l=y+1):(Bu(u,o,y+1,h),h=y)}}function tp(u,o,l){const h=u[o];u[o]=u[l],u[l]=h}Fn(vh,"FeaturePositionMap");class bl{constructor(o){this.gl=o.gl,this.initialized=!1}fetchUniformLocation(o,l){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(o,l),this.initialized=!0),!!this.location}set(o,l,h){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class Bc extends bl{constructor(o){super(o),this.current=0}set(o,l,h){this.fetchUniformLocation(o,l)&&this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}}class Po extends bl{constructor(o){super(o),this.current=0}set(o,l,h){this.fetchUniformLocation(o,l)&&this.current!==h&&(this.current=h,this.gl.uniform1f(this.location,h))}}class qs extends bl{constructor(o){super(o),this.current=[0,0]}set(o,l,h){this.fetchUniformLocation(o,l)&&(h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1])))}}class Jg extends bl{constructor(o){super(o),this.current=[0,0,0]}set(o,l,h){this.fetchUniformLocation(o,l)&&(h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2])))}}class np extends bl{constructor(o){super(o),this.current=[0,0,0,0]}set(o,l,h){this.fetchUniformLocation(o,l)&&(h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]&&h[3]===this.current[3]||(this.current=h,this.gl.uniform4f(this.location,h[0],h[1],h[2],h[3])))}}class Qg extends bl{constructor(o){super(o),this.current=Sr.transparent.toRenderColor(null)}set(o,l,h){this.fetchUniformLocation(o,l)&&(h.r===this.current.r&&h.g===this.current.g&&h.b===this.current.b&&h.a===this.current.a||(this.current=h,this.gl.uniform4f(this.location,h.r,h.g,h.b,h.a)))}}const F_=new Float32Array(16);class yh extends bl{constructor(o){super(o),this.current=F_}set(o,l,h){if(this.fetchUniformLocation(o,l)){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(let v=1;v<16;v++)if(h[v]!==this.current[v]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}}}const $S=new Float32Array(9),B_=new Float32Array(4);class rp extends bl{constructor(o){super(o),this.current=B_}set(o,l,h){if(this.fetchUniformLocation(o,l)){for(let v=0;v<4;v++)if(h[v]!==this.current[v]){this.current=h,this.gl.uniformMatrix2fv(this.location,!1,h);break}}}}function ev(u){return[L_(255*u.r,255*u.g),L_(255*u.b,255*u.a)]}class _h{constructor(o,l,h,v){this.value=o,this.uniformNames=l.map(f=>`u_${f}`),this.type=h,this.context=v}setUniform(o,l,h,v,f){const y=v.constantOr(this.value);l.set(o,f,y instanceof Sr?y.toRenderColor(this.context.lut):y)}getBinding(o,l){return this.type==="color"?new Qg(o):new Po(o)}}class ju{constructor(o,l){this.uniformNames=l.map(h=>`u_${h}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(o){this.pixelRatio=o.pixelRatio||1,this.pattern=o.tl.concat(o.br)}setUniform(o,l,h,v,f){const y=f==="u_pattern"||f==="u_dash"?this.pattern:f==="u_pixel_ratio"?this.pixelRatio:null;y&&l.set(o,f,y)}getBinding(o,l){return l==="u_pattern"||l==="u_dash"?new np(o):new Po(o)}}class wl{constructor(o,l,h,v){this.expression=o,this.type=h,this.maxValue=0,this.paintVertexAttributes=l.map(f=>({name:`a_${f}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new v}populatePaintArray(o,l,h,v,f,y,E){const O=this.paintVertexArray.length,k=this.expression.evaluate(new Zi(0,{brightness:y}),l,{},f,v,E);this.paintVertexArray.resize(o),this._setPaintValue(O,o,k,this.context)}updatePaintArray(o,l,h,v,f,y,E){const O=this.expression.evaluate({zoom:0,brightness:E},h,v,void 0,f);this._setPaintValue(o,l,O,this.context)}_setPaintValue(o,l,h,v){if(this.type==="color"){const f=ev(h.toRenderColor(v.lut));for(let y=o;y<l;y++)this.paintVertexArray.emplace(y,f[0],f[1])}else{for(let f=o;f<l;f++)this.paintVertexArray.emplace(f,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ts{constructor(o,l,h,v,f,y){this.expression=o,this.uniformNames=l.map(E=>`u_${E}_t`),this.type=h,this.useIntegerZoom=v,this.context=f,this.maxValue=0,this.paintVertexAttributes=l.map(E=>({name:`a_${E}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new y}populatePaintArray(o,l,h,v,f,y,E){const O=this.expression.evaluate(new Zi(this.context.zoom,{brightness:y}),l,{},f,v,E),k=this.expression.evaluate(new Zi(this.context.zoom+1,{brightness:y}),l,{},f,v,E),w=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(w,o,O,k,this.context)}updatePaintArray(o,l,h,v,f,y,E){const O=this.expression.evaluate({zoom:this.context.zoom,brightness:E},h,v,void 0,f),k=this.expression.evaluate({zoom:this.context.zoom+1,brightness:E},h,v,void 0,f);this._setPaintValue(o,l,O,k,this.context)}_setPaintValue(o,l,h,v,f){if(this.type==="color"){const y=ev(h.toRenderColor(f.lut)),E=ev(h.toRenderColor(f.lut));for(let O=o;O<l;O++)this.paintVertexArray.emplace(O,y[0],y[1],E[0],E[1])}else{for(let y=o;y<l;y++)this.paintVertexArray.emplace(y,h,v);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(v))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,l,h,v,f){const y=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,E=Rt(this.expression.interpolationFactor(y,this.context.zoom,this.context.zoom+1),0,1);l.set(o,f,E)}getBinding(o,l){return new Po(o)}}class Sl{constructor(o,l,h,v,f){this.expression=o,this.layerId=f,this.paintVertexAttributes=(h==="array"?DS:AS).members;for(let y=0;y<l.length;++y);this.paintVertexArray=new v}populatePaintArray(o,l,h,v){const f=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValues(f,o,l.patterns&&l.patterns[this.layerId],h)}updatePaintArray(o,l,h,v,f,y,E){this._setPaintValues(o,l,h.patterns&&h.patterns[this.layerId],y)}_setPaintValues(o,l,h,v){if(!v||!h)return;const f=v[h];if(!f)return;const{tl:y,br:E,pixelRatio:O}=f;for(let k=o;k<l;k++)this.paintVertexArray.emplace(k,y[0],y[1],E[0],E[1],O)}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Cl{constructor(o,l,h=()=>!0){this.binders={},this._buffers=[],this.context=l;const v=[];for(const f in o.paint._values){const y=o.paint.get(f);if(!h(f)||!(y instanceof Ou&&Dc(y.property.specification)))continue;const E=zS(f,o.type),O=y.value,k=y.property.specification.type,w=!!y.property.useIntegerZoom,R=f==="line-dasharray"||f.endsWith("pattern"),D=f==="line-dasharray"&&o.layout.get("line-cap").value.kind!=="constant";if(O.kind!=="constant"||D)if(O.kind==="source"||D||R){const P=j_(f,k,"source");this.binders[f]=R?new Sl(O,E,k,P,o.id):new wl(O,E,k,P),v.push(`/a_${f}`)}else{const P=j_(f,k,"composite");this.binders[f]=new Ts(O,E,k,w,l,P),v.push(`/z_${f}`)}else this.binders[f]=R?new ju(O.value,E):new _h(O.value,E,k,l),v.push(`/u_${f}`)}this.cacheKey=v.sort().join("")}getMaxValue(o){const l=this.binders[o];return l instanceof wl||l instanceof Ts?l.maxValue:0}populatePaintArrays(o,l,h,v,f,y,E){for(const O in this.binders){const k=this.binders[O];k.context=this.context,(k instanceof wl||k instanceof Ts||k instanceof Sl)&&k.populatePaintArray(o,l,h,v,f,y,E)}}setConstantPatternPositions(o){for(const l in this.binders){const h=this.binders[l];h instanceof ju&&h.setConstantPatternPositions(o)}}updatePaintArrays(o,l,h,v,f,y,E,O){let k=!1;const w=Object.keys(o),R=w.length!==0,D=R?w:l.uniqueIds;this.context.lut=f.lut;for(const P in this.binders){const A=this.binders[P];if(A.context=this.context,(A instanceof wl||A instanceof Ts||A instanceof Sl)&&(A.expression.isStateDependent===!0||A.expression.isLightConstant===!1)){const F=f.paint.get(P);A.expression=F.value;for(const q of D){const Z=o[q.toString()];l.eachPosition(q,(ie,oe,te)=>{const ue=v.feature(ie);A.updatePaintArray(oe,te,ue,Z,y,E,O)})}if(!R)for(const q of h.uniqueIds){const Z=o[q.toString()];h.eachPosition(q,(ie,oe,te)=>{const ue=v.feature(ie);A.updatePaintArray(oe,te,ue,Z,y,E,O)})}k=!0}}return k}defines(){const o=[];for(const l in this.binders){const h=this.binders[l];(h instanceof _h||h instanceof ju)&&o.push(...h.uniformNames.map(v=>`#define HAS_UNIFORM_${v}`))}return o}getBinderAttributes(){const o=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof wl||h instanceof Ts||h instanceof Sl)for(let v=0;v<h.paintVertexAttributes.length;v++)o.push(h.paintVertexAttributes[v].name)}return o}getBinderUniforms(){const o=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof _h||h instanceof ju||h instanceof Ts)for(const v of h.uniformNames)o.push(v)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o){const l=[];for(const h in this.binders){const v=this.binders[h];if(v instanceof _h||v instanceof ju||v instanceof Ts)for(const f of v.uniformNames)l.push({name:f,property:h,binding:v.getBinding(o,f)})}return l}setUniforms(o,l,h,v,f){for(const{name:y,property:E,binding:O}of h)this.binders[E].setUniform(o,O,f,v.get(E),y)}updatePaintBuffers(){this._buffers=[];for(const o in this.binders){const l=this.binders[o];(l instanceof wl||l instanceof Ts||l instanceof Sl)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}}upload(o){for(const l in this.binders){const h=this.binders[l];(h instanceof wl||h instanceof Ts||h instanceof Sl)&&h.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const l=this.binders[o];(l instanceof wl||l instanceof Ts||l instanceof Sl)&&l.destroy()}}}class Ks{constructor(o,l,h=()=>!0){this.programConfigurations={};for(const v of o)this.programConfigurations[v.id]=new Cl(v,l,h);this.needsUpload=!1,this._featureMap=new vh,this._featureMapWithoutIds=new vh,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(o,l,h,v,f,y,E,O){for(const k in this.programConfigurations)this.programConfigurations[k].populatePaintArrays(o,l,v,f,y,E,O);l.id!==void 0?this._featureMap.add(l.id,h,this._bufferOffset,o):(this._featureMapWithoutIds.add(this._idlessCounter,h,this._bufferOffset,o),this._idlessCounter+=1),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,l,h,v,f,y){for(const E of h)this.needsUpload=this.programConfigurations[E.id].updatePaintArrays(o,this._featureMap,this._featureMapWithoutIds,l,E,v,f,y||0)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}const kS={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function zS(u,o){return kS[u]||[u.replace(`${o}-`,"").replace(/-/g,"_")]}const LS={"line-pattern":{source:xl,composite:xl},"fill-pattern":{source:xl,composite:xl},"fill-extrusion-pattern":{source:xl,composite:xl},"line-dasharray":{source:qf,composite:qf}},NS={color:{source:ph,composite:_l},number:{source:Fu,composite:ph}};function j_(u,o,l){const h=LS[u];return h&&h[l]||NS[o][l]}Fn(_h,"ConstantBinder"),Fn(ju,"PatternConstantBinder"),Fn(wl,"SourceExpressionBinder"),Fn(Sl,"PatternCompositeBinder"),Fn(Ts,"CompositeExpressionBinder"),Fn(Cl,"ProgramConfiguration",{omit:["_buffers"]}),Fn(Ks,"ProgramConfigurationSet");const na=Tn/Math.PI/2,V_=5,m=6,a=16383,c=64,g=[c,32,16],b=-na,C=na;function I(u,o,l,h=na){return l=At(l),[u*Math.sin(l)*h,-o*h,u*Math.cos(l)*h]}function z(u,o,l){return I(Math.cos(At(u)),Math.sin(At(u)),o,l)}const U=63710088e-1,K=2*Math.PI*U;class G{constructor(o,l){if(isNaN(o)||isNaN(l))throw new Error(`Invalid LngLat object: (${o}, ${l})`);if(this.lng=+o,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new G(hn(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const l=Math.PI/180,h=this.lat*l,v=o.lat*l,f=Math.sin(h)*Math.sin(v)+Math.cos(h)*Math.cos(v)*Math.cos((o.lng-this.lng)*l);return U*Math.acos(Math.min(f,1))}toBounds(o=0){const l=360*o/40075017,h=l/Math.cos(Math.PI/180*this.lat);return new Q({lng:this.lng-h,lat:this.lat-l},{lng:this.lng+h,lat:this.lat+l})}toEcef(o){return z(this.lat,this.lng,na+o*na/U)}static convert(o){if(o instanceof G)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new G(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new G(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Q{constructor(o,l){if(o)if(l)this.setSouthWest(o).setNorthEast(l);else if(o.length===4){const h=o;this.setSouthWest([h[0],h[1]]).setNorthEast([h[2],h[3]])}else{const h=o;this.setSouthWest(h[0]).setNorthEast(h[1])}}setNorthEast(o){return this._ne=o instanceof G?new G(o.lng,o.lat):G.convert(o),this}setSouthWest(o){return this._sw=o instanceof G?new G(o.lng,o.lat):G.convert(o),this}extend(o){const l=this._sw,h=this._ne;let v,f;if(o instanceof G)v=o,f=o;else{if(!(o instanceof Q))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(Q.convert(o)):this.extend(G.convert(o)):typeof o=="object"&&o!==null&&o.hasOwnProperty("lat")&&(o.hasOwnProperty("lon")||o.hasOwnProperty("lng"))?this.extend(G.convert(o)):this;if(v=o._sw,f=o._ne,!v||!f)return this}return l||h?(l.lng=Math.min(v.lng,l.lng),l.lat=Math.min(v.lat,l.lat),h.lng=Math.max(f.lng,h.lng),h.lat=Math.max(f.lat,h.lat)):(this._sw=new G(v.lng,v.lat),this._ne=new G(f.lng,f.lat)),this}getCenter(){return new G((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new G(this.getWest(),this.getNorth())}getSouthEast(){return new G(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:l,lat:h}=G.convert(o);let v=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&v}static convert(o){if(o)return o instanceof Q?o:new Q(o)}}const ne=0,le=25.5;function be(u){return K*Math.cos(u*Math.PI/180)}function xe(u){return(180+u)/360}function Te(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function Ee(u,o){return u/be(o)}function Oe(u){return 360*u-180}function Ve(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}function He(u,o){return u*be(Ve(o))}const qe=85.051129;function Xe(u){return Math.cos(At(Rt(u,-qe,qe)))}function Ke(u,o){const l=Rt(o,ne,le),h=Math.pow(2,l);return Xe(u)*K/(512*h)}function Ye(u){return 1/Math.cos(u*Math.PI/180)}function rt(u,o=0){const l=Math.exp(Math.PI*(1-(u.y+o/Tn)/(1<<u.z)*2));return 80150034*l/(l*l+1)/Tn/(1<<u.z)}class vt{constructor(o,l,h=0){this.x=+o,this.y=+l,this.z=+h}static fromLngLat(o,l=0){const h=G.convert(o);return new vt(xe(h.lng),Te(h.lat),Ee(l,h.lat))}toLngLat(){return new G(Oe(this.x),Ve(this.y))}toAltitude(){return He(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/K*Ye(Ve(this.y))}}function st(u,o,l,h,v,f,y,E,O){const k=(o+h)/2,w=(l+v)/2,R=new je(k,w);E(R),function(D,P,A,F,q,Z){const ie=A-q,oe=F-Z;return Math.abs((F-P)*ie-(A-D)*oe)/Math.hypot(ie,oe)}(R.x,R.y,f.x,f.y,y.x,y.y)>=O?(st(u,o,l,k,w,f,R,E,O),st(u,k,w,h,v,R,y,E,O)):u.push(y)}function it(u,o,l){let h=u[0],v=h.x,f=h.y;o(h);const y=[h];for(let E=1;E<u.length;E++){const O=u[E],{x:k,y:w}=O;o(O),st(y,v,f,k,w,h,O,o,l),v=k,f=w,h=O}return y}function zt(u,o,l,h){if(h(o,l)){const v=o.add(l)._mult(.5);zt(u,o,v,h),zt(u,v,l,h)}else u.push(l)}function jt(u,o){let l=u[0];const h=[l];for(let v=1;v<u.length;v++){const f=u[v];zt(h,l,f,o),l=f}return h}const tn=Math.pow(2,14)-1,fn=-tn-1;function Sn(u,o){const l=Math.round(u.x*o),h=Math.round(u.y*o);return u.x=Rt(l,fn,tn),u.y=Rt(h,fn,tn),(l<u.x||l>u.x+1||h<u.y||h>u.y+1)&&Xt("Geometry exceeds allowed extent, reduce your vector tile buffer size"),u}function Et(u,o,l){const h=u.loadGeometry(),v=u.extent,f=Tn/v;if(o&&l&&l.projection.isReprojectedInTileSpace){const y=1<<o.z,{scale:E,x:O,y:k,projection:w}=l,R=D=>{const P=Oe((o.x+D.x/v)/y),A=Ve((o.y+D.y/v)/y),F=w.project(P,A);D.x=(F.x*E-O)*v,D.y=(F.y*E-k)*v};for(let D=0;D<h.length;D++)if(u.type!==1)h[D]=it(h[D],R,1);else{const P=[];for(const A of h[D])A.x<0||A.x>=v||A.y<0||A.y>=v||(R(A),P.push(A));h[D]=P}}for(const y of h)for(const E of y)Sn(E,f);return h}function Qt(u,o){return{type:u.type,id:u.id,properties:u.properties,geometry:o?Et(u):[]}}function Nt(u,o,l,h,v){u.emplaceBack(2*o+(h+1)/2,2*l+(v+1)/2)}function en(u,o,l){u.emplaceBack(o.x,o.y,o.z,l[0]*16384,l[1]*16384,l[2]*16384)}class rn{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.fqid),this.index=o.index,this.hasPattern=!1,this.projection=o.projection,this.layoutVertexArray=new oc,this.indexArray=new ji,this.segments=new io,this.programConfigurations=new Ks(o.layers,{zoom:o.zoom,lut:o.lut}),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}updateFootprints(o,l){}populate(o,l,h,v){const f=this.layers[0],y=[];let E=null;f.type==="circle"&&(E=f.layout.get("circle-sort-key"));for(const{feature:k,id:w,index:R,sourceLayerIndex:D}of o){const P=this.layers[0]._featureFilter.needGeometry,A=Qt(k,P);if(!this.layers[0]._featureFilter.filter(new Zi(this.zoom),A,h))continue;const F=E?E.evaluate(A,{},h):void 0,q={id:w,properties:k.properties,type:k.type,sourceLayerIndex:D,index:R,geometry:P?A.geometry:Et(k,h,v),patterns:{},sortKey:F};y.push(q)}E&&y.sort((k,w)=>k.sortKey-w.sortKey);let O=null;v.projection.name==="globe"&&(this.globeExtVertexArray=new hh,O=v.projection);for(const k of y){const{geometry:w,index:R,sourceLayerIndex:D}=k,P=o[R].feature;this.addFeature(k,w,R,l.availableImages,h,O,l.brightness),l.featureIndex.insert(P,w,R,D,this.index)}}update(o,l,h,v,f){const y=Object.keys(o).length!==0;y&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(o,l,y?this.stateDependentLayers:this.layers,h,v,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,RS.members),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,OS.members))),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(o,l,h,v,f,y,E){for(const O of l)for(const k of O){const w=k.x,R=k.y;if(w<0||w>=Tn||R<0||R>=Tn)continue;if(y){const A=y.projectTilePoint(w,R,f),F=y.upVector(f,w,R),q=this.globeExtVertexArray;en(q,A,F),en(q,A,F),en(q,A,F),en(q,A,F)}const D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),P=D.vertexLength;Nt(this.layoutVertexArray,w,R,-1,-1),Nt(this.layoutVertexArray,w,R,1,-1),Nt(this.layoutVertexArray,w,R,1,1),Nt(this.layoutVertexArray,w,R,-1,1),this.indexArray.emplaceBack(P,P+1,P+2),this.indexArray.emplaceBack(P,P+2,P+3),D.vertexLength+=4,D.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,h,{},v,f,E)}}function Jt(u,o){for(let l=0;l<u.length;l++)if(Vr(o,u[l]))return!0;for(let l=0;l<o.length;l++)if(Vr(u,o[l]))return!0;return!!Bn(u,o)}function In(u,o,l){return!!Vr(u,o)||!!$n(o,u,l)}function Wn(u,o){if(u.length===1)return Pr(o,u[0]);for(let l=0;l<o.length;l++){const h=o[l];for(let v=0;v<h.length;v++)if(Vr(u,h[v]))return!0}for(let l=0;l<u.length;l++)if(Pr(o,u[l]))return!0;for(let l=0;l<o.length;l++)if(Bn(u,o[l]))return!0;return!1}function Qn(u,o,l){if(u.length>1){if(Bn(u,o))return!0;for(let h=0;h<o.length;h++)if($n(o[h],u,l))return!0}for(let h=0;h<u.length;h++)if($n(u[h],o,l))return!0;return!1}function Bn(u,o){if(u.length===0||o.length===0)return!1;for(let l=0;l<u.length-1;l++){const h=u[l],v=u[l+1];for(let f=0;f<o.length-1;f++)if(nr(h,v,o[f],o[f+1]))return!0}return!1}function nr(u,o,l,h){return Hn(u,l,h)!==Hn(o,l,h)&&Hn(u,o,l)!==Hn(u,o,h)}function $n(u,o,l){const h=l*l;if(o.length===1)return u.distSqr(o[0])<h;for(let v=1;v<o.length;v++)if(hr(u,o[v-1],o[v])<h)return!0;return!1}function hr(u,o,l){const h=o.distSqr(l);if(h===0)return u.distSqr(o);const v=((u.x-o.x)*(l.x-o.x)+(u.y-o.y)*(l.y-o.y))/h;return u.distSqr(v<0?o:v>1?l:l.sub(o)._mult(v)._add(o))}function Pr(u,o){let l,h,v,f=!1;for(let y=0;y<u.length;y++){l=u[y];for(let E=0,O=l.length-1;E<l.length;O=E++)h=l[E],v=l[O],h.y>o.y!=v.y>o.y&&o.x<(v.x-h.x)*(o.y-h.y)/(v.y-h.y)+h.x&&(f=!f)}return f}function Vr(u,o){let l=!1;for(let h=0,v=u.length-1;h<u.length;v=h++){const f=u[h],y=u[v];f.y>o.y!=y.y>o.y&&o.x<(y.x-f.x)*(o.y-f.y)/(y.y-f.y)+f.x&&(l=!l)}return l}function _i(u,o,l,h,v){for(const y of u)if(o<=y.x&&l<=y.y&&h>=y.x&&v>=y.y)return!0;const f=[new je(o,l),new je(o,v),new je(h,v),new je(h,l)];if(u.length>2){for(const y of f)if(Vr(u,y))return!0}for(let y=0;y<u.length-1;y++)if(Yr(u[y],u[y+1],f))return!0;return!1}function Yr(u,o,l){const h=l[0],v=l[2];if(u.x<h.x&&o.x<h.x||u.x>v.x&&o.x>v.x||u.y<h.y&&o.y<h.y||u.y>v.y&&o.y>v.y)return!1;const f=Hn(u,o,l[0]);return f!==Hn(u,o,l[1])||f!==Hn(u,o,l[2])||f!==Hn(u,o,l[3])}function Ti(u,o,l,h,v,f){let y=o.y-u.y,E=u.x-o.x;if(f=f||0){const O=y*y+E*E;if(O===0)return!0;const k=Math.sqrt(O);y/=k,E/=k}return!((l.x-u.x)*y+(l.y-u.y)*E-f<0||(h.x-u.x)*y+(h.y-u.y)*E-f<0||(v.x-u.x)*y+(v.y-u.y)*E-f<0)}function ni(u,o,l,h,v,f,y){return!(Ti(u,o,h,v,f,y)||Ti(o,l,h,v,f,y)||Ti(l,u,h,v,f,y)||Ti(h,v,u,o,l,y)||Ti(v,f,u,o,l,y)||Ti(f,h,u,o,l,y))}function xi(u,o,l){const h=o.paint.get(u).value;return h.kind==="constant"?h.value:l.programConfigurations.get(o.id).getMaxValue(u)}function Nr(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function gi(u,o,l,h,v){if(!o[0]&&!o[1])return u;const f=je.convert(o)._mult(v);l==="viewport"&&f._rotate(-h);const y=[];for(let E=0;E<u.length;E++)y.push(u[E].sub(f));return y}function fi(u,o,l,h){const v=je.convert(u)._mult(h);return o==="viewport"&&v._rotate(-l),v}let oi,zi;Fn(rn,"CircleBucket",{omit:["layers"]});var Co,Ja={exports:{}},ls=(Co||(Co=1,function(u,o){(function(l){function h(f,y,E){var O=v(256*f,256*(y=Math.pow(2,E)-y-1),E),k=v(256*(f+1),256*(y+1),E);return O[0]+","+O[1]+","+k[0]+","+k[1]}function v(f,y,E){var O=2*Math.PI*6378137/256/Math.pow(2,E);return[f*O-2*Math.PI*6378137/2,y*O-2*Math.PI*6378137/2]}l.getURL=function(f,y,E,O,k,w){return w=w||{},f+"?"+["bbox="+h(E,O,k),"format="+(w.format||"image/png"),"service="+(w.service||"WMS"),"version="+(w.version||"1.1.1"),"request="+(w.request||"GetMap"),"srs="+(w.srs||"EPSG:3857"),"width="+(w.width||256),"height="+(w.height||256),"layers="+y].join("&")},l.getTileBBox=h,l.getMercCoords=v,Object.defineProperty(l,"__esModule",{value:!0})})(o)}(0,Ja.exports)),Ja.exports);class Ro{constructor(o,l,h){this.z=o,this.x=l,this.y=h,this.key=ri(0,o,o,l,h)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,l){const h=ls.getTileBBox(this.x,this.y,this.z),v=function(f,y,E){let O,k="";for(let w=f;w>0;w--)O=1<<w-1,k+=(y&O?1:0)+(E&O?2:0);return k}(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(l==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",v).replace("{bbox-epsg-3857}",h)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Kr{constructor(o,l){this.wrap=o,this.canonical=l,this.key=ri(o,l.z,l.z,l.x,l.y)}}class Wr{constructor(o,l,h,v,f){this.overscaledZ=o,this.wrap=l,this.canonical=new Ro(h,+v,+f),this.key=l===0&&o===h?this.canonical.key:ri(l,o,h,v,f)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){const l=this.canonical.z-o;return o>this.canonical.z?new Wr(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Wr(o,this.wrap,o,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(o,l=!0){if(this.overscaledZ===o&&l)return this.key;if(o>this.canonical.z)return ri(this.wrap*+l,o,this.canonical.z,this.canonical.x,this.canonical.y);{const h=this.canonical.z-o;return ri(this.wrap*+l,o,o,this.canonical.x>>h,this.canonical.y>>h)}}isChildOf(o){if(o.wrap!==this.wrap)return!1;const l=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.z<this.canonical.z&&o.canonical.x===this.canonical.x>>l&&o.canonical.y===this.canonical.y>>l}children(o){if(this.overscaledZ>=o)return[new Wr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,h=2*this.canonical.x,v=2*this.canonical.y;return[new Wr(l,this.wrap,l,h,v),new Wr(l,this.wrap,l,h+1,v),new Wr(l,this.wrap,l,h,v+1),new Wr(l,this.wrap,l,h+1,v+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new Wr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new Wr(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Kr(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function ri(u,o,l,h,v){const f=1<<Math.min(l,22);let y=f*(v%f)+h%f;return u&&l<22&&(y+=f*f*((u<0?-2*u-1:2*u)%(1<<2*(22-l)))),16*(32*y+l)+(o-l)}const wi=[u=>{let o=u.canonical.x-1,l=u.wrap;return o<0&&(o=(1<<u.canonical.z)-1,l--),new Wr(u.overscaledZ,l,u.canonical.z,o,u.canonical.y)},u=>{let o=u.canonical.x+1,l=u.wrap;return o===1<<u.canonical.z&&(o=0,l++),new Wr(u.overscaledZ,l,u.canonical.z,o,u.canonical.y)},u=>new Wr(u.overscaledZ,u.wrap,u.canonical.z,u.canonical.x,(u.canonical.y===0?1<<u.canonical.z:u.canonical.y)-1),u=>new Wr(u.overscaledZ,u.wrap,u.canonical.z,u.canonical.x,u.canonical.y===(1<<u.canonical.z)-1?0:u.canonical.y+1)];Fn(Ro,"CanonicalTileID"),Fn(Wr,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const oo=Qr([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Li}=oo,jo=Qr([{name:"a_pos_3",components:3,type:"Int16"}]);var Xs=Qr([{name:"a_pos",type:"Int16",components:2}]);class Da{constructor(o,l){this.pos=o,this.dir=l}intersectsPlane(o,l,h){const v=Pe.vec3.dot(l,this.dir);if(Math.abs(v)<1e-6)return!1;const f=((o[0]-this.pos[0])*l[0]+(o[1]-this.pos[1])*l[1]+(o[2]-this.pos[2])*l[2])/v;return h[0]=this.pos[0]+this.dir[0]*f,h[1]=this.pos[1]+this.dir[1]*f,h[2]=this.pos[2]+this.dir[2]*f,!0}closestPointOnSphere(o,l,h){if(Pe.vec3.equals(this.pos,o)||l===0)return h[0]=h[1]=h[2]=0,!1;const[v,f,y]=this.dir,E=this.pos[0]-o[0],O=this.pos[1]-o[1],k=this.pos[2]-o[2],w=v*v+f*f+y*y,R=2*(E*v+O*f+k*y),D=R*R-4*w*(E*E+O*O+k*k-l*l);if(D<0){const P=Math.max(-R/2,0),A=E+v*P,F=O+f*P,q=k+y*P,Z=Math.hypot(A,F,q);return h[0]=A*l/Z,h[1]=F*l/Z,h[2]=q*l/Z,!1}{const P=(-R-Math.sqrt(D))/(2*w);if(P<0){const A=Math.hypot(E,O,k);return h[0]=E*l/A,h[1]=O*l/A,h[2]=k*l/A,!1}return h[0]=E+v*P,h[1]=O+f*P,h[2]=k+y*P,!0}}}class $a{constructor(o,l,h,v,f){this.TL=o,this.TR=l,this.BR=h,this.BL=v,this.horizon=f}static fromInvProjectionMatrix(o,l,h){const v=[-1,1,1],f=[1,1,1],y=[1,-1,1],E=[-1,-1,1],O=Pe.vec3.transformMat4(v,v,o),k=Pe.vec3.transformMat4(f,f,o),w=Pe.vec3.transformMat4(y,y,o),R=Pe.vec3.transformMat4(E,E,o);return new $a(O,k,w,R,l/h)}}function cs(u,o,l){let h=1/0,v=-1/0;const f=[];for(const y of u){Pe.vec3.sub(f,y,o);const E=Pe.vec3.dot(f,l);h=Math.min(h,E),v=Math.max(v,E)}return[h,v]}function Is(u,o){let l=!0;for(let h=0;h<u.planes.length;h++){const v=u.planes[h];let f=0;for(let y=0;y<o.length;y++)f+=Pe.vec3.dot(v,o[y])+v[3]>=0;if(f===0)return 0;f!==o.length&&(l=!1)}return l?2:1}function ka(u,o){for(const l of u.projections){const h=cs(o,u.points[0],l.axis);if(l.projection[1]<h[0]||l.projection[0]>h[1])return 0}return 1}function El(u,o){let l=0;const h=[0,0,0,0];for(let v=0;v<u.length;v++)h[0]=u[v][0],h[1]=u[v][1],h[2]=u[v][2],h[3]=1,Pe.vec4.dot(h,o)>=0&&l++;return l}class us{constructor(o,l){this.points=o||new Array(8).fill([0,0,0]),this.planes=l||new Array(6).fill([0,0,0,0]),this.bounds=si.fromPoints(this.points),this.projections=[],this.frustumEdges=[Pe.vec3.sub([],this.points[2],this.points[3]),Pe.vec3.sub([],this.points[0],this.points[3]),Pe.vec3.sub([],this.points[4],this.points[0]),Pe.vec3.sub([],this.points[5],this.points[1]),Pe.vec3.sub([],this.points[6],this.points[2]),Pe.vec3.sub([],this.points[7],this.points[3])];for(const h of this.frustumEdges){const v=[0,-h[2],h[1]],f=[h[2],0,-h[0]];this.projections.push({axis:v,projection:cs(this.points,this.points[0],v)}),this.projections.push({axis:f,projection:cs(this.points,this.points[0],f)})}}static fromInvProjectionMatrix(o,l,h,v){const f=Math.pow(2,h),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(k=>{const w=Pe.vec4.transformMat4([],k,o),R=1/w[3]/l*f;return Pe.vec4.mul(w,w,[R,R,v?1/w[3]:R,R])}),E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(k=>{const w=Pe.vec3.sub([],y[k[0]],y[k[1]]),R=Pe.vec3.sub([],y[k[2]],y[k[1]]),D=Pe.vec3.normalize([],Pe.vec3.cross([],w,R)),P=-Pe.vec3.dot(D,y[k[1]]);return D.concat(P)}),O=[];for(let k=0;k<y.length;k++)O.push([y[k][0],y[k][1],y[k][2]]);return new us(O,E)}intersectsPrecise(o,l,h){for(let v=0;v<l.length;v++)if(!El(o,l[v]))return 0;for(let v=0;v<this.planes.length;v++)if(!El(o,this.planes[v]))return 0;for(const v of h)for(const f of this.frustumEdges){const y=Pe.vec3.cross([],v,f),E=Pe.vec3.length(y);if(E===0)continue;Pe.vec3.scale(y,y,1/E);const O=cs(this.points,this.points[0],y),k=cs(o,this.points[0],y);if(O[0]>k[1]||k[0]>O[1])return 0}return 1}containsPoint(o){for(const l of this.planes){const h=l[3];if(Pe.vec3.dot([l[0],l[1],l[2]],o)+h<0)return!1}return!0}}class si{static fromPoints(o){const l=[1/0,1/0,1/0],h=[-1/0,-1/0,-1/0];for(const v of o)Pe.vec3.min(l,l,v),Pe.vec3.max(h,h,v);return new si(l,h)}static fromTileIdAndHeight(o,l,h){const v=1<<o.canonical.z,f=o.canonical.x,y=o.canonical.y;return new si([f/v,y/v,l],[(f+1)/v,(y+1)/v,h])}static applyTransform(o,l){const h=o.getCorners();for(let v=0;v<h.length;++v)Pe.vec3.transformMat4(h[v],h[v],l);return si.fromPoints(h)}static applyTransformFast(o,l){const h=[l[12],l[13],l[14]],v=[...h];for(let f=0;f<3;f++)for(let y=0;y<3;y++){const E=l[4*y+f],O=E*o.min[y],k=E*o.max[y];h[f]+=Math.min(O,k),v[f]+=Math.max(O,k)}return new si(h,v)}static projectAabbCorners(o,l){const h=o.getCorners();for(let v=0;v<h.length;++v)Pe.vec3.transformMat4(h[v],h[v],l);return h}constructor(o,l){this.min=o,this.max=l,this.center=Pe.vec3.scale([],Pe.vec3.add([],this.min,this.max),.5)}quadrant(o){const l=[o%2==0,o<2],h=Pe.vec3.clone(this.min),v=Pe.vec3.clone(this.max);for(let f=0;f<l.length;f++)h[f]=l[f]?this.min[f]:this.center[f],v[f]=l[f]?this.center[f]:this.max[f];return v[2]=this.max[2],new si(h,v)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}distanceZ(o){return Math.max(Math.min(this.max[2],o[2]),this.min[2])-o[2]}getCorners(){const o=this.min,l=this.max;return[[o[0],o[1],o[2]],[l[0],o[1],o[2]],[l[0],l[1],o[2]],[o[0],l[1],o[2]],[o[0],o[1],l[2]],[l[0],o[1],l[2]],[l[0],l[1],l[2]],[o[0],l[1],l[2]]]}intersects(o){return this.intersectsAabb(o.bounds)?Is(o,this.getCorners()):0}intersectsFlat(o){return this.intersectsAabb(o.bounds)?Is(o,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(o,l){return l||this.intersects(o)?ka(o,this.getCorners()):0}intersectsPreciseFlat(o,l){return l||this.intersectsFlat(o)?ka(o,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(o){for(let l=0;l<3;++l)if(this.min[l]>o.max[l]||o.min[l]>this.max[l])return!1;return!0}intersectsAabbXY(o){return!(this.min[0]>o.max[0]||o.min[0]>this.max[0]||this.min[1]>o.max[1]||o.min[1]>this.max[1])}encapsulate(o){for(let l=0;l<3;l++)this.min[l]=Math.min(this.min[l],o.min[l]),this.max[l]=Math.max(this.max[l],o.max[l])}encapsulatePoint(o){for(let l=0;l<3;l++)this.min[l]=Math.min(this.min[l],o[l]),this.max[l]=Math.max(this.max[l],o[l])}closestPoint(o){return[Math.max(Math.min(this.max[0],o[0]),this.min[0]),Math.max(Math.min(this.max[1],o[1]),this.min[1]),Math.max(Math.min(this.max[2],o[2]),this.min[2])]}}function Vu(u){return u*na/U}Fn(si,"Aabb");const tv=[new si([b,b,b],[C,C,C]),new si([b,b,b],[0,0,C]),new si([0,b,b],[C,0,C]),new si([b,0,b],[0,C,C]),new si([0,0,b],[C,C,C])];function Hu(u,o,l,h=!0){const v=Pe.vec3.scale([],u._camera.position,u.worldSize),f=[o,l,1,1];Pe.vec4.transformMat4(f,f,u.pixelMatrixInverse),Pe.vec4.scale(f,f,1/f[3]);const y=Pe.vec3.sub([],f,v),E=Pe.vec3.normalize([],y),O=u.globeMatrix,k=[O[12],O[13],O[14]],w=Pe.vec3.sub([],k,v),R=Pe.vec3.length(w),D=Pe.vec3.normalize([],w),P=u.worldSize/(2*Math.PI),A=Pe.vec3.dot(D,E),F=Math.asin(P/R);if(F<Math.acos(A)){if(!h)return null;const tt=[],Ne=[];Pe.vec3.scale(tt,E,R/A),Pe.vec3.normalize(Ne,Pe.vec3.sub(Ne,tt,w)),Pe.vec3.normalize(E,Pe.vec3.add(E,w,Pe.vec3.scale(E,Ne,Math.tan(F)*R)))}const q=[];new Da(v,E).closestPointOnSphere(k,P,q);const Z=Pe.vec3.normalize([],Mr(O,0)),ie=Pe.vec3.normalize([],Mr(O,1)),oe=Pe.vec3.normalize([],Mr(O,2)),te=Pe.vec3.dot(Z,q),ue=Pe.vec3.dot(ie,q),_e=Pe.vec3.dot(oe,q),Re=Yt(Math.asin(-ue/P));let Ue=Yt(Math.atan2(te,_e));Ue=u.center.lng+function(tt,Ne){const et=(Ne-tt+180)%360-180;return et<-180?et+360:et}(u.center.lng,Ue);const Le=xe(Ue),Fe=Rt(Te(Re),0,1);return new vt(Le,Fe)}class nv{constructor(o,l,h){this.a=Pe.vec3.sub([],o,h),this.b=Pe.vec3.sub([],l,h),this.center=h;const v=Pe.vec3.normalize([],this.a),f=Pe.vec3.normalize([],this.b);this.angle=Math.acos(Pe.vec3.dot(v,f))}}function xh(u,o){if(u.angle===0)return null;let l;return l=u.a[o]===0?1/u.angle*.5*Math.PI:1/u.angle*Math.atan(u.b[o]/u.a[o]/Math.sin(u.angle)-1/Math.tan(u.angle)),l<0||l>1?null:function(h,v,f,y){const E=Math.sin(f);return h*(Math.sin((1-y)*f)/E)+v*(Math.sin(y*f)/E)}(u.a[o],u.b[o],u.angle,Rt(l,0,1))+u.center[o]}function lc(u){if(u.z<=1)return tv[u.z+2*u.y+u.x];const o=FS(H_(u));return si.fromPoints(o)}function jc(u,o,l){return Pe.vec3.scale(u,u,1-l),Pe.vec3.scaleAndAdd(u,u,o,l)}function IR(u,o,l){for(const h of u)Pe.vec3.transformMat4(h,h,o),Pe.vec3.scale(h,h,l)}function MR(u,o,l,h){const v=o/u.worldSize,f=u.globeMatrix;if(l.z<=1){const Le=lc(l).getCorners();return IR(Le,f,v),si.fromPoints(Le)}const y=H_(l,h),E=FS(y,na+Vu(u._tileCoverLift));IR(E,f,v);const O=Number.MAX_VALUE,k=[-O,-O,-O],w=[O,O,O];if(y.contains(u.center)){for(const tt of E)Pe.vec3.min(w,w,tt),Pe.vec3.max(k,k,tt);k[2]=0;const Le=u.point,Fe=[Le.x*v,Le.y*v,0];return Pe.vec3.min(w,w,Fe),Pe.vec3.max(k,k,Fe),new si(w,k)}if(u._tileCoverLift>0){for(const Le of E)Pe.vec3.min(w,w,Le),Pe.vec3.max(k,k,Le);return new si(w,k)}const R=[f[12]*v,f[13]*v,f[14]*v],D=y.getCenter(),P=Rt(u.center.lat,-qe,qe),A=Rt(D.lat,-qe,qe),F=xe(u.center.lng),q=Te(P);let Z=F-xe(D.lng);const ie=q-Te(A);Z>.5?Z-=1:Z<-.5&&(Z+=1);let oe=0;if(Math.abs(Z)>Math.abs(ie))oe=Z>=0?1:3;else{oe=ie>=0?0:2;const Le=[f[4]*v,f[5]*v,f[6]*v],Fe=-Math.sin(At(ie>=0?y.getSouth():y.getNorth()))*na;Pe.vec3.scaleAndAdd(R,R,Le,Fe)}const te=E[oe],ue=E[(oe+1)%4],_e=new nv(te,ue,R),Re=[xh(_e,0)||te[0],xh(_e,1)||te[1],xh(_e,2)||te[2]],Ue=Uu(u.zoom);if(Ue>0){const Le=function({x:tt,y:Ne,z:et},lt,ct,xt,Pt){const $t=1/(1<<et);let Tt=tt*$t,Ht=Tt+$t,sn=Ne*$t,Bt=sn+$t,Nn=0;const En=(Tt+Ht)/2-xt;return En>.5?Nn=-1:En<-.5&&(Nn=1),Tt=((Tt+Nn)*lt-(xt*=lt))*ct+xt,Ht=((Ht+Nn)*lt-xt)*ct+xt,sn=(sn*lt-(Pt*=lt))*ct+Pt,Bt=(Bt*lt-Pt)*ct+Pt,[[Tt,Bt,0],[Ht,Bt,0],[Ht,sn,0],[Tt,sn,0]]}(l,o,u._pixelsPerMercatorPixel,F,q);for(let tt=0;tt<E.length;tt++)jc(E[tt],Le[tt],Ue);const Fe=Pe.vec3.add([],Le[oe],Le[(oe+1)%4]);Pe.vec3.scale(Fe,Fe,.5),jc(Re,Fe,Ue)}for(const Le of E)Pe.vec3.min(w,w,Le),Pe.vec3.max(k,k,Le);return w[2]=Math.min(te[2],ue[2]),Pe.vec3.min(w,w,Re),Pe.vec3.max(k,k,Re),new si(w,k)}function H_({x:u,y:o,z:l},h=!1){const v=1/(1<<l),f=new G(Oe(u*v),o===(1<<l)-1&&h?-90:Ve((o+1)*v)),y=new G(Oe((u+1)*v),o===0&&h?90:Ve(o*v));return new Q(f,y)}function FS(u,o=na){const l=At(u.getNorth()),h=At(u.getSouth()),v=Math.cos(l),f=Math.cos(h),y=Math.sin(l),E=Math.sin(h),O=u.getWest(),k=u.getEast();return[I(f,E,O,o),I(f,E,k,o),I(v,y,k,o),I(v,y,O,o)]}function rv(u,o,l,h){const v=1<<l.z,f=(u/Tn+l.x)/v;return z(Ve((o/Tn+l.y)/v),Oe(f),h)}function U_({min:u,max:o}){return a/Math.max(o[0]-u[0],o[1]-u[1],o[2]-u[2])}const PR=new Float64Array(16);function W_(u){const o=U_(u),l=Pe.mat4.fromScaling(PR,[o,o,o]);return Pe.mat4.translate(l,l,Pe.vec3.negate([],u.min))}function BS(u){const o=Pe.mat4.fromTranslation(PR,u.min),l=1/U_(u);return Pe.mat4.scale(o,o,[l,l,l])}function jS(u){const o=Tn/(2*Math.PI);return u/(2*Math.PI)/o}function RR(u,o){return Tn/(512*Math.pow(2,u))*U_(lc(o))}function OR(u,o,l,h,v){const f=jS(l),y=[u,o,-l/(2*Math.PI)],E=Pe.mat4.identity(new Float64Array(16));return Pe.mat4.translate(E,E,y),Pe.mat4.scale(E,E,[f,f,f]),Pe.mat4.rotateX(E,E,At(-v)),Pe.mat4.rotateY(E,E,At(-h)),E}function Uu(u){return dn(V_,m,u)}function AR(u,o){const l=z(o.lat,o.lng),h=function(f){const y=z(f._center.lat,f._center.lng),E=Pe.vec3.fromValues(0,1,0);let O=Pe.vec3.cross([],E,y);const k=Pe.mat4.fromRotation([],-f.angle,y);O=Pe.vec3.transformMat4(O,O,k),Pe.mat4.fromRotation(k,-f._pitch,O);const w=Pe.vec3.normalize([],y);return Pe.vec3.scale(w,w,Vu(f.cameraToCenterDistance/f.pixelsPerMeter)),Pe.vec3.transformMat4(w,w,k),Pe.vec3.add([],y,w)}(u),v=Pe.vec3.subtract([],h,l);return Pe.vec3.angle(v,l)}function VS(u,o){return AR(u,o)>Math.PI/2*1.01}const DR=At(85),J8=Math.cos(DR),Q8=Math.sin(DR),eH=Pe.mat4.create(),$R=u=>{const o=[];return u.paint.get("circle-pitch-alignment")==="map"&&o.push("PITCH_WITH_MAP"),u.paint.get("circle-pitch-scale")==="map"&&o.push("SCALE_WITH_MAP"),o};function kR(u,o,l,h,v,f,y,E,O){if(f&&u.queryGeometry.isAboveHorizon)return!1;f&&(O*=u.pixelToTileUnitsFactor);const k=u.tileID.canonical,w=l.projection.upVectorScale(k,l.center.lat,l.worldSize).metersToTile;for(const R of o)for(const D of R){const P=D.add(E),A=v&&l.elevation?l.elevation.exaggeration()*v.getElevationAt(P.x,P.y,!0):0,F=l.projection.projectTilePoint(P.x,P.y,k);if(A>0){const oe=l.projection.upVector(k,P.x,P.y);F.x+=oe[0]*w*A,F.y+=oe[1]*w*A,F.z+=oe[2]*w*A}const q=f?P:tH(F.x,F.y,F.z,h),Z=f?u.tilespaceRays.map(oe=>rH(oe,A)):u.queryGeometry.screenGeometry,ie=Pe.vec4.transformMat4([],[F.x,F.y,F.z,1],h);if(!y&&f?O*=ie[3]/l.cameraToCenterDistance:y&&!f&&(O*=l.cameraToCenterDistance/ie[3]),f){const oe=Ve((D.y/Tn+k.y)/(1<<k.z));O/=l.projection.pixelsPerMeter(oe,1)/Ee(1,oe)}if(In(Z,q,O))return!0}return!1}function tH(u,o,l,h){const v=Pe.vec4.transformMat4([],[u,o,l,1],h);return new je(v[0]/v[3],v[1]/v[3])}const zR=Pe.vec3.fromValues(0,0,0),nH=Pe.vec3.fromValues(0,0,1);function rH(u,o){const l=Pe.vec3.create();return zR[2]=o,u.intersectsPlane(zR,nH,l),new je(l[0],l[1])}class LR extends rn{}let NR,FR,BR,jR;function VR(u,{width:o,height:l},h,v){if(v){if(v instanceof Uint8ClampedArray)v=new Uint8Array(v.buffer);else if(v.length!==o*l*h)throw new RangeError("mismatched image size")}else v=new Uint8Array(o*l*h);return u.width=o,u.height=l,u.data=v,u}function HR(u,o,l){const{width:h,height:v}=o;h===u.width&&v===u.height||(HS(u,o,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,h),height:Math.min(u.height,v)},l,null),u.width=h,u.height=v,u.data=o.data)}function HS(u,o,l,h,v,f,y,E){if(v.width===0||v.height===0)return o;if(v.width>u.width||v.height>u.height||l.x>u.width-v.width||l.y>u.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>o.width||v.height>o.height||h.x>o.width-v.width||h.y>o.height-v.height)throw new RangeError("out of range destination coordinates for image copy");const O=u.data,k=o.data,w=f===4&&E;for(let R=0;R<v.height;R++){const D=((l.y+R)*u.width+l.x)*f,P=((h.y+R)*o.width+h.x)*f;if(w)for(let A=0;A<v.width;A++){const F=D+A*f+3,q=P+A*f;k[q+0]=255,k[q+1]=255,k[q+2]=255,k[q+3]=O[F]}else if(y)for(let A=0;A<v.width;A++){const F=D+A*f,q=P+A*f,Z=O[F+3],ie=new Sr(O[F+0]/255*Z,O[F+1]/255*Z,O[F+2]/255*Z,Z).toRenderColor(y).toArray();k[q+0]=ie[0],k[q+1]=ie[1],k[q+2]=ie[2],k[q+3]=ie[3]}else for(let A=0;A<v.width*f;A++)k[P+A]=O[D+A]}return o}Fn(LR,"HeatmapBucket",{omit:["layers"]});class Wu{constructor(o,l){VR(this,o,1,l)}resize(o){HR(this,new Wu(o),1)}clone(){return new Wu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,l,h,v,f){HS(o,l,h,v,f,1,null)}}class ba{constructor(o,l){VR(this,o,4,l)}resize(o){HR(this,new ba(o),4)}replace(o,l){l?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new ba({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,l,h,v,f,y,E){HS(o,l,h,v,f,4,y,E)}}class UR{constructor(o,l){this.width=o.width,this.height=o.height,this.data=l instanceof Uint8Array?new Float32Array(l.buffer):l}}function iv(u){const o={},l=u.resolution||256,h=u.clips?u.clips.length:1,v=u.image||new ba({width:l,height:h}),f=(y,E,O)=>{o[u.evaluationKey]=O;const k=u.expression.evaluate(o);k&&(v.data[y+E+0]=Math.floor(255*k.r/k.a),v.data[y+E+1]=Math.floor(255*k.g/k.a),v.data[y+E+2]=Math.floor(255*k.b/k.a),v.data[y+E+3]=Math.floor(255*k.a))};if(u.clips)for(let y=0,E=0;y<h;++y,E+=4*l)for(let O=0,k=0;O<l;O++,k+=4){const w=O/(l-1),{start:R,end:D}=u.clips[y];f(E,k,R*(1-w)+D*w)}else for(let y=0,E=0;y<l;y++,E+=4)f(0,E,y/(l-1));return v}Fn(Wu,"AlphaImage"),Fn(ba,"RGBAImage");const iH=Qr([{name:"a_pos",components:2,type:"Int16"}],4),{members:oH}=iH;function ov(u,o,l=2){const h=o&&o.length,v=h?o[0]*l:u.length;let f=WR(u,0,v,l,!0);const y=[];if(!f||f.next===f.prev)return y;let E,O,k;if(h&&(f=function(w,R,D,P){const A=[];for(let F=0,q=R.length;F<q;F++){const Z=WR(w,R[F]*P,F<q-1?R[F+1]*P:w.length,P,!1);Z===Z.next&&(Z.steiner=!0),A.push(fH(Z))}A.sort(uH);for(let F=0;F<A.length;F++)D=dH(A[F],D);return D}(u,o,f,l)),u.length>80*l){E=1/0,O=1/0;let w=-1/0,R=-1/0;for(let D=l;D<v;D+=l){const P=u[D],A=u[D+1];P<E&&(E=P),A<O&&(O=A),P>w&&(w=P),A>R&&(R=A)}k=Math.max(w-E,R-O),k=k!==0?32767/k:0}return av(f,y,l,E,O,k,0),y}function WR(u,o,l,h,v){let f;if(v===function(y,E,O,k){let w=0;for(let R=E,D=O-k;R<O;R+=k)w+=(y[D]-y[R])*(y[R+1]+y[D+1]),D=R;return w}(u,o,l,h)>0)for(let y=o;y<l;y+=h)f=KR(y/h|0,u[y],u[y+1],f);else for(let y=l-h;y>=o;y-=h)f=KR(y/h|0,u[y],u[y+1],f);return f&&G_(f,f.next)&&(lv(f),f=f.next),f}function bh(u,o){if(!u)return u;o||(o=u);let l,h=u;do if(l=!1,h.steiner||!G_(h,h.next)&&Oo(h.prev,h,h.next)!==0)h=h.next;else{if(lv(h),h=o=h.prev,h===h.next)break;l=!0}while(l||h!==o);return o}function av(u,o,l,h,v,f,y){if(!u)return;!y&&f&&function(O,k,w,R){let D=O;do D.z===0&&(D.z=US(D.x,D.y,k,w,R)),D.prevZ=D.prev,D.nextZ=D.next,D=D.next;while(D!==O);D.prevZ.nextZ=null,D.prevZ=null,function(P){let A,F=1;do{let q,Z=P;P=null;let ie=null;for(A=0;Z;){A++;let oe=Z,te=0;for(let _e=0;_e<F&&(te++,oe=oe.nextZ,oe);_e++);let ue=F;for(;te>0||ue>0&&oe;)te!==0&&(ue===0||!oe||Z.z<=oe.z)?(q=Z,Z=Z.nextZ,te--):(q=oe,oe=oe.nextZ,ue--),ie?ie.nextZ=q:P=q,q.prevZ=ie,ie=q;Z=oe}ie.nextZ=null,F*=2}while(A>1)}(D)}(u,h,v,f);let E=u;for(;u.prev!==u.next;){const O=u.prev,k=u.next;if(f?sH(u,h,v,f):aH(u))o.push(O.i,u.i,k.i),lv(u),u=k.next,E=k.next;else if((u=k)===E){y?y===1?av(u=lH(bh(u),o),o,l,h,v,f,2):y===2&&cH(u,o,l,h,v,f):av(bh(u),o,l,h,v,f,1);break}}}function aH(u){const o=u.prev,l=u,h=u.next;if(Oo(o,l,h)>=0)return!1;const v=o.x,f=l.x,y=h.x,E=o.y,O=l.y,k=h.y,w=v<f?v<y?v:y:f<y?f:y,R=E<O?E<k?E:k:O<k?O:k,D=v>f?v>y?v:y:f>y?f:y,P=E>O?E>k?E:k:O>k?O:k;let A=h.next;for(;A!==o;){if(A.x>=w&&A.x<=D&&A.y>=R&&A.y<=P&&ip(v,E,f,O,y,k,A.x,A.y)&&Oo(A.prev,A,A.next)>=0)return!1;A=A.next}return!0}function sH(u,o,l,h){const v=u.prev,f=u,y=u.next;if(Oo(v,f,y)>=0)return!1;const E=v.x,O=f.x,k=y.x,w=v.y,R=f.y,D=y.y,P=E<O?E<k?E:k:O<k?O:k,A=w<R?w<D?w:D:R<D?R:D,F=E>O?E>k?E:k:O>k?O:k,q=w>R?w>D?w:D:R>D?R:D,Z=US(P,A,o,l,h),ie=US(F,q,o,l,h);let oe=u.prevZ,te=u.nextZ;for(;oe&&oe.z>=Z&&te&&te.z<=ie;){if(oe.x>=P&&oe.x<=F&&oe.y>=A&&oe.y<=q&&oe!==v&&oe!==y&&ip(E,w,O,R,k,D,oe.x,oe.y)&&Oo(oe.prev,oe,oe.next)>=0||(oe=oe.prevZ,te.x>=P&&te.x<=F&&te.y>=A&&te.y<=q&&te!==v&&te!==y&&ip(E,w,O,R,k,D,te.x,te.y)&&Oo(te.prev,te,te.next)>=0))return!1;te=te.nextZ}for(;oe&&oe.z>=Z;){if(oe.x>=P&&oe.x<=F&&oe.y>=A&&oe.y<=q&&oe!==v&&oe!==y&&ip(E,w,O,R,k,D,oe.x,oe.y)&&Oo(oe.prev,oe,oe.next)>=0)return!1;oe=oe.prevZ}for(;te&&te.z<=ie;){if(te.x>=P&&te.x<=F&&te.y>=A&&te.y<=q&&te!==v&&te!==y&&ip(E,w,O,R,k,D,te.x,te.y)&&Oo(te.prev,te,te.next)>=0)return!1;te=te.nextZ}return!0}function lH(u,o){let l=u;do{const h=l.prev,v=l.next.next;!G_(h,v)&&GR(h,l,l.next,v)&&sv(h,v)&&sv(v,h)&&(o.push(h.i,l.i,v.i),lv(l),lv(l.next),l=u=v),l=l.next}while(l!==u);return bh(l)}function cH(u,o,l,h,v,f){let y=u;do{let E=y.next.next;for(;E!==y.prev;){if(y.i!==E.i&&pH(y,E)){let O=qR(y,E);return y=bh(y,y.next),O=bh(O,O.next),av(y,o,l,h,v,f,0),void av(O,o,l,h,v,f,0)}E=E.next}y=y.next}while(y!==u)}function uH(u,o){return u.x-o.x}function dH(u,o){const l=function(v,f){let y=f;const E=v.x,O=v.y;let k,w=-1/0;do{if(O<=y.y&&O>=y.next.y&&y.next.y!==y.y){const F=y.x+(O-y.y)*(y.next.x-y.x)/(y.next.y-y.y);if(F<=E&&F>w&&(w=F,k=y.x<y.next.x?y:y.next,F===E))return k}y=y.next}while(y!==f);if(!k)return null;const R=k,D=k.x,P=k.y;let A=1/0;y=k;do{if(E>=y.x&&y.x>=D&&E!==y.x&&ip(O<P?E:w,O,D,P,O<P?w:E,O,y.x,y.y)){const F=Math.abs(O-y.y)/(E-y.x);sv(y,v)&&(F<A||F===A&&(y.x>k.x||y.x===k.x&&hH(k,y)))&&(k=y,A=F)}y=y.next}while(y!==R);return k}(u,o);if(!l)return o;const h=qR(l,u);return bh(h,h.next),bh(l,l.next)}function hH(u,o){return Oo(u.prev,u,o.prev)<0&&Oo(o.next,u,u.next)<0}function US(u,o,l,h,v){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-l)*v|0)|u<<8))|u<<4))|u<<2))|u<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-h)*v|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function fH(u){let o=u,l=u;do(o.x<l.x||o.x===l.x&&o.y<l.y)&&(l=o),o=o.next;while(o!==u);return l}function ip(u,o,l,h,v,f,y,E){return(v-y)*(o-E)>=(u-y)*(f-E)&&(u-y)*(h-E)>=(l-y)*(o-E)&&(l-y)*(f-E)>=(v-y)*(h-E)}function pH(u,o){return u.next.i!==o.i&&u.prev.i!==o.i&&!function(l,h){let v=l;do{if(v.i!==l.i&&v.next.i!==l.i&&v.i!==h.i&&v.next.i!==h.i&&GR(v,v.next,l,h))return!0;v=v.next}while(v!==l);return!1}(u,o)&&(sv(u,o)&&sv(o,u)&&function(l,h){let v=l,f=!1;const y=(l.x+h.x)/2,E=(l.y+h.y)/2;do v.y>E!=v.next.y>E&&v.next.y!==v.y&&y<(v.next.x-v.x)*(E-v.y)/(v.next.y-v.y)+v.x&&(f=!f),v=v.next;while(v!==l);return f}(u,o)&&(Oo(u.prev,u,o.prev)||Oo(u,o.prev,o))||G_(u,o)&&Oo(u.prev,u,u.next)>0&&Oo(o.prev,o,o.next)>0)}function Oo(u,o,l){return(o.y-u.y)*(l.x-o.x)-(o.x-u.x)*(l.y-o.y)}function G_(u,o){return u.x===o.x&&u.y===o.y}function GR(u,o,l,h){const v=K_(Oo(u,o,l)),f=K_(Oo(u,o,h)),y=K_(Oo(l,h,u)),E=K_(Oo(l,h,o));return v!==f&&y!==E||!(v!==0||!q_(u,l,o))||!(f!==0||!q_(u,h,o))||!(y!==0||!q_(l,u,h))||!(E!==0||!q_(l,o,h))}function q_(u,o,l){return o.x<=Math.max(u.x,l.x)&&o.x>=Math.min(u.x,l.x)&&o.y<=Math.max(u.y,l.y)&&o.y>=Math.min(u.y,l.y)}function K_(u){return u>0?1:u<0?-1:0}function sv(u,o){return Oo(u.prev,u,u.next)<0?Oo(u,o,u.next)>=0&&Oo(u,u.prev,o)>=0:Oo(u,o,u.prev)<0||Oo(u,u.next,o)<0}function qR(u,o){const l=WS(u.i,u.x,u.y),h=WS(o.i,o.x,o.y),v=u.next,f=o.prev;return u.next=o,o.prev=u,l.next=v,v.prev=l,h.next=l,l.prev=h,f.next=h,h.prev=f,h}function KR(u,o,l,h){const v=WS(u,o,l);return h?(v.next=h.next,v.prev=h,h.next.prev=v,h.next=v):(v.prev=v,v.next=v),v}function lv(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function WS(u,o,l){return{i:u,x:o,y:l,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function X_(u,o){const l=u.length;if(l<=1)return[u];const h=[];let v,f;for(let y=0;y<l;y++){const E=br(u[y]);E!==0&&(u[y].area=Math.abs(E),f===void 0&&(f=E<0),f===E<0?(v&&h.push(v),v=[u[y]]):v.push(u[y]))}if(v&&h.push(v),o>1)for(let y=0;y<h.length;y++)h[y].length<=o||(Hy(h[y],o,1,h[y].length-1,mH),h[y]=h[y].slice(0,o));return h}function mH(u,o){return o.area-u.area}function GS(u,o,l){const h=l.patternDependencies;let v=!1;for(const f of o){const y=f.paint.get(`${u}-pattern`);y.isConstant()||(v=!0);const E=y.constantOr(null);E&&(v=!0,h[E]=!0)}return v}function qS(u,o,l,h,v){const f=v.patternDependencies;for(const y of o){const E=y.paint.get(`${u}-pattern`).value;if(E.kind!=="constant"){let O=E.evaluate({zoom:h},l,{},v.availableImages);O=O&&O.name?O.name:O,f[O]=!0,l.patterns[y.id]=O}}return l}class KS{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.fqid),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new oc,this.indexArray=new ji,this.indexArray2=new sc,this.programConfigurations=new Ks(o.layers,{zoom:o.zoom,lut:o.lut}),this.segments=new io,this.segments2=new io,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.projection=o.projection}updateFootprints(o,l){}populate(o,l,h,v){this.hasPattern=GS("fill",this.layers,l);const f=this.layers[0].layout.get("fill-sort-key"),y=[];for(const{feature:E,id:O,index:k,sourceLayerIndex:w}of o){const R=this.layers[0]._featureFilter.needGeometry,D=Qt(E,R);if(!this.layers[0]._featureFilter.filter(new Zi(this.zoom),D,h))continue;const P=f?f.evaluate(D,{},h,l.availableImages):void 0,A={id:O,properties:E.properties,type:E.type,sourceLayerIndex:w,index:k,geometry:R?D.geometry:Et(E,h,v),patterns:{},sortKey:P};y.push(A)}f&&y.sort((E,O)=>E.sortKey-O.sortKey);for(const E of y){const{geometry:O,index:k,sourceLayerIndex:w}=E;if(this.hasPattern){const R=qS("fill",this.layers,E,this.zoom,l);this.patternFeatures.push(R)}else this.addFeature(E,O,k,h,{},l.availableImages,l.brightness);l.featureIndex.insert(o[k].feature,O,k,w,this.index)}}update(o,l,h,v,f){const y=Object.keys(o).length!==0;y&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(o,l,y?this.stateDependentLayers:this.layers,h,v,f)}addFeatures(o,l,h,v,f,y){for(const E of this.patternFeatures)this.addFeature(E,E.geometry,E.index,l,h,v,y)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,oH),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,l,h,v,f,y=[],E){for(const O of X_(l,500)){let k=0;for(const F of O)k+=F.length;const w=this.segments.prepareSegment(k,this.layoutVertexArray,this.indexArray),R=w.vertexLength,D=[],P=[];for(const F of O){if(F.length===0)continue;F!==O[0]&&P.push(D.length/2);const q=this.segments2.prepareSegment(F.length,this.layoutVertexArray,this.indexArray2),Z=q.vertexLength;this.layoutVertexArray.emplaceBack(F[0].x,F[0].y),this.indexArray2.emplaceBack(Z+F.length-1,Z),D.push(F[0].x),D.push(F[0].y);for(let ie=1;ie<F.length;ie++)this.layoutVertexArray.emplaceBack(F[ie].x,F[ie].y),this.indexArray2.emplaceBack(Z+ie-1,Z+ie),D.push(F[ie].x),D.push(F[ie].y);q.vertexLength+=F.length,q.primitiveLength+=F.length}const A=ov(D,P);for(let F=0;F<A.length;F+=3)this.indexArray.emplaceBack(R+A[F],R+A[F+1],R+A[F+2]);w.vertexLength+=k,w.primitiveLength+=A.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,h,f,y,v,E)}}let XR,ZR,YR,JR;Fn(KS,"FillBucket",{omit:["layers","patternFeatures"]});class XS{constructor(o,l,h,v){if(this.triangleCount=l.length/3,this.min=new je(0,0),this.max=new je(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||o.length===0)return;const[f,y]=[o[0].clone(),o[0].clone()];for(let R=1;R<o.length;++R){const D=o[R];f.x=Math.min(f.x,D.x),f.y=Math.min(f.y,D.y),y.x=Math.max(y.x,D.x),y.y=Math.max(y.y,D.y)}if(v){const R=Math.ceil(Math.max(y.x-f.x,y.y-f.y)/v);h=Math.max(h,R)}if(h===0)return;this.min=f,this.max=y;const E=this.max.sub(this.min);E.x=Math.max(E.x,1),E.y=Math.max(E.y,1);const O=Math.max(E.x,E.y)/h;this.cellsX=Math.max(1,Math.ceil(E.x/O)),this.cellsY=Math.max(1,Math.ceil(E.y/O)),this.xScale=1/O,this.yScale=1/O;const k=[];for(let R=0;R<this.triangleCount;R++){const D=o[l[3*R+0]].sub(this.min),P=o[l[3*R+1]].sub(this.min),A=o[l[3*R+2]].sub(this.min),F=cc(Math.floor(Math.min(D.x,P.x,A.x)),this.xScale,this.cellsX),q=cc(Math.floor(Math.max(D.x,P.x,A.x)),this.xScale,this.cellsX),Z=cc(Math.floor(Math.min(D.y,P.y,A.y)),this.yScale,this.cellsY),ie=cc(Math.floor(Math.max(D.y,P.y,A.y)),this.yScale,this.cellsY),oe=new je(0,0),te=new je(0,0),ue=new je(0,0),_e=new je(0,0);for(let Re=Z;Re<=ie;++Re){oe.y=te.y=Re*O,ue.y=_e.y=(Re+1)*O;for(let Ue=F;Ue<=q;++Ue)oe.x=ue.x=Ue*O,te.x=_e.x=(Ue+1)*O,(ni(D,P,A,oe,te,_e)||ni(D,P,A,oe,_e,ue))&&k.push({cellIdx:Re*this.cellsX+Ue,triIdx:R})}}if(k.length===0)return;k.sort((R,D)=>R.cellIdx-D.cellIdx||R.triIdx-D.triIdx);let w=0;for(;w<k.length;){const R=k[w].cellIdx,D={start:this.payload.length,len:0};for(;w<k.length&&k[w].cellIdx===R;)++D.len,this.payload.push(k[w++].triIdx);this.cells[R]=D}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(o,l){if(this.triangleCount===0||this.cells.length===0||o.x>this.max.x||this.min.x>o.x||o.y>this.max.y||this.min.y>o.y)return;const h=cc(o.x-this.min.x,this.xScale,this.cellsX),v=cc(o.y-this.min.y,this.yScale,this.cellsY),f=this.cells[v*this.cellsX+h];if(f){this._lazyInitLookup();for(let y=0;y<f.len;y++){const E=this.payload[f.start+y],O=Math.floor(E/8),k=1<<E%8;if(!(this.lookup[O]&k)&&(this.lookup[O]|=k,l.push(E),l.length===this.triangleCount))return}}}query(o,l,h){if(this.triangleCount===0||this.cells.length===0||o.x>this.max.x||this.min.x>l.x||o.y>this.max.y||this.min.y>l.y)return;this._lazyInitLookup();const v=cc(o.x-this.min.x,this.xScale,this.cellsX),f=cc(l.x-this.min.x,this.xScale,this.cellsX),y=cc(o.y-this.min.y,this.yScale,this.cellsY),E=cc(l.y-this.min.y,this.yScale,this.cellsY);for(let O=y;O<=E;O++)for(let k=v;k<=f;k++){const w=this.cells[O*this.cellsX+k];if(w)for(let R=0;R<w.len;R++){const D=this.payload[w.start+R],P=Math.floor(D/8),A=1<<D%8;if(!(this.lookup[P]&A)&&(this.lookup[P]|=A,h.push(D),h.length===this.triangleCount))return}}}}function cc(u,o,l){return Math.max(0,Math.min(l-1,Math.floor(u*o)))}Fn(XS,"TriangleGridIndex");class QR{constructor(o){this.zoom=o.zoom,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.fqid),this.index=o.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.footprints=[]}updateFootprints(o,l){for(const h of this.footprints)l.push({footprint:h,id:o})}populate(o,l,h,v){const f=[];for(const{feature:y,id:E,index:O,sourceLayerIndex:k}of o){const w=this.layers[0]._featureFilter.needGeometry,R=Qt(y,w);if(!this.layers[0]._featureFilter.filter(new Zi(this.zoom),R,h))continue;const D={id:E,properties:y.properties,type:y.type,sourceLayerIndex:k,index:O,geometry:w?R.geometry:Et(y,h,v),patterns:{}};f.push(D)}for(const y of f){const{geometry:E,index:O,sourceLayerIndex:k}=y;this.addFeature(y,E,O,h,{},l.availableImages,l.brightness),l.featureIndex.insert(o[O].feature,E,O,k,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(o){}update(o,l,h,v,f){}destroy(){}addFeature(o,l,h,v,f,y=[],E){for(const O of X_(l,2)){const k=[],w=[],R=[],D=new je(1/0,1/0),P=new je(-1/0,-1/0);for(const q of O)if(q.length!==0){q!==O[0]&&R.push(w.length/2);for(let Z=0;Z<q.length;Z++)w.push(q[Z].x),w.push(q[Z].y),k.push(q[Z]),D.x=Math.min(D.x,q[Z].x),D.y=Math.min(D.y,q[Z].y),P.x=Math.max(P.x,q[Z].x),P.y=Math.max(P.y,q[Z].y)}const A=ov(w,R),F=new XS(k,A,8,256);this.footprints.push({vertices:k,indices:A,grid:F,min:D,max:P})}}}Fn(QR,"ClipBucket",{omit:["layers"]});const gH=Qr([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),vH=Qr([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),yH=Qr([{name:"a_centroid_pos",components:2,type:"Uint16"}]),_H=Qr([{name:"a_join_normal_inside",components:3,type:"Int16"}]),xH=Qr([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),bH=Qr([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:wH}=gH;var ZS,eO,YS,tO,JS,nO,rO,Z_={};function iO(){if(eO)return ZS;eO=1;var u=ht();function o(v,f,y,E,O){this.properties={},this.extent=y,this.type=0,this._pbf=v,this._geometry=-1,this._keys=E,this._values=O,v.readFields(l,this,f)}function l(v,f,y){v==1?f.id=y.readVarint():v==2?function(E,O){for(var k=E.readVarint()+E.pos;E.pos<k;){var w=O._keys[E.readVarint()],R=O._values[E.readVarint()];O.properties[w]=R}}(y,f):v==3?f.type=y.readVarint():v==4&&(f._geometry=y.pos)}function h(v){for(var f,y,E=0,O=0,k=v.length,w=k-1;O<k;w=O++)E+=((y=v[w]).x-(f=v[O]).x)*(f.y+y.y);return E}return ZS=o,o.types=["Unknown","Point","LineString","Polygon"],o.prototype.loadGeometry=function(){var v=this._pbf;v.pos=this._geometry;for(var f,y=v.readVarint()+v.pos,E=1,O=0,k=0,w=0,R=[];v.pos<y;){if(O<=0){var D=v.readVarint();E=7&D,O=D>>3}if(O--,E===1||E===2)k+=v.readSVarint(),w+=v.readSVarint(),E===1&&(f&&R.push(f),f=[]),f.push(new u(k,w));else{if(E!==7)throw new Error("unknown command "+E);f&&f.push(f[0].clone())}}return f&&R.push(f),R},o.prototype.bbox=function(){var v=this._pbf;v.pos=this._geometry;for(var f=v.readVarint()+v.pos,y=1,E=0,O=0,k=0,w=1/0,R=-1/0,D=1/0,P=-1/0;v.pos<f;){if(E<=0){var A=v.readVarint();y=7&A,E=A>>3}if(E--,y===1||y===2)(O+=v.readSVarint())<w&&(w=O),O>R&&(R=O),(k+=v.readSVarint())<D&&(D=k),k>P&&(P=k);else if(y!==7)throw new Error("unknown command "+y)}return[w,D,R,P]},o.prototype.toGeoJSON=function(v,f,y){var E,O,k=this.extent*Math.pow(2,y),w=this.extent*v,R=this.extent*f,D=this.loadGeometry(),P=o.types[this.type];function A(Z){for(var ie=0;ie<Z.length;ie++){var oe=Z[ie];Z[ie]=[360*(oe.x+w)/k-180,360/Math.PI*Math.atan(Math.exp((180-360*(oe.y+R)/k)*Math.PI/180))-90]}}switch(this.type){case 1:var F=[];for(E=0;E<D.length;E++)F[E]=D[E][0];A(D=F);break;case 2:for(E=0;E<D.length;E++)A(D[E]);break;case 3:for(D=function(Z){var ie=Z.length;if(ie<=1)return[Z];for(var oe,te,ue=[],_e=0;_e<ie;_e++){var Re=h(Z[_e]);Re!==0&&(te===void 0&&(te=Re<0),te===Re<0?(oe&&ue.push(oe),oe=[Z[_e]]):oe.push(Z[_e]))}return oe&&ue.push(oe),ue}(D),E=0;E<D.length;E++)for(O=0;O<D[E].length;O++)A(D[E][O])}D.length===1?D=D[0]:P="Multi"+P;var q={type:"Feature",geometry:{type:P,coordinates:D},properties:this.properties};return"id"in this&&(q.id=this.id),q},ZS}function oO(){if(tO)return YS;tO=1;var u=iO();function o(h,v){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=h,this._keys=[],this._values=[],this._features=[],h.readFields(l,this,v),this.length=this._features.length}function l(h,v,f){h===15?v.version=f.readVarint():h===1?v.name=f.readString():h===5?v.extent=f.readVarint():h===2?v._features.push(f.pos):h===3?v._keys.push(f.readString()):h===4&&v._values.push(function(y){for(var E=null,O=y.readVarint()+y.pos;y.pos<O;){var k=y.readVarint()>>3;E=k===1?y.readString():k===2?y.readFloat():k===3?y.readDouble():k===4?y.readVarint64():k===5?y.readVarint():k===6?y.readSVarint():k===7?y.readBoolean():null}return E}(f))}return YS=o,o.prototype.feature=function(h){if(h<0||h>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[h];var v=this._pbf.readVarint()+this._pbf.pos;return new u(this._pbf,v,this.extent,this._keys,this._values)},YS}function aO(){return rO||(rO=1,Z_.VectorTile=function(){if(nO)return JS;nO=1;var u=oO();function o(l,h,v){if(l===3){var f=new u(v,v.readVarint()+v.pos);f.length&&(h[f.name]=f)}}return JS=function(l,h){this.layers=l.readFields(o,{},h)},JS}(),Z_.VectorTileFeature=iO(),Z_.VectorTileLayer=oO()),Z_}var op=aO();class wh extends je{constructor(o,l,h){super(o,l),this.z=h}}class sO extends wh{constructor(o,l,h,v){super(o,l,h),this.w=v}}function Y_(u,o,l,h){const v=[],f=h===0?(y,E,O,k,w,R)=>{y.push(new je(R,O+(R-E)/(k-E)*(w-O)))}:(y,E,O,k,w,R)=>{y.push(new je(E+(R-O)/(w-O)*(k-E),R))};for(const y of u){const E=[];for(const O of y){if(O.length<=2)continue;const k=[];for(let D=0;D<O.length-1;D++){const P=O[D].x,A=O[D].y,F=O[D+1].x,q=O[D+1].y,Z=h===0?P:A,ie=h===0?F:q;Z<o?ie>o&&f(k,P,A,F,q,o):Z>l?ie<l&&f(k,P,A,F,q,l):k.push(O[D]),ie<o&&Z>=o&&f(k,P,A,F,q,o),ie>l&&Z<=l&&f(k,P,A,F,q,l)}let w=O[O.length-1];const R=h===0?w.x:w.y;R>=o&&R<=l&&k.push(w),k.length&&(w=k[k.length-1],k[0].x===w.x&&k[0].y===w.y||k.push(k[0]),E.push(k))}E.length&&v.push(E)}return v}function lO(u,o,l,h){const v=l==="x"?"y":"x",f=(h-u[l])/(o[l]-u[l]);u[v]=u[v]+(o[v]-u[v])*f,u[l]=h,u.hasOwnProperty("z")&&(u.z=Zn(u.z,o.z,f)),u.hasOwnProperty("w")&&(u.w=Zn(u.w,o.w,f))}function cO(u,o,l,h){const v=l,f=h;for(const y of["x","y"]){let E=u,O=o;E[y]>=O[y]&&(E=o,O=u),E[y]<v&&O[y]>v&&lO(E,O,y,v),E[y]<f&&O[y]>f&&lO(O,E,y,f)}}const J_=Number.MAX_SAFE_INTEGER;function uO(u,o,l,h){return u.order<o||u.order===J_||!(u.clipMask&l)||function(v,f){return f.length!==0&&f.find(y=>y===v)===void 0}(h,u.clipScope)}function Q_(u,o){return u.x-o.x||u.y-o.y}function dO(u,o){return Q_(u.min,o.min)===0&&Q_(u.max,o.max)===0}function QS(u,o){return!(u.min.x>o.max.x||u.max.x<o.min.x||u.min.y>o.max.y||u.max.y<o.min.y)}function eC(u,o){if(u.length!==o.length)return!1;for(let l=0;l<u.length;l++)if(u[l].sourceId!==o[l].sourceId||!dO(u[l],o[l])||u[l].order!==o[l].order||u[l].clipMask!==o[l].clipMask||!St(u[l].clipScope,o[l].clipScope))return!1;return!0}function hO(u,o,l){const h=1/Tn,v=1/(1<<l.canonical.z),f=(o.x*h+l.canonical.x)*v+l.wrap,y=(o.y*h+l.canonical.y)*v;return{min:new je((u.x*h+l.canonical.x)*v+l.wrap,(u.y*h+l.canonical.y)*v),max:new je(f,y)}}function SH(u,o,l){const h=1<<l.canonical.z,v=((o.x-l.wrap)*h-l.canonical.x)*Tn,f=(o.y*h-l.canonical.y)*Tn;return{min:new je(((u.x-l.wrap)*h-l.canonical.x)*Tn,(u.y*h-l.canonical.y)*Tn),max:new je(v,f)}}function fO(u,o,l,h,v,f,y){const E=u.indices,O=u.vertices,k=[];for(let w=h;w<h+v;w+=3){const R=o[l[w+0]+f],D=o[l[w+1]+f],P=o[l[w+2]+f],A=Math.min(R.x,D.x,P.x),F=Math.max(R.x,D.x,P.x),q=Math.min(R.y,D.y,P.y),Z=Math.max(R.y,D.y,P.y);k.length=0,u.grid.query(new je(A,q),new je(F,Z),k);for(let ie=0;ie<k.length;ie++){const oe=k[ie];if(ni(O[E[3*oe+0]],O[E[3*oe+1]],O[E[3*oe+2]],R,D,P,y))return!0}}return!1}function pO(u,o,l,h){if(!u||!l)return!1;let v=u.vertices;if(!o.canonical.equals(h.canonical)||o.wrap!==h.wrap){if(l.vertices.length<u.vertices.length)return pO(l,h,u,o);const f=o.canonical,y=h.canonical,E=Math.pow(2,y.z-f.z);v=u.vertices.map(O=>new je((O.x+f.x*Tn)*E-y.x*Tn,(O.y+f.y*Tn)*E-y.y*Tn))}return fO(l,v,u.indices,0,u.indices.length,0,0)}function mO(u,o,l,h){const v=Math.pow(2,h.z-l.z);return new je((u+l.x*Tn)*v-h.x*Tn,(o+l.y*Tn)*v-h.y*Tn)}function gO(u,o){const l=[];o.grid.queryPoint(u,l);const h=o.indices,v=o.vertices;for(let f=0;f<l.length;f++){const y=l[f];if(Vr([v[h[3*y+0]],v[h[3*y+1]],v[h[3*y+2]]],u))return!0}return!1}const tC=[new je(0,0),new je(Tn,0),new je(Tn,Tn),new je(0,Tn)];function vO(u,o){const l=[];let h=[];if(!o||u.length<2)return[u];if(u.length===2)return Yr(u[0],u[1],tC)?[u]:[];for(let v=0;v<u.length+2;v++){const f=u[v%u.length],y=u[(v+1)%u.length],E=Yr(v===0?u[u.length-1]:u[(v-1)%u.length],f,tC),O=Yr(f,y,tC),k=E||O;k&&h.push(f),k&&O||h.length>0&&(h.length>1&&l.push(h),h=[])}return h.length>1&&l.push(h),l}const nC=op.VectorTileFeature.types,CH=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],EH=["fill-extrusion-flood-light-ground-radius"],TH=Math.pow(2,13),IH=Math.pow(2,15)-1,yO=new je(0,1),Gu=2147483648;function cv(u,o,l,h,v,f,y,E){u.emplaceBack((o<<1)+y,(l<<1)+f,(Math.floor(h*TH)<<1)+v,Math.round(E))}function uv(u,o,l){u.emplaceBack(o.x*Tn,o.y*Tn,l?1:0)}function ex(u,o,l,h,v,f){u.emplaceBack(o.x,o.y,(l.x<<1)+h,(l.y<<1)+v,f)}function dv(u,o,l){u.emplaceBack(o.x,o.y,o.z,l[0]*16384,l[1]*16384,l[2]*16384)}class _O{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class xO{constructor(){this.centroidXY=new je(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new je(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new je(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new je(this.max.x-this.min.x,this.max.y-this.min.y)}}class bO{constructor(){this.acc=new je(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(o,l){o.min.x===Number.MAX_VALUE&&(o.min.x=o.max.x=l.x,o.min.y=o.max.y=l.y)}appendEdge(o,l,h){this.accCount++,this.acc._add(l);let v=!!this.borders;l.x<o.min.x?(o.min.x=l.x,v=!0):l.x>o.max.x&&(o.max.x=l.x,v=!0),l.y<o.min.y?(o.min.y=l.y,v=!0):l.y>o.max.y&&(o.max.y=l.y,v=!0),((l.x===0||l.x===Tn)&&l.x===h.x)!=((l.y===0||l.y===Tn)&&l.y===h.y)&&this.processBorderOverlap(l,h),v&&this.checkBorderIntersection(l,h)}checkBorderIntersection(o,l){l.x<0!=o.x<0&&this.addBorderIntersection(0,Zn(l.y,o.y,(0-l.x)/(o.x-l.x))),l.x>Tn!=o.x>Tn&&this.addBorderIntersection(1,Zn(l.y,o.y,(Tn-l.x)/(o.x-l.x))),l.y<0!=o.y<0&&this.addBorderIntersection(2,Zn(l.x,o.x,(0-l.y)/(o.y-l.y))),l.y>Tn!=o.y>Tn&&this.addBorderIntersection(3,Zn(l.x,o.x,(Tn-l.y)/(o.y-l.y)))}addBorderIntersection(o,l){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const h=this.borders[o];l<h[0]&&(h[0]=l),l>h[1]&&(h[1]=l)}processBorderOverlap(o,l){if(o.x===l.x){if(o.y===l.y)return;const h=o.x===0?0:1;this.addBorderIntersection(h,l.y),this.addBorderIntersection(h,o.y)}else{const h=o.y===0?2:3;this.addBorderIntersection(h,l.x),this.addBorderIntersection(h,o.x)}}centroid(){return this.accCount===0?new je(0,0):new je(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((o,l)=>o+ +(l[0]!==Number.MAX_VALUE),0):0}}function wO(u,o){const l=u.add(o)._unit(),h=Rt(u.x*l.x+u.y*l.y,-1,1);var v,f,y;return y=Math.acos(h),Math.min(4,Math.max(-4,Math.tan(y)))/4*IH*((v=u).x*(f=o).y-v.y*f.x<0?-1:1)}const MH=[u=>u.x<0,u=>u.x>Tn,u=>u.y<0,u=>u.y>Tn];function PH(u,o,l,h){const v=[4];if(h===0)return v;l._mult(h);const f=u.sub(l),y=o.sub(l),E=[u,o,f,y];for(let O=0;O<4;O++)for(const k of E)if(MH[O](k)){v.push(O);break}return v}class SO{constructor(o){this.vertexArray=new Vg,this.indexArray=new ji,this.programConfigurations=new Ks(o.layers,{zoom:o.zoom,lut:o.lut},l=>EH.includes(l)),this._segments=new io,this.hiddenByLandmarkVertexArray=new Jf,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new io}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(o,l,h,v=!1){const f=o.length;if(f>2){let y=Math.max(0,this._segments.get().length-1);const E=this._segments._prepareSegment(4*f,this.vertexArray.length,2*this._segmentToGroundQuads[y].length);let O;y!==this._segments.get().length-1&&(y++,this._segmentToGroundQuads[y]=[],this._segmentToRegionTriCounts[y]=[0,0,0,0,0]);{const k=o[0],w=o[1];O=wO(k.sub(o[f-1])._perp()._unit(),w.sub(k)._perp()._unit())}for(let k=0;k<f;k++){const w=k===f-1?0:k+1,R=o[k],D=o[w],P=o[w===f-1?0:w+1],A=D.sub(R)._perp()._unit(),F=wO(A,P.sub(D)._perp()._unit()),q=O,Z=F;if(rC(R,D,l)||v&&TO(R,l)&&TO(D,l)){O=F;continue}const ie=E.vertexLength;ex(this.vertexArray,R,D,1,1,q),ex(this.vertexArray,R,D,1,0,q),ex(this.vertexArray,R,D,0,1,Z),ex(this.vertexArray,R,D,0,0,Z),E.vertexLength+=4;const oe=PH(R,D,A,h);for(const te of oe)this._segmentToGroundQuads[y].push({id:ie,region:te}),this._segmentToRegionTriCounts[y][te]+=2,E.primitiveLength+=2;O=F}}}prepareBorderSegments(){if(!this.hasData())return;const o=this._segments.get(),l=o.length;for(let h=0;h<l;h++)this._segmentToGroundQuads[h].sort((v,f)=>v.region-f.region);for(let h=0;h<l;h++){const v=this._segmentToGroundQuads[h],f=o[h],y=this._segmentToRegionTriCounts[h];y.reduce((O,k)=>O+k,0);let E=0;for(let O=0;O<=4;O++){const k=y[O];if(k!==0){let w=this.regionSegments[O];w||(w=this.regionSegments[O]=new io);const R={vertexOffset:f.vertexOffset,primitiveOffset:f.primitiveOffset+E,vertexLength:f.vertexLength,primitiveLength:k};w.get().push(R)}E+=k}for(let O=0;O<v.length;O++){const k=v[O].id;this.indexArray.emplaceBack(k,k+1,k+3),this.indexArray.emplaceBack(k,k+3,k+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(o,l,h,v,f,y){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,o,l,h,v,f,y)}upload(o){this.hasData()&&(this.vertexBuffer=o.createVertexBuffer(this.vertexArray,vH.members),this.indexBuffer=o.createIndexBuffer(this.indexArray))}uploadPaintProperties(o){this.hasData()&&this.programConfigurations.upload(o)}update(o,l,h,v,f,y){this.hasData()&&this.programConfigurations.updatePaintArrays(o,l,h,v,f,y)}updateHiddenByLandmark(o){if(!this.hasData())return;const l=o.groundVertexCount+o.groundVertexArrayOffset;if(o.groundVertexCount===0)return;const h=o.flags&Gu?1:0;for(let v=o.groundVertexArrayOffset;v<l;++v)this.hiddenByLandmarkVertexArray.emplace(v,h);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(o){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=o.createVertexBuffer(this.hiddenByLandmarkVertexArray,xH.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let o=0;o<=4;o++){const l=this.regionSegments[o];l&&l.destroy()}}}}class tx{constructor(o){this.zoom=o.zoom,this.canonical=o.canonical,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.fqid),this.index=o.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=o.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new ji,this.footprintVertices=new oc,this.footprintSegments=[],this.layoutVertexArray=new $u,this.centroidVertexArray=new k_,this.wallVertexArray=new Yg,this.indexArray=new ji,this.programConfigurations=new Ks(o.layers,{zoom:o.zoom,lut:o.lut},l=>CH.includes(l)),this.segments=new io,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.groundEffect=new SO(o),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}updateFootprints(o,l){}populate(o,l,h,v){this.features=[],this.hasPattern=GS("fill-extrusion",this.layers,l),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=rt(h),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:f,id:y,index:E,sourceLayerIndex:O}of o){const k=this.layers[0]._featureFilter.needGeometry,w=Qt(f,k);if(!this.layers[0]._featureFilter.filter(new Zi(this.zoom),w,h))continue;const R={id:y,sourceLayerIndex:O,index:E,geometry:k?w.geometry:Et(f,h,v),properties:f.properties,type:f.type,patterns:{}},D=this.layoutVertexArray.length,P=nC[R.type]==="Polygon";if(this.hasPattern)this.features.push(qS("fill-extrusion",this.layers,R,this.zoom,l));else if(this.wallMode)for(const A of R.geometry)for(const F of vO(A,P))this.addFeature(R,[F],E,h,{},l.availableImages,v,l.brightness);else this.addFeature(R,R.geometry,E,h,{},l.availableImages,v,l.brightness);l.featureIndex.insert(f,R.geometry,E,O,this.index,D)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(o,l,h,v,f,y){for(const E of this.features){const O=nC[E.type]==="Polygon",{geometry:k}=E;if(this.wallMode)for(const w of k)for(const R of vO(w,O))this.addFeature(E,[R],E.index,l,h,v,f,y);else this.addFeature(E,k,E.index,l,h,v,f,y)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(o,l,h,v,f){const y=Object.keys(o).length!==0;if(y&&!this.stateDependentLayers.length)return;const E=y?this.stateDependentLayers:this.layers;this.programConfigurations.updatePaintArrays(o,l,E,h,v,f),this.groundEffect.update(o,l,E,h,v,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,wH),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.wallVertexBuffer=o.createVertexBuffer(this.wallVertexArray,_H.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=o.createVertexBuffer(this.layoutVertexExtArray,bH.members,!0)),this.groundEffect.upload(o)),this.groundEffect.uploadPaintProperties(o),this.programConfigurations.upload(o),this.uploaded=!0}uploadCentroid(o){this.groundEffect.uploadHiddenByLandmark(o),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,yH.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,l,h,v,f,y,E,O){const k=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(o,{})/this.tileToMeter,w=[new je(0,0),new je(Tn,Tn)],R=E.projection,D=R.name==="globe",P=this.wallMode||nC[o.type]==="Polygon",A=new bO;A.centroidDataIndex=this.centroidData.length;const F=new xO,q=this.layers[0].paint.get("fill-extrusion-base").evaluate(o,{},v)<=0,Z=this.layers[0].paint.get("fill-extrusion-height").evaluate(o,{},v);let ie;if(F.height=Z,F.vertexArrayOffset=this.layoutVertexArray.length,F.groundVertexArrayOffset=this.groundEffect.vertexArray.length,D&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new hh),this.wallMode){if(D)return void Xt("Non zero fill-extrusion-line-width is not yet supported on globe.");if(l.length!==1)return;ie=function(Fe){const tt=Fe[0].x===Fe[Fe.length-1].x&&Fe[0].y===Fe[Fe.length-1].y;(function(pn){let on=0;const er=pn.length;for(let Ln=0;Ln<er;Ln++)on+=(pn[(Ln+1)%er].x-pn[Ln].x)*(pn[(Ln+1)%er].y+pn[Ln].y);return on>=0})(Fe)||(Fe=Fe.reverse());const et={geometry:[],joinNormals:[],indices:[]},lt=[],ct=[],xt=[];let Pt=Fe.length;if(Pt<(tt?3:2))return et;for(;Pt>=2&&Fe[Pt-1].equals(Fe[Pt-2]);)Pt--;let $t,Tt,Ht,sn,Bt,Nn=0;for(;Nn<Pt-1&&Fe[Nn].equals(Fe[Nn+1]);)Nn++;tt&&($t=Fe[Pt-2],Bt=Fe[Nn].sub($t)._unit()._perp());for(let pn=Nn;pn<Pt;pn++){if(Ht=pn===Pt-1?tt?Fe[Nn+1]:void 0:Fe[pn+1],Ht&&Fe[pn].equals(Ht))continue;Bt&&(sn=Bt),$t&&(Tt=$t),$t=Fe[pn],Bt=Ht?Ht.sub($t)._unit()._perp():sn,sn=sn||Bt;let on=sn.add(Bt);on.x===0&&on.y===0||on._unit();const er=on.x*Bt.x+on.y*Bt.y,Ln=er!==0?1/er:1/0,Vn=sn.x*Bt.y-sn.y*Bt.x>0;let xr="miter";const Or=2;xr==="miter"&&Ln>Or&&(xr="bevel"),xr==="bevel"&&(Ln>100&&(xr="flipbevel"),Ln<Or&&(xr="miter"));const Dr=(Rr,Fr,Lr,Si)=>{const vi=new je(Rr.x,Rr.y),vr=new je(Rr.x,Rr.y);vi.x+=Fr.x*Si,vi.y+=Fr.y*Si,vr.x-=Fr.x*Math.max(Lr,1),vr.y-=Fr.y*Math.max(Lr,1),xt.push(Fr),lt.push(vi),ct.push(vr)};if(xr==="miter")on._mult(Ln),Dr($t,on,0,0);else if(xr==="flipbevel")on=Bt.mult(-1),Dr($t,on,0,0),Dr($t,on.mult(-1),0,0);else{const Rr=-Math.sqrt(Ln*Ln-1),Fr=Vn?Rr:0,Lr=Vn?0:Rr;Tt&&Dr($t,sn,Fr,Lr),Ht&&Dr($t,Bt,Fr,Lr)}}et.geometry=[...lt,...ct.reverse(),lt[0]],et.joinNormals=[...xt,...xt.reverse(),xt[xt.length-1]];const En=et.geometry.length-1;for(let pn=0;pn<En/2;pn++)if(pn+1<En/2){let on=pn,er=pn+1,Ln=En-1-pn,Vn=En-2-pn;on=on===0?En-1:on-1,er=er===0?En-1:er-1,Ln=Ln===0?En-1:Ln-1,Vn=Vn===0?En-1:Vn-1,et.indices.push(Ln),et.indices.push(er),et.indices.push(on),et.indices.push(Ln),et.indices.push(Vn),et.indices.push(er)}return et}(l[0]),l=[ie.geometry]}const oe=(Fe,tt)=>Fe<(tt.length-1)/2||Fe===tt.length-1,te=this.wallMode?[l]:X_(l,500);for(let Fe=te.length-1;Fe>=0;Fe--){const tt=te[Fe];(tt.length===0||(ue=tt[0]).every(Ne=>Ne.x<=0)||ue.every(Ne=>Ne.x>=Tn)||ue.every(Ne=>Ne.y<=0)||ue.every(Ne=>Ne.y>=Tn))&&te.splice(Fe,1)}var ue;let _e;if(D)_e=RO(te,w,v);else{_e=[];for(const Fe of te)_e.push({polygon:Fe,bounds:w})}const Re=P?this.edgeRadius:0,Ue=Re>0&&this.zoom<17,Le=(Fe,tt)=>{if(Fe.length===0)return!1;const Ne=Fe[Fe.length-1];return tt.x===Ne.x&&tt.y===Ne.y};for(const{polygon:Fe,bounds:tt}of _e){let Ne=0,et=0;for(const Pt of Fe)P&&!Pt[0].equals(Pt[Pt.length-1])&&Pt.push(Pt[0]),et+=P?Pt.length-1:Pt.length;const lt=this.segments.prepareSegment((P?5:4)*et,this.layoutVertexArray,this.indexArray);F.footprintSegIdx<0&&(F.footprintSegIdx=this.footprintSegments.length),F.polygonSegIdx<0&&(F.polygonSegIdx=this.polygonSegments.length);const ct={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},xt=new _O;if(xt.vertexOffset=this.footprintVertices.length,xt.indexOffset=3*this.footprintIndices.length,xt.ringIndices=[],P){const Pt=[],$t=[];Ne=lt.vertexLength;for(let Ht=0;Ht<Fe.length;Ht++){const sn=Fe[Ht];sn.length&&Ht!==0&&$t.push(Pt.length/2);const Bt=[];let Nn,En;Nn=sn[1].sub(sn[0])._perp()._unit(),xt.ringIndices.push(sn.length-1);for(let pn=1;pn<sn.length;pn++){const on=sn[pn],er=sn[pn===sn.length-1?1:pn+1],Ln=on.clone();if(Re){En=er.sub(on)._perp()._unit();const Vn=Nn.add(En)._unit(),xr=Re*Math.min(4,1/(Nn.x*Vn.x+Nn.y*Vn.y));Ln.x+=xr*Vn.x,Ln.y+=xr*Vn.y,Ln.x=Math.round(Ln.x),Ln.y=Math.round(Ln.y),Nn=En}if(!q||Re!==0&&!Ue||Le(Bt,Ln)||Bt.push(Ln),cv(this.layoutVertexArray,Ln.x,Ln.y,0,0,1,1,0),this.wallMode){const Vn=oe(pn,sn);uv(this.wallVertexArray,ie.joinNormals[pn],!Vn)}lt.vertexLength++,this.footprintVertices.emplaceBack(on.x,on.y),Pt.push(on.x,on.y),D&&dv(this.layoutVertexExtArray,R.projectTilePoint(Ln.x,Ln.y,v),R.upVector(v,Ln.x,Ln.y))}q&&(Re===0||Ue)&&(Bt.length!==0&&Le(Bt,Bt[0])&&Bt.pop(),this.groundEffect.addData(Bt,tt,k))}const Tt=this.wallMode?ie.indices:ov(Pt,$t);for(let Ht=0;Ht<Tt.length;Ht+=3)this.footprintIndices.emplaceBack(xt.vertexOffset+Tt[Ht+0],xt.vertexOffset+Tt[Ht+1],xt.vertexOffset+Tt[Ht+2]),this.indexArray.emplaceBack(Ne+Tt[Ht],Ne+Tt[Ht+2],Ne+Tt[Ht+1]),lt.primitiveLength++;xt.indexCount+=Tt.length,xt.vertexCount+=this.footprintVertices.length-xt.vertexOffset}for(let Pt=0;Pt<Fe.length;Pt++){const $t=Fe[Pt];A.startRing(F,$t[0]);let Tt=$t.length>4&&IO($t[$t.length-2],$t[0],$t[1]),Ht=Re?RH($t[$t.length-2],$t[0],$t[1],Re):0;const sn=[];let Bt,Nn,En;Nn=$t[1].sub($t[0])._perp()._unit();let pn=!0;for(let on=1,er=0;on<$t.length;on++){let Ln=$t[on-1],Vn=$t[on];const xr=$t[on===$t.length-1?1:on+1];if(A.appendEdge(F,Vn,Ln),rC(Vn,Ln,tt)){Re&&(Nn=xr.sub(Vn)._perp()._unit(),pn=!pn);continue}const Or=Vn.sub(Ln)._perp(),Dr=Or.x/(Math.abs(Or.x)+Math.abs(Or.y)),Rr=Or.y>0?1:0,Fr=Ln.dist(Vn);if(er+Fr>32768&&(er=0),Re){En=xr.sub(Vn)._perp()._unit();let vr=EO(Ln,Vn,xr,CO(Nn,En),Re);isNaN(vr)&&(vr=0);const ai=Vn.sub(Ln)._unit();Ln=Ln.add(ai.mult(Ht))._round(),Vn=Vn.add(ai.mult(-vr))._round(),Ht=vr,Nn=En,q&&this.zoom>=17&&(Le(sn,Ln)||sn.push(Ln),Le(sn,Vn)||sn.push(Vn))}const Lr=lt.vertexLength,Si=$t.length>4&&IO(Ln,Vn,xr);let vi=MO(er,Tt,pn);if(cv(this.layoutVertexArray,Ln.x,Ln.y,Dr,Rr,0,0,vi),cv(this.layoutVertexArray,Ln.x,Ln.y,Dr,Rr,0,1,vi),this.wallMode){const vr=oe(on-1,$t),ai=ie.joinNormals[on-1];uv(this.wallVertexArray,ai,vr),uv(this.wallVertexArray,ai,vr)}if(er+=Fr,vi=MO(er,Si,!pn),Tt=Si,cv(this.layoutVertexArray,Vn.x,Vn.y,Dr,Rr,0,0,vi),cv(this.layoutVertexArray,Vn.x,Vn.y,Dr,Rr,0,1,vi),this.wallMode){const vr=oe(on,$t),ai=ie.joinNormals[on];uv(this.wallVertexArray,ai,vr),uv(this.wallVertexArray,ai,vr)}if(lt.vertexLength+=4,this.indexArray.emplaceBack(Lr+0,Lr+1,Lr+2),this.indexArray.emplaceBack(Lr+1,Lr+3,Lr+2),lt.primitiveLength+=2,Re){const vr=Ne+(on===1?$t.length-2:on-2),ai=on===1?Ne:vr+1;if(this.indexArray.emplaceBack(Lr+1,vr,Lr+3),this.indexArray.emplaceBack(vr,ai,Lr+3),lt.primitiveLength+=2,Bt===void 0&&(Bt=Lr),!rC(xr,$t[on],tt)){const li=on===$t.length-1?Bt:lt.vertexLength;this.indexArray.emplaceBack(Lr+2,Lr+3,li),this.indexArray.emplaceBack(Lr+3,li+1,li),this.indexArray.emplaceBack(Lr+3,ai,li+1),lt.primitiveLength+=3}pn=!pn}if(D){const vr=this.layoutVertexExtArray,ai=R.projectTilePoint(Ln.x,Ln.y,v),li=R.projectTilePoint(Vn.x,Vn.y,v),Ni=R.upVector(v,Ln.x,Ln.y),uo=R.upVector(v,Vn.x,Vn.y);dv(vr,ai,Ni),dv(vr,ai,Ni),dv(vr,li,uo),dv(vr,li,uo)}}P&&(Ne+=$t.length-1),q&&Re&&this.zoom>=17&&(sn.length!==0&&Le(sn,sn[0])&&sn.pop(),this.groundEffect.addData(sn,tt,k,Re>0))}this.footprintSegments.push(xt),ct.triangleCount=this.indexArray.length-ct.triangleArrayOffset,this.polygonSegments.push(ct),++F.footprintSegLen,++F.polygonSegLen}if(F.vertexCount=this.layoutVertexArray.length-F.vertexArrayOffset,F.groundVertexCount=this.groundEffect.vertexArray.length-F.groundVertexArrayOffset,F.vertexCount!==0){if(F.centroidXY=A.borders?yO:this.encodeCentroid(A,F),this.centroidData.push(F),A.borders){this.featuresOnBorder.push(A);const Fe=this.featuresOnBorder.length-1;for(let tt=0;tt<A.borders.length;tt++)A.borders[tt][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[tt].push(Fe)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,h,f,y,v,O),this.groundEffect.addPaintPropertiesData(o,h,f,y,v,O),this.maxHeight=Math.max(this.maxHeight,Z)}}sortBorders(){for(let o=0;o<this.borderFeatureIndices.length;o++)this.borderFeatureIndices[o].sort((l,h)=>this.featuresOnBorder[l].borders[o][0]-this.featuresOnBorder[h].borders[o][0])}splitToSubtiles(){const o=[];for(let E=0;E<this.centroidData.length;E++){const O=this.centroidData[E],k=+(O.min.y+O.max.y>Tn),w=2*k+(+(O.min.x+O.max.x>Tn)^k);for(let R=0;R<O.polygonSegLen;R++){const D=O.polygonSegIdx+R;o.push({centroidIdx:E,subtile:w,polygonSegmentIdx:D,triangleSegmentIdx:this.polygonSegments[D].triangleSegIdx})}}const l=new ji;o.sort((E,O)=>E.triangleSegmentIdx===O.triangleSegmentIdx?E.subtile-O.subtile:E.triangleSegmentIdx-O.triangleSegmentIdx);let h=0,v=0,f=0;for(const E of o){if(E.triangleSegmentIdx!==h)break;f++}const y=o.length;for(;v!==o.length;){h=o[v].triangleSegmentIdx;let E=0,O=v,k=v;for(let w=O;w<f&&o[w].subtile===E;w++)k++;for(;O!==f;){const w=o[O];E=w.subtile;const R=this.centroidData[w.centroidIdx].min.clone(),D=this.centroidData[w.centroidIdx].max.clone(),P={vertexOffset:this.segments.segments[h].vertexOffset,primitiveOffset:l.length,vertexLength:this.segments.segments[h].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let A=O;A<k;A++){const F=o[A],q=this.polygonSegments[F.polygonSegmentIdx],Z=this.centroidData[F.centroidIdx].min,ie=this.centroidData[F.centroidIdx].max,oe=this.indexArray.uint16;for(let te=q.triangleArrayOffset;te<q.triangleArrayOffset+q.triangleCount;te++)l.emplaceBack(oe[3*te],oe[3*te+1],oe[3*te+2]);P.primitiveLength+=q.triangleCount,R.x=Math.min(R.x,Z.x),R.y=Math.min(R.y,Z.y),D.x=Math.max(D.x,ie.x),D.y=Math.max(D.y,ie.y)}P.primitiveLength>0&&this.triangleSubSegments.push({segment:P,min:R,max:D}),O=k;for(let A=O;A<f&&o[A].subtile===o[O].subtile;A++)k++}v=f;for(let w=v;w<y&&o[w].triangleSegmentIdx===o[v].triangleSegmentIdx;w++)f++}l._trim(),this.indexArray=l}getVisibleSegments(o,l,h){const v=new io;if(this.wallMode){for(const F of this.triangleSubSegments)v.segments.push(F.segment);return v}let f=0,y=0;const E=1<<o.canonical.z;if(l){const F=l.getMinMaxForTile(o);F&&(f=F.min,y=F.max)}y+=this.maxHeight;const O=o.toUnwrapped();let k;const w=[O.canonical.x/E+O.wrap,O.canonical.y/E],R=[(O.canonical.x+1)/E+O.wrap,(O.canonical.y+1)/E],D=(F,q,Z)=>[F[0]*(1-Z[0])+q[0]*Z[0],F[1]*(1-Z[1])+q[1]*Z[1]],P=[],A=[];for(const F of this.triangleSubSegments){P[0]=F.min.x/Tn,P[1]=F.min.y/Tn,A[0]=F.max.x/Tn,A[1]=F.max.y/Tn;const q=D(w,R,P),Z=D(w,R,A);if(new si([q[0],q[1],f],[Z[0],Z[1],y]).intersectsPrecise(h)===0){k&&(v.segments.push(k),k=void 0);continue}const ie=F.segment;k&&k.vertexOffset!==ie.vertexOffset&&(v.segments.push(k),k=void 0),k?(k.vertexLength+=ie.vertexLength,k.primitiveLength+=ie.primitiveLength):k={vertexOffset:ie.vertexOffset,primitiveLength:ie.primitiveLength,vertexLength:ie.vertexLength,primitiveOffset:ie.primitiveOffset,sortKey:void 0,vaos:{}}}return k&&v.segments.push(k),v}encodeCentroid(o,l){const h=o.centroid(),v=l.span(),f=Math.min(7,Math.round(v.x*this.tileToMeter/10)),y=Math.min(7,Math.round(v.y*this.tileToMeter/10));return new je(Rt(h.x,1,Tn-1)<<3|f,Rt(h.y,1,Tn-1)<<3|y)}encodeBorderCentroid(o){if(!o.borders)return new je(0,0);const l=o.borders,h=Number.MAX_VALUE;if(l[0][0]!==h||l[1][0]!==h){const v=l[0][0]!==h?0:1;return new je(6|(l[0][0]!==h?0:65528),(l[v][0]+l[v][1])/2<<3|6)}{const v=l[2][0]!==h?2:3;return new je((l[v][0]+l[v][1])/2<<3|6,6|(l[2][0]!==h?0:65528))}}showCentroid(o){const l=this.centroidData[o.centroidDataIndex];l.flags&=Gu,l.centroidXY.x=0,l.centroidXY.y=0,this.writeCentroidToBuffer(l)}writeCentroidToBuffer(o){this.groundEffect.updateHiddenByLandmark(o);const l=o.vertexArrayOffset,h=o.vertexCount+o.vertexArrayOffset,v=o.flags&Gu?yO:o.centroidXY,f=this.centroidVertexArray.geta_centroid_pos0(l);if(this.centroidVertexArray.geta_centroid_pos1(l)!==v.y||f!==v.x){for(let y=l;y<h;++y)this.centroidVertexArray.emplace(y,v.x,v.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const o of this.centroidData)this.writeCentroidToBuffer(o)}updateReplacement(o,l,h){if(l.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=l.updateTime;const v=l.getReplacementRegionsForTile(o.toUnwrapped());if(eC(this.activeReplacements,v))return;if(this.activeReplacements=v,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const y of this.centroidData)y.flags&=2147483647;const f=[];for(const y of this.activeReplacements){if(y.order<h)continue;const E=Math.max(1,Math.pow(2,y.footprintTileId.canonical.z-o.canonical.z));for(const O of this.centroidData)if(!(O.flags&Gu||y.min.x>O.max.x||O.min.x>y.max.x||y.min.y>O.max.y||O.min.y>y.max.y))for(let k=0;k<O.footprintSegLen;k++){const w=this.footprintSegments[O.footprintSegIdx+k];if(f.length=0,OH(this.footprintVertices,w.vertexOffset,w.vertexCount,y.footprintTileId.canonical,o.canonical,f),fO(y.footprint,f,this.footprintIndices.uint16,w.indexOffset,w.indexCount,-w.vertexOffset,-E)){O.flags|=Gu;break}}}for(const y of this.centroidData)this.writeCentroidToBuffer(y);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(o,l,h){let v=!1;for(let f=0;f<h.footprintSegLen;f++){const y=this.footprintSegments[h.footprintSegIdx+f];let E=0;for(const O of y.ringIndices){for(let k=E,w=O+E-1;k<O+E;w=k++){const R=this.footprintVertices.int16[2*(k+y.vertexOffset)+0],D=this.footprintVertices.int16[2*(k+y.vertexOffset)+1],P=this.footprintVertices.int16[2*(w+y.vertexOffset)+1];D>l!=P>l&&o<(this.footprintVertices.int16[2*(w+y.vertexOffset)+0]-R)*(l-D)/(P-D)+R&&(v=!v)}E=O}}return v}getHeightAtTileCoord(o,l){let h=Number.NEGATIVE_INFINITY,v=!0;const f=4*(o+Tn)*Tn+(l+Tn);if(this.partLookup.hasOwnProperty(f)){const y=this.partLookup[f];return y?{height:y.height,hidden:!!(y.flags&Gu)}:void 0}for(const y of this.centroidData)o>y.max.x||y.min.x>o||l>y.max.y||y.min.y>l||this.footprintContainsPoint(o,l,y)&&y&&y.height>h&&(h=y.height,this.partLookup[f]=y,v=!!(y.flags&Gu));if(h!==Number.NEGATIVE_INFINITY)return{height:h,hidden:v};this.partLookup[f]=void 0}}function CO(u,o){const l=u.add(o)._unit();return u.x*l.x+u.y*l.y}function RH(u,o,l,h){const v=o.sub(u)._perp()._unit(),f=l.sub(o)._perp()._unit();return EO(u,o,l,CO(v,f),h)}function EO(u,o,l,h,v){const f=Math.sqrt(1-h*h);return Math.min(u.dist(o)/3,o.dist(l)/3,v*f/h)}function rC(u,o,l){return u.x<l[0].x&&o.x<l[0].x||u.x>l[1].x&&o.x>l[1].x||u.y<l[0].y&&o.y<l[0].y||u.y>l[1].y&&o.y>l[1].y}function TO(u,o){return u.x<o[0].x||u.x>o[1].x||u.y<o[0].y||u.y>o[1].y}function IO(u,o,l){if(u.x<0||u.x>=Tn||o.x<0||o.x>=Tn||l.x<0||l.x>=Tn)return!1;const h=l.sub(o),v=h.perp(),f=u.sub(o);return(h.x*f.x+h.y*f.y)/Math.sqrt((h.x*h.x+h.y*h.y)*(f.x*f.x+f.y*f.y))>-.866&&v.x*f.x+v.y*f.y<0}function MO(u,o,l){const h=o?2|u:-3&u;return l?1|h:-2&h}function PO(){const u=Math.PI/32,o=Math.tan(u),l=U;return l*Math.sqrt(1+2*o*o)-l}function RO(u,o,l){const h=1<<l.z,v=Oe(l.x/h),f=Oe((l.x+1)/h),y=Ve(l.y/h),E=Ve((l.y+1)/h);return function(O,k,w,R,D=0,P){const A=[];if(!O.length||!w||!R)return A;const F=(_e,Re)=>{for(const Ue of _e)A.push({polygon:Ue,bounds:Re})},q=Math.ceil(Math.log2(w)),Z=Math.ceil(Math.log2(R)),ie=q-Z,oe=[];for(let _e=0;_e<Math.abs(ie);_e++)oe.push(ie>0?0:1);for(let _e=0;_e<Math.min(q,Z);_e++)oe.push(0),oe.push(1);let te=O;if(te=Y_(te,k[0].y-D,k[1].y+D,1),te=Y_(te,k[0].x-D,k[1].x+D,0),!te.length)return A;const ue=[];for(oe.length?ue.push({polygons:te,bounds:k,depth:0}):F(te,k);ue.length;){const _e=ue.pop(),Re=_e.depth,Ue=oe[Re],Le=_e.bounds[0],Fe=_e.bounds[1],tt=Ue===0?Le.x:Le.y,Ne=Ue===0?Fe.x:Fe.y,et=P?P(Ue,tt,Ne):.5*(tt+Ne),lt=Y_(_e.polygons,tt-D,et+D,Ue),ct=Y_(_e.polygons,et-D,Ne+D,Ue);if(lt.length){const xt=[Le,new je(Ue===0?et:Fe.x,Ue===1?et:Fe.y)];oe.length>Re+1?ue.push({polygons:lt,bounds:xt,depth:Re+1}):F(lt,xt)}if(ct.length){const xt=[new je(Ue===0?et:Le.x,Ue===1?et:Le.y),Fe];oe.length>Re+1?ue.push({polygons:ct,bounds:xt,depth:Re+1}):F(ct,xt)}}return A}(u,o,Math.ceil((f-v)/11.25),Math.ceil((y-E)/11.25),1,(O,k,w)=>{if(O===0)return .5*(k+w);{const R=Ve((l.y+k/Tn)/h);return(Te(.5*(Ve((l.y+w/Tn)/h)+R))*h-l.y)*Tn}})}function OH(u,o,l,h,v,f){const y=Math.pow(2,h.z-v.z);for(let E=0;E<l;E++){let O=u.int16[2*(E+o)+0],k=u.int16[2*(E+o)+1];O=(O+v.x*Tn)*y-h.x*Tn,k=(k+v.y*Tn)*y-h.y*Tn,f.push(new je(O,k))}}let OO,AO;function hv(u,o){return u.x*o.x+u.y*o.y}function DO(u,o){if(u.length===1){let l=0;const h=o[l++];let v;for(;!v||h.equals(v);)if(v=o[l++],!v)return 1/0;for(;l<o.length;l++){const f=o[l],y=u[0],E=v.sub(h),O=f.sub(h),k=y.sub(h),w=hv(E,E),R=hv(E,O),D=hv(O,O),P=hv(k,E),A=hv(k,O),F=w*D-R*R,q=(D*P-R*A)/F,Z=(w*A-R*P)/F,ie=h.z*(1-q-Z)+v.z*q+f.z*Z;if(isFinite(ie))return ie}return 1/0}{let l=1/0;for(const h of o)l=Math.min(l,h.z);return l}}function $O(u,o,l,h,v,f,y,E){const O=y*v.getElevationAt(u,o,!0,!0),k=f[0]!==0,w=k?f[1]===0?y*(f[0]/7-450):y*function(R,D,P){const A=Math.floor(D[0]/8),F=Math.floor(D[1]/8),q=10*(D[0]-8*A),Z=10*(D[1]-8*F),ie=R.getElevationAt(A,F,!0,!0),oe=R.getMeterToDEM(P),te=Math.floor(.5*(q*oe-1)),ue=Math.floor(.5*(Z*oe-1)),_e=R.tileCoordToPixel(A,F),Re=2*te+1,Ue=2*ue+1,Le=function(ct,xt,Pt,$t,Tt){return[ct.getElevationAtPixel(xt,Pt,!0),ct.getElevationAtPixel(xt+Tt,Pt,!0),ct.getElevationAtPixel(xt,Pt+Tt,!0),ct.getElevationAtPixel(xt+$t,Pt+Tt,!0)]}(R,_e.x-te,_e.y-ue,Re,Ue),Fe=Math.abs(Le[0]-Le[1]),tt=Math.abs(Le[2]-Le[3]),Ne=Math.abs(Le[0]-Le[2])+Math.abs(Le[1]-Le[3]),et=Math.min(.25,.5*oe*(Fe+tt)/Re),lt=Math.min(.25,.5*oe*Ne/Ue);return ie+Math.max(et*q,lt*Z)}(v,f,E):O;return{base:O+(l===0?-1:l),top:k?Math.max(w+h,O+l+2):O+h}}Fn(tx,"FillExtrusionBucket",{omit:["layers","features"]}),Fn(xO,"PartData"),Fn(_O,"FootprintSegment"),Fn(bO,"BorderCentroidData"),Fn(SO,"GroundEffect");const AH=Qr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),DH=Qr([{name:"a_z_offset",components:1,type:"Float32"}],4),{members:$H}=AH,kH=Qr([{name:"a_packed",components:4,type:"Float32"}]),{members:zH}=kH,LH=Qr([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:NH}=LH;class kO{constructor(o,l){this.width=o,this.height=l,this.nextRow=0,this.image=new Wu({width:o,height:l}),this.positions={},this.uploaded=!1}getDash(o,l){const h=this.getKey(o,l);return this.positions[h]}trim(){const o=this.width,l=this.height=kn(this.nextRow);this.image.resize({width:o,height:l})}getKey(o,l){return o.join(",")+l}getDashRanges(o,l,h){const v=[];let f=o.length%2==1?-o[o.length-1]*h:0,y=o[0]*h,E=!0;v.push({left:f,right:y,isDash:E,zeroLength:o[0]===0});let O=o[0];for(let k=1;k<o.length;k++){E=!E;const w=o[k];f=O*h,O+=w,y=O*h,v.push({left:f,right:y,isDash:E,zeroLength:w===0})}return v}addRoundDash(o,l,h){const v=l/2;for(let f=-h;f<=h;f++){const y=this.width*(this.nextRow+h+f);let E=0,O=o[E];for(let k=0;k<this.width;k++){k/O.right>1&&(O=o[++E]);const w=Math.abs(k-O.left),R=Math.abs(k-O.right),D=Math.min(w,R);let P;const A=f/h*(v+1);if(O.isDash){const F=v-Math.abs(A);P=Math.sqrt(D*D+F*F)}else P=v-Math.sqrt(D*D+A*A);this.image.data[y+k]=Math.max(0,Math.min(255,P+128))}}}addRegularDash(o,l){for(let O=o.length-1;O>=0;--O){const k=o[O],w=o[O+1];k.zeroLength?o.splice(O,1):w&&w.isDash===k.isDash&&(w.left=k.left,o.splice(O,1))}const h=o[0],v=o[o.length-1];h.isDash===v.isDash&&(h.left=v.left-this.width,v.right=h.right+this.width);const f=this.width*this.nextRow;let y=0,E=o[y];for(let O=0;O<this.width;O++){O/E.right>1&&(E=o[++y]);const k=Math.abs(O-E.left),w=Math.abs(O-E.right),R=Math.min(k,w);this.image.data[f+O]=Math.max(0,Math.min(255,(E.isDash?R:-R)+l+128))}}addDash(o,l){const h=this.getKey(o,l);if(this.positions[h])return this.positions[h];const v=l==="round",f=v?7:0,y=2*f+1;if(this.nextRow+y>this.height)return Xt("LineAtlas out of space"),null;o.length===0&&o.push(1);let E=0;for(let w=0;w<o.length;w++)o[w]<0&&(Xt("Negative value is found in line dasharray, replacing values with 0"),o[w]=0),E+=o[w];if(E!==0){const w=this.width/E,R=this.getDashRanges(o,this.width,w);v?this.addRoundDash(R,w,f):this.addRegularDash(R,l==="square"?.5*w:0)}const O=this.nextRow+f;this.nextRow+=y;const k={tl:[O,f],br:[E,0]};return this.positions[h]=k,k}}Fn(kO,"LineAtlas");const FH=op.VectorTileFeature.types,BH=Math.cos(Math.PI/180*37.5),jH=Math.cos(Math.PI/180*5);class iC{constructor(o){this.evaluationGlobals={zoom:0,lineProgress:void 0},this.zoom=o.zoom,this.evaluationGlobals.zoom=this.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.fqid),this.index=o.index,this.projection=o.projection,this.hasPattern=!1,this.hasZOffset=!1,this.hasCrossSlope=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new dh,this.layoutVertexArray2=new _l,this.patternVertexArray=new ac,this.indexArray=new ji,this.programConfigurations=new Ks(o.layers,{zoom:o.zoom,lut:o.lut}),this.segments=new io,this.maxLineLength=0,this.zOffsetVertexArray=new Fu,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.tessellationStep=o.tessellationStep?o.tessellationStep:Tn/64}updateFootprints(o,l){}populate(o,l,h,v){this.hasPattern=GS("line",this.layers,l);const f=this.layers[0].layout.get("line-sort-key");this.hasZOffset=!this.layers[0].isDraped();const y=this.layers[0].layout.get("line-elevation-reference");this.hasZOffset&&y==="none"&&Xt(`line-elevation-reference: ground is used for the layer ${this.layerIds[0]} because non-zero line-z-offset value was found.`);const E=this.layers[0].layout.get("line-cross-slope");this.hasCrossSlope=this.hasZOffset&&E!==void 0;const O=[];for(const{feature:D,id:P,index:A,sourceLayerIndex:F}of o){const q=this.layers[0]._featureFilter.needGeometry,Z=Qt(D,q);if(!this.layers[0]._featureFilter.filter(new Zi(this.zoom),Z,h))continue;const ie=f?f.evaluate(Z,{},h):void 0,oe={id:P,properties:D.properties,type:D.type,sourceLayerIndex:F,index:A,geometry:q?Z.geometry:Et(D,h,v),patterns:{},sortKey:ie};O.push(oe)}f&&O.sort((D,P)=>D.sortKey-P.sortKey);const{lineAtlas:k,featureIndex:w}=l,R=this.addConstantDashes(k);for(const D of O){const{geometry:P,index:A,sourceLayerIndex:F}=D;if(R&&this.addFeatureDashes(D,k),this.hasPattern){const q=qS("line",this.layers,D,this.zoom,l);this.patternFeatures.push(q)}else this.addFeature(D,P,A,h,k.positions,l.availableImages,l.brightness);w.insert(o[A].feature,P,A,F,this.index)}}addConstantDashes(o){let l=!1;for(const h of this.layers){const v=h.paint.get("line-dasharray").value,f=h.layout.get("line-cap").value;if(v.kind!=="constant"||f.kind!=="constant")l=!0;else{const y=f.value,E=v.value;if(!E)continue;o.addDash(E,y)}}return l}addFeatureDashes(o,l){const h=this.zoom;for(const v of this.layers){const f=v.paint.get("line-dasharray").value,y=v.layout.get("line-cap").value;if(f.kind==="constant"&&y.kind==="constant")continue;let E,O;if(f.kind==="constant"){if(E=f.value,!E)continue}else E=f.evaluate({zoom:h},o);O=y.kind==="constant"?y.value:y.evaluate({zoom:h},o),l.addDash(E,O),o.patterns[v.id]=l.getKey(E,O)}}update(o,l,h,v,f){const y=Object.keys(o).length!==0;y&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(o,l,y?this.stateDependentLayers:this.layers,h,v,f)}addFeatures(o,l,h,v,f,y){for(const E of this.patternFeatures)this.addFeature(E,E.geometry,E.index,l,h,v,y)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,zH)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=o.createVertexBuffer(this.patternVertexArray,NH)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=o.createVertexBuffer(this.zOffsetVertexArray,DH.members,!0)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,$H),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&o.properties.hasOwnProperty("mapbox_clip_start")&&o.properties.hasOwnProperty("mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,l,h,v,f,y,E){const O=this.layers[0].layout,k=O.get("line-join").evaluate(o,{}),w=O.get("line-cap").evaluate(o,{}),R=O.get("line-miter-limit"),D=O.get("line-round-limit");this.lineClips=this.lineFeatureClips(o),this.lineFeature=o,this.zOffsetValue=O.get("line-z-offset").value;for(const P of l)this.addLine(P,o,v,k,w,R,D);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,h,f,y,v,E)}addLine(o,l,h,v,f,y,E){this.distance=0,this.prevDistance=0,this.scaledDistance=0,this.totalDistance=0,this.totalFeatureLength=0,this.lineSoFar=0,this.currentVertex=void 0;const O=v==="none";if(this.patternJoinNone=this.hasPattern&&O,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[],this.lineClips){this.lineClipsArray.push(this.lineClips);for(let oe=0;oe<o.length-1;oe++)this.totalDistance+=o[oe].dist(o[oe+1]);this.totalFeatureLength=this.totalDistance/(this.lineClips.end-this.lineClips.start),this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const k=FH[l.type]==="Polygon";let w=o.length;for(;w>=2&&o[w-1].equals(o[w-2]);)w--;let R=0;for(;R<w-1&&o[R].equals(o[R+1]);)R++;if(w<(k?3:2))return;v==="bevel"&&(y=1.05);const D=this.segments.prepareSegment(10*w,this.layoutVertexArray,this.indexArray);let P,A,F,q,Z,ie;this.e1=this.e2=-1,k&&(P=o[w-2],Z=o[R].sub(P)._unit()._perp());for(let oe=R;oe<w;oe++){if(F=oe===w-1?k?o[R+1]:void 0:o[oe+1],F&&o[oe].equals(F))continue;Z&&(q=Z),P&&(A=P),P=o[oe],ie=this.hasZOffset?this.evaluateElevationValue(A?A.dist(P):0):null,Z=F?F.sub(P)._unit()._perp():q,q=q||Z;const te=A&&F;let ue=te?v:k||O?"butt":f;const _e=q.x*Z.x+q.y*Z.y;if(O){const lt=function(ct){if(ct.patternJoinNone){const xt=ct.segmentPoints.length/2,Pt=ct.lineSoFar-ct.segmentStart;for(let $t=0;$t<xt;++$t){const Tt=ct.segmentPoints[2*$t+1],Ht=Math.round(ct.segmentPoints[2*$t])+.5+.25*Tt;ct.patternVertexArray.emplaceBack(Ht,Pt,ct.segmentStart),ct.patternVertexArray.emplaceBack(Ht,Pt,ct.segmentStart)}ct.segmentPoints.length=0}ct.e1=ct.e2=-1};if(te&&_e<jH){this.updateDistance(A,P),this.addCurrentVertex(P,q,1,1,D,ie),lt(this),this.addCurrentVertex(P,Z,-1,-1,D,ie);continue}if(A){if(!F){this.updateDistance(A,P),this.addCurrentVertex(P,q,1,1,D,ie),lt(this);continue}ue="miter"}}let Re=q.add(Z);Re.x===0&&Re.y===0||Re._unit();const Ue=Re.x*Z.x+Re.y*Z.y,Le=Ue!==0?1/Ue:1/0,Fe=2*Math.sqrt(2-2*Ue),tt=Ue<BH&&A&&F,Ne=q.x*Z.y-q.y*Z.x>0,et=this.overscaling<=16?15*Tn/(512*this.overscaling):0;if(te&&ue==="round"){if(Le<E)ue="miter";else if(Le<=2){const lt=oC(P,-10,Tn+10);ue=this.hasZOffset&&(lt||this.hasCrossSlope)?"miter":"fakeround"}}if(ue==="miter"&&Le>y&&(ue="bevel"),ue==="bevel"&&(Le>2&&(ue="flipbevel"),Le<y&&(ue="miter")),A&&!(ue==="miter"&&tt)&&this.updateDistance(A,P),ue==="miter")if(tt){const lt=P.dist(A);if(lt>2*et){const xt=P.sub(P.sub(A)._mult(et/lt)._round());this.updateDistance(A,xt),this.addCurrentVertex(xt,q,0,0,D,ie),A=xt}this.updateDistance(A,P),Re._mult(Le),this.addCurrentVertex(P,Re,0,0,D,ie);const ct=P.dist(F);if(ct>2*et){const xt=P.add(F.sub(P)._mult(et/ct)._round());this.updateDistance(P,xt),this.addCurrentVertex(xt,Z,0,0,D,ie),P=xt}}else Re._mult(Le),this.addCurrentVertex(P,Re,0,0,D,ie);else if(ue==="flipbevel"){if(Le>100)Re=Z.mult(-1);else{const lt=Le*q.add(Z).mag()/q.sub(Z).mag();Re._perp()._mult(lt*(Ne?-1:1))}this.addCurrentVertex(P,Re,0,0,D,ie),this.addCurrentVertex(P,Re.mult(-1),0,0,D,ie)}else if(ue==="bevel"||ue==="fakeround"){ie!=null&&A&&this.addCurrentVertex(P,q,-1,-1,D,ie);const lt=P.dist(A)<=2*et&&ue!=="bevel",ct=Re.mult(Ne?1:-1);ct._mult(Le);const xt=Z.mult(Ne?-1:1),Pt=q.mult(Ne?-1:1),$t=this.evaluateElevationValue(this.distance);if(ie==null&&(this.addHalfVertex(P,ct.x,ct.y,!1,!Ne,0,D,$t),lt||this.addHalfVertex(P,ct.x+2*Pt.x,ct.y+2*Pt.y,!1,Ne,0,D,$t)),ue==="fakeround"){const Tt=Math.round(180*Fe/Math.PI/20);this.addHalfVertex(P,Pt.x,Pt.y,!1,Ne,0,D,$t);for(let Ht=0;Ht<Tt;Ht++){let sn=Ht/Tt;if(sn!==.5){const Nn=sn-.5;sn+=sn*Nn*(sn-1)*((1.0904+_e*(_e*(3.55645-1.43519*_e)-3.2452))*Nn*Nn+(.848013+_e*(.215638*_e-1.06021)))}const Bt=xt.sub(Pt)._mult(sn)._add(Pt)._unit();this.addHalfVertex(P,Bt.x,Bt.y,!1,Ne,0,D,$t)}this.addHalfVertex(P,xt.x,xt.y,!1,Ne,0,D,$t)}lt||ie!=null||this.addHalfVertex(P,ct.x+2*xt.x,ct.y+2*xt.y,!1,Ne,0,D,$t),ie!=null&&F&&this.addCurrentVertex(P,Z,1,1,D,ie)}else ue==="butt"?this.addCurrentVertex(P,Re,0,0,D,ie):ue==="square"?(A||this.addCurrentVertex(P,Re,-1,-1,D,ie),this.addCurrentVertex(P,Re,0,0,D,ie),A&&this.addCurrentVertex(P,Re,1,1,D,ie)):ue==="round"&&(A&&(this.addCurrentVertex(P,q,0,0,D,ie),this.addCurrentVertex(P,q,1,1,D,ie,!0)),F&&(this.addCurrentVertex(P,Z,-1,-1,D,ie,!0),this.addCurrentVertex(P,Z,0,0,D,ie)))}}addVerticesTo(o,l,h,v,f,y,E,O,k,w){const R=(l.w-o.w)/this.tessellationStep|0;let D=0;const P=this.scaledDistance;if(R>1){this.lineSoFar=o.w;const F=(l.x-o.x)/R,q=(l.y-o.y)/R,Z=(l.z-o.z)/R,ie=(l.w-o.w)/R;for(let oe=1;oe<R;++oe){o.x+=F,o.y+=q,o.z+=Z,this.lineSoFar+=ie,D+=ie;const te=this.evaluateElevationValue(this.prevDistance+D);this.scaledDistance=(this.prevDistance+D)/this.totalDistance,this.addHalfVertex(o,h,v,w,!1,E,k,te),this.addHalfVertex(o,f,y,w,!0,-O,k,te)}}this.lineSoFar=l.w,this.scaledDistance=P;const A=this.evaluateElevationValue(this.distance);this.addHalfVertex(l,h,v,w,!1,E,k,A),this.addHalfVertex(l,f,y,w,!0,-O,k,A)}evaluateElevationValue(o){return this.hasZOffset?this.zOffsetValue.kind==="constant"?this.zOffsetValue.value:(this.evaluationGlobals.lineProgress=0,this.lineClips?this.evaluationGlobals.lineProgress=Math.min(1,(this.totalFeatureLength*this.lineClips.start+o)/this.totalFeatureLength):Xt(`line-z-offset evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`),this.zOffsetValue.evaluate(this.evaluationGlobals,this.lineFeature)||0):void 0}addCurrentVertex(o,l,h,v,f,y,E=!1){const O=l.x+l.y*h,k=l.y-l.x*h,w=l.y*v-l.x,R=-l.y-l.x*v;if(y!=null){const P=Tn+10,A=y,F=new sO(o.x,o.y,A,this.lineSoFar),q=oC(o,-10,P),Z=this.lineSoFar,ie=this.distance;if(this.currentVertex)if(q){const oe=this.currentVertexIsOutside,te=this.currentVertex,ue=new sO(o.x,o.y,A,this.lineSoFar);if(cO(te,ue,-10,P),!oC(ue,-10,P)){if(oe){this.e1=this.e2=-1,this.distance-=te.dist(F),this.lineSoFar=te.w;const _e=this.evaluateElevationValue(te.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(te,O,k,E,!1,h,f,_e),this.addHalfVertex(te,w,R,E,!0,-v,f,_e),this.prevDistance=this.distance}this.distance=this.prevDistance+te.dist(ue),this.scaledDistance=this.distance/this.totalDistance,this.addVerticesTo(te,ue,O,k,w,R,h,v,f,E),this.distance=ie,this.scaledDistance=this.distance/this.totalDistance}}else{const oe=this.currentVertex;if(this.currentVertexIsOutside){cO(oe,F,-10,P),this.e1=this.e2=-1,this.distance-=oe.dist(F),this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=oe.w;const te=this.evaluateElevationValue(oe.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(oe,O,k,E,!1,h,f,te),this.addHalfVertex(oe,w,R,E,!0,-v,f,te),this.prevDistance=this.distance,this.distance=ie,this.scaledDistance=this.distance/this.totalDistance}this.addVerticesTo(oe,F,O,k,w,R,h,v,f,E)}else q||(this.addHalfVertex(o,O,k,E,!1,h,f,y),this.addHalfVertex(o,w,R,E,!0,-v,f,y));this.currentVertex=F,this.currentVertexIsOutside=q,this.lineSoFar=Z}else this.addHalfVertex(o,O,k,E,!1,h,f,y),this.addHalfVertex(o,w,R,E,!0,-v,f,y)}addHalfVertex({x:o,y:l},h,v,f,y,E,O,k){this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),y||this.segmentPoints.push(this.lineSoFar-this.segmentStart,E)),this.layoutVertexArray.emplaceBack((o<<1)+(f?1:0),(l<<1)+(y?1:0),Math.round(63*h)+128,Math.round(63*v)+128,1+(E===0?0:E<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const w=O.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,w),O.primitiveLength++),y?this.e2=w:this.e1=w,k!=null&&this.zOffsetVertexArray.emplaceBack(k)}updateScaledDistance(){this.lineClips?(this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=this.totalFeatureLength*this.lineClips.start+this.distance):this.lineSoFar=this.distance}updateDistance(o,l){this.prevDistance=this.distance,this.distance+=o.dist(l),this.updateScaledDistance()}}function oC(u,o,l){return u.x<o||u.x>l||u.y<o||u.y>l}let zO,LO;function NO(u,o,l){return o*(Tn/(u.tileSize*Math.pow(2,l-u.tileID.overscaledZ)))}Fn(iC,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const FO=(u,o,l)=>(1-l)*u+l*o;function BO(u,o){return 1/NO(u,1,o.tileZoom)}function jO(u,o,l,h){return u.translatePosMatrix(h||o.tileID.projMatrix,o,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}const VO=u=>{const o=[];HO(u)&&o.push("RENDER_LINE_DASH"),u.paint.get("line-gradient")&&o.push("RENDER_LINE_GRADIENT");const l=u.paint.get("line-trim-offset");l[0]===0&&l[1]===0||o.push("RENDER_LINE_TRIM_OFFSET"),u.paint.get("line-border-width").constantOr(1)!==0&&o.push("RENDER_LINE_BORDER");const h=u.layout.get("line-join").constantOr("miter")==="none",v=!!u.paint.get("line-pattern").constantOr(1);return h&&v&&o.push("LINE_JOIN_NONE"),o};function HO(u){const o=u.paint.get("line-dasharray").value;return o.value||o.kind!=="constant"}let aC;const UO=()=>aC||(aC={layout:zO||(zO=new Ri({"line-cap":new Yn(Ot.layout_line["line-cap"]),"line-join":new Yn(Ot.layout_line["line-join"]),"line-miter-limit":new mn(Ot.layout_line["line-miter-limit"]),"line-round-limit":new mn(Ot.layout_line["line-round-limit"]),"line-sort-key":new Yn(Ot.layout_line["line-sort-key"]),"line-z-offset":new Yn(Ot.layout_line["line-z-offset"]),"line-elevation-reference":new mn(Ot.layout_line["line-elevation-reference"]),"line-cross-slope":new mn(Ot.layout_line["line-cross-slope"]),visibility:new mn(Ot.layout_line.visibility)})),paint:LO||(LO=new Ri({"line-opacity":new Yn(Ot.paint_line["line-opacity"]),"line-color":new Yn(Ot.paint_line["line-color"]),"line-translate":new mn(Ot.paint_line["line-translate"]),"line-translate-anchor":new mn(Ot.paint_line["line-translate-anchor"]),"line-width":new Yn(Ot.paint_line["line-width"]),"line-gap-width":new Yn(Ot.paint_line["line-gap-width"]),"line-offset":new Yn(Ot.paint_line["line-offset"]),"line-blur":new Yn(Ot.paint_line["line-blur"]),"line-dasharray":new Yn(Ot.paint_line["line-dasharray"]),"line-pattern":new Yn(Ot.paint_line["line-pattern"]),"line-gradient":new Du(Ot.paint_line["line-gradient"]),"line-trim-offset":new mn(Ot.paint_line["line-trim-offset"]),"line-trim-fade-range":new mn(Ot.paint_line["line-trim-fade-range"]),"line-trim-color":new mn(Ot.paint_line["line-trim-color"]),"line-emissive-strength":new mn(Ot.paint_line["line-emissive-strength"]),"line-border-width":new Yn(Ot.paint_line["line-border-width"]),"line-border-color":new Yn(Ot.paint_line["line-border-color"]),"line-occlusion-opacity":new mn(Ot.paint_line["line-occlusion-opacity"])}))},aC);class VH extends Yn{possiblyEvaluate(o,l){return l=new Zi(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,transition:l.transition}),super.possiblyEvaluate(o,l)}evaluate(o,l,h,v){return l=Dn({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(o,l,h,v)}}let fv;function WO(u,o){return o>0?o+2*u:u}const HH=Qr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),UH=Qr([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),WH=Qr([{name:"a_projected_pos",components:4,type:"Float32"}],4);Qr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const GH=Qr([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),qH=Qr([{name:"a_texb",components:2,type:"Uint16"}]),KH=Qr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),XH=Qr([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);Qr([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const GO=Qr([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ZH=Qr([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Qr([{name:"triangle",components:3,type:"Uint16"}]),Qr([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Qr([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"}]),Qr([{type:"Float32",name:"offsetX"}]),Qr([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var ra=24;const Tl=128;function sC(u,o){const{expression:l}=o;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new Zi(u+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:v}=l;let f=0;for(;f<h.length&&h[f]<=u;)f++;f=Math.max(0,f-1);let y=f;for(;y<h.length&&h[y]<u+1;)y++;y=Math.min(h.length-1,y);const E=h[f],O=h[y];return l.kind==="composite"?{kind:"composite",minZoom:E,maxZoom:O,interpolationType:v}:{kind:"camera",minZoom:E,maxZoom:O,minSize:l.evaluate(new Zi(E)),maxSize:l.evaluate(new Zi(O)),interpolationType:v}}}function nx(u,{uSize:o,uSizeT:l},{lowerSize:h,upperSize:v}){return u.kind==="source"?h/Tl:u.kind==="composite"?Zn(h/Tl,v/Tl,l):o}function ap(u,o,l=1){let h=0,v=0;if(u.kind==="constant")v=u.layoutSize*l;else if(u.kind!=="source"){const{interpolationType:f,minZoom:y,maxZoom:E}=u,O=f?Rt(Xa.interpolationFactor(f,o,y,E),0,1):0;u.kind==="camera"?v=Zn(u.minSize,u.maxSize,O)*l:h=O*l}return{uSizeT:h,uSize:v}}var YH=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Tl,evaluateSizeForFeature:nx,evaluateSizeForZoom:ap,getSizeData:sC});function JH(u,o,l){return u.sections.forEach(h=>{h.text=function(v,f,y){const E=f.layout.get("text-transform").evaluate(y,{});return E==="uppercase"?v=v.toLocaleUpperCase():E==="lowercase"&&(v=v.toLocaleLowerCase()),Ya.applyArabicShaping&&(v=Ya.applyArabicShaping(v)),v}(h.text,o,l)}),u}const pv={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function QH(u){return u==="︶"||u==="﹈"||u==="︸"||u==="﹄"||u==="﹂"||u==="︾"||u==="︼"||u==="︺"||u==="︘"||u==="﹀"||u==="︐"||u==="︓"||u==="︔"||u==="｀"||u==="￣"||u==="︑"||u==="︒"}function eU(u){return u==="︵"||u==="﹇"||u==="︷"||u==="﹃"||u==="﹁"||u==="︽"||u==="︻"||u==="︹"||u==="︗"||u==="︿"}var qO,lC,KO,cC={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function tU(){return qO||(qO=1,cC.read=function(u,o,l,h,v){var f,y,E=8*v-h-1,O=(1<<E)-1,k=O>>1,w=-7,R=l?v-1:0,D=l?-1:1,P=u[o+R];for(R+=D,f=P&(1<<-w)-1,P>>=-w,w+=E;w>0;f=256*f+u[o+R],R+=D,w-=8);for(y=f&(1<<-w)-1,f>>=-w,w+=h;w>0;y=256*y+u[o+R],R+=D,w-=8);if(f===0)f=1-k;else{if(f===O)return y?NaN:1/0*(P?-1:1);y+=Math.pow(2,h),f-=k}return(P?-1:1)*y*Math.pow(2,f-h)},cC.write=function(u,o,l,h,v,f){var y,E,O,k=8*f-v-1,w=(1<<k)-1,R=w>>1,D=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=h?0:f-1,A=h?1:-1,F=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(E=isNaN(o)?1:0,y=w):(y=Math.floor(Math.log(o)/Math.LN2),o*(O=Math.pow(2,-y))<1&&(y--,O*=2),(o+=y+R>=1?D/O:D*Math.pow(2,1-R))*O>=2&&(y++,O/=2),y+R>=w?(E=0,y=w):y+R>=1?(E=(o*O-1)*Math.pow(2,v),y+=R):(E=o*Math.pow(2,R-1)*Math.pow(2,v),y=0));v>=8;u[l+P]=255&E,P+=A,E/=256,v-=8);for(y=y<<v|E,k+=v;k>0;u[l+P]=255&y,P+=A,y/=256,k-=8);u[l+P-A]|=128*F}),cC}function XO(){if(KO)return lC;KO=1,lC=o;var u=tU();function o(te){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(te)?te:new Uint8Array(te||0),this.pos=0,this.type=0,this.length=this.buf.length}o.Varint=0,o.Fixed64=1,o.Bytes=2,o.Fixed32=5;var l=4294967296,h=1/l,v=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function f(te){return te.type===o.Bytes?te.readVarint()+te.pos:te.pos+1}function y(te,ue,_e){return _e?4294967296*ue+(te>>>0):4294967296*(ue>>>0)+(te>>>0)}function E(te,ue,_e){var Re=ue<=16383?1:ue<=2097151?2:ue<=268435455?3:Math.floor(Math.log(ue)/(7*Math.LN2));_e.realloc(Re);for(var Ue=_e.pos-1;Ue>=te;Ue--)_e.buf[Ue+Re]=_e.buf[Ue]}function O(te,ue){for(var _e=0;_e<te.length;_e++)ue.writeVarint(te[_e])}function k(te,ue){for(var _e=0;_e<te.length;_e++)ue.writeSVarint(te[_e])}function w(te,ue){for(var _e=0;_e<te.length;_e++)ue.writeFloat(te[_e])}function R(te,ue){for(var _e=0;_e<te.length;_e++)ue.writeDouble(te[_e])}function D(te,ue){for(var _e=0;_e<te.length;_e++)ue.writeBoolean(te[_e])}function P(te,ue){for(var _e=0;_e<te.length;_e++)ue.writeFixed32(te[_e])}function A(te,ue){for(var _e=0;_e<te.length;_e++)ue.writeSFixed32(te[_e])}function F(te,ue){for(var _e=0;_e<te.length;_e++)ue.writeFixed64(te[_e])}function q(te,ue){for(var _e=0;_e<te.length;_e++)ue.writeSFixed64(te[_e])}function Z(te,ue){return(te[ue]|te[ue+1]<<8|te[ue+2]<<16)+16777216*te[ue+3]}function ie(te,ue,_e){te[_e]=ue,te[_e+1]=ue>>>8,te[_e+2]=ue>>>16,te[_e+3]=ue>>>24}function oe(te,ue){return(te[ue]|te[ue+1]<<8|te[ue+2]<<16)+(te[ue+3]<<24)}return o.prototype={destroy:function(){this.buf=null},readFields:function(te,ue,_e){for(_e=_e||this.length;this.pos<_e;){var Re=this.readVarint(),Ue=Re>>3,Le=this.pos;this.type=7&Re,te(Ue,ue,this),this.pos===Le&&this.skip(Re)}return ue},readMessage:function(te,ue){return this.readFields(te,ue,this.readVarint()+this.pos)},readFixed32:function(){var te=Z(this.buf,this.pos);return this.pos+=4,te},readSFixed32:function(){var te=oe(this.buf,this.pos);return this.pos+=4,te},readFixed64:function(){var te=Z(this.buf,this.pos)+Z(this.buf,this.pos+4)*l;return this.pos+=8,te},readSFixed64:function(){var te=Z(this.buf,this.pos)+oe(this.buf,this.pos+4)*l;return this.pos+=8,te},readFloat:function(){var te=u.read(this.buf,this.pos,!0,23,4);return this.pos+=4,te},readDouble:function(){var te=u.read(this.buf,this.pos,!0,52,8);return this.pos+=8,te},readVarint:function(te){var ue,_e,Re=this.buf;return ue=127&(_e=Re[this.pos++]),_e<128?ue:(ue|=(127&(_e=Re[this.pos++]))<<7,_e<128?ue:(ue|=(127&(_e=Re[this.pos++]))<<14,_e<128?ue:(ue|=(127&(_e=Re[this.pos++]))<<21,_e<128?ue:function(Ue,Le,Fe){var tt,Ne,et=Fe.buf;if(tt=(112&(Ne=et[Fe.pos++]))>>4,Ne<128||(tt|=(127&(Ne=et[Fe.pos++]))<<3,Ne<128)||(tt|=(127&(Ne=et[Fe.pos++]))<<10,Ne<128)||(tt|=(127&(Ne=et[Fe.pos++]))<<17,Ne<128)||(tt|=(127&(Ne=et[Fe.pos++]))<<24,Ne<128)||(tt|=(1&(Ne=et[Fe.pos++]))<<31,Ne<128))return y(Ue,tt,Le);throw new Error("Expected varint not more than 10 bytes")}(ue|=(15&(_e=Re[this.pos]))<<28,te,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var te=this.readVarint();return te%2==1?(te+1)/-2:te/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var te=this.readVarint()+this.pos,ue=this.pos;return this.pos=te,te-ue>=12&&v?function(_e,Re,Ue){return v.decode(_e.subarray(Re,Ue))}(this.buf,ue,te):function(_e,Re,Ue){for(var Le="",Fe=Re;Fe<Ue;){var tt,Ne,et,lt=_e[Fe],ct=null,xt=lt>239?4:lt>223?3:lt>191?2:1;if(Fe+xt>Ue)break;xt===1?lt<128&&(ct=lt):xt===2?(192&(tt=_e[Fe+1]))==128&&(ct=(31&lt)<<6|63&tt)<=127&&(ct=null):xt===3?(Ne=_e[Fe+2],(192&(tt=_e[Fe+1]))==128&&(192&Ne)==128&&((ct=(15&lt)<<12|(63&tt)<<6|63&Ne)<=2047||ct>=55296&&ct<=57343)&&(ct=null)):xt===4&&(Ne=_e[Fe+2],et=_e[Fe+3],(192&(tt=_e[Fe+1]))==128&&(192&Ne)==128&&(192&et)==128&&((ct=(15&lt)<<18|(63&tt)<<12|(63&Ne)<<6|63&et)<=65535||ct>=1114112)&&(ct=null)),ct===null?(ct=65533,xt=1):ct>65535&&(ct-=65536,Le+=String.fromCharCode(ct>>>10&1023|55296),ct=56320|1023&ct),Le+=String.fromCharCode(ct),Fe+=xt}return Le}(this.buf,ue,te)},readBytes:function(){var te=this.readVarint()+this.pos,ue=this.buf.subarray(this.pos,te);return this.pos=te,ue},readPackedVarint:function(te,ue){if(this.type!==o.Bytes)return te.push(this.readVarint(ue));var _e=f(this);for(te=te||[];this.pos<_e;)te.push(this.readVarint(ue));return te},readPackedSVarint:function(te){if(this.type!==o.Bytes)return te.push(this.readSVarint());var ue=f(this);for(te=te||[];this.pos<ue;)te.push(this.readSVarint());return te},readPackedBoolean:function(te){if(this.type!==o.Bytes)return te.push(this.readBoolean());var ue=f(this);for(te=te||[];this.pos<ue;)te.push(this.readBoolean());return te},readPackedFloat:function(te){if(this.type!==o.Bytes)return te.push(this.readFloat());var ue=f(this);for(te=te||[];this.pos<ue;)te.push(this.readFloat());return te},readPackedDouble:function(te){if(this.type!==o.Bytes)return te.push(this.readDouble());var ue=f(this);for(te=te||[];this.pos<ue;)te.push(this.readDouble());return te},readPackedFixed32:function(te){if(this.type!==o.Bytes)return te.push(this.readFixed32());var ue=f(this);for(te=te||[];this.pos<ue;)te.push(this.readFixed32());return te},readPackedSFixed32:function(te){if(this.type!==o.Bytes)return te.push(this.readSFixed32());var ue=f(this);for(te=te||[];this.pos<ue;)te.push(this.readSFixed32());return te},readPackedFixed64:function(te){if(this.type!==o.Bytes)return te.push(this.readFixed64());var ue=f(this);for(te=te||[];this.pos<ue;)te.push(this.readFixed64());return te},readPackedSFixed64:function(te){if(this.type!==o.Bytes)return te.push(this.readSFixed64());var ue=f(this);for(te=te||[];this.pos<ue;)te.push(this.readSFixed64());return te},skip:function(te){var ue=7&te;if(ue===o.Varint)for(;this.buf[this.pos++]>127;);else if(ue===o.Bytes)this.pos=this.readVarint()+this.pos;else if(ue===o.Fixed32)this.pos+=4;else{if(ue!==o.Fixed64)throw new Error("Unimplemented type: "+ue);this.pos+=8}},writeTag:function(te,ue){this.writeVarint(te<<3|ue)},realloc:function(te){for(var ue=this.length||16;ue<this.pos+te;)ue*=2;if(ue!==this.length){var _e=new Uint8Array(ue);_e.set(this.buf),this.buf=_e,this.length=ue}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(te){this.realloc(4),ie(this.buf,te,this.pos),this.pos+=4},writeSFixed32:function(te){this.realloc(4),ie(this.buf,te,this.pos),this.pos+=4},writeFixed64:function(te){this.realloc(8),ie(this.buf,-1&te,this.pos),ie(this.buf,Math.floor(te*h),this.pos+4),this.pos+=8},writeSFixed64:function(te){this.realloc(8),ie(this.buf,-1&te,this.pos),ie(this.buf,Math.floor(te*h),this.pos+4),this.pos+=8},writeVarint:function(te){(te=+te||0)>268435455||te<0?function(ue,_e){var Re,Ue;if(ue>=0?(Re=ue%4294967296|0,Ue=ue/4294967296|0):(Ue=~(-ue/4294967296),4294967295^(Re=~(-ue%4294967296))?Re=Re+1|0:(Re=0,Ue=Ue+1|0)),ue>=18446744073709552e3||ue<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");_e.realloc(10),function(Le,Fe,tt){tt.buf[tt.pos++]=127&Le|128,Le>>>=7,tt.buf[tt.pos++]=127&Le|128,Le>>>=7,tt.buf[tt.pos++]=127&Le|128,Le>>>=7,tt.buf[tt.pos++]=127&Le|128,tt.buf[tt.pos]=127&(Le>>>=7)}(Re,0,_e),function(Le,Fe){var tt=(7&Le)<<4;Fe.buf[Fe.pos++]|=tt|((Le>>>=3)?128:0),Le&&(Fe.buf[Fe.pos++]=127&Le|((Le>>>=7)?128:0),Le&&(Fe.buf[Fe.pos++]=127&Le|((Le>>>=7)?128:0),Le&&(Fe.buf[Fe.pos++]=127&Le|((Le>>>=7)?128:0),Le&&(Fe.buf[Fe.pos++]=127&Le|((Le>>>=7)?128:0),Le&&(Fe.buf[Fe.pos++]=127&Le)))))}(Ue,_e)}(te,this):(this.realloc(4),this.buf[this.pos++]=127&te|(te>127?128:0),te<=127||(this.buf[this.pos++]=127&(te>>>=7)|(te>127?128:0),te<=127||(this.buf[this.pos++]=127&(te>>>=7)|(te>127?128:0),te<=127||(this.buf[this.pos++]=te>>>7&127))))},writeSVarint:function(te){this.writeVarint(te<0?2*-te-1:2*te)},writeBoolean:function(te){this.writeVarint(!!te)},writeString:function(te){te=String(te),this.realloc(4*te.length),this.pos++;var ue=this.pos;this.pos=function(Re,Ue,Le){for(var Fe,tt,Ne=0;Ne<Ue.length;Ne++){if((Fe=Ue.charCodeAt(Ne))>55295&&Fe<57344){if(!tt){Fe>56319||Ne+1===Ue.length?(Re[Le++]=239,Re[Le++]=191,Re[Le++]=189):tt=Fe;continue}if(Fe<56320){Re[Le++]=239,Re[Le++]=191,Re[Le++]=189,tt=Fe;continue}Fe=tt-55296<<10|Fe-56320|65536,tt=null}else tt&&(Re[Le++]=239,Re[Le++]=191,Re[Le++]=189,tt=null);Fe<128?Re[Le++]=Fe:(Fe<2048?Re[Le++]=Fe>>6|192:(Fe<65536?Re[Le++]=Fe>>12|224:(Re[Le++]=Fe>>18|240,Re[Le++]=Fe>>12&63|128),Re[Le++]=Fe>>6&63|128),Re[Le++]=63&Fe|128)}return Le}(this.buf,te,this.pos);var _e=this.pos-ue;_e>=128&&E(ue,_e,this),this.pos=ue-1,this.writeVarint(_e),this.pos+=_e},writeFloat:function(te){this.realloc(4),u.write(this.buf,te,this.pos,!0,23,4),this.pos+=4},writeDouble:function(te){this.realloc(8),u.write(this.buf,te,this.pos,!0,52,8),this.pos+=8},writeBytes:function(te){var ue=te.length;this.writeVarint(ue),this.realloc(ue);for(var _e=0;_e<ue;_e++)this.buf[this.pos++]=te[_e]},writeRawMessage:function(te,ue){this.pos++;var _e=this.pos;te(ue,this);var Re=this.pos-_e;Re>=128&&E(_e,Re,this),this.pos=_e-1,this.writeVarint(Re),this.pos+=Re},writeMessage:function(te,ue,_e){this.writeTag(te,o.Bytes),this.writeRawMessage(ue,_e)},writePackedVarint:function(te,ue){ue.length&&this.writeMessage(te,O,ue)},writePackedSVarint:function(te,ue){ue.length&&this.writeMessage(te,k,ue)},writePackedBoolean:function(te,ue){ue.length&&this.writeMessage(te,D,ue)},writePackedFloat:function(te,ue){ue.length&&this.writeMessage(te,w,ue)},writePackedDouble:function(te,ue){ue.length&&this.writeMessage(te,R,ue)},writePackedFixed32:function(te,ue){ue.length&&this.writeMessage(te,P,ue)},writePackedSFixed32:function(te,ue){ue.length&&this.writeMessage(te,A,ue)},writePackedFixed64:function(te,ue){ue.length&&this.writeMessage(te,F,ue)},writePackedSFixed64:function(te,ue){ue.length&&this.writeMessage(te,q,ue)},writeBytesField:function(te,ue){this.writeTag(te,o.Bytes),this.writeBytes(ue)},writeFixed32Field:function(te,ue){this.writeTag(te,o.Fixed32),this.writeFixed32(ue)},writeSFixed32Field:function(te,ue){this.writeTag(te,o.Fixed32),this.writeSFixed32(ue)},writeFixed64Field:function(te,ue){this.writeTag(te,o.Fixed64),this.writeFixed64(ue)},writeSFixed64Field:function(te,ue){this.writeTag(te,o.Fixed64),this.writeSFixed64(ue)},writeVarintField:function(te,ue){this.writeTag(te,o.Varint),this.writeVarint(ue)},writeSVarintField:function(te,ue){this.writeTag(te,o.Varint),this.writeSVarint(ue)},writeStringField:function(te,ue){this.writeTag(te,o.Bytes),this.writeString(ue)},writeFloatField:function(te,ue){this.writeTag(te,o.Fixed32),this.writeFloat(ue)},writeDoubleField:function(te,ue){this.writeTag(te,o.Fixed64),this.writeDouble(ue)},writeBooleanField:function(te,ue){this.writeVarintField(te,!!ue)}},lC}var rx=x(XO());const uC=3;function nU(u,o,l){o.glyphs=[],u===1&&l.readMessage(rU,o)}function rU(u,o,l){if(u===3){const{id:h,bitmap:v,width:f,height:y,left:E,top:O,advance:k}=l.readMessage(iU,{});o.glyphs.push({id:h,bitmap:new Wu({width:f+2*uC,height:y+2*uC},v),metrics:{width:f,height:y,left:E,top:O,advance:k}})}else u===4?o.ascender=l.readSVarint():u===5&&(o.descender=l.readSVarint())}function iU(u,o,l){u===1?o.id=l.readVarint():u===2?o.bitmap=l.readBytes():u===3?o.width=l.readVarint():u===4?o.height=l.readVarint():u===5?o.left=l.readSVarint():u===6?o.top=l.readSVarint():u===7&&(o.advance=l.readVarint())}const ZO=uC,Ms={horizontal:1,vertical:2,horizontalOnly:3};class mv{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(o,l){const h=new mv;return h.scale=o||1,h.fontStack=l,h}static forImage(o){const l=new mv;return l.imageName=o,l}}class sp{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,l){const h=new sp;for(let v=0;v<o.sections.length;v++){const f=o.sections[v];f.image?h.addImageSection(f):h.addTextSection(f,l)}return h}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSections(){return this.sections}getSectionIndex(o){return this.sectionIndex[o]}getCodePoint(o){return this.text.codePointAt(o)}verticalizePunctuation(o){this.text=function(l,h){let v="";for(let f=0;f<l.length;f++){const y=l.charCodeAt(f+1)||null,E=l.charCodeAt(f-1)||null;v+=!h&&(y&&Og(y)&&!pv[l[f+1]]||E&&Og(E)&&!pv[l[f-1]])||!pv[l[f]]?l[f]:pv[l[f]]}return v}(this.text,o)}trim(){let o=0;for(let h=0;h<this.text.length&&ix[this.text.charCodeAt(h)];h++)o++;let l=this.text.length;for(let h=this.text.length-1;h>=0&&h>=o&&ix[this.text.charCodeAt(h)];h--)l--;this.text=this.text.substring(o,l),this.sectionIndex=this.sectionIndex.slice(o,l)}substring(o,l){const h=new sp;return h.text=this.text.substring(o,l),h.sectionIndex=this.sectionIndex.slice(o,l),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,l)=>Math.max(o,this.sections[l].scale),0)}addTextSection(o,l){this.text+=o.text,this.sections.push(mv.forText(o.scale,o.fontStack||l));const h=this.sections.length-1;for(let v=0;v<o.text.length;++v)this.sectionIndex.push(h)}addImageSection(o){const l=o.image?o.image.namePrimary:"";if(l.length===0)return void Xt("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCodePoint(h),this.sections.push(mv.forImage(l)),this.sectionIndex.push(this.sections.length-1)):Xt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function dC(u,o,l,h,v,f,y,E,O,k,w,R,D,P,A){const F=sp.fromFeature(u,v);R===Ms.vertical&&F.verticalizePunctuation(D);let q=[];const Z=function(_e,Re,Ue,Le,Fe,tt){if(!_e)return[];const Ne=[],et=function(Pt,$t,Tt,Ht,sn,Bt){let Nn=0;for(let En=0;En<Pt.length();En++){const pn=Pt.getSection(En);Nn+=YO(Pt.getCodePoint(En),pn,Ht,sn,$t,Bt)}return Nn/Math.max(1,Math.ceil(Nn/Tt))}(_e,Re,Ue,Le,Fe,tt),lt=_e.text.indexOf("​")>=0;let ct=0;for(let Pt=0;Pt<_e.length();Pt++){const $t=_e.getSection(Pt),Tt=_e.getCodePoint(Pt);if(ix[Tt]||(ct+=YO(Tt,$t,Le,Fe,Re,tt)),Pt<_e.length()-1){const Ht=!((xt=Tt)<11904||!(Kn["Bopomofo Extended"](xt)||Kn.Bopomofo(xt)||Kn["CJK Compatibility Forms"](xt)||Kn["CJK Compatibility Ideographs"](xt)||Kn["CJK Compatibility"](xt)||Kn["CJK Radicals Supplement"](xt)||Kn["CJK Strokes"](xt)||Kn["CJK Symbols and Punctuation"](xt)||Kn["CJK Unified Ideographs Extension A"](xt)||Kn["CJK Unified Ideographs"](xt)||Kn["Enclosed CJK Letters and Months"](xt)||Kn["Halfwidth and Fullwidth Forms"](xt)||Kn.Hiragana(xt)||Kn["Ideographic Description Characters"](xt)||Kn["Kangxi Radicals"](xt)||Kn["Katakana Phonetic Extensions"](xt)||Kn.Katakana(xt)||Kn["Vertical Forms"](xt)||Kn["Yi Radicals"](xt)||Kn["Yi Syllables"](xt)));(oU[Tt]||Ht||$t.imageName)&&Ne.push(QO(Pt+1,ct,et,Ne,aU(Tt,_e.getCodePoint(Pt+1),Ht&&lt),!1))}}var xt;return eA(QO(_e.length(),ct,et,Ne,0,!0))}(F,k,f,o,h,P),{processBidirectionalText:ie,processStyledBidirectionalText:oe}=Ya;if(ie&&F.sections.length===1){const _e=ie(F.toString(),Z);for(const Re of _e){const Ue=new sp;Ue.text=Re,Ue.sections=F.sections;for(let Le=0;Le<Re.length;Le++)Ue.sectionIndex.push(0);q.push(Ue)}}else if(oe){const _e=oe(F.text,F.sectionIndex,Z);for(const Re of _e){const Ue=new sp;Ue.text=Re[0],Ue.sectionIndex=Re[1],Ue.sections=F.sections,q.push(Ue)}}else q=function(_e,Re){const Ue=[],Le=_e.text;let Fe=0;for(const tt of Re)Ue.push(_e.substring(Fe,tt)),Fe=tt;return Fe<Le.length&&Ue.push(_e.substring(Fe,Le.length)),Ue}(F,Z);const te=[],ue={positionedLines:te,text:F.toString(),top:w[1],bottom:w[1],left:w[0],right:w[0],writingMode:R,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(_e,Re,Ue,Le,Fe,tt,Ne,et,lt,ct,xt,Pt){let $t=0,Tt=0,Ht=0;const sn=et==="right"?1:et==="left"?0:.5;let Bt=!1;for(const Ln of Fe){const Vn=Ln.getSections();for(const xr of Vn){if(xr.imageName)continue;const Or=Re[xr.fontStack];if(Or&&(Bt=Or.ascender!==void 0&&Or.descender!==void 0,!Bt))break}if(!Bt)break}let Nn=0;for(const Ln of Fe){Ln.trim();const Vn=Ln.getMaxScale(),xr=(Vn-1)*ra,Or={positionedGlyphs:[],lineOffset:0};_e.positionedLines[Nn]=Or;const Dr=Or.positionedGlyphs;let Rr=0;if(!Ln.length()){Tt+=tt,++Nn;continue}let Fr=0,Lr=0;for(let vi=0;vi<Ln.length();vi++){const vr=Ln.getSection(vi),ai=Ln.getSectionIndex(vi),li=Ln.getCodePoint(vi);let Ni=vr.scale,uo=null,bo=null,ho=null,to=ra,po=0;const Eo=!(lt===Ms.horizontal||!xt&&!Ru(li)||xt&&(ix[li]||(En=li,Kn.Arabic(En)||Kn["Arabic Supplement"](En)||Kn["Arabic Extended-A"](En)||Kn["Arabic Presentation Forms-A"](En)||Kn["Arabic Presentation Forms-B"](En))));if(vr.imageName){const ia=Le[vr.imageName];if(!ia)continue;ho=vr.imageName,_e.iconsInText=_e.iconsInText||!0,bo=ia.paddedRect;const Ai=ia.displaySize;Ni=Ni*ra/Pt,uo={width:Ai[0],height:Ai[1],left:0,top:-ZO,advance:Eo?Ai[1]:Ai[0],localGlyph:!1},po=Bt?-uo.height*Ni:Vn*ra-17-Ai[1]*Ni,to=uo.advance;const Qa=(Eo?Ai[0]:Ai[1])*Ni-ra*Vn;Qa>0&&Qa>Rr&&(Rr=Qa)}else{const ia=Ue[vr.fontStack];if(!ia)continue;ia[li]&&(bo=ia[li]);const Ai=Re[vr.fontStack];if(!Ai)continue;const Qa=Ai.glyphs[li];if(!Qa)continue;if(uo=Qa.metrics,to=li!==8203?ra:0,Bt){const Ol=Ai.ascender!==void 0?Math.abs(Ai.ascender):0,Ys=Ai.descender!==void 0?Math.abs(Ai.descender):0,Js=(Ol+Ys)*Ni;Fr<Js&&(Fr=Js,Lr=(Ol-Ys)/2*Ni),po=-Ol*Ni}else po=(Vn-Ni)*ra-17}Eo?(_e.verticalizable=!0,Dr.push({glyph:li,imageName:ho,x:$t,y:Tt+po,vertical:Eo,scale:Ni,localGlyph:uo.localGlyph,fontStack:vr.fontStack,sectionIndex:ai,metrics:uo,rect:bo}),$t+=to*Ni+ct):(Dr.push({glyph:li,imageName:ho,x:$t,y:Tt+po,vertical:Eo,scale:Ni,localGlyph:uo.localGlyph,fontStack:vr.fontStack,sectionIndex:ai,metrics:uo,rect:bo}),$t+=uo.advance*Ni+ct)}Dr.length!==0&&(Ht=Math.max($t-ct,Ht),Bt?tA(Dr,sn,Rr,Lr,tt*Vn/2):tA(Dr,sn,Rr,0,tt/2)),$t=0;const Si=tt*Vn+Rr;Or.lineOffset=Math.max(Rr,xr),Tt+=Si,++Nn}var En;const pn=Tt,{horizontalAlign:on,verticalAlign:er}=hC(Ne);(function(Ln,Vn,xr,Or,Dr,Rr){const Fr=(Vn-xr)*Dr,Lr=-Rr*Or;for(const Si of Ln)for(const vi of Si.positionedGlyphs)vi.x+=Fr,vi.y+=Lr})(_e.positionedLines,sn,on,er,Ht,pn),_e.top+=-er*pn,_e.bottom=_e.top+pn,_e.left+=-on*Ht,_e.right=_e.left+Ht,_e.hasBaseline=Bt}(ue,o,l,h,q,y,E,O,R,k,D,A),!function(_e){for(const Re of _e)if(Re.positionedGlyphs.length!==0)return!1;return!0}(te)&&ue}const ix={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},oU={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function YO(u,o,l,h,v,f){if(o.imageName){const y=h[o.imageName];return y?y.displaySize[0]*o.scale*ra/f+v:0}{const y=l[o.fontStack],E=y&&y.glyphs[u];return E?E.metrics.advance*o.scale+v:0}}function JO(u,o,l,h){const v=Math.pow(u-o,2);return h?u<o?v/2:2*v:v+Math.abs(l)*l}function aU(u,o,l){let h=0;return u===10&&(h-=1e4),l&&(h+=150),u!==40&&u!==65288||(h+=50),o!==41&&o!==65289||(h+=50),h}function QO(u,o,l,h,v,f){let y=null,E=JO(o,l,v,f);for(const O of h){const k=JO(o-O.x,l,v,f)+O.badness;k<=E&&(y=O,E=k)}return{index:u,x:o,priorBreak:y,badness:E}}function eA(u){return u?eA(u.priorBreak).concat(u.index):[]}function hC(u){let o=.5,l=.5;switch(u){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:o,verticalAlign:l}}function tA(u,o,l,h,v){if(!(o||l||h||v))return;const f=u.length-1,y=u[f],E=(y.x+y.metrics.advance*y.scale)*o;for(let O=0;O<=f;O++)u[O].x-=E,u[O].y+=l+h+v}function sU(u,o,l,h){const{horizontalAlign:v,verticalAlign:f}=hC(h),y=l[0]-u.displaySize[0]*v,E=l[1]-u.displaySize[1]*f;return{imagePrimary:u,imageSecondary:o,top:E,bottom:E+u.displaySize[1],left:y,right:y+u.displaySize[0]}}function nA(u,o,l,h,v,f){const y=u.imagePrimary;let E;if(y.content){const q=y.content,Z=y.pixelRatio||1;E=[q[0]/Z,q[1]/Z,y.displaySize[0]-q[2]/Z,y.displaySize[1]-q[3]/Z]}const O=o.left*f,k=o.right*f;let w,R,D,P;l==="width"||l==="both"?(P=v[0]+O-h[3],R=v[0]+k+h[1]):(P=v[0]+(O+k-y.displaySize[0])/2,R=P+y.displaySize[0]);const A=o.top*f,F=o.bottom*f;return l==="height"||l==="both"?(w=v[1]+A-h[0],D=v[1]+F+h[2]):(w=v[1]+(A+F-y.displaySize[1])/2,D=w+y.displaySize[1]),{imagePrimary:y,imageSecondary:void 0,top:w,right:R,bottom:D,left:P,collisionPadding:E}}class Vc extends je{constructor(o,l,h,v,f){super(o,l),this.angle=v,this.z=h,f!==void 0&&(this.segment=f)}clone(){return new Vc(this.x,this.y,this.z,this.angle,this.segment)}}function rA(u,o,l,h,v){if(o.segment===void 0)return!0;let f=o,y=o.segment+1,E=0;for(;E>-l/2;){if(y--,y<0)return!1;E-=u[y].dist(f),f=u[y]}E+=u[y].dist(u[y+1]),y++;const O=[];let k=0;for(;E<l/2;){const w=u[y],R=u[y+1];if(!R)return!1;let D=u[y-1].angleTo(w)-w.angleTo(R);for(D=Math.abs((D+3*Math.PI)%(2*Math.PI)-Math.PI),O.push({distance:E,angleDelta:D}),k+=D;E-O[0].distance>h;)k-=O.shift().angleDelta;if(k>v)return!1;y++,E+=w.dist(R)}return!0}function iA(u){let o=0;for(let l=0;l<u.length-1;l++)o+=u[l].dist(u[l+1]);return o}function oA(u,o,l){return u?.6*o*l:0}function aA(u,o){return Math.max(u?u.right-u.left:0,o?o.right-o.left:0)}function lU(u,o,l,h,v,f){const y=oA(l,v,f),E=aA(l,h)*f;let O=0;const k=iA(u)/2;for(let w=0;w<u.length-1;w++){const R=u[w],D=u[w+1],P=R.dist(D);if(O+P>k){const A=(k-O)/P,F=Zn(R.x,D.x,A),q=Zn(R.y,D.y,A),Z=new Vc(F,q,0,D.angleTo(R),w);return!y||rA(u,Z,E,y,o)?Z:void 0}O+=P}}function cU(u,o,l,h,v,f,y,E,O){const k=oA(h,f,y),w=aA(h,v),R=w*y,D=u[0].x===0||u[0].x===O||u[0].y===0||u[0].y===O;return o-R<o/4&&(o=R+o/4),sA(u,D?o/2*E%o:(w/2+2*f)*y*E%o,o,k,l,R,D,!1,O)}function sA(u,o,l,h,v,f,y,E,O){const k=f/2,w=iA(u);let R=0,D=o-l,P=[];for(let A=0;A<u.length-1;A++){const F=u[A],q=u[A+1],Z=F.dist(q),ie=q.angleTo(F);for(;D+l<R+Z;){D+=l;const oe=(D-R)/Z,te=Zn(F.x,q.x,oe),ue=Zn(F.y,q.y,oe);if(te>=0&&te<O&&ue>=0&&ue<O&&D-k>=0&&D+k<=w){const _e=new Vc(te,ue,0,ie,A);h&&!rA(u,_e,f,h,v)||P.push(_e)}}R+=Z}return E||P.length||y||(P=sA(u,R/2,l,h,v,f,y,!0,O)),P}function lA(u,o,l,h,v){const f=[];for(let y=0;y<u.length;y++){const E=u[y];let O;for(let k=0;k<E.length-1;k++){let w=E[k],R=E[k+1];w.x<o&&R.x<o||(w.x<o?w=new je(o,w.y+(o-w.x)/(R.x-w.x)*(R.y-w.y))._round():R.x<o&&(R=new je(o,w.y+(o-w.x)/(R.x-w.x)*(R.y-w.y))._round()),w.y<l&&R.y<l||(w.y<l?w=new je(w.x+(l-w.y)/(R.y-w.y)*(R.x-w.x),l)._round():R.y<l&&(R=new je(w.x+(l-w.y)/(R.y-w.y)*(R.x-w.x),l)._round()),w.x>=h&&R.x>=h||(w.x>=h?w=new je(h,w.y+(h-w.x)/(R.x-w.x)*(R.y-w.y))._round():R.x>=h&&(R=new je(h,w.y+(h-w.x)/(R.x-w.x)*(R.y-w.y))._round()),w.y>=v&&R.y>=v||(w.y>=v?w=new je(w.x+(v-w.y)/(R.y-w.y)*(R.x-w.x),v)._round():R.y>=v&&(R=new je(w.x+(v-w.y)/(R.y-w.y)*(R.x-w.x),v)._round()),O&&w.equals(O[O.length-1])||(O=[w],f.push(O)),O.push(R)))))}}return f}function cA(u){let o=0,l=0;for(const y of u)o+=y.w*y.h,l=Math.max(l,y.w);u.sort((y,E)=>E.h-y.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),l),h:1/0}];let v=0,f=0;for(const y of u)for(let E=h.length-1;E>=0;E--){const O=h[E];if(!(y.w>O.w||y.h>O.h)){if(y.x=O.x,y.y=O.y,f=Math.max(f,y.y+y.h),v=Math.max(v,y.x+y.w),y.w===O.w&&y.h===O.h){const k=h.pop();E<h.length&&(h[E]=k)}else y.h===O.h?(O.x+=y.w,O.w-=y.w):y.w===O.w?(O.y+=y.h,O.h-=y.h):(h.push({x:O.x+y.w,y:O.y,w:O.w-y.w,h:y.h}),O.y+=y.h,O.h-=y.h);break}}return{w:v,h:f,fill:o/(v*f)||0}}Fn(Vc,"Anchor");const gv=1;class fC{constructor(o,{pixelRatio:l,version:h,stretchX:v,stretchY:f,content:y},E){this.paddedRect=o,this.pixelRatio=l,this.stretchX=v,this.stretchY=f,this.content=y,this.version=h,this.padding=E}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.pixelRatio,(this.paddedRect.h-2*this.padding)/this.pixelRatio]}}class uA{constructor(o,l,h){const v={},f={};this.haveRenderCallbacks=[];const y=[];this.addImages(o,v,gv,y),this.addImages(l,f,2,y);const{w:E,h:O}=cA(y),k=new ba({width:E||1,height:O||1});for(const w in o){const R=o[w],D=v[w].paddedRect;ba.copy(R.data,k,{x:0,y:0},{x:D.x+gv,y:D.y+gv},R.data,h,R.sdf)}for(const w in l){const R=l[w],D=f[w].paddedRect;let P=f[w].padding;const A=D.x+P,F=D.y+P,q=R.data.width,Z=R.data.height;P=P>1?P-1:P,ba.copy(R.data,k,{x:0,y:0},{x:A,y:F},R.data,h),ba.copy(R.data,k,{x:0,y:Z-P},{x:A,y:F-P},{width:q,height:P},h),ba.copy(R.data,k,{x:0,y:0},{x:A,y:F+Z},{width:q,height:P},h),ba.copy(R.data,k,{x:q-P,y:0},{x:A-P,y:F},{width:P,height:Z},h),ba.copy(R.data,k,{x:0,y:0},{x:A+q,y:F},{width:P,height:Z},h),ba.copy(R.data,k,{x:q-P,y:Z-P},{x:A-P,y:F-P},{width:P,height:P},h),ba.copy(R.data,k,{x:0,y:Z-P},{x:A+q,y:F-P},{width:P,height:P},h),ba.copy(R.data,k,{x:0,y:0},{x:A+q,y:F+Z},{width:P,height:P},h),ba.copy(R.data,k,{x:q-P,y:0},{x:A-P,y:F+Z},{width:P,height:P},h)}this.image=k,this.iconPositions=v,this.patternPositions=f}addImages(o,l,h,v){for(const f in o){const y=o[f],E={x:0,y:0,w:y.data.width+2*h,h:y.data.height+2*h};v.push(E),l[f]=new fC(E,y,h),y.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(o,l,h){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(v=>o.hasImage(v,h)),o.dispatchRenderCallbacks(this.haveRenderCallbacks,h);for(const v in o.getUpdatedImages(h))this.patchUpdatedImage(this.iconPositions[v],o.getImage(v,h),l),this.patchUpdatedImage(this.patternPositions[v],o.getImage(v,h),l)}patchUpdatedImage(o,l,h){if(!o||!l||o.version===l.version)return;o.version=l.version;const[v,f]=o.tl;h.update(l.data,{position:{x:v,y:f}})}}Fn(fC,"ImagePosition"),Fn(uA,"ImageAtlas");const vv=1e20;function dA(u,o,l,h,v,f,y,E,O){for(let k=o;k<o+h;k++)hA(u,l*f+k,f,v,y,E,O);for(let k=l;k<l+v;k++)hA(u,k*f+o,1,h,y,E,O)}function hA(u,o,l,h,v,f,y){f[0]=0,y[0]=-vv,y[1]=vv,v[0]=u[o];for(let E=1,O=0,k=0;E<h;E++){v[E]=u[o+E*l];const w=E*E;do{const R=f[O];k=(v[E]-v[R]+w-R*R)/(E-R)/2}while(k<=y[O]&&--O>-1);O++,f[O]=E,y[O]=k,y[O+1]=vv}for(let E=0,O=0;E<h;E++){for(;y[O+1]<E;)O++;const k=f[O],w=E-k;u[o+E*l]=v[k]+w*w}}const Il=2,pC={none:0,ideographs:1,all:2};class lp{constructor(o,l,h){this.requestManager=o,this.localGlyphMode=l,this.localFontFamily=h,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(o,l){this.urls[l]=o}getGlyphs(o,l,h){const v=[],f=this.urls[l]||ke.GLYPHS_URL;for(const y in o)for(const E of o[y])v.push({stack:y,id:E});Pn(v,({stack:y,id:E},O)=>{let k=this.entries[y];k||(k=this.entries[y]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let w=k.glyphs[E];if(w!==void 0)return void O(null,{stack:y,id:E,glyph:w});if(w=this._tinySDF(k,y,E),w)return k.glyphs[E]=w,void O(null,{stack:y,id:E,glyph:w});const R=Math.floor(E/256);if(256*R>65535)return Xt("glyphs > 65535 not supported"),void O(null,{stack:y,id:E,glyph:w});if(k.ranges[R])return void O(null,{stack:y,id:E,glyph:w});let D=k.requests[R];D||(D=k.requests[R]=[],lp.loadGlyphRange(y,R,f,this.requestManager,(P,A)=>{if(A){k.ascender=A.ascender,k.descender=A.descender;for(const F in A.glyphs)this._doesCharSupportLocalGlyph(+F)||(k.glyphs[+F]=A.glyphs[+F]);k.ranges[R]=!0}for(const F of D)F(P,A);delete k.requests[R]})),D.push((P,A)=>{P?O(P):A&&O(null,{stack:y,id:E,glyph:A.glyphs[E]||null})})},(y,E)=>{if(y)h(y);else if(E){const O={};for(const{stack:k,id:w,glyph:R}of E)O[k]===void 0&&(O[k]={}),O[k].glyphs===void 0&&(O[k].glyphs={}),O[k].glyphs[w]=R&&{id:R.id,bitmap:R.bitmap.clone(),metrics:R.metrics},O[k].ascender=this.entries[k].ascender,O[k].descender=this.entries[k].descender;h(null,O)}})}_doesCharSupportLocalGlyph(o){return this.localGlyphMode!==pC.none&&(this.localGlyphMode===pC.all?!!this.localFontFamily:!!this.localFontFamily&&(Kn["CJK Unified Ideographs"](o)||Kn["Hangul Syllables"](o)||Kn.Hiragana(o)||Kn.Katakana(o)||Kn["CJK Symbols and Punctuation"](o)||Kn["CJK Unified Ideographs Extension A"](o)||Kn["CJK Unified Ideographs Extension B"](o)||Kn.Osage(o)))}_tinySDF(o,l,h){const v=this.localFontFamily;if(!v||!this._doesCharSupportLocalGlyph(h))return;let f=o.tinySDF;if(!f){let F="400";/bold/i.test(l)?F="900":/medium/i.test(l)?F="500":/light/i.test(l)&&(F="200"),f=o.tinySDF=new lp.TinySDF({fontFamily:v,fontWeight:F,fontSize:24*Il,buffer:3*Il,radius:8*Il}),f.fontWeight=F}if(this.localGlyphs[f.fontWeight][h])return this.localGlyphs[f.fontWeight][h];const y=String.fromCodePoint(h),{data:E,width:O,height:k,glyphWidth:w,glyphHeight:R,glyphLeft:D,glyphTop:P,glyphAdvance:A}=f.draw(y);return this.localGlyphs[f.fontWeight][h]={id:h,bitmap:new Wu({width:O,height:k},E),metrics:{width:w/Il,height:R/Il,left:D/Il,top:P/Il-27,advance:A/Il,localGlyph:!0}}}}lp.loadGlyphRange=function(u,o,l,h,v){const f=256*o,y=f+255,E=h.transformRequest(h.normalizeGlyphsURL(l).replace("{fontstack}",u).replace("{range}",`${f}-${y}`),Ei.Glyphs);Ki(E,(O,k)=>{if(O)v(O);else if(k){const w={},R=function(D){return new rx(D).readFields(nU,{})}(k);for(const D of R.glyphs)w[D.id]=D;v(null,{glyphs:w,ascender:R.ascender,descender:R.descender})}})},lp.TinySDF=class{constructor({fontSize:u=24,buffer:o=3,radius:l=8,cutoff:h=.25,fontFamily:v="sans-serif",fontWeight:f="normal",fontStyle:y="normal"}={}){this.buffer=o,this.cutoff=h,this.radius=l;const E=this.size=u+4*o,O=this._createCanvas(E),k=this.ctx=O.getContext("2d",{willReadFrequently:!0});k.font=`${y} ${f} ${u}px ${v}`,k.textBaseline="alphabetic",k.textAlign="left",k.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(u){const o=document.createElement("canvas");return o.width=o.height=u,o}draw(u){const{width:o,actualBoundingBoxAscent:l,actualBoundingBoxDescent:h,actualBoundingBoxLeft:v,actualBoundingBoxRight:f}=this.ctx.measureText(u),y=Math.ceil(l),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(f-v))),O=Math.min(this.size-this.buffer,y+Math.ceil(h)),k=E+2*this.buffer,w=O+2*this.buffer,R=Math.max(k*w,0),D=new Uint8ClampedArray(R),P={data:D,width:k,height:w,glyphWidth:E,glyphHeight:O,glyphTop:y,glyphLeft:0,glyphAdvance:o};if(E===0||O===0)return P;const{ctx:A,buffer:F,gridInner:q,gridOuter:Z}=this;A.clearRect(F,F,E,O),A.fillText(u,F,F+y);const ie=A.getImageData(F,F,E,O);Z.fill(vv,0,R),q.fill(0,0,R);for(let oe=0;oe<O;oe++)for(let te=0;te<E;te++){const ue=ie.data[4*(oe*E+te)+3]/255;if(ue===0)continue;const _e=(oe+F)*k+te+F;if(ue===1)Z[_e]=0,q[_e]=vv;else{const Re=.5-ue;Z[_e]=Re>0?Re*Re:0,q[_e]=Re<0?Re*Re:0}}dA(Z,0,0,k,w,k,this.f,this.v,this.z),dA(q,F,F,E,O,k,this.f,this.v,this.z);for(let oe=0;oe<R;oe++){const te=Math.sqrt(Z[oe])-Math.sqrt(q[oe]);D[oe]=Math.round(255-255*(te/this.radius+this.cutoff))}return P}};const qu=gv;function fA(u,o,l,h,v=1){const f=[],y=u.imagePrimary,E=y.pixelRatio,O=y.paddedRect.w-2*qu,k=y.paddedRect.h-2*qu,w=(u.right-u.left)*v,R=(u.bottom-u.top)*v,D=y.stretchX||[[0,O]],P=y.stretchY||[[0,k]],A=(Ne,et)=>Ne+et[1]-et[0],F=D.reduce(A,0),q=P.reduce(A,0),Z=O-F,ie=k-q;let oe=0,te=F,ue=0,_e=q,Re=0,Ue=Z,Le=0,Fe=ie;if(y.content&&h){const Ne=y.content;oe=ox(D,0,Ne[0]),ue=ox(P,0,Ne[1]),te=ox(D,Ne[0],Ne[2]),_e=ox(P,Ne[1],Ne[3]),Re=Ne[0]-oe,Le=Ne[1]-ue,Ue=Ne[2]-Ne[0]-te,Fe=Ne[3]-Ne[1]-_e}const tt=(Ne,et,lt,ct)=>{const xt=ax(Ne.stretch-oe,te,w,u.left*v),Pt=sx(Ne.fixed-Re,Ue,Ne.stretch,F),$t=ax(et.stretch-ue,_e,R,u.top*v),Tt=sx(et.fixed-Le,Fe,et.stretch,q),Ht=ax(lt.stretch-oe,te,w,u.left*v),sn=sx(lt.fixed-Re,Ue,lt.stretch,F),Bt=ax(ct.stretch-ue,_e,R,u.top*v),Nn=sx(ct.fixed-Le,Fe,ct.stretch,q),En=new je(xt,$t),pn=new je(Ht,$t),on=new je(Ht,Bt),er=new je(xt,Bt),Ln=new je(Pt/E,Tt/E),Vn=new je(sn/E,Nn/E),xr=o*Math.PI/180;if(xr){const Si=Math.sin(xr),vi=Math.cos(xr),vr=[vi,-Si,Si,vi];En._matMult(vr),pn._matMult(vr),er._matMult(vr),on._matMult(vr)}const Or=Ne.stretch+Ne.fixed,Dr=lt.stretch+lt.fixed,Rr=et.stretch+et.fixed,Fr=ct.stretch+ct.fixed,Lr=u.imageSecondary;return{tl:En,tr:pn,bl:er,br:on,texPrimary:{x:y.paddedRect.x+qu+Or,y:y.paddedRect.y+qu+Rr,w:Dr-Or,h:Fr-Rr},texSecondary:Lr?{x:Lr.paddedRect.x+qu+Or,y:Lr.paddedRect.y+qu+Rr,w:Dr-Or,h:Fr-Rr}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ln,pixelOffsetBR:Vn,minFontScaleX:Ue/E/w,minFontScaleY:Fe/E/R,isSDF:l}};if(h&&(y.stretchX||y.stretchY)){const Ne=pA(D,Z,F),et=pA(P,ie,q);for(let lt=0;lt<Ne.length-1;lt++){const ct=Ne[lt],xt=Ne[lt+1];for(let Pt=0;Pt<et.length-1;Pt++)f.push(tt(ct,et[Pt],xt,et[Pt+1]))}}else f.push(tt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:O+1},{fixed:0,stretch:k+1}));return f}function ox(u,o,l){let h=0;for(const v of u)h+=Math.max(o,Math.min(l,v[1]))-Math.max(o,Math.min(l,v[0]));return h}function pA(u,o,l){const h=[{fixed:-qu,stretch:0}];for(const[v,f]of u){const y=h[h.length-1];h.push({fixed:v-y.stretch,stretch:y.stretch}),h.push({fixed:v-y.stretch,stretch:y.stretch+(f-v)})}return h.push({fixed:o+qu,stretch:l}),h}function ax(u,o,l,h){return u/o*l+h}function sx(u,o,l,h){return u-o*l/h}function uU(u,o,l,h){const v=o+u.positionedLines[h].lineOffset;return h===0?l+v/2:l+(v+(o+u.positionedLines[h-1].lineOffset))/2}function dU(u,o=1,l=!1){let h=1/0,v=1/0,f=-1/0,y=-1/0;const E=u[0];for(let P=0;P<E.length;P++){const A=E[P];(!P||A.x<h)&&(h=A.x),(!P||A.y<v)&&(v=A.y),(!P||A.x>f)&&(f=A.x),(!P||A.y>y)&&(y=A.y)}const O=Math.min(f-h,y-v);let k=O/2;const w=new tg([],hU);if(O===0)return new je(h,v);for(let P=h;P<f;P+=O)for(let A=v;A<y;A+=O)w.push(new cp(P+k,A+k,k,u));let R=function(P){let A=0,F=0,q=0;const Z=P[0];for(let ie=0,oe=Z.length,te=oe-1;ie<oe;te=ie++){const ue=Z[ie],_e=Z[te],Re=ue.x*_e.y-_e.x*ue.y;F+=(ue.x+_e.x)*Re,q+=(ue.y+_e.y)*Re,A+=3*Re}return new cp(F/A,q/A,0,P)}(u),D=w.length;for(;w.length;){const P=w.pop();(P.d>R.d||!R.d)&&(R=P,l&&console.log("found best %d after %d probes",Math.round(1e4*P.d)/1e4,D)),P.max-R.d<=o||(k=P.h/2,w.push(new cp(P.p.x-k,P.p.y-k,k,u)),w.push(new cp(P.p.x+k,P.p.y-k,k,u)),w.push(new cp(P.p.x-k,P.p.y+k,k,u)),w.push(new cp(P.p.x+k,P.p.y+k,k,u)),D+=4)}return l&&(console.log(`num probes: ${D}`),console.log(`best distance: ${R.d}`)),R.p}function hU(u,o){return o.max-u.max}class cp{constructor(o,l,h,v){this.p=new je(o,l),this.h=h,this.d=function(f,y){let E=!1,O=1/0;for(let k=0;k<y.length;k++){const w=y[k];for(let R=0,D=w.length,P=D-1;R<D;P=R++){const A=w[R],F=w[P];A.y>f.y!=F.y>f.y&&f.x<(F.x-A.x)*(f.y-A.y)/(F.y-A.y)+A.x&&(E=!E),O=Math.min(O,hr(f,A,F))}}return(E?1:-1)*Math.sqrt(O)}(this.p,v),this.max=this.d+this.h*Math.SQRT2}}const mC=Number.POSITIVE_INFINITY,fU=Math.sqrt(2);function mA(u,[o,l]){let h=0,v=0;if(l===mC){o<0&&(o=0);const f=o/fU;switch(u){case"top-right":case"top-left":v=f-7;break;case"bottom-right":case"bottom-left":v=7-f;break;case"bottom":v=7-o;break;case"top":v=o-7}switch(u){case"top-right":case"bottom-right":h=-f;break;case"top-left":case"bottom-left":h=f;break;case"left":h=o;break;case"right":h=-o}}else{switch(o=Math.abs(o),l=Math.abs(l),u){case"top-right":case"top-left":case"top":v=l-7;break;case"bottom-right":case"bottom-left":case"bottom":v=7-l}switch(u){case"top-right":case"bottom-right":case"right":h=-o;break;case"top-left":case"bottom-left":case"left":h=o}}return[h,v]}function gC(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function pU(u,o,l,h,v,f,y,E,O,k,w,R,D,P,A){let F=f.textMaxSize.evaluate(o,{},R);F===void 0?F=y*f.textScaleFactor:F*=f.textScaleFactor;const q=u.layers[0].layout,Z=q.get("icon-offset").evaluate(o,{},R),ie=vA(l.horizontal)||l.vertical,oe=D.name==="globe",te=ra,ue=y*f.textScaleFactor/te,_e=u.tilePixelRatio*F/te,Re=(ct=u.overscaling,u.zoom>18&&ct>2&&(ct>>=1),Math.max(Tn/(512*ct),1)*q.get("symbol-spacing")),Ue=q.get("text-padding")*u.tilePixelRatio,Le=q.get("icon-padding")*u.tilePixelRatio,Fe=At(q.get("text-max-angle")),tt=q.get("text-rotation-alignment")==="map"&&q.get("symbol-placement")!=="point",Ne=q.get("icon-rotation-alignment")==="map"&&q.get("symbol-placement")!=="point",et=q.get("symbol-placement"),lt=Re/2;var ct;const xt=q.get("icon-text-fit").evaluate(o,{},R),Pt=q.get("icon-text-fit-padding").evaluate(o,{},R),$t=xt!=="none";let Tt;u.hasAnyIconTextFit===!1&&$t&&(u.hasAnyIconTextFit=!0),h&&$t&&(u.allowVerticalPlacement&&l.vertical&&(Tt=nA(h,l.vertical,xt,Pt,Z,ue)),ie&&(h=nA(h,ie,xt,Pt,Z,ue)));const Ht=(sn,Bt,Nn)=>{if(Bt.x<0||Bt.x>=Tn||Bt.y<0||Bt.y>=Tn)return;let En=null;if(oe){const{x:pn,y:on,z:er}=D.projectTilePoint(Bt.x,Bt.y,Nn);En={anchor:new Vc(pn,on,er,0,void 0),up:D.upVector(Nn,Bt.x,Bt.y)}}(function(pn,on,er,Ln,Vn,xr,Or,Dr,Rr,Fr,Lr,Si,vi,vr,ai,li,Ni,uo,bo,ho,to,po,Eo,ia,Ai,Qa,Ol){const Ys=pn.addToLineVertexArray(on,Ln);let Js,Th,Ju,Ih,zv,L3,N3,F3=0,B3=0,j3=0,V3=0,WC=-1,GC=-1;const uc={};let H3=mi("");const Mh=er?er.anchor:on,qC=Rr.layout.get("icon-text-fit").evaluate(to,{},Ai)!=="none";let KC=0,XC=0;if(Rr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[KC,XC]=Rr.layout.get("text-offset").evaluate(to,{},Ai).map(ds=>ds*ra):(KC=Rr.layout.get("text-radial-offset").evaluate(to,{},Ai)*ra,XC=mC),pn.allowVerticalPlacement&&Vn.vertical){const ds=Vn.vertical;if(ai)L3=vC(ds),Dr&&(N3=vC(Dr));else{const hs=Rr.layout.get("text-rotate").evaluate(to,{},Ai)+90;Ju=lx(Fr,Mh,on,Lr,Si,vi,ds,vr,hs,li),Dr&&(Ih=lx(Fr,Mh,on,Lr,Si,vi,Dr,uo,hs))}}if(xr){const ds=Rr.layout.get("icon-rotate").evaluate(to,{},Ai),hs=fA(xr,ds,Eo,qC,po.iconScaleFactor),vp=Dr?fA(Dr,ds,Eo,qC,po.iconScaleFactor):void 0;Th=lx(Fr,Mh,on,Lr,Si,vi,xr,uo,ds),F3=4*hs.length;const U3=pn.iconSizeData;let Ph=null;U3.kind==="source"?(Ph=[Tl*Rr.layout.get("icon-size").evaluate(to,{},Ai)*po.iconScaleFactor],Ph[0]>Ku&&Xt(`${pn.layerIds[0]}: Value for "icon-size" is >= ${yv}. Reduce your "icon-size".`)):U3.kind==="composite"&&(Ph=[Tl*po.compositeIconSizes[0].evaluate(to,{},Ai)*po.iconScaleFactor,Tl*po.compositeIconSizes[1].evaluate(to,{},Ai)*po.iconScaleFactor],(Ph[0]>Ku||Ph[1]>Ku)&&Xt(`${pn.layerIds[0]}: Value for "icon-size" is >= ${yv}. Reduce your "icon-size".`)),pn.addSymbols(pn.icon,hs,Ph,ho,bo,to,!1,er,on,Ys.lineStartIndex,Ys.lineLength,-1,ia,Ai,Qa,Ol),WC=pn.icon.placedSymbolArray.length-1,vp&&(B3=4*vp.length,pn.addSymbols(pn.icon,vp,Ph,ho,bo,to,Ms.vertical,er,on,Ys.lineStartIndex,Ys.lineLength,-1,ia,Ai,Qa,Ol),GC=pn.icon.placedSymbolArray.length-1)}for(const ds in Vn.horizontal){const hs=Vn.horizontal[ds];Js||(H3=mi(hs.text),ai?zv=vC(hs):Js=lx(Fr,Mh,on,Lr,Si,vi,hs,vr,Rr.layout.get("text-rotate").evaluate(to,{},Ai),li));const vp=hs.positionedLines.length===1;if(j3+=gA(pn,er,on,hs,Or,Rr,ai,to,li,Ys,Vn.vertical?Ms.horizontal:Ms.horizontalOnly,vp?Object.keys(Vn.horizontal):[ds],uc,WC,po,ia,Ai,Qa),vp)break}Vn.vertical&&(V3+=gA(pn,er,on,Vn.vertical,Or,Rr,ai,to,li,Ys,Ms.vertical,["vertical"],uc,GC,po,ia,Ai,Qa));let Qu=-1;const ZC=(ds,hs)=>ds?Math.max(ds,hs):hs;Qu=ZC(zv,Qu),Qu=ZC(L3,Qu),Qu=ZC(N3,Qu);const P7=Qu>-1?1:0;pn.glyphOffsetArray.length>=65535&&Xt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),to.sortKey!==void 0&&pn.addToSortKeyRanges(pn.symbolInstances.length,to.sortKey),pn.symbolInstances.emplaceBack(on.x,on.y,Mh.x,Mh.y,Mh.z,uc.right>=0?uc.right:-1,uc.center>=0?uc.center:-1,uc.left>=0?uc.left:-1,uc.vertical>=0?uc.vertical:-1,WC,GC,H3,Js!==void 0?Js:pn.collisionBoxArray.length,Js!==void 0?Js+1:pn.collisionBoxArray.length,Ju!==void 0?Ju:pn.collisionBoxArray.length,Ju!==void 0?Ju+1:pn.collisionBoxArray.length,Th!==void 0?Th:pn.collisionBoxArray.length,Th!==void 0?Th+1:pn.collisionBoxArray.length,Ih||pn.collisionBoxArray.length,Ih?Ih+1:pn.collisionBoxArray.length,Lr,j3,V3,F3,B3,P7,0,KC,XC,Qu,0,qC?1:0)})(u,Bt,En,sn,l,h,v,Tt,u.layers[0],u.collisionBoxArray,o.index,o.sourceLayerIndex,u.index,Ue,tt,O,0,Le,Ne,Z,o,f,k,w,R,P,A)};if(et==="line")for(const sn of lA(o.geometry,0,0,Tn,Tn)){const Bt=cU(sn,Re,Fe,l.vertical||ie,h,te,_e,u.overscaling,Tn);for(const Nn of Bt)ie&&mU(u,ie.text,lt,Nn)||Ht(sn,Nn,R)}else if(et==="line-center"){for(const sn of o.geometry)if(sn.length>1){const Bt=lU(sn,Fe,l.vertical||ie,h,te,_e);Bt&&Ht(sn,Bt,R)}}else if(o.type==="Polygon")for(const sn of X_(o.geometry,0)){const Bt=dU(sn,16);Ht(sn[0],new Vc(Bt.x,Bt.y,0,0,void 0),R)}else if(o.type==="LineString")for(const sn of o.geometry)Ht(sn,new Vc(sn[0].x,sn[0].y,0,0,void 0),R);else if(o.type==="Point")for(const sn of o.geometry)for(const Bt of sn)Ht([Bt],new Vc(Bt.x,Bt.y,0,0,void 0),R)}const yv=255,Ku=yv*Tl;function gA(u,o,l,h,v,f,y,E,O,k,w,R,D,P,A,F,q,Z){const ie=function(ue,_e,Re,Ue,Le,Fe,tt,Ne){const et=[];if(_e.positionedLines.length===0)return et;const lt=Ue.layout.get("text-rotate").evaluate(Fe,{})*Math.PI/180,ct=function(Ht){const sn=Ht[0],Bt=Ht[1],Nn=sn*Bt;return Nn>0?[sn,-Bt]:Nn<0?[-sn,Bt]:sn===0?[Bt,sn]:[Bt,-sn]}(Re);let xt=Math.abs(_e.top-_e.bottom);for(const Ht of _e.positionedLines)xt-=Ht.lineOffset;const Pt=_e.positionedLines.length,$t=xt/Pt;let Tt=_e.top-Re[1];for(let Ht=0;Ht<Pt;++Ht){const sn=_e.positionedLines[Ht];Tt=uU(_e,$t,Tt,Ht);for(const Bt of sn.positionedGlyphs){if(!Bt.rect)continue;const Nn=Bt.rect||{};let En=ZO+1,pn=!0,on=1,er=0;if(Bt.imageName){const ho=tt[Bt.imageName];if(!ho)continue;if(ho.sdf){Xt("SDF images are not supported in formatted text and will be ignored.");continue}pn=!1,on=ho.pixelRatio,En=gv/on}const Ln=(Le||Ne)&&Bt.vertical,Vn=Bt.metrics.advance*Bt.scale/2,xr=Bt.metrics,Or=Bt.rect;if(Or===null)continue;Ne&&_e.verticalizable&&(er=Bt.imageName?Vn-Bt.metrics.width*Bt.scale/2:0);const Dr=Le?[Bt.x+Vn,Bt.y]:[0,0];let Rr=[0,0],Fr=[0,0],Lr=!1;Le||(Ln?(Fr=[Bt.x+Vn+ct[0],Bt.y+ct[1]-er],Lr=!0):Rr=[Bt.x+Vn+Re[0],Bt.y+Re[1]-er]);const Si=Or.w*Bt.scale/(on*(Bt.localGlyph?Il:1)),vi=Or.h*Bt.scale/(on*(Bt.localGlyph?Il:1));let vr,ai,li,Ni;if(Ln){const ho=Bt.y-Tt,to=new je(-Vn,Vn-ho),po=-Math.PI/2,Eo=new je(...Fr);vr=new je(-Vn+Rr[0],Rr[1]),vr._rotateAround(po,to)._add(Eo),vr.x+=-ho+Vn,vr.y-=(xr.left-En)*Bt.scale;const ia=Bt.imageName?xr.advance*Bt.scale:ra*Bt.scale,Ai=String.fromCodePoint(Bt.glyph);QH(Ai)?vr.x+=(1-En)*Bt.scale:eU(Ai)?vr.x+=ia-xr.height*Bt.scale+(-En-1)*Bt.scale:vr.x+=Bt.imageName||xr.width+2*En===Or.w&&xr.height+2*En===Or.h?(ia-vi)/2:(ia-(xr.height+2*En)*Bt.scale)/2,ai=new je(vr.x,vr.y-Si),li=new je(vr.x+vi,vr.y),Ni=new je(vr.x+vi,vr.y-Si)}else{const ho=(xr.left-En)*Bt.scale-Vn+Rr[0],to=(-xr.top-En)*Bt.scale+Rr[1],po=ho+Si,Eo=to+vi;vr=new je(ho,to),ai=new je(po,to),li=new je(ho,Eo),Ni=new je(po,Eo)}if(lt){let ho;ho=Le?new je(0,0):Lr?new je(ct[0],ct[1]):new je(Re[0],Re[1]),vr._rotateAround(lt,ho),ai._rotateAround(lt,ho),li._rotateAround(lt,ho),Ni._rotateAround(lt,ho)}const uo=new je(0,0),bo=new je(0,0);et.push({tl:vr,tr:ai,bl:li,br:Ni,texPrimary:Nn,texSecondary:void 0,writingMode:_e.writingMode,glyphOffset:Dr,sectionIndex:Bt.sectionIndex,isSDF:pn,pixelOffsetTL:uo,pixelOffsetBR:bo,minFontScaleX:0,minFontScaleY:0})}}return et}(0,h,O,f,y,E,v,u.allowVerticalPlacement),oe=u.textSizeData;let te=null;oe.kind==="source"?(te=[Tl*f.layout.get("text-size").evaluate(E,{},q)*A.textScaleFactor],te[0]>Ku&&Xt(`${u.layerIds[0]}: Value for "text-size" is >= ${yv}. Reduce your "text-size".`)):oe.kind==="composite"&&(te=[Tl*A.compositeTextSizes[0].evaluate(E,{},q)*A.textScaleFactor,Tl*A.compositeTextSizes[1].evaluate(E,{},q)*A.textScaleFactor],(te[0]>Ku||te[1]>Ku)&&Xt(`${u.layerIds[0]}: Value for "text-size" is >= ${yv}. Reduce your "text-size".`)),u.addSymbols(u.text,ie,te,O,y,E,w,o,l,k.lineStartIndex,k.lineLength,P,F,q,Z,!1);for(const ue of R)D[ue]=u.text.placedSymbolArray.length-1;return 4*ie.length}function vA(u){for(const o in u)return u[o];return null}function lx(u,o,l,h,v,f,y,E,O,k){let w=y.top,R=y.bottom,D=y.left,P=y.right;const A=y.collisionPadding;if(A&&(D-=A[0],w-=A[1],P+=A[2],R+=A[3]),O){const F=new je(D,w),q=new je(P,w),Z=new je(D,R),ie=new je(P,R),oe=At(O);let te=new je(0,0);k&&(te=new je(k[0],k[1])),F._rotateAround(oe,te),q._rotateAround(oe,te),Z._rotateAround(oe,te),ie._rotateAround(oe,te),D=Math.min(F.x,q.x,Z.x,ie.x),P=Math.max(F.x,q.x,Z.x,ie.x),w=Math.min(F.y,q.y,Z.y,ie.y),R=Math.max(F.y,q.y,Z.y,ie.y)}return u.emplaceBack(o.x,o.y,o.z,l.x,l.y,D,w,P,R,E,h,v,f),u.length-1}function vC(u){u.collisionPadding&&(u.top-=u.collisionPadding[1],u.bottom+=u.collisionPadding[3]);const o=u.bottom-u.top;return o>0?Math.max(10,o):null}function mU(u,o,l,h){const v=u.compareText;if(o in v){const f=v[o];for(let y=f.length-1;y>=0;y--)if(h.dist(f[y])<l)return!0}else v[o]=[];return v[o].push(h),!1}function yA(u,o){const l=u.fovAboveCenter,h=u.elevation?u.elevation.getMinElevationBelowMSL()*o:0,v=(u._camera.position[2]*u.worldSize-h)/Math.cos(u._pitch),f=Math.sin(l)*v/Math.sin(Math.max(Math.PI/2-u._pitch-l,.01));let y=Math.sin(u._pitch)*f+v;const E=v*(1/u._horizonShift);return u.elevation&&u.elevation.exaggeration()!==0||(y*=1+Math.max(u.zoom-17,0)),Math.min(1.01*y,E)}function _v(u,o){if(!o.isReprojectedInTileSpace)return{scale:1<<u.z,x:u.x,y:u.y,x2:u.x+1,y2:u.y+1,projection:o};const l=Math.pow(2,-u.z),h=u.x*l,v=(u.x+1)*l,f=u.y*l,y=(u.y+1)*l,E=Oe(h),O=Oe(v),k=Ve(f),w=Ve(y),R=o.project(E,k),D=o.project(O,k),P=o.project(O,w),A=o.project(E,w);let F=Math.min(R.x,D.x,P.x,A.x),q=Math.min(R.y,D.y,P.y,A.y),Z=Math.max(R.x,D.x,P.x,A.x),ie=Math.max(R.y,D.y,P.y,A.y);const oe=l/16;function te(_e,Re,Ue,Le,Fe,tt){const Ne=(Ue+Fe)/2,et=(Le+tt)/2,lt=o.project(Oe(Ne),Ve(et)),ct=Math.max(0,F-lt.x,q-lt.y,lt.x-Z,lt.y-ie);F=Math.min(F,lt.x),Z=Math.max(Z,lt.x),q=Math.min(q,lt.y),ie=Math.max(ie,lt.y),ct>oe&&(te(_e,lt,Ue,Le,Ne,et),te(lt,Re,Ne,et,Fe,tt))}te(R,D,h,f,v,f),te(D,P,v,f,v,y),te(P,A,v,y,h,y),te(A,R,h,y,h,f),F-=oe,q-=oe,Z+=oe,ie+=oe;const ue=1/Math.max(Z-F,ie-q);return{scale:ue,x:F*ue,y:q*ue,x2:Z*ue,y2:ie*ue,projection:o}}function _A(u,{x:o,y:l},h=0){return new je(((o-h)*u.scale-u.x)*Tn,(l*u.scale-u.y)*Tn)}const gU=Pe.mat4.identity(new Float32Array(16));class Xu{constructor(o){this.spec=o,this.name=o.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(o,l){return{x:0,y:0,z:0}}unproject(o,l){return new G(0,0)}projectTilePoint(o,l,h){return{x:o,y:l,z:0}}locationPoint(o,l,h=!0){return o._coordinatePoint(o.locationCoordinate(l),h)}pixelsPerMeter(o,l){return Ee(1,o)*l}pixelSpaceConversion(o,l,h){return 1}farthestPixelDistance(o){return yA(o,o.pixelsPerMeter)}pointCoordinate(o,l,h,v){const f=o.horizonLineFromTop(!1),y=new je(l,Math.max(f,h));return o.rayIntersectionCoordinate(o.pointRayIntersection(y,v))}pointCoordinate3D(o,l,h){const v=new je(l,h);if(o.elevation)return o.elevation.pointCoordinate(v);{const f=this.pointCoordinate(o,v.x,v.y,0);return[f.x,f.y,f.z]}}isPointAboveHorizon(o,l){if(o.elevation&&o.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(o,l.x,l.y);const h=o.horizonLineFromTop();return l.y<h}createInversionMatrix(o,l){return gU}createTileMatrix(o,l,h){let v,f,y;const E=h.canonical,O=Pe.mat4.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const k=_v(E,this);v=1,f=k.x+h.wrap*k.scale,y=k.y,Pe.mat4.scale(O,O,[v/k.scale,v/k.scale,o.pixelsPerMeter/l])}else v=l/o.zoomScale(E.z),f=(E.x+Math.pow(2,E.z)*h.wrap)*v,y=E.y*v;return Pe.mat4.translate(O,O,[f,y,0]),Pe.mat4.scale(O,O,[v/Tn,v/Tn,1]),O}upVector(o,l,h){return[0,0,1]}upVectorScale(o,l,h){return{metersToTile:1}}}class vU extends Xu{constructor(o){super(o),this.range=[4,7],this.center=o.center||[-96,37.5];const[l,h]=this.parallels=o.parallels||[29.5,45.5],v=Math.sin(At(l));this.n=(v+Math.sin(At(h)))/2,this.c=1+v*(2*this.n-v),this.r0=Math.sqrt(this.c)/this.n}project(o,l){const{n:h,c:v,r0:f}=this,y=At(o-this.center[0]),E=At(l),O=Math.sqrt(v-2*h*Math.sin(E))/h;return{x:O*Math.sin(y*h),y:O*Math.cos(y*h)-f,z:0}}unproject(o,l){const{n:h,c:v,r0:f}=this,y=f+l;let E=Math.atan2(o,Math.abs(y))*Math.sign(y);y*h<0&&(E-=Math.PI*Math.sign(o)*Math.sign(y));const O=At(this.center[0])*h;E=hn(E,-Math.PI-O,Math.PI-O);const k=Rt(Yt(E/h)+this.center[0],-180,180),w=Math.asin(Rt((v-(o*o+y*y)*h*h)/(2*h),-1,1)),R=Rt(Yt(w),-qe,qe);return new G(k,R)}}const xv=1.340264,bv=-.081106,wv=893e-6,Sv=.003796,cx=Math.sqrt(3)/2;class yU extends Xu{project(o,l){l=l/180*Math.PI,o=o/180*Math.PI;const h=Math.asin(cx*Math.sin(l)),v=h*h,f=v*v*v;return{x:.5*(o*Math.cos(h)/(cx*(xv+3*bv*v+f*(7*wv+9*Sv*v)))/Math.PI+.5),y:1-.5*(h*(xv+bv*v+f*(wv+Sv*v))/Math.PI+1),z:0}}unproject(o,l){o=(2*o-.5)*Math.PI;let h=l=(2*(1-l)-1)*Math.PI,v=h*h,f=v*v*v;for(let w,R,D,P=0;P<12&&(R=h*(xv+bv*v+f*(wv+Sv*v))-l,D=xv+3*bv*v+f*(7*wv+9*Sv*v),w=R/D,h=Rt(h-w,-Math.PI/3,Math.PI/3),v=h*h,f=v*v*v,!(Math.abs(w)<1e-12));++P);const y=cx*o*(xv+3*bv*v+f*(7*wv+9*Sv*v))/Math.cos(h),E=Math.asin(Math.sin(h)/cx),O=Rt(180*y/Math.PI,-180,180),k=Rt(180*E/Math.PI,-qe,qe);return new G(O,k)}}class _U extends Xu{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0}project(o,l){return{x:.5+o/360,y:.5-l/360,z:0}}unproject(o,l){const h=360*(o-.5),v=Rt(360*(.5-l),-qe,qe);return new G(h,v)}}const up=Math.PI/2;function ux(u){return Math.tan((up+u)/2)}class xU extends Xu{constructor(o){super(o),this.center=o.center||[0,30];const[l,h]=this.parallels=o.parallels||[30,30];let v=At(l),f=At(h);this.southernCenter=v+f<0,this.southernCenter&&(v=-v,f=-f);const y=Math.cos(v),E=ux(v);this.n=v===f?Math.sin(v):Math.log(y/Math.cos(f))/Math.log(ux(f)/E),this.f=y*Math.pow(ux(v),this.n)/this.n}project(o,l){l=At(l),this.southernCenter&&(l=-l),o=At(o-this.center[0]);const h=1e-6,{n:v,f}=this;f>0?l<-up+h&&(l=-up+h):l>up-h&&(l=up-h);const y=f/Math.pow(ux(l),v);let E=y*Math.sin(v*o),O=f-y*Math.cos(v*o);return E=.5*(E/Math.PI+.5),O=.5*(O/Math.PI+.5),{x:E,y:this.southernCenter?O:1-O,z:0}}unproject(o,l){o=(2*o-.5)*Math.PI,this.southernCenter&&(l=1-l),l=(2*(1-l)-.5)*Math.PI;const{n:h,f:v}=this,f=v-l,y=Math.sign(f),E=Math.sign(h)*Math.sqrt(o*o+f*f);let O=Math.atan2(o,Math.abs(f))*y;f*h<0&&(O-=Math.PI*Math.sign(o)*y);const k=Rt(Yt(O/h)+this.center[0],-180,180),w=Rt(Yt(2*Math.atan(Math.pow(v/E,1/h))-up),-qe,qe);return new G(k,this.southernCenter?-w:w)}}class xA extends Xu{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(o,l){return{x:xe(o),y:Te(l),z:0}}unproject(o,l){const h=Oe(o),v=Ve(l);return new G(h,v)}}const bA=At(qe);class bU extends Xu{project(o,l){const h=(l=At(l))*l,v=h*h;return{x:.5*((o=At(o))*(.8707-.131979*h+v*(v*(.003971*h-.001529*v)-.013791))/Math.PI+.5),y:1-.5*(l*(1.007226+h*(.015085+v*(.028874*h-.044475-.005916*v)))/Math.PI+1),z:0}}unproject(o,l){o=(2*o-.5)*Math.PI;let h=l=(2*(1-l)-1)*Math.PI,v=25,f=0,y=h*h;do{y=h*h;const k=y*y;f=(h*(1.007226+y*(.015085+k*(.028874*y-.044475-.005916*k)))-l)/(1.007226+y*(.045255+k*(.259866*y-.311325-.005916*11*k))),h=Rt(h-f,-bA,bA)}while(Math.abs(f)>1e-6&&--v>0);y=h*h;const E=Rt(Yt(o/(.8707+y*(y*(y*y*y*(.003971-.001529*y)-.013791)-.131979))),-180,180),O=Yt(h);return new G(E,O)}}const wA=At(qe);class wU extends Xu{project(o,l){l=At(l),o=At(o);const h=Math.cos(l),v=2/Math.PI,f=Math.acos(h*Math.cos(o/2)),y=Math.sin(f)/f,E=.5*(o*v+2*h*Math.sin(o/2)/y)||0,O=.5*(l+Math.sin(l)/y)||0;return{x:.5*(E/Math.PI+.5),y:1-.5*(O/Math.PI+1),z:0}}unproject(o,l){let h=o=(2*o-.5)*Math.PI,v=l=(2*(1-l)-1)*Math.PI,f=25;const y=1e-6;let E=0,O=0;do{const k=Math.cos(v),w=Math.sin(v),R=2*w*k,D=w*w,P=k*k,A=Math.cos(h/2),F=Math.sin(h/2),q=2*A*F,Z=F*F,ie=1-P*A*A,oe=ie?1/ie:0,te=ie?Math.acos(k*A)*Math.sqrt(1/ie):0,ue=.5*(2*te*k*F+2*h/Math.PI)-o,_e=.5*(te*w+v)-l,Re=.5*oe*(P*Z+te*k*A*D)+1/Math.PI,Ue=oe*(q*R/4-te*w*F),Le=.125*oe*(R*F-te*w*P*q),Fe=.5*oe*(D*A+te*Z*k)+.5,tt=Ue*Le-Fe*Re;E=(_e*Ue-ue*Fe)/tt,O=(ue*Le-_e*Re)/tt,h=Rt(h-E,-Math.PI,Math.PI),v=Rt(v-O,-wA,wA)}while((Math.abs(E)>y||Math.abs(O)>y)&&--f>0);return new G(Yt(h),Yt(v))}}class SA extends Xu{constructor(o){super(o),this.center=o.center||[0,0],this.parallels=o.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(At(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(o,l){const{scale:h,cosPhi:v}=this;return{x:At(o)*v*h+.5,y:-Math.sin(At(l))/v*h+.5,z:0}}unproject(o,l){const{scale:h,cosPhi:v}=this,f=-(l-.5)/h,y=Rt(Yt((o-.5)/h)/v,-180,180),E=Math.asin(Rt(f*v,-1,1)),O=Rt(Yt(E),-qe,qe);return new G(y,O)}}class SU extends xA{constructor(o){super(o),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(o,l,h){const v=rv(o,l,h),f=W_(lc(h));return Pe.vec3.transformMat4(v,v,f),{x:v[0],y:v[1],z:v[2]}}locationPoint(o,l){const h=z(l.lat,l.lng),v=Pe.vec3.normalize([],h),f=o.elevation?o.elevation.getAtPointOrZero(o.locationCoordinate(l),o._centerAltitude):o._centerAltitude,y=Ee(1,0)*Tn*f;Pe.vec3.scaleAndAdd(h,h,v,y);const E=Pe.mat4.identity(new Float64Array(16));return Pe.mat4.multiply(E,o.pixelMatrix,o.globeMatrix),Pe.vec3.transformMat4(h,h,E),new je(h[0],h[1])}pixelsPerMeter(o,l){return Ee(1,0)*l}pixelSpaceConversion(o,l,h){const v=Ee(1,o)*l,f=Zn(Ee(1,45)*l,v,h);return this.pixelsPerMeter(o,l)/f}createTileMatrix(o,l,h){const v=BS(lc(h.canonical));return Pe.mat4.multiply(new Float64Array(16),o.globeMatrix,v)}createInversionMatrix(o,l){const{center:h}=o,v=W_(lc(l));return Pe.mat4.rotateY(v,v,At(h.lng)),Pe.mat4.rotateX(v,v,At(h.lat)),Pe.mat4.scale(v,v,[o._pixelsPerMercatorPixel,o._pixelsPerMercatorPixel,1]),Float32Array.from(v)}pointCoordinate(o,l,h,v){return Hu(o,l,h,!0)||new vt(0,0)}pointCoordinate3D(o,l,h){const v=this.pointCoordinate(o,l,h,0);return[v.x,v.y,v.z]}isPointAboveHorizon(o,l){return!Hu(o,l.x,l.y,!1)}farthestPixelDistance(o){const l=function(v,f){const y=v.cameraToCenterDistance,E=v._centerAltitude*f,O=v._camera,k=v._camera.forward(),w=Pe.vec3.add([],Pe.vec3.scale([],k,-y),[0,0,E]),R=v.worldSize/(2*Math.PI),D=[0,0,-R],P=v.width/v.height,A=Math.tan(v.fovAboveCenter),F=Pe.vec3.scale([],O.up(),A),q=Pe.vec3.scale([],O.right(),A*P),Z=Pe.vec3.normalize([],Pe.vec3.add([],Pe.vec3.add([],k,F),q)),ie=[];let oe;if(new Da(w,Z).closestPointOnSphere(D,R,ie)){const te=Pe.vec3.add([],ie,D),ue=Pe.vec3.sub([],te,w);oe=Math.cos(v.fovAboveCenter)*Pe.vec3.length(ue)}else{const te=Pe.vec3.sub([],w,D),ue=Pe.vec3.sub([],D,w);Pe.vec3.normalize(ue,ue);const _e=Pe.vec3.length(te)-R;oe=Math.sqrt(_e*(_e+2*R));const Re=Math.acos(oe/(R+_e))-Math.acos(Pe.vec3.dot(k,ue));oe*=Math.cos(Re)}return 1.01*oe}(o,this.pixelsPerMeter(o.center.lat,o.worldSize)),h=Uu(o.zoom);if(h>0){const v=yA(o,Ee(1,o.center.lat)*o.worldSize),f=o.worldSize/(2*Math.PI),y=Math.max(o.width,o.height)/o.worldSize*Math.PI;return Zn(l,v+f*(1-Math.cos(y)),Math.pow(h,10))}return l}upVector(o,l,h){return rv(l,h,o,1)}upVectorScale(o){return{metersToTile:Vu(U_(lc(o)))}}}function CA(u){const o=u.parallels,l=!!o&&Math.abs(o[0]+o[1])<.01;switch(u.name){case"mercator":return new xA(u);case"equirectangular":return new _U(u);case"naturalEarth":return new bU(u);case"equalEarth":return new yU(u);case"winkelTripel":return new wU(u);case"albers":return l?new SA(u):new vU(u);case"lambertConformalConic":return l?new SA(u):new xU(u);case"globe":return new SU(u)}throw new Error(`Invalid projection name: ${u.name}`)}const CU=op.VectorTileFeature.types,EU=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function dx(u,o,l,h,v,f,y,E,O,k,w,R,D){const P=E?Math.min(Ku,Math.round(E[0])):0,A=E?Math.min(Ku,Math.round(E[1])):0;u.emplaceBack(o,l,Math.round(32*h),Math.round(32*v),f,y,(P<<1)+(O?1:0),A,16*k,16*w,256*R,256*D)}function hx(u,o,l){u.emplaceBack(o,l)}function fx(u,o,l,h,v,f,y){u.emplaceBack(o,l,h,v,f,y)}function px(u,o,l,h,v){u.emplaceBack(o,l,h,v),u.emplaceBack(o,l,h,v),u.emplaceBack(o,l,h,v),u.emplaceBack(o,l,h,v)}function TU(u){for(const o of u.sections)if(TS(o.text))return!0;return!1}class yC{constructor(o){this.layoutVertexArray=new ku,this.indexArray=new ji,this.programConfigurations=o,this.segments=new io,this.dynamicLayoutVertexArray=new _l,this.opacityVertexArray=new Ug,this.placedSymbolArray=new Xg,this.iconTransitioningVertexArray=new sc,this.globeExtVertexArray=new Hg,this.zOffsetVertexArray=new Fu}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(o,l,h,v,f){this.isEmpty()||(h&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,HH.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,WH.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,EU,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=o.createVertexBuffer(this.iconTransitioningVertexArray,qH.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,UH.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||f)&&(this.zOffsetVertexBuffer=o.createVertexBuffer(this.zOffsetVertexArray,GH.members,!0)),this.opacityVertexBuffer.itemSize=1),(h||v)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}Fn(yC,"SymbolBuffers");class _C{constructor(o,l,h){this.layoutVertexArray=new o,this.layoutAttributes=l,this.indexArray=new h,this.segments=new io,this.collisionVertexArray=new Lu,this.collisionVertexArrayExt=new _l}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,KH.members,!0),this.collisionVertexBufferExt=o.createVertexBuffer(this.collisionVertexArrayExt,XH.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Fn(_C,"CollisionBuffers");class mx{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.lut=o.lut,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(y=>y.fqid),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Pe.mat4.identity([]),this.placementViewportMatrix=Pe.mat4.identity([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=sC(this.zoom,l["text-size"]),this.iconSizeData=sC(this.zoom,l["icon-size"]);const h=this.layers[0].layout,v=h.get("symbol-sort-key"),f=h.get("symbol-z-order");this.canOverlap=h.get("text-allow-overlap")||h.get("icon-allow-overlap")||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=f!=="viewport-y"&&v.constantOr(1)!==void 0,this.sortFeaturesByY=(f==="viewport-y"||f==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=h.get("text-writing-mode").map(y=>Ms[y]),this.stateDependentLayerIds=this.layers.filter(y=>y.isStateDependent()).map(y=>y.id),this.sourceID=o.sourceID,this.projection=o.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=h.get("symbol-z-elevate"),this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new yC(new Ks(this.layers,{zoom:this.zoom,lut:this.lut},o=>o.startsWith("text")||o.startsWith("symbol"))),this.icon=new yC(new Ks(this.layers,{zoom:this.zoom,lut:this.lut},o=>o.startsWith("icon")||o.startsWith("symbol"))),this.glyphOffsetArray=new A_,this.lineVertexArray=new ep,this.symbolInstances=new Zg}calculateGlyphDependencies(o,l,h,v,f){for(const y of o){const E=y.codePointAt(0);if(E===void 0)break;if(l[E]=!0,v&&f&&E<=65535){const O=pv[y];O&&(l[O.charCodeAt(0)]=!0)}}}updateFootprints(o,l){}updateReplacement(o,l){if(l.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=l.updateTime;const h=l.getReplacementRegionsForTile(o.toUnwrapped(),!0);return!eC(this.activeReplacements,h)&&(this.activeReplacements=h,!0)}populate(o,l,h,v){const f=this.layers[0],y=f.layout,E=this.projection.name==="globe",O=y.get("text-font"),k=y.get("text-field"),w=y.get("icon-image"),R=(k.value.kind!=="constant"||k.value.value instanceof da&&!k.value.value.isEmpty()||k.value.value.toString().length>0)&&(O.value.kind!=="constant"||O.value.value.length>0),D=w.value.kind!=="constant"||!!w.value.value||Object.keys(w.parameters).length>0,P=y.get("symbol-sort-key");if(this.features=[],!R&&!D)return;const A=l.iconDependencies,F=l.glyphDependencies,q=l.availableImages,Z=new Zi(this.zoom);for(const{feature:ie,id:oe,index:te,sourceLayerIndex:ue}of o){const _e=f._featureFilter.needGeometry,Re=Qt(ie,_e);if(!f._featureFilter.filter(Z,Re,h))continue;if(_e||(Re.geometry=Et(ie,h,v)),E&&ie.type!==1&&h.z<=5){const tt=Re.geometry,Ne=.98078528056,et=(lt,ct)=>{const xt=rv(lt.x,lt.y,h,1),Pt=rv(ct.x,ct.y,h,1);return Pe.vec3.dot(xt,Pt)<Ne};for(let lt=0;lt<tt.length;lt++)tt[lt]=jt(tt[lt],et)}let Ue,Le;if(R){const tt=f.getValueAndResolveTokens("text-field",Re,h,q),Ne=da.factory(tt);TU(Ne)&&(this.hasRTLText=!0),(!this.hasRTLText||kg()==="unavailable"||this.hasRTLText&&Ya.isParsed())&&(Ue=JH(Ne,f,Re))}if(D){const tt=f.getValueAndResolveTokens("icon-image",Re,h,q);Le=tt instanceof ya?tt:ya.fromString(tt)}if(!Ue&&!Le)continue;const Fe=this.sortFeaturesByKey?P.evaluate(Re,{},h):void 0;if(this.features.push({id:oe,text:Ue,icon:Le,index:te,sourceLayerIndex:ue,geometry:Re.geometry,properties:ie.properties,type:CU[ie.type],sortKey:Fe}),Le&&(A[Le.namePrimary]=!0,Le.nameSecondary&&(A[Le.nameSecondary]=!0)),Ue){const tt=O.evaluate(Re,{},h).join(","),Ne=y.get("text-rotation-alignment")==="map"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ms.vertical)>=0;for(const et of Ue.sections)if(et.image)A[et.image.namePrimary]=!0;else{const lt=Rg(Ue.toString()),ct=et.fontStack||tt,xt=F[ct]=F[ct]||{};this.calculateGlyphDependencies(et.text,xt,Ne,this.allowVerticalPlacement,lt)}}}y.get("symbol-placement")==="line"&&(this.features=function(ie){const oe={},te={},ue=[];let _e=0;function Re(tt){ue.push(ie[tt]),_e++}function Ue(tt,Ne,et){const lt=te[tt];return delete te[tt],te[Ne]=lt,ue[lt].geometry[0].pop(),ue[lt].geometry[0]=ue[lt].geometry[0].concat(et[0]),lt}function Le(tt,Ne,et){const lt=oe[Ne];return delete oe[Ne],oe[tt]=lt,ue[lt].geometry[0].shift(),ue[lt].geometry[0]=et[0].concat(ue[lt].geometry[0]),lt}function Fe(tt,Ne,et){const lt=et?Ne[0][Ne[0].length-1]:Ne[0][0];return`${tt}:${lt.x}:${lt.y}`}for(let tt=0;tt<ie.length;tt++){const Ne=ie[tt],et=Ne.geometry,lt=Ne.text?Ne.text.toString():null;if(!lt){Re(tt);continue}const ct=Fe(lt,et),xt=Fe(lt,et,!0);if(ct in te&&xt in oe&&te[ct]!==oe[xt]){const Pt=Le(ct,xt,et),$t=Ue(ct,xt,ue[Pt].geometry);delete oe[ct],delete te[xt],te[Fe(lt,ue[$t].geometry,!0)]=$t,ue[Pt].geometry=null}else ct in te?Ue(ct,xt,et):xt in oe?Le(ct,xt,et):(Re(tt),oe[ct]=_e-1,te[xt]=_e-1)}return ue.filter(tt=>tt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ie,oe)=>ie.sortKey-oe.sortKey)}update(o,l,h,v,f){const y=Object.keys(o).length!==0;if(y&&!this.stateDependentLayers.length)return;const E=y?this.stateDependentLayers:this.layers;this.text.programConfigurations.updatePaintArrays(o,l,E,h,v,f),this.icon.programConfigurations.updatePaintArrays(o,l,E,h,v,f)}updateZOffset(){const o=(f,y,E)=>{h+=y,h>f.length&&f.resize(h);for(let O=-y;O<0;O++)f.emplace(O+h,E)},l=(f,y,E)=>{v+=y,v>f.length&&f.resize(v);for(let O=-y;O<0;O++)f.emplace(O+v,E)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let h=0,v=0;for(let f=0;f<this.symbolInstances.length;f++){const y=this.symbolInstances.get(f),{numHorizontalGlyphVertices:E,numVerticalGlyphVertices:O,numIconVertices:k}=y,w=y.zOffset,R=k>0;if((E>0||O>0)&&(o(this.text.zOffsetVertexArray,E,w),o(this.text.zOffsetVertexArray,O,w)),R){const{placedIconSymbolIndex:D,verticalPlacedIconSymbolIndex:P}=y;D>=0&&l(this.icon.zOffsetVertexArray,k,w),P>=0&&l(this.icon.zOffsetVertexArray,y.numVerticalIconVertices,w)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=CA(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,l){const h=this.lineVertexArray.length;if(o.segment!==void 0)for(const{x:v,y:f}of l)this.lineVertexArray.emplaceBack(v,f);return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(o,l,h,v,f,y,E,O,k,w,R,D,P,A,F,q){const Z=o.indexArray,ie=o.layoutVertexArray,oe=o.globeExtVertexArray,te=o.segments.prepareSegment(4*l.length,ie,Z,this.canOverlap?y.sortKey:void 0),ue=this.glyphOffsetArray.length,_e=te.vertexLength,Re=this.allowVerticalPlacement&&E===Ms.vertical?Math.PI/2:0,Ue=y.text&&y.text.sections;for(let Fe=0;Fe<l.length;Fe++){const{tl:tt,tr:Ne,bl:et,br:lt,texPrimary:ct,texSecondary:xt,pixelOffsetTL:Pt,pixelOffsetBR:$t,minFontScaleX:Tt,minFontScaleY:Ht,glyphOffset:sn,isSDF:Bt,sectionIndex:Nn}=l[Fe],En=te.vertexLength,pn=sn[1];if(dx(ie,k.x,k.y,tt.x,pn+tt.y,ct.x,ct.y,h,Bt,Pt.x,Pt.y,Tt,Ht),dx(ie,k.x,k.y,Ne.x,pn+Ne.y,ct.x+ct.w,ct.y,h,Bt,$t.x,Pt.y,Tt,Ht),dx(ie,k.x,k.y,et.x,pn+et.y,ct.x,ct.y+ct.h,h,Bt,Pt.x,$t.y,Tt,Ht),dx(ie,k.x,k.y,lt.x,pn+lt.y,ct.x+ct.w,ct.y+ct.h,h,Bt,$t.x,$t.y,Tt,Ht),O){const{x:on,y:er,z:Ln}=O.anchor,[Vn,xr,Or]=O.up;fx(oe,on,er,Ln,Vn,xr,Or),fx(oe,on,er,Ln,Vn,xr,Or),fx(oe,on,er,Ln,Vn,xr,Or),fx(oe,on,er,Ln,Vn,xr,Or),px(o.dynamicLayoutVertexArray,on,er,Ln,Re)}else px(o.dynamicLayoutVertexArray,k.x,k.y,k.z,Re);if(q){const on=xt||ct;hx(o.iconTransitioningVertexArray,on.x,on.y),hx(o.iconTransitioningVertexArray,on.x+on.w,on.y),hx(o.iconTransitioningVertexArray,on.x,on.y+on.h),hx(o.iconTransitioningVertexArray,on.x+on.w,on.y+on.h)}Z.emplaceBack(En,En+1,En+2),Z.emplaceBack(En+1,En+2,En+3),te.vertexLength+=4,te.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(sn[0]),Fe!==l.length-1&&Nn===l[Fe+1].sectionIndex||o.programConfigurations.populatePaintArrays(ie.length,y,y.index,{},P,A,F,Ue&&Ue[Nn])}const Le=O?O.anchor:k;o.placedSymbolArray.emplaceBack(Le.x,Le.y,Le.z,k.x,k.y,ue,this.glyphOffsetArray.length-ue,_e,w,R,k.segment,h?h[0]:0,h?h[1]:0,v[0],v[1],E,0,!1,0,D,0)}_commitLayoutVertex(o,l,h,v,f,y,E){o.emplaceBack(l,h,v,f,y,Math.round(E.x),Math.round(E.y))}_addCollisionDebugVertices(o,l,h,v,f,y,E){const O=h.segments.prepareSegment(4,h.layoutVertexArray,h.indexArray),k=O.vertexLength,w=E.tileAnchorX,R=E.tileAnchorY;for(let P=0;P<4;P++)h.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(h.collisionVertexArrayExt,l,o.padding,E.zOffset),this._commitLayoutVertex(h.layoutVertexArray,v,f,y,w,R,new je(o.x1,o.y1)),this._commitLayoutVertex(h.layoutVertexArray,v,f,y,w,R,new je(o.x2,o.y1)),this._commitLayoutVertex(h.layoutVertexArray,v,f,y,w,R,new je(o.x2,o.y2)),this._commitLayoutVertex(h.layoutVertexArray,v,f,y,w,R,new je(o.x1,o.y2)),O.vertexLength+=4;const D=h.indexArray;D.emplaceBack(k,k+1),D.emplaceBack(k+1,k+2),D.emplaceBack(k+2,k+3),D.emplaceBack(k+3,k),O.primitiveLength+=4}_addTextDebugCollisionBoxes(o,l,h,v,f,y){for(let E=v;E<f;E++){const O=h.get(E),k=this.getSymbolInstanceTextSize(o,y,l,E);this._addCollisionDebugVertices(O,k,this.textCollisionBox,O.projectedAnchorX,O.projectedAnchorY,O.projectedAnchorZ,y)}}_addIconDebugCollisionBoxes(o,l,h,v,f,y){for(let E=v;E<f;E++){const O=h.get(E),k=this.getSymbolInstanceIconSize(o,l,y.placedIconSymbolIndex);this._addCollisionDebugVertices(O,k,this.iconCollisionBox,O.projectedAnchorX,O.projectedAnchorY,O.projectedAnchorZ,y)}}generateCollisionDebugBuffers(o,l,h){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new _C(Kf,GO.members,sc),this.iconCollisionBox=new _C(Kf,GO.members,sc);const v=ap(this.iconSizeData,o),f=ap(this.textSizeData,o,h);for(let y=0;y<this.symbolInstances.length;y++){const E=this.symbolInstances.get(y);this._addTextDebugCollisionBoxes(f,o,l,E.textBoxStartIndex,E.textBoxEndIndex,E),this._addTextDebugCollisionBoxes(f,o,l,E.verticalTextBoxStartIndex,E.verticalTextBoxEndIndex,E),this._addIconDebugCollisionBoxes(v,o,l,E.iconBoxStartIndex,E.iconBoxEndIndex,E),this._addIconDebugCollisionBoxes(v,o,l,E.verticalIconBoxStartIndex,E.verticalIconBoxEndIndex,E)}}getSymbolInstanceTextSize(o,l,h,v){const f=this.text.placedSymbolArray.get(l.rightJustifiedTextSymbolIndex>=0?l.rightJustifiedTextSymbolIndex:l.centerJustifiedTextSymbolIndex>=0?l.centerJustifiedTextSymbolIndex:l.leftJustifiedTextSymbolIndex>=0?l.leftJustifiedTextSymbolIndex:l.verticalPlacedTextSymbolIndex>=0?l.verticalPlacedTextSymbolIndex:v),y=nx(this.textSizeData,o,f)/ra;return this.tilePixelRatio*y}getSymbolInstanceIconSize(o,l,h){const v=this.icon.placedSymbolArray.get(h),f=nx(this.iconSizeData,o,v);return this.tilePixelRatio*f}_commitDebugCollisionVertexUpdate(o,l,h,v){o.emplaceBack(l,-h,-h,v),o.emplaceBack(l,h,-h,v),o.emplaceBack(l,h,h,v),o.emplaceBack(l,-h,h,v)}_updateTextDebugCollisionBoxes(o,l,h,v,f,y,E){for(let O=v;O<f;O++){const k=h.get(O),w=this.getSymbolInstanceTextSize(o,y,l,O);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,w,k.padding,y.zOffset)}}_updateIconDebugCollisionBoxes(o,l,h,v,f,y,E){for(let O=v;O<f;O++){const k=h.get(O),w=this.getSymbolInstanceIconSize(o,l,y.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,w,k.padding,y.zOffset)}}updateCollisionDebugBuffers(o,l,h,v){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const f=ap(this.iconSizeData,o,v),y=ap(this.textSizeData,o,h);for(let E=0;E<this.symbolInstances.length;E++){const O=this.symbolInstances.get(E);this._updateTextDebugCollisionBoxes(y,o,l,O.textBoxStartIndex,O.textBoxEndIndex,O,h),this._updateTextDebugCollisionBoxes(y,o,l,O.verticalTextBoxStartIndex,O.verticalTextBoxEndIndex,O,h),this._updateIconDebugCollisionBoxes(f,o,l,O.iconBoxStartIndex,O.iconBoxEndIndex,O,v),this._updateIconDebugCollisionBoxes(f,o,l,O.verticalIconBoxStartIndex,O.verticalIconBoxEndIndex,O,v)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(o,l,h,v,f,y,E,O,k){const w={};if(l<h){const{x1:R,y1:D,x2:P,y2:A,padding:F,projectedAnchorX:q,projectedAnchorY:Z,projectedAnchorZ:ie,tileAnchorX:oe,tileAnchorY:te,featureIndex:ue}=o.get(l);w.textBox={x1:R,y1:D,x2:P,y2:A,padding:F,projectedAnchorX:q,projectedAnchorY:Z,projectedAnchorZ:ie,tileAnchorX:oe,tileAnchorY:te},w.textFeatureIndex=ue}if(v<f){const{x1:R,y1:D,x2:P,y2:A,padding:F,projectedAnchorX:q,projectedAnchorY:Z,projectedAnchorZ:ie,tileAnchorX:oe,tileAnchorY:te,featureIndex:ue}=o.get(v);w.verticalTextBox={x1:R,y1:D,x2:P,y2:A,padding:F,projectedAnchorX:q,projectedAnchorY:Z,projectedAnchorZ:ie,tileAnchorX:oe,tileAnchorY:te},w.verticalTextFeatureIndex=ue}if(y<E){const{x1:R,y1:D,x2:P,y2:A,padding:F,projectedAnchorX:q,projectedAnchorY:Z,projectedAnchorZ:ie,tileAnchorX:oe,tileAnchorY:te,featureIndex:ue}=o.get(y);w.iconBox={x1:R,y1:D,x2:P,y2:A,padding:F,projectedAnchorX:q,projectedAnchorY:Z,projectedAnchorZ:ie,tileAnchorX:oe,tileAnchorY:te},w.iconFeatureIndex=ue}if(O<k){const{x1:R,y1:D,x2:P,y2:A,padding:F,projectedAnchorX:q,projectedAnchorY:Z,projectedAnchorZ:ie,tileAnchorX:oe,tileAnchorY:te,featureIndex:ue}=o.get(O);w.verticalIconBox={x1:R,y1:D,x2:P,y2:A,padding:F,projectedAnchorX:q,projectedAnchorY:Z,projectedAnchorZ:ie,tileAnchorX:oe,tileAnchorY:te},w.verticalIconFeatureIndex=ue}return w}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const h=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(o,l){const h=o.placedSymbolArray.get(l),v=h.vertexStartIndex+4*h.numGlyphs;for(let f=h.vertexStartIndex;f<v;f+=4)o.indexArray.emplaceBack(f,f+1,f+2),o.indexArray.emplaceBack(f+1,f+2,f+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(o),h=Math.cos(o),v=[],f=[],y=[];for(let E=0;E<this.symbolInstances.length;++E){y.push(E);const O=this.symbolInstances.get(E);v.push(0|Math.round(l*O.tileAnchorX+h*O.tileAnchorY)),f.push(O.featureIndex)}return y.sort((E,O)=>v[E]-v[O]||f[O]-f[E]),y}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let o=0;o<this.symbolInstances.length;++o)this.symbolInstanceIndexesSortedZOffset.push(o)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((o,l)=>this.symbolInstances.get(l).zOffset-this.symbolInstances.get(o).zOffset)}addToSortKeyRanges(o,l){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===l?h.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const h=this.symbolInstances.get(l);this.featureSortOrder.push(h.featureIndex);const{rightJustifiedTextSymbolIndex:v,centerJustifiedTextSymbolIndex:f,leftJustifiedTextSymbolIndex:y,verticalPlacedTextSymbolIndex:E,placedIconSymbolIndex:O,verticalPlacedIconSymbolIndex:k}=h;v>=0&&this.addIndicesForPlacedSymbol(this.text,v),f>=0&&f!==v&&this.addIndicesForPlacedSymbol(this.text,f),y>=0&&y!==f&&y!==v&&this.addIndicesForPlacedSymbol(this.text,y),E>=0&&this.addIndicesForPlacedSymbol(this.text,E),O>=0&&this.addIndicesForPlacedSymbol(this.icon,O),k>=0&&this.addIndicesForPlacedSymbol(this.icon,k)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let EA,TA,xC;Fn(mx,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),mx.addDynamicAttributes=px;class IA{constructor(o){this.type=o.property.overrides?o.property.overrides.runtimeType:dr,this.defaultValue=o}evaluate(o){if(o.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(o.formattedSection))return l.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Fn(IA,"FormatSectionOverride",{omit:["defaultValue"]});const bC=()=>xC||(xC={layout:EA||(EA=new Ri({"symbol-placement":new mn(Ot.layout_symbol["symbol-placement"]),"symbol-spacing":new mn(Ot.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new mn(Ot.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Yn(Ot.layout_symbol["symbol-sort-key"]),"symbol-z-order":new mn(Ot.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new mn(Ot.layout_symbol["symbol-z-elevate"]),"symbol-elevation-reference":new mn(Ot.layout_symbol["symbol-elevation-reference"]),"icon-allow-overlap":new mn(Ot.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new mn(Ot.layout_symbol["icon-ignore-placement"]),"icon-optional":new mn(Ot.layout_symbol["icon-optional"]),"icon-rotation-alignment":new mn(Ot.layout_symbol["icon-rotation-alignment"]),"icon-size":new Yn(Ot.layout_symbol["icon-size"]),"icon-size-scale-range":new mn(Ot.layout_symbol["icon-size-scale-range"]),"icon-text-fit":new Yn(Ot.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Yn(Ot.layout_symbol["icon-text-fit-padding"]),"icon-image":new Yn(Ot.layout_symbol["icon-image"]),"icon-rotate":new Yn(Ot.layout_symbol["icon-rotate"]),"icon-padding":new mn(Ot.layout_symbol["icon-padding"]),"icon-keep-upright":new mn(Ot.layout_symbol["icon-keep-upright"]),"icon-offset":new Yn(Ot.layout_symbol["icon-offset"]),"icon-anchor":new Yn(Ot.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new mn(Ot.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new mn(Ot.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new mn(Ot.layout_symbol["text-rotation-alignment"]),"text-field":new Yn(Ot.layout_symbol["text-field"]),"text-font":new Yn(Ot.layout_symbol["text-font"]),"text-size":new Yn(Ot.layout_symbol["text-size"]),"text-size-scale-range":new mn(Ot.layout_symbol["text-size-scale-range"]),"text-max-width":new Yn(Ot.layout_symbol["text-max-width"]),"text-line-height":new Yn(Ot.layout_symbol["text-line-height"]),"text-letter-spacing":new Yn(Ot.layout_symbol["text-letter-spacing"]),"text-justify":new Yn(Ot.layout_symbol["text-justify"]),"text-radial-offset":new Yn(Ot.layout_symbol["text-radial-offset"]),"text-variable-anchor":new mn(Ot.layout_symbol["text-variable-anchor"]),"text-anchor":new Yn(Ot.layout_symbol["text-anchor"]),"text-max-angle":new mn(Ot.layout_symbol["text-max-angle"]),"text-writing-mode":new mn(Ot.layout_symbol["text-writing-mode"]),"text-rotate":new Yn(Ot.layout_symbol["text-rotate"]),"text-padding":new mn(Ot.layout_symbol["text-padding"]),"text-keep-upright":new mn(Ot.layout_symbol["text-keep-upright"]),"text-transform":new Yn(Ot.layout_symbol["text-transform"]),"text-offset":new Yn(Ot.layout_symbol["text-offset"]),"text-allow-overlap":new mn(Ot.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new mn(Ot.layout_symbol["text-ignore-placement"]),"text-optional":new mn(Ot.layout_symbol["text-optional"]),visibility:new mn(Ot.layout_symbol.visibility)})),paint:TA||(TA=new Ri({"icon-opacity":new Yn(Ot.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new Yn(Ot.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new Yn(Ot.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new Yn(Ot.paint_symbol["text-emissive-strength"]),"icon-color":new Yn(Ot.paint_symbol["icon-color"]),"icon-halo-color":new Yn(Ot.paint_symbol["icon-halo-color"]),"icon-halo-width":new Yn(Ot.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Yn(Ot.paint_symbol["icon-halo-blur"]),"icon-translate":new mn(Ot.paint_symbol["icon-translate"]),"icon-translate-anchor":new mn(Ot.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new Yn(Ot.paint_symbol["icon-image-cross-fade"]),"text-opacity":new Yn(Ot.paint_symbol["text-opacity"]),"text-occlusion-opacity":new Yn(Ot.paint_symbol["text-occlusion-opacity"]),"text-color":new Yn(Ot.paint_symbol["text-color"],{runtimeType:hi,getOverride:u=>u.textColor,hasOverride:u=>!!u.textColor}),"text-halo-color":new Yn(Ot.paint_symbol["text-halo-color"]),"text-halo-width":new Yn(Ot.paint_symbol["text-halo-width"]),"text-halo-blur":new Yn(Ot.paint_symbol["text-halo-blur"]),"text-translate":new mn(Ot.paint_symbol["text-translate"]),"text-translate-anchor":new mn(Ot.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new mn(Ot.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new mn(Ot.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new mn(Ot.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new mn(Ot.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new Yn(Ot.paint_symbol["symbol-z-offset"])}))},xC);class gx extends xa{constructor(o,l,h,v){super(o,bC(),l,h,v),this._colorAdjustmentMatrix=Pe.mat4.identity([]),this.hasInitialOcclusionOpacityProperties=o.paint!==void 0&&("icon-occlusion-opacity"in o.paint||"text-occlusion-opacity"in o.paint)}recalculate(o,l){super.recalculate(o,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const h=this.layout.get("text-writing-mode");if(h){const v=[];for(const f of h)v.indexOf(f)<0&&v.push(f);this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(o,l,h,v){return this._saturation===o&&this._contrast===l&&this._brightnessMin===h&&this._brightnessMax===v||(this._colorAdjustmentMatrix=function(f,y,E,O){f=Se(f),y=ye(y);const k=Pe.mat4.create(),w=f/3,R=1-2*w,D=[R,w,w,0,w,R,w,0,w,w,R,0,0,0,0,1],P=.5-.5*y,A=O-E;return Pe.mat4.multiply(k,[A,0,0,0,0,A,0,0,0,0,A,0,E,E,E,1],[y,0,0,0,0,y,0,0,0,0,y,0,P,P,P,1]),Pe.mat4.multiply(k,k,D),k}(o,l,h,v),this._saturation=o,this._contrast=l,this._brightnessMin=h,this._brightnessMax=v),this._colorAdjustmentMatrix}getValueAndResolveTokens(o,l,h,v){const f=this.layout.get(o).evaluate(l,{},h,v),y=this._unevaluatedLayout._values[o];return y.isDataDriven()||kf(y.value)||!f?f:function(E,O){return O.replace(/{([^{}]+)}/g,(k,w)=>w in E?String(E[w]):"")}(l.properties,f)}createBucket(o){return new mx(o)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const o of bC().paint.overridableProperties){if(!gx.hasPaintOverride(this.layout,o))continue;const l=this.paint.get(o),h=new IA(l),v=new Tg(h,l.property.specification,this.scope,this.options);let f=null;f=l.value.kind==="constant"||l.value.kind==="source"?new zf("source",v):new ih("composite",v,l.value.zoomStops,l.value._interpolationType),this.paint._values[o]=new Ou(l.property,f,l.parameters)}}_handleOverridablePaintPropertyUpdate(o,l,h){return!(!this.layout||l.isDataDriven()||h.isDataDriven())&&gx.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,l){const h=o.get("text-field"),v=bC().paint.properties[l];let f=!1;const y=E=>{for(const O of E)if(v.overrides&&v.overrides.hasOverride(O))return void(f=!0)};if(h.value.kind==="constant"&&h.value.value instanceof da)y(h.value.value.sections);else if(h.value.kind==="source"){const E=k=>{f||(k instanceof Ss&&_o(k.value)===ws?y(k.value.sections):k instanceof pu?y(k.sections):k.eachChild(E))},O=h.value;O._styleExpression&&E(O._styleExpression.expression)}return f}getProgramIds(){return["symbol"]}getDefaultProgramParams(o,l,h){return{config:new Cl(this,{zoom:l,lut:h}),overrideFog:!1}}}let MA,PA,RA,OA;var wC=Qr([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function SC(u){switch(u){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function CC(u){switch(u){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class EC{constructor(o,l,h,v){this.context=o,this.format=h,this.useMipmap=v&&v.useMipmap,this.texture=o.gl.createTexture(),this.update(l,{premultiply:v&&v.premultiply})}update(o,l){const h=o&&o instanceof HTMLVideoElement&&o.width===0?o.videoWidth:o.width,v=o&&o instanceof HTMLVideoElement&&o.height===0?o.videoHeight:o.height,{context:f}=this,{gl:y}=f,{x:E,y:O}=l&&l.position?l.position:{x:0,y:0},k=Math.max(E+h,this.size?this.size[0]:0),w=Math.max(O+v,this.size?this.size[1]:0);!this.size||this.size[0]===k&&this.size[1]===w||(y.bindTexture(y.TEXTURE_2D,null),y.deleteTexture(this.texture),this.texture=y.createTexture(),this.size=null),y.bindTexture(y.TEXTURE_2D,this.texture),f.pixelStoreUnpackFlipY.set(!1),f.pixelStoreUnpack.set(1),f.pixelStoreUnpackPremultiplyAlpha.set(this.format===y.RGBA8&&(!l||l.premultiply!==!1));const R=o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||ImageBitmap&&o instanceof ImageBitmap;if(!this.size&&k>0&&w>0){const D=this.useMipmap?Math.floor(Math.log2(Math.max(k,w)))+1:1;y.texStorage2D(y.TEXTURE_2D,D,this.format,k,w),this.size=[k,w]}if(this.size)if(R)y.texSubImage2D(y.TEXTURE_2D,0,E,O,SC(this.format),CC(this.format),o);else{const D=o.data;D&&y.texSubImage2D(y.TEXTURE_2D,0,E,O,h,v,SC(this.format),CC(this.format),D)}this.useMipmap&&y.generateMipmap(y.TEXTURE_2D)}bind(o,l,h=!1){const{context:v}=this,{gl:f}=v;f.bindTexture(f.TEXTURE_2D,this.texture),o!==this.minFilter&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,o),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,this.useMipmap&&!h?o===f.NEAREST?f.NEAREST_MIPMAP_NEAREST:f.LINEAR_MIPMAP_LINEAR:o),this.minFilter=o),l!==this.wrapS&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,l),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,l),this.wrapS=l)}bindExtraParam(o,l,h,v){const{context:f}=this,{gl:y}=f;y.bindTexture(y.TEXTURE_2D,this.texture),l!==this.magFilter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,l),this.magFilter=l),o!==this.minFilter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,this.useMipmap?o===y.NEAREST?y.NEAREST_MIPMAP_NEAREST:y.LINEAR_MIPMAP_LINEAR:o),this.minFilter=o),h!==this.wrapS&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,h),this.wrapS=h),v!==this.wrapT&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,v),this.wrapT=v)}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}class vx{constructor(o,l){this.context=o,this.texture=l}bind(o,l){const{context:h}=this,{gl:v}=h;v.bindTexture(v.TEXTURE_2D,this.texture),o!==this.minFilter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,o),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,o),this.minFilter=o),l!==this.wrapS&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,l),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,l),this.wrapS=l)}}function yx(u,o,l,h,v,f,y,E){const O=[u,o,1,l,h,1,v,f,1],k=[y,E,1],w=Pe.mat3.adjoint([],O),[R,D,P]=Pe.vec3.transformMat3(k,k,w);return Pe.mat3.multiply(O,O,[R,0,0,0,D,0,0,0,P])}function AA(u,o,l,h,v,f,y,E){const O=function(k,w,R,D,P,A,F,q){const Z=yx(0,0,1,0,1,1,0,1),ie=yx(k,w,R,D,P,A,F,q),oe=Pe.mat3.adjoint([],Z);return Pe.mat3.multiply(ie,ie,oe)}(u,o,l,h,v,f,y,E);return[O[2]/O[8]/Tn,O[5]/O[8]/Tn]}function _x(u){return[u[0],Math.min(Math.max(u[1],-qe),qe)]}class DA extends jn{constructor(o,l,h,v){super(),this.id=o,this.dispatcher=h,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(v),this.options=l,this._dirty=!1}load(o,l){if(this._loaded=l||!1,this.fire(new Gi("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return o&&(this.coordinates=o),this._loaded=!0,void this._finishLoading();this._imageRequest=ar(this.map._requestManager.transformRequest(this.url,Ei.Image),(h,v)=>{this._imageRequest=null,this._loaded=!0,h?this.fire(new Xi(h)):v&&(this.image=v instanceof HTMLImageElement?kt.getImageData(v):v,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,o&&(this.coordinates=o),this._finishLoading())})}loaded(){return this._loaded}updateImage(o){return o.url?(this._imageRequest&&o.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=o.url,this.load(o.coordinates,this._loaded),this):this}setTexture(o){if(!(o.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new vx(this.map.painter.context,o.handle),this.width=o.dimensions[0],this.height=o.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new Gi("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}onRemove(o){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof vx||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(o){if(this.coordinates=o,this._boundsArray=void 0,this._unsupportedCoords=!1,!o.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let l=o[0][1],h=o[0][1];for(const f of o)f[1]>h&&(h=f[1]),f[1]<l&&(l=f[1]);const v=(h+l)/2;if(v>qe?this.onNorthPole=!0:v<-qe&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const f=o.map(vt.fromLngLat);this.tileID=function(y){let E=1/0,O=1/0,k=-1/0,w=-1/0;for(const F of y)E=Math.min(E,F.x),O=Math.min(O,F.y),k=Math.max(k,F.x),w=Math.max(w,F.y);const R=Math.max(k-E,w-O),D=Math.max(0,Math.floor(-Math.log(R)/Math.LN2)),P=Math.pow(2,D);let A=Math.floor((E+k)/2*P);return A>1&&(A-=1),new Ro(D,A,Math.floor((O+w)/2*P))}(f),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new Gi("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(o){for(const Z in this.tiles){const ie=this.tiles[Z];ie.state!=="loaded"&&(ie.state="loaded",ie.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const l=_v(new Ro(0,0,0),this.map.transform.projection),h=[l.projection.project(this.coordinates[0][0],this.coordinates[0][1]),l.projection.project(this.coordinates[1][0],this.coordinates[1][1]),l.projection.project(this.coordinates[2][0],this.coordinates[2][1]),l.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(Z){const ie=Z[1].x-Z[0].x,oe=Z[1].y-Z[0].y,te=Z[2].x-Z[1].x,ue=Z[2].y-Z[1].y,_e=Z[3].x-Z[2].x,Re=Z[3].y-Z[2].y,Ue=Z[0].x-Z[3].x,Le=Z[0].y-Z[3].y,Fe=ie*ue-te*oe,tt=te*Re-_e*ue,Ne=_e*Le-Ue*Re,et=Ue*oe-ie*Le;return Fe>0&&tt>0&&Ne>0&&et>0||Fe<0&&tt<0&&Ne<0&&et<0}(h))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const v=_v(this.tileID,this.map.transform.projection),[f,y,E,O]=this.coordinates.map(Z=>{const ie=v.projection.project(Z[0],Z[1]);return _A(v,ie)._round()});this.perspectiveTransform=AA(f.x,f.y,y.x,y.y,E.x,E.y,O.x,O.y);const k=this._boundsArray=new $u;k.emplaceBack(f.x,f.y,0,0),k.emplaceBack(y.x,y.y,Tn,0),k.emplaceBack(O.x,O.y,0,Tn),k.emplaceBack(E.x,E.y,Tn,Tn),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=o.createVertexBuffer(k,wC.members),this.boundsSegments=io.simpleSegment(0,0,4,2);const w=[],R=[_x((D=this.coordinates)[0]),_x(D[1]),_x(D[2]),_x(D[3])];var D;const[P,A,F,q]=function(Z){let ie=Z[0][0],oe=ie,te=Z[0][1],ue=te;for(let _e=1;_e<Z.length;_e++)Z[_e][0]<ie?ie=Z[_e][0]:Z[_e][0]>oe&&(oe=Z[_e][0]),Z[_e][1]<te?te=Z[_e][1]:Z[_e][1]>ue&&(ue=Z[_e][1]);return[ie,te,oe-ie,ue-te]}(R);{const Z=new $u,[ie,oe,te,ue]=function(Pt){let $t=Pt[0].x,Tt=$t,Ht=Pt[0].y,sn=Ht;for(let Bt=1;Bt<Pt.length;Bt++)Pt[Bt].x<$t?$t=Pt[Bt].x:Pt[Bt].x>Tt&&(Tt=Pt[Bt].x),Pt[Bt].y<Ht?Ht=Pt[Bt].y:Pt[Bt].y>sn&&(sn=Pt[Bt].y);return[$t,Ht,Tt-$t,sn-Ht]}(h),_e=Pt=>[(Pt.x-ie)/te,(Pt.y-oe)/ue],[Re,Ue,Le,Fe]=h.map(_e),tt=function(Pt,$t,Tt,Ht,sn,Bt,Nn,En){const pn=yx(0,0,1,0,1,1,0,1),on=yx(Pt,$t,Tt,Ht,sn,Bt,Nn,En),er=Pe.mat3.adjoint([],on);return Pe.mat3.multiply(pn,pn,er)}(Re[0],Re[1],Ue[0],Ue[1],Le[0],Le[1],Fe[0],Fe[1]);this.elevatedGlobePerspectiveTransform=AA(Re[0],Re[1],Ue[0],Ue[1],Le[0],Le[1],Fe[0],Fe[1]);const Ne=(Pt,$t)=>{w.push(Pt.lng);const Tt=Math.round((Pt.lng-P)/F*Tn),Ht=Math.round((Pt.lat-A)/q*Tn),sn=_e($t),Bt=Pe.vec3.transformMat3([],[sn[0],sn[1],1],tt),Nn=Math.round(Bt[0]/Bt[2]*Tn),En=Math.round(Bt[1]/Bt[2]*Tn);Z.emplaceBack(Tt,Ht,Nn,En)},et=h[3].x-h[0].x,lt=h[3].y-h[0].y,ct=h[2].x-h[1].x,xt=h[2].y-h[1].y;for(let Pt=0;Pt<65;Pt++){const $t=Pt/64,Tt=[h[0].x+$t*et,h[0].y+$t*lt],Ht=[h[1].x+$t*ct,h[1].y+$t*xt],sn=Ht[0]-Tt[0],Bt=Ht[1]-Tt[1];for(let Nn=0;Nn<65;Nn++){const En=Nn/64,pn={x:Tt[0]+sn*En,y:Tt[1]+Bt*En};Ne(l.projection.unproject(pn.x,pn.y),pn)}}this.elevatedGlobeVertexBuffer=o.createVertexBuffer(Z,wC.members)}{this.maxLongitudeTriangleSize=0;let Z=[],ie=new ji;const oe=(te,ue,_e)=>{ie.emplaceBack(te,ue,_e);const Re=w[te],Ue=w[ue],Le=w[_e],Fe=Math.min(Math.min(Re,Ue),Le),tt=Math.max(Math.max(Re,Ue),Le)-Fe;tt>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=tt),Z.push(Fe+tt/2)};for(let te=0;te<64;te++)for(let ue=0;ue<64;ue++){const _e=65*te+ue,Re=_e+1,Ue=_e+65,Le=Ue+1;oe(_e,Ue,Re),oe(Re,Ue,Le)}[Z,ie]=function(te,ue){const _e=Array.from({length:te.length},(Le,Fe)=>Fe);_e.sort((Le,Fe)=>te[Le]-te[Fe]);const Re=[],Ue=new ji;for(let Le=0;Le<_e.length;Le++){const Fe=_e[Le];Re.push(te[Fe]);const tt=3*Fe,Ne=tt+1;Ue.emplaceBack(ue.uint16[tt],ue.uint16[Ne],ue.uint16[Ne+1])}return[Re,Ue]}(Z,ie),this.elevatedGlobeTrianglesCenterLongitudes=Z,this.elevatedGlobeIndexBuffer=o.createIndexBuffer(ie)}this.elevatedGlobeSegments=io.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,F/Tn,0,q/Tn,0,0,A,P,0])}prepare(){const o=Object.keys(this.tiles).length!==0;if(this.tileID&&!o)return;const l=this.map.painter.context,h=l.gl;!this._dirty||this.texture instanceof vx||(this.texture?this.texture.update(this.image):(this.texture=new EC(l,this.image,h.RGBA8),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE)),this._dirty=!1),o&&this._prepareData(l)}loadTile(o,l){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},l(null)):(o.state="errored",l(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(o){const l=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!l)return null;const h=this.elevatedGlobeTrianglesCenterLongitudes;let v=(f=o+180)+360*Math.round((h[0]-f)/360);var f;const y=new io,E=(R,D)=>{y.segments.push({vertexOffset:0,primitiveOffset:R,vertexLength:l.segments[0].vertexLength,primitiveLength:D,sortKey:void 0,vaos:{}})},O=.51*this.maxLongitudeTriangleSize;if(Math.abs(h[0]-v)<=O){const R=ft(h,0,h.length,v+O);return R===h.length||E(R,tr(h,R+1,h.length,v+360-O)-R),y}v<h[0]&&(v+=360);const k=tr(h,0,h.length,v-O);if(k===h.length)return E(0,h.length),y;E(0,k-0);const w=ft(h,k+1,h.length,v+O);return w!==h.length&&E(w,h.length-w),y}}const IU=(Math.pow(256,2)-1)/16907520;class $A extends xa{constructor(o,l,h,v){super(o,{layout:RA||(RA=new Ri({visibility:new mn(Ot.layout_raster.visibility)})),paint:OA||(OA=new Ri({"raster-opacity":new mn(Ot.paint_raster["raster-opacity"]),"raster-color":new Du(Ot.paint_raster["raster-color"]),"raster-color-mix":new mn(Ot.paint_raster["raster-color-mix"]),"raster-color-range":new mn(Ot.paint_raster["raster-color-range"]),"raster-hue-rotate":new mn(Ot.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new mn(Ot.paint_raster["raster-brightness-min"]),"raster-brightness-max":new mn(Ot.paint_raster["raster-brightness-max"]),"raster-saturation":new mn(Ot.paint_raster["raster-saturation"]),"raster-contrast":new mn(Ot.paint_raster["raster-contrast"]),"raster-resampling":new mn(Ot.paint_raster["raster-resampling"]),"raster-fade-duration":new mn(Ot.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new mn(Ot.paint_raster["raster-emissive-strength"]),"raster-array-band":new mn(Ot.paint_raster["raster-array-band"]),"raster-elevation":new mn(Ot.paint_raster["raster-elevation"])}))},l,h,v),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(o){return!(o&&o._source instanceof DA&&(o._source.onNorthPole||o._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(o){o!=="raster-color"&&o!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(o){if(!this.hasColorMap()||!this._curRampRange)return;const l=this._transitionablePaint._values["raster-color"].value.expression,[h,v]=o||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(h)&&isNaN(v)||h===this._curRampRange[0]&&v===this._curRampRange[1]||(this.colorRamp=iv({expression:l,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:h,end:v}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[h,v])}}let kA,zA,LA,NA,FA;class BA extends xa{constructor(o,l,h,v){super(o,{layout:kA||(kA=new Ri({visibility:new mn(Ot["layout_raster-particle"].visibility)})),paint:zA||(zA=new Ri({"raster-particle-array-band":new mn(Ot["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new mn(Ot["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new Du(Ot["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new mn(Ot["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new mn(Ot["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new mn(Ot["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new mn(Ot["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new mn(Ot["paint_raster-particle"]["raster-particle-elevation"])}))},l,h,v),this._updateColorRamp(),this.lastInvalidatedAt=kt.now()}onRemove(o){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(o){return!1}_handleSpecialPaintPropertyUpdate(o){o!=="raster-particle-color"&&o!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),o==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const o=this._transitionablePaint._values["raster-particle-color"].value.expression,l=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=iv({expression:o,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:l}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=kt.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class MU extends xa{constructor(o,l){super(o,{},l,null),this.implementation=o,o.slot&&(this.slot=o.slot)}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(o){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(o){this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)}onRemove(o){this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)}}function TC(u,o,l){const h=[0,0,1],v=Pe.quat.identity([]);return Pe.quat.rotateY(v,v,l?-At(u)+Math.PI:At(u)),Pe.quat.rotateX(v,v,-At(o)),Pe.vec3.transformQuat(h,h,v),Pe.vec3.normalize(h,h)}function jA(u,o){const l=xx(u.projection,u.zoom,u.width,u.height),h=function(f,y,E,O,k){const w=new G(E.lng-180*Zu,E.lat),R=new G(E.lng+180*Zu,E.lat),D=f.project(w.lng,w.lat),P=f.project(R.lng,R.lat),A=-Math.atan2(P.y-D.y,P.x-D.x),F=vt.fromLngLat(E);F.y=Rt(F.y,-1+Zu,1-Zu);const q=F.toLngLat(),Z=f.project(q.lng,q.lat),ie=vt.fromLngLat(q);ie.x+=Zu;const oe=ie.toLngLat(),te=f.project(oe.lng,oe.lat),ue=HA(te.x-Z.x,te.y-Z.y,A),_e=vt.fromLngLat(q);_e.y+=Zu;const Re=_e.toLngLat(),Ue=f.project(Re.lng,Re.lat),Le=HA(Ue.x-Z.x,Ue.y-Z.y,A),Fe=Math.abs(ue.x)/Math.abs(Le.y),tt=Pe.mat4.identity([]);Pe.mat4.rotateZ(tt,tt,-A*(1-(k?0:O)));const Ne=Pe.mat4.identity([]);return Pe.mat4.scale(Ne,Ne,[1,1-(1-Fe)*O,1]),Ne[4]=-Le.x/Le.y*O,Pe.mat4.rotateZ(Ne,Ne,A),Pe.mat4.multiply(Ne,tt,Ne),Ne}(u.projection,0,u.center,l,o),v=VA(u);return Pe.mat4.scale(h,h,[v,v,1]),h}function VA(u){const o=u.projection,l=xx(u.projection,u.zoom,u.width,u.height),h=IC(o,u.center),v=IC(o,G.convert(o.center));return Math.pow(2,h*l+(1-l)*v)}function xx(u,o,l,h,v=1/0){const f=u.range;if(!f)return 0;const y=Math.min(v,Math.max(l,h)),E=Math.log(y/1024)/Math.LN2;return dn(f[0]+E,f[1]+E,o)}const Zu=1/4e4;function IC(u,o){const l=Rt(o.lat,-qe,qe),h=new G(o.lng-180*Zu,l),v=new G(o.lng+180*Zu,l),f=u.project(h.lng,l),y=u.project(v.lng,l),E=vt.fromLngLat(h),O=vt.fromLngLat(v),k=y.x-f.x,w=y.y-f.y,R=O.x-E.x,D=O.y-E.y,P=Math.sqrt((R*R+D*D)/(k*k+w*w));return Math.log(P)/Math.LN2}function HA(u,o,l){const h=Math.cos(l),v=Math.sin(l);return{x:u*h-o*v,y:u*v+o*h}}function UA(u,o,l){Pe.mat4.identity(u),Pe.mat4.rotateZ(u,u,At(o[2])),Pe.mat4.rotateX(u,u,At(o[0])),Pe.mat4.rotateY(u,u,At(o[1])),Pe.mat4.scale(u,u,l),Pe.mat4.multiply(u,u,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function bx(u,o,l,h,v,f,y,E){const O=[l[0]-o[0],l[1]-o[1],0],k=[h[0]-o[0],h[1]-o[1],0];if(Pe.vec3.length(O)<1e-12||Pe.vec3.length(k)<1e-12)return Pe.quat.identity(u);const w=Pe.vec3.cross([],O,k);Pe.vec3.normalize(w,w),Pe.vec3.subtract(k,h,o),O[2]=(f-v)*E,k[2]=(y-v)*E;const R=O;return Pe.vec3.cross(R,O,k),Pe.vec3.normalize(R,R),Pe.quat.rotationTo(u,w,R)}function MC(u,o,l=!1){const h=Uu(o.zoom),v=function(f,y,E){const O=y.worldSize,k=[f[12],f[13],f[14]],w=Ve(k[1]/O),R=Oe(k[0]/O),D=Pe.mat4.identity([]),P=Ee(1,w)*O,A=Ee(1,0)*O*Ke(w,y.zoom),F=1/jS(O);let q=A*F;if(E){const te=xx(y.projection,y.zoom,y.width,y.height,1024);q=F*y.projection.pixelSpaceConversion(y.center.lat,O,te)}const Z=z(w,R);Pe.vec3.add(Z,Z,Pe.vec3.scale([],Pe.vec3.normalize([],Z),P*q*k[2]));const ie=function(te){const ue=[te[0],te[1],te[2]];let _e=[0,1,0];const Re=Pe.vec3.cross([],_e,ue);return Pe.vec3.cross(_e,ue,Re),Pe.vec3.squaredLength(_e)===0&&(_e=[0,1,0],Pe.vec3.cross(Re,ue,_e)),Pe.vec3.normalize(Re,Re),Pe.vec3.normalize(_e,_e),Pe.vec3.normalize(ue,ue),[Re[0],Re[1],Re[2],0,_e[0],_e[1],_e[2],0,ue[0],ue[1],ue[2],0,te[0],te[1],te[2],1]}(Z);Pe.mat4.scale(D,D,[q,q,q*P]),Pe.mat4.translate(D,D,[-k[0],-k[1],-k[2]]);const oe=Pe.mat4.multiply([],y.globeMatrix,ie);return Pe.mat4.multiply(oe,oe,D),Pe.mat4.multiply(oe,oe,f),oe}(u,o,l);if(h>0){const f=function(y,E){const O=E.worldSize,k=Ee(1,0)*O*Ke(E.center.lat,E.zoom)/jS(O),w=Ee(1,E.center.lat)*O,R=Pe.mat4.identity([]);return Pe.mat4.rotateY(R,R,At(E.center.lng)),Pe.mat4.rotateX(R,R,At(E.center.lat)),Pe.mat4.translate(R,R,[0,0,na]),Pe.mat4.scale(R,R,[k,k,k*w]),Pe.mat4.translate(R,R,[E.point.x-.5*O,E.point.y-.5*O,0]),Pe.mat4.multiply(R,R,y),Pe.mat4.multiply(R,E.globeMatrix,R)}(u,o);return function(y,E,O){const k=(A,F,q)=>{const Z=Pe.vec3.length(A),ie=Pe.vec3.length(F),oe=jc(A,F,q);return Pe.vec3.scale(oe,oe,1/Pe.vec3.length(oe)*Zn(Z,ie,q))},w=k([y[0],y[1],y[2]],[E[0],E[1],E[2]],O),R=k([y[4],y[5],y[6]],[E[4],E[5],E[6]],O),D=k([y[8],y[9],y[10]],[E[8],E[9],E[10]],O),P=jc([y[12],y[13],y[14]],[E[12],E[13],E[14]],O);return[w[0],w[1],w[2],0,R[0],R[1],R[2],0,D[0],D[1],D[2],0,P[0],P[1],P[2],1]}(v,f,h)}return v}function WA(u,o,l,h){const v=si.projectAabbCorners(h,l);let f=Number.MAX_VALUE,y=-1;for(let k=0;k<v.length;++k){const w=v[k];w[0]=(.5*w[0]+.5)*o.width,w[1]=(.5-.5*w[1])*o.height,w[2]<f&&(y=k,f=w[2])}const E=k=>new je(v[k][0],v[k][1]);let O;switch(y){case 0:case 6:O=[E(1),E(5),E(4),E(7),E(3),E(2),E(1)];break;case 1:case 7:O=[E(0),E(4),E(5),E(6),E(2),E(3),E(0)];break;case 3:case 5:O=[E(1),E(0),E(4),E(7),E(6),E(2),E(1)];break;default:O=[E(1),E(5),E(6),E(7),E(3),E(0),E(1)]}if(Jt(u,O))return f}const PU=Qr([{name:"a_pos_3f",components:3,type:"Float32"}]),RU=Qr([{name:"a_color_3f",components:3,type:"Float32"}]),OU=Qr([{name:"a_color_4f",components:4,type:"Float32"}]),AU=Qr([{name:"a_uv_2f",components:2,type:"Float32"}]),DU=Qr([{name:"a_normal_3f",components:3,type:"Float32"}]),$U=Qr([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),kU=Qr([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]),GA={None:0,Model:1,Symbol:2,FillExtrusion:4,All:7};class wx{constructor(o,l,h,v){this.message=(o?`${o}: `:"")+h,v&&(this.identifier=v),l!=null&&l.__line__&&(this.line=l.__line__)}}function qA(u,o){const l=u.indexOf("://")===-1;try{return new URL(u,l&&o?"http://example.com":void 0),!0}catch{return!1}}class KA{constructor(o,l){this.feature=o,this.instancedDataOffset=l,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class XA{constructor(){this.instancedDataArray=new mh,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class PC{constructor(o){this.zoom=o.zoom,this.canonical=o.canonical,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.fqid),this.projection=o.projection,this.index=o.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0}updateFootprints(o,l){}populate(o,l,h,v){this.tileToMeter=rt(h);const f=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:y,id:E,index:O,sourceLayerIndex:k}of o){const w=E??(y.properties&&y.properties.hasOwnProperty("id")?y.properties.id:void 0),R=Qt(y,f);if(!this.layers[0]._featureFilter.filter(new Zi(this.zoom),R,h))continue;const D={id:w,sourceLayerIndex:k,index:O,geometry:f?R.geometry:Et(y,h,v),properties:y.properties,type:y.type,patterns:{}},P=this.addFeature(D,D.geometry,R);P&&l.featureIndex.insert(y,D.geometry,O,k,this.index,this.instancesPerModel[P].instancedDataArray.length,Tn/32)}this.lookup=null}update(o,l,h,v){for(const f in this.instancesPerModel){const y=this.instancesPerModel[f];for(const E in o)y.idToFeaturesIndex.hasOwnProperty(E)&&(this.evaluate(y.features[y.idToFeaturesIndex[E]],o[E],y,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let o=!1;for(const l in this.instancesPerModel){const h=this.instancesPerModel[l];for(const v of h.features){const f=this.layers[0],y=v.feature,E=this.canonical,O=f.paint.get("model-rotation").evaluate(y,{},E),k=f.paint.get("model-scale").evaluate(y,{},E),w=f.paint.get("model-translation").evaluate(y,{},E);Pe.vec3.exactEquals(v.rotation,O)&&Pe.vec3.exactEquals(v.scale,k)&&Pe.vec3.exactEquals(v.translation,w)||(this.evaluate(v,v.featureStates,h,!0),o=!0)}}return o}updateReplacement(o,l,h,v){if(l.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=l.updateTime;const f=l.getReplacementRegionsForTile(o.toUnwrapped(),!0);if(eC(this.activeReplacements,f))return!1;this.activeReplacements=f;let y=!1;for(const E in this.instancesPerModel){const O=this.instancesPerModel[E],k=O.instancedDataArray;for(const w of O.features){const R=w.instancedDataOffset,D=w.instancedDataCount;for(let P=0;P<D;P++){const A=16*(P+R);let F=k.float32[A+0];const q=F>Tn;F=q?F-Tn:F;const Z=Math.floor(F),ie=k.float32[A+1];let oe=!1;for(const te of this.activeReplacements)if(!uO(te,h,GA.Model,v)&&!(te.min.x>Z||Z>te.max.x||te.min.y>ie||ie>te.max.y)&&(oe=gO(mO(Z,ie,o.canonical,te.footprintTileId.canonical),te.footprint),oe))break;k.float32[A]=oe?F+Tn:F,y=y||oe!==q}}}return y}isEmpty(){for(const o in this.instancesPerModel)if(this.instancesPerModel[o].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(o){if(!this.uploaded)for(const l in this.instancesPerModel){const h=this.instancesPerModel[l];h.instancedDataArray.length<0||h.instancedDataArray.length===0||(h.instancedDataBuffer?h.instancedDataBuffer.updateData(h.instancedDataArray):h.instancedDataBuffer=o.createVertexBuffer(h.instancedDataArray,$U.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const l in this.instancesPerModel){const h=this.instancesPerModel[l];h.instancedDataArray.length!==0&&h.instancedDataBuffer&&h.instancedDataBuffer.destroy()}const o=this.layers[0].modelManager;if(o&&this.modelUris)for(const l of this.modelUris)o.removeModel(l,"")}addFeature(o,l,h){const v=this.layers[0],f=v.layout.get("model-id").evaluate(h,{},this.canonical);if(!f)return Xt(`modelId is not evaluated for layer ${v.id} and it is not going to get rendered.`),f;qA(f,!1)&&(this.modelUris.includes(f)||this.modelUris.push(f)),this.instancesPerModel[f]||(this.instancesPerModel[f]=new XA);const y=this.instancesPerModel[f],E=y.instancedDataArray,O=new KA(h,E.length);for(const k of l)for(const w of k){if(w.x<0||w.x>=Tn||w.y<0||w.y>=Tn)continue;const R=(this.lookupDim-1)/Tn,D=this.lookupDim*(w.y*R|0)+w.x*R|0;if(this.lookup){if(this.lookup[D]!==0)continue;this.lookup[D]=1}this.instanceCount++;const P=E.length;E.resize(P+1),y.instancesEvaluatedElevation.push(0),E.float32[16*P]=w.x,E.float32[16*P+1]=w.y}return O.instancedDataCount=y.instancedDataArray.length-O.instancedDataOffset,O.instancedDataCount>0&&(o.id&&(y.idToFeaturesIndex[o.id]=y.features.length),y.features.push(O),this.evaluate(O,{},y,!1)),f}getModelUris(){return this.modelUris}evaluate(o,l,h,v){const f=this.layers[0],y=o.feature,E=this.canonical,O=o.rotation=f.paint.get("model-rotation").evaluate(y,l,E),k=o.scale=f.paint.get("model-scale").evaluate(y,l,E),w=o.translation=f.paint.get("model-translation").evaluate(y,l,E),R=f.paint.get("model-color").evaluate(y,l,E);R.a=f.paint.get("model-color-mix-intensity").evaluate(y,l,E);const D=[];this.maxVerticalOffset<w[2]&&(this.maxVerticalOffset=w[2]),this.maxScale=Math.max(Math.max(this.maxScale,k[0]),Math.max(k[1],k[2])),UA(D,O,k);const P=Math.round(100*R.a)+R.b/1.05;for(let A=0;A<o.instancedDataCount;++A){const F=o.instancedDataOffset+A,q=16*F,Z=h.instancedDataArray.float32;let ie=0;v&&(ie=Z[q+6]-h.instancesEvaluatedElevation[F]);const oe=0|Z[q+1];Z[q]=(0|Z[q])+R.r/1.05,Z[q+1]=oe+R.g/1.05,Z[q+2]=P,Z[q+3]=1/(E.z>10?this.tileToMeter:rt(E,oe)),Z[q+4]=w[0],Z[q+5]=w[1],Z[q+6]=w[2]+ie,Z[q+7]=D[0],Z[q+8]=D[1],Z[q+9]=D[2],Z[q+10]=D[4],Z[q+11]=D[5],Z[q+12]=D[6],Z[q+13]=D[8],Z[q+14]=D[9],Z[q+15]=D[10],h.instancesEvaluatedElevation[F]=w[2]}}}let ZA,YA;Fn(PC,"ModelBucket",{omit:["layers"]}),Fn(XA,"PerModelAttributes"),Fn(KA,"ModelFeature");const Sh=64,dp={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function JA(u,o,l,h,v,f,y,E,O,k=!1){const w=l.zoom,R=l.project(h),D=Ke(h.lat,w),P=1/D;Pe.mat4.identity(u),Pe.mat4.translate(u,u,[R.x+y[0]*P,R.y+y[1]*P,y[2]]);let A=1,F=1;const q=l.worldSize;if(k){if(l.projection.name==="mercator"){let te=0;l.elevation&&(te=l.elevation.getAtPointOrZero(new vt(R.x/q,R.y/q),0));const ue=Pe.vec4.transformMat4([],[R.x,R.y,te,1],l.projMatrix)[3]/l.cameraToCenterDistance;A=ue,F=ue*Ke(l.center.lat,w)}else if(l.projection.name==="globe"){const te=MC(u,l),ue=Pe.mat4.multiply([],l.projMatrix,te),_e=[0,0,0,1];Pe.vec4.transformMat4(_e,_e,ue);const Re=_e[3]/l.cameraToCenterDistance,Ue=Uu(w),Le=l.projection.pixelsPerMeter(h.lat,q)*Ke(h.lat,w),Fe=l.projection.pixelsPerMeter(l.center.lat,q)*Ke(l.center.lat,w);A=Re/Zn(Le,Xe(l.center.lat),Ue),F=Re*D/Le,A*=Fe,F*=Fe}}else A=P;Pe.mat4.scale(u,u,[A,A,F]);const Z=[...u],ie=o.orientation,oe=[];if(UA(oe,[ie[0]+v[0],ie[1]+v[1],ie[2]+v[2]],f),Pe.mat4.multiply(u,Z,oe),E&&l.elevation){let te=0;const ue=[];if(O&&l.elevation){te=function(Ue,Le,Fe,tt,Ne){const et=Le.elevation;if(!et)return 0;const lt=si.projectAabbCorners(Fe,tt),ct=Ee(1,Ne.lat)*Le.worldSize,xt=function(er,Ln){const Vn=[0,0,1],xr=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const Or of xr){const Dr=er[Or.corners[0]],Rr=er[Or.corners[1]],Fr=er[Or.corners[2]],Lr=[Rr[0]-Dr[0],Rr[1]-Dr[1],Ln*(Rr[2]-Dr[2])],Si=Pe.vec3.cross(Lr,Lr,[Fr[0]-Dr[0],Fr[1]-Dr[1],Ln*(Fr[2]-Dr[2])]);Pe.vec3.normalize(Si,Si),Or.dotProductWithUp=Pe.vec3.dot(Si,Vn)}return xr.sort((Or,Dr)=>Or.dotProductWithUp-Dr.dotProductWithUp),xr[0].corners}(lt,ct),Pt=lt[xt[0]],$t=lt[xt[1]],Tt=lt[xt[2]],Ht=lt[xt[3]],sn=et.getAtPointOrZero(new vt(Pt[0]/Le.worldSize,Pt[1]/Le.worldSize),0),Bt=et.getAtPointOrZero(new vt($t[0]/Le.worldSize,$t[1]/Le.worldSize),0),Nn=et.getAtPointOrZero(new vt(Tt[0]/Le.worldSize,Tt[1]/Le.worldSize),0),En=et.getAtPointOrZero(new vt(Ht[0]/Le.worldSize,Ht[1]/Le.worldSize),0),pn=(sn+En)/2,on=(Bt+Nn)/2;return pn>on?Bt<Nn?bx(Ue,$t,Ht,Pt,Bt,En,sn,ct):bx(Ue,Tt,Pt,Ht,Nn,sn,En,ct):sn<En?bx(Ue,Pt,$t,Tt,sn,Bt,Nn,ct):bx(Ue,Ht,Tt,$t,En,Nn,Bt,ct),Math.max(pn,on)}(ue,l,o.aabb,u,h);const _e=Pe.mat4.fromQuat([],ue),Re=Pe.mat4.multiply([],_e,oe);Pe.mat4.multiply(u,Z,Re)}else te=l.elevation.getAtPointOrZero(new vt(R.x/q,R.y/q),0);te!==0&&(u[14]+=te)}}function Cv(u,o,l=!1){u.uploaded||(u.gfxTexture=new EC(o,u.image,l?o.gl.R8:o.gl.RGBA8,{useMipmap:u.sampler.minFilter>=o.gl.NEAREST_MIPMAP_NEAREST}),u.uploaded=!0,u.image=null)}function zU(u,o,l){u.indexBuffer=o.createIndexBuffer(u.indexArray,!1,!0),u.vertexBuffer=o.createVertexBuffer(u.vertexArray,PU.members,!1,!0),u.normalArray&&(u.normalBuffer=o.createVertexBuffer(u.normalArray,DU.members,!1,!0)),u.texcoordArray&&(u.texcoordBuffer=o.createVertexBuffer(u.texcoordArray,AU.members,!1,!0)),u.colorArray&&(u.colorBuffer=o.createVertexBuffer(u.colorArray,(u.colorArray.bytesPerElement===12?RU:OU).members,!1,!0)),u.featureArray&&(u.pbrBuffer=o.createVertexBuffer(u.featureArray,kU.members,!0)),u.segments=io.simpleSegment(0,0,u.vertexArray.length,u.indexArray.length);const h=u.material;h.pbrMetallicRoughness.baseColorTexture&&Cv(h.pbrMetallicRoughness.baseColorTexture,o),h.pbrMetallicRoughness.metallicRoughnessTexture&&Cv(h.pbrMetallicRoughness.metallicRoughnessTexture,o),h.normalTexture&&Cv(h.normalTexture,o),h.occlusionTexture&&Cv(h.occlusionTexture,o,l),h.emissionTexture&&Cv(h.emissionTexture,o)}function RC(u,o,l){if(u.meshes)for(const h of u.meshes)zU(h,o,l);if(u.children)for(const h of u.children)RC(h,o,l)}function Sx(u){if(u.meshes)for(const o of u.meshes)o.indexArray.destroy(),o.vertexArray.destroy(),o.colorArray&&o.colorArray.destroy(),o.normalArray&&o.normalArray.destroy(),o.texcoordArray&&o.texcoordArray.destroy(),o.featureArray&&o.featureArray.destroy();if(u.children)for(const o of u.children)Sx(o)}function OC(u){if(u.meshes)for(const l of u.meshes)l.vertexBuffer&&(l.vertexBuffer.destroy(),l.indexBuffer.destroy(),l.normalBuffer&&l.normalBuffer.destroy(),l.texcoordBuffer&&l.texcoordBuffer.destroy(),l.colorBuffer&&l.colorBuffer.destroy(),l.pbrBuffer&&l.pbrBuffer.destroy(),l.segments.destroy(),l.material&&((o=l.material).pbrMetallicRoughness.baseColorTexture&&o.pbrMetallicRoughness.baseColorTexture.gfxTexture&&o.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),o.pbrMetallicRoughness.metallicRoughnessTexture&&o.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&o.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),o.normalTexture&&o.normalTexture.gfxTexture&&o.normalTexture.gfxTexture.destroy(),o.emissionTexture&&o.emissionTexture.gfxTexture&&o.emissionTexture.gfxTexture.destroy(),o.occlusionTexture&&o.occlusionTexture.gfxTexture&&o.occlusionTexture.gfxTexture.destroy()));var o;if(u.children)for(const l of u.children)OC(l)}class hp{constructor(o,l,h){this._demTile=o,this._dem=this._demTile.dem,this._scale=l,this._offset=h}static create(o,l,h){const v=h||o.findDEMTileFor(l);if(!v||!v.dem)return;const f=v.dem,y=v.tileID,E=1<<l.canonical.z-y.canonical.z;return new hp(v,f.dim/Tn/E,[(l.canonical.x/E-y.canonical.x)*f.dim,(l.canonical.y/E-y.canonical.y)*f.dim])}tileCoordToPixel(o,l){const h=l*this._scale+this._offset[1],v=Math.floor(o*this._scale+this._offset[0]),f=Math.floor(h);return new je(v,f)}getElevationAt(o,l,h,v){const f=o*this._scale+this._offset[0],y=l*this._scale+this._offset[1],E=Math.floor(f),O=Math.floor(y),k=this._dem;return v=!!v,h?Zn(Zn(k.get(E,O,v),k.get(E,O+1,v),y-O),Zn(k.get(E+1,O,v),k.get(E+1,O+1,v),y-O),f-E):k.get(E,O,v)}getElevationAtPixel(o,l,h){return this._dem.get(o,l,!!h)}getMeterToDEM(o){return(1<<this._demTile.tileID.canonical.z)*Ee(1,o)*this._dem.stride}}const AC=new Float32Array(262144),Ch=new Uint8Array(262144);function QA(u){let o=0;if(u.meshes)for(const l of u.meshes)o=Math.max(o,l.aabb.max[2]);if(u.children)for(const l of u.children)o=Math.max(o,QA(l));return o}function e3(u,o,l){if(u.meshes)for(const h of u.meshes){if(h.aabb.min[0]===1/0)continue;const v=si.applyTransform(h.aabb,u.matrix);l.insert(o,v.min[0],v.min[1],v.max[0],v.max[1])}if(u.children)for(const h of u.children)e3(h,o,l)}const t3=["","wall","door","roof","window","lamp","logo"];class n3{constructor(o){this.node=o,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:o.id,geometry:[],properties:{height:QA(o)}},this.aabb=this._getLocalBounds()}_getLocalBounds(){if(!this.node.meshes)return new si([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let o=0;const l=new si([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const h of this.node.meshes)this.node.lightMeshIndex!==o&&(h.transformedAabb=si.applyTransformFast(h.aabb,this.node.matrix),l.encapsulate(h.transformedAabb)),o++;this.aabb=l}return this.aabb}}class Cx{constructor(o,l,h,v,f,y,E){this.id=h,this.layers=o,this.layerIds=this.layers.map(O=>O.fqid),this.stateDependentLayerIds=this.layers.filter(O=>O.isStateDependent()).map(O=>O.id),this.modelTraits|=dp.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,v&&(this.modelTraits|=dp.HasMapboxMeshFeatures),f&&(this.modelTraits|=dp.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=y,this.dirty=!0,this.needsUpload=!1,this.nodesInfo=[];for(const O of l)this.nodesInfo.push(new n3(O)),e3(O,E.featureIndexArray.length,E.grid),E.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,E.bucketLayerIDs.length-1,0)}updateFootprints(o,l){for(const h of this.getNodesInfo()){const v=h.node;v.footprint&&l.push({footprint:v.footprint,id:o})}}update(o){const l=Object.keys(o).length!==0;if(l&&!this.stateDependentLayers.length)return;const h=l?this.stateDependentLayers:this.layers;for(const v of h)this.evaluate(v,o)}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(o){if(!this.needsUpload)return;const l=this.getNodesInfo();for(const h of l){const v=h.node;this.uploaded?this.updatePbrBuffer(v):RC(v,o,!0)}for(const h of l)Sx(h.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(o){let l=!1;if(!o.meshes)return l;for(const h of o.meshes)h.pbrBuffer&&(h.pbrBuffer.updateData(h.featureArray),l=!0);return l}needsReEvaluation(o,l,h){const v=o.transform.projectionOptions,f=o.style.getBrightness(),y=this.brightness!==f;return!!(!this.uploaded||this.dirty||v.name!==this.projection.name||Ev(h.paint.get("model-color").value,y)||Ev(h.paint.get("model-color-mix-intensity").value,y)||Ev(h.paint.get("model-roughness").value,y)||Ev(h.paint.get("model-emissive-strength").value,y)||Ev(h.paint.get("model-height-based-emissive-strength-multiplier").value,y))&&(this.projection=v,this.brightness=f,!0)}evaluateScale(o,l){if(o.transform.zoom===this.zoom)return;this.zoom=o.transform.zoom;const h=this.getNodesInfo(),v=this.id.canonical;for(const f of h){const y=f.feature;f.evaluatedScale=l.paint.get("model-scale").evaluate(y,{},v)}}evaluate(o,l){const h=this.getNodesInfo();for(const v of h){if(!v.node.meshes)continue;const f=v.feature,y=l&&l[f.id],E=v.node.meshes&&v.node.meshes[0].featureData,O=v.evaluatedColor[2],k=v.evaluatedRMEA[2],w=this.id.canonical;if(v.hasTranslucentParts=!1,E){for(let R=0;R<t3.length;R++){const D=t3[R];D.length&&(f.properties.part=D);const P=o.paint.get("model-color").evaluate(f,y,w).toRenderColor(null),A=o.paint.get("model-color-mix-intensity").evaluate(f,y,w);v.evaluatedColor[R]=[P.r,P.g,P.b,A],v.evaluatedRMEA[R][0]=o.paint.get("model-roughness").evaluate(f,y,w),v.evaluatedRMEA[R][2]=o.paint.get("model-emissive-strength").evaluate(f,y,w),v.evaluatedRMEA[R][3]=P.a,v.emissionHeightBasedParams[R]=o.paint.get("model-height-based-emissive-strength-multiplier").evaluate(f,y,w),!v.hasTranslucentParts&&P.a<1&&(v.hasTranslucentParts=!0)}delete f.properties.part,NU(v,O!==v.evaluatedColor[2]||k!==v.evaluatedRMEA[2],this.modelTraits)}else v.evaluatedRMEA[0][2]=o.paint.get("model-emissive-strength").evaluate(f,y,w);v.evaluatedScale=o.paint.get("model-scale").evaluate(f,y,w),this.updatePbrBuffer(v.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(o,l,h,v){const f=o.findDEMTileFor(h);if(f&&(f.tileID.canonical!==this.terrainTile||l!==this.terrainExaggeration)){if(f.dem&&f.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=f.tileID.overscaledZ;const y=hp.create(o,h,f);if(!y)return;this.modelTraits&dp.HasMapboxMeshFeatures&&this.updateDEM(o,y,h,v);for(const E of this.getNodesInfo()){const O=E.node;if(!O.footprint||!O.footprint.vertices||!O.footprint.vertices.length)continue;const k=O.footprint.vertices;let w=y.getElevationAt(k[0].x,k[0].y,!0,!0);for(let R=1;R<k.length;R++)w=Math.min(w,y.getElevationAt(k[R].x,k[R].y,!0,!0));O.elevation=w}}this.terrainTile=f.tileID.canonical,this.terrainExaggeration=l}}updateDEM(o,l,h,v){let f=l._dem._modifiedForSources[v];if(f===void 0&&(l._dem._modifiedForSources[v]=[],f=l._dem._modifiedForSources[v]),f.includes(h.canonical))return;const y=l._dem.dim;f.push(h.canonical);let E=!1;for(const O of this.getNodesInfo()){const k=O.node;if(!k.footprint||!k.footprint.grid)continue;const w=k.footprint.grid,R=l.tileCoordToPixel(w.min.x,w.min.y),D=l.tileCoordToPixel(w.max.x,w.max.y),P=Math.min(Math.min(y-D.y,R.x),Math.min(R.y,y-D.x));if(P<0)continue;const A=Rt(P,2,5);let F=Math.max(0,R.x-A),q=Math.max(0,R.y-A),Z=Math.min(D.x+A,y-1),ie=Math.min(D.y+A,y-1);for(let _e=q;_e<=ie;++_e)for(let Re=F;Re<=Z;++Re)Ch[_e*y+Re]=255;let oe=0,te=0;for(let _e=0;_e<w.cellsY;++_e)for(let Re=0;Re<w.cellsX;++Re){if(!w.cells[_e*w.cellsX+Re])continue;const Ue=l.tileCoordToPixel(w.min.x+Re/w.xScale,w.min.y+_e/w.yScale),Le=l.tileCoordToPixel(w.min.x+(Re+1)/w.xScale,w.min.y+(_e+1)/w.yScale);for(let Fe=Ue.y;Fe<=Math.min(Le.y+1,y-1);++Fe)for(let tt=Ue.x;tt<=Math.min(Le.x+1,y-1);++tt)Ch[Fe*y+tt]===255&&(Ch[Fe*y+tt]=0,oe+=l.getElevationAtPixel(tt,Fe),te++)}const ue=oe/te;F=Math.max(1,R.x-A),q=Math.max(1,R.y-A),Z=Math.min(D.x+A,y-2),ie=Math.min(D.y+A,y-2),E=!0;for(let _e=q;_e<=ie;++_e)for(let Re=F;Re<=Z;++Re)Ch[_e*y+Re]===0&&(AC[_e*y+Re]=l._dem.set(Re,_e,ue));for(let _e=1;_e<A;++_e){F=Math.max(1,R.x-_e),q=Math.max(1,R.y-_e),Z=Math.min(D.x+_e,y-2),ie=Math.min(D.y+_e,y-2);for(let Re=q;Re<=ie;++Re)for(let Ue=F;Ue<=Z;++Ue){const Le=Re*y+Ue;if(Ch[Le]===255){let Fe=0,tt=0,Ne=-1,et=-1;for(let lt=-1;lt<=1;++lt)for(let ct=-1;ct<=1;++ct){const xt=(Re+lt)*y+Ue+ct;if(Ch[xt]>=_e)continue;const Pt=AC[xt],$t=Math.abs(Pt);$t>tt&&(Fe=Pt,tt=$t,Ne=ct,et=lt)}if(tt>.1){const lt=1-(_e+.5*Math.abs(Ne*et))/A;let ct=l._dem.get(Ue,Re)+Fe*lt;const xt=l._dem.get(Ue+Ne,Re+et),Pt=l._dem.get(Ue-Ne,Re-et,!0);(ct-xt)*(ct-Pt)>0&&(ct=(xt+Pt)/2),AC[Le]=l._dem.set(Ue,Re,ct),Ch[Le]=_e}}}}}E&&(l._demTile.needsDEMTextureUpload=!0,l._dem._timestamp=kt.now())}getNodesInfo(){return this.nodesInfo}destroy(){const o=this.getNodesInfo();for(const l of o)Sx(l.node),OC(l.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(o,l){if(l.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=l.updateTime;const h=l.getReplacementRegionsForTile(o.toUnwrapped()),v=this.getNodesInfo();for(let f=0;f<this.nodesInfo.length;f++){const y=v[f].node;v[f].hiddenByReplacement=!!y.footprint&&!h.find(E=>E.footprint===y.footprint)}}getHeightAtTileCoord(o,l){const h=this.getNodesInfo(),v=[],f=[0,0,0],y=Pe.mat4.identity([]);for(let E=0;E<this.nodesInfo.length;E++){const O=h[E],k=O.node.meshes[0],w=k.transformedAabb;if(o<w.min[0]||l<w.min[1]||o>w.max[0]||l>w.max[1])continue;if(O.node.hidden===!0)return{height:1/0,maxHeight:O.feature.properties.height,hidden:!1,verticalScale:O.evaluatedScale[2]};Pe.mat4.invert(y,O.node.matrix),f[0]=o,f[1]=l,Pe.vec3.transformMat4(f,f,y);const R=(f[0]-k.aabb.min[0])/(k.aabb.max[0]-k.aabb.min[0])*Sh|0,D=Math.min(63,(f[1]-k.aabb.min[1])/(k.aabb.max[1]-k.aabb.min[1])*Sh|0)*Sh+Math.min(63,R),P=k.heightmap[D];if(!(P<0&&O.node.footprint))return O.hiddenByReplacement?void 0:{height:P,maxHeight:O.feature.properties.height,hidden:!1,verticalScale:O.evaluatedScale[2]};if(O.node.footprint.grid.query(new je(o,l),new je(o,l),v),v.length>0)return{height:void 0,maxHeight:O.feature.properties.height,hidden:O.hiddenByReplacement,verticalScale:O.evaluatedScale[2]}}}}function Ev(u,o){return!u.isLightConstant&&o}function LU(u,o,l,h,v,f,y,E){let O=(61440&o|(61440&o)>>4)>>8,k=(3840&o|(3840&o)>>4)>>4,w=240&o|(240&o)>>4;l[3]>0&&(O=Zn(O,255*l[0],l[3]),k=Zn(k,255*l[1],l[3]),w=Zn(w,255*l[2],l[3]));const R=O<<8|k,D=w<<8|Math.floor(255*h[3]),P=function(_e){const Re=Rt(_e,0,2);return Math.min(Math.round(.5*Re*255),255)}(h[2])<<8|15*h[0]<<4|15*h[1],A=Rt(v[0],0,1),F=Rt(v[1],0,1),q=Rt(v[2],0,1),Z=Rt(v[3],0,1);let ie,oe,te,ue;if(A!==F&&y!==f&&F!==A){const _e=y-f;oe=1/(_e*(F-A)),te=-(f+_e*A)/(_e*(F-A));const Re=Rt(v[4],-1,1);ue=Math.pow(10,Re),ie=255*q<<8|255*Z}else ie=65535,oe=0,te=1,ue=1;if(u.emplaceBack(R,D,P,ie,oe,te,ue),E){const _e=E.length;E.clear();for(let Re=0;Re<_e;Re++)E.emplaceBack(R,D,P,ie,oe,te,ue)}}function NU(u,o,l){const h=u.node;let v=0;const f=l&dp.HasMeshoptCompression;for(const y of h.meshes){if(h.lights&&h.lightMeshIndex===v||!y.featureData)continue;y.featureArray=new Zf,y.featureArray.reserve(y.featureData.length);let E=o;for(const O of y.featureData){const k=f?65535&O:O>>16&65535,w=f?O>>16&65535:65535&O,R=(15&w)<8?15&w:0,D=u.evaluatedRMEA[R],P=u.evaluatedColor[R],A=u.emissionHeightBasedParams[R];let F;if(E&&R===2&&h.lights&&(F=new Zf,F.resize(10*h.lights.length)),LU(y.featureArray,k,P,D,A,y.aabb.min[2],y.aabb.max[2],F),F&&E){E=!1;const q=h.meshes[h.lightMeshIndex];q.featureArray=F,q.featureArray._trim()}}y.featureArray._trim(),v++}}Fn(Cx,"Tiled3dModelBucket",{omit:["layers"]}),Fn(n3,"Tiled3dModelFeature");const FU=["id","tile","layer","source","sourceLayer","state"];class Tv{constructor(o,l,h,v,f){this.type="Feature",this._vectorTileFeature=o,this._z=l,this._x=h,this._y=v,this.properties=o.properties,this.id=f}clone(){const o=new Tv(this._vectorTileFeature,this._z,this._x,this._y,this.id);return this.state&&(o.state={...this.state}),this.layer&&(o.layer={...this.layer}),this.namespace&&(o.namespace=this.namespace),o}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const l of FU)this[l]!==void 0&&(o[l]=this[l]);return o}}function r3(u,o,l,h){const v=1<<u.z;o.lat=Ve((h/Tn+u.y)/v),o.lng=Oe((l/Tn+u.x)/v)}const BU={circle:class extends xa{constructor(u,o,l,h){super(u,{layout:oi||(oi=new Ri({"circle-sort-key":new Yn(Ot.layout_circle["circle-sort-key"]),visibility:new mn(Ot.layout_circle.visibility)})),paint:zi||(zi=new Ri({"circle-radius":new Yn(Ot.paint_circle["circle-radius"]),"circle-color":new Yn(Ot.paint_circle["circle-color"]),"circle-blur":new Yn(Ot.paint_circle["circle-blur"]),"circle-opacity":new Yn(Ot.paint_circle["circle-opacity"]),"circle-translate":new mn(Ot.paint_circle["circle-translate"]),"circle-translate-anchor":new mn(Ot.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new mn(Ot.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new mn(Ot.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Yn(Ot.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Yn(Ot.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Yn(Ot.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new mn(Ot.paint_circle["circle-emissive-strength"])}))},o,l,h)}createBucket(u){return new rn(u)}queryRadius(u){const o=u;return xi("circle-radius",this,o)+xi("circle-stroke-width",this,o)+Nr(this.paint.get("circle-translate"))}queryIntersectsFeature(u,o,l,h,v,f,y,E){const O=fi(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),f.angle,u.pixelToTileUnitsFactor),k=this.paint.get("circle-radius").evaluate(o,l)+this.paint.get("circle-stroke-width").evaluate(o,l);return kR(u,h,f,y,E,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",O,k)}getProgramIds(){return["circle"]}getDefaultProgramParams(u,o,l){const h=$R(this);return{config:new Cl(this,{zoom:o,lut:l}),defines:h,overrideFog:!1}}},heatmap:class extends xa{createBucket(u){return new LR(u)}constructor(u,o,l,h){super(u,{layout:NR||(NR=new Ri({visibility:new mn(Ot.layout_heatmap.visibility)})),paint:FR||(FR=new Ri({"heatmap-radius":new Yn(Ot.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Yn(Ot.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new mn(Ot.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Du(Ot.paint_heatmap["heatmap-color"]),"heatmap-opacity":new mn(Ot.paint_heatmap["heatmap-opacity"])}))},o,l,h),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=iv({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(u){return xi("heatmap-radius",this,u)}queryIntersectsFeature(u,o,l,h,v,f,y,E){const O=this.paint.get("heatmap-radius").evaluate(o,l);return kR(u,h,f,y,E,!0,!0,new je(0,0),O)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(u,o,l){return u==="heatmap"?{config:new Cl(this,{zoom:o,lut:l}),overrideFog:!1}:{}}},hillshade:class extends xa{constructor(u,o,l,h){super(u,{layout:BR||(BR=new Ri({visibility:new mn(Ot.layout_hillshade.visibility)})),paint:jR||(jR=new Ri({"hillshade-illumination-direction":new mn(Ot.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new mn(Ot.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new mn(Ot.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new mn(Ot.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new mn(Ot.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new mn(Ot.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new mn(Ot.paint_hillshade["hillshade-emissive-strength"])}))},o,l,h)}shouldRedrape(){return this.hasOffscreenPass()&&this.paint.get("hillshade-illumination-anchor")==="viewport"}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(u,o,l){return{overrideFog:!1}}},fill:class extends xa{constructor(u,o,l,h){super(u,{layout:XR||(XR=new Ri({"fill-sort-key":new Yn(Ot.layout_fill["fill-sort-key"]),visibility:new mn(Ot.layout_fill.visibility),"fill-elevation-reference":new mn(Ot.layout_fill["fill-elevation-reference"])})),paint:ZR||(ZR=new Ri({"fill-antialias":new mn(Ot.paint_fill["fill-antialias"]),"fill-opacity":new Yn(Ot.paint_fill["fill-opacity"]),"fill-color":new Yn(Ot.paint_fill["fill-color"]),"fill-outline-color":new Yn(Ot.paint_fill["fill-outline-color"]),"fill-translate":new mn(Ot.paint_fill["fill-translate"]),"fill-translate-anchor":new mn(Ot.paint_fill["fill-translate-anchor"]),"fill-pattern":new Yn(Ot.paint_fill["fill-pattern"]),"fill-emissive-strength":new mn(Ot.paint_fill["fill-emissive-strength"]),"fill-z-offset":new Yn(Ot.paint_fill["fill-z-offset"])}))},o,l,h)}getProgramIds(){const u=this.paint.get("fill-pattern"),o=u&&u.constantOr(1),l=[o?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&l.push(o&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),l}getDefaultProgramParams(u,o,l){return{config:new Cl(this,{zoom:o,lut:l}),overrideFog:!1}}recalculate(u,o){super.recalculate(u,o);const l=this.paint._values["fill-outline-color"];l.value.kind==="constant"&&l.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new KS(u)}queryRadius(){return Nr(this.paint.get("fill-translate"))}queryIntersectsFeature(u,o,l,h,v,f){return!u.queryGeometry.isAboveHorizon&&Wn(gi(u.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),f.angle,u.pixelToTileUnitsFactor),h)}isTileClipped(){return!0}is3D(){return this.paint.get("fill-z-offset").constantOr(1)!==0}},"fill-extrusion":class extends xa{constructor(u,o,l,h){super(u,{layout:OO||(OO=new Ri({visibility:new mn(Ot["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new mn(Ot["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:AO||(AO=new Ri({"fill-extrusion-opacity":new mn(Ot["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Yn(Ot["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new mn(Ot["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new mn(Ot["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Yn(Ot["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Yn(Ot["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Yn(Ot["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-height-alignment":new mn(Ot["paint_fill-extrusion"]["fill-extrusion-height-alignment"]),"fill-extrusion-base-alignment":new mn(Ot["paint_fill-extrusion"]["fill-extrusion-base-alignment"]),"fill-extrusion-vertical-gradient":new mn(Ot["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new mn(Ot["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new mn(Ot["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new mn(Ot["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new mn(Ot["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new mn(Ot["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new mn(Ot["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new mn(Ot["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new Yn(Ot["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new Yn(Ot["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new mn(Ot["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new mn(Ot["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new mn(Ot["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new mn(Ot["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new Yn(Ot["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new Yn(Ot["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new mn(Ot["paint_fill-extrusion"]["fill-extrusion-cast-shadows"])}))},o,l,h),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(u){return new tx(u)}queryRadius(){return Nr(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(u,o,l,h,v,f,y,E,O){const k=fi(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),f.angle,u.pixelToTileUnitsFactor),w=this.paint.get("fill-extrusion-height").evaluate(o,l),R=this.paint.get("fill-extrusion-base").evaluate(o,l),D=[0,0],P=E&&f.elevation,A=f.elevation?f.elevation.exaggeration():1,F=u.tile.getBucket(this);if(P&&F instanceof tx){const te=F.centroidVertexArray,ue=O+1;ue<te.length&&(D[0]=te.geta_centroid_pos0(ue),D[1]=te.geta_centroid_pos1(ue))}if(D[0]===0&&D[1]===1)return!1;f.projection.name==="globe"&&(h=RO([h],[new je(0,0),new je(Tn,Tn)],u.tileID.canonical).map(te=>te.polygon).flat());const q=P?E:null,[Z,ie]=function(te,ue,_e,Re,Ue,Le,Fe,tt,Ne,et,lt){return te.projection.name==="globe"?function(ct,xt,Pt,$t,Tt,Ht,sn,Bt,Nn,En,pn){const on=[],er=[],Ln=ct.projection.upVectorScale(pn,ct.center.lat,ct.worldSize).metersToTile,Vn=[0,0,0,1],xr=[0,0,0,1],Or=(Rr,Fr,Lr,Si)=>{Rr[0]=Fr,Rr[1]=Lr,Rr[2]=Si,Rr[3]=1},Dr=PO();Pt>0&&(Pt+=Dr),$t+=Dr;for(const Rr of xt){const Fr=[],Lr=[];for(const Si of Rr){const vi=Si.x+Tt.x,vr=Si.y+Tt.y,ai=ct.projection.projectTilePoint(vi,vr,pn),li=ct.projection.upVector(pn,Si.x,Si.y);let Ni=Pt,uo=$t;if(sn){const bo=$O(vi,vr,Pt,$t,sn,Bt,Nn,En);Ni+=bo.base,uo+=bo.top}Pt!==0?Or(Vn,ai.x+li[0]*Ln*Ni,ai.y+li[1]*Ln*Ni,ai.z+li[2]*Ln*Ni):Or(Vn,ai.x,ai.y,ai.z),Or(xr,ai.x+li[0]*Ln*uo,ai.y+li[1]*Ln*uo,ai.z+li[2]*Ln*uo),Pe.vec3.transformMat4(Vn,Vn,Ht),Pe.vec3.transformMat4(xr,xr,Ht),Fr.push(new wh(Vn[0],Vn[1],Vn[2])),Lr.push(new wh(xr[0],xr[1],xr[2]))}on.push(Fr),er.push(Lr)}return[on,er]}(te,ue,_e,Re,Ue,Le,Fe,tt,Ne,et,lt):Fe?function(ct,xt,Pt,$t,Tt,Ht,sn,Bt,Nn){const En=[],pn=[],on=[0,0,0,1];for(const er of ct){const Ln=[],Vn=[];for(const xr of er){const Or=xr.x+$t.x,Dr=xr.y+$t.y,Rr=$O(Or,Dr,xt,Pt,Ht,sn,Bt,Nn);on[0]=Or,on[1]=Dr,on[2]=Rr.base,on[3]=1,Pe.vec4.transformMat4(on,on,Tt),on[3]=Math.max(on[3],1e-5);const Fr=new wh(on[0]/on[3],on[1]/on[3],on[2]/on[3]);on[0]=Or,on[1]=Dr,on[2]=Rr.top,on[3]=1,Pe.vec4.transformMat4(on,on,Tt),on[3]=Math.max(on[3],1e-5);const Lr=new wh(on[0]/on[3],on[1]/on[3],on[2]/on[3]);Ln.push(Fr),Vn.push(Lr)}En.push(Ln),pn.push(Vn)}return[En,pn]}(ue,_e,Re,Ue,Le,Fe,tt,Ne,et):function(ct,xt,Pt,$t,Tt){const Ht=[],sn=[],Bt=Tt[8]*xt,Nn=Tt[9]*xt,En=Tt[10]*xt,pn=Tt[11]*xt,on=Tt[8]*Pt,er=Tt[9]*Pt,Ln=Tt[10]*Pt,Vn=Tt[11]*Pt;for(const xr of ct){const Or=[],Dr=[];for(const Rr of xr){const Fr=Rr.x+$t.x,Lr=Rr.y+$t.y,Si=Tt[0]*Fr+Tt[4]*Lr+Tt[12],vi=Tt[1]*Fr+Tt[5]*Lr+Tt[13],vr=Tt[2]*Fr+Tt[6]*Lr+Tt[14],ai=Tt[3]*Fr+Tt[7]*Lr+Tt[15],li=Si+Bt,Ni=vi+Nn,uo=vr+En,bo=Math.max(ai+pn,1e-5),ho=Si+on,to=vi+er,po=vr+Ln,Eo=Math.max(ai+Vn,1e-5);Or.push(new wh(li/bo,Ni/bo,uo/bo)),Dr.push(new wh(ho/Eo,to/Eo,po/Eo))}Ht.push(Or),sn.push(Dr)}return[Ht,sn]}(ue,_e,Re,Ue,Le)}(f,h,R,w,k,y,q,D,A,f.center.lat,u.tileID.canonical),oe=u.queryGeometry;return function(te,ue,_e){let Re=1/0;Wn(_e,ue)&&(Re=DO(_e,ue[0]));for(let Ue=0;Ue<ue.length;Ue++){const Le=ue[Ue],Fe=te[Ue];for(let tt=0;tt<Le.length-1;tt++){const Ne=Le[tt],et=[Ne,Le[tt+1],Fe[tt+1],Fe[tt],Ne];Jt(_e,et)&&(Re=Math.min(Re,DO(_e,et)))}}return Re!==1/0&&Re}(Z,ie,oe.isPointQuery()?oe.screenBounds:oe.screenGeometry)}},line:class extends xa{constructor(u,o,l,h){const v=UO();super(u,v,o,l,h),v.layout&&(this.layout=new Au(v.layout)),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(u){if(u==="line-gradient"){const o=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=o._styleExpression&&o._styleExpression.expression instanceof Jd,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(u,o){super.recalculate(u,o),this.paint._values["line-floorwidth"]=(()=>{if(fv)return fv;const l=UO();return fv=new VH(l.paint.properties["line-width"].specification),fv.useIntegerZoom=!0,fv})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new iC(u)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(u,o,l){const h=VO(this);return{config:new Cl(this,{zoom:o,lut:l}),defines:h,overrideFog:!1}}queryRadius(u){const o=u,l=WO(xi("line-width",this,o),xi("line-gap-width",this,o)),h=xi("line-offset",this,o);return l/2+Math.abs(h)+Nr(this.paint.get("line-translate"))}queryIntersectsFeature(u,o,l,h,v,f){if(u.queryGeometry.isAboveHorizon)return!1;const y=gi(u.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),f.angle,u.pixelToTileUnitsFactor),E=u.pixelToTileUnitsFactor/2*WO(this.paint.get("line-width").evaluate(o,l),this.paint.get("line-gap-width").evaluate(o,l)),O=this.paint.get("line-offset").evaluate(o,l);return O&&(h=function(k,w){const R=[],D=new je(0,0);for(let P=0;P<k.length;P++){const A=k[P],F=[];for(let q=0;q<A.length;q++){const Z=A[q],ie=A[q+1],oe=q===0?D:Z.sub(A[q-1])._unit()._perp(),te=q===A.length-1?D:ie.sub(Z)._unit()._perp(),ue=oe._add(te)._unit();ue._mult(1/(ue.x*te.x+ue.y*te.y)),F.push(ue._mult(w)._add(Z))}R.push(F)}return R}(h,O*u.pixelToTileUnitsFactor)),function(k,w,R){for(let D=0;D<w.length;D++){const P=w[D];if(k.length>=3){for(let A=0;A<P.length;A++)if(Vr(k,P[A]))return!0}if(Qn(k,P,R))return!0}return!1}(y,h,E)}isTileClipped(){return!0}isDraped(u){const o=this.layout.get("line-z-offset"),l=o.isConstant()&&!o.constantOr(0),h=this.layout.get("line-elevation-reference");return!(h==="sea"||h==="ground")&&(l||h!=="none")}},symbol:gx,background:class extends xa{constructor(u,o,l,h){super(u,{layout:MA||(MA=new Ri({visibility:new mn(Ot.layout_background.visibility)})),paint:PA||(PA=new Ri({"background-pitch-alignment":new mn(Ot.paint_background["background-pitch-alignment"]),"background-color":new mn(Ot.paint_background["background-color"]),"background-pattern":new mn(Ot.paint_background["background-pattern"]),"background-opacity":new mn(Ot.paint_background["background-opacity"]),"background-emissive-strength":new mn(Ot.paint_background["background-emissive-strength"])}))},o,l,h)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(u,o,l){return{overrideFog:!1}}is3D(){return this.paint.get("background-pitch-alignment")==="viewport"}},raster:$A,"raster-particle":BA,sky:class extends xa{constructor(u,o,l,h){super(u,{layout:LA||(LA=new Ri({visibility:new mn(Ot.layout_sky.visibility)})),paint:NA||(NA=new Ri({"sky-type":new mn(Ot.paint_sky["sky-type"]),"sky-atmosphere-sun":new mn(Ot.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new mn(Ot.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new mn(Ot.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new mn(Ot.paint_sky["sky-gradient-radius"]),"sky-gradient":new Du(Ot.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new mn(Ot.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new mn(Ot.paint_sky["sky-atmosphere-color"]),"sky-opacity":new mn(Ot.paint_sky["sky-opacity"])}))},o,l,h),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="sky-gradient"?this._updateColorRamp():u!=="sky-atmosphere-sun"&&u!=="sky-atmosphere-halo-color"&&u!=="sky-atmosphere-color"&&u!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=iv({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(u){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const o=u.style.light.properties.get("position");return this._lightPosition.azimuthal!==o.azimuthal||this._lightPosition.polar!==o.polar}return!1}getCenter(u,o){if(this.paint.get("sky-type")==="atmosphere"){const h=this.paint.get("sky-atmosphere-sun"),v=!h,f=u.style.light,y=f.properties.get("position");return v&&f.properties.get("anchor")==="viewport"&&Xt("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),v?TC(y.azimuthal,90-y.polar,o):TC(h[0],90-h[1],o)}const l=this.paint.get("sky-gradient-center");return TC(l[0],90-l[1],o)}isSky(){return!0}markSkyboxValid(u){this._skyboxInvalidated=!1,this._lightPosition=u.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const u=this.paint.get("sky-type");return u==="atmosphere"?["skyboxCapture","skybox"]:u==="gradient"?["skyboxGradient"]:null}},slot:class extends xa{constructor(u,o,l,h){super(u,{paint:FA||(FA=new Ri({}))},o,null)}},model:class extends xa{constructor(u,o,l,h){super(u,{layout:ZA||(ZA=new Ri({visibility:new mn(Ot.layout_model.visibility),"model-id":new Yn(Ot.layout_model["model-id"])})),paint:YA||(YA=new Ri({"model-opacity":new mn(Ot.paint_model["model-opacity"]),"model-rotation":new Yn(Ot.paint_model["model-rotation"]),"model-scale":new Yn(Ot.paint_model["model-scale"]),"model-translation":new Yn(Ot.paint_model["model-translation"]),"model-color":new Yn(Ot.paint_model["model-color"]),"model-color-mix-intensity":new Yn(Ot.paint_model["model-color-mix-intensity"]),"model-type":new mn(Ot.paint_model["model-type"]),"model-cast-shadows":new mn(Ot.paint_model["model-cast-shadows"]),"model-receive-shadows":new mn(Ot.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new mn(Ot.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new Yn(Ot.paint_model["model-emissive-strength"]),"model-roughness":new Yn(Ot.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new Yn(Ot.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new mn(Ot.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new mn(Ot.paint_model["model-front-cutoff"])}))},o,l,h),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(u){return new PC(u)}getProgramIds(){return["model"]}is3D(){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(u){return u instanceof Cx?Tn-1:0}queryIntersectsFeature(u,o,l,h,v,f){if(!this.modelManager)return!1;const y=this.modelManager,E=u.tile.getBucket(this);if(!(E&&E instanceof PC))return!1;const O=E;for(const k in O.instancesPerModel){const w=O.instancesPerModel[k],R=o.id!==void 0?o.id:o.properties&&o.properties.hasOwnProperty("id")?o.properties.id:void 0;if(w.idToFeaturesIndex.hasOwnProperty(R)){const D=w.features[w.idToFeaturesIndex[R]],P=y.getModel(k,this.scope);if(!P)return!1;let A=Pe.mat4.create();const F=new G(0,0),q=O.canonical;let Z=Number.MAX_VALUE;for(let ie=0;ie<D.instancedDataCount;++ie){const oe=16*(D.instancedDataOffset+ie),te=w.instancedDataArray.float32,ue=[te[oe+4],te[oe+5],te[oe+6]];r3(q,F,te[oe],0|te[oe+1]),JA(A,P,f,F,D.rotation,D.scale,ue,!1,!1,!1),f.projection.name==="globe"&&(A=MC(A,f));const _e=Pe.mat4.multiply([],f.projMatrix,A),Re=u.queryGeometry,Ue=WA(Re.isPointQuery()?Re.screenBounds:Re.screenGeometry,f,_e,P.aabb);Ue!=null&&(Z=Math.min(Ue,Z))}return Z!==Number.MAX_VALUE&&Z}}return!1}_handleOverridablePaintPropertyUpdate(u,o,l){return!(!this.layout||o.isDataDriven()||l.isDataDriven()||u!=="model-color"&&u!=="model-color-mix-intensity"&&u!=="model-rotation"&&u!=="model-scale"&&u!=="model-translation"&&u!=="model-emissive-strength")}_isPropertyZoomDependent(u){const o=this._transitionablePaint._values[u];return o!=null&&o.value!=null&&o.value.expression!=null&&o.value.expression instanceof ih}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}queryIntersectsMatchingFeature(u,o,l,h){const v=u.tile,f=v.getBucket(this);let y=null,E=Number.MAX_VALUE;if(!(f&&f instanceof Cx))return{queryFeature:y,intersectionZ:E};const O=f.getNodesInfo()[o];if(O.hiddenByReplacement||!O.node.meshes||!l.filter(new Zi(v.tileID.overscaledZ),O.feature,v.tileID.canonical))return{queryFeature:y,intersectionZ:E};const k=O.node,w=h.calculatePosMatrix(v.tileID.toUnwrapped(),h.worldSize),R=O.evaluatedScale;let D=0;h.elevation&&k.elevation&&(D=k.elevation*h.elevation.exaggeration()),Pe.mat4.translate(w,w,[(k.anchor?k.anchor[0]:0)*(R[0]-1),(k.anchor?k.anchor[1]:0)*(R[1]-1),D]),Pe.mat4.scale(w,w,R);const P=u.queryGeometry,A=P.isPointQuery()?P.screenBounds:P.screenGeometry,F=function(te){const ue=Pe.mat4.multiply([],w,te.matrix);Pe.mat4.multiply(ue,h.expandedFarZProjMatrix,ue);for(let _e=0;_e<te.meshes.length;++_e){const Re=te.meshes[_e];if(_e===te.lightMeshIndex)continue;const Ue=WA(A,h,ue,Re.aabb);Ue!=null&&(E=Math.min(Ue,E))}if(te.children)for(const _e of te.children)F(_e)};if(F(k),E===Number.MAX_VALUE)return{queryFeature:y,intersectionZ:E};const q=new G(0,0);r3(v.tileID.canonical,q,O.node.anchor[0],O.node.anchor[1]);const{z:Z,x:ie,y:oe}=v.tileID.canonical;return y=new Tv({},Z,ie,oe,O.feature.id),y.properties=O.feature.properties,y.geometry={type:"Point",coordinates:[q.lng,q.lat]},y.layer={...this.serialize(),id:this.fqid},y.state={},y.tile=v.tileID.canonical,{queryFeature:y,intersectionZ:E}}},clip:class extends xa{constructor(u,o,l,h){super(u,{layout:YR||(YR=new Ri({"clip-layer-types":new mn(Ot.layout_clip["clip-layer-types"]),"clip-layer-scope":new mn(Ot.layout_clip["clip-layer-scope"])})),paint:JR||(JR=new Ri({}))},o,l,h)}recalculate(u,o){super.recalculate(u,o)}createBucket(u){return new QR(u)}isTileClipped(){return!0}is3D(){return!0}}};class jU{constructor(o){this._callback=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class VU{constructor(){this.tasks={},this.taskQueue=[],Cn(["process"],this),this.invoker=new jU(this.process),this.nextId=0}add(o,l){const h=this.nextId++,v=function({type:f,isSymbolTile:y,zoom:E}){return E=E||0,f==="message"?0:f!=="maybePrepare"||y?f!=="parseTile"||y?f==="parseTile"&&y?300-E:f==="maybePrepare"&&y?400-E:500:200-E:100-E}(l);if(v===0){try{o()}finally{}return null}return this.tasks[h]={fn:o,metadata:l,priority:v,id:h},this.taskQueue.push(h),this.invoker.trigger(),{cancel:()=>{delete this.tasks[h]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(h=>!!this.tasks[h]),!this.taskQueue.length)return;const o=this.pick();if(o===null)return;const l=this.tasks[o];if(delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),!l)return;l.fn()}finally{}}pick(){let o=null,l=1/0;for(let v=0;v<this.taskQueue.length;v++){const f=this.tasks[this.taskQueue[v]];f.priority<l&&(l=f.priority,o=v)}if(o===null)return null;const h=this.taskQueue[o];return this.taskQueue.splice(o,1),h}remove(){this.invoker.remove()}}class i3{constructor(o,l,h){this.target=o,this.parent=l,this.mapId=h,this.callbacks={},this.cancelCallbacks={},Cn(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new VU}send(o,l,h,v,f=!1,y){const E=Math.round(1e18*Math.random()).toString(36).substring(0,10);h&&(h.metadata=y,this.callbacks[E]=h);const O=new Set;return this.target.postMessage({id:E,type:o,hasCallback:!!h,targetMapId:v,mustQueue:f,sourceMapId:this.mapId,data:zc(l,O)},O),{cancel:()=>{h&&delete this.callbacks[E],this.target.postMessage({id:E,type:"<cancel>",targetMapId:v,sourceMapId:this.mapId})}}}receive(o){const l=o.data,h=l.id;if(h&&(!l.targetMapId||this.mapId===l.targetMapId))if(l.type==="<cancel>"){const v=this.cancelCallbacks[h];delete this.cancelCallbacks[h],v&&v.cancel()}else if(l.mustQueue||pr()){const v=this.callbacks[h],f=this.scheduler.add(()=>this.processTask(h,l),v&&v.metadata||{type:"message"});f&&(this.cancelCallbacks[h]=f)}else this.processTask(h,l)}processTask(o,l){if(delete this.cancelCallbacks[o],l.type==="<response>"){const h=this.callbacks[o];delete this.callbacks[o],h&&(l.error?h(Aa(l.error)):h(null,Aa(l.data)))}else{const h=new Set,v=l.hasCallback?(y,E)=>{this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:y?zc(y):null,data:zc(E,h)},h)}:()=>{},f=Aa(l.data);if(this.parent[l.type])this.parent[l.type](l.sourceMapId,f,v);else if(this.parent.getWorkerSource){const y=l.type.split(".");this.parent.getWorkerSource(l.sourceMapId,y[0],f.source,f.scope)[y[1]](f,v)}else v(new Error(`Could not find function ${l.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}class fp{constructor(o,l){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=Rn();const h=this.workerPool.acquire(this.id);for(let v=0;v<h.length;v++){const f=new fp.Actor(h[v],l,this.id);f.name=`Worker ${v}`,this.actors.push(f)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(o,l,h){Pn(this.actors,(v,f)=>{v.send(o,l,f)},h=h||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(o=>{o.remove()}),this.actors=[],this.workerPool.release(this.id)}}fp.Actor=i3;class o3{constructor(o){this.size=o,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(o,l){const h=this.toIdx(o,l);return{min:this.minimums[h],max:this.maximums[h]}}isLeaf(o,l){return this.leaves[this.toIdx(o,l)]}toIdx(o,l){return l*this.size+o}}function a3(u,o,l,h){let v=0,f=Number.MAX_VALUE;for(let y=0;y<3;y++)if(Math.abs(h[y])<1e-15){if(l[y]<u[y]||l[y]>o[y])return null}else{const E=1/h[y];let O=(u[y]-l[y])*E,k=(o[y]-l[y])*E;if(O>k){const w=O;O=k,k=w}if(O>v&&(v=O),k<f&&(f=k),v>f)return null}return v}function s3(u,o,l,h,v,f,y,E,O,k,w){const R=h-u,D=v-o,P=f-l,A=y-u,F=E-o,q=O-l,Z=w[1]*q-w[2]*F,ie=w[2]*A-w[0]*q,oe=w[0]*F-w[1]*A,te=R*Z+D*ie+P*oe;if(Math.abs(te)<1e-15)return null;const ue=1/te,_e=k[0]-u,Re=k[1]-o,Ue=k[2]-l,Le=(_e*Z+Re*ie+Ue*oe)*ue;if(Le<0||Le>1)return null;const Fe=Re*P-Ue*D,tt=Ue*R-_e*P,Ne=_e*D-Re*R,et=(w[0]*Fe+w[1]*tt+w[2]*Ne)*ue;return et<0||Le+et>1?null:(A*Fe+F*tt+q*Ne)*ue}function l3(u,o,l){return(u-o)/(l-o)}function c3(u,o,l,h,v,f,y,E,O){const k=1<<l,w=f-h,R=y-v,D=(u+1)/k*w+h,P=(o+0)/k*R+v,A=(o+1)/k*R+v;E[0]=(u+0)/k*w+h,E[1]=P,O[0]=D,O[1]=A}class u3{constructor(o){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=o,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const l=function(f){const y=Math.ceil(Math.log2(f.dim/8)),E=[];let O=Math.ceil(Math.pow(2,y));const k=1/O,w=(P,A,F,q,Z)=>{const ie=q?1:0,oe=(P+1)*F-ie,te=A*F,ue=(A+1)*F-ie;Z[0]=P*F,Z[1]=te,Z[2]=oe,Z[3]=ue};let R=new o3(O);const D=[];for(let P=0;P<O*O;P++){w(P%O,Math.floor(P/O),k,!1,D);const A=Yu(D[0],D[1],f),F=Yu(D[2],D[1],f),q=Yu(D[2],D[3],f),Z=Yu(D[0],D[3],f);R.minimums.push(Math.min(A,F,q,Z)),R.maximums.push(Math.max(A,F,q,Z)),R.leaves.push(1)}for(E.push(R),O/=2;O>=1;O/=2){const P=E[E.length-1];R=new o3(O);for(let A=0;A<O*O;A++){w(A%O,Math.floor(A/O),2,!0,D);const F=P.getElevation(D[0],D[1]),q=P.getElevation(D[2],D[1]),Z=P.getElevation(D[2],D[3]),ie=P.getElevation(D[0],D[3]),oe=P.isLeaf(D[0],D[1]),te=P.isLeaf(D[2],D[1]),ue=P.isLeaf(D[2],D[3]),_e=P.isLeaf(D[0],D[3]),Re=Math.min(F.min,q.min,Z.min,ie.min),Ue=Math.max(F.max,q.max,Z.max,ie.max),Le=oe&&te&&ue&&_e;R.maximums.push(Ue),R.minimums.push(Re),R.leaves.push(Ue-Re<=5&&Le?1:0)}E.push(R)}return E}(this.dem),h=l.length-1,v=l[h];this._addNode(v.minimums[0],v.maximums[0],v.leaves[0]),this._construct(l,0,0,h,0)}raycastRoot(o,l,h,v,f,y,E=1){return a3([o,l,-100],[h,v,this.maximums[0]*E],f,y)}raycast(o,l,h,v,f,y,E=1){if(!this.nodeCount)return null;const O=this.raycastRoot(o,l,h,v,f,y,E);if(O==null)return null;const k=[],w=[],R=[],D=[],P=[{idx:0,t:O,nodex:0,nodey:0,depth:0}];for(;P.length>0;){const{idx:A,t:F,nodex:q,nodey:Z,depth:ie}=P.pop();if(this.leaves[A]){c3(q,Z,ie,o,l,h,v,R,D);const te=1<<ie,ue=(q+0)/te,_e=(q+1)/te,Re=(Z+0)/te,Ue=(Z+1)/te,Le=Yu(ue,Re,this.dem)*E,Fe=Yu(_e,Re,this.dem)*E,tt=Yu(_e,Ue,this.dem)*E,Ne=Yu(ue,Ue,this.dem)*E,et=s3(R[0],R[1],Le,D[0],R[1],Fe,D[0],D[1],tt,f,y),lt=s3(D[0],D[1],tt,R[0],D[1],Ne,R[0],R[1],Le,f,y),ct=Math.min(et!==null?et:Number.MAX_VALUE,lt!==null?lt:Number.MAX_VALUE);if(ct!==Number.MAX_VALUE)return ct;{const xt=Pe.vec3.scaleAndAdd([],f,y,F);if(d3(Le,Fe,Ne,tt,l3(xt[0],R[0],D[0]),l3(xt[1],R[1],D[1]))>=xt[2])return F}continue}let oe=0;for(let te=0;te<this._siblingOffset.length;te++){c3((q<<1)+this._siblingOffset[te][0],(Z<<1)+this._siblingOffset[te][1],ie+1,o,l,h,v,R,D),R[2]=-100,D[2]=this.maximums[this.childOffsets[A]+te]*E;const ue=a3(R,D,f,y);if(ue!=null){const _e=ue;k[te]=_e;let Re=!1;for(let Ue=0;Ue<oe&&!Re;Ue++)_e>=k[w[Ue]]&&(w.splice(Ue,0,te),Re=!0);Re||(w[oe]=te),oe++}}for(let te=0;te<oe;te++){const ue=w[te];P.push({idx:this.childOffsets[A]+ue,t:k[ue],nodex:(q<<1)+this._siblingOffset[ue][0],nodey:(Z<<1)+this._siblingOffset[ue][1],depth:ie+1})}}return null}_addNode(o,l,h){return this.minimums.push(o),this.maximums.push(l),this.leaves.push(h),this.childOffsets.push(0),this.nodeCount++}_construct(o,l,h,v,f){if(o[v].isLeaf(l,h)===1)return;this.childOffsets[f]||(this.childOffsets[f]=this.nodeCount);const y=v-1,E=o[y];let O=0,k=0;for(let w=0;w<this._siblingOffset.length;w++){const R=2*l+this._siblingOffset[w][0],D=2*h+this._siblingOffset[w][1],P=E.getElevation(R,D),A=E.isLeaf(R,D),F=this._addNode(P.min,P.max,A);A&&(O|=1<<w),k||(k=F)}for(let w=0;w<this._siblingOffset.length;w++)O&1<<w||this._construct(o,2*l+this._siblingOffset[w][0],2*h+this._siblingOffset[w][1],y,k+w)}}function d3(u,o,l,h,v,f){return Zn(Zn(u,l,f),Zn(o,h,f),v)}function Yu(u,o,l){const h=l.dim,v=Rt(u*h-.5,0,h-1),f=Rt(o*h-.5,0,h-1),y=Math.floor(v),E=Math.floor(f),O=Math.min(y+1,h-1),k=Math.min(E+1,h-1);return d3(l.get(y,E),l.get(O,E),l.get(y,k),l.get(O,k),v-y,f-E)}const HU={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function UU(u,o,l){return(256*u*256+256*o+l)/10-1e4}function WU(u,o,l){return 256*u+o+l/256-32768}class Ex{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(o,l,h,v=!1){if(this.uid=o,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return void Xt(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=l.height;const f=this.dim=l.height-2,y=new Uint32Array(l.data.buffer);if(this.pixels=new Uint8Array(l.data.buffer),this.floatView=new Float32Array(l.data.buffer),this.borderReady=v,this._modifiedForSources={},!v){for(let O=0;O<f;O++)y[this._idx(-1,O)]=y[this._idx(0,O)],y[this._idx(f,O)]=y[this._idx(f-1,O)],y[this._idx(O,-1)]=y[this._idx(O,0)],y[this._idx(O,f)]=y[this._idx(O,f-1)];y[this._idx(-1,-1)]=y[this._idx(0,0)],y[this._idx(f,-1)]=y[this._idx(f-1,0)],y[this._idx(-1,f)]=y[this._idx(0,f-1)],y[this._idx(f,f)]=y[this._idx(f-1,f-1)]}const E=h==="terrarium"?WU:UU;for(let O=0;O<y.length;++O){const k=4*O;this.floatView[O]=E(this.pixels[k],this.pixels[k+1],this.pixels[k+2])}this._timestamp=kt.now()}_buildQuadTree(){this._tree=new u3(this)}get(o,l,h=!1){h&&(o=Rt(o,-1,this.dim),l=Rt(l,-1,this.dim));const v=this._idx(o,l);return this.floatView[v]}set(o,l,h){const v=this._idx(o,l),f=this.floatView[v];return this.floatView[v]=h,h-f}static getUnpackVector(o){return HU[o]}_idx(o,l){if(o<-1||o>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(o+1)}static pack(o,l){const h=[0,0,0,0],v=Ex.getUnpackVector(l);let f=Math.floor((o+v[3])/v[2]);return h[2]=f%256,f=Math.floor(f/256),h[1]=f%256,f=Math.floor(f/256),h[0]=f,h}getPixels(){return new UR({width:this.stride,height:this.stride},this.pixels)}backfillBorder(o,l,h){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let v=l*this.dim,f=l*this.dim+this.dim,y=h*this.dim,E=h*this.dim+this.dim;switch(l){case-1:v=f-1;break;case 1:f=v+1}switch(h){case-1:y=E-1;break;case 1:E=y+1}const O=-l*this.dim,k=-h*this.dim;for(let w=y;w<E;w++)for(let R=v;R<f;R++){const D=4*this._idx(R,w),P=4*this._idx(R+O,w+k);this.pixels[D+0]=o.pixels[P+0],this.pixels[D+1]=o.pixels[P+1],this.pixels[D+2]=o.pixels[P+2],this.pixels[D+3]=o.pixels[P+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function GU(u,o,l){u===1?o.headerLength=l.readFixed32():u===2?o.x=l.readVarint():u===3?o.y=l.readVarint():u===4?o.z=l.readVarint():u===5&&o.layers.push(function(h,v){return h.readFields(YU,{version:0,name:"",units:"",tileSize:0,buffer:0,pixelFormat:0,dataIndex:[]},v)}(l,l.readVarint()+l.pos))}function qU(u,o,l){u===1?(o.delta_filter=function(h,v){return h.readFields(KU,{blockSize:0},v)}(l,l.readVarint()+l.pos),o.filter="delta_filter"):u===2?(l.readVarint(),o.filter="zigzag_filter"):u===3?(l.readVarint(),o.filter="bitshuffle_filter"):u===4&&(l.readVarint(),o.filter="byteshuffle_filter")}function KU(u,o,l){u===1&&(o.blockSize=l.readVarint())}function XU(u,o,l){u===1?(l.readVarint(),o.codec="gzip_data"):u===2?(l.readVarint(),o.codec="jpeg_image"):u===3?(l.readVarint(),o.codec="webp_image"):u===4&&(l.readVarint(),o.codec="png_image")}function ZU(u,o,l){let h=0,v=0;u===1?o.firstByte=l.readFixed64():u===2?o.lastByte=l.readFixed64():u===3?o.filters.push(function(f,y){return f.readFields(qU,{},y)}(l,l.readVarint()+l.pos)):u===4?o.codec=function(f,y){return f.readFields(XU,{},y)}(l,l.readVarint()+l.pos):u===5?v=l.readFloat():u===6?h=l.readFloat():u===7?o.bands.push(l.readString()):u===8?o.offset=l.readDouble():u===9&&(o.scale=l.readDouble()),o.offset===0&&(o.offset=v),o.scale===0&&(o.scale=h)}function YU(u,o,l){u===1?o.version=l.readVarint():u===2?o.name=l.readString():u===3?o.units=l.readString():u===4?o.tileSize=l.readVarint():u===5?o.buffer=l.readVarint():u===6?o.pixelFormat=l.readVarint():u===7&&o.dataIndex.push(function(h,v){return h.readFields(ZU,{firstByte:0,lastByte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},v)}(l,l.readVarint()+l.pos))}function JU(u,o,l){if(u===2)(function(h,v,f){h.readFields(QU,f,v)})(l,l.readVarint()+l.pos,o);else if(u===3)throw new Error("Not implemented")}function QU(u,o,l){if(u===1){let h=0;const v=l.readVarint()+l.pos;for(;l.pos<v;)o[h++]=l.readVarint()}}Fn(Ex,"DEMData"),Fn(u3,"DemMinMaxQuadTree",{omit:["dem"]});class e7{constructor(o){this.capacity=o,this.cache=new Map}get(o){if(!this.cache.has(o))return;const l=this.cache.get(o);return this.cache.delete(o),this.cache.set(o,l),l}put(o,l){this.cache.has(o)?this.cache.delete(o):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(o,l)}}function t7(u,o){if(o.length!==4)throw new Error(`Expected data of dimension 4 but got ${o.length}.`);let l=o[3];for(let h=2;h>=1;h--){const v=h===1?1:0,f=h===2?1:0;for(let y=0;y<o[0];y++){const E=o[1]*y;for(let O=v;O<o[1];O++){const k=o[2]*(O+E);for(let w=f;w<o[2];w++){const R=o[3]*(w+k);for(let D=0;D<o[3];D++){const P=R+D;u[P]+=u[P-l]}}}}l*=o[h]}return u}function n7(u){for(let o=0,l=u.length;o<l;o++)u[o]=u[o]>>>1^-(1&u[o]);return u}function r7(u,o){switch(o){case"uint32":return u;case"uint16":for(let l=0;l<u.length;l+=2){const h=u[l],v=u[l+1];u[l]=(240&h)>>4|(61440&h)>>8|(240&v)<<4|61440&v,u[l+1]=15&h|(3840&h)>>4|(15&v)<<8|(3840&v)<<4}return u;case"uint8":for(let l=0;l<u.length;l+=4){const h=u[l],v=u[l+1],f=u[l+2],y=u[l+3];u[l+0]=(192&h)>>6|(192&v)>>4|(192&f)>>2|192&y,u[l+1]=(48&h)>>4|(48&v)>>2|48&f|(48&y)<<2,u[l+2]=(12&h)>>2|12&v|(12&f)<<2|(12&y)<<4,u[l+3]=3&h|(3&v)<<2|(3&f)<<4|(3&y)<<6}return u;default:throw new Error(`Invalid pixel format, "${o}"`)}}var Ps=Uint8Array,Iv=Uint16Array,i7=Int32Array,h3=new Ps([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),f3=new Ps([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o7=new Ps([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),p3=function(u,o){for(var l=new Iv(31),h=0;h<31;++h)l[h]=o+=1<<u[h-1];var v=new i7(l[30]);for(h=1;h<30;++h)for(var f=l[h];f<l[h+1];++f)v[f]=f-l[h]<<5|h;return{b:l,r:v}},m3=p3(h3,2),g3=m3.b,a7=m3.r;g3[28]=258,a7[258]=28;for(var s7=p3(f3,0).b,v3=new Iv(32768),xo=0;xo<32768;++xo){var pp=(43690&xo)>>1|(21845&xo)<<1;v3[xo]=((65280&(pp=(61680&(pp=(52428&pp)>>2|(13107&pp)<<2))>>4|(3855&pp)<<4))>>8|(255&pp)<<8)>>1}var Mv=function(u,o,l){for(var h=u.length,v=0,f=new Iv(o);v<h;++v)u[v]&&++f[u[v]-1];var y,E=new Iv(o);for(v=1;v<o;++v)E[v]=E[v-1]+f[v-1]<<1;y=new Iv(1<<o);var O=15-o;for(v=0;v<h;++v)if(u[v])for(var k=v<<4|u[v],w=o-u[v],R=E[u[v]-1]++<<w,D=R|(1<<w)-1;R<=D;++R)y[v3[R]>>O]=k;return y},Pv=new Ps(288);for(xo=0;xo<144;++xo)Pv[xo]=8;for(xo=144;xo<256;++xo)Pv[xo]=9;for(xo=256;xo<280;++xo)Pv[xo]=7;for(xo=280;xo<288;++xo)Pv[xo]=8;var y3=new Ps(32);for(xo=0;xo<32;++xo)y3[xo]=5;var l7=Mv(Pv,9),c7=Mv(y3,5),DC=function(u){for(var o=u[0],l=1;l<u.length;++l)u[l]>o&&(o=u[l]);return o},Ml=function(u,o,l){var h=o/8|0;return(u[h]|u[h+1]<<8)>>(7&o)&l},$C=function(u,o){var l=o/8|0;return(u[l]|u[l+1]<<8|u[l+2]<<16)>>(7&o)},u7=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Pl=function(u,o,l){var h=new Error(o||u7[u]);if(h.code=u,Error.captureStackTrace&&Error.captureStackTrace(h,Pl),!l)throw h;return h},d7=new Ps(0),h7=typeof TextDecoder<"u"&&new TextDecoder;try{h7.decode(d7,{stream:!0})}catch{}const f7={gzip_data:"gzip"};class Zs extends Error{constructor(o){super(o),this.name="MRTError"}}const p7={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},_3={uint32:1,uint16:2,uint8:4},m7={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let kC;class zC{constructor(o=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=o}getLayer(o){const l=this.layers[o];if(!l)throw new Zs(`Layer '${o}' not found`);return l}getHeaderLength(o){const l=new Uint8Array(o),h=new DataView(o);if(l[0]!==13)throw new Zs("File is not a valid MRT.");return h.getUint32(1,!0)}parseHeader(o){const l=new Uint8Array(o),h=this.getHeaderLength(o);if(l.length<h)throw new Zs(`Expected header with length >= ${h} but got buffer of length ${l.length}`);const v=function(f,y){return f.readFields(GU,{headerLength:0,x:0,y:0,z:0,layers:[]},void 0)}(new kC(l.subarray(0,h)));if(!isNaN(this.x)&&(this.x!==v.x||this.y!==v.y||this.z!==v.z))throw new Zs(`Invalid attempt to parse header ${v.z}/${v.x}/${v.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=v.x,this.y=v.y,this.z=v.z;for(const f of v.layers)this.layers[f.name]=new g7(f,{cacheSize:this._cacheSize});return this}createDecodingTask(o){const l=[],h=this.getLayer(o.layerName);for(let v of o.blockIndices){const f=h.dataIndex[v],y=f.firstByte-o.firstByte,E=f.lastByte-o.firstByte;if(h._blocksInProgress.has(v))continue;const O={layerName:h.name,firstByte:y,lastByte:E,pixelFormat:h.pixelFormat,blockIndex:v,blockShape:[f.bands.length].concat(h.bandShape),buffer:h.buffer,codec:f.codec.codec,filters:f.filters.map(k=>k.filter)};h._blocksInProgress.add(v),l.push(O)}return new x3(l,()=>{l.forEach(v=>h._blocksInProgress.delete(v.blockIndex))},(v,f)=>{if(l.forEach(y=>h._blocksInProgress.delete(y.blockIndex)),v)throw v;f.forEach(y=>{this.getLayer(y.layerName).processDecodedData(y)})})}}class g7{constructor({version:o,name:l,units:h,tileSize:v,pixelFormat:f,buffer:y,dataIndex:E},O){if(this.version=o,this.version!==1)throw new Zs(`Cannot parse raster layer encoded with MRT version ${o}`);this.name=l,this.units=h,this.tileSize=v,this.buffer=y,this.pixelFormat=p7[f],this.dataIndex=E,this.bandShape=[v+2*y,v+2*y,_3[this.pixelFormat]],this._decodedBlocks=new e7(O?O.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return _3[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(({bands:o})=>o).flat()}processDecodedData(o){const l=o.blockIndex.toString();this._decodedBlocks.get(l)||this._decodedBlocks.put(l,o.data)}getBlockForBand(o){let l=0;switch(typeof o){case"string":for(const[h,v]of this.dataIndex.entries()){for(const[f,y]of v.bands.entries())if(y===o)return{bandIndex:l+f,blockIndex:h,blockBandIndex:f};l+=v.bands.length}break;case"number":for(const[h,v]of this.dataIndex.entries()){if(o>=l&&o<l+v.bands.length)return{bandIndex:o,blockIndex:h,blockBandIndex:o-l};l+=v.bands.length}break;default:throw new Zs(`Invalid band \`${JSON.stringify(o)}\`. Expected string or integer.`)}throw new Zs(`Band not found: ${JSON.stringify(o)}`)}getDataRange(o){let l=1/0,h=-1/0;const v=[],f=new Set;for(const y of o){const{blockIndex:E}=this.getBlockForBand(y);if(E<0)throw new Zs(`Invalid band: ${JSON.stringify(y)}`);const O=this.dataIndex[E];v.includes(E)||v.push(E),f.add(E),l=Math.min(l,O.firstByte),h=Math.max(h,O.lastByte)}if(f.size>this.cacheSize)throw new Zs(`Number of blocks to decode (${f.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:l,lastByte:h,blockIndices:v}}hasBand(o){const{blockIndex:l}=this.getBlockForBand(o);return l>=0}hasDataForBand(o){const{blockIndex:l}=this.getBlockForBand(o);return l>=0&&!!this._decodedBlocks.get(l.toString())}getBandView(o){const{blockIndex:l,blockBandIndex:h}=this.getBlockForBand(o),v=this._decodedBlocks.get(l.toString());if(!v)throw new Zs(`Data for band ${JSON.stringify(o)} of layer "${this.name}" not decoded.`);const f=this.dataIndex[l],y=this.bandShape.reduce((k,w)=>k*w,1),E=h*y,O=v.subarray(E,E+y);return{data:O,bytes:new Uint8Array(O.buffer).subarray(O.byteOffset,O.byteOffset+O.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:f.offset,scale:f.scale}}}zC.setPbf=function(u){kC=u};class x3{constructor(o,l,h){this.tasks=o,this._onCancel=l,this._onComplete=h,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(o,l){this._finalized||(this._onComplete(o,l),this._finalized=!0)}}zC.performDecoding=function(u,o){const l=new Uint8Array(u);return Promise.all(o.tasks.map(h=>{const{layerName:v,firstByte:f,lastByte:y,pixelFormat:E,blockShape:O,blockIndex:k,filters:w,codec:R}=h,D=l.subarray(f,y+1),P=new Uint32Array(O[0]*O[1]*O[2]);let A;if(R!=="gzip_data")throw new Zs(`Unhandled codec: ${R}`);return A=function(F,q){if(!globalThis.DecompressionStream&&q==="gzip_data")return Promise.resolve(((te=function(Re){Re[0]==31&&Re[1]==139&&Re[2]==8||Pl(6,"invalid gzip data");var Ue=Re[3],Le=10;4&Ue&&(Le+=2+(Re[10]|Re[11]<<8));for(var Fe=(Ue>>3&1)+(Ue>>4&1);Fe>0;Fe-=!Re[Le++]);return Le+(2&Ue)}(oe=F))+8>oe.length&&Pl(6,"invalid gzip data"),function(Re,Ue,Le,Fe){var tt=Re.length;if(!tt||Ue.f&&!Ue.l)return Le||new Ps(0);var Ne=!Le,et=Ne||Ue.i!=2,lt=Ue.i;Ne&&(Le=new Ps(3*tt));var ct,xt,Pt=function(Ju){var Ih=Le.length;if(Ju>Ih){var zv=new Ps(Math.max(2*Ih,Ju));zv.set(Le),Le=zv}},$t=Ue.f||0,Tt=Ue.p||0,Ht=Ue.b||0,sn=Ue.l,Bt=Ue.d,Nn=Ue.m,En=Ue.n,pn=8*tt;do{if(!sn){$t=Ml(Re,Tt,1);var on=Ml(Re,Tt+1,3);if(Tt+=3,!on){var er=Re[(vr=4+((Tt+7)/8|0))-4]|Re[vr-3]<<8,Ln=vr+er;if(Ln>tt){lt&&Pl(0);break}et&&Pt(Ht+er),Le.set(Re.subarray(vr,Ln),Ht),Ue.b=Ht+=er,Ue.p=Tt=8*Ln,Ue.f=$t;continue}if(on==1)sn=l7,Bt=c7,Nn=9,En=5;else if(on==2){var Vn=Ml(Re,Tt,31)+257,xr=Ml(Re,Tt+10,15)+4,Or=Vn+Ml(Re,Tt+5,31)+1;Tt+=14;for(var Dr=new Ps(Or),Rr=new Ps(19),Fr=0;Fr<xr;++Fr)Rr[o7[Fr]]=Ml(Re,Tt+3*Fr,7);Tt+=3*xr;var Lr=DC(Rr),Si=(1<<Lr)-1,vi=Mv(Rr,Lr);for(Fr=0;Fr<Or;){var vr,ai=vi[Ml(Re,Tt,Si)];if(Tt+=15&ai,(vr=ai>>4)<16)Dr[Fr++]=vr;else{var li=0,Ni=0;for(vr==16?(Ni=3+Ml(Re,Tt,3),Tt+=2,li=Dr[Fr-1]):vr==17?(Ni=3+Ml(Re,Tt,7),Tt+=3):vr==18&&(Ni=11+Ml(Re,Tt,127),Tt+=7);Ni--;)Dr[Fr++]=li}}var uo=Dr.subarray(0,Vn),bo=Dr.subarray(Vn);Nn=DC(uo),En=DC(bo),sn=Mv(uo,Nn),Bt=Mv(bo,En)}else Pl(1);if(Tt>pn){lt&&Pl(0);break}}et&&Pt(Ht+131072);for(var ho=(1<<Nn)-1,to=(1<<En)-1,po=Tt;;po=Tt){var Eo=(li=sn[$C(Re,Tt)&ho])>>4;if((Tt+=15&li)>pn){lt&&Pl(0);break}if(li||Pl(2),Eo<256)Le[Ht++]=Eo;else{if(Eo==256){po=Tt,sn=null;break}var ia=Eo-254;Eo>264&&(ia=Ml(Re,Tt,(1<<(Ol=h3[Fr=Eo-257]))-1)+g3[Fr],Tt+=Ol);var Ai=Bt[$C(Re,Tt)&to],Qa=Ai>>4;if(Ai||Pl(3),Tt+=15&Ai,bo=s7[Qa],Qa>3){var Ol=f3[Qa];bo+=$C(Re,Tt)&(1<<Ol)-1,Tt+=Ol}if(Tt>pn){lt&&Pl(0);break}et&&Pt(Ht+131072);var Ys=Ht+ia;if(Ht<bo){var Js=0-bo,Th=Math.min(bo,Ys);for(Js+Ht<0&&Pl(3);Ht<Th;++Ht)Le[Ht]=(void 0)[Js+Ht]}for(;Ht<Ys;++Ht)Le[Ht]=Le[Ht-bo]}}Ue.l=sn,Ue.p=po,Ue.b=Ht,Ue.f=$t,sn&&($t=1,Ue.m=Nn,Ue.d=Bt,Ue.n=En)}while(!$t);return Ht!=Le.length&&Ne?(ct=Le,((xt=Ht)==null||xt>ct.length)&&(xt=ct.length),new Ps(ct.subarray(0,xt))):Le.subarray(0,Ht)}(oe.subarray(te,-8),{i:2},new Ps(((Z=oe)[(ie=Z.length)-4]|Z[ie-3]<<8|Z[ie-2]<<16|Z[ie-1]<<24)>>>0))));var Z,ie,oe,te;const ue=f7[q];if(!ue)throw new Error(`Unhandled codec: ${q}`);const _e=new globalThis.DecompressionStream(ue);return new Response(new Blob([F]).stream().pipeThrough(_e)).arrayBuffer().then(Re=>new Uint8Array(Re))}(D,R).then(F=>(function(q,Z){q.readFields(JU,Z)}(new kC(F),P),new m7[E](P.buffer))),A.then(F=>{for(let q=w.length-1;q>=0;q--)switch(w[q]){case"delta_filter":t7(F,O);break;case"zigzag_filter":n7(F);break;case"bitshuffle_filter":r7(F,E);break;default:throw new Zs(`Unhandled filter "${w[q]}"`)}return{layerName:v,blockIndex:k,data:F}}).catch(F=>{throw F})}))},Fn(x3,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]});var Rv={workerUrl:"",workerClass:null,workerParams:void 0};const LC="mapboxgl_preloaded_worker_pool";class Ov{constructor(){this.active={}}acquire(o){if(!this.workers)for(this.workers=[];this.workers.length<Ov.workerCount;)this.workers.push(Rv.workerClass!=null?new Rv.workerClass:new self.Worker(Rv.workerUrl,Rv.workerParams));return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],this.workers&&this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[LC]}numActive(){return Object.keys(this.active).length}}let Av;function Tx(){return Av||(Av=new Ov),Av}Ov.workerCount=2;let Dv,NC,Rl,mp,FC,gp=null;function b3(){return pr()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:NC||ke.DRACO_URL}function w3(){if(pr()&&self.worker&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(mp)return mp;const u=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return mp=WebAssembly.validate(u)?ke.MESHOPT_SIMD_URL:ke.MESHOPT_URL,mp}const Ix={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},v7={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},$v={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function S3(u,o,l){const h=l.json.bufferViews.length,v=l.buffers.length;o.bufferView=h,l.json.bufferViews[h]={buffer:v,byteLength:u.byteLength},l.buffers[v]=u}const BC="KHR_draco_mesh_compression";function y7(u,o){const l=u.extensions&&u.extensions[BC];if(!l)return;const h=new Rl.Decoder,v=I3(o,l.bufferView),f=new Rl.Mesh;if(!h.DecodeArrayToMesh(v,v.byteLength,f))throw new Error("Failed to decode Draco mesh");const y=o.json.accessors[u.indices],E=Ix[y.componentType],O=y.count*E.BYTES_PER_ELEMENT,k=Rl._malloc(O);E===Uint16Array?h.GetTrianglesUInt16Array(f,O,k):h.GetTrianglesUInt32Array(f,O,k),S3(Rl.memory.buffer.slice(k,k+O),y,o),Rl._free(k);for(const w of Object.keys(l.attributes)){const R=h.GetAttributeByUniqueId(f,l.attributes[w]),D=o.json.accessors[u.attributes[w]],P=v7[D.componentType],A=D.count*$v[D.type]*Ix[D.componentType].BYTES_PER_ELEMENT,F=Rl._malloc(A);h.GetAttributeDataArrayForAllPoints(f,R,Rl[P],A,F),S3(Rl.memory.buffer.slice(F,F+A),D,o),Rl._free(F)}h.destroy(),f.destroy(),delete u.extensions[BC]}const Mx="EXT_meshopt_compression";function _7(u,o){if(!u.extensions||!u.extensions[Mx])return;const l=u.extensions[Mx],h=new Uint8Array(o.buffers[l.buffer],l.byteOffset||0,l.byteLength||0),v=new Uint8Array(l.count*l.byteStride);FC.decodeGltfBuffer(v,l.count,l.byteStride,h,l.mode,l.filter),u.buffer=o.buffers.length,u.byteOffset=0,o.buffers[u.buffer]=v.buffer,delete u.extensions[Mx]}const C3=1179937895,E3=new TextDecoder("utf8");function T3(u,o){return new URL(u,o).href}function x7(u,o,l,h){return fetch(T3(u.uri,h)).then(v=>v.arrayBuffer()).then(v=>{o.buffers[l]=v})}function I3(u,o){const l=u.json.bufferViews[o];return new Uint8Array(u.buffers[l.buffer],l.byteOffset||0,l.byteLength)}function b7(u,o,l,h){if(u.uri){const v=T3(u.uri,h);return fetch(v).then(f=>f.blob()).then(f=>createImageBitmap(f)).then(f=>{o.images[l]=f})}if(u.bufferView!==void 0){const v=I3(o,u.bufferView),f=new Blob([v],{type:u.mimeType});return createImageBitmap(f).then(y=>{o.images[l]=y})}}function M3(u,o=0,l){const h={json:null,images:[],buffers:[]};if(new Uint32Array(u,o,1)[0]===C3){const w=new Uint32Array(u,o);let R=2;const D=(w[R++]>>2)-3,P=w[R++]>>2;if(R++,h.json=JSON.parse(E3.decode(w.subarray(R,R+P))),R+=P,R<D){const A=w[R++];R++;const F=o+(R<<2);h.buffers[0]=u.slice(F,F+A)}}else h.json=JSON.parse(E3.decode(new Uint8Array(u,o)));const{buffers:v,images:f,meshes:y,extensionsUsed:E,bufferViews:O}=h.json;let k=Promise.resolve();if(v){const w=[];for(let R=0;R<v.length;R++){const D=v[R];D.uri?w.push(x7(D,h,R,l)):h.buffers[R]||(h.buffers[R]=null)}k=Promise.all(w)}return k.then(()=>{const w=[],R=E&&E.includes(BC),D=E&&E.includes(Mx);if(R&&w.push(function(){if(!Rl)return Dv??(Dv=function(P){let A,F=null;function q(){A=new Uint8Array(F.buffer)}function Z(){throw new Error("Unexpected Draco error.")}const ie={a:{a:Z,d:function(oe,te,ue){return A.copyWithin(oe,te,te+ue)},c:function(oe){const te=A.length,ue=Math.max(oe>>>0,Math.ceil(1.2*te)),_e=Math.ceil((ue-te)/65536);try{return F.grow(_e),q(),!0}catch{return!1}},b:Z}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(P,ie):P.then(oe=>oe.arrayBuffer()).then(oe=>WebAssembly.instantiate(oe,ie))).then(oe=>{const{Rb:te,Qb:ue,P:_e,T:Re,X:Ue,Ja:Le,La:Fe,Qa:tt,Va:Ne,Wa:et,eb:lt,jb:ct,f:xt,e:Pt,yb:$t,zb:Tt,Ab:Ht,Bb:sn,Db:Bt,Gb:Nn}=oe.instance.exports;F=Pt;const En=(()=>{let pn=0,on=0,er=0,Ln=0;return Vn=>{er&&(te(Ln),te(pn),on+=er,er=pn=0),pn||(on+=128,pn=ue(on));const xr=Vn.length+7&-8;let Or=pn;xr>=on&&(er=xr,Or=Ln=ue(xr));for(let Dr=0;Dr<Vn.length;Dr++)A[Or+Dr]=Vn[Dr];return Or}})();return q(),xt(),{memory:Pt,_free:te,_malloc:ue,Mesh:class{constructor(){this.ptr=_e()}destroy(){Re(this.ptr)}},Decoder:class{constructor(){this.ptr=Le()}destroy(){ct(this.ptr)}DecodeArrayToMesh(pn,on,er){const Ln=En(pn),Vn=Fe(this.ptr,Ln,on,er.ptr);return!!Ue(Vn)}GetAttributeByUniqueId(pn,on){return{ptr:tt(this.ptr,pn.ptr,on)}}GetTrianglesUInt16Array(pn,on,er){Ne(this.ptr,pn.ptr,on,er)}GetTrianglesUInt32Array(pn,on,er){et(this.ptr,pn.ptr,on,er)}GetAttributeDataArrayForAllPoints(pn,on,er,Ln,Vn){lt(this.ptr,pn.ptr,on.ptr,er,Ln,Vn)}},DT_INT8:$t(),DT_UINT8:Tt(),DT_INT16:Ht(),DT_UINT16:sn(),DT_UINT32:Bt(),DT_FLOAT32:Nn()}})}(fetch(b3())),Dv.then(P=>{Rl=P,Dv=void 0}))}()),D&&w.push(function(){if(FC)return;const P=function(A){let F;const q=WebAssembly.instantiateStreaming(A,{}).then(oe=>{F=oe.instance,F.exports.__wasm_call_ctors()}),Z={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},ie={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:q,supported:!0,decodeGltfBuffer(oe,te,ue,_e,Re,Ue){(function(Le,Fe,tt,Ne,et,lt,ct){const xt=Le.exports.sbrk,Pt=Ne+3&-4,$t=xt(Pt*et),Tt=xt(lt.length),Ht=new Uint8Array(Le.exports.memory.buffer);Ht.set(lt,Tt);const sn=Fe($t,Ne,et,Tt,lt.length);if(sn===0&&ct&&ct($t,Pt,et),tt.set(Ht.subarray($t,$t+Ne*et)),xt($t-xt(0)),sn!==0)throw new Error(`Malformed buffer data: ${sn}`)})(F,F.exports[ie[Re]],oe,te,ue,_e,F.exports[Z[Ue]])}}}(fetch(w3()));return P.ready.then(()=>{FC=P})}()),f)for(let P=0;P<f.length;P++)w.push(b7(f[P],h,P,l));return(w.length?Promise.all(w):Promise.resolve()).then(()=>{if(R&&y)for(const{primitives:P}of y)for(const A of P)y7(A,h);if(D&&y&&O)for(const P of O)_7(P,h);return h})})}function Eh(u,o){const l=u.json.bufferViews[o.bufferView],h=Ix[o.componentType];return new h(u.buffers[l.buffer],(o.byteOffset||0)+(l.byteOffset||0),o.count*(l.byteStride&&l.byteStride!==$v[o.type]*h.BYTES_PER_ELEMENT?l.byteStride/h.BYTES_PER_ELEMENT:$v[o.type]))}function jC(u,o,l,h){const v=Ix[o.componentType],f=function(w){switch(w){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(v),y=u.json.bufferViews[o.bufferView],E=y.byteStride?y.byteStride/v.BYTES_PER_ELEMENT:$v[o.type],O=l.float32,k=O.length/l.capacity;for(let w=0,R=0;w<o.count*E;w+=E,R+=k)for(let D=0;D<k;D++)O[R+D]=h[w+D]*f;l._trim()}function w7(u,o,l){const h=u.indices,v=u.attributes,f={};f.indexArray=new ji;const y=o.json.accessors[h],E=y.count/3;f.indexArray.reserve(E);const O=Eh(o,y);for(let D=0;D<E;D++)f.indexArray.emplaceBack(O[3*D],O[3*D+1],O[3*D+2]);f.indexArray._trim(),f.vertexArray=new ac;const k=o.json.accessors[v.POSITION];f.vertexArray.reserve(k.count);const w=Eh(o,k);for(let D=0;D<k.count;D++)f.vertexArray.emplaceBack(w[3*D],w[3*D+1],w[3*D+2]);if(f.vertexArray._trim(),f.aabb=new si(k.min,k.max),f.centroid=function(D,P){const A=[0,0,0],F=D.length;if(F>0){for(let q=0;q<F;q++){const Z=3*D[q];A[0]+=P[Z],A[1]+=P[Z+1],A[2]+=P[Z+2]}A[0]/=F,A[1]/=F,A[2]/=F}return A}(O,w),v.COLOR_0!==void 0){const D=o.json.accessors[v.COLOR_0],P=$v[D.type],A=Eh(o,D);f.colorArray=P===3?new ac:new _l,f.colorArray.resize(D.count),jC(o,D,f.colorArray,A)}if(v.NORMAL!==void 0){f.normalArray=new ac;const D=o.json.accessors[v.NORMAL];f.normalArray.resize(D.count);const P=Eh(o,D);jC(o,D,f.normalArray,P)}if(v.TEXCOORD_0!==void 0&&l.length>0){f.texcoordArray=new ph;const D=o.json.accessors[v.TEXCOORD_0];f.texcoordArray.resize(D.count);const P=Eh(o,D);jC(o,D,f.texcoordArray,P)}if(v._FEATURE_ID_RGBA4444!==void 0){const D=o.json.accessors[v._FEATURE_ID_RGBA4444];o.json.extensionsUsed&&o.json.extensionsUsed.includes("EXT_meshopt_compression")&&(f.featureData=Eh(o,D))}v._FEATURE_RGBA4444!==void 0&&(f.featureData=new Uint32Array(Eh(o,o.json.accessors[v._FEATURE_RGBA4444]).buffer));const R=u.material;return f.material=function(D,P){const{emissiveFactor:A=[0,0,0],alphaMode:F="OPAQUE",alphaCutoff:q=.5,normalTexture:Z,occlusionTexture:ie,emissiveTexture:oe,doubleSided:te}=D,{baseColorFactor:ue=[1,1,1,1],metallicFactor:_e=1,roughnessFactor:Re=1,baseColorTexture:Ue,metallicRoughnessTexture:Le}=D.pbrMetallicRoughness||{},Fe=ie?P[ie.index]:void 0;if(ie&&ie.extensions&&ie.extensions.KHR_texture_transform&&Fe){const tt=ie.extensions.KHR_texture_transform;Fe.offsetScale=[tt.offset[0],tt.offset[1],tt.scale[0],tt.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new Sr(...ue),metallicFactor:_e,roughnessFactor:Re,baseColorTexture:Ue?P[Ue.index]:void 0,metallicRoughnessTexture:Le?P[Le.index]:void 0},doubleSided:te,emissiveFactor:A,alphaMode:F,alphaCutoff:q,normalTexture:Z?P[Z.index]:void 0,occlusionTexture:Fe,emissionTexture:oe?P[oe.index]:void 0,defined:D.defined===void 0}}(R!==void 0?o.json.materials[R]:{defined:!1},l),f}function P3(u,o,l){const{matrix:h,rotation:v,translation:f,scale:y,mesh:E,extras:O,children:k}=u,w={};if(w.matrix=h||Pe.mat4.fromRotationTranslationScale([],v||[0,0,0,1],f||[0,0,0],y||[1,1,1]),E!==void 0){w.meshes=l[E];const R=w.anchor=[0,0];for(const D of w.meshes){const{min:P,max:A}=D.aabb;R[0]+=P[0]+A[0],R[1]+=P[1]+A[1]}R[0]=Math.floor(R[0]/w.meshes.length/2),R[1]=Math.floor(R[1]/w.meshes.length/2)}if(O&&(O.id&&(w.id=O.id),O.lights&&(w.lights=function(R){if(!R.length)return[];const D=function(Z){const ie=atob(Z),oe=new Uint8Array(ie.length);for(let te=0;te<ie.length;te++)oe[te]=ie.codePointAt(te);return oe}(R),P=[],A=D.length/24,F=new Uint16Array(D.buffer),q=new Float32Array(D.buffer);for(let Z=0;Z<A;Z++){const ie=F[2*Z*6]/30,oe=F[2*Z*6+1]/30,te=F[2*Z*6+10]/100,ue=q[6*Z+1],_e=q[6*Z+2],Re=q[6*Z+3],Ue=q[6*Z+4],Le=Re-ue,Fe=Ue-_e,tt=Math.hypot(Le,Fe);P.push({pos:[ue+.5*Le,_e+.5*Fe,oe],normal:[Fe/tt,-Le/tt,0],width:tt,height:ie,depth:te,points:[ue,_e,Re,Ue]})}return P}(O.lights))),k){const R=[];for(const D of k)R.push(P3(o.json.nodes[D],o,l));w.children=R}return w}function S7(u){if(u.vertices.length===0||u.indices.length===0)return null;const o=new XS(u.vertices,u.indices,8,256),[l,h]=[o.min.clone(),o.max.clone()];return{vertices:u.vertices,indices:u.indices,grid:o,min:l,max:h}}function C7(u){if(!u.extras||!u.extras.ground)return null;const o=u.extras.ground;if(!o||!Array.isArray(o)||o.length===0)return null;const l=o[0];if(!l||!Array.isArray(l)||l.length===0)return null;const h=[];for(const y of l){if(!Array.isArray(y)||y.length!==2)continue;const E=y[0],O=y[1];typeof E=="number"&&typeof O=="number"&&h.push(new je(E,O))}if(h.length<3)return null;h.length>1&&h[h.length-1].equals(h[0])&&h.pop();let v=0;for(let y=0;y<h.length;y++){const E=h[y],O=h[(y+1)%h.length],k=h[(y+2)%h.length];v+=(E.x-O.x)*(k.y-O.y)-(k.x-O.x)*(E.y-O.y)}v>0&&h.reverse();const f=ov(h.flatMap(y=>[y.x,y.y]),[]);return f.length===0?null:{vertices:h,indices:f}}function E7(u,o){const l=[],h=[];let v=0;const f=[];for(const y of u){v=l.length;const E=y.vertexArray.float32,O=y.indexArray.uint16;for(let k=0;k<y.vertexArray.length;k++)f[0]=E[3*k+0],f[1]=E[3*k+1],f[2]=E[3*k+2],Pe.vec3.transformMat4(f,f,o),l.push(new je(f[0],f[1]));for(let k=0;k<3*y.indexArray.length;k++)h.push(O[k]+v)}if(h.length%3!=0)return null;for(let y=0;y<h.length;y+=3){const E=l[h[y+0]],O=l[h[y+1]],k=l[h[y+2]];(E.x-O.x)*(k.y-O.y)-(k.x-O.x)*(E.y-O.y)>0&&([h[y+1],h[y+2]]=[h[y+2],h[y+1]])}return{vertices:l,indices:h}}function R3(u){const o=function(O,k){const w=[],R=WebGL2RenderingContext;if(O.json.textures)for(const D of O.json.textures){const P={magFilter:R.LINEAR,minFilter:R.NEAREST,wrapS:R.REPEAT,wrapT:R.REPEAT};D.sampler!==void 0&&Object.assign(P,O.json.samplers[D.sampler]),w.push({image:k[D.source],sampler:P,uploaded:!1})}return w}(u,u.images),l=function(O,k){const w=[];for(const R of O.json.meshes){const D=[];for(const P of R.primitives)D.push(w7(P,O,k));w.push(D)}return w}(u,o),{scenes:h,scene:v,nodes:f}=u.json,y=h?h[v||0].nodes:f,E=[];for(const O of y)E.push(P3(f[O],u,l));return function(O,k,w){const R={},D=new Set;for(let P=0;P<O.length;P++){const A=w[k[P]];if(!A.extras)continue;const F=A.extras["mapbox:footprint:version"],q=A.extras["mapbox:footprint:id"];(F||q)&&D.add(P),F==="1.0.0"&&q&&(R[q]=P)}for(let P=0;P<O.length;P++){if(D.has(P))continue;const A=O[P],F=w[k[P]];if(!F.extras)continue;let q=null;A.id in R&&(q=E7(O[R[A.id]].meshes,A.matrix)),q||(q=C7(F)),q&&(A.footprint=S7(q))}if(D.size>0){const P=Array.from(D.values()).sort((A,F)=>A-F);for(let A=P.length-1;A>=0;A--)O.splice(P[A],1)}}(E,y,u.json.nodes),E}function T7(u){u.heightmap=new Float32Array(4096),u.heightmap.fill(-1);const o=u.vertexArray.float32,l=u.aabb.min[0]-1,h=u.aabb.min[1]-1,v=Sh/(u.aabb.max[0]-l+2),f=Sh/(u.aabb.max[1]-h+2);for(let y=0;y<o.length;y+=3){const E=o[y+2],O=(o[y+0]-l)*v|0,k=(o[y+1]-h)*f|0;E>u.heightmap[k*Sh+O]&&(u.heightmap[k*Sh+O]=E)}}function I7(u,o){const l={};l.indexArray=new ji,l.indexArray.reserve(4*u.length),l.vertexArray=new ac,l.vertexArray.reserve(10*u.length),l.colorArray=new _l,l.vertexArray.reserve(10*u.length);let h=0;for(const y of u){const E=Math.min(10,Math.max(4,1.3*y.height))*o,O=[-y.normal[1],y.normal[0],0],k=Math.min(.29,.1*y.width/y.depth),w=y.width-2*y.depth*o*(k+.01),R=Pe.vec3.scaleAndAdd([],y.pos,O,w/2),D=Pe.vec3.scaleAndAdd([],y.pos,O,-w/2),P=[R[0],R[1],R[2]+y.height],A=[D[0],D[1],D[2]+y.height],F=Pe.vec3.scaleAndAdd([],y.normal,O,k);Pe.vec3.scale(F,F,E);const q=Pe.vec3.scaleAndAdd([],y.normal,O,-k);Pe.vec3.scale(q,q,E),Pe.vec3.add(F,R,F),Pe.vec3.add(q,D,q),R[2]+=.1,D[2]+=.1,l.vertexArray.emplaceBack(F[0],F[1],F[2]),l.vertexArray.emplaceBack(q[0],q[1],q[2]),l.vertexArray.emplaceBack(R[0],R[1],R[2]),l.vertexArray.emplaceBack(D[0],D[1],D[2]),l.vertexArray.emplaceBack(P[0],P[1],P[2]),l.vertexArray.emplaceBack(A[0],A[1],A[2]),l.vertexArray.emplaceBack(R[0],R[1],R[2]),l.vertexArray.emplaceBack(D[0],D[1],D[2]),l.vertexArray.emplaceBack(F[0],F[1],F[2]),l.vertexArray.emplaceBack(q[0],q[1],q[2]);const Z=w/E/2;l.colorArray.emplaceBack(-Z-k,-1,Z,.8),l.colorArray.emplaceBack(Z+k,-1,Z,.8),l.colorArray.emplaceBack(-Z,0,Z,1.3),l.colorArray.emplaceBack(Z,0,Z,1.3),l.colorArray.emplaceBack(Z+k,-.8,Z,.7),l.colorArray.emplaceBack(Z+k,-.8,Z,.7),l.colorArray.emplaceBack(0,0,Z,1.3),l.colorArray.emplaceBack(0,0,Z,1.3),l.colorArray.emplaceBack(Z+k,-1.2,Z,.8),l.colorArray.emplaceBack(Z+k,-1.2,Z,.8),l.indexArray.emplaceBack(6+h,4+h,8+h),l.indexArray.emplaceBack(7+h,9+h,5+h),l.indexArray.emplaceBack(0+h,1+h,2+h),l.indexArray.emplaceBack(1+h,3+h,2+h),h+=10}const v={defined:!0,emissiveFactor:[0,0,0]},f={};return f.baseColorFactor=Sr.white,v.pbrMetallicRoughness=f,l.material=v,l.aabb=new si([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),l}class O3{constructor(o){this._stringToNumber={},this._numberToString=[];for(let l=0;l<o.length;l++){const h=o[l];this._stringToNumber[h]=l,this._numberToString[l]=h}}encode(o){return this._stringToNumber[o]}decode(o){return this._numberToString[o]}}class A3{constructor(o,l){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new kc(Tn,16,0),this.featureIndexArray=new $_,this.promoteId=l,this.is3DTile=!1,this.serializedLayersCache=new Map}insert(o,l,h,v,f,y=0,E=0){const O=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,v,f,y);const k=this.grid;for(let w=0;w<l.length;w++){const R=l[w],D=[1/0,1/0,-1/0,-1/0];for(let P=0;P<R.length;P++){const A=R[P];D[0]=Math.min(D[0],A.x),D[1]=Math.min(D[1],A.y),D[2]=Math.max(D[2],A.x),D[3]=Math.max(D[3],A.y)}E!==0&&(D[0]-=E,D[1]-=E,D[2]+=E,D[3]+=E),D[0]<Tn&&D[1]<Tn&&D[2]>=0&&D[3]>=0&&k.insert(O,D[0],D[1],D[2],D[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new op.VectorTile(new rx(this.rawTileData)).layers,this.sourceLayerCoder=new O3(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const o in this.vtLayers)this.vtFeatures[o]=[]}return this.vtLayers}query(o,l,h){this.loadVTLayers(),this.serializedLayersCache.clear();const v=Vf(o.filter),f=o.tileResult,y=o.transform,E=f.bufferedTilespaceBounds,O=this.grid.query(E.min.x,E.min.y,E.max.x,E.max.y,(D,P,A,F)=>_i(f.bufferedTilespaceGeometry,D,P,A,F));O.sort(M7);let k=null;y.elevation&&O.length>0&&(k=hp.create(y.elevation,this.tileID));const w={};let R;for(let D=0;D<O.length;D++){const P=O[D];if(P===R)continue;R=P;const A=this.featureIndexArray.get(P);let F=null;if(this.is3DTile){const q=this.bucketLayerIDs[0][0],Z=l[q];if(Z.type!=="model")continue;const{queryFeature:ie,intersectionZ:oe}=Z.queryIntersectsMatchingFeature(f,A.featureIndex,v,y);ie&&this.appendToResult(w,q,A.featureIndex,ie,oe)}else this.loadMatchingFeature(w,A,v,o.layers,o.availableImages,l,h,(q,Z,ie,oe=0)=>(F||(F=Et(q,this.tileID.canonical,o.tileTransform)),Z.queryIntersectsFeature(f,q,ie,F,this.z,o.transform,o.pixelPosMatrix,k,oe)))}return w}loadMatchingFeature(o,l,h,v,f,y,E,O){const{featureIndex:k,bucketIndex:w,sourceLayerIndex:R,layoutVertexArrayOffset:D}=l,P=this.bucketLayerIDs[w];if(v.length&&!function(Z,ie){for(let oe=0;oe<Z.length;oe++)if(ie.indexOf(Z[oe])>=0)return!0;return!1}(v,P))return;const A=this.sourceLayerCoder.decode(R),F=this.vtLayers[A].feature(k);if(h.needGeometry){const Z=Qt(F,!0);if(!h.filter(new Zi(this.tileID.overscaledZ),Z,this.tileID.canonical))return}else if(!h.filter(new Zi(this.tileID.overscaledZ),F))return;const q=this.getId(F,A);for(let Z=0;Z<P.length;Z++){const ie=P[Z];if(v.length&&v.indexOf(ie)<0)continue;const oe=y[ie];if(!oe)continue;let te={};q!==void 0&&E&&(te=E.getState(oe.sourceLayer||"_geojsonTileLayer",q));const ue=!O||O(F,oe,te,D);if(!ue)continue;const _e=new Tv(F,this.z,this.x,this.y,q);let Re=this.serializedLayersCache.get(ie);Re||(Re=oe.serialize(),Re.id=ie,this.serializedLayersCache.set(ie,Re)),_e.layer=Dn({},Re),_e.tile=this.tileID.canonical,_e.layer.paint=D3(Re.paint,oe.paint,F,te,f),_e.layer.layout=D3(Re.layout,oe.layout,F,te,f),this.appendToResult(o,ie,k,_e,ue)}}appendToResult(o,l,h,v,f){let y=o[l];y===void 0&&(y=o[l]=[]),y.push({featureIndex:h,feature:v,intersectionZ:f})}lookupSymbolFeatures(o,l,h,v,f,y,E){const O={};this.loadVTLayers();const k=Vf(v);for(const w of o)this.loadMatchingFeature(O,{bucketIndex:l,sourceLayerIndex:h,featureIndex:w,layoutVertexArrayOffset:0},k,f,y,E);return O}loadFeature(o){const{featureIndex:l,sourceLayerIndex:h}=o;this.loadVTLayers();const v=this.sourceLayerCoder.decode(h),f=this.vtFeatures[v];if(f[l])return f[l];const y=this.vtLayers[v].feature(l);return f[l]=y,y}hasLayer(o){for(const l of this.bucketLayerIDs)for(const h of l)if(o===h)return!0;return!1}getId(o,l){let h=o.id;if(this.promoteId){const v=typeof this.promoteId=="string"?this.promoteId:this.promoteId[l];v!=null&&(h=o.properties[v]),typeof h=="boolean"&&(h=Number(h))}return h}}function D3(u,o,l,h,v){return Ut(u,(f,y)=>{const E=o instanceof Au?o.get(y):null;return E&&E.evaluate?E.evaluate(l,h,v):E})}function M7(u,o){return o-u}Fn(A3,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const $3=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class VC{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,h]=new Uint8Array(o,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const v=h>>4;if(v!==1)throw new Error(`Got v${v} data when expected v1.`);const f=$3[15&h];if(!f)throw new Error("Unrecognized array type.");const[y]=new Uint16Array(o,2,1),[E]=new Uint32Array(o,4,1);return new VC(E,y,f,o)}constructor(o,l=64,h=Float64Array,v){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=h,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const f=$3.indexOf(this.ArrayType),y=2*o*this.ArrayType.BYTES_PER_ELEMENT,E=o*this.IndexArrayType.BYTES_PER_ELEMENT,O=(8-E%8)%8;if(f<0)throw new Error(`Unexpected typed array class: ${h}.`);v&&v instanceof ArrayBuffer?(this.data=v,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+E+O,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+y+E+O),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+E+O,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+f]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=o)}add(o,l){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=o,this.coords[this._pos++]=l,h}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return HC(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,l,h,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:y,nodeSize:E}=this,O=[0,f.length-1,0],k=[];for(;O.length;){const w=O.pop()||0,R=O.pop()||0,D=O.pop()||0;if(R-D<=E){for(let q=D;q<=R;q++){const Z=y[2*q],ie=y[2*q+1];Z>=o&&Z<=h&&ie>=l&&ie<=v&&k.push(f[q])}continue}const P=D+R>>1,A=y[2*P],F=y[2*P+1];A>=o&&A<=h&&F>=l&&F<=v&&k.push(f[P]),(w===0?o<=A:l<=F)&&(O.push(D),O.push(P-1),O.push(1-w)),(w===0?h>=A:v>=F)&&(O.push(P+1),O.push(R),O.push(1-w))}return k}within(o,l,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:f,nodeSize:y}=this,E=[0,v.length-1,0],O=[],k=h*h;for(;E.length;){const w=E.pop()||0,R=E.pop()||0,D=E.pop()||0;if(R-D<=y){for(let q=D;q<=R;q++)z3(f[2*q],f[2*q+1],o,l)<=k&&O.push(v[q]);continue}const P=D+R>>1,A=f[2*P],F=f[2*P+1];z3(A,F,o,l)<=k&&O.push(v[P]),(w===0?o-h<=A:l-h<=F)&&(E.push(D),E.push(P-1),E.push(1-w)),(w===0?o+h>=A:l+h>=F)&&(E.push(P+1),E.push(R),E.push(1-w))}return O}}function HC(u,o,l,h,v,f){if(v-h<=l)return;const y=h+v>>1;k3(u,o,y,h,v,f),HC(u,o,l,h,y-1,1-f),HC(u,o,l,y+1,v,1-f)}function k3(u,o,l,h,v,f){for(;v>h;){if(v-h>600){const k=v-h+1,w=l-h+1,R=Math.log(k),D=.5*Math.exp(2*R/3),P=.5*Math.sqrt(R*D*(k-D)/k)*(w-k/2<0?-1:1);k3(u,o,l,Math.max(h,Math.floor(l-w*D/k+P)),Math.min(v,Math.floor(l+(k-w)*D/k+P)),f)}const y=o[2*l+f];let E=h,O=v;for(kv(u,o,h,l),o[2*v+f]>y&&kv(u,o,h,v);E<O;){for(kv(u,o,E,O),E++,O--;o[2*E+f]<y;)E++;for(;o[2*O+f]>y;)O--}o[2*h+f]===y?kv(u,o,h,O):(O++,kv(u,o,O,v)),O<=l&&(h=O+1),l<=O&&(v=O-1)}}function kv(u,o,l,h){UC(u,l,h),UC(o,2*l,2*h),UC(o,2*l+1,2*h+1)}function UC(u,o,l){const h=u[o];u[o]=u[l],u[l]=h}function z3(u,o,l,h){const v=u-l,f=o-h;return v*v+f*f}i.$=w_,i.A=class extends wx{},i.B=Pc,i.C=bs,i.D=Lg,i.E=jn,i.F=wg,i.G=Dc,i.H=bg,i.I=fC,i.J=kf,i.K=Lc,i.L=$c,i.M=Pu,i.N=If,i.O=Cu,i.P=je,i.Q=Zd,i.R=Ei,i.S=Oa,i.T=EC,i.U=ti,i.V=wx,i.W=Ng,i.X=Sg,i.Y=m_,i.Z=function(u){const o=u.value;let l=[];if(!o)return l;const h=Pc(o);return h!=="string"?(l=l.concat([new wx(u.key,o,`string expected, "${h}" found`)]),l):(qA(o,!0)||(l=l.concat([new wx(u.key,o,`invalid url "${o}"`)])),l)},i._=Ot,i.a=function(u){return ke.API_CDN_URL_REGEX.test(u)},i.a$=oc,i.a0=Ri,i.a1=mn,i.a2=class{constructor(u){this.specification=u}possiblyEvaluate(u,o){return mr(u.expression.evaluate(o))}interpolate(u,o,l){return{x:Zn(u.x,o.x,l),y:Zn(u.y,o.y,l),z:Zn(u.z,o.z,l),azimuthal:Zn(u.azimuthal,o.azimuthal,l),polar:Zn(u.polar,o.polar,l)}}},i.a3=Zi,i.a4=ih,i.a5=vt,i.a6=Pe,i.a7=dn,i.a8=Au,i.a9=Uu,i.aA=Wr,i.aB=$A,i.aC=BA,i.aD=DA,i.aE=function(u,o){const l=document.createElement("video");l.muted=!0,l.onloadstart=function(){o(null,l)};for(let h=0;h<u.length;h++){const v=document.createElement("source");Ui(u[h])||(l.crossOrigin="Anonymous"),v.src=u[h],l.appendChild(v)}return{cancel:()=>{}}},i.aF=vx,i.aG=function(u){return fetch(u).then(o=>o.arrayBuffer()).then(o=>M3(o,0,u))},i.aH=R3,i.aI=class{constructor(u,o,l,h){this.id=u,this.position=o!=null?new G(o[0],o[1]):new G(0,0),this.orientation=l??[0,0,0],this.nodes=h,this.uploaded=!1,this.aabb=new si([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(u,o){if(Pe.mat4.multiply(u.matrix,o,u.matrix),u.meshes)for(const l of u.meshes){const h=si.applyTransformFast(l.aabb,u.matrix);this.aabb.encapsulate(h)}if(u.children)for(const l of u.children)this._applyTransformations(l,u.matrix)}computeBoundsAndApplyParent(){const u=Pe.mat4.identity([]);for(const o of this.nodes)this._applyTransformations(o,u)}computeModelMatrix(u,o,l,h,v,f,y=!1){JA(this.matrix,this,u.transform,this.position,o,l,h,v,f,y)}upload(u){if(!this.uploaded){for(const o of this.nodes)RC(o,u);for(const o of this.nodes)Sx(o);this.uploaded=!0}}destroy(){for(const u of this.nodes)OC(u)}},i.aJ=Cn,i.aK=function(u){return u.indexOf(ch)>=0},i.aL=_v,i.aM=Oe,i.aN=Ve,i.aO=$u,i.aP=ji,i.aQ=Rn,i.aR=Qf,i.aS=mx,i.aT=function(){Ya.isLoading()||Ya.isLoaded()||kg()!=="deferred"||b_()},i.aU=Vf,i.aV=Qt,i.aW=Tv,i.aX=Tr,i.aY=iC,i.aZ=KS,i.a_=Et,i.aa=Zn,i.ab=Tn,i.ac=Fo,i.ad=class{constructor(u){this.specification=u}possiblyEvaluate(u,o){return function([l,h]){const v=mr([1,l,h]);return{x:v.x,y:v.y,z:v.z}}(u.expression.evaluate(o))}interpolate(u,o,l){return{x:Zn(u.x,o.x,l),y:Zn(u.y,o.y,l),z:Zn(u.z,o.z,l)}}},i.ae=function(u,o,l=0,h=!0){const v=new je(l,l),f=u.sub(v),y=o.add(v),E=[f,new je(y.x,f.y),y,new je(f.x,y.y)];return h&&E.push(f.clone()),E},i.af=function(u,o){const l=[];for(let h=0;h<u.length;h++){const v=hn(h-1,-1,u.length-1),f=hn(h+1,-1,u.length-1),y=u[h],E=u[f],O=u[v].sub(y).unit(),k=E.sub(y).unit(),w=k.angleWithSep(O.x,O.y),R=O.add(k).unit().mult(-1*o/Math.sin(w/2));l.push(y.add(R))}return l},i.ag=_A,i.ah=_i,i.ai=function(u,o,l=0){return Pe.vec3.fromValues(((o.x-l)*u.scale-u.x)*Tn,(o.y*u.scale-u.y)*Tn,He(o.z,o.y))},i.aj=Da,i.ak=NO,i.al=function(u){let o=1/0,l=1/0,h=-1/0,v=-1/0;for(const f of u)o=Math.min(o,f.x),l=Math.min(l,f.y),h=Math.max(h,f.x),v=Math.max(v,f.y);return{min:new je(o,l),max:new je(h,v)}},i.am=xe,i.an=Vr,i.ao=it,i.ap=Rt,i.aq=na,i.ar=function(u,o){const l={};for(let h=0;h<o.length;h++){const v=o[h];v in u&&(l[v]=u[v])}return l},i.as=Q,i.at=Te,i.au=class{constructor(u){this.entries={},this.scheduler=u}request(u,o,l,h){const v=this.entries[u]=this.entries[u]||{callbacks:[]};if(v.result){const[f,y]=v.result;return this.scheduler?this.scheduler.add(()=>{h(f,y)},o):h(f,y),()=>{}}return v.callbacks.push(h),v.cancel||(v.cancel=l((f,y)=>{v.result=[f,y];for(const E of v.callbacks)this.scheduler?this.scheduler.add(()=>{E(f,y)},o):E(f,y);setTimeout(()=>delete this.entries[u],3e3)})),()=>{v.result||(v.callbacks=v.callbacks.filter(f=>f!==h),v.callbacks.length||(v.cancel(),delete this.entries[u]))}}},i.av=Wf,i.aw=function(u,o,l){const h=JSON.stringify(u.request);return u.data&&(this.deduped.entries[h]={result:[null,u.data]}),this.deduped.request(h,{type:"parseTile",isSymbolTile:u.isSymbolTile,zoom:u.tileZoom},v=>{const f=Ki(u.request,(y,E,O,k)=>{y?v(y):E&&v(null,{vectorTile:l?void 0:new op.VectorTile(new rx(E)),rawData:E,cacheControl:O,expires:k})});return()=>{f.cancel(),v()}},o)},i.ax=function(u){kr++,kr>zn&&(u.getActor().send("enforceCacheSizeLimit",bn),kr=0)},i.ay=Mt,i.az=function(u){return u<=1?1:Math.pow(2,Math.floor(Math.log(u)/Math.LN2))},i.b=function(u){return ke.API_FONTS_REGEX.test(u)},i.b$=$a,i.b0=Kg,i.b1=Xs,i.b2=io,i.b3=ov,i.b4=wC,i.b5=function(u,o){const l=Uu(o.zoom);if(l===0)return lc(u);const h=H_(u),v=FS(h),f=xe(h.getWest())*o.worldSize,y=xe(h.getEast())*o.worldSize,E=Te(h.getNorth())*o.worldSize,O=Te(h.getSouth())*o.worldSize,k=[f,E,0],w=[y,E,0],R=[f,O,0],D=[y,O,0],P=Pe.mat4.invert([],o.globeMatrix);return Pe.vec3.transformMat4(k,k,P),Pe.vec3.transformMat4(w,w,P),Pe.vec3.transformMat4(R,R,P),Pe.vec3.transformMat4(D,D,P),v[0]=jc(v[0],R,l),v[1]=jc(v[1],D,l),v[2]=jc(v[2],w,l),v[3]=jc(v[3],k,l),si.fromPoints(v)},i.b6=W_,i.b7=rv,i.b8=jc,i.b9=Gf,i.bA=Sr,i.bB=hn,i.bC=At,i.bD=Mr,i.bE=Ee,i.bF=function(u,o,l){u[4*o+0]=l[0],u[4*o+1]=l[1],u[4*o+2]=l[2],u[4*o+3]=l[3]},i.bG=yh,i.bH=qs,i.bI=Jg,i.bJ=Po,i.bK=Bc,i.bL=G,i.bM=CA,i.bN=Kr,i.bO=us,i.bP=VA,i.bQ=Ro,i.bR=MR,i.bS=function(u,o,l,h,v,f,y,E,O){if(O.name==="globe")return MR(u,o,new Ro(l,h,v),!1);const k=_v({z:l,x:h,y:v},O);return new si([(f+k.x/k.scale)*o,o*(k.y/k.scale),y],[(f+k.x2/k.scale)*o,o*(k.y2/k.scale),E])},i.bT=function(u,o,l){let h=0;for(let v=0;v<2;++v)u[v]>0&&(h+=(u[v]-0)*(u[v]-0)),o[v]<0&&(h+=(0-o[v])*(0-o[v]));return h},i.bU=qe,i.bV=m,i.bW=function(u){const o=Pe.mat4.identity(new Float64Array(16));Pe.mat4.multiply(o,u.pixelMatrix,u.globeMatrix);const l=[0,b,0],h=[0,C,0];return Pe.vec3.transformMat4(l,l,o),Pe.vec3.transformMat4(h,h,o),[l[0]>0&&l[0]<=u.width&&l[1]>0&&l[1]<=u.height&&!VS(u,new G(u.center.lat,90)),h[0]>0&&h[0]<=u.width&&h[1]>0&&h[1]<=u.height&&!VS(u,new G(u.center.lat,-90))]},i.bX=function(u,o){const{scale:l}=u.tileTransform,h=l*Tn/(u.tileSize*Math.pow(2,o.zoom-u.tileID.overscaledZ+u.tileID.canonical.z));return Pe.mat2.scale(new Float32Array(4),o.inverseAdjustmentMatrix,[h,h])},i.bY=xx,i.bZ=jA,i.b_=function(u){const o=jA(u,!0);return Pe.mat2.invert([],[o[0],o[1],o[4],o[5]])},i.ba=jo,i.bb=zC,i.bc=rx,i.bd=Ki,i.be=function(u){const o=[];for(const l in u)o.push(u[l]);return o},i.bf=function(u,o){const l=[];for(const h in u)h in o||l.push(h);return l},i.bg=Pn,i.bh=["type","source","source-layer","minzoom","maxzoom","filter","layout"],i.bi=St,i.bj=function(u,o){const{x:l,y:h}=u.point,v=OR(l,h,u.worldSize/u._pixelsPerMercatorPixel,0,0);return Pe.mat4.multiply(v,v,BS(lc(o)))},i.bk=ap,i.bl=Ms,i.bm=nx,i.bn=function(u,o,l,h,v){const f=5*o+2;u.float32[f+0]=l,u.float32[f+1]=h,u.float32[f+2]=v},i.bo=px,i.bp=lA,i.bq=Jt,i.br=ra,i.bs=uO,i.bt=GA,i.bu=mO,i.bv=gO,i.bw=gC,i.bx=mA,i.by=hC,i.bz=VC,i.c=Ae,i.c$=wi,i.c0=function(u){const{x:o,y:l}=u.point,{lng:h,lat:v}=u._center;return OR(o,l,u.worldSize,h,v)},i.c1=Yt,i.c2=ri,i.c3=V_,i.c4=function(u){const o=Math.round((u+45+360)%360/90)%4;return Kt[o]},i.c5=45,i.c6=be,i.c7=np,i.c8=function(u,o,l){const h=Math.sqrt(u*u+o*o+l*l),v=h>0?Math.acos(l/h)*Lt:0;let f=u!==0||o!==0?Math.atan2(-o,-u)*Lt+90:0;return f<0&&(f+=360),[h,f,v]},i.c9=rt,i.cA=function(u){const o=qe-5;u=Rt(u,-o,o)/o*90;const l=Math.pow(Math.abs(Math.sin(At(u))),3);return Math.round(l*(g.length-1))},i.cB=function(u,o,l,h){const v=o.getNorth(),f=o.getSouth(),y=o.getWest(),E=o.getEast(),O=1<<u.z,k=E-y,w=v-f,R=k/c,D=-w/g[l],P=[0,R,0,D,0,0,v,y,0];if(u.z>0){const A=180/h;Pe.mat3.multiply(P,P,[A/k+1,0,0,0,A/w+1,0,-.5*A/R,.5*A/D,1])}return P[2]=O,P[5]=u.x,P[8]=u.y,P},i.cC=lc,i.cD=function(u,o,l){const h=Pe.mat4.identity(new Float64Array(16)),v=(o/(1<<u)-.5)*Math.PI*2;return Pe.mat4.rotateY(h,l.globeMatrix,v),Float32Array.from(h)},i.cE=class{isDataAvailableAtPoint(u){const o=this._source();if(this.isUsingMockSource()||!o||u.y<0||u.y>1)return!1;const l=o.getSource().maxzoom,h=1<<l,v=Math.floor(u.x),f=Math.floor((u.x-v)*h),y=Math.floor(u.y*h),E=this.findDEMTileFor(new Wr(l,v,l,f,y));return!(!E||!E.dem)}getAtPointOrZero(u,o=0){return this.getAtPoint(u,o)||0}getAtPoint(u,o,l=!0){if(this.isUsingMockSource())return null;o==null&&(o=null);const h=this._source();if(!h||u.y<0||u.y>1)return o;const v=h.getSource().maxzoom,f=1<<v,y=Math.floor(u.x),E=u.x-y,O=new Wr(v,y,v,Math.floor(E*f),Math.floor(u.y*f)),k=this.findDEMTileFor(O);if(!k||!k.dem)return o;const w=k.dem,R=1<<k.tileID.canonical.z,D=(E*R-k.tileID.canonical.x)*w.dim,P=(u.y*R-k.tileID.canonical.y)*w.dim,A=Math.floor(D),F=Math.floor(P);return(l?this.exaggeration():1)*Zn(Zn(w.get(A,F),w.get(A,F+1),P-F),Zn(w.get(A+1,F),w.get(A+1,F+1),P-F),D-A)}getAtTileOffset(u,o,l){const h=1<<u.canonical.z;return this.getAtPointOrZero(new vt(u.wrap+(u.canonical.x+o/Tn)/h,(u.canonical.y+l/Tn)/h))}getAtTileOffsetFunc(u,o,l,h){return v=>{const f=this.getAtTileOffset(u,v.x,v.y),y=h.upVector(u.canonical,v.x,v.y),E=h.upVectorScale(u.canonical,o,l).metersToTile;return Pe.vec3.scale(y,y,f*E),y}}getForTilePoints(u,o,l,h){if(this.isUsingMockSource())return!1;const v=hp.create(this,u,h);return!!v&&(o.forEach(f=>{f[2]=this.exaggeration()*v.getElevationAt(f[0],f[1],l)}),!0)}getMinMaxForTile(u){if(this.isUsingMockSource())return null;const o=this.findDEMTileFor(u);if(!o||!o.dem)return null;const l=o.dem.tree,h=o.tileID,v=1<<u.canonical.z-h.canonical.z;let f=u.canonical.x/v-h.canonical.x,y=u.canonical.y/v-h.canonical.y,E=0;for(let O=0;O<u.canonical.z-h.canonical.z&&!l.leaves[E];O++){f*=2,y*=2;const k=2*Math.floor(y)+Math.floor(f);E=l.childOffsets[E]+k,f%=1,y%=1}return{min:this.exaggeration()*l.minimums[E],max:this.exaggeration()*l.maximums[E]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(u,o,l){throw new Error("Pure virtual method called.")}pointCoordinate(u){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(u){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const u=this.visibleDemTiles;if(u.length===0)return null;let o=!1,l=Number.MAX_VALUE,h=Number.MIN_VALUE;for(const v of u){const f=this.getMinMaxForTile(v.tileID);f&&(l=Math.min(l,f.min),h=Math.max(h,f.max),o=!0)}return o?{min:l,max:h}:null}},i.cF=UR,i.cG=Vu,i.cH=function(u,o){return[Math.pow(u[0],2.2)*o,Math.pow(u[1],2.2)*o,Math.pow(u[2],2.2)*o]},i.cI=RR,i.cJ=Se,i.cK=ye,i.cL=256,i.cM=function(u,o){const l=[0,0,0],h=W_(lc(o.canonical));return Pe.vec3.transformMat4(l,l,h),Pe.vec3.transformMat4(l,l,u),l},i.cN=u=>({u_camera_to_center_distance:new Po(u),u_extrude_scale:new rp(u),u_device_pixel_ratio:new Po(u),u_matrix:new yh(u),u_inv_rot_matrix:new yh(u),u_merc_center:new qs(u),u_tile_id:new Jg(u),u_zoom_transition:new Po(u),u_up_dir:new Jg(u),u_emissive_strength:new Po(u)}),i.cO=u=>({u_matrix:new yh(u),u_pixels_to_tile_units:new rp(u),u_device_pixel_ratio:new Po(u),u_units_to_pixels:new qs(u),u_dash_image:new Bc(u),u_gradient_image:new Bc(u),u_image_height:new Po(u),u_texsize:new qs(u),u_tile_units_to_pixels:new Po(u),u_alpha_discard_threshold:new Po(u),u_trim_offset:new qs(u),u_trim_fade_range:new qs(u),u_trim_color:new np(u),u_emissive_strength:new Po(u),u_zbias_factor:new Po(u),u_tile_to_meter:new Po(u)}),i.cP=u=>({u_matrix:new yh(u),u_texsize:new qs(u),u_pixels_to_tile_units:new rp(u),u_device_pixel_ratio:new Po(u),u_image:new Bc(u),u_units_to_pixels:new qs(u),u_tile_units_to_pixels:new Po(u),u_alpha_discard_threshold:new Po(u),u_trim_offset:new qs(u),u_emissive_strength:new Po(u),u_zbias_factor:new Po(u),u_tile_to_meter:new Po(u)}),i.cQ=zu,i.cR=ZH,i.cS=YH,i.cT=$R,i.cU=(u,o,l,h,v,f)=>{const y=u.transform,E=y.projection.name==="globe";let O;if(f.paint.get("circle-pitch-alignment")==="map")if(E){const w=RR(y.zoom,o.canonical)*y._pixelsPerMercatorPixel;O=Float32Array.from([w,0,0,w])}else O=y.calculatePixelsToTileUnitsMatrix(l);else O=new Float32Array([y.pixelsToGLUnits[0],0,0,y.pixelsToGLUnits[1]]);const k={u_camera_to_center_distance:u.transform.getCameraToCenterDistance(y.projection),u_matrix:u.translatePosMatrix(o.projMatrix,l,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_device_pixel_ratio:kt.devicePixelRatio,u_extrude_scale:O,u_inv_rot_matrix:eH,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:f.paint.get("circle-emissive-strength")};if(E){k.u_inv_rot_matrix=h,k.u_merc_center=v,k.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],k.u_zoom_transition=Uu(y.zoom);const w=v[0]*Tn,R=v[1]*Tn;k.u_up_dir=y.projection.upVector(new Ro(0,0,0),w,R)}return k},i.cV=VO,i.cW=(u,o,l,h,v,f)=>{const y=u.transform,E=y.pitch<15?FO(.07,.7,Rt((14-y.zoom)/5,0,1)):.07;return{u_matrix:jO(u,o,l,h),u_texsize:o.imageAtlasTexture?o.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:y.calculatePixelsToTileUnitsMatrix(o),u_device_pixel_ratio:v,u_image:0,u_tile_units_to_pixels:BO(o,y),u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:f,u_emissive_strength:l.paint.get("line-emissive-strength"),u_zbias_factor:E,u_tile_to_meter:rt(o.tileID.canonical,0)}},i.cX=(u,o,l,h,v,f,y)=>{const E=u.transform,O=E.calculatePixelsToTileUnitsMatrix(o),k=E.pitch<15?FO(.07,.7,Rt((14-E.zoom)/5,0,1)):.07;return{u_matrix:jO(u,o,l,h),u_pixels_to_tile_units:O,u_device_pixel_ratio:f,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:v,u_texsize:HO(l)&&o.lineAtlasTexture?o.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:BO(o,u.transform),u_alpha_discard_threshold:0,u_trim_offset:y,u_trim_fade_range:l.paint.get("line-trim-fade-range"),u_trim_color:l.paint.get("line-trim-color").toRenderColor(l.lut).toArray01(),u_emissive_strength:l.paint.get("line-emissive-strength"),u_zbias_factor:k,u_tile_to_meter:rt(o.tileID.canonical,0)}},i.cY=kn,i.cZ=iv,i.c_=PO,i.ca=si,i.cb=mr,i.cc=function(u){return[Math.pow(u[0],1/2.2),Math.pow(u[1],1/2.2),Math.pow(u[2],1/2.2)]},i.cd=function(u){return u({pluginStatus:ta,pluginURL:Za}),$g.on("pluginStateChange",u),u},i.ce=fp,i.cf=Tx,i.cg=lp,i.ch=pC,i.ci=No,i.cj=x_,i.ck=vn,i.cl=mi,i.cm=an,i.cn=function(u){const o=u.indexOf(ch);return o>=0?u.slice(0,o):u},i.co=function(u){const o=u.indexOf(ch);return o>=0?u.slice(o+1):""},i.cp=function(u){const o=[],l=u.id;return l===void 0&&o.push({message:`layers.${l}: missing required property "id"`}),u.render===void 0&&o.push({message:`layers.${l}: missing required method "render"`}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&o.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),o},i.cq=function(u,o,l,h){return u.type==="custom"?new MU(u,o):new BU[u.type](u,o,l,h)},i.cr=cn,i.cs=$g,i.ct=qi,i.cu=Qg,i.cv=class extends bl{constructor(u){super(u),this.current=$S}set(u,o,l){if(this.fetchUniformLocation(u,o)){for(let h=0;h<9;h++)if(l[h]!==this.current[h]){this.current=l,this.gl.uniformMatrix3fv(this.location,!1,l);break}}}},i.cw=Dt,i.cx=function(u,o,l){const h=Uu(l.zoom),v=u.style.map._antialias,f=o.options.extStandardDerivativesForceOff||u.terrain&&u.terrain.exaggeration()>0;return h===0&&!v&&!f},i.cy=function(u){const o=u.pixelsPerMeter,l=o/Ee(1,u.center.lat),h=Pe.mat4.identity(new Float64Array(16));return Pe.mat4.translate(h,h,[u.point.x,u.point.y,0]),Pe.mat4.scale(h,h,[l,l,o]),Float32Array.from(h)},i.cz=H_,i.d=function(u){return ke.API_TILEJSON_REGEX.test(u)},i.d$=x,i.d0=tx,i.d1=Gu,i.d2=450,i.d3=7,i.d4=IU,i.d5=Qr,i.d6=Yf,i.d7=256,i.d8=BS,i.d9=ac,i.dA=AR,i.dB=function(u){const o=[0,0,0],l=Pe.mat4.identity(new Float64Array(16));return Pe.mat4.multiply(l,u.pixelMatrix,u.globeMatrix),Pe.vec3.transformMat4(o,o,l),new je(o[0],o[1])},i.dC=function(u,o,l=!1){if(ta===Ag||ta===sh||ta===lh)throw new Error("setRTLTextPlugin cannot be called multiple times.");Za=kt.resolveURL(u),ta=Ag,Bf=o,Dg(),l||b_()},i.dD=kg,i.dE=function(){Tx().acquire(LC)},i.dF=function(){const u=Av;u&&(u.isPreloaded()&&u.numActive()===1?(u.release(LC),Av=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},i.dG=Ov,i.dH=function(u){const o=rr();if(!o)return;const l=o.delete(On);u&&l.catch(u).then(()=>u())},i.dI=Rv,i.dJ=b3,i.dK=function(u){NC=kt.resolveURL(u),gp||(gp=new fp(Tx(),new jn)),gp.broadcast("setDracoUrl",NC)},i.dL=w3,i.dM=function(u){mp=kt.resolveURL(u),gp||(gp=new fp(Tx(),new jn)),gp.broadcast("setMeshoptUrl",mp)},i.dN=Fn,i.dO=Wu,i.dP=Il,i.dQ=O3,i.dR=A3,i.dS=kO,i.dT=Ut,i.dU=uA,i.dV=function(u,o,l,h,v,f,y,E,O,k,w=1,R){u.createArrays(),u.tilePixelRatio=Tn/(512*u.overscaling),u.compareText={},u.iconsNeedLinear=!1;const D=u.layers[0].layout,P=u.layers[0]._unevaluatedLayout._values,A={};if(A.scaleFactor=w,A.textSizeScaleRange=D.get("text-size-scale-range"),A.iconSizeScaleRange=D.get("icon-size-scale-range"),A.textScaleFactor=Rt(A.scaleFactor,A.textSizeScaleRange[0],A.textSizeScaleRange[1]),A.iconScaleFactor=Rt(A.scaleFactor,A.iconSizeScaleRange[0],A.iconSizeScaleRange[1]),u.textSizeData.kind==="composite"){const{minZoom:ie,maxZoom:oe}=u.textSizeData;A.compositeTextSizes=[P["text-size"].possiblyEvaluate(new Zi(ie),E),P["text-size"].possiblyEvaluate(new Zi(oe),E)]}if(u.iconSizeData.kind==="composite"){const{minZoom:ie,maxZoom:oe}=u.iconSizeData;A.compositeIconSizes=[P["icon-size"].possiblyEvaluate(new Zi(ie),E),P["icon-size"].possiblyEvaluate(new Zi(oe),E)]}A.layoutTextSize=P["text-size"].possiblyEvaluate(new Zi(O+1),E),A.layoutIconSize=P["icon-size"].possiblyEvaluate(new Zi(O+1),E),A.textMaxSize=P["text-size"].possiblyEvaluate(new Zi(18),E);const F=D.get("text-rotation-alignment")==="map"&&D.get("symbol-placement")!=="point",q=D.get("text-size");let Z=!1;for(const ie of u.features)if(ie.icon&&ie.icon.nameSecondary){Z=!0;break}for(const ie of u.features){const oe=D.get("text-font").evaluate(ie,{},E).join(","),te=q.evaluate(ie,{},E)*A.textScaleFactor,ue=A.layoutTextSize.evaluate(ie,{},E)*A.textScaleFactor,_e=(A.layoutIconSize.evaluate(ie,{},E),{horizontal:{},vertical:void 0}),Re=ie.text;let Ue,Le=[0,0];if(Re){const Ne=Re.toString(),et=D.get("text-letter-spacing").evaluate(ie,{},E)*ra,lt=D.get("text-line-height").evaluate(ie,{},E)*ra,ct=y_(Ne)?et:0,xt=D.get("text-anchor").evaluate(ie,{},E),Pt=D.get("text-variable-anchor");if(!Pt){const Bt=D.get("text-radial-offset").evaluate(ie,{},E);Le=Bt?mA(xt,[Bt*ra,mC]):D.get("text-offset").evaluate(ie,{},E).map(Nn=>Nn*ra)}let $t=F?"center":D.get("text-justify").evaluate(ie,{},E);const Tt=D.get("symbol-placement")==="point",Ht=Tt?D.get("text-max-width").evaluate(ie,{},E)*ra:1/0,sn=Bt=>{u.allowVerticalPlacement&&Rg(Ne)&&(_e.vertical=dC(Re,o,l,v,oe,Ht,lt,xt,Bt,ct,Le,Ms.vertical,!0,ue,te))};if(!F&&Pt){const Bt=$t==="auto"?Pt.map(En=>gC(En)):[$t];let Nn=!1;for(let En=0;En<Bt.length;En++){const pn=Bt[En];if(!_e.horizontal[pn])if(Nn)_e.horizontal[pn]=_e.horizontal[0];else{const on=dC(Re,o,l,v,oe,Ht,lt,"center",pn,ct,Le,Ms.horizontal,!1,ue,te);on&&(_e.horizontal[pn]=on,Nn=on.positionedLines.length===1)}}sn("left")}else{if($t==="auto"&&($t=gC(xt)),Tt||D.get("text-writing-mode").indexOf("horizontal")>=0||!Rg(Ne)){const Bt=dC(Re,o,l,v,oe,Ht,lt,xt,$t,ct,Le,Ms.horizontal,!1,ue,te);Bt&&(_e.horizontal[$t]=Bt)}sn(Tt?"left":$t)}}let Fe=!1;if(ie.icon&&ie.icon.namePrimary){const Ne=h[ie.icon.namePrimary];Ne&&(Ue=sU(v[ie.icon.namePrimary],ie.icon.nameSecondary?v[ie.icon.nameSecondary]:void 0,D.get("icon-offset").evaluate(ie,{},E),D.get("icon-anchor").evaluate(ie,{},E)),Fe=Ne.sdf,u.sdfIcons===void 0?u.sdfIcons=Ne.sdf:u.sdfIcons!==Ne.sdf&&Xt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ne.pixelRatio!==u.pixelRatio||D.get("icon-rotate").constantOr(1)!==0)&&(u.iconsNeedLinear=!0))}const tt=vA(_e.horizontal)||_e.vertical;u.iconsInText||(u.iconsInText=!!tt&&tt.iconsInText),(tt||Ue)&&pU(u,ie,_e,Ue,h,A,ue,0,Le,Fe,y,E,k,R,Z)}f&&u.generateCollisionDebugBuffers(O,u.collisionBoxArray,A.textScaleFactor)},i.dW=op,i.dX=Ex,i.dY=ht,i.dZ=aO,i.d_=XO,i.da=Fc,i.db=qg,i.dc=function(u,o,l,h,v){return Rt((u-o)/(l-o)*(v-h)+h,h,v)},i.dd=Df,i.de=Ke,i.df=class{constructor(u,o,l,h){this.context=u,this.format=h,this.size=l,this.texture=u.gl.createTexture();const[v,f,y]=this.size,{gl:E}=u;E.bindTexture(E.TEXTURE_3D,this.texture),u.pixelStoreUnpackFlipY.set(!1),u.pixelStoreUnpack.set(1),u.pixelStoreUnpackPremultiplyAlpha.set(!1),E.texImage3D(E.TEXTURE_3D,0,this.format,v,f,y,0,SC(this.format),CC(this.format),o.data)}bind(u,o){const{context:l}=this,{gl:h}=l;h.bindTexture(h.TEXTURE_3D,this.texture),u!==this.minFilter&&(h.texParameteri(h.TEXTURE_3D,h.TEXTURE_MAG_FILTER,u),h.texParameteri(h.TEXTURE_3D,h.TEXTURE_MIN_FILTER,u),this.minFilter=u),o!==this.wrapS&&(h.texParameteri(h.TEXTURE_3D,h.TEXTURE_WRAP_S,o),h.texParameteri(h.TEXTURE_3D,h.TEXTURE_WRAP_T,o),this.wrapS=o)}destroy(){const{gl:u}=this.context;u.deleteTexture(this.texture),this.texture=null}},i.dg=MC,i.dh=[1,1,1],i.di=hp,i.dj=dp,i.dk=sc,i.dl=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new je(1/0,1/0),max:new je(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(u,o=!1){const l=hO(new je(0,0),new je(Tn,Tn),u),h=[];if(o&&!QS(l,this._globalClipBounds))return h;for(const v of this._activeRegions){if(v.hiddenByOverlap||!QS(l,v))continue;const f=SH(v.min,v.max,u);h.push({min:f.min,max:f.max,sourceId:this._sourceIds[v.priority],footprint:v.footprint,footprintTileId:v.tileId,order:v.order,clipMask:v.clipMask,clipScope:v.clipScope})}return h}setSources(u){this._setSources(u.map(o=>({getSourceId:()=>o.cache.id,getFootprints:()=>{const l=[];for(const h of o.cache.getVisibleCoordinates()){const v=o.cache.getTile(h).buckets[o.layer];v&&v.updateFootprints(h.toUnwrapped(),l)}return l},getOrder:()=>o.order,getClipMask:()=>o.clipMask,getClipScope:()=>o.clipScope})))}_addSource(u){const o=u.getFootprints();if(o.length===0)return;const l=u.getOrder(),h=u.getClipMask(),v=u.getClipScope();for(const f of o){if(!f.footprint)continue;const y=hO(f.footprint.min,f.footprint.max,f.id);this._activeRegions.push({min:y.min,max:y.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:f.id,footprint:f.footprint,order:l,clipMask:h,clipScope:v})}this._sourceIds.push(u.getSourceId())}_computeReplacement(){this._activeRegions.sort((o,l)=>o.priority-l.priority||Q_(o.min,l.min)||Q_(o.max,l.max)||o.order-l.order||o.clipMask-l.clipMask||function(h,v){const f=(y,E)=>y+E;return h.length-v.length||h.reduce(f,"").localeCompare(v.reduce(f,""))}(o.clipScope,l.clipScope));let u=this._activeRegions.length!==this._prevRegions.length;if(!u){let o=0;for(;!u&&o!==this._activeRegions.length;){const l=this._activeRegions[o],h=this._prevRegions[o];u=l.priority!==h.priority||!dO(l,h)||l.order!==h.order||l.clipMask!==h.clipMask||!St(l.clipScope,h.clipScope),++o}}if(u){++this._updateTime;for(const l of this._activeRegions)l.order!==J_&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,l.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,l.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,l.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,l.max.y));const o=l=>{const h=this._activeRegions;if(l>=h.length)return l;const v=h[l].priority;for(;l<h.length&&h[l].priority===v;)++l;return l};if(this._sourceIds.length>1){let l=0,h=o(l);for(;l!==h;){let v=l;const f=l;for(;v!==h;){const y=this._activeRegions[v];y.hiddenByOverlap=!1;for(let E=0;E<f;E++){const O=this._activeRegions[E];if(!O.hiddenByOverlap&&y.order===J_&&QS(y,O)&&(y.hiddenByOverlap=pO(y.footprint,y.tileId,O.footprint,O.tileId),y.hiddenByOverlap))break}++v}l=h,h=o(l)}}}}_setSources(u){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let o=u.length-1;o>=0;o--)this._addSource(u[o]);this._computeReplacement()}},i.dm=class{constructor(u){this._createGrid(u),this._createPoles(u)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const u of this._poleSegments)u.destroy();for(const u of this._gridSegments)u.withSkirts.destroy(),u.withoutSkirts.destroy()}_fillGridMeshWithLods(u,o){const l=new oc,h=new ji,v=[],f=u+1+2,y=o[0]+1,E=o[0]+1+(1+o.length),O=(k,w,R)=>{let D=k===f-1?k-2:k===0?k:k-1;return D+=R?24575:0,[D,w]};for(let k=0;k<f;++k)l.emplaceBack(...O(k,0,!0));for(let k=0;k<y;++k)for(let w=0;w<f;++w)l.emplaceBack(...O(w,k,(w===0||w===f-1)&&!0));for(let k=0;k<o.length;++k){const w=o[k];for(let R=0;R<f;++R)l.emplaceBack(...O(R,w,!0))}for(let k=0;k<o.length;++k){const w=h.length,R=o[k]+1+2,D=new ji;for(let F=0;F<R-1;F++){const q=F===R-2,Z=q?f*(E-o.length+k-F):f;for(let ie=0;ie<f-1;ie++){const oe=F*f+ie;F===0||q||ie===0||ie===f-2?(D.emplaceBack(oe+1,oe,oe+Z),D.emplaceBack(oe+Z,oe+Z+1,oe+1)):(h.emplaceBack(oe+1,oe,oe+Z),h.emplaceBack(oe+Z,oe+Z+1,oe+1))}}const P=io.simpleSegment(0,w,l.length,h.length-w);for(let F=0;F<D.uint16.length;F+=3)h.emplaceBack(D.uint16[F],D.uint16[F+1],D.uint16[F+2]);const A=io.simpleSegment(0,w,l.length,h.length-w);v.push({withoutSkirts:P,withSkirts:A})}return{vertices:l,indices:h,segments:v}}_createGrid(u){const o=this._fillGridMeshWithLods(c,g);this._gridSegments=o.segments,this._gridBuffer=u.createVertexBuffer(o.vertices,Xs.members),this._gridIndexBuffer=u.createIndexBuffer(o.indices,!0)}_createPoles(u){const o=new ji;for(let y=0;y<=c;y++)o.emplaceBack(0,y+1,y+2);this._poleIndexBuffer=u.createIndexBuffer(o,!0);const l=new Fc,h=new Fc,v=new Fc,f=new Fc;this._poleSegments=[];for(let y=0,E=0;y<V_;y++){const O=360/(1<<y);l.emplaceBack(0,-na,0,.5,0),h.emplaceBack(0,-na,0,.5,1),v.emplaceBack(0,-na,0,.5,.5),f.emplaceBack(0,-na,0,.5,.5);for(let k=0;k<=c;k++){let w=k/c,R=0;const D=Zn(0,O,w),[P,A,F]=I(J8,Q8,D,na);l.emplaceBack(P,A,F,w,R),h.emplaceBack(P,A,F,w,1-R);const q=At(D);w=.5+.5*Math.sin(q),R=.5+.5*Math.cos(q),v.emplaceBack(P,A,F,w,R),f.emplaceBack(P,A,F,w,1-R)}this._poleSegments.push(io.simpleSegment(E,0,66,64)),E+=66}this._poleNorthVertexBuffer=u.createVertexBuffer(l,Li,!1),this._poleSouthVertexBuffer=u.createVertexBuffer(h,Li,!1),this._texturedPoleNorthVertexBuffer=u.createVertexBuffer(v,Li,!1),this._texturedPoleSouthVertexBuffer=u.createVertexBuffer(f,Li,!1)}getGridBuffers(u,o){return[this._gridBuffer,this._gridIndexBuffer,o?this._gridSegments[u].withSkirts:this._gridSegments[u].withoutSkirts]}getPoleBuffers(u,o){return[o?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,o?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[u]]}},i.dn=J_,i.dp=Wt,i.dq=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},i.dr=Vt,i.ds=Ye,i.dt=z,i.du=function([u,o,l]){const h=Math.hypot(u,o,l),v=Math.atan2(u,l),f=.5*Math.PI-Math.acos(-o/h);return new G(Yt(v),Yt(f))},i.dv=IC,i.dw=U,i.dx=function(u){const o=u.navigator?u.navigator.userAgent:null;return!!function(l){if(ur==null){const h=l.navigator?l.navigator.userAgent:null;ur=!!l.safari||!(!h||!(/\b(iPad|iPhone|iPod)\b/.test(h)||h.match("Safari")&&!h.match("Chrome")))}return ur}(u)&&o&&(o.match("Version/15.4")||o.match("Version/15.5")||o.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},i.dy=function(u,o){bn=u,zn=o},i.dz=VS,i.e=ke,i.e0=function(u){let o=0;if(new Uint32Array(u,0,1)[0]!==C3){const l=new Uint32Array(u,0,7),[,,h,v,f,y]=l;o=l.byteLength+v+f+y+f,(h!==u.byteLength||o>=u.byteLength)&&Xt("Invalid b3dm header information.")}return M3(u,o)},i.e1=function(u,o){const l=R3(u);for(const h of l){for(const v of h.meshes)T7(v);h.lights&&(h.lightMeshIndex=h.meshes.length,h.meshes.push(I7(h.lights,o)))}return l},i.e2=Cx,i.e3=i3,i.e4=Ya,i.e5=function(u){or(),wn!=null&&wn.then(o=>{o.keys().then(l=>{for(let h=0;h<l.length-u;h++)o.delete(l[h])})})},i.f=function(u){return u.indexOf("mapbox:")===0},i.g=function(u,o){return qi(Dn(u,{method:"GET"}),o)},i.h=Ze,i.i=function(u){return ke.API_STYLE_REGEX.test(u)&&!Ae(u)},i.j=function(u){return decodeURIComponent(atob(u).split("").map(o=>"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)).join(""))},i.k=function(u){return btoa(encodeURIComponent(u).replace(/%([0-9A-F]{2})/g,(o,l)=>String.fromCharCode(+("0x"+l))))},i.l=Dn,i.m=zr,i.n=function(u,o){return qi(Dn(u,{type:"json"}),o)},i.o=ar,i.p=function(u,o){return qi(Dn(u,{method:"POST"}),o)},i.q=kt,i.r=ba,i.s=function(u){try{const o=self[u];return o.setItem("_mapbox_test_",1),o.removeItem("_mapbox_test_"),!0}catch{return!1}},i.t=Xi,i.u=function(){return function u(o){return o?(o^Math.random()*(16>>o/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,u)}()},i.v=function(u){return!!u&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(u)},i.w=Xt,i.x=Gi,i.y=2,i.z=cA}),d(["./shared"],function(i){function x(ft){const ye=ft?ft.url.toString():void 0;return ye?performance.getEntriesByName(ye):[]}function S(ft){if(typeof ft=="number"||typeof ft=="boolean"||typeof ft=="string"||ft==null)return JSON.stringify(ft);if(Array.isArray(ft)){let Se="[";for(const ke of ft)Se+=`${S(ke)},`;return`${Se}]`}let ye="{";for(const Se of Object.keys(ft).sort())ye+=`${Se}:${S(ft[Se])},`;return`${ye}}`}function T(ft){let ye="";for(const Se of i.bh)ye+=`/${S(ft[Se])}`;return ye}class M{constructor(ye){this.keyCache={},this._layers={},this._layerConfigs={},ye&&this.replace(ye)}replace(ye,Se){this._layerConfigs={},this._layers={},this.update(ye,[],Se)}update(ye,Se,ke){this._options=ke;for(const Ae of ye)this._layerConfigs[Ae.id]=Ae,(this._layers[Ae.id]=i.cq(Ae,this.scope,null,this._options)).compileFilter(ke),this.keyCache[Ae.id]&&delete this.keyCache[Ae.id];for(const Ae of Se)delete this.keyCache[Ae],delete this._layerConfigs[Ae],delete this._layers[Ae];this.familiesBySource={};const Ze=function(Ae,Ge){const ut={};for(let _t=0;_t<Ae.length;_t++){const It=Ge&&Ge[Ae[_t].id]||T(Ae[_t]);Ge&&(Ge[Ae[_t].id]=It);let bt=ut[It];bt||(bt=ut[It]=[]),bt.push(Ae[_t])}const Qe=[];for(const _t in ut)Qe.push(ut[_t]);return Qe}(i.be(this._layerConfigs),this.keyCache);for(const Ae of Ze){const Ge=Ae.map(Mt=>this._layers[Mt.id]),ut=Ge[0];if(ut.visibility==="none")continue;const Qe=ut.source||"";let _t=this.familiesBySource[Qe];_t||(_t=this.familiesBySource[Qe]={});const It=ut.sourceLayer||"_geojsonTileLayer";let bt=_t[It];bt||(bt=_t[It]=[]),bt.push(Ge)}}}const $=1*i.dP;class L{constructor(ye){const Se={},ke=[];for(const ut in ye){const Qe=ye[ut],_t=Se[ut]={};for(const It in Qe.glyphs){const bt=Qe.glyphs[+It];if(!bt||bt.bitmap.width===0||bt.bitmap.height===0)continue;const Mt=bt.metrics.localGlyph?$:1,kt={x:0,y:0,w:bt.bitmap.width+2*Mt,h:bt.bitmap.height+2*Mt};ke.push(kt),_t[It]=kt}}const{w:Ze,h:Ae}=i.z(ke),Ge=new i.dO({width:Ze||1,height:Ae||1});for(const ut in ye){const Qe=ye[ut];for(const _t in Qe.glyphs){const It=Qe.glyphs[+_t];if(!It||It.bitmap.width===0||It.bitmap.height===0)continue;const bt=Se[ut][_t],Mt=It.metrics.localGlyph?$:1;i.dO.copy(It.bitmap,Ge,{x:0,y:0},{x:bt.x+Mt,y:bt.y+Mt},It.bitmap)}}this.image=Ge,this.positions=Se}}i.dN(L,"GlyphAtlas");class N{constructor(ye){this.tileID=new i.aA(ye.tileID.overscaledZ,ye.tileID.wrap,ye.tileID.canonical.z,ye.tileID.canonical.x,ye.tileID.canonical.y),this.tileZoom=ye.tileZoom,this.uid=ye.uid,this.zoom=ye.zoom,this.lut=ye.lut,this.canonical=ye.tileID.canonical,this.pixelRatio=ye.pixelRatio,this.tileSize=ye.tileSize,this.source=ye.source,this.scope=ye.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ye.showCollisionBoxes,this.collectResourceTiming=!!ye.request&&ye.request.collectResourceTiming,this.promoteId=ye.promoteId,this.isSymbolTile=ye.isSymbolTile,this.tileTransform=i.aL(ye.tileID.canonical,ye.projection),this.projection=ye.projection,this.worldview=ye.worldview,this.localizableLayerIds=ye.localizableLayerIds,this.brightness=ye.brightness,this.extraShadowCaster=!!ye.extraShadowCaster,this.tessellationStep=ye.tessellationStep,this.scaleFactor=ye.scaleFactor}parse(ye,Se,ke,Ze,Ae){this.status="parsing",this.data=ye,this.collisionBoxArray=new i.aR;const Ge=new i.dQ(Object.keys(ye.layers).sort()),ut=new i.dR(this.tileID,this.promoteId);ut.bucketLayerIDs=[];const Qe={},_t=new i.dS(256,256),It={featureIndex:ut,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:_t,availableImages:ke,brightness:this.brightness},bt=Se.familiesBySource[this.source];for(const zn in bt){const Mn=ye.layers[zn];if(!Mn)continue;let wn=!1,_n=!1,rr=!1;for(const zr of bt[zn])zr[0].type==="symbol"?wn=!0:_n=!0,zr[0].is3D()&&zr[0].type!=="model"&&(rr=!0);if(this.extraShadowCaster&&!rr||this.isSymbolTile===!0&&!wn||this.isSymbolTile===!1&&!_n)continue;Mn.version===1&&i.w(`Vector tile source "${this.source}" layer "${zn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const or=Ge.encode(zn),kr=[];for(let zr=0,Hr=0;zr<Mn.length;zr++){const ei=Mn.feature(zr),Hi=ut.getId(ei,zn);if(this.localizableLayerIds&&this.localizableLayerIds.has(zn)){const ir=ei.properties?ei.properties.worldview:null;if(this.worldview&&typeof ir=="string")if(ir==="all")ei.properties.$localized=!0;else{if(!ir.split(",").includes(this.worldview))continue;ei.properties.$localized=!0,ei.properties.worldview=this.worldview}}kr.push({feature:ei,id:Hi,index:Hr,sourceLayerIndex:or}),Hr++}for(const zr of bt[zn]){const Hr=zr[0];(!this.extraShadowCaster||Hr.is3D()&&Hr.type!=="model")&&(this.isSymbolTile!==void 0&&Hr.type==="symbol"!==this.isSymbolTile||Hr.minzoom&&this.zoom<Math.floor(Hr.minzoom)||Hr.maxzoom&&this.zoom>=Hr.maxzoom||Hr.visibility!=="none"&&(V(zr,this.zoom,It.brightness,ke),(Qe[Hr.id]=Hr.createBucket({index:ut.bucketLayerIDs.length,layers:zr,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:or,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep})).populate(kr,It,this.tileID.canonical,this.tileTransform),ut.bucketLayerIDs.push(zr.map(ei=>i.av(ei.id,ei.scope)))))}}let Mt,kt,Gt,vn;_t.trim();const On={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},bn=()=>{if(Mt)return this.status="done",Ae(Mt);if(this.extraShadowCaster)this.status="done",Ae(null,{buckets:i.be(Qe).filter(zn=>!zn.isEmpty()),featureIndex:ut,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:It.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(kt&&Gt&&vn){const zn=new L(kt),Mn=new i.dU(Gt,vn,this.lut);for(const wn in Qe){const _n=Qe[wn];_n instanceof i.aS?(V(_n.layers,this.zoom,It.brightness,ke),i.dV(_n,kt,zn.positions,Gt,Mn.iconPositions,this.showCollisionBoxes,ke,this.tileID.canonical,this.tileZoom,this.projection,this.scaleFactor,this.brightness)):_n.hasPattern&&(_n instanceof i.aY||_n instanceof i.aZ||_n instanceof i.d0)&&(V(_n.layers,this.zoom,It.brightness,ke),_n.addFeatures(It,this.tileID.canonical,Mn.patternPositions,ke,this.tileTransform,this.brightness))}this.status="done",Ae(null,{buckets:i.be(Qe).filter(wn=>!wn.isEmpty()),featureIndex:ut,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:zn.image,lineAtlas:_t,imageAtlas:Mn,brightness:It.brightness})}};if(!this.extraShadowCaster){const zn=i.dT(It.glyphDependencies,_n=>Object.keys(_n).map(Number));Object.keys(zn).length?Ze.send("getGlyphs",{uid:this.uid,stacks:zn,scope:this.scope},(_n,rr)=>{Mt||(Mt=_n,kt=rr,bn())},void 0,!1,On):kt={};const Mn=Object.keys(It.iconDependencies);Mn.length?Ze.send("getImages",{icons:Mn,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(_n,rr)=>{Mt||(Mt=_n,Gt=rr,bn())},void 0,!1,On):Gt={};const wn=Object.keys(It.patternDependencies);wn.length?Ze.send("getImages",{icons:wn,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(_n,rr)=>{Mt||(Mt=_n,vn=rr,bn())},void 0,!1,On):vn={}}bn()}}function V(ft,ye,Se,ke){const Ze=new i.a3(ye,{brightness:Se});for(const Ae of ft)Ae.recalculate(Ze,ke)}class B extends i.E{constructor(ye,Se,ke,Ze,Ae,Ge){super(),this.actor=ye,this.layerIndex=Se,this.availableImages=ke,this.loadVectorData=Ae||i.aw,this.loading={},this.loaded={},this.deduped=new i.au(ye.scheduler),this.isSpriteLoaded=Ze,this.scheduler=ye.scheduler,this.brightness=Ge}loadTile(ye,Se){const ke=ye.uid,Ze=ye&&ye.request,Ae=Ze&&Ze.collectResourceTiming,Ge=this.loading[ke]=new N(ye);Ge.abort=this.loadVectorData(ye,(ut,Qe)=>{const _t=!this.loading[ke];if(delete this.loading[ke],_t||ut||!Qe)return Ge.status="done",_t||(this.loaded[ke]=Ge),Se(ut);const It=Qe.rawData,bt={};Qe.expires&&(bt.expires=Qe.expires),Qe.cacheControl&&(bt.cacheControl=Qe.cacheControl),Ge.vectorTile=Qe.vectorTile||new i.dW.VectorTile(new i.bc(It));const Mt=()=>{Ge.parse(Ge.vectorTile,this.layerIndex,this.availableImages,this.actor,(kt,Gt)=>{if(kt||!Gt)return Se(kt);const vn={};if(Ae){const On=x(Ze);On.length>0&&(vn.resourceTiming=JSON.parse(JSON.stringify(On)))}Se(null,i.l({rawTileData:It.slice(0)},Gt,bt,vn))})};this.isSpriteLoaded?Mt():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(Mt,{type:"parseTile",isSymbolTile:ye.isSymbolTile,zoom:ye.tileZoom}):Mt()}),this.loaded=this.loaded||{},this.loaded[ke]=Ge})}reloadTile(ye,Se){const ke=this.loaded,Ze=ye.uid;if(ke&&ke[Ze]){const Ae=ke[Ze];Ae.scaleFactor=ye.scaleFactor,Ae.showCollisionBoxes=ye.showCollisionBoxes,Ae.projection=ye.projection,Ae.brightness=ye.brightness,Ae.tileTransform=i.aL(ye.tileID.canonical,ye.projection),Ae.extraShadowCaster=ye.extraShadowCaster,Ae.lut=ye.lut;const Ge=(ut,Qe)=>{const _t=Ae.reloadCallback;_t&&(delete Ae.reloadCallback,Ae.parse(Ae.vectorTile,this.layerIndex,this.availableImages,this.actor,_t)),Se(ut,Qe)};Ae.status==="parsing"?Ae.reloadCallback=Ge:Ae.status==="done"&&(Ae.vectorTile?Ae.parse(Ae.vectorTile,this.layerIndex,this.availableImages,this.actor,Ge):Ge())}else Se(null,void 0)}abortTile(ye,Se){const ke=ye.uid,Ze=this.loading[ke];Ze&&(Ze.abort&&Ze.abort(),delete this.loading[ke]),Se()}removeTile(ye,Se){const ke=this.loaded,Ze=ye.uid;ke&&ke[Ze]&&delete ke[Ze],Se()}}class j{loadTile(ye,Se){const{uid:ke,encoding:Ze,rawImageData:Ae,padding:Ge}=ye,ut=ImageBitmap&&Ae instanceof ImageBitmap?this.getImageData(Ae,Ge):Ae;Se(null,new i.dX(ke,ut,Ze,Ge<1))}getImageData(ye,Se){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ye.width,ye.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=ye.width,this.offscreenCanvas.height=ye.height,this.offscreenCanvasContext.drawImage(ye,0,0,ye.width,ye.height);const ke=this.offscreenCanvasContext.getImageData(-Se,-Se,ye.width+2*Se,ye.height+2*Se);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ke}}i.bb.setPbf(i.bc);class H{decodeRasterArray({task:ye,buffer:Se},ke){i.bb.performDecoding(Se,ye).then(Ze=>{ke(null,Ze)},Ze=>{ke(Ze)})}}const W=i.dW.VectorTileFeature.prototype.toGeoJSON;class X{constructor(ye){this._feature=ye,this.extent=i.ab,this.type=ye.type,this.properties=ye.tags,"id"in ye&&!isNaN(ye.id)&&(this.id=parseInt(ye.id,10))}loadGeometry(){if(this._feature.type===1){const ye=[];for(const Se of this._feature.geometry)ye.push([new i.P(Se[0],Se[1])]);return ye}{const ye=[];for(const Se of this._feature.geometry){const ke=[];for(const Ze of Se)ke.push(new i.P(Ze[0],Ze[1]));ye.push(ke)}return ye}}toGeoJSON(ye,Se,ke){return W.call(this,ye,Se,ke)}}class ee{constructor(ye){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=i.ab,this.length=ye.length,this._features=ye}feature(ye){return new X(this._features[ye])}}const J=64/4096,Y=128;class re{constructor(){this.features=new Map}clear(){this.features.clear()}load(ye=[],Se){for(const ke of ye){const Ze=ke.id;if(Ze==null)continue;let Ae=this.features.get(Ze);Ae&&this.updateCache(Ae,Se),ke.geometry?(Ae=ae(ke),this.updateCache(Ae,Se),this.features.set(Ze,Ae)):this.features.delete(Ze),this.updateCache(Ae,Se)}}updateCache(ye,Se){for(const{canonical:ke,uid:Ze}of Object.values(Se)){const{z:Ae,x:Ge,y:ut}=ke;se(ye,Math.pow(2,Ae),Ge,ut)&&delete Se[Ze]}}getTile(ye,Se,ke){const Ze=Math.pow(2,ye),Ae=[];for(const Ge of this.features.values())se(Ge,Ze,Se,ke)&&Ae.push(ge(Ge,Ze,Se,ke));return{features:Ae}}getFeatures(){return[...this.features.values()]}}function se({minX:ft,minY:ye,maxX:Se,maxY:ke},Ze,Ae,Ge){return ft<(Ae+1+J)/Ze&&ye<(Ge+1+J)/Ze&&Se>(Ae-J)/Ze&&ke>(Ge-J)/Ze}function ae(ft){const{id:ye,geometry:Se,properties:ke}=ft;if(!Se)return;if(Se.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:Ze,coordinates:Ae}=Se,Ge={id:ye,type:1,geometry:[],tags:ke,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},ut=Ge.geometry;if(Ze==="Point")ce(Ae,ut,Ge);else if(Ze==="MultiPoint")for(const Qe of Ae)ce(Qe,ut,Ge);else if(Ze==="LineString")Ge.type=2,Ce(Ae,ut,Ge);else if(Ze==="MultiLineString")Ge.type=2,we(Ae,ut,Ge);else if(Ze==="Polygon")Ge.type=3,we(Ae,ut,Ge,!0);else{if(Ze!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");Ge.type=3;for(const Qe of Ae)we(Qe,ut,Ge,!0)}return Ge}function ce([ft,ye],Se,ke){const Ze=i.am(ft);let Ae=i.at(ye);Ae=Ae<0?0:Ae>1?1:Ae,Se.push(Ze,Ae),ke.minX=Math.min(ke.minX,Ze),ke.minY=Math.min(ke.minY,Ae),ke.maxX=Math.max(ke.maxX,Ze),ke.maxY=Math.max(ke.maxY,Ae)}function Ce(ft,ye,Se,ke=!1,Ze=!1){const Ae=[];for(const Ge of ft)ce(Ge,Ae,Se);ye.push(Ae),ke&&function(Ge,ut){let Qe=0;for(let _t=0,It=Ge.length,bt=It-2;_t<It;bt=_t,_t+=2)Qe+=(Ge[_t]-Ge[bt])*(Ge[_t+1]+Ge[bt+1]);if(Qe>0===ut)for(let _t=0,It=Ge.length;_t<It/2;_t+=2){const bt=Ge[_t],Mt=Ge[_t+1];Ge[_t]=Ge[It-2-_t],Ge[_t+1]=Ge[It-1-_t],Ge[It-2-_t]=bt,Ge[It-1-_t]=Mt}}(Ae,Ze)}function we(ft,ye,Se,ke=!1){for(let Ze=0;Ze<ft.length;Ze++)Ce(ft[Ze],ye,Se,ke,Ze===0)}function ge(ft,ye,Se,ke){const{id:Ze,type:Ae,geometry:Ge,tags:ut}=ft,Qe=[];if(Ae===1)(function(_t,It,bt,Mt,kt){for(let Gt=0;Gt<_t.length;Gt+=2){const vn=Math.round(i.ab*(_t[Gt+0]*It-bt)),On=Math.round(i.ab*(_t[Gt+1]*It-Mt));kt.push([vn,On])}})(Ge,ye,Se,ke,Qe);else for(const _t of Ge)ve(_t,ye,Se,ke,Qe);return{id:Ze,type:Ae,geometry:Qe,tags:ut}}function ve(ft,ye,Se,ke,Ze){const Ae=-Y,Ge=i.ab+Y;let ut;for(let Qe=0;Qe<ft.length-2;Qe+=2){let _t=Math.round(i.ab*(ft[Qe+0]*ye-Se)),It=Math.round(i.ab*(ft[Qe+1]*ye-ke)),bt=Math.round(i.ab*(ft[Qe+2]*ye-Se)),Mt=Math.round(i.ab*(ft[Qe+3]*ye-ke));const kt=bt-_t,Gt=Mt-It;_t<Ae&&bt<Ae||(_t<Ae?(It+=Math.round(Gt*((Ae-_t)/kt)),_t=Ae):bt<Ae&&(Mt=It+Math.round(Gt*((Ae-_t)/kt)),bt=Ae),It<Ae&&Mt<Ae||(It<Ae?(_t+=Math.round(kt*((Ae-It)/Gt)),It=Ae):Mt<Ae&&(bt=_t+Math.round(kt*((Ae-It)/Gt)),Mt=Ae),_t>=Ge&&bt>=Ge||(_t>=Ge?(It+=Math.round(Gt*((Ge-_t)/kt)),_t=Ge):bt>=Ge&&(Mt=It+Math.round(Gt*((Ge-_t)/kt)),bt=Ge),It>=Ge&&Mt>=Ge||(It>=Ge?(_t+=Math.round(kt*((Ge-It)/Gt)),It=Ge):Mt>=Ge&&(bt=_t+Math.round(kt*((Ge-It)/Gt)),Mt=Ge),ut&&_t===ut[ut.length-1][0]&&It===ut[ut.length-1][1]||(ut=[[_t,It]],Ze.push(ut)),ut.push([bt,Mt])))))}}var de,pe,fe,me={exports:{}},Ie=function(){if(fe)return me.exports;fe=1;var ft=i.d_(),ye=function(){if(pe)return de;pe=1;var It=i.dY(),bt=i.dZ().VectorTileFeature;function Mt(Gt,vn){this.options=vn||{},this.features=Gt,this.length=Gt.length}function kt(Gt,vn){this.id=typeof Gt.id=="number"?Gt.id:void 0,this.type=Gt.type,this.rawGeometry=Gt.type===1?[Gt.geometry]:Gt.geometry,this.properties=Gt.tags,this.extent=vn||4096}return de=Mt,Mt.prototype.feature=function(Gt){return new kt(this.features[Gt],this.options.extent)},kt.prototype.loadGeometry=function(){var Gt=this.rawGeometry;this.geometry=[];for(var vn=0;vn<Gt.length;vn++){for(var On=Gt[vn],bn=[],zn=0;zn<On.length;zn++)bn.push(new It(On[zn][0],On[zn][1]));this.geometry.push(bn)}return this.geometry},kt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Gt=this.geometry,vn=1/0,On=-1/0,bn=1/0,zn=-1/0,Mn=0;Mn<Gt.length;Mn++)for(var wn=Gt[Mn],_n=0;_n<wn.length;_n++){var rr=wn[_n];vn=Math.min(vn,rr.x),On=Math.max(On,rr.x),bn=Math.min(bn,rr.y),zn=Math.max(zn,rr.y)}return[vn,bn,On,zn]},kt.prototype.toGeoJSON=bt.prototype.toGeoJSON,de}();function Se(It){var bt=new ft;return function(Mt,kt){for(var Gt in Mt.layers)kt.writeMessage(3,ke,Mt.layers[Gt])}(It,bt),bt.finish()}function ke(It,bt){var Mt;bt.writeVarintField(15,It.version||1),bt.writeStringField(1,It.name||""),bt.writeVarintField(5,It.extent||4096);var kt={keys:[],values:[],keycache:{},valuecache:{}};for(Mt=0;Mt<It.length;Mt++)kt.feature=It.feature(Mt),bt.writeMessage(2,Ze,kt);var Gt=kt.keys;for(Mt=0;Mt<Gt.length;Mt++)bt.writeStringField(3,Gt[Mt]);var vn=kt.values;for(Mt=0;Mt<vn.length;Mt++)bt.writeMessage(4,_t,vn[Mt])}function Ze(It,bt){var Mt=It.feature;Mt.id!==void 0&&bt.writeVarintField(1,Mt.id),bt.writeMessage(2,Ae,It),bt.writeVarintField(3,Mt.type),bt.writeMessage(4,Qe,Mt)}function Ae(It,bt){var Mt=It.feature,kt=It.keys,Gt=It.values,vn=It.keycache,On=It.valuecache;for(var bn in Mt.properties){var zn=Mt.properties[bn],Mn=vn[bn];if(zn!==null){Mn===void 0&&(kt.push(bn),vn[bn]=Mn=kt.length-1),bt.writeVarint(Mn);var wn=typeof zn;wn!=="string"&&wn!=="boolean"&&wn!=="number"&&(zn=JSON.stringify(zn));var _n=wn+":"+zn,rr=On[_n];rr===void 0&&(Gt.push(zn),On[_n]=rr=Gt.length-1),bt.writeVarint(rr)}}}function Ge(It,bt){return(bt<<3)+(7&It)}function ut(It){return It<<1^It>>31}function Qe(It,bt){for(var Mt=It.loadGeometry(),kt=It.type,Gt=0,vn=0,On=Mt.length,bn=0;bn<On;bn++){var zn=Mt[bn],Mn=1;kt===1&&(Mn=zn.length),bt.writeVarint(Ge(1,Mn));for(var wn=kt===3?zn.length-1:zn.length,_n=0;_n<wn;_n++){_n===1&&kt!==1&&bt.writeVarint(Ge(2,wn-1));var rr=zn[_n].x-Gt,or=zn[_n].y-vn;bt.writeVarint(ut(rr)),bt.writeVarint(ut(or)),Gt+=rr,vn+=or}kt===3&&bt.writeVarint(Ge(7,1))}}function _t(It,bt){var Mt=typeof It;Mt==="string"?bt.writeStringField(1,It):Mt==="boolean"?bt.writeBooleanField(7,It):Mt==="number"&&(It%1!=0?bt.writeDoubleField(3,It):It<0?bt.writeSVarintField(6,It):bt.writeVarintField(5,It))}return me.exports=Se,me.exports.fromVectorTileJs=Se,me.exports.fromGeojsonVt=function(It,bt){bt=bt||{};var Mt={};for(var kt in It)Mt[kt]=new ye(It[kt].features,bt),Mt[kt].name=kt,Mt[kt].version=bt.version,Mt[kt].extent=bt.extent;return Se({layers:Mt})},me.exports.GeoJSONWrapper=ye,me.exports}(),Me=i.d$(Ie);const Be={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ft=>ft},$e=Math.fround||(ze=new Float32Array(1),ft=>(ze[0]=+ft,ze[0]));var ze;const Je=3,yt=5,at=6;class gt{constructor(ye){this.options=Object.assign(Object.create(Be),ye),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ye){const{log:Se,minZoom:ke,maxZoom:Ze}=this.options;Se&&console.time("total time");const Ae=`prepare ${ye.length} points`;Se&&console.time(Ae),this.points=ye;const Ge=[];for(let Qe=0;Qe<ye.length;Qe++){const _t=ye[Qe];if(!_t.geometry)continue;const[It,bt]=_t.geometry.coordinates,Mt=$e(mt(It)),kt=$e(dt(bt));Ge.push(Mt,kt,1/0,Qe,-1,1),this.options.reduce&&Ge.push(0)}let ut=this.trees[Ze+1]=this._createTree(Ge);Se&&console.timeEnd(Ae);for(let Qe=Ze;Qe>=ke;Qe--){const _t=+Date.now();ut=this.trees[Qe]=this._createTree(this._cluster(ut,Qe)),Se&&console.log("z%d: %d clusters in %dms",Qe,ut.numItems,+Date.now()-_t)}return Se&&console.timeEnd("total time"),this}getClusters(ye,Se){let ke=((ye[0]+180)%360+360)%360-180;const Ze=Math.max(-90,Math.min(90,ye[1]));let Ae=ye[2]===180?180:((ye[2]+180)%360+360)%360-180;const Ge=Math.max(-90,Math.min(90,ye[3]));if(ye[2]-ye[0]>=360)ke=-180,Ae=180;else if(ke>Ae){const bt=this.getClusters([ke,Ze,180,Ge],Se),Mt=this.getClusters([-180,Ze,Ae,Ge],Se);return bt.concat(Mt)}const ut=this.trees[this._limitZoom(Se)],Qe=ut.range(mt(ke),dt(Ge),mt(Ae),dt(Ze)),_t=ut.data,It=[];for(const bt of Qe){const Mt=this.stride*bt;It.push(_t[Mt+yt]>1?wt(_t,Mt,this.clusterProps):this.points[_t[Mt+Je]])}return It}getChildren(ye){const Se=this._getOriginId(ye),ke=this._getOriginZoom(ye),Ze="No cluster with the specified id.",Ae=this.trees[ke];if(!Ae)throw new Error(Ze);const Ge=Ae.data;if(Se*this.stride>=Ge.length)throw new Error(Ze);const ut=this.options.radius/(this.options.extent*Math.pow(2,ke-1)),Qe=Ae.within(Ge[Se*this.stride],Ge[Se*this.stride+1],ut),_t=[];for(const It of Qe){const bt=It*this.stride;Ge[bt+4]===ye&&_t.push(Ge[bt+yt]>1?wt(Ge,bt,this.clusterProps):this.points[Ge[bt+Je]])}if(_t.length===0)throw new Error(Ze);return _t}getLeaves(ye,Se,ke){const Ze=[];return this._appendLeaves(Ze,ye,Se=Se||10,ke=ke||0,0),Ze}getTile(ye,Se,ke){const Ze=this.trees[this._limitZoom(ye)],Ae=Math.pow(2,ye),{extent:Ge,radius:ut}=this.options,Qe=ut/Ge,_t=(ke-Qe)/Ae,It=(ke+1+Qe)/Ae,bt={features:[]};return this._addTileFeatures(Ze.range((Se-Qe)/Ae,_t,(Se+1+Qe)/Ae,It),Ze.data,Se,ke,Ae,bt),Se===0&&this._addTileFeatures(Ze.range(1-Qe/Ae,_t,1,It),Ze.data,Ae,ke,Ae,bt),Se===Ae-1&&this._addTileFeatures(Ze.range(0,_t,Qe/Ae,It),Ze.data,-1,ke,Ae,bt),bt.features.length?bt:null}getClusterExpansionZoom(ye){let Se=this._getOriginZoom(ye)-1;for(;Se<=this.options.maxZoom;){const ke=this.getChildren(ye);if(Se++,ke.length!==1)break;ye=ke[0].properties.cluster_id}return Se}_appendLeaves(ye,Se,ke,Ze,Ae){const Ge=this.getChildren(Se);for(const ut of Ge){const Qe=ut.properties;if(Qe&&Qe.cluster?Ae+Qe.point_count<=Ze?Ae+=Qe.point_count:Ae=this._appendLeaves(ye,Qe.cluster_id,ke,Ze,Ae):Ae<Ze?Ae++:ye.push(ut),ye.length===ke)break}return Ae}_createTree(ye){const Se=new i.bz(ye.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ke=0;ke<ye.length;ke+=this.stride)Se.add(ye[ke],ye[ke+1]);return Se.finish(),Se.data=ye,Se}_addTileFeatures(ye,Se,ke,Ze,Ae,Ge){for(const ut of ye){const Qe=ut*this.stride,_t=Se[Qe+yt]>1;let It,bt,Mt;if(_t)It=Pe(Se,Qe,this.clusterProps),bt=Se[Qe],Mt=Se[Qe+1];else{const vn=this.points[Se[Qe+Je]];It=vn.properties;const[On,bn]=vn.geometry.coordinates;bt=mt(On),Mt=dt(bn)}const kt={type:1,geometry:[[Math.round(this.options.extent*(bt*Ae-ke)),Math.round(this.options.extent*(Mt*Ae-Ze))]],tags:It};let Gt;Gt=_t||this.options.generateId?Se[Qe+Je]:this.points[Se[Qe+Je]].id,Gt!==void 0&&(kt.id=Gt),Ge.features.push(kt)}}_limitZoom(ye){return Math.max(this.options.minZoom,Math.min(Math.floor(+ye),this.options.maxZoom+1))}_cluster(ye,Se){const{radius:ke,extent:Ze,reduce:Ae,minPoints:Ge}=this.options,ut=ke/(Ze*Math.pow(2,Se)),Qe=ye.data,_t=[],It=this.stride;for(let bt=0;bt<Qe.length;bt+=It){if(Qe[bt+2]<=Se)continue;Qe[bt+2]=Se;const Mt=Qe[bt],kt=Qe[bt+1],Gt=ye.within(Qe[bt],Qe[bt+1],ut),vn=Qe[bt+yt];let On=vn;for(const bn of Gt){const zn=bn*It;Qe[zn+2]>Se&&(On+=Qe[zn+yt])}if(On>vn&&On>=Ge){let bn,zn=Mt*vn,Mn=kt*vn,wn=-1;const _n=(bt/It<<5)+(Se+1)+this.points.length;for(const rr of Gt){const or=rr*It;if(Qe[or+2]<=Se)continue;Qe[or+2]=Se;const kr=Qe[or+yt];zn+=Qe[or]*kr,Mn+=Qe[or+1]*kr,Qe[or+4]=_n,Ae&&(bn||(bn=this._map(Qe,bt,!0),wn=this.clusterProps.length,this.clusterProps.push(bn)),Ae(bn,this._map(Qe,or)))}Qe[bt+4]=_n,_t.push(zn/On,Mn/On,1/0,_n,-1,On),Ae&&_t.push(wn)}else{for(let bn=0;bn<It;bn++)_t.push(Qe[bt+bn]);if(On>1)for(const bn of Gt){const zn=bn*It;if(!(Qe[zn+2]<=Se)){Qe[zn+2]=Se;for(let Mn=0;Mn<It;Mn++)_t.push(Qe[zn+Mn])}}}}return _t}_getOriginId(ye){return ye-this.points.length>>5}_getOriginZoom(ye){return(ye-this.points.length)%32}_map(ye,Se,ke){if(ye[Se+yt]>1){const Ge=this.clusterProps[ye[Se+at]];return ke?Object.assign({},Ge):Ge}const Ze=this.points[ye[Se+Je]].properties,Ae=this.options.map(Ze);return ke&&Ae===Ze?Object.assign({},Ae):Ae}}function wt(ft,ye,Se){return{type:"Feature",id:ft[ye+Je],properties:Pe(ft,ye,Se),geometry:{type:"Point",coordinates:[(ke=ft[ye],360*(ke-.5)),ht(ft[ye+1])]}};var ke}function Pe(ft,ye,Se){const ke=ft[ye+yt],Ze=ke>=1e4?`${Math.round(ke/1e3)}k`:ke>=1e3?Math.round(ke/100)/10+"k":ke,Ae=ft[ye+at],Ge=Ae===-1?{}:Object.assign({},Se[Ae]);return Object.assign(Ge,{cluster:!0,cluster_id:ft[ye+Je],point_count:ke,point_count_abbreviated:Ze})}function mt(ft){return ft/360+.5}function dt(ft){const ye=Math.sin(ft*Math.PI/180),Se=.5-.25*Math.log((1+ye)/(1-ye))/Math.PI;return Se<0?0:Se>1?1:Se}function ht(ft){const ye=(180-360*ft)*Math.PI/180;return 360*Math.atan(Math.exp(ye))/Math.PI-90}function je(ft,ye,Se,ke){let Ze=ke;const Ae=ye+(Se-ye>>1);let Ge,ut=Se-ye;const Qe=ft[ye],_t=ft[ye+1],It=ft[Se],bt=ft[Se+1];for(let Mt=ye+3;Mt<Se;Mt+=3){const kt=St(ft[Mt],ft[Mt+1],Qe,_t,It,bt);if(kt>Ze)Ge=Mt,Ze=kt;else if(kt===Ze){const Gt=Math.abs(Mt-Ae);Gt<ut&&(Ge=Mt,ut=Gt)}}Ze>ke&&(Ge-ye>3&&je(ft,ye,Ge,ke),ft[Ge+2]=Ze,Se-Ge>3&&je(ft,Ge,Se,ke))}function St(ft,ye,Se,ke,Ze,Ae){let Ge=Ze-Se,ut=Ae-ke;if(Ge!==0||ut!==0){const Qe=((ft-Se)*Ge+(ye-ke)*ut)/(Ge*Ge+ut*ut);Qe>1?(Se=Ze,ke=Ae):Qe>0&&(Se+=Ge*Qe,ke+=ut*Qe)}return Ge=ft-Se,ut=ye-ke,Ge*Ge+ut*ut}function Ct(ft,ye,Se,ke){const Ze={id:ft??null,type:ye,geometry:Se,tags:ke,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ye==="Point"||ye==="MultiPoint"||ye==="LineString")Lt(Ze,Se);else if(ye==="Polygon")Lt(Ze,Se[0]);else if(ye==="MultiLineString")for(const Ae of Se)Lt(Ze,Ae);else if(ye==="MultiPolygon")for(const Ae of Se)Lt(Ze,Ae[0]);return Ze}function Lt(ft,ye){for(let Se=0;Se<ye.length;Se+=3)ft.minX=Math.min(ft.minX,ye[Se]),ft.minY=Math.min(ft.minY,ye[Se+1]),ft.maxX=Math.max(ft.maxX,ye[Se]),ft.maxY=Math.max(ft.maxY,ye[Se+1])}function At(ft,ye,Se,ke){if(!ye.geometry)return;const Ze=ye.geometry.coordinates;if(Ze&&Ze.length===0)return;const Ae=ye.geometry.type,Ge=Math.pow(Se.tolerance/((1<<Se.maxZoom)*Se.extent),2);let ut=[],Qe=ye.id;if(Se.promoteId?Qe=ye.properties[Se.promoteId]:Se.generateId&&(Qe=ke||0),Ae==="Point")Yt(Ze,ut);else if(Ae==="MultiPoint")for(const _t of Ze)Yt(_t,ut);else if(Ae==="LineString")Kt(Ze,ut,Ge,!1);else if(Ae==="MultiLineString"){if(Se.lineMetrics){for(const _t of Ze)ut=[],Kt(_t,ut,Ge,!1),ft.push(Ct(Qe,"LineString",ut,ye.properties));return}Dt(Ze,ut,Ge,!1)}else if(Ae==="Polygon")Dt(Ze,ut,Ge,!0);else{if(Ae!=="MultiPolygon"){if(Ae==="GeometryCollection"){for(const _t of ye.geometry.geometries)At(ft,{id:Qe,geometry:_t,properties:ye.properties},Se,ke);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const _t of Ze){const It=[];Dt(_t,It,Ge,!0),ut.push(It)}}ft.push(Ct(Qe,Ae,ut,ye.properties))}function Yt(ft,ye){ye.push(Wt(ft[0]),Vt(ft[1]),0)}function Kt(ft,ye,Se,ke){let Ze,Ae,Ge=0;for(let Qe=0;Qe<ft.length;Qe++){const _t=Wt(ft[Qe][0]),It=Vt(ft[Qe][1]);ye.push(_t,It,0),Qe>0&&(Ge+=ke?(Ze*It-_t*Ae)/2:Math.sqrt(Math.pow(_t-Ze,2)+Math.pow(It-Ae,2))),Ze=_t,Ae=It}const ut=ye.length-3;ye[2]=1,je(ye,0,ut,Se),ye[ut+2]=1,ye.size=Math.abs(Ge),ye.start=0,ye.end=ye.size}function Dt(ft,ye,Se,ke){for(let Ze=0;Ze<ft.length;Ze++){const Ae=[];Kt(ft[Ze],Ae,Se,ke),ye.push(Ae)}}function Wt(ft){return ft/360+.5}function Vt(ft){const ye=Math.sin(ft*Math.PI/180),Se=.5-.25*Math.log((1+ye)/(1-ye))/Math.PI;return Se<0?0:Se>1?1:Se}function Rt(ft,ye,Se,ke,Ze,Ae,Ge,ut){if(ke/=ye,Ae>=(Se/=ye)&&Ge<ke)return ft;if(Ge<Se||Ae>=ke)return null;const Qe=[];for(const _t of ft){const It=_t.geometry;let bt=_t.type;const Mt=Ze===0?_t.minX:_t.minY,kt=Ze===0?_t.maxX:_t.maxY;if(Mt>=Se&&kt<ke){Qe.push(_t);continue}if(kt<Se||Mt>=ke)continue;let Gt=[];if(bt==="Point"||bt==="MultiPoint")dn(It,Gt,Se,ke,Ze);else if(bt==="LineString")hn(It,Gt,Se,ke,Ze,!1,ut.lineMetrics);else if(bt==="MultiLineString")Dn(It,Gt,Se,ke,Ze,!1);else if(bt==="Polygon")Dn(It,Gt,Se,ke,Ze,!0);else if(bt==="MultiPolygon")for(const vn of It){const On=[];Dn(vn,On,Se,ke,Ze,!0),On.length&&Gt.push(On)}if(Gt.length){if(ut.lineMetrics&&bt==="LineString"){for(const vn of Gt)Qe.push(Ct(_t.id,bt,vn,_t.tags));continue}bt!=="LineString"&&bt!=="MultiLineString"||(Gt.length===1?(bt="LineString",Gt=Gt[0]):bt="MultiLineString"),bt!=="Point"&&bt!=="MultiPoint"||(bt=Gt.length===3?"Point":"MultiPoint"),Qe.push(Ct(_t.id,bt,Gt,_t.tags))}}return Qe.length?Qe:null}function dn(ft,ye,Se,ke,Ze){for(let Ae=0;Ae<ft.length;Ae+=3){const Ge=ft[Ae+Ze];Ge>=Se&&Ge<=ke&&yn(ye,ft[Ae],ft[Ae+1],ft[Ae+2])}}function hn(ft,ye,Se,ke,Ze,Ae,Ge){let ut=Pn(ft);const Qe=Ze===0?Rn:kn;let _t,It,bt=ft.start;for(let On=0;On<ft.length-3;On+=3){const bn=ft[On],zn=ft[On+1],Mn=ft[On+2],wn=ft[On+3],_n=ft[On+4],rr=Ze===0?bn:zn,or=Ze===0?wn:_n;let kr=!1;Ge&&(_t=Math.sqrt(Math.pow(bn-wn,2)+Math.pow(zn-_n,2))),rr<Se?or>Se&&(It=Qe(ut,bn,zn,wn,_n,Se),Ge&&(ut.start=bt+_t*It)):rr>ke?or<ke&&(It=Qe(ut,bn,zn,wn,_n,ke),Ge&&(ut.start=bt+_t*It)):yn(ut,bn,zn,Mn),or<Se&&rr>=Se&&(It=Qe(ut,bn,zn,wn,_n,Se),kr=!0),or>ke&&rr<=ke&&(It=Qe(ut,bn,zn,wn,_n,ke),kr=!0),!Ae&&kr&&(Ge&&(ut.end=bt+_t*It),ye.push(ut),ut=Pn(ft)),Ge&&(bt+=_t)}let Mt=ft.length-3;const kt=ft[Mt],Gt=ft[Mt+1],vn=Ze===0?kt:Gt;vn>=Se&&vn<=ke&&yn(ut,kt,Gt,ft[Mt+2]),Mt=ut.length-3,Ae&&Mt>=3&&(ut[Mt]!==ut[0]||ut[Mt+1]!==ut[1])&&yn(ut,ut[0],ut[1],ut[2]),ut.length&&ye.push(ut)}function Pn(ft){const ye=[];return ye.size=ft.size,ye.start=ft.start,ye.end=ft.end,ye}function Dn(ft,ye,Se,ke,Ze,Ae){for(const Ge of ft)hn(Ge,ye,Se,ke,Ze,Ae,!1)}function yn(ft,ye,Se,ke){ft.push(ye,Se,ke)}function Rn(ft,ye,Se,ke,Ze,Ae){const Ge=(Ae-ye)/(ke-ye);return yn(ft,Ae,Se+(Ze-Se)*Ge,1),Ge}function kn(ft,ye,Se,ke,Ze,Ae){const Ge=(Ae-Se)/(Ze-Se);return yn(ft,ye+(ke-ye)*Ge,Ae,1),Ge}function Cn(ft,ye){const Se=[];for(let ke=0;ke<ft.length;ke++){const Ze=ft[ke],Ae=Ze.type;let Ge;if(Ae==="Point"||Ae==="MultiPoint"||Ae==="LineString")Ge=nn(Ze.geometry,ye);else if(Ae==="MultiLineString"||Ae==="Polygon"){Ge=[];for(const ut of Ze.geometry)Ge.push(nn(ut,ye))}else if(Ae==="MultiPolygon"){Ge=[];for(const ut of Ze.geometry){const Qe=[];for(const _t of ut)Qe.push(nn(_t,ye));Ge.push(Qe)}}Se.push(Ct(Ze.id,Ae,Ge,Ze.tags))}return Se}function nn(ft,ye){const Se=[];Se.size=ft.size,ft.start!==void 0&&(Se.start=ft.start,Se.end=ft.end);for(let ke=0;ke<ft.length;ke+=3)Se.push(ft[ke]+ye,ft[ke+1],ft[ke+2]);return Se}function Ut(ft,ye){if(ft.transformed)return ft;const Se=1<<ft.z,ke=ft.x,Ze=ft.y;for(const Ae of ft.features){const Ge=Ae.geometry,ut=Ae.type;if(Ae.geometry=[],ut===1)for(let Qe=0;Qe<Ge.length;Qe+=2)Ae.geometry.push(cn(Ge[Qe],Ge[Qe+1],ye,Se,ke,Ze));else for(let Qe=0;Qe<Ge.length;Qe++){const _t=[];for(let It=0;It<Ge[Qe].length;It+=2)_t.push(cn(Ge[Qe][It],Ge[Qe][It+1],ye,Se,ke,Ze));Ae.geometry.push(_t)}}return ft.transformed=!0,ft}function cn(ft,ye,Se,ke,Ze,Ae){return[Math.round(Se*(ft*ke-Ze)),Math.round(Se*(ye*ke-Ae))]}function an(ft,ye,Se,ke,Ze){const Ae=ye===Ze.maxZoom?0:Ze.tolerance/((1<<ye)*Ze.extent),Ge={features:[],numPoints:0,numSimplified:0,numFeatures:ft.length,source:null,x:Se,y:ke,z:ye,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const ut of ft)Zt(Ge,ut,Ae,Ze);return Ge}function Zt(ft,ye,Se,ke){const Ze=ye.geometry,Ae=ye.type,Ge=[];if(ft.minX=Math.min(ft.minX,ye.minX),ft.minY=Math.min(ft.minY,ye.minY),ft.maxX=Math.max(ft.maxX,ye.maxX),ft.maxY=Math.max(ft.maxY,ye.maxY),Ae==="Point"||Ae==="MultiPoint")for(let ut=0;ut<Ze.length;ut+=3)Ge.push(Ze[ut],Ze[ut+1]),ft.numPoints++,ft.numSimplified++;else if(Ae==="LineString")Xt(Ge,Ze,ft,Se,!1,!1);else if(Ae==="MultiLineString"||Ae==="Polygon")for(let ut=0;ut<Ze.length;ut++)Xt(Ge,Ze[ut],ft,Se,Ae==="Polygon",ut===0);else if(Ae==="MultiPolygon")for(let ut=0;ut<Ze.length;ut++){const Qe=Ze[ut];for(let _t=0;_t<Qe.length;_t++)Xt(Ge,Qe[_t],ft,Se,!0,_t===0)}if(Ge.length){let ut=ye.tags||null;if(Ae==="LineString"&&ke.lineMetrics){ut={};for(const _t in ye.tags)ut[_t]=ye.tags[_t];ut.mapbox_clip_start=Ze.start/Ze.size,ut.mapbox_clip_end=Ze.end/Ze.size}const Qe={geometry:Ge,type:Ae==="Polygon"||Ae==="MultiPolygon"?3:Ae==="LineString"||Ae==="MultiLineString"?2:1,tags:ut};ye.id!==null&&(Qe.id=ye.id),ft.features.push(Qe)}}function Xt(ft,ye,Se,ke,Ze,Ae){const Ge=ke*ke;if(ke>0&&ye.size<(Ze?Ge:ke))return void(Se.numPoints+=ye.length/3);const ut=[];for(let Qe=0;Qe<ye.length;Qe+=3)(ke===0||ye[Qe+2]>Ge)&&(Se.numSimplified++,ut.push(ye[Qe],ye[Qe+1])),Se.numPoints++;Ze&&function(Qe,_t){let It=0;for(let bt=0,Mt=Qe.length,kt=Mt-2;bt<Mt;kt=bt,bt+=2)It+=(Qe[bt]-Qe[kt])*(Qe[bt+1]+Qe[kt+1]);if(It>0===_t)for(let bt=0,Mt=Qe.length;bt<Mt/2;bt+=2){const kt=Qe[bt],Gt=Qe[bt+1];Qe[bt]=Qe[Mt-2-bt],Qe[bt+1]=Qe[Mt-1-bt],Qe[Mt-2-bt]=kt,Qe[Mt-1-bt]=Gt}}(ut,Ae),ft.push(ut)}const Hn={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class br{constructor(ye,Se){const ke=(Se=this.options=function(Ae,Ge){for(const ut in Ge)Ae[ut]=Ge[ut];return Ae}(Object.create(Hn),Se)).debug;if(ke&&console.time("preprocess data"),Se.maxZoom<0||Se.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Se.promoteId&&Se.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ze=function(Ae,Ge){const ut=[];if(Ae.type==="FeatureCollection")for(let Qe=0;Qe<Ae.features.length;Qe++)At(ut,Ae.features[Qe],Ge,Qe);else At(ut,Ae.type==="Feature"?Ae:{geometry:Ae},Ge);return ut}(ye,Se);this.tiles={},this.tileCoords=[],ke&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Se.indexMaxZoom,Se.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ze=function(Ae,Ge){const ut=Ge.buffer/Ge.extent;let Qe=Ae;const _t=Rt(Ae,1,-1-ut,ut,0,-1,2,Ge),It=Rt(Ae,1,1-ut,2+ut,0,-1,2,Ge);return(_t||It)&&(Qe=Rt(Ae,1,-ut,1+ut,0,-1,2,Ge)||[],_t&&(Qe=Cn(_t,1).concat(Qe)),It&&(Qe=Qe.concat(Cn(It,-1)))),Qe}(Ze,Se),Ze.length&&this.splitTile(Ze,0,0,0),ke&&(Ze.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ye,Se,ke,Ze,Ae,Ge,ut){const Qe=[ye,Se,ke,Ze],_t=this.options,It=_t.debug;for(;Qe.length;){Ze=Qe.pop(),ke=Qe.pop(),Se=Qe.pop(),ye=Qe.pop();const bt=1<<Se,Mt=mr(Se,ke,Ze);let kt=this.tiles[Mt];if(!kt&&(It>1&&console.time("creation"),kt=this.tiles[Mt]=an(ye,Se,ke,Ze,_t),this.tileCoords.push({z:Se,x:ke,y:Ze}),It)){It>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Se,ke,Ze,kt.numFeatures,kt.numPoints,kt.numSimplified),console.timeEnd("creation"));const kr=`z${Se}`;this.stats[kr]=(this.stats[kr]||0)+1,this.total++}if(kt.source=ye,Ae==null){if(Se===_t.indexMaxZoom||kt.numPoints<=_t.indexMaxPoints)continue}else{if(Se===_t.maxZoom||Se===Ae)continue;if(Ae!=null){const kr=Ae-Se;if(ke!==Ge>>kr||Ze!==ut>>kr)continue}}if(kt.source=null,ye.length===0)continue;It>1&&console.time("clipping");const Gt=.5*_t.buffer/_t.extent,vn=.5-Gt,On=.5+Gt,bn=1+Gt;let zn=null,Mn=null,wn=null,_n=null,rr=Rt(ye,bt,ke-Gt,ke+On,0,kt.minX,kt.maxX,_t),or=Rt(ye,bt,ke+vn,ke+bn,0,kt.minX,kt.maxX,_t);ye=null,rr&&(zn=Rt(rr,bt,Ze-Gt,Ze+On,1,kt.minY,kt.maxY,_t),Mn=Rt(rr,bt,Ze+vn,Ze+bn,1,kt.minY,kt.maxY,_t),rr=null),or&&(wn=Rt(or,bt,Ze-Gt,Ze+On,1,kt.minY,kt.maxY,_t),_n=Rt(or,bt,Ze+vn,Ze+bn,1,kt.minY,kt.maxY,_t),or=null),It>1&&console.timeEnd("clipping"),Qe.push(zn||[],Se+1,2*ke,2*Ze),Qe.push(Mn||[],Se+1,2*ke,2*Ze+1),Qe.push(wn||[],Se+1,2*ke+1,2*Ze),Qe.push(_n||[],Se+1,2*ke+1,2*Ze+1)}}getTile(ye,Se,ke){ye=+ye,Se=+Se,ke=+ke;const Ze=this.options,{extent:Ae,debug:Ge}=Ze;if(ye<0||ye>24)return null;const ut=1<<ye,Qe=mr(ye,Se=Se+ut&ut-1,ke);if(this.tiles[Qe])return Ut(this.tiles[Qe],Ae);Ge>1&&console.log("drilling down to z%d-%d-%d",ye,Se,ke);let _t,It=ye,bt=Se,Mt=ke;for(;!_t&&It>0;)It--,bt>>=1,Mt>>=1,_t=this.tiles[mr(It,bt,Mt)];return _t&&_t.source?(Ge>1&&(console.log("found parent tile z%d-%d-%d",It,bt,Mt),console.time("drilling down")),this.splitTile(_t.source,It,bt,Mt,ye,Se,ke),Ge>1&&console.timeEnd("drilling down"),this.tiles[Qe]?Ut(this.tiles[Qe],Ae):null):null}}function mr(ft,ye,Se){return 32*((1<<ft)*Se+ye)+ft}function pr(ft,ye){const Se=ft.tileID.canonical;if(!this._geoJSONIndex)return void ye(null,null);const ke=this._geoJSONIndex.getTile(Se.z,Se.x,Se.y);if(!ke)return void ye(null,null);const Ze=new ee(ke.features);let Ae=Me(Ze);Ae.byteOffset===0&&Ae.byteLength===Ae.buffer.byteLength||(Ae=new Uint8Array(Ae)),ye(null,{vectorTile:Ze,rawData:Ae.buffer})}class Tr extends B{constructor(ye,Se,ke,Ze,Ae,Ge){super(ye,Se,ke,Ze,pr,Ge),Ae&&(this.loadGeoJSON=Ae),this._dynamicIndex=new re}loadData(ye,Se){const ke=ye&&ye.request,Ze=ke&&ke.collectResourceTiming;this.loadGeoJSON(ye,(Ae,Ge)=>{if(Ae||!Ge)return Se(Ae);if(typeof Ge!="object")return Se(new Error(`Input data given to '${ye.source}' is not a valid GeoJSON object.`));{try{if(ye.filter){const Qe=i.M(ye.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Qe.result==="error")throw new Error(Qe.value.map(_t=>`${_t.key}: ${_t.message}`).join(", "));Ge.features=Ge.features.filter(_t=>Qe.value.evaluate({zoom:0},_t))}ye.dynamic?(Ge.type==="Feature"&&(Ge={type:"FeatureCollection",features:[Ge]}),ye.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(Ge.features,this.loaded),ye.cluster&&(Ge.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=ye.cluster?new gt(function({superclusterOptions:Qe,clusterProperties:_t}){if(!_t||!Qe)return Qe;const It={},bt={},Mt={accumulated:null,zoom:0},kt={properties:null},Gt=Object.keys(_t);for(const vn of Gt){const[On,bn]=_t[vn],zn=i.M(bn),Mn=i.M(typeof On=="string"?[On,["accumulated"],["get",vn]]:On);It[vn]=zn.value,bt[vn]=Mn.value}return Qe.map=vn=>{kt.properties=vn;const On={};for(const bn of Gt)On[bn]=It[bn].evaluate(Mt,kt);return On},Qe.reduce=(vn,On)=>{kt.properties=On;for(const bn of Gt)Mt.accumulated=vn[bn],vn[bn]=bt[bn].evaluate(Mt,kt)},Qe}(ye)).load(Ge.features):ye.dynamic?this._dynamicIndex:function(Qe,_t){return new br(Qe,_t)}(Ge,ye.geojsonVtOptions)}catch(Qe){return Se(Qe)}const ut={};if(Ze){const Qe=x(ke);Qe&&(ut.resourceTiming={},ut.resourceTiming[ye.source]=JSON.parse(JSON.stringify(Qe)))}Se(null,ut)}})}reloadTile(ye,Se){const ke=this.loaded;return ke&&ke[ye.uid]?ye.partial?Se(null,void 0):super.reloadTile(ye,Se):this.loadTile(ye,Se)}loadGeoJSON(ye,Se){if(ye.request)i.n(ye.request,Se);else{if(typeof ye.data!="string")return Se(new Error(`Input data given to '${ye.source}' is not a valid GeoJSON object.`));try{return Se(null,JSON.parse(ye.data))}catch{return Se(new Error(`Input data given to '${ye.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(ye,Se){try{Se(null,this._geoJSONIndex.getClusterExpansionZoom(ye.clusterId))}catch(ke){Se(ke)}}getClusterChildren(ye,Se){try{Se(null,this._geoJSONIndex.getChildren(ye.clusterId))}catch(ke){Se(ke)}}getClusterLeaves(ye,Se){try{Se(null,this._geoJSONIndex.getLeaves(ye.clusterId,ye.limit,ye.offset))}catch(ke){Se(ke)}}}class ur{constructor(ye,Se){this.tileID=new i.aA(ye.tileID.overscaledZ,ye.tileID.wrap,ye.tileID.canonical.z,ye.tileID.canonical.x,ye.tileID.canonical.y),this.tileZoom=ye.tileZoom,this.uid=ye.uid,this.zoom=ye.zoom,this.canonical=ye.tileID.canonical,this.pixelRatio=ye.pixelRatio,this.tileSize=ye.tileSize,this.source=ye.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=ye.projection,this.brightness=Se}parse(ye,Se,ke,Ze){this.status="parsing";const Ae=new i.aA(ke.tileID.overscaledZ,ke.tileID.wrap,ke.tileID.canonical.z,ke.tileID.canonical.x,ke.tileID.canonical.y),Ge=[],ut=Se.familiesBySource[ke.source],Qe=new i.dR(Ae,ke.promoteId);return Qe.bucketLayerIDs=[],Qe.is3DTile=!0,i.e0(ye).then(_t=>{if(!_t)return Ze(new Error("Could not parse tile"));const It=i.e1(_t,1/i.c9(ke.tileID.canonical)),bt=_t.json.extensionsUsed&&_t.json.extensionsUsed.includes("MAPBOX_mesh_features")||_t.json.asset.extras&&_t.json.asset.extras.MAPBOX_mesh_features,Mt=_t.json.extensionsUsed&&_t.json.extensionsUsed.includes("EXT_meshopt_compression"),kt=new i.a3(this.zoom,{brightness:this.brightness});for(const Gt in ut)for(const vn of ut[Gt]){const On=vn[0];Qe.bucketLayerIDs.push(vn.map(zn=>i.av(zn.id,zn.scope))),On.recalculate(kt,[]);const bn=new i.e2(vn,It,Ae,bt,Mt,this.brightness,Qe);bt||(bn.needsUpload=!0),Ge.push(bn),bn.evaluate(On)}this.status="done",Ze(null,{buckets:Ge,featureIndex:Qe,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:null})}).catch(_t=>Ze(new Error(_t.message)))}}class Mr{constructor(ye,Se,ke,Ze,Ae,Ge){this.actor=ye,this.layerIndex=Se,this.availableImages=ke,this.brightness=Ge,this.loading={},this.loaded={}}loadTile(ye,Se){const ke=ye.uid,Ze=this.loading[ke]=new ur(ye,this.brightness);i.bd(ye.request,(Ae,Ge)=>{const ut=!this.loading[ke];return delete this.loading[ke],ut||Ae?(Ze.status="done",ut||(this.loaded[ke]=Ze),Se(Ae)):Ge&&Ge.byteLength!==0?void Ze.parse(Ge,this.layerIndex,ye,(Qe,_t)=>{Ze.status="done",this.loaded=this.loaded||{},this.loaded[ke]=Ze,Qe||!_t?Se(Qe):Se(null,_t)}):(Ze.status="done",this.loaded[ke]=Ze,Se())})}reloadTile(ye,Se){const ke=this.loaded,Ze=ye.uid;if(ke&&ke[Ze]){const Ae=ke[Ze];Ae.projection=ye.projection,Ae.brightness=ye.brightness;const Ge=(ut,Qe)=>{Ae.reloadCallback&&(delete Ae.reloadCallback,this.loadTile(ye,Se)),Se(ut,Qe)};Ae.status==="parsing"?Ae.reloadCallback=Ge:Ae.status==="done"&&this.loadTile(ye,Se)}}abortTile(ye,Se){const ke=ye.uid;this.loading[ke]&&delete this.loading[ke],Se()}removeTile(ye,Se){const ke=this.loaded,Ze=ye.uid;ke&&ke[Ze]&&delete ke[Ze],Se()}}class tr{constructor(ye){this.self=ye,this.actor=new i.e3(ye,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=i.bM({name:"mercator"}),this.workerSourceTypes={vector:B,geojson:Tr,"batched-model":Mr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Se,ke)=>{if(this.workerSourceTypes[Se])throw new Error(`Worker source with name "${Se}" already registered.`);this.workerSourceTypes[Se]=ke},this.self.registerRTLTextPlugin=Se=>{if(i.e4.isParsed())throw new Error("RTL text plugin already registered.");i.e4.applyArabicShaping=Se.applyArabicShaping,i.e4.processBidirectionalText=Se.processBidirectionalText,i.e4.processStyledBidirectionalText=Se.processStyledBidirectionalText}}clearCaches(ye,Se,ke){delete this.layerIndexes[ye],delete this.availableImages[ye],delete this.workerSources[ye],delete this.demWorkerSources[ye],delete this.rasterArrayWorkerSource,ke()}checkIfReady(ye,Se,ke){ke()}setReferrer(ye,Se){this.referrer=Se}spriteLoaded(ye,{scope:Se,isLoaded:ke}){if(this.isSpriteLoaded[ye]||(this.isSpriteLoaded[ye]={}),this.isSpriteLoaded[ye][Se]=ke,this.workerSources[ye]&&this.workerSources[ye][Se])for(const Ze in this.workerSources[ye][Se]){const Ae=this.workerSources[ye][Se][Ze];for(const Ge in Ae){const ut=Ae[Ge];ut instanceof B&&(ut.isSpriteLoaded=ke,ut.fire(new i.x("isSpriteLoaded")))}}}setImages(ye,{scope:Se,images:ke},Ze){if(this.availableImages[ye]||(this.availableImages[ye]={}),this.availableImages[ye][Se]=ke,this.workerSources[ye]&&this.workerSources[ye][Se]){for(const Ae in this.workerSources[ye][Se]){const Ge=this.workerSources[ye][Se][Ae];for(const ut in Ge)Ge[ut].availableImages=ke}Ze()}else Ze()}setProjection(ye,Se){this.projections[ye]=i.bM(Se)}setBrightness(ye,Se,ke){this.brightness=Se,ke()}setLayers(ye,Se,ke){this.getLayerIndex(ye,Se.scope).replace(Se.layers,Se.options),ke()}updateLayers(ye,Se,ke){this.getLayerIndex(ye,Se.scope).update(Se.layers,Se.removedIds,Se.options),ke()}loadTile(ye,Se,ke){Se.projection=this.projections[ye]||this.defaultProjection,this.getWorkerSource(ye,Se.type,Se.source,Se.scope).loadTile(Se,ke)}loadDEMTile(ye,Se,ke){this.getDEMWorkerSource(ye,Se.source,Se.scope).loadTile(Se,ke)}decodeRasterArray(ye,Se,ke){this.getRasterArrayWorkerSource().decodeRasterArray(Se,ke)}reloadTile(ye,Se,ke){Se.projection=this.projections[ye]||this.defaultProjection,this.getWorkerSource(ye,Se.type,Se.source,Se.scope).reloadTile(Se,ke)}abortTile(ye,Se,ke){this.getWorkerSource(ye,Se.type,Se.source,Se.scope).abortTile(Se,ke)}removeTile(ye,Se,ke){this.getWorkerSource(ye,Se.type,Se.source,Se.scope).removeTile(Se,ke)}removeSource(ye,Se,ke){if(!(this.workerSources[ye]&&this.workerSources[ye][Se.scope]&&this.workerSources[ye][Se.scope][Se.type]&&this.workerSources[ye][Se.scope][Se.type][Se.source]))return;const Ze=this.workerSources[ye][Se.scope][Se.type][Se.source];delete this.workerSources[ye][Se.scope][Se.type][Se.source],Ze.removeSource!==void 0?Ze.removeSource(Se,ke):ke()}loadWorkerSource(ye,Se,ke){try{this.self.importScripts(Se.url),ke()}catch(Ze){ke(Ze.toString())}}syncRTLPluginState(ye,Se,ke){try{i.e4.setState(Se);const Ze=i.e4.getPluginURL();if(i.e4.isLoaded()&&!i.e4.isParsed()&&Ze!=null){this.self.importScripts(Ze);const Ae=i.e4.isParsed();ke(Ae?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ze}`),Ae)}}catch(Ze){ke(Ze.toString())}}setDracoUrl(ye,Se){this.dracoUrl=Se}getAvailableImages(ye,Se){this.availableImages[ye]||(this.availableImages[ye]={});let ke=this.availableImages[ye][Se];return ke||(ke=[]),ke}getLayerIndex(ye,Se){this.layerIndexes[ye]||(this.layerIndexes[ye]={});let ke=this.layerIndexes[ye][Se];return ke||(ke=this.layerIndexes[ye][Se]=new M,ke.scope=Se),ke}getWorkerSource(ye,Se,ke,Ze){return this.workerSources[ye]||(this.workerSources[ye]={}),this.workerSources[ye][Ze]||(this.workerSources[ye][Ze]={}),this.workerSources[ye][Ze][Se]||(this.workerSources[ye][Ze][Se]={}),this.isSpriteLoaded[ye]||(this.isSpriteLoaded[ye]={}),this.workerSources[ye][Ze][Se][ke]||(this.workerSources[ye][Ze][Se][ke]=new this.workerSourceTypes[Se]({send:(Ae,Ge,ut,Qe,_t,It)=>{this.actor.send(Ae,Ge,ut,ye,_t,It)},scheduler:this.actor.scheduler},this.getLayerIndex(ye,Ze),this.getAvailableImages(ye,Ze),this.isSpriteLoaded[ye][Ze],void 0,this.brightness)),this.workerSources[ye][Ze][Se][ke]}getDEMWorkerSource(ye,Se,ke){return this.demWorkerSources[ye]||(this.demWorkerSources[ye]={}),this.demWorkerSources[ye][ke]||(this.demWorkerSources[ye][ke]={}),this.demWorkerSources[ye][ke][Se]||(this.demWorkerSources[ye][ke][Se]=new j),this.demWorkerSources[ye][ke][Se]}getRasterArrayWorkerSource(){return this.rasterArrayWorkerSource||(this.rasterArrayWorkerSource=new H),this.rasterArrayWorkerSource}enforceCacheSizeLimit(ye,Se){i.e5(Se)}getWorkerPerformanceMetrics(ye,Se,ke){ke(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new tr(self)),tr}),d(["./shared"],function(i){var x="3.8.0";const S={create:"create",load:"load",fullLoad:"fullLoad"},T={mark(m){performance.mark(m)},measure(m,a,c){performance.measure(m,a,c)}};function M(m){const a=m.name.split("?")[0];return i.a(a)&&a.includes("mapbox-gl.js")?"javascript":i.a(a)&&a.includes("mapbox-gl.css")?"css":i.b(a)?"fontRange":i.c(a)?"sprite":i.i(a)?"style":i.d(a)?"tilejson":"other"}var $,L={},N=function(){if($)return L;function m(g){return!a(g)}function a(g){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var C,I,z=new Blob([""],{type:"text/javascript"}),U=URL.createObjectURL(z);try{I=new Worker(U),C=!0}catch{C=!1}return I&&I.terminate(),URL.revokeObjectURL(U),C}()?function(){var C=document.createElement("canvas");C.width=C.height=1;var I=C.getContext("2d");if(!I)return!1;var z=I.getImageData(0,0,1,1);return z&&z.width===C.width}()?(c[b=g&&g.failIfMajorPerformanceCaveat]===void 0&&(c[b]=function(C){var I,z=function(U){var K=document.createElement("canvas"),G=Object.create(m.webGLContextAttributes);return G.failIfMajorPerformanceCaveat=U,K.getContext("webgl2",G)}(C);if(!z)return!1;try{I=z.createShader(z.VERTEX_SHADER)}catch{return!1}return!(!I||z.isContextLost())&&(z.shaderSource(I,"void main() {}"),z.compileShader(I),z.getShaderParameter(I,z.COMPILE_STATUS)===!0)}(b)),c[b]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var b}$=1,L.supported=m,L.notSupportedReason=a;var c={};return m.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},L}();function V(m,a,c){const g=document.createElement(m);return a!=null&&(g.className=a),c&&c.appendChild(g),g}function B(m,a,c){const g=document.createElementNS("http://www.w3.org/2000/svg",m);for(const b of Object.keys(a))g.setAttributeNS(null,b,String(a[b]));return c&&c.appendChild(g),g}const j=typeof document<"u"?document.documentElement&&document.documentElement.style:null,H=j&&j.userSelect!==void 0?"userSelect":"WebkitUserSelect";let W;function X(){j&&H&&(W=j[H],j[H]="none")}function ee(){j&&H&&(j[H]=W)}function J(m){m.preventDefault(),m.stopPropagation(),window.removeEventListener("click",J,!0)}function Y(){window.addEventListener("click",J,!0),window.setTimeout(()=>{window.removeEventListener("click",J,!0)},0)}function re(m,a){const c=m.getBoundingClientRect();return ce(m,c,a)}function se(m,a){const c=m.getBoundingClientRect(),g=[];for(let b=0;b<a.length;b++)g.push(ce(m,c,a[b]));return g}function ae(m){return window.InstallTrigger!==void 0&&m.button===2&&m.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:m.button}function ce(m,a,c){const g=m.offsetWidth===a.width?1:m.offsetWidth/a.width;return new i.P((c.clientX-a.left)*g,(c.clientY-a.top)*g)}const Ce="01",we="NO_ACCESS_TOKEN";class ge{constructor(a,c,g){this._transformRequestFn=a,this._customAccessToken=c,this._silenceAuthErrors=!!g,this._createSkuToken()}_createSkuToken(){const a=function(){let c="";for(let g=0;g<10;g++)c+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Ce,c].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=a.token,this._skuTokenExpiresAt=a.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(a,c){return this._transformRequestFn&&this._transformRequestFn(a,c)||{url:a}}normalizeStyleURL(a,c){if(!i.f(a))return a;const g=de(a);return g.params.push(`sdk=js-${x}`),g.path=`/styles/v1${g.path}`,this._makeAPIURL(g,this._customAccessToken||c)}normalizeGlyphsURL(a,c){if(!i.f(a))return a;const g=de(a);return g.path=`/fonts/v1${g.path}`,this._makeAPIURL(g,this._customAccessToken||c)}normalizeModelURL(a,c){if(!i.f(a))return a;const g=de(a);return g.path=`/models/v1${g.path}`,this._makeAPIURL(g,this._customAccessToken||c)}normalizeSourceURL(a,c,g,b){if(!i.f(a))return a;const C=de(a);return C.path=`/v4/${C.authority}.json`,C.params.push("secure"),g&&C.params.push(`language=${g}`),b&&C.params.push(`worldview=${b}`),this._makeAPIURL(C,this._customAccessToken||c)}normalizeSpriteURL(a,c,g,b){const C=de(a);return i.f(a)?(C.path=`/styles/v1${C.path}/sprite${c}${g}`,this._makeAPIURL(C,this._customAccessToken||b)):(C.path+=`${c}${g}`,pe(C))}normalizeTileURL(a,c,g){if(this._isSkuTokenExpired()&&this._createSkuToken(),a&&!i.f(a))return a;const b=de(a);b.path=b.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${c||g&&b.authority!=="raster"&&g===512?"@2x":""}${i.m.supported?".webp":"$1"}`),b.authority==="raster"?b.path=`/${i.e.RASTER_URL_PREFIX}${b.path}`:b.authority==="rasterarrays"?b.path=`/${i.e.RASTERARRAYS_URL_PREFIX}${b.path}`:b.authority==="3dtiles"?b.path=`/${i.e.TILES3D_URL_PREFIX}${b.path}`:(b.path=b.path.replace(/^.+\/v4\//,"/"),b.path=`/${i.e.TILE_URL_VERSION}${b.path}`);const C=this._customAccessToken||function(I){for(const z of I){const U=z.match(/^access_token=(.*)$/);if(U)return U[1]}return null}(b.params)||i.e.ACCESS_TOKEN;return i.e.REQUIRE_ACCESS_TOKEN&&C&&this._skuToken&&b.params.push(`sku=${this._skuToken}`),this._makeAPIURL(b,C)}canonicalizeTileURL(a,c){const g=de(a);if(!g.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!g.path.match(/\.[\w]+$/))return a;let b="mapbox://";g.path.match(/^\/raster\/v1\//)?b+=`raster/${g.path.replace(`/${i.e.RASTER_URL_PREFIX}/`,"")}`:g.path.match(/^\/rasterarrays\/v1\//)?b+=`rasterarrays/${g.path.replace(`/${i.e.RASTERARRAYS_URL_PREFIX}/`,"")}`:b+=`tiles/${g.path.replace(`/${i.e.TILE_URL_VERSION}/`,"")}`;let C=g.params;return c&&(C=C.filter(I=>!I.match(/^access_token=/))),C.length&&(b+=`?${C.join("&")}`),b}canonicalizeTileset(a,c){const g=!!c&&i.f(c),b=[];for(const C of a.tiles||[])i.h(C)?b.push(this.canonicalizeTileURL(C,g)):b.push(C);return b}_makeAPIURL(a,c){const g="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",b=de(i.e.API_URL);if(a.protocol=b.protocol,a.authority=b.authority,a.protocol==="http"){const C=a.params.indexOf("secure");C>=0&&a.params.splice(C,1)}if(b.path!=="/"&&(a.path=`${b.path}${a.path}`),!i.e.REQUIRE_ACCESS_TOKEN)return pe(a);if(c=c||i.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!c)throw new Error(`An API access token is required to use Mapbox GL. ${g}`);if(c[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${g}`)}return a.params=a.params.filter(C=>C.indexOf("access_token")===-1),a.params.push(`access_token=${c||""}`),pe(a)}}const ve=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function de(m){const a=m.match(ve);if(!a)throw new Error("Unable to parse URL object");return{protocol:a[1],authority:a[2],path:a[3]||"/",params:a[4]?a[4].split("&"):[]}}function pe(m){const a=m.params.length?`?${m.params.join("&")}`:"";return`${m.protocol}://${m.authority}${m.path}${a}`}const fe="mapbox.eventData";function me(m){if(!m)return null;const a=m.split(".");if(!a||a.length!==3)return null;try{return JSON.parse(i.j(a[1]))}catch{return null}}class Ie{constructor(a){this.type=a,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(a){const c=me(i.e.ACCESS_TOKEN);let g="";return g=c&&c.u?i.k(c.u):i.e.ACCESS_TOKEN||"",a?`${fe}.${a}:${g}`:`${fe}:${g}`}fetchEventData(){const a=i.s("localStorage"),c=this.getStorageKey(),g=this.getStorageKey("uuid");if(a)try{const b=localStorage.getItem(c);b&&(this.eventData=JSON.parse(b));const C=localStorage.getItem(g);C&&(this.anonId=C)}catch{i.w("Unable to read from LocalStorage")}}saveEventData(){const a=i.s("localStorage"),c=this.getStorageKey(),g=this.getStorageKey("uuid"),b=this.anonId;if(a&&b)try{localStorage.setItem(g,b),Object.keys(this.eventData).length>=1&&localStorage.setItem(c,JSON.stringify(this.eventData))}catch{i.w("Unable to write to LocalStorage")}}processRequests(a){}postEvent(a,c,g,b){if(!i.e.EVENTS_URL)return;const C=de(i.e.EVENTS_URL);C.params.push(`access_token=${b||i.e.ACCESS_TOKEN||""}`);const I={event:this.type,created:new Date(a).toISOString()},z=c?i.l(I,c):I,U={url:pe(C),headers:{"Content-Type":"text/plain"},body:JSON.stringify([z])};this.pendingRequest=i.p(U,K=>{this.pendingRequest=null,g(K),this.saveEventData(),this.processRequests(b)})}queueRequest(a,c){this.queue.push(a),this.processRequests(c)}}const Me=new class extends Ie{constructor(m){super("appUserTurnstile"),this._customAccessToken=m}postTurnstileEvent(m,a){i.e.EVENTS_URL&&i.e.ACCESS_TOKEN&&Array.isArray(m)&&m.some(c=>i.f(c)||i.h(c))&&this.queueRequest(Date.now(),a)}processRequests(m){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const a=me(i.e.ACCESS_TOKEN),c=a?a.u:i.e.ACCESS_TOKEN;let g=c!==this.eventData.tokenU;i.v(this.anonId)||(this.anonId=i.u(),g=!0);const b=this.queue.shift();if(this.eventData.lastSuccess){const C=new Date(this.eventData.lastSuccess),I=new Date(b),z=(b-this.eventData.lastSuccess)/864e5;g=g||z>=1||z<-1||C.getDate()!==I.getDate()}else g=!0;g?this.postEvent(b,{sdkIdentifier:"mapbox-gl-js",sdkVersion:x,skuId:Ce,"enabled.telemetry":!1,userId:this.anonId},C=>{C||(this.eventData.lastSuccess=b,this.eventData.tokenU=c)},m):this.processRequests()}},Be=Me.postTurnstileEvent.bind(Me),$e=new class extends Ie{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(m,a,c,g){this.skuToken=a,this.errorCb=g,i.e.EVENTS_URL&&(c||i.e.ACCESS_TOKEN?this.queueRequest({id:m,timestamp:Date.now()},c):this.errorCb(new Error(we)))}processRequests(m){if(this.pendingRequest||this.queue.length===0)return;const{id:a,timestamp:c}=this.queue.shift();a&&this.success[a]||(this.anonId||this.fetchEventData(),i.v(this.anonId)||(this.anonId=i.u()),this.postEvent(c,{sdkIdentifier:"mapbox-gl-js",sdkVersion:x,skuId:Ce,skuToken:this.skuToken,userId:this.anonId},g=>{g?this.errorCb(g):a&&(this.success[a]=!0)},m))}remove(){this.errorCb=null}},ze=$e.postMapLoadEvent.bind($e),Je=new class extends Ie{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(m){let a=this.mapInstanceIdMap.get(m);return a||(a=i.u(),this.mapInstanceIdMap.set(m,a)),a}getEventId(m){const a=this.eventIdPerMapInstanceMap.get(m)||0;return this.eventIdPerMapInstanceMap.set(m,a+1),a}postStyleLoadEvent(m,a){const{map:c,style:g,importedStyles:b}=a;if(!i.e.EVENTS_URL||!m&&!i.e.ACCESS_TOKEN)return;const C=this.getMapInstanceId(c),I={mapInstanceId:C,eventId:this.getEventId(C),style:g};b.length&&(I.importedStyles=b),this.queueRequest({timestamp:Date.now(),payload:I},m)}processRequests(m){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:a,payload:c}=this.queue.shift();this.postEvent(a,c,()=>{},m)}},yt=Je.postStyleLoadEvent.bind(Je),at=new class extends Ie{constructor(){super("gljs.performance")}postPerformanceEvent(m,a){i.e.EVENTS_URL&&(m||i.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:a},m)}processRequests(m){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:a,performanceData:c}=this.queue.shift(),g=function(b){const C=performance.getEntriesByType("resource"),I=performance.getEntriesByType("mark"),z=function(le){const be={};if(le){for(const xe in le)if(xe!=="other")for(const Te of le[xe]){const Ee=`${xe}ResolveRangeMin`,Oe=`${xe}ResolveRangeMax`,Ve=`${xe}RequestCount`,He=`${xe}RequestCachedCount`;be[Ee]=Math.min(be[Ee]||1/0,Te.startTime),be[Oe]=Math.max(be[Oe]||-1/0,Te.responseEnd);const qe=Xe=>{be[Xe]===void 0&&(be[Xe]=0),++be[Xe]};Te.transferSize!==void 0&&Te.transferSize===0&&qe(He),qe(Ve)}}return be}(function(le,be){const xe={};if(le)for(const Te of le){const Ee=be(Te);xe[Ee]===void 0&&(xe[Ee]=[]),xe[Ee].push(Te)}return xe}(C,M)),U=window.devicePixelRatio,K=navigator.connection||navigator.mozConnection||navigator.webkitConnection,G=K?K.effectiveType:void 0,Q={counters:[],metadata:[],attributes:[]},ne=(le,be,xe)=>{xe!=null&&le.push({name:be,value:xe.toString()})};for(const le in z)ne(Q.counters,le,z[le]);if(b.interactionRange[0]!==1/0&&b.interactionRange[1]!==-1/0&&(ne(Q.counters,"interactionRangeMin",b.interactionRange[0]),ne(Q.counters,"interactionRangeMax",b.interactionRange[1])),I)for(const le of Object.keys(S)){const be=S[le],xe=I.find(Te=>Te.name===be);xe&&ne(Q.counters,be,xe.startTime)}return ne(Q.counters,"visibilityHidden",b.visibilityHidden),ne(Q.attributes,"style",function(le){if(le)for(const be of le){const xe=be.name.split("?")[0];if(i.i(xe)){const Te=xe.split("/").slice(-2);if(Te.length===2)return`mapbox://styles/${Te[0]}/${Te[1]}`}}}(C)),ne(Q.attributes,"terrainEnabled",b.terrainEnabled?"true":"false"),ne(Q.attributes,"fogEnabled",b.fogEnabled?"true":"false"),ne(Q.attributes,"projection",b.projection),ne(Q.attributes,"zoom",b.zoom),ne(Q.metadata,"devicePixelRatio",U),ne(Q.metadata,"connectionEffectiveType",G),ne(Q.metadata,"navigatorUserAgent",navigator.userAgent),ne(Q.metadata,"screenWidth",window.screen.width),ne(Q.metadata,"screenHeight",window.screen.height),ne(Q.metadata,"windowWidth",window.innerWidth),ne(Q.metadata,"windowHeight",window.innerHeight),ne(Q.metadata,"mapWidth",b.width/U),ne(Q.metadata,"mapHeight",b.height/U),ne(Q.metadata,"webglRenderer",b.renderer),ne(Q.metadata,"webglVendor",b.vendor),ne(Q.metadata,"sdkVersion",x),ne(Q.metadata,"sdkIdentifier","mapbox-gl-js"),Q}(c);for(const b of g.metadata);for(const b of g.counters);for(const b of g.attributes);this.postEvent(a,g,()=>{},m)}},gt=at.postPerformanceEvent.bind(at),wt=new class extends Ie{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(m,a,c,g){if(!i.e.API_URL||!i.e.SESSION_PATH)return;const b=de(i.e.API_URL+i.e.SESSION_PATH);b.params.push(`sku=${a||""}`),b.params.push(`access_token=${g||i.e.ACCESS_TOKEN||""}`);const C={url:pe(b),headers:{"Content-Type":"text/plain"}};this.pendingRequest=i.g(C,I=>{this.pendingRequest=null,c(I),this.saveEventData(),this.processRequests(g)})}getSessionAPI(m,a,c,g){this.skuToken=a,this.errorCb=g,i.e.SESSION_PATH&&i.e.API_URL&&(c||i.e.ACCESS_TOKEN?this.queueRequest({id:m,timestamp:Date.now()},c):this.errorCb(new Error(we)))}processRequests(m){if(this.pendingRequest||this.queue.length===0)return;const{id:a,timestamp:c}=this.queue.shift();a&&this.success[a]||this.getSession(c,this.skuToken,g=>{g?this.errorCb(g):a&&(this.success[a]=!0)},m)}remove(){this.errorCb=null}},Pe=wt.getSessionAPI.bind(wt),mt=new Set;function dt(m,a){a?mt.add(m):mt.delete(m)}class ht{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(a,c){this._updatedSourceCaches[a]=c,this.setDirty()}discardSourceCacheUpdate(a){delete this._updatedSourceCaches[a]}updateLayer(a){const c=a.scope;this._updatedLayers[c]=this._updatedLayers[c]||new Set,this._updatedLayers[c].add(a.id),this.setDirty()}removeLayer(a){const c=a.scope;this._removedLayers[c]=this._removedLayers[c]||{},this._updatedLayers[c]=this._updatedLayers[c]||new Set,this._removedLayers[c][a.id]=a,this._updatedLayers[c].delete(a.id),this._updatedPaintProps.delete(a.fqid),this.setDirty()}getRemovedLayer(a){return this._removedLayers[a.scope]?this._removedLayers[a.scope][a.id]:null}discardLayerRemoval(a){this._removedLayers[a.scope]&&delete this._removedLayers[a.scope][a.id]}getLayerUpdatesByScope(){const a={};for(const c in this._updatedLayers)a[c]=a[c]||{},a[c].updatedIds=Array.from(this._updatedLayers[c].values());for(const c in this._removedLayers)a[c]=a[c]||{},a[c].removedIds=Object.keys(this._removedLayers[c]);return a}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(a){this._updatedPaintProps.add(a.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(a){this._updatedImages.add(a),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}function je(m){const{userImage:a}=m;return!!(a&&a.render&&a.render())&&(m.data.replace(new Uint8Array(a.data.buffer)),!0)}class St extends i.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.atlasImage={},this.atlasTexture={},this.dirty=!0}createScope(a){this.images[a]={},this.loaded[a]=!1,this.updatedImages[a]={},this.patterns[a]={},this.callbackDispatchedThisFrame[a]={},this.atlasImage[a]=new i.r({width:1,height:1})}isLoaded(){for(const a in this.loaded)if(!this.loaded[a])return!1;return!0}setLoaded(a,c){if(this.loaded[c]!==a&&(this.loaded[c]=a,a)){for(const{ids:g,callback:b}of this.requestors)this._notify(g,c,b);this.requestors=[]}}hasImage(a,c){return!!this.getImage(a,c)}getImage(a,c){return this.images[c][a]}addImage(a,c,g){this._validate(a,g)&&(this.images[c][a]=g)}_validate(a,c){let g=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new i.t(new Error(`Image "${a}" has invalid "stretchX" value`))),g=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new i.t(new Error(`Image "${a}" has invalid "stretchY" value`))),g=!1),this._validateContent(c.content,c)||(this.fire(new i.t(new Error(`Image "${a}" has invalid "content" value`))),g=!1),g}_validateStretch(a,c){if(!a)return!0;let g=0;for(const b of a){if(b[0]<g||b[1]<b[0]||c<b[1])return!1;g=b[1]}return!0}_validateContent(a,c){return!(a&&(a.length!==4||a[0]<0||c.data.width<a[0]||a[1]<0||c.data.height<a[1]||a[2]<0||c.data.width<a[2]||a[3]<0||c.data.height<a[3]||a[2]<a[0]||a[3]<a[1]))}updateImage(a,c,g){g.version=this.images[c][a].version+1,this.images[c][a]=g,this.updatedImages[c][a]=!0}removeImage(a,c){const g=this.images[c][a];delete this.images[c][a],delete this.patterns[c][a],g.userImage&&g.userImage.onRemove&&g.userImage.onRemove()}listImages(a){return Object.keys(this.images[a])}getImages(a,c,g){let b=!0;const C=!!this.loaded[c];if(!C)for(const I of a)this.images[c][I]||(b=!1);C||b?this._notify(a,c,g):this.requestors.push({ids:a,scope:c,callback:g})}getUpdatedImages(a){return this.updatedImages[a]}_notify(a,c,g){const b={};for(const C of a){this.images[c][C]||this.fire(new i.x("styleimagemissing",{id:C}));const I=this.images[c][C];I?b[C]={data:I.data.clone(),pixelRatio:I.pixelRatio,sdf:I.sdf,version:I.version,stretchX:I.stretchX,stretchY:I.stretchY,content:I.content,hasRenderCallback:!!(I.userImage&&I.userImage.render)}:i.w(`Image "${C}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}g(null,b)}getPixelSize(a){const{width:c,height:g}=this.atlasImage[a];return{width:c,height:g}}getPattern(a,c,g){const b=this.patterns[c][a],C=this.getImage(a,c);if(!C)return null;if(b&&b.position.version===C.version)return b.position;if(b)b.position.version=C.version;else{const I={w:C.data.width+2*i.y,h:C.data.height+2*i.y,x:0,y:0},z=new i.I(I,C,i.y);this.patterns[c][a]={bin:I,position:z}}return this._updatePatternAtlas(c,g),this.patterns[c][a].position}bind(a,c){const g=a.gl;let b=this.atlasTexture[c];b?this.dirty&&(b.update(this.atlasImage[c]),this.dirty=!1):(b=new i.T(a,this.atlasImage[c],g.RGBA8),this.atlasTexture[c]=b),b.bind(g.LINEAR,g.CLAMP_TO_EDGE)}_updatePatternAtlas(a,c){const g=[];for(const z in this.patterns[a])g.push(this.patterns[a][z].bin);const{w:b,h:C}=i.z(g),I=this.atlasImage[a];I.resize({width:b||1,height:C||1});for(const z in this.patterns[a]){const{bin:U,position:K}=this.patterns[a][z];let G=K.padding;const Q=U.x+G,ne=U.y+G,le=this.images[a][z].data,be=le.width,xe=le.height;G=G>1?G-1:G,i.r.copy(le,I,{x:0,y:0},{x:Q,y:ne},{width:be,height:xe},c),i.r.copy(le,I,{x:0,y:xe-G},{x:Q,y:ne-G},{width:be,height:G},c),i.r.copy(le,I,{x:0,y:0},{x:Q,y:ne+xe},{width:be,height:G},c),i.r.copy(le,I,{x:be-G,y:0},{x:Q-G,y:ne},{width:G,height:xe},c),i.r.copy(le,I,{x:0,y:0},{x:Q+be,y:ne},{width:G,height:xe},c),i.r.copy(le,I,{x:be-G,y:xe-G},{x:Q-G,y:ne-G},{width:G,height:G},c),i.r.copy(le,I,{x:0,y:xe-G},{x:Q+be,y:ne-G},{width:G,height:G},c),i.r.copy(le,I,{x:0,y:0},{x:Q+be,y:ne+xe},{width:G,height:G},c),i.r.copy(le,I,{x:be-G,y:0},{x:Q-G,y:ne+xe},{width:G,height:G},c)}this.dirty=!0}beginFrame(){for(const a in this.images)this.callbackDispatchedThisFrame[a]={}}dispatchRenderCallbacks(a,c){for(const g of a){if(this.callbackDispatchedThisFrame[c][g])continue;this.callbackDispatchedThisFrame[c][g]=!0;const b=this.images[c][g];je(b)&&this.updateImage(g,c,b)}}}function Ct(m){const a=m.key,c=m.value,g=m.valueSpec||{},b=m.objectElementValidators||{},C=m.style,I=m.styleSpec;let z=[];const U=i.B(c);if(U!=="object")return[new i.V(a,c,`object expected, ${U} found`)];for(const K in c){const G=K.split(".")[0];let Q;b[G]?Q=b[G]:g[G]?Q=Xt:b["*"]?Q=b["*"]:g["*"]&&(Q=Xt),Q?z=z.concat(Q({key:(a&&`${a}.`)+K,value:c[K],valueSpec:g[G]||g["*"],style:C,styleSpec:I,object:c,objectKey:K},c)):z.push(new i.A(a,c[K],`unknown property "${K}"`))}for(const K in g)b[K]||g[K].required&&g[K].default===void 0&&c[K]===void 0&&z.push(new i.V(a,c,`missing required property "${K}"`));return z}function Lt(m){const a=m.value,c=m.valueSpec,g=m.style,b=m.styleSpec,C=m.key,I=m.arrayElementValidator||Xt;if(i.B(a)!=="array")return[new i.V(C,a,`array expected, ${i.B(a)} found`)];if(c.length&&a.length!==c.length)return[new i.V(C,a,`array length ${c.length} expected, length ${a.length} found`)];if(c["min-length"]&&a.length<c["min-length"])return[new i.V(C,a,`array length at least ${c["min-length"]} expected, length ${a.length} found`)];let z={type:c.value,values:c.values,minimum:c.minimum,maximum:c.maximum,function:void 0};b.$version<7&&(z.function=c.function),i.B(c.value)==="object"&&(z=c.value);let U=[];for(let K=0;K<a.length;K++)U=U.concat(I({array:a,arrayIndex:K,value:a[K],valueSpec:z,style:g,styleSpec:b,key:`${C}[${K}]`},!0));return U}function At(m){const a=m.key,c=m.value,g=m.valueSpec;let b=i.B(c);if(b==="number"&&c!=c&&(b="NaN"),b!=="number")return[new i.V(a,c,`number expected, ${b} found`)];if("minimum"in g){let C=g.minimum;if(i.B(g.minimum)==="array"&&(C=g.minimum[m.arrayIndex]),c<C)return[new i.V(a,c,`${c} is less than the minimum value ${C}`)]}if("maximum"in g){let C=g.maximum;if(i.B(g.maximum)==="array"&&(C=g.maximum[m.arrayIndex]),c>C)return[new i.V(a,c,`${c} is greater than the maximum value ${C}`)]}return[]}function Yt(m){const a=m.valueSpec,c=i.D(m.value.type);let g,b,C,I={};const z=c!=="categorical"&&m.value.property===void 0,U=!z,K=i.B(m.value.stops)==="array"&&i.B(m.value.stops[0])==="array"&&i.B(m.value.stops[0][0])==="object",G=Ct({key:m.key,value:m.value,valueSpec:m.styleSpec.function,style:m.style,styleSpec:m.styleSpec,objectElementValidators:{stops:function(le){if(c==="identity")return[new i.V(le.key,le.value,'identity function may not have a "stops" property')];let be=[];const xe=le.value;return be=be.concat(Lt({key:le.key,value:xe,valueSpec:le.valueSpec,style:le.style,styleSpec:le.styleSpec,arrayElementValidator:Q})),i.B(xe)==="array"&&xe.length===0&&be.push(new i.V(le.key,xe,"array must have at least one stop")),be},default:function(le){return Xt({key:le.key,value:le.value,valueSpec:a,style:le.style,styleSpec:le.styleSpec})}}});return c==="identity"&&z&&G.push(new i.V(m.key,m.value,'missing required property "property"')),c==="identity"||m.value.stops||G.push(new i.V(m.key,m.value,'missing required property "stops"')),c==="exponential"&&m.valueSpec.expression&&!i.F(m.valueSpec)&&G.push(new i.V(m.key,m.value,"exponential functions not supported")),m.styleSpec.$version>=8&&(U&&!i.G(m.valueSpec)?G.push(new i.V(m.key,m.value,"property functions not supported")):z&&!i.H(m.valueSpec)&&G.push(new i.V(m.key,m.value,"zoom functions not supported"))),c!=="categorical"&&!K||m.value.property!==void 0||G.push(new i.V(m.key,m.value,'"property" property is required')),G;function Q(le){let be=[];const xe=le.value,Te=le.key;if(i.B(xe)!=="array")return[new i.V(Te,xe,`array expected, ${i.B(xe)} found`)];if(xe.length!==2)return[new i.V(Te,xe,`array length 2 expected, length ${xe.length} found`)];if(K){if(i.B(xe[0])!=="object")return[new i.V(Te,xe,`object expected, ${i.B(xe[0])} found`)];if(xe[0].zoom===void 0)return[new i.V(Te,xe,"object stop key must have zoom")];if(xe[0].value===void 0)return[new i.V(Te,xe,"object stop key must have value")];const Ee=i.D(xe[0].zoom);if(typeof Ee!="number")return[new i.V(Te,xe[0].zoom,"stop zoom values must be numbers")];if(C&&C>Ee)return[new i.V(Te,xe[0].zoom,"stop zoom values must appear in ascending order")];Ee!==C&&(C=Ee,b=void 0,I={}),be=be.concat(Ct({key:`${Te}[0]`,value:xe[0],valueSpec:{zoom:{}},style:le.style,styleSpec:le.styleSpec,objectElementValidators:{zoom:At,value:ne}}))}else be=be.concat(ne({key:`${Te}[0]`,value:xe[0]},xe));return i.J(i.K(xe[1]))?be.concat([new i.V(`${Te}[1]`,xe[1],"expressions are not allowed in function stops.")]):be.concat(Xt({key:`${Te}[1]`,value:xe[1],valueSpec:a,style:le.style,styleSpec:le.styleSpec}))}function ne(le,be){const xe=i.B(le.value),Te=i.D(le.value),Ee=le.value!==null?le.value:be;if(g){if(xe!==g)return[new i.V(le.key,Ee,`${xe} stop domain type must match previous stop domain type ${g}`)]}else g=xe;if(xe!=="number"&&xe!=="string"&&xe!=="boolean"&&typeof Te!="number"&&typeof Te!="string"&&typeof Te!="boolean")return[new i.V(le.key,Ee,"stop domain value must be a number, string, or boolean")];if(xe!=="number"&&c!=="categorical"){let Oe=`number expected, ${xe} found`;return i.G(a)&&c===void 0&&(Oe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new i.V(le.key,Ee,Oe)]}return c!=="categorical"||xe!=="number"||typeof Te=="number"&&isFinite(Te)&&Math.floor(Te)===Te?c!=="categorical"&&xe==="number"&&typeof Te=="number"&&typeof b=="number"&&b!==void 0&&Te<b?[new i.V(le.key,Ee,"stop domain values must appear in ascending order")]:(b=Te,c==="categorical"&&Te in I?[new i.V(le.key,Ee,"stop domain values must be unique")]:(I[Te]=!0,[])):[new i.V(le.key,Ee,`integer expected, found ${String(Te)}`)]}}function Kt(m){const a=(m.expressionContext==="property"?i.L:i.M)(i.K(m.value),m.valueSpec);if(a.result==="error")return a.value.map(g=>new i.V(`${m.key}${g.key}`,m.value,g.message));const c=a.value.expression||a.value._styleExpression.expression;if(m.expressionContext==="property"&&m.propertyKey==="text-font"&&!c.outputDefined())return[new i.V(m.key,m.value,`Invalid data expression for "${m.propertyKey}". Output values must be contained as literals within the expression.`)];if(m.expressionContext==="property"&&m.propertyType==="layout"&&!i.N(c))return[new i.V(m.key,m.value,'"feature-state" data expressions are not supported with layout properties.')];if(m.expressionContext==="filter")return Dt(c,m);if(m.expressionContext&&m.expressionContext.indexOf("cluster")===0){if(!i.O(c,["zoom","feature-state"]))return[new i.V(m.key,m.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(m.expressionContext==="cluster-initial"&&!i.Q(c))return[new i.V(m.key,m.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Dt(m,a){const c=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(a.valueSpec&&a.valueSpec.expression)for(const b of a.valueSpec.expression.parameters)c.delete(b);if(c.size===0)return[];const g=[];return m instanceof i.S&&c.has(m.name)?[new i.V(a.key,a.value,`["${m.name}"] expression is not supported in a filter for a ${a.object.type} layer with id: ${a.object.id}`)]:(m.eachChild(b=>{g.push(...Dt(b,a))}),g)}function Wt(m){const a=m.key,c=m.value,g=m.valueSpec,b=[];return Array.isArray(g.values)?g.values.indexOf(i.D(c))===-1&&b.push(new i.V(a,c,`expected one of [${g.values.join(", ")}], ${JSON.stringify(c)} found`)):Object.keys(g.values).indexOf(i.D(c))===-1&&b.push(new i.V(a,c,`expected one of [${Object.keys(g.values).join(", ")}], ${JSON.stringify(c)} found`)),b}function Vt(m){return i.W(i.K(m.value))?Kt(i.C({},m,{expressionContext:"filter",valueSpec:m.styleSpec[`filter_${m.layerType||"fill"}`]})):Rt(m)}function Rt(m){const a=m.value,c=m.key;if(i.B(a)!=="array")return[new i.V(c,a,`array expected, ${i.B(a)} found`)];const g=m.styleSpec;let b,C=[];if(a.length<1)return[new i.V(c,a,"filter array must have at least 1 element")];switch(C=C.concat(Wt({key:`${c}[0]`,value:a[0],valueSpec:g.filter_operator})),i.D(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&i.D(a[1])==="$type"&&C.push(new i.V(c,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":a.length!==3&&C.push(new i.V(c,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(b=i.B(a[1]),b!=="string"&&C.push(new i.V(`${c}[1]`,a[1],`string expected, ${b} found`)));for(let I=2;I<a.length;I++)b=i.B(a[I]),i.D(a[1])==="$type"?C=C.concat(Wt({key:`${c}[${I}]`,value:a[I],valueSpec:g.geometry_type})):b!=="string"&&b!=="number"&&b!=="boolean"&&C.push(new i.V(`${c}[${I}]`,a[I],`string, number, or boolean expected, ${b} found`));break;case"any":case"all":case"none":for(let I=1;I<a.length;I++)C=C.concat(Rt({key:`${c}[${I}]`,value:a[I],styleSpec:m.styleSpec}));break;case"has":case"!has":b=i.B(a[1]),a.length!==2?C.push(new i.V(c,a,`filter array for "${a[0]}" operator must have 2 elements`)):b!=="string"&&C.push(new i.V(`${c}[1]`,a[1],`string expected, ${b} found`))}return C}function dn(m,a){const c=m.key,g=m.style,b=m.layer,C=m.styleSpec,I=m.value,z=m.objectKey,U=C[`${a}_${m.layerType}`];if(!U)return[];const K=z.match(/^(.*)-transition$/);if(a==="paint"&&K&&U[K[1]]&&U[K[1]].transition)return Xt({key:c,value:I,valueSpec:C.transition,style:g,styleSpec:C});const G=m.valueSpec||U[z];if(!G)return[new i.A(c,I,`unknown property "${z}"`)];let Q;if(i.B(I)==="string"&&i.G(G)&&!G.tokens&&(Q=/^{([^}]+)}$/.exec(I))){const le=`\`{ "type": "identity", "property": ${Q?JSON.stringify(Q[1]):'"_"'} }\``;return[new i.V(c,I,`"${z}" does not support interpolation syntax
Use an identity property function instead: ${le}.`)]}const ne=[];if(m.layerType==="symbol")z!=="text-field"||!g||g.glyphs||g.imports||ne.push(new i.V(c,I,'use of "text-field" requires a style "glyphs" property')),z==="text-font"&&i.X(i.K(I))&&i.D(I.type)==="identity"&&ne.push(new i.V(c,I,'"text-font" does not support identity functions'));else if(m.layerType==="model"&&a==="paint"&&b&&b.layout&&b.layout.hasOwnProperty("model-id")&&i.G(G)&&(i.Y(G)||i.H(G))){const le=i.L(i.K(I),G),be=le.value.expression||le.value._styleExpression.expression;be&&!i.O(be,["measure-light"])&&(z==="model-emissive-strength"&&i.Q(be)&&i.N(be)||ne.push(new i.V(c,I,`${z} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return ne.concat(Xt({key:m.key,value:I,valueSpec:G,style:g,styleSpec:C,expressionContext:"property",propertyType:a,propertyKey:z}))}function hn(m){return dn(m,"paint")}function Pn(m){return dn(m,"layout")}function Dn(m){let a=[];const c=m.value,g=m.key,b=m.style,C=m.styleSpec;c.type||c.ref||a.push(new i.V(g,c,'either "type" or "ref" is required'));let I=i.D(c.type);const z=i.D(c.ref);if(c.id){const U=i.D(c.id);for(let K=0;K<m.arrayIndex;K++){const G=b.layers[K];i.D(G.id)===U&&a.push(new i.V(g,c.id,`duplicate layer id "${c.id}", previously used at line ${G.id.__line__}`))}}if("ref"in c){let U;["type","source","source-layer","filter","layout"].forEach(K=>{K in c&&a.push(new i.V(g,c[K],`"${K}" is prohibited for ref layers`))}),b.layers.forEach(K=>{i.D(K.id)===z&&(U=K)}),U?U.ref?a.push(new i.V(g,c.ref,"ref cannot reference another ref layer")):I=i.D(U.type):typeof z=="string"&&a.push(new i.V(g,c.ref,`ref layer "${z}" not found`))}else if(I!=="background"&&I!=="sky"&&I!=="slot")if(c.source){const U=b.sources&&b.sources[c.source],K=U&&i.D(U.type);U?K==="vector"&&I==="raster"?a.push(new i.V(g,c.source,`layer "${c.id}" requires a raster source`)):K==="raster"&&I!=="raster"?a.push(new i.V(g,c.source,`layer "${c.id}" requires a vector source`)):K!=="vector"||c["source-layer"]?K==="raster-dem"&&I!=="hillshade"?a.push(new i.V(g,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):K!=="raster-array"||["raster","raster-particle"].includes(I)?I!=="line"||!c.paint||!c.paint["line-gradient"]&&!c.paint["line-trim-offset"]||K==="geojson"&&U.lineMetrics?I==="raster-particle"&&K!=="raster-array"&&a.push(new i.V(g,c.source,`layer "${c.id}" requires a 'raster-array' source.`)):a.push(new i.V(g,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new i.V(g,c.source,"raster-array source can only be used with layer type 'raster'.")):a.push(new i.V(g,c,`layer "${c.id}" must specify a "source-layer"`)):a.push(new i.V(g,c.source,`source "${c.source}" not found`))}else a.push(new i.V(g,c,'missing required property "source"'));return a=a.concat(Ct({key:g,value:c,valueSpec:C.layer,style:m.style,styleSpec:m.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Xt({key:`${g}.type`,value:c.type,valueSpec:C.layer.type,style:m.style,styleSpec:m.styleSpec,object:c,objectKey:"type"}),filter:U=>Vt(i.C({layerType:I},U)),layout:U=>Ct({layer:c,key:U.key,value:U.value,valueSpec:{},style:U.style,styleSpec:U.styleSpec,objectElementValidators:{"*":K=>Pn(i.C({layerType:I},K))}}),paint:U=>Ct({layer:c,key:U.key,value:U.value,valueSpec:{},style:U.style,styleSpec:U.styleSpec,objectElementValidators:{"*":K=>hn(i.C({layerType:I,layer:c},K))}})}})),a}function yn(m){const a=m.value,c=m.key,g=i.B(a);return g!=="string"?[new i.V(c,a,`string expected, ${g} found`)]:[]}const Rn={promoteId:function({key:m,value:a}){if(i.B(a)==="string")return yn({key:m,value:a});{const c=[];for(const g in a)c.push(...yn({key:`${m}.${g}`,value:a[g]}));return c}}};function kn(m){const a=m.value,c=m.key,g=m.styleSpec,b=m.style;if(!a.type)return[new i.V(c,a,'"type" is required')];const C=i.D(a.type);let I=[];switch(["vector","raster","raster-dem","raster-array"].includes(C)&&(a.url||a.tiles||I.push(new i.A(c,a,'Either "url" or "tiles" is required.'))),C){case"vector":case"raster":case"raster-dem":case"raster-array":return I=I.concat(Ct({key:c,value:a,valueSpec:g[`source_${C.replace("-","_")}`],style:m.style,styleSpec:g,objectElementValidators:Rn})),I;case"geojson":if(I=Ct({key:c,value:a,valueSpec:g.source_geojson,style:b,styleSpec:g,objectElementValidators:Rn}),a.cluster)for(const z in a.clusterProperties){const[U,K]=a.clusterProperties[z],G=typeof U=="string"?[U,["accumulated"],["get",z]]:U;I.push(...Kt({key:`${c}.${z}.map`,value:K,expressionContext:"cluster-map"})),I.push(...Kt({key:`${c}.${z}.reduce`,value:G,expressionContext:"cluster-reduce"}))}return I;case"video":return Ct({key:c,value:a,valueSpec:g.source_video,style:b,styleSpec:g});case"image":return Ct({key:c,value:a,valueSpec:g.source_image,style:b,styleSpec:g});case"canvas":return[new i.V(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Wt({key:`${c}.type`,value:a.type,valueSpec:{values:Cn(g)}})}}function Cn(m){return m.source.reduce((a,c)=>{const g=m[c];return g.type.type==="enum"&&(a=a.concat(Object.keys(g.type.values))),a},[])}function nn(m){const a=m.value,c=m.styleSpec,g=c.light,b=m.style;let C=[];const I=i.B(a);if(a===void 0)return C;if(I!=="object")return C=C.concat([new i.V("light",a,`object expected, ${I} found`)]),C;for(const z in a){const U=z.match(/^(.*)-transition$/);C=C.concat(U&&g[U[1]]&&g[U[1]].transition?Xt({key:z,value:a[z],valueSpec:c.transition,style:b,styleSpec:c}):g[z]?Xt({key:z,value:a[z],valueSpec:g[z],style:b,styleSpec:c}):[new i.V(z,a[z],`unknown property "${z}"`)])}return C}function Ut(m){const a=m.value;let c=[];if(!a)return c;const g=i.B(a);if(g!=="object")return c=c.concat([new i.V("light-3d",a,`object expected, ${g} found`)]),c;const b=m.styleSpec,C=b["light-3d"],I=m.key,z=m.style,U=m.style.lights;for(const Q of["type","id"])if(!(Q in a))return c=c.concat([new i.V("light-3d",a,`missing property ${Q} on light`)]),c;if(a.type&&U)for(let Q=0;Q<m.arrayIndex;Q++){const ne=i.D(a.type),le=U[Q];i.D(le.type)===ne&&c.push(new i.V(I,a.id,`duplicate light type "${a.type}", previously defined at line ${le.id.__line__}`))}const K=`properties_light_${a.type}`;if(!(K in b))return c=c.concat([new i.V("light-3d",a,`Invalid light type ${a.type}`)]),c;const G=b[K];for(const Q in a)if(Q==="properties"){const ne=a[Q],le=i.B(ne);if(le!=="object")return c=c.concat([new i.V("properties",ne,`object expected, ${le} found`)]),c;for(const be in ne)c=c.concat(G[be]?Xt({key:be,value:ne[be],valueSpec:G[be],style:z,styleSpec:b}):[new i.A(m.key,ne[be],`unknown property "${be}"`)])}else{const ne=Q.match(/^(.*)-transition$/);c=c.concat(ne&&C[ne[1]]&&C[ne[1]].transition?Xt({key:Q,value:a[Q],valueSpec:b.transition,style:z,styleSpec:b}):C[Q]?Xt({key:Q,value:a[Q],valueSpec:C[Q],style:z,styleSpec:b}):[new i.A(Q,a[Q],`unknown property "${Q}"`)])}return c}function cn(m){const a=m.value,c=m.key,g=m.style,b=m.styleSpec,C=b.terrain;let I=[];const z=i.B(a);if(a===void 0||z==="null")return I;if(z!=="object")return I=I.concat([new i.V("terrain",a,`object expected, ${z} found`)]),I;for(const U in a){const K=U.match(/^(.*)-transition$/);I=I.concat(K&&C[K[1]]&&C[K[1]].transition?Xt({key:U,value:a[U],valueSpec:b.transition,style:g,styleSpec:b}):C[U]?Xt({key:U,value:a[U],valueSpec:C[U],style:g,styleSpec:b}):[new i.A(U,a[U],`unknown property "${U}"`)])}if(a.source){const U=g.sources&&g.sources[a.source],K=U&&i.D(U.type);U?K!=="raster-dem"&&I.push(new i.V(c,a.source,`terrain cannot be used with a source of type ${String(K)}, it only be used with a "raster-dem" source type`)):I.push(new i.V(c,a.source,`source "${a.source}" not found`))}else I.push(new i.V(c,a,'terrain is missing required property "source"'));return I}function an(m){const a=m.value,c=m.style,g=m.styleSpec,b=g.fog;let C=[];const I=i.B(a);if(a===void 0)return C;if(I!=="object")return C=C.concat([new i.V("fog",a,`object expected, ${I} found`)]),C;for(const z in a){const U=z.match(/^(.*)-transition$/);C=C.concat(U&&b[U[1]]&&b[U[1]].transition?Xt({key:z,value:a[z],valueSpec:g.transition,style:c,styleSpec:g}):b[z]?Xt({key:z,value:a[z],valueSpec:b[z],style:c,styleSpec:g}):[new i.A(z,a[z],`unknown property "${z}"`)])}return C}const Zt={"*":()=>[],array:Lt,boolean:function(m){const a=m.value,c=m.key,g=i.B(a);return g!=="boolean"?[new i.V(c,a,`boolean expected, ${g} found`)]:[]},number:At,color:function(m){const a=m.key,c=m.value,g=i.B(c);return g!=="string"?[new i.V(a,c,`color expected, ${g} found`)]:i.U.parseCSSColor(c)===null?[new i.V(a,c,`color expected, "${c}" found`)]:[]},enum:Wt,filter:Vt,function:Yt,layer:Dn,object:Ct,source:kn,model:i.Z,light:nn,"light-3d":Ut,terrain:cn,fog:an,string:yn,formatted:function(m){return yn(m).length===0?[]:Kt(m)},resolvedImage:function(m){return yn(m).length===0?[]:Kt(m)},projection:function(m){const a=m.value,c=m.styleSpec,g=c.projection,b=m.style;let C=[];const I=i.B(a);if(I==="object")for(const z in a)C=C.concat(Xt({key:z,value:a[z],valueSpec:g[z],style:b,styleSpec:c}));else I!=="string"&&(C=C.concat([new i.V("projection",a,`object or string expected, ${I} found`)]));return C},import:function(m){const{value:a,styleSpec:c}=m,{data:g,...b}=a;Object.defineProperty(b,"__line__",{value:a.__line__,enumerable:!1});let C=Ct(i.C({},m,{value:b,valueSpec:c.import}));return i.D(b.id)===""&&C.push(new i.V(`${m.key}.id`,b,"import id can't be an empty string")),g&&(C=C.concat(br(g,c,{key:`${m.key}.data`}))),C}};function Xt(m,a=!1){const c=m.value,g=m.valueSpec,b=m.styleSpec;if(g.expression&&i.X(i.D(c)))return Yt(m);if(g.expression&&i.J(i.K(c)))return Kt(m);if(g.type&&Zt[g.type]){const C=Zt[g.type](m);return a===!0&&C.length>0&&i.B(m.value)==="array"?Kt(m):C}return Ct(i.C({},m,{valueSpec:g.type?b[g.type]:g}))}function Hn(m){const a=m.value,c=m.key,g=yn(m);return g.length||(a.indexOf("{fontstack}")===-1&&g.push(new i.V(c,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&g.push(new i.V(c,a,'"glyphs" url must include a "{range}" token'))),g}function br(m,a=i._,c={}){return Xt({key:c.key||"",value:m,valueSpec:a.$root,styleSpec:a,style:m,objectElementValidators:{glyphs:Hn,"*":()=>[]}})}function mr(m,a=i._){return Ae(br(m,a))}const pr=m=>Ae(kn(m)),Tr=m=>Ae(nn(m)),ur=m=>Ae(Ut(m)),Mr=m=>Ae(cn(m)),tr=m=>Ae(an(m)),ft=m=>Ae(Dn(m)),ye=m=>Ae(Vt(m)),Se=m=>Ae(hn(m)),ke=m=>Ae(Pn(m)),Ze=m=>Ae(i.Z(m));function Ae(m){return m.slice().sort((a,c)=>a.line&&c.line?a.line-c.line:0)}function Ge(m,a){let c=!1;if(a&&a.length)for(const g of a)g instanceof i.A?i.w(g.message):(m.fire(new i.t(new Error(g.message))),c=!0);return c}let ut;class Qe extends i.E{constructor(a,c="flat"){super(),this._transitionable=new i.$(ut||(ut=new i.a0({anchor:new i.a1(i._.light.anchor),position:new i.a2(i._.light.position),color:new i.a1(i._.light.color),intensity:new i.a1(i._.light.intensity)}))),this.setLight(a,c),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,c,g={}){this._validate(Tr,a,g)||(this._transitionable.setTransitionOrValue(a),this.id=c)}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,c,g){return(!g||g.validate!==!1)&&Ge(this,a.call(mr,i.l({value:c,style:{glyphs:!0,sprite:!0},styleSpec:i._})))}}let _t=class extends i.E{constructor(m,a,c,g){super(),this.scope=c,this._transitionable=new i.$(new i.a0({source:new i.a1(i._.terrain.source),exaggeration:new i.a1(i._.terrain.exaggeration)}),c,g),this._transitionable.setTransitionOrValue(m,g),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=a}get(){return this._transitionable.serialize()}set(m,a){this._transitionable.setTransitionOrValue(m,a)}updateTransitions(m){this._transitioning=this._transitionable.transitioned(m,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(m){this.properties=this._transitioning.possiblyEvaluate(m)}getExaggeration(m){return this._transitioning.possiblyEvaluate(new i.a3(m)).get("exaggeration")}getAttenuationRange(){if(!this.isZoomDependent())return null;const m=this._transitionable._values.exaggeration;if(!m)return null;const a=m.value.expression;if(!a)return null;let c=-1,g=-1,b=1;for(const C of a.zoomStops)b=a.evaluate(new i.a3(C)),b>.01?(c=C,g=-1):g=C;return b<.01&&c>0&&g>c?[c,g]:null}isZoomDependent(){const m=this._transitionable._values.exaggeration;return m!=null&&m.value!=null&&m.value.expression!=null&&m.value.expression instanceof i.a4}};const It=45,bt=65,Mt=.05;function kt(m,a,c,g){const b=i.a7(It,bt,c),[C,I]=Gt(m,g);let z=1-Math.min(1,Math.exp((a-C)/(I-C)*-6));return z*=z*z,z=Math.min(1,1.00747*z),z*b*m.alpha}function Gt(m,a){const c=.5/Math.tan(.5*a);return[m.range[0]+c,m.range[1]+c]}function vn(m,a,c,g,b){const C=i.a6.vec3.transformMat4([],[a,c,g],b.mercatorFogMatrix);return kt(m,i.a6.vec3.length(C),b.pitch,b._fov)}function On(m,a,c,g,b,C,I){const z=[[c,g,0],[b,g,0],[b,C,0],[c,C,0]];let U=Number.MAX_VALUE,K=-Number.MAX_VALUE;for(const G of z){const Q=i.a6.vec3.transformMat4([],G,a),ne=i.a6.vec3.length(Q);U=Math.min(U,ne),K=Math.max(K,ne)}return[kt(m,U,I.pitch,I._fov),kt(m,K,I.pitch,I._fov)]}class bn extends i.E{constructor(a,c,g,b){super();const C=new i.a0({range:new i.a1(i._.fog.range),color:new i.a1(i._.fog.color),"high-color":new i.a1(i._.fog["high-color"]),"space-color":new i.a1(i._.fog["space-color"]),"horizon-blend":new i.a1(i._.fog["horizon-blend"]),"star-intensity":new i.a1(i._.fog["star-intensity"]),"vertical-range":new i.a1(i._.fog["vertical-range"])});this._transitionable=new i.$(C,g,new Map(b)),this.set(a,b),this._transitioning=this._transitionable.untransitioned(),this._transform=c,this.properties=new i.a8(C),this.scope=g}get state(){const a=this._transform,c=a.projection.name==="globe",g=i.a9(a.zoom),b=this.properties.get("range"),C=[.5,3];return{range:c?[i.aa(C[0],b[0],g),i.aa(C[1],b[1],g)]:b,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(a,c,g={}){if(this._validate(tr,a,g))return;const b=i.l({},a);for(const C of Object.keys(i._.fog))b[C]===void 0&&(b[C]=i._.fog[C].default);this._options=b,this._transitionable.setTransitionOrValue(this._options,c)}getOpacity(a){if(!this._transform.projection.supportsFog)return 0;const c=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:i.a7(It,bt,a))*c.a}getOpacityAtLatLng(a,c){return this._transform.projection.supportsFog?function(g,b,C){const I=i.a5.fromLngLat(b),z=C.elevation?C.elevation.getAtPointOrZero(I):0;return vn(g,I.x,I.y,z,C)}(this.state,a,c):0}getOpacityForTile(a){if(!this._transform.projection.supportsFog)return[1,1];const c=this._transform.calculateFogTileMatrix(a.toUnwrapped());return On(this.state,c,0,0,i.ab,i.ab,this._transform)}getOpacityForBounds(a,c,g,b,C){return this._transform.projection.supportsFog?On(this.state,a,c,g,b,C,this._transform):[1,1]}getFovAdjustedRange(a){return this._transform.projection.supportsFog?Gt(this.state,a):[0,1]}isVisibleOnFrustum(a){if(!this._transform.projection.supportsFog)return!1;const c=[4,5,6,7];for(const g of c){const b=a.points[g];let C;if(b[2]>=0)C=b;else{const I=a.points[g-4];C=i.ac(I,b,I[2]/(I[2]-b[2]))}if(vn(this.state,C[0],C[1],0,this._transform)>=Mt)return!0}return!1}updateConfig(a){this._transitionable.setTransitionOrValue(this._options,new Map(a))}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,c,g){return(!g||g.validate!==!1)&&Ge(this,a.call(mr,i.l({value:c,style:{glyphs:!0,sprite:!0},styleSpec:i._})))}}class zn extends i.E{constructor(a,c,g,b){super(),this.scope=g,this._options=a,this.properties=new i.a8(c),this._transitionable=new i.$(c,g,new Map(b)),this._transitionable.setTransitionOrValue(a.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(a){this._transitionable.setTransitionOrValue(this._options.properties,new Map(a))}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(a,c){this._options=a,this._transitionable.setTransitionOrValue(a.properties,c)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}let Mn,wn;class _n{constructor(a,c,g,b){this.screenBounds=a,this.cameraPoint=c,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=g,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,b)}static createFromScreenPoints(a,c){let g,b;if(a instanceof i.P||typeof a[0]=="number"){const C=i.P.convert(a);g=[C],b=c.isPointAboveHorizon(C)}else{const C=i.P.convert(a[0]),I=i.P.convert(a[1]);g=[C,I],b=i.ae(C,I).every(z=>c.isPointAboveHorizon(z))}return new _n(g,c.getCameraPoint(),b,c)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(a){return i.ae(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],a)}bufferedCameraGeometry(a){const c=this.screenBounds[0],g=this.screenBounds.length===1?this.screenBounds[0].add(new i.P(1,1)):this.screenBounds[1],b=i.ae(c,g,0,!1);return this.cameraPoint.y>g.y&&(this.cameraPoint.x>c.x&&this.cameraPoint.x<g.x?b.splice(3,0,this.cameraPoint):this.cameraPoint.x>=g.x?b[2]=this.cameraPoint:this.cameraPoint.x<=c.x&&(b[3]=this.cameraPoint)),i.af(b,a)}bufferedCameraGeometryGlobe(a){const c=this.screenBounds[0],g=this.screenBounds.length===1?this.screenBounds[0].add(new i.P(1,1)):this.screenBounds[1],b=i.ae(c,g,a),C=this.cameraPoint.clone();switch(3*((C.y>c.y)+(C.y>g.y))+((C.x>c.x)+(C.x>g.x))){case 0:b[0]=C,b[4]=C.clone();break;case 1:b.splice(1,0,C);break;case 2:b[1]=C;break;case 3:b.splice(4,0,C);break;case 5:b.splice(2,0,C);break;case 6:b[3]=C;break;case 7:b.splice(3,0,C);break;case 8:b[2]=C}return b}containsTile(a,c,g,b=0){const C=a.queryPadding/c._pixelsPerMercatorPixel+1,I=g?this._bufferedCameraMercator(C,c):this._bufferedScreenMercator(C,c);let z=a.tileID.wrap+(I.unwrapped?b:0);const U=I.polygon.map(Te=>i.ag(a.tileTransform,Te,z));if(!i.ah(U,0,0,i.ab,i.ab))return;z=a.tileID.wrap+(this.screenGeometryMercator.unwrapped?b:0);const K=this.screenGeometryMercator.polygon.map(Te=>i.ai(a.tileTransform,Te,z)),G=K.map(Te=>new i.P(Te[0],Te[1])),Q=c.getFreeCameraOptions().position||new i.a5(0,0,0),ne=i.ai(a.tileTransform,Q,z),le=K.map(Te=>{const Ee=i.a6.vec3.sub(Te,Te,ne);return i.a6.vec3.normalize(Ee,Ee),new i.aj(ne,Ee)}),be=i.ak(a,1,c.zoom)*c._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:G,tilespaceRays:le,bufferedTilespaceGeometry:U,bufferedTilespaceBounds:(xe=i.al(U),xe.min.x=i.ap(xe.min.x,0,i.ab),xe.min.y=i.ap(xe.min.y,0,i.ab),xe.max.x=i.ap(xe.max.x,0,i.ab),xe.max.y=i.ap(xe.max.y,0,i.ab),xe),tile:a,tileID:a.tileID,pixelToTileUnitsFactor:be};var xe}_bufferedScreenMercator(a,c){const g=kr(a);if(this._screenRaycastCache[g])return this._screenRaycastCache[g];{let b;return b=c.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(a),c):{polygon:this.bufferedScreenGeometry(a).map(C=>c.pointCoordinate3D(C)),unwrapped:!0},this._screenRaycastCache[g]=b,b}}_bufferedCameraMercator(a,c){const g=kr(a);if(this._cameraRaycastCache[g])return this._cameraRaycastCache[g];{let b;return b=c.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(a),c):{polygon:this.bufferedCameraGeometry(a).map(C=>c.pointCoordinate3D(C)),unwrapped:!0},this._cameraRaycastCache[g]=b,b}}_projectAndResample(a,c){const g=function(C,I){const z=i.a6.mat4.multiply([],I.pixelMatrix,I.globeMatrix),U=[0,-i.aq,0,1],K=[0,i.aq,0,1],G=[0,0,0,1];i.a6.vec4.transformMat4(U,U,z),i.a6.vec4.transformMat4(K,K,z),i.a6.vec4.transformMat4(G,G,z);const Q=new i.P(U[0]/U[3],U[1]/U[3]),ne=new i.P(K[0]/K[3],K[1]/K[3]),le=i.an(C,Q)&&U[3]<G[3],be=i.an(C,ne)&&K[3]<G[3];if(!le&&!be)return null;const xe=function(Ke,Ye,rt){for(let vt=1;vt<Ke.length;vt++){const st=or(Ye.pointCoordinate3D(Ke[vt-1]).x),it=or(Ye.pointCoordinate3D(Ke[vt]).x);if(rt<0){if(st<it)return{idx:vt,t:-st/(it-1-st)}}else if(it<st)return{idx:vt,t:(1-st)/(it+1-st)}}return null}(C,I,le?-1:1);if(!xe)return null;const{idx:Te,t:Ee}=xe;let Oe=Te>1?rr(C.slice(0,Te),I):[],Ve=Te<C.length?rr(C.slice(Te),I):[];Oe=Oe.map(Ke=>new i.P(or(Ke.x),Ke.y)),Ve=Ve.map(Ke=>new i.P(or(Ke.x),Ke.y));const He=[...Oe];He.length===0&&He.push(Ve[Ve.length-1]);const qe=i.aa(He[He.length-1].y,(Ve.length===0?Oe[0]:Ve[0]).y,Ee);let Xe;return Xe=le?[new i.P(0,qe),new i.P(0,0),new i.P(1,0),new i.P(1,qe)]:[new i.P(1,qe),new i.P(1,1),new i.P(0,1),new i.P(0,qe)],He.push(...Xe),Ve.length===0?He.push(Oe[0]):He.push(...Ve),{polygon:He.map(Ke=>new i.a5(Ke.x,Ke.y)),unwrapped:!1}}(a,c);if(g)return g;const b=function(C,I){let z=!1,U=-1/0,K=0;for(let Q=0;Q<C.length-1;Q++)C[Q].x>U&&(U=C[Q].x,K=Q);for(let Q=0;Q<C.length-1;Q++){const ne=(K+Q)%(C.length-1),le=C[ne],be=C[ne+1];Math.abs(le.x-be.x)>.5&&(le.x<be.x?(le.x+=1,ne===0&&(C[C.length-1].x+=1)):(be.x+=1,ne+1===C.length-1&&(C[0].x+=1)),z=!0)}const G=i.am(I.center.lng);return z&&G<Math.abs(G-1)&&C.forEach(Q=>{Q.x-=1}),{polygon:C,unwrapped:z}}(rr(a,c).map(C=>new i.P(or(C.x),C.y)),c);return{polygon:b.polygon.map(C=>new i.a5(C.x,C.y)),unwrapped:b.unwrapped}}}function rr(m,a){return i.ao(m,c=>{const g=a.pointCoordinate3D(c);c.x=g.x,c.y=g.y},1/256)}function or(m){return m<0?1+m%1:m%1}function kr(m){return 100*m|0}function zr(m,a,c,g,b){const C=function(z,U){if(z)return b(z);if(U){if(m.url&&U.tiles&&m.tiles&&delete m.tiles,U.variants){if(!Array.isArray(U.variants))return b(new Error("variants must be an array"));for(const G of U.variants){if(G==null||typeof G!="object"||G.constructor!==Object)return b(new Error("variant must be an object"));if(!Array.isArray(G.capabilities))return b(new Error("capabilities must be an array"));if(G.capabilities.length===1&&G.capabilities[0]==="meshopt"){U=i.l(U,G);break}}}const K=i.ar(i.l({},U,m),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding","vector_layers","raster_layers","worldview_options","worldview_default","worldview"]);K.tiles=a.canonicalizeTileset(K,m.url),b(null,K)}},I=function(z,U,K){if(!z)return null;if(!U&&!K)return z;K=K||z.worldview_default;const G=Object.values(z.language||{});if(G.length===0)return null;const Q=Object.values(z.worldview||{});if(Q.length===0)return null;const ne=G.every(be=>be===U),le=Q.every(be=>be===K);return ne&&le?z:U in(z.language_options||{})||K in(z.worldview_options||{})?null:z.language_options&&z.worldview_options?z:null}(m.data,c,g);return I?i.q.frame(()=>C(null,I)):m.url?i.n(a.transformRequest(a.normalizeSourceURL(m.url,null,c,g),i.R.Source),C):i.q.frame(()=>{const{data:z,...U}=m;C(null,U)})}class Hr{constructor(a,c,g){this.bounds=i.as.convert(this.validateBounds(a)),this.minzoom=c||0,this.maxzoom=g||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){const c=Math.pow(2,a.z),g=Math.floor(i.am(this.bounds.getWest())*c),b=Math.floor(i.at(this.bounds.getNorth())*c),C=Math.ceil(i.am(this.bounds.getEast())*c),I=Math.ceil(i.at(this.bounds.getSouth())*c);return a.x>=g&&a.x<C&&a.y>=b&&a.y<I}}class ei extends i.E{constructor(a,c,g,b){if(super(),this.id=a,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,i.l(this,i.ar(c,["url","scheme","tileSize","promoteId"])),this._options=i.l({type:"vector"},c),this._collectResourceTiming=!!c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b),this._tileWorkers={},this._deduped=new i.au}load(a){this._loaded=!1,this.fire(new i.x("dataloading",{dataType:"source"}));const c=Array.isArray(this.map._language)?this.map._language.join():this.map._language,g=this.map.getWorldview();this._tileJSONRequest=zr(this._options,this.map._requestManager,c,g,(b,C)=>{if(this._tileJSONRequest=null,this._loaded=!0,b)c&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${c}`),g&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${g}`),this.fire(new i.t(b));else if(C){if(i.l(this,C),this.hasWorldviews=!!C.worldview_options,C.worldview_default&&(this.worldviewDefault=C.worldview_default),C.vector_layers){this.vectorLayers=C.vector_layers,this.vectorLayerIds=[],this.localizableLayerIds=new Set;for(const I of C.vector_layers)this.vectorLayerIds.push(I.id),C.worldview&&C.worldview[I.source]&&this.localizableLayerIds.add(I.id)}C.bounds&&(this.tileBounds=new Hr(C.bounds,this.minzoom,this.maxzoom)),Be(C.tiles,this.map._requestManager._customAccessToken),this.fire(new i.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.x("data",{dataType:"source",sourceDataType:"content"}))}a&&a(b)})}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}reload(){this.cancelTileJSONRequest();const a=i.av(this.id,this.scope);this.load(()=>this.map.style.clearSource(a))}setTiles(a){return this._options.tiles=a,this.reload(),this}setUrl(a){return this.url=a,this._options.url=a,this.reload(),this}onRemove(a){this.cancelTileJSONRequest()}serialize(){return i.l({},this._options)}loadTile(a,c){const g=a.tileID.canonical.url(this.tiles,this.scheme),b=this.map._requestManager.normalizeTileURL(g),C=this.map._requestManager.transformRequest(b,i.R.Tile),I=this.map.style?this.map.style.getLut(this.scope):null,z=I?{image:I.image.clone()}:null,U={request:C,data:void 0,uid:a.uid,tileID:a.tileID,tileZoom:a.tileZoom,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,lut:z,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:i.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:a.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:a.isExtraShadowCaster,tessellationStep:this.map._tessellationStep,scaleFactor:this.map.getScaleFactor()};if(this.hasWorldviews&&i.f(g)&&(U.worldview=this.map.getWorldview()||this.worldviewDefault,U.localizableLayerIds=this.localizableLayerIds),U.request.collectResourceTiming=this._collectResourceTiming,a.actor&&a.state!=="expired")a.state==="loading"?a.reloadCallback=c:a.request=a.actor.send("reloadTile",U,K.bind(this));else if(a.actor=this._tileWorkers[b]=this._tileWorkers[b]||this.dispatcher.getActor(),this.dispatcher.ready)a.request=a.actor.send("loadTile",U,K.bind(this),void 0,!0);else{const G=i.aw.call({deduped:this._deduped},U,(Q,ne)=>{Q||!ne?K.call(this,Q):(U.data={cacheControl:ne.cacheControl,expires:ne.expires,rawData:ne.rawData.slice(0)},a.actor&&a.actor.send("loadTile",U,K.bind(this),void 0,!0))},!0);a.request={cancel:G}}function K(G,Q){return delete a.request,a.aborted?c(null):G&&G.status!==404?c(G):(Q&&Q.resourceTiming&&(a.resourceTiming=Q.resourceTiming),this.map._refreshExpiredTiles&&Q&&a.setExpiryData(Q),a.loadVectorData(Q,this.map.painter),i.ax(this.dispatcher),c(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)))}}abortTile(a){a.request&&(a.request.cancel(),delete a.request),a.actor&&a.actor.send("abortTile",{uid:a.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(a,c){a.actor&&a.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id,scope:this.scope}),a.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Hi extends i.E{constructor(a,c,g,b){super(),this.id=a,this.dispatcher=g,this.setEventedParent(b),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=i.l({type:"raster"},c),i.l(this,i.ar(c,["url","scheme","tileSize"]))}load(a){this._loaded=!1,this.fire(new i.x("dataloading",{dataType:"source"})),this._tileJSONRequest=zr(this._options,this.map._requestManager,null,null,(c,g)=>{this._tileJSONRequest=null,this._loaded=!0,c?this.fire(new i.t(c)):g&&(i.l(this,g),g.raster_layers&&(this.rasterLayers=g.raster_layers,this.rasterLayerIds=this.rasterLayers.map(b=>b.id)),g.bounds&&(this.tileBounds=new Hr(g.bounds,this.minzoom,this.maxzoom)),Be(g.tiles),this.fire(new i.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.x("data",{dataType:"source",sourceDataType:"content"}))),a&&a(c)})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}reload(){this.cancelTileJSONRequest();const a=i.av(this.id,this.scope);this.load(()=>this.map.style.clearSource(a))}setTiles(a){return this._options.tiles=a,this.reload(),this}setUrl(a){return this.url=a,this._options.url=a,this.reload(),this}onRemove(a){this.cancelTileJSONRequest()}serialize(){return i.l({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a,c){const g=i.q.devicePixelRatio>=2,b=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),g,this.tileSize);a.request=i.o(this.map._requestManager.transformRequest(b,i.R.Tile),(C,I,z,U)=>(delete a.request,a.aborted?(a.state="unloaded",c(null)):C?(a.state="errored",c(C)):I?(this.map._refreshExpiredTiles&&a.setExpiryData({cacheControl:z,expires:U}),a.setTexture(I,this.map.painter),a.state="loaded",i.ax(this.dispatcher),void c(null)):c(null)))}abortTile(a,c){a.request&&(a.request.cancel(),delete a.request),c&&c()}unloadTile(a,c){a.texture&&a.texture instanceof i.T?(a.destroy(!0),a.texture&&a.texture instanceof i.T&&this.map.painter.saveTileTexture(a.texture)):a.destroy(),c&&c()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class ir extends Hi{constructor(a,c,g,b){super(a,c,g,b),this.type="raster-array",this.maxzoom=22,this._options=i.l({type:"raster-array"},c)}triggerRepaint(a){const c=this.map.painter._terrain,g=this.map.style.getSourceCache(this.id);c&&c.enabled&&g&&c._clearRenderCacheForTile(g.id,a.tileID),this.map.triggerRepaint()}loadTile(a,c){const g=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),b=this.map._requestManager.transformRequest(g,i.R.Tile);a.requestParams=b,a.actor||(a.actor=this.dispatcher.getActor()),a.request=a.fetchHeader(void 0,(C,I,z,U)=>{if(delete a.request,a.aborted)return a.state="unloaded",c(null);if(C)return C.code===20?void 0:(a.state="errored",c(C));this.map._refreshExpiredTiles&&a.setExpiryData({cacheControl:z,expires:U}),a.state="empty",c(null)})}unloadTile(a,c){const g=a.texture;g&&g instanceof i.T?(a.destroy(!0),this.map.painter.saveTileTexture(g)):(a.destroy(),a.flushQueues(),a._isHeaderLoaded=!1,delete a._mrt,delete a.textureDescriptor),a.fbo&&(a.fbo.destroy(),delete a.fbo),delete a.request,delete a.requestParams,delete a.neighboringTiles,a.state="unloaded"}prepareTile(a,c,g){a._isHeaderLoaded&&(a.state!=="empty"&&(a.state="reloading"),a.fetchBand(c,g,(b,C)=>{if(b)return a.state="errored",this.fire(new i.t(b)),void this.triggerRepaint(a);C&&(a.setTexture(C,this.map.painter),a.state="loaded",this.triggerRepaint(a))}))}getInitialBand(a){if(!this.rasterLayers)return 0;const c=this.rasterLayers.find(({id:C})=>C===a),g=c&&c.fields,b=g&&g.bands&&g.bands;return b?b[0]:0}getTextureDescriptor(a,c,g){if(!a)return;const b=c.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!b)return;let C=null;c instanceof i.aB?C=c.paint.get("raster-array-band"):c instanceof i.aC&&(C=c.paint.get("raster-particle-array-band"));const I=C||this.getInitialBand(b);if(I!=null)if(a.textureDescriptor){if(!a.updateNeeded(b,I)||g)return Object.assign({},a.textureDescriptor,{texture:a.texture})}else this.prepareTile(a,b,I)}}const Ar={vector:ei,raster:Hi,"raster-dem":class extends Hi{constructor(m,a,c,g){super(m,a,c,g),this.type="raster-dem",this.maxzoom=22,this._options=i.l({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox"}loadTile(m,a){const c=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function g(b,C){b&&(m.state="errored",a(b)),C&&(m.dem=C,m.dem.onDeserialize(),m.needsHillshadePrepare=!0,m.needsDEMTextureUpload=!0,m.state="loaded",a(null))}m.request=i.o(this.map._requestManager.transformRequest(c,i.R.Tile),(function(b,C,I,z){if(delete m.request,m.aborted)m.state="unloaded",a(null);else if(b)m.state="errored",a(b);else if(C){this.map._refreshExpiredTiles&&m.setExpiryData({cacheControl:I,expires:z});const U=ImageBitmap&&C instanceof ImageBitmap&&i.ay(),K=1-(C.width-i.az(C.width))/2;K<1||m.neighboringTiles||(m.neighboringTiles=this._getNeighboringTiles(m.tileID));const G=U?C:i.q.getImageData(C,K),Q={uid:m.uid,coord:m.tileID,source:this.id,scope:this.scope,rawImageData:G,encoding:this.encoding,padding:K};m.actor&&m.state!=="expired"||(m.actor=this.dispatcher.getActor(),m.actor.send("loadDEMTile",Q,g.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(m){const a=m.canonical,c=Math.pow(2,a.z),g=(a.x-1+c)%c,b=a.x===0?m.wrap-1:m.wrap,C=(a.x+1+c)%c,I=a.x+1===c?m.wrap+1:m.wrap,z={};return z[new i.aA(m.overscaledZ,b,a.z,g,a.y).key]={backfilled:!1},z[new i.aA(m.overscaledZ,I,a.z,C,a.y).key]={backfilled:!1},a.y>0&&(z[new i.aA(m.overscaledZ,b,a.z,g,a.y-1).key]={backfilled:!1},z[new i.aA(m.overscaledZ,m.wrap,a.z,a.x,a.y-1).key]={backfilled:!1},z[new i.aA(m.overscaledZ,I,a.z,C,a.y-1).key]={backfilled:!1}),a.y+1<c&&(z[new i.aA(m.overscaledZ,b,a.z,g,a.y+1).key]={backfilled:!1},z[new i.aA(m.overscaledZ,m.wrap,a.z,a.x,a.y+1).key]={backfilled:!1},z[new i.aA(m.overscaledZ,I,a.z,C,a.y+1).key]={backfilled:!1}),z}},"raster-array":ir,geojson:class extends i.E{constructor(m,a,c,g){super(),this.id=m,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=c.getActor(),this.setEventedParent(g),this._data=a.data,this._options=i.l({},a),this._collectResourceTiming=a.collectResourceTiming,a.maxzoom!==void 0&&(this.maxzoom=a.maxzoom),a.minzoom!==void 0&&(this.minzoom=a.minzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId;const b=i.ab/this.tileSize;this.workerOptions=i.l({source:this.id,scope:this.scope,cluster:a.cluster||!1,geojsonVtOptions:{buffer:(a.buffer!==void 0?a.buffer:128)*b,tolerance:(a.tolerance!==void 0?a.tolerance:.375)*b,extent:i.ab,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:a.clusterMaxZoom!==void 0?a.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,a.clusterMinPoints||2),extent:i.ab,radius:(a.clusterRadius!==void 0?a.clusterRadius:50)*b,log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter,dynamic:a.dynamic},a.workerOptions)}onAdd(m){this.map=m,this.setData(this._data)}setData(m){return this._data=m,this._updateWorkerData(),this}updateData(m){if(!this._options.dynamic)return this.fire(new i.t(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof m!="string"&&(m.type==="Feature"&&(m={type:"FeatureCollection",features:[m]}),m.type!=="FeatureCollection"))return this.fire(new i.t(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof m!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const a=new Map;for(const c of this._data.features)a.set(c.id,c);for(const c of m.features)a.set(c.id,c);this._data.features=[...a.values()]}else this._data=m;return this._updateWorkerData(!0),this}getClusterExpansionZoom(m,a){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:m,source:this.id,scope:this.scope},a),this}getClusterChildren(m,a){return this.actor.send("geojson.getClusterChildren",{clusterId:m,source:this.id,scope:this.scope},a),this}getClusterLeaves(m,a,c,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:m,limit:a,offset:c},g),this}_updateWorkerData(m=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new i.x("dataloading",{dataType:"source"})),this._loaded=!1;const a=i.l({append:m},this.workerOptions);a.scope=this.scope;const c=this._data;typeof c=="string"?(a.request=this.map._requestManager.transformRequest(i.q.resolveURL(c),i.R.Source),a.request.collectResourceTiming=this._collectResourceTiming):a.data=JSON.stringify(c),this._pendingLoad=this.actor.send(`${this.type}.loadData`,a,(g,b)=>{if(this._loaded=!0,this._pendingLoad=null,g)this.fire(new i.t(g));else{const C={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&b&&b.resourceTiming&&b.resourceTiming[this.id]&&(C.resourceTiming=b.resourceTiming[this.id]),m&&(this._partialReload=!0),this.fire(new i.x("data",C)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(m),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(m,a){const c=m.actor?"reloadTile":"loadTile";m.actor=this.actor;const g=this.map.style?this.map.style.getLut(this.scope):null,b=g?{image:g.image.clone()}:null,C=this._partialReload,I={type:this.type,uid:m.uid,tileID:m.tileID,tileZoom:m.tileZoom,zoom:m.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:b,scope:this.scope,pixelRatio:i.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,scaleFactor:this.map.getScaleFactor(),partial:C};m.request=this.actor.send(c,I,(z,U)=>C&&!U?(m.state="loaded",a(null)):(delete m.request,m.destroy(),m.aborted?a(null):z?a(z):(m.loadVectorData(U,this.map.painter,c==="reloadTile"),a(null))),void 0,c==="loadTile")}abortTile(m){m.request&&(m.request.cancel(),delete m.request),m.aborted=!0}unloadTile(m,a){this.actor.send("removeTile",{uid:m.uid,type:this.type,source:this.id,scope:this.scope}),m.destroy()}onRemove(m){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return i.l({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends i.aD{constructor(m,a,c,g){super(m,a,c,g),this.roundZoom=!0,this.type="video",this.options=a}load(){this._loaded=!1;const m=this.options;this.urls=[];for(const a of m.urls)this.urls.push(this.map._requestManager.transformRequest(a,i.R.Source).url);i.aE(this.urls,(a,c)=>{this._loaded=!0,a?this.fire(new i.t(a)):c&&(this.video=c,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(m){if(this.video){const a=this.video.seekable;m<a.start(0)||m>a.end(0)?this.fire(new i.t(new i.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${a.start(0)} and ${a.end(0)}-second mark.`))):this.video.currentTime=m}}getVideo(){return this.video}onAdd(m){this.map||(this.map=m,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const m=this.map.painter.context,a=m.gl;this.texture?this.video.paused||(this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this.texture=new i.T(m,this.video,a.RGBA8),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(m)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:i.aD,model:class extends i.E{constructor(m,a,c,g){super(),this.id=m,this.type="model",this.models=[],this._loaded=!1,this._options=a}load(){const m=[];for(const a in this._options.models){const c=this._options.models[a],g=i.aG(this.map._requestManager.transformRequest(c.uri,i.R.Model).url).then(b=>{if(!b)return;const C=i.aH(b),I=new i.aI(a,c.position,c.orientation,C);I.computeBoundsAndApplyParent(),this.models.push(I)}).catch(b=>{this.fire(new i.t(new Error(`Could not load model ${a} from ${c.uri}: ${b.message}`)))});m.push(g)}return Promise.allSettled(m).then(()=>{this._loaded=!0,this.fire(new i.x("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(a=>{this.fire(new i.t(new Error(`Could not load models: ${a.message}`)))})}onAdd(m){this.map=m,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(m,a){}serialize(){return{type:"model"}}},"batched-model":class extends i.E{constructor(m,a,c,g){super(),this.type="batched-model",this.id=m,this.tileSize=512,this._options=a,this.tiles=this._options.tiles,this.maxzoom=a.maxzoom||19,this.minzoom=a.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=c,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(g)}onAdd(m){this.map=m,this.load()}load(m){this._loaded=!1,this.fire(new i.x("dataloading",{dataType:"source"}));const a=Array.isArray(this.map._language)?this.map._language.join():this.map._language,c=this.map.getWorldview();this._tileJSONRequest=zr(this._options,this.map._requestManager,a,c,(g,b)=>{this._tileJSONRequest=null,this._loaded=!0,g?(a&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${a}`),c&&c.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${c}`),this.fire(new i.t(g))):b&&(i.l(this,b),b.bounds&&(this.tileBounds=new Hr(b.bounds,this.minzoom,this.maxzoom)),Be(b.tiles,this.map._requestManager._customAccessToken),this.fire(new i.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.x("data",{dataType:"source",sourceDataType:"content"}))),m&&m(g)})}hasTransition(){return!1}hasTile(m){return!this.tileBounds||this.tileBounds.contains(m.canonical)}loaded(){return this._loaded}loadTile(m,a){const c=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme)),g={request:this.map._requestManager.transformRequest(c,i.R.Tile),data:void 0,uid:m.uid,tileID:m.tileID,tileZoom:m.tileZoom,zoom:m.tileID.overscaledZ,tileSize:this.tileSize*m.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:m.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,lut:null,maxZoom:null,promoteId:null,pixelRatio:null,scaleFactor:null};if(m.actor&&m.state!=="expired")if(m.state==="loading")m.reloadCallback=a;else{if(m.buckets){const C=Object.values(m.buckets);for(const I of C)I.dirty=!0;return void(m.state="loaded")}m.request=m.actor.send("reloadTile",g,b.bind(this))}else m.actor=this.dispatcher.getActor(),m.request=m.actor.send("loadTile",g,b.bind(this),void 0,!0);function b(C,I){return m.aborted?a(null):C&&C.status!==404?a(C):(this.map._refreshExpiredTiles&&I&&m.setExpiryData(I),m.loadModelData(I,this.map.painter),m.state="loaded",void a(null))}}serialize(){return i.l({},this._options)}},canvas:class extends i.aD{constructor(m,a,c,g){super(m,a,c,g),a.coordinates?Array.isArray(a.coordinates)&&a.coordinates.length===4&&!a.coordinates.some(b=>!Array.isArray(b)||b.length!==2||b.some(C=>typeof C!="number"))||this.fire(new i.t(new i.V(`sources.${m}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new i.t(new i.V(`sources.${m}`,null,'missing required property "coordinates"'))),a.animate&&typeof a.animate!="boolean"&&this.fire(new i.t(new i.V(`sources.${m}`,null,'optional "animate" property must be a boolean value'))),a.canvas?typeof a.canvas=="string"||a.canvas instanceof HTMLCanvasElement||this.fire(new i.t(new i.V(`sources.${m}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new i.t(new i.V(`sources.${m}`,null,'missing required property "canvas"'))),this.options=a,this.animate=a.animate===void 0||a.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new i.t(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(m){this.map=m,this.load(),this.canvas&&this.animate&&this.play()}onRemove(m){this.pause()}prepare(){let m=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,m=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,m=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const a=this.map.painter.context;this.texture?!m&&!this._playing||this.texture instanceof i.aF||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new i.T(a,this.canvas,a.gl.RGBA8,{premultiply:!0}),this._prepareData(a)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const m of[this.canvas.width,this.canvas.height])if(isNaN(m)||m<=0)return!0;return!1}},custom:class extends i.E{constructor(m,a,c,g){super(),this.id=m,this.type="custom",this._dataType="raster",this._dispatcher=c,this._implementation=a,this.setEventedParent(g),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new i.t(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new i.t(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Hr(this._implementation.bounds,this.minzoom,this.maxzoom)),a.update=this._update.bind(this),a.clearTiles=this._clearTiles.bind(this),a.coveringTiles=this._coveringTiles.bind(this),i.l(this,i.ar(a,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return i.ar(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new i.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.x("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(m){this.map=m,this._loaded=!1,this.fire(new i.x("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(m),this.load()}onRemove(m){this._implementation.onRemove&&this._implementation.onRemove(m)}hasTile(m){if(this._implementation.hasTile){const{x:a,y:c,z:g}=m.canonical;return this._implementation.hasTile({x:a,y:c,z:g})}return!this.tileBounds||this.tileBounds.contains(m.canonical)}loadTile(m,a){const{x:c,y:g,z:b}=m.tileID.canonical,C=new AbortController;m.request=Promise.resolve(this._implementation.loadTile({x:c,y:g,z:b},{signal:C.signal})).then((function(I){return delete m.request,m.aborted?(m.state="unloaded",a(null)):I===void 0?(m.state="errored",a(null)):I===null?(this.loadTileData(m,{width:this.tileSize,height:this.tileSize,data:null}),m.state="loaded",a(null)):function(z){return z instanceof ImageData||z instanceof HTMLCanvasElement||z instanceof ImageBitmap||z instanceof HTMLImageElement}(I)?(this.loadTileData(m,I),m.state="loaded",void a(null)):(m.state="errored",a(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(I=>{I.code!==20&&(m.state="errored",a(I))}),m.request.cancel=()=>C.abort()}loadTileData(m,a){m.setTexture(a,this.map.painter)}unloadTile(m,a){if(m.texture&&m.texture instanceof i.T?(m.destroy(!0),m.texture&&m.texture instanceof i.T&&this.map.painter.saveTileTexture(m.texture)):m.destroy(),this._implementation.unloadTile){const{x:c,y:g,z:b}=m.tileID.canonical;this._implementation.unloadTile({x:c,y:g,z:b})}a&&a()}abortTile(m,a){m.request&&m.request.cancel&&(m.request.cancel(),delete m.request),a&&a()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(m=>({x:m.canonical.x,y:m.canonical.y,z:m.canonical.z}))}_clearTiles(){const m=i.av(this.id,this.scope);this.map.style.clearSource(m)}_update(){this.fire(new i.x("data",{dataType:"source",sourceDataType:"content"}))}}},Gr=function(m,a,c,g){const b=new Ar[a.type](m,a,c,g);if(b.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${b.id}`);return i.aJ(["load","abort","unload","serialize","prepare"],b),b};function Ei(m,a){const c=i.a6.mat4.identity([]);return i.a6.mat4.scale(c,c,[.5*m.width,.5*-m.height,1]),i.a6.mat4.translate(c,c,[1,-1,0]),i.a6.mat4.multiply(c,c,m.calculateProjMatrix(a.toUnwrapped())),Float32Array.from(c)}function fo(m,a,c,g,b,C,I,z,U=!1){const K=m.tilesIn(c,z,U);K.sort(qi);const G=[];for(const ne of K)G.push({wrappedTileID:ne.tile.tileID.wrapped().key,queryResults:ne.tile.queryRenderedFeatures(a,m._state,ne,g,b,C,I,Ei(m.transform,ne.tile.tileID),U)});const Q=function(ne){const le={},be={};for(const xe of ne){const Te=xe.queryResults,Ee=xe.wrappedTileID,Oe=be[Ee]=be[Ee]||{};for(const Ve in Te){const He=Te[Ve],qe=Oe[Ve]=Oe[Ve]||{},Xe=le[Ve]=le[Ve]||[];for(const Ke of He)qe[Ke.featureIndex]||(qe[Ke.featureIndex]=!0,Xe.push(Ke))}}return le}(G);for(const ne in Q)Q[ne].forEach(le=>{const be=le.feature,xe=be.layer;xe&&xe.type!=="background"&&xe.type!=="sky"&&xe.type!=="slot"&&(i.aK(ne)||(be.source=xe.source,xe["source-layer"]&&(be.sourceLayer=xe["source-layer"])),be.state=be.id!==void 0?m.getFeatureState(xe["source-layer"],be.id):{})});return Q}function No(m,a){const c=m.getRenderableIds().map(C=>m.getTileByID(C)),g=[],b={};for(let C=0;C<c.length;C++){const I=c[C],z=I.tileID.canonical.key;b[z]||(b[z]=!0,I.querySourceFeatures(g,a))}return g}function qi(m,a){const c=m.tileID,g=a.tileID;return c.overscaledZ-g.overscaledZ||c.canonical.y-g.canonical.y||c.wrap-g.wrap||c.canonical.x-g.canonical.x}function Ki(m,a){const c={};if(!a)return c;for(const g of m){const b=g.layerIds.map(C=>a.getLayer(C)).filter(Boolean);if(b.length!==0){g.layers=b,g.stateDependentLayerIds&&(g.stateDependentLayers=g.stateDependentLayerIds.map(C=>b.filter(I=>I.id===C)[0]));for(const C of b)c[C.fqid]=g}}return c}const Ui=32,Wi=33,yi=new Uint16Array(8184);for(let m=0;m<2046;m++){let a=m+2,c=0,g=0,b=0,C=0,I=0,z=0;for(1&a?b=C=I=Ui:c=g=z=Ui;(a>>=1)>1;){const K=c+b>>1,G=g+C>>1;1&a?(b=c,C=g,c=I,g=z):(c=b,g=C,b=I,C=z),I=K,z=G}const U=4*m;yi[U+0]=c,yi[U+1]=g,yi[U+2]=b,yi[U+3]=C}const ki=new Uint16Array(2178),ar=new Uint8Array(1089),Xn=new Uint16Array(1089);function $r(m){return m===0?-.03125:m===32?.03125:0}const Jr={type:2,extent:i.ab,loadGeometry:()=>[[new i.P(0,0),new i.P(i.ab+1,0),new i.P(i.ab+1,i.ab+1),new i.P(0,i.ab+1),new i.P(0,0)]]};class Un{constructor(a,c,g,b,C){this.tileID=a,this.uid=i.aQ(),this.uses=0,this.tileSize=c,this.tileZoom=g,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=C,b&&b.style&&(this._lastUpdatedBrightness=b.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",b&&b.transform&&(this.projection=b.transform.projection)}registerFadeDuration(a){const c=a+this.timeAdded;c<i.q.now()||this.fadeEndTime&&c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=i.aL(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(a,c,g){if(this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=Ki(a.buckets,c.style),this.hasSymbolBuckets=!1;for(const b in this.buckets){const C=this.buckets[b];if(C instanceof i.aS){if(this.hasSymbolBuckets=!0,!g)break;C.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const b in this.buckets){const C=this.buckets[b];if(C instanceof i.aS&&C.hasRTLText){this.hasRTLText=!0,i.aT();break}}this.queryPadding=0;for(const b in this.buckets){const C=this.buckets[b],I=c.style.getOwnLayer(b);if(!I)continue;const z=I.queryRadius(C);this.queryPadding=Math.max(this.queryPadding,z)}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage),a.lineAtlas&&(this.lineAtlas=a.lineAtlas),this._lastUpdatedBrightness=a.brightness}else this.collisionBoxArray=new i.aR}unloadVectorData(){if(this.hasData()){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}loadModelData(a,c,g){a&&(a.resourceTiming&&(this.resourceTiming=a.resourceTiming),this.buckets={...this.buckets,...Ki(a.buckets,c.style)},a.featureIndex&&(this.latestFeatureIndex=a.featureIndex))}getBucket(a){return this.buckets[a.fqid]}upload(a){for(const b in this.buckets){const C=this.buckets[b];C.uploadPending()&&C.upload(a)}const c=a.gl,g=this.imageAtlas;if(g&&!g.uploaded){const b=!!Object.keys(g.patternPositions).length;this.imageAtlasTexture=new i.T(a,g.image,c.RGBA8,{useMipmap:b}),this.imageAtlas.uploaded=!0}this.glyphAtlasImage&&(this.glyphAtlasTexture=new i.T(a,this.glyphAtlasImage,c.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new i.T(a,this.lineAtlas.image,c.R8),this.lineAtlas.uploaded=!0)}prepare(a,c,g){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture,g),!c||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const b=c.style.getBrightness();(this._lastUpdatedBrightness||b)&&(this._lastUpdatedBrightness&&b&&Math.abs(this._lastUpdatedBrightness-b)<.001||(this._lastUpdatedBrightness=b,this.updateBuckets(c)))}queryRenderedFeatures(a,c,g,b,C,I,z,U,K){return this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)?this.latestFeatureIndex.query({tileResult:g,pixelPosMatrix:U,transform:z,filter:b,layers:C,availableImages:I,tileTransform:this.tileTransform},a,c):{}}querySourceFeatures(a,c){const g=this.latestFeatureIndex;if(!g||!g.rawTileData)return;const b=g.loadVTLayers(),C=c?c.sourceLayer:"",I=b._geojsonTileLayer||b[C];if(!I)return;const z=i.aU(c&&c.filter),{z:U,x:K,y:G}=this.tileID.canonical,Q={z:U,x:K,y:G};for(let ne=0;ne<I.length;ne++){const le=I.feature(ne);if(z.needGeometry){const Te=i.aV(le,!0);if(!z.filter(new i.a3(this.tileID.overscaledZ),Te,this.tileID.canonical))continue}else if(!z.filter(new i.a3(this.tileID.overscaledZ),le))continue;const be=g.getId(le,C),xe=new i.aW(le,U,K,G,be);xe.tile=Q,a.push(xe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){const c=this.expirationTime;if(a.cacheControl){const g=i.aX(a.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const g=Date.now();let b=!1;if(this.expirationTime>g)b=!1;else if(c)if(this.expirationTime<c)b=!0;else{const C=this.expirationTime-c;C?this.expirationTime=g+Math.max(C,3e4):b=!0}else b=!0;b?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}refreshFeatureState(a){this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)&&a&&this.updateBuckets(a)}updateBuckets(a){if(!this.latestFeatureIndex)return;const c=this.latestFeatureIndex.loadVTLayers(),g=a.style.listImages(),b=a.style.getBrightness();for(const C in this.buckets){if(!a.style.hasLayer(C))continue;const I=this.buckets[C],z=I.layers[0],U=z.sourceLayer||"_geojsonTileLayer",K=c[U],G=a.style.getSourceCache(z.source,z.scope);let Q={};G&&(Q=G._state.getState(U,void 0)),I.update(Q,K,g,this.imageAtlas&&this.imageAtlas.patternPositions||{},b),(I instanceof i.aY||I instanceof i.aZ)&&a._terrain&&a._terrain.enabled&&G&&I.programConfigurations.needsUpload&&a._terrain._clearRenderCacheForTile(G.id,this.tileID);const ne=a&&a.style&&a.style.getOwnLayer(C);ne&&(this.queryPadding=Math.max(this.queryPadding,ne.queryRadius(I)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<i.q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=i.q.now()+a}setTexture(a,c){const g=c.context,b=g.gl;this.texture=this.texture||c.getTileTexture(a.width),this.texture&&this.texture instanceof i.T?this.texture.update(a):(this.texture=new i.T(g,a,b.RGBA8,{useMipmap:!0}),this.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE))}setDependencies(a,c){const g={};for(const b of c)g[b]=!0;this.dependencies[a]=g}hasDependency(a,c){for(const g of a){const b=this.dependencies[g];if(b){for(const C of c)if(b[C])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(a,c){if(!c||c.name==="mercator"||this._tileDebugBuffer)return;const g=i.a_(Jr,this.tileID.canonical,this.tileTransform)[0],b=new i.a$,C=new i.b0;for(let I=0;I<g.length;I++){const{x:z,y:U}=g[I];b.emplaceBack(z,U),C.emplaceBack(I)}C.emplaceBack(0),this._tileDebugIndexBuffer=a.createIndexBuffer(C),this._tileDebugBuffer=a.createVertexBuffer(b,i.b1.members),this._tileDebugSegments=i.b2.simpleSegment(0,0,b.length,C.length)}_makeTileBoundsBuffers(a,c){if(this._tileBoundsBuffer||!c||c.name==="mercator")return;const g=i.a_(Jr,this.tileID.canonical,this.tileTransform)[0];let b,C;if(this.isRaster){const I=function(z,U){const K=i.aL(z,U),G=Math.pow(2,z.z);for(let Te=0;Te<Wi;Te++)for(let Ee=0;Ee<Wi;Ee++){const Oe=i.aM((z.x+(Ee+$r(Ee))/Ui)/G),Ve=i.aN((z.y+(Te+$r(Te))/Ui)/G),He=U.project(Oe,Ve),qe=Te*Wi+Ee;ki[2*qe+0]=Math.round((He.x*K.scale-K.x)*i.ab),ki[2*qe+1]=Math.round((He.y*K.scale-K.y)*i.ab)}ar.fill(0),Xn.fill(0);for(let Te=2045;Te>=0;Te--){const Ee=4*Te,Oe=yi[Ee+0],Ve=yi[Ee+1],He=yi[Ee+2],qe=yi[Ee+3],Xe=Oe+He>>1,Ke=Ve+qe>>1,Ye=Xe+Ke-Ve,rt=Ke+Oe-Xe,vt=Ve*Wi+Oe,st=qe*Wi+He,it=Ke*Wi+Xe,zt=Math.hypot((ki[2*vt+0]+ki[2*st+0])/2-ki[2*it+0],(ki[2*vt+1]+ki[2*st+1])/2-ki[2*it+1])>=16;ar[it]=ar[it]||(zt?1:0),Te<1022&&(ar[it]=ar[it]||ar[(Ve+rt>>1)*Wi+(Oe+Ye>>1)]||ar[(qe+rt>>1)*Wi+(He+Ye>>1)])}const Q=new i.aO,ne=new i.aP;let le=0;function be(Te,Ee){const Oe=Ee*Wi+Te;return Xn[Oe]===0&&(Q.emplaceBack(ki[2*Oe+0],ki[2*Oe+1],Te*i.ab/Ui,Ee*i.ab/Ui),Xn[Oe]=++le),Xn[Oe]-1}function xe(Te,Ee,Oe,Ve,He,qe){const Xe=Te+Oe>>1,Ke=Ee+Ve>>1;if(Math.abs(Te-He)+Math.abs(Ee-qe)>1&&ar[Ke*Wi+Xe])xe(He,qe,Te,Ee,Xe,Ke),xe(Oe,Ve,He,qe,Xe,Ke);else{const Ye=be(Te,Ee),rt=be(Oe,Ve),vt=be(He,qe);ne.emplaceBack(Ye,rt,vt)}}return xe(0,0,Ui,Ui,Ui,0),xe(Ui,Ui,0,0,0,Ui),{vertices:Q,indices:ne}}(this.tileID.canonical,c);b=I.vertices,C=I.indices}else{b=new i.aO,C=new i.aP;for(const{x:z,y:U}of g)b.emplaceBack(z,U,0,0);const I=i.b3(b.int16,void 0,4);for(let z=0;z<I.length;z+=3)C.emplaceBack(I[z],I[z+1],I[z+2])}this._tileBoundsBuffer=a.createVertexBuffer(b,i.b4.members),this._tileBoundsIndexBuffer=a.createIndexBuffer(C),this._tileBoundsSegments=i.b2.simpleSegment(0,0,b.length,C.length)}_makeGlobeTileDebugBuffers(a,c){const g=c.projection;if(!g||g.name!=="globe"||c.freezeTileCoverage)return;const b=this.tileID.canonical,C=i.b5(b,c),I=i.b6(C),z=i.a9(c.zoom);let U;z>0&&(U=i.a6.mat4.invert(new Float64Array(16),c.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(a,b,c,I,U,z),this._makeGlobeTileDebugTextBuffer(a,b,c,I,U,z)}_globePoint(a,c,g,b,C,I,z){let U=i.b7(a,c,g);if(I){const K=1<<g.z,G=i.am(b.center.lng),Q=i.at(b.center.lat),ne=(g.x+.5)/K-G;let le=0;ne>.5?le=-1:ne<-.5&&(le=1);let be=(a/i.ab+g.x)/K+le,xe=(c/i.ab+g.y)/K;be=(be-G)*b._pixelsPerMercatorPixel+G,xe=(xe-Q)*b._pixelsPerMercatorPixel+Q;const Te=[be*b.worldSize,xe*b.worldSize,0];i.a6.vec3.transformMat4(Te,Te,I),U=i.b8(U,Te,z)}return i.a6.vec3.transformMat4(U,U,C)}_makeGlobeTileDebugBorderBuffer(a,c,g,b,C,I){const z=new i.a$,U=new i.b0,K=new i.b9,G=(ne,le,be,xe,Te)=>{const Ee=(be-ne)/(Te-1),Oe=(xe-le)/(Te-1),Ve=z.length;for(let He=0;He<Te;He++){const qe=ne+He*Ee,Xe=le+He*Oe;z.emplaceBack(qe,Xe);const Ke=this._globePoint(qe,Xe,c,g,b,C,I);K.emplaceBack(Ke[0],Ke[1],Ke[2]),U.emplaceBack(Ve+He)}},Q=i.ab;G(0,0,Q,0,16),G(Q,0,Q,Q,16),G(Q,Q,0,Q,16),G(0,Q,0,0,16),this._tileDebugIndexBuffer=a.createIndexBuffer(U),this._tileDebugBuffer=a.createVertexBuffer(z,i.b1.members),this._globeTileDebugBorderBuffer=a.createVertexBuffer(K,i.ba.members),this._tileDebugSegments=i.b2.simpleSegment(0,0,z.length,U.length)}_makeGlobeTileDebugTextBuffer(a,c,g,b,C,I){const z=i.ab/4,U=new i.a$,K=new i.aP,G=new i.b9,Q=25;K.reserve(32),U.reserve(Q),G.reserve(Q);const ne=(le,be)=>Q*le+be;for(let le=0;le<Q;le++){const be=le*z;for(let xe=0;xe<Q;xe++){const Te=xe*z;U.emplaceBack(Te,be);const Ee=this._globePoint(Te,be,c,g,b,C,I);G.emplaceBack(Ee[0],Ee[1],Ee[2])}}for(let le=0;le<4;le++)for(let be=0;be<4;be++){const xe=ne(le,be),Te=ne(le,be+1),Ee=ne(le+1,be),Oe=ne(le+1,be+1);K.emplaceBack(xe,Te,Ee),K.emplaceBack(Ee,Te,Oe)}this._tileDebugTextIndexBuffer=a.createIndexBuffer(K),this._tileDebugTextBuffer=a.createVertexBuffer(U,i.b1.members),this._globeTileDebugTextBuffer=a.createVertexBuffer(G,i.ba.members),this._tileDebugTextSegments=i.b2.simpleSegment(0,0,Q,32)}destroy(a=!1){for(const c in this.buckets)this.buckets[c].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!a&&this.texture&&this.texture instanceof i.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}i.bb.setPbf(i.bc);class sr extends Un{constructor(a,c,g,b,C){super(a,c,g,b,C),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}setTexture(a,c){const g=c.context,b=g.gl;this.texture=this.texture||c.getTileTexture(a.width),this.texture&&this.texture instanceof i.T?this.texture.update(a,{premultiply:!1}):this.texture=new i.T(g,a,b.RGBA8,{premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(a=16384,c){const g=this._mrt=new i.bb(30),b=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(a-1)}});return this.entireBuffer=null,this.request=i.bd(b,(C,I,z,U)=>{if(C)c(C);else try{const K=g.getHeaderLength(I);if(K>a)return void(this.request=this.fetchHeader(K,c));g.parseHeader(I),this._isHeaderLoaded=!0;let G=0;for(const Q of Object.values(g.layers))G=Math.max(G,Q.dataIndex[Q.dataIndex.length-1].last_byte);I.byteLength>=G&&(this.entireBuffer=I),c(null,this.entireBuffer||I,z,U)}catch(K){c(K)}}),this.request}fetchBand(a,c,g){const b=this._mrt;if(!this._isHeaderLoaded||!b)return void g(new Error("Tile header is not ready"));const C=this.actor;if(!C)return void g(new Error("Can't fetch tile band without an actor"));let I;const z=(Q,ne)=>{I.complete(Q,ne),Q?g(Q):(this.updateTextureDescriptor(a,c),g(null,this.textureDescriptor&&this.textureDescriptor.img))},U=(Q,ne)=>{if(Q)return g(Q);const le=C.send("decodeRasterArray",{buffer:ne,task:I},z,void 0,!0);this._workQueue.push(()=>{le&&le.cancel(),I.cancel()})},K=b.getLayer(a);if(!K)return void g(new Error(`Unknown sourceLayer "${a}"`));if(K.hasDataForBand(c))return this.updateTextureDescriptor(a,c),void g(null,this.textureDescriptor?this.textureDescriptor.img:null);const G=K.getDataRange([c]);if(I=b.createDecodingTask(G),!I||I.tasks.length)if(this.flushQueues(),this.entireBuffer)U(null,this.entireBuffer.slice(G.firstByte,G.lastByte+1));else{const Q=Object.assign({},this.requestParams,{headers:{Range:`bytes=${G.firstByte}-${G.lastByte}`}}),ne=i.bd(Q,U);this._fetchQueue.push(()=>{ne.cancel(),I.cancel()})}else g(null)}updateNeeded(a,c){return(!this.textureDescriptor||this.textureDescriptor.band!==c||this.textureDescriptor.layer!==a)&&this.state!=="errored"}updateTextureDescriptor(a,c){if(!this._mrt)return;const g=this._mrt.getLayer(a);if(!g||!g.hasBand(c)||!g.hasDataForBand(c))return;const{bytes:b,tileSize:C,buffer:I,offset:z,scale:U}=g.getBandView(c),K=C+2*I,G={data:b,width:K,height:K},Q=this.texture;Q&&Q instanceof i.T&&Q.update(G,{premultiply:!1}),this.textureDescriptor={layer:a,band:c,img:G,buffer:I,offset:z,tileSize:C,format:g.pixelFormat,mix:[U,256*U,65536*U,16777216*U]}}}class di{constructor(a,c){this.max=a,this.onRemove=c,this.reset()}reset(){for(const a in this.data)for(const c of this.data[a])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(a,c,g){const b=a.wrapped().key;this.data[b]===void 0&&(this.data[b]=[]);const C={value:c,timeout:void 0};if(g!==void 0&&(C.timeout=setTimeout(()=>{this.remove(a,C)},g)),this.data[b].push(C),this.order.push(b),this.order.length>this.max){const I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const c=this.data[a].shift();return c.timeout&&clearTimeout(c.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),c.value}getByKey(a){const c=this.data[a];return c?c[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,c){if(!this.has(a))return this;const g=a.wrapped().key,b=c===void 0?0:this.data[g].indexOf(c),C=this.data[g][b];return this.data[g].splice(b,1),C.timeout&&clearTimeout(C.timeout),this.data[g].length===0&&delete this.data[g],this.onRemove(C.value),this.order.splice(this.order.indexOf(g),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(a){const c=[];for(const g in this.data)for(const b of this.data[g])a(b.value)||c.push(b);for(const g of c)this.remove(g.value.tileID,g)}}class Pi{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,c,g){const b=String(c);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][b]=this.stateChanges[a][b]||{},i.l(this.stateChanges[a][b],g),this.deletedStates[a]===null){this.deletedStates[a]={};for(const C in this.state[a])C!==b&&(this.deletedStates[a][C]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][b]===null){this.deletedStates[a][b]={};for(const C in this.state[a][b])g[C]||(this.deletedStates[a][b][C]=null)}else for(const C in g)this.deletedStates[a]&&this.deletedStates[a][b]&&this.deletedStates[a][b][C]===null&&delete this.deletedStates[a][b][C]}removeFeatureState(a,c,g){if(this.deletedStates[a]===null)return;const b=String(c);if(this.deletedStates[a]=this.deletedStates[a]||{},g&&c!==void 0)this.deletedStates[a][b]!==null&&(this.deletedStates[a][b]=this.deletedStates[a][b]||{},this.deletedStates[a][b][g]=null);else if(c!==void 0)if(this.stateChanges[a]&&this.stateChanges[a][b])for(g in this.deletedStates[a][b]={},this.stateChanges[a][b])this.deletedStates[a][b][g]=null;else this.deletedStates[a][b]=null;else this.deletedStates[a]=null}getState(a,c){const g=this.state[a]||{},b=this.stateChanges[a]||{},C=this.deletedStates[a];if(C===null)return{};if(c!==void 0){const z=String(c),U=i.l({},g[z],b[z]);if(C){const K=C[c];if(K===null)return{};for(const G in K)delete U[G]}return U}const I=i.l({},g,b);if(C)for(const z in C)delete I[z];return I}initializeTileState(a,c){a.refreshFeatureState(c)}coalesceChanges(a,c){const g={};for(const b in this.stateChanges){this.state[b]=this.state[b]||{};const C={};for(const I in this.stateChanges[b])this.state[b][I]||(this.state[b][I]={}),i.l(this.state[b][I],this.stateChanges[b][I]),C[I]=this.state[b][I];g[b]=C}for(const b in this.deletedStates){this.state[b]=this.state[b]||{};const C={};if(this.deletedStates[b]===null)for(const I in this.state[b])C[I]={},this.state[b][I]={};else for(const I in this.deletedStates[b]){if(this.deletedStates[b][I]===null)this.state[b][I]={};else if(this.state[b][I])for(const z of Object.keys(this.deletedStates[b][I]))delete this.state[b][I][z];C[I]=this.state[b][I]}g[b]=g[b]||{},i.l(g[b],C)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(const b in a)a[b].refreshFeatureState(c)}}class mi extends i.E{constructor(a,c,g){super(),this.id=a,this._onlySymbols=g,c.on("data",b=>{b.dataType==="source"&&b.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&b.dataType==="source"&&b.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),c.on("error",()=>{this._sourceErrored=!0}),this._source=c,this._tiles={},this._cache=new di(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=c.minTileCacheSize,this._maxTileCacheSize=c.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new Pi,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(a){this.map=a,this._minTileCacheSize=this._minTileCacheSize===void 0&&a?a._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&a?a._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const a in this._tiles){const c=this._tiles[a];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(a,c){return a.isSymbolTile=this._onlySymbols,a.isExtraShadowCaster=this._shadowCasterTiles[a.tileID.key],this._source.loadTile(a,c)}_unloadTile(a){if(this._source.unloadTile)return this._source.unloadTile(a)}_abortTile(a){if(this._source.abortTile)return this._source.abortTile(a)}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const g=this._tiles[c];g.upload(a),g.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return i.be(this._tiles).map(a=>a.tileID).sort(Gi).map(a=>a.key)}getRenderableIds(a,c){const g=[];for(const b in this._tiles)this._isIdRenderable(+b,a,c)&&g.push(this._tiles[b]);return a?g.sort((b,C)=>{const I=b.tileID,z=C.tileID,U=new i.P(I.canonical.x,I.canonical.y)._rotate(this.transform.angle),K=new i.P(z.canonical.x,z.canonical.y)._rotate(this.transform.angle);return I.overscaledZ-z.overscaledZ||K.y-U.y||K.x-U.x}).map(b=>b.tileID.key):g.map(b=>b.tileID).sort(Gi).map(b=>b.key)}hasRenderableParent(a){const c=this.findLoadedParent(a,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(a,c,g){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(c||!this._tiles[a].holdingForFade())&&(g||!this._shadowCasterTiles[a])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const a in this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(+a,"reloading")}}_reloadTile(a,c){const g=this._tiles[a];g&&(g.state!=="loading"&&(g.state=c),this._loadTile(g,this._tileLoaded.bind(this,g,a,c)))}_tileLoaded(a,c,g,b){if(b)if(a.state="errored",b.status!==404)this._source.fire(new i.t(b,{tile:a}));else{if(this._source.fire(new i.x("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:a})),!(a.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const C=this.map.painter.terrain;this.update(this.transform,C.getScaledDemTileSize(),!0),C.resetTileLookupCache(this.id)}else this.update(this.transform)}else a.timeAdded=i.q.now(),g==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(c,a),this._source.type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),this._source.fire(new i.x("data",{dataType:"source",tile:a,coord:a.tileID,sourceCacheId:this.id}))}_backfillDEM(a){const c=this.getRenderableIds();for(let b=0;b<c.length;b++){const C=c[b];if(a.neighboringTiles&&a.neighboringTiles[C]){const I=this.getTileByID(C);g(a,I),g(I,a)}}function g(b,C){if(!b.dem||b.dem.borderReady)return;b.needsHillshadePrepare=!0,b.needsDEMTextureUpload=!0;let I=C.tileID.canonical.x-b.tileID.canonical.x;const z=C.tileID.canonical.y-b.tileID.canonical.y,U=Math.pow(2,b.tileID.canonical.z),K=C.tileID.key;I===0&&z===0||Math.abs(z)>1||(Math.abs(I)>1&&(Math.abs(I+U)===1?I+=U:Math.abs(I-U)===1&&(I-=U)),C.dem&&b.dem&&(b.dem.backfillBorder(C.dem,I,z),b.neighboringTiles&&b.neighboringTiles[K]&&(b.neighboringTiles[K].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,c,g,b){for(const C in this._tiles){let I=this._tiles[C];if(b[C]||!I.hasData()||I.tileID.overscaledZ<=c||I.tileID.overscaledZ>g)continue;let z=I.tileID;for(;I&&I.tileID.overscaledZ>c+1;){const K=I.tileID.scaledTo(I.tileID.overscaledZ-1);I=this._tiles[K.key],I&&I.hasData()&&(z=K)}let U=z;for(;U.overscaledZ>c;)if(U=U.scaledTo(U.overscaledZ-1),a[U.key]){b[z.key]=z;break}}}findLoadedParent(a,c){if(a.key in this._loadedParentTiles){const g=this._loadedParentTiles[a.key];return g&&g.tileID.overscaledZ>=c?g:null}for(let g=a.overscaledZ-1;g>=c;g--){const b=a.scaledTo(g),C=this._getLoadedTile(b);if(C)return C}}_getLoadedTile(a){const c=this._tiles[a.key];return c&&c.hasData()?c:this._cache.getByKey(this._source.reparseOverscaled?a.wrapped().key:a.canonical.key)}updateCacheSize(a,c){c=c||this._source.tileSize;const g=Math.ceil(a.width/c)+1,b=Math.ceil(a.height/c)+1,C=Math.floor(g*b*5),I=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,C):C,z=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,I):I;this._cache.setMaxSize(z)}handleWrapJump(a){const c=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,c){const g={};for(const b in this._tiles){const C=this._tiles[b];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+c),g[C.tileID.key]=C}this._tiles=g;for(const b in this._timers)clearTimeout(this._timers[b]),delete this._timers[b];for(const b in this._tiles)this._setTileReloadTimer(+b,this._tiles[b])}}update(a,c,g,b){if(this.transform=a,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!g)return;this.updateCacheSize(a,c),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const C=this._source.type==="batched-model";let I,z=this._source.maxzoom;const U=this.map&&this.map.painter?this.map.painter._terrain:null;if(U&&U.sourceCache===this&&U.attenuationRange()){const Q=U.attenuationRange()[0],ne=Math.floor(Q)-Math.log2(U.getDemUpscale());z>ne&&(z=ne)}if(this.used||this.usedForTerrain){if(this._source.tileID)I=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(Q=>new i.aA(Q.canonical.z,Q.wrap,Q.canonical.z,Q.canonical.x,Q.canonical.y));else if(this.tileCoverLift!==0){const Q=a.clone();Q.tileCoverLift=this.tileCoverLift,I=Q.coveringTiles({tileSize:c||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:z,roundZoom:this._source.roundZoom&&!g,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:C}),this._source.minzoom<=1&&a.projection.name==="globe"&&(I.push(new i.aA(1,0,1,0,0)),I.push(new i.aA(1,0,1,1,0)),I.push(new i.aA(1,0,1,0,1)),I.push(new i.aA(1,0,1,1,1)))}else if(I=a.coveringTiles({tileSize:c||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:z,roundZoom:this._source.roundZoom&&!g,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:C}),this._source.hasTile){const Q=this._source.hasTile.bind(this._source);I=I.filter(ne=>Q(ne))}}else I=[];if(I.length>0&&this.castsShadows&&b&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!Xi(this._source.type)){const Q=a.coveringZoomLevel({tileSize:c||this._source.tileSize,roundZoom:this._source.roundZoom&&!g}),ne=Math.min(Q,this._source.maxzoom);if(C){const le=a.extendTileCover(I,ne);for(const be of le)I.push(be)}else{const le=a.extendTileCover(I,ne,b);for(const be of le)this._shadowCasterTiles[be.key]=!0,I.push(be)}}const K=this._updateRetainedTiles(I);if(Xi(this._source.type)&&I.length!==0){const Q={},ne={},le=Object.keys(K);for(const xe of le){const Te=K[xe],Ee=this._tiles[xe];if(!Ee||Ee.fadeEndTime&&Ee.fadeEndTime<=i.q.now())continue;const Oe=this.findLoadedParent(Te,Math.max(Te.overscaledZ-mi.maxOverzooming,this._source.minzoom));Oe&&(this._addTile(Oe.tileID),Q[Oe.tileID.key]=Oe.tileID),ne[xe]=Te}const be=I[I.length-1].overscaledZ;for(const xe in this._tiles){const Te=this._tiles[xe];if(K[xe]||!Te.hasData())continue;let Ee=Te.tileID;for(;Ee.overscaledZ>be;){Ee=Ee.scaledTo(Ee.overscaledZ-1);const Oe=this._tiles[Ee.key];if(Oe&&Oe.hasData()&&ne[Ee.key]){K[xe]=Te.tileID;break}}}for(const xe in Q)K[xe]||(this._coveredTiles[xe]=!0,K[xe]=Q[xe])}for(const Q in K)this._tiles[Q].clearFadeHold();const G=i.bf(this._tiles,K);for(const Q of G){const ne=this._tiles[Q];ne.hasSymbolBuckets&&!ne.holdingForFade()?ne.setHoldDuration(this.map._fadeDuration):ne.hasSymbolBuckets&&!ne.symbolFadeFinished()||this._removeTile(+Q)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(+a)}_updateRetainedTiles(a){const c={};if(a.length===0)return c;const g={},b=a.reduce((K,G)=>Math.min(K,G.overscaledZ),1/0),C=a[0].overscaledZ,I=Math.max(C-mi.maxOverzooming,this._source.minzoom),z=Math.max(C+mi.maxUnderzooming,this._source.minzoom),U={};for(const K of a){const G=this._addTile(K);c[K.key]=K,G.hasData()||b<this._source.maxzoom&&(U[K.key]=K)}this._retainLoadedChildren(U,b,z,c);for(const K of a){let G=this._tiles[K.key];if(G.hasData())continue;if(K.canonical.z>=this._source.maxzoom){const ne=K.children(this._source.maxzoom)[0],le=this.getTile(ne);if(le&&le.hasData()){c[ne.key]=ne;continue}}else{const ne=K.children(this._source.maxzoom);if(c[ne[0].key]&&c[ne[1].key]&&c[ne[2].key]&&c[ne[3].key])continue}let Q=G.wasRequested();for(let ne=K.overscaledZ-1;ne>=I;--ne){const le=K.scaledTo(ne);if(g[le.key]||(g[le.key]=!0,G=this.getTile(le),!G&&Q&&(G=this._addTile(le)),G&&(c[le.key]=le,Q=G.wasRequested(),G.hasData())))break}}return c}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const a in this._tiles){const c=[];let g,b=this._tiles[a].tileID;for(;b.overscaledZ>0;){if(b.key in this._loadedParentTiles){g=this._loadedParentTiles[b.key];break}c.push(b.key);const C=b.scaledTo(b.overscaledZ-1);if(g=this._getLoadedTile(C),g)break;b=C}for(const C of c)this._loadedParentTiles[C]=g}}_addTile(a){let c=this._tiles[a.key];if(c)return c.isExtraShadowCaster!==!0||this._shadowCasterTiles[a.key]||this._reloadTile(a.key,"reloading"),c;c=this._cache.getAndRemove(a),c&&(this._setTileReloadTimer(a.key,c),c.tileID=a,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,c)));const g=!!c;if(!g){const b=this.map?this.map.painter:null,C=this._source.tileSize*a.overscaleFactor();c=this._source.type==="raster-array"?new sr(a,C,this.transform.tileZoom,b,this._isRaster):new Un(a,C,this.transform.tileZoom,b,this._isRaster),this._loadTile(c,this._tileLoaded.bind(this,c,a.key,c.state))}return c?(c.uses++,this._tiles[a.key]=c,g||this._source.fire(new i.x("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c):null}_setTileReloadTimer(a,c){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);const g=c.getExpiryTimeout();g&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},g))}_removeTile(a){const c=this._tiles[a];c&&(c.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),c.uses>0||(c.hasData()&&c.state!=="reloading"||c.state==="empty"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a in this._tiles)this._removeTile(+a);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(a,c,g){const b=[],C=this.transform;if(!C)return b;const I=C.projection.name==="globe",z=i.am(C.center.lng);for(const U in this._tiles){const K=this._tiles[U];if(g&&K.clearQueryDebugViz(),K.holdingForFade())continue;let G;if(I){const Q=K.tileID.canonical;if(Q.z===0){const ne=[Math.abs(i.ap(z,...yo(Q,-1))-z),Math.abs(i.ap(z,...yo(Q,1))-z)];G=[0,2*ne.indexOf(Math.min(...ne))-1]}else{const ne=[Math.abs(i.ap(z,...yo(Q,-1))-z),Math.abs(i.ap(z,...yo(Q,0))-z),Math.abs(i.ap(z,...yo(Q,1))-z)];G=[ne.indexOf(Math.min(...ne))-1]}}else G=[0];for(const Q of G){const ne=a.containsTile(K,C,c,Q);ne&&b.push(ne)}}return b}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(a){return this._getRenderableCoordinates(a)}_getRenderableCoordinates(a,c){const g=this.getRenderableIds(a,c).map(C=>this._tiles[C].tileID),b=this.transform.projection.name==="globe";for(const C of g)C.projMatrix=this.transform.calculateProjMatrix(C.toUnwrapped()),C.expandedProjMatrix=b?this.transform.calculateProjMatrix(C.toUnwrapped(),!1,!0):C.projMatrix;return g}sortCoordinatesByDistance(a){const c=a.slice(),g=this.transform._camera.position,b=this.transform._camera.forward(),C={};for(const I of c){const z=1/(1<<I.canonical.z);C[I.key]=((I.canonical.x+.5)*z+I.wrap-g[0])*b[0]+((I.canonical.y+.5)*z-g[1])*b[1]-g[2]*b[2]}return c.sort((I,z)=>C[I.key]-C[z.key]),c}hasTransition(){if(this._source.hasTransition())return!0;if(Xi(this._source.type))for(const a in this._tiles){const c=this._tiles[a];if(c.fadeEndTime!==void 0&&c.fadeEndTime>=i.q.now())return!0}return!1}setFeatureState(a,c,g){this._state.updateState(a=a||"_geojsonTileLayer",c,g)}removeFeatureState(a,c,g){this._state.removeFeatureState(a=a||"_geojsonTileLayer",c,g)}getFeatureState(a,c){return this._state.getState(a=a||"_geojsonTileLayer",c)}setDependencies(a,c,g){const b=this._tiles[a];b&&b.setDependencies(c,g)}reloadTilesForDependencies(a,c){for(const g in this._tiles)this._tiles[g].hasDependency(a,c)&&this._reloadTile(+g,"reloading");this._cache.filter(g=>!g.hasDependency(a,c))}_preloadTiles(a,c){if(!this._sourceLoaded){const U=()=>{this._sourceLoaded&&(this._source.off("data",U),this._preloadTiles(a,c))};return void this._source.on("data",U)}const g=new Map,b=Array.isArray(a)?a:[a],C=this.map.painter.terrain,I=this.usedForTerrain&&C?C.getScaledDemTileSize():this._source.tileSize;for(const U of b){const K=U.coveringTiles({tileSize:I,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const G of K)g.set(G.key,G);this.usedForTerrain&&U.updateElevation(!1)}const z=Array.from(g.values());i.bg(z,(U,K)=>{const G=new Un(U,this._source.tileSize*U.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(G,Q=>{this._source.type==="raster-dem"&&G.dem&&this._backfillDEM(G),K(Q,G)})},c)}}function Gi(m,a){const c=Math.abs(2*m.wrap)-+(m.wrap<0),g=Math.abs(2*a.wrap)-+(a.wrap<0);return m.overscaledZ-a.overscaledZ||g-c||a.canonical.y-m.canonical.y||a.canonical.x-m.canonical.x}function Xi(m){return m==="raster"||m==="image"||m==="video"||m==="custom"}function yo(m,a){const c=1<<m.z;return[m.x/c+a,(m.x+1)/c+a]}mi.maxOverzooming=10,mi.maxUnderzooming=3;class Gn{constructor(a){this.style=a,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const a=!1,c=!1;for(const g in this.style._mergedLayers){const b=this.style._mergedLayers[g];if(b.type==="fill-extrusion")this.layers.push({layer:b,visible:a,visibilityChanged:c});else if(b.type==="model"){const C=this.style.getLayerSource(b);C&&C.type==="batched-model"&&this.layers.push({layer:b,visible:a,visibilityChanged:c})}}}onNewFrame(a){this.layersGotHidden=!1;for(const c of this.layers){const g=c.layer;let b=!1;g.type==="fill-extrusion"?b=!g.isHidden(a)&&g.paint.get("fill-extrusion-opacity")>0:g.type==="model"&&(b=!g.isHidden(a)&&g.paint.get("model-opacity")>0),this.layersGotHidden=this.layersGotHidden||!b&&c.visible,c.visible=b}}updateZOffset(a,c){this.currentBuildingBuckets=[];for(const b of this.layers){const C=b.layer,I=this.style.getLayerSourceCache(C);let z=1;C.type==="fill-extrusion"&&(z=b.visible?C.paint.get("fill-extrusion-vertical-scale"):0);let U=I?I.getTile(c):null;if(!U&&I&&c.canonical.z>I.getSource().minzoom){let K=c.scaledTo(Math.min(I.getSource().maxzoom,c.overscaledZ-1));for(;K.overscaledZ>=I.getSource().minzoom&&(U=I.getTile(K),!U&&K.overscaledZ!==0);)K=K.scaledTo(K.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:U?U.getBucket(C):null,tileID:U?U.tileID:c,verticalScale:z})}a.hasAnyZOffset=!1;let g=!1;for(let b=0;b<a.symbolInstances.length;b++){const C=a.symbolInstances.get(b),I=C.zOffset,z=this._getHeightAtTileOffset(c,C.tileAnchorX,C.tileAnchorY);C.zOffset=z!==Number.NEGATIVE_INFINITY?z:I,g||I===C.zOffset||(g=!0),a.hasAnyZOffset||C.zOffset===0||(a.hasAnyZOffset=!0)}g&&(a.zOffsetBuffersNeedUpload=!0,a.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(a,c,g,b){let C=c,I=g;if(a.canonical.z!==b.canonical.z){const z=b.canonical,U=1/(1<<a.canonical.z-z.z);C=(c+a.canonical.x*i.ab)*U-z.x*i.ab|0,I=(g+a.canonical.y*i.ab)*U-z.y*i.ab|0}return{tileX:C,tileY:I}}_getHeightAtTileOffset(a,c,g){let b,C;for(let I=0;I<this.layers.length;++I){if(this.layers[I].layer.type!=="fill-extrusion")continue;const{bucket:z,tileID:U,verticalScale:K}=this.currentBuildingBuckets[I];if(!z)continue;const{tileX:G,tileY:Q}=this._mapCoordToOverlappingTile(a,c,g,U),ne=z.getHeightAtTileCoord(G,Q);ne&&ne.height!==void 0&&(ne.hidden?b=ne.height:C=Math.max(ne.height*K,C||0))}if(C!==void 0)return C;for(let I=0;I<this.layers.length;++I){const z=this.layers[I];if(z.layer.type!=="model"||!z.visible)continue;const{bucket:U,tileID:K}=this.currentBuildingBuckets[I];if(!U)continue;const{tileX:G,tileY:Q}=this._mapCoordToOverlappingTile(a,c,g,K),ne=U.getHeightAtTileCoord(G,Q);if(ne&&!ne.hidden)return ne.height===void 0&&b!==void 0?Math.min(ne.maxHeight,b)*ne.verticalScale:ne.height?ne.height*ne.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function jn(m,a){const c={};for(const g in m)g!=="ref"&&(c[g]=m[g]);return i.bh.forEach(g=>{g in a&&(c[g]=a[g])}),c}function wr(m){m=m.slice();const a=Object.create(null);for(let c=0;c<m.length;c++)a[m[c].id]=m[c];for(let c=0;c<m.length;c++)"ref"in m[c]&&(m[c]=jn(m[c],a[m[c].ref]));return m}const Jn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport"};function ti(m,a,c){c.push({command:Jn.addSource,args:[m,a[m]]})}function Sr(m,a,c){a.push({command:Jn.removeSource,args:[m]}),c[m]=!0}function ca(m,a,c,g){Sr(m,c,g),ti(m,a,c)}function Zn(m,a,c){let g;for(g in m[c])if(m[c].hasOwnProperty(g)&&g!=="data"&&!i.bi(m[c][g],a[c][g]))return!1;for(g in a[c])if(a[c].hasOwnProperty(g)&&g!=="data"&&!i.bi(m[c][g],a[c][g]))return!1;return!0}function Fo(m,a,c,g,b,C){let I;for(I in a=a||{},m=m||{})m.hasOwnProperty(I)&&(i.bi(m[I],a[I])||c.push({command:C,args:[g,I,a[I],b]}));for(I in a)a.hasOwnProperty(I)&&!m.hasOwnProperty(I)&&(i.bi(m[I],a[I])||c.push({command:C,args:[g,I,a[I],b]}))}function Xo(m){return m.id}function bs(m,a){return m[a.id]=a,m}class ua{constructor(a,c){this.reset(a,c)}reset(a,c){this.points=a||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=i.ap(a,0,1);let c=1,g=this._distances[c];const b=a*this.paddedLength+this.padding;for(;g<b&&c<this._distances.length;)g=this._distances[++c];const C=c-1,I=this._distances[C],z=g-I,U=z>0?(b-I)/z:0;return this.points[C].mult(1-U).add(this.points[c].mult(U))}}class ec{constructor(a,c,g){const b=this.boxCells=[],C=this.circleCells=[];this.xCellCount=Math.ceil(a/g),this.yCellCount=Math.ceil(c/g);for(let I=0;I<this.xCellCount*this.yCellCount;I++)b.push([]),C.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=c,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,c,g,b,C){this._forEachCell(c,g,b,C,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(c),this.bboxes.push(g),this.bboxes.push(b),this.bboxes.push(C)}insertCircle(a,c,g,b){this._forEachCell(c-b,g-b,c+b,g+b,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(c),this.circles.push(g),this.circles.push(b)}_insertBoxCell(a,c,g,b,C,I){this.boxCells[C].push(I)}_insertCircleCell(a,c,g,b,C,I){this.circleCells[C].push(I)}_query(a,c,g,b,C,I){if(g<0||a>this.width||b<0||c>this.height)return!C&&[];const z=[];if(a<=0&&c<=0&&this.width<=g&&this.height<=b){if(C)return!0;for(let U=0;U<this.boxKeys.length;U++)z.push({key:this.boxKeys[U],x1:this.bboxes[4*U],y1:this.bboxes[4*U+1],x2:this.bboxes[4*U+2],y2:this.bboxes[4*U+3]});for(let U=0;U<this.circleKeys.length;U++){const K=this.circles[3*U],G=this.circles[3*U+1],Q=this.circles[3*U+2];z.push({key:this.circleKeys[U],x1:K-Q,y1:G-Q,x2:K+Q,y2:G+Q})}return I?z.filter(I):z}return this._forEachCell(a,c,g,b,this._queryCell,z,{hitTest:C,seenUids:{box:{},circle:{}}},I),C?z.length>0:z}_queryCircle(a,c,g,b,C){const I=a-g,z=a+g,U=c-g,K=c+g;if(z<0||I>this.width||K<0||U>this.height)return!b&&[];const G=[];return this._forEachCell(I,U,z,K,this._queryCellCircle,G,{hitTest:b,circle:{x:a,y:c,radius:g},seenUids:{box:{},circle:{}}},C),b?G.length>0:G}query(a,c,g,b,C){return this._query(a,c,g,b,!1,C)}hitTest(a,c,g,b,C){return this._query(a,c,g,b,!0,C)}hitTestCircle(a,c,g,b){return this._queryCircle(a,c,g,!0,b)}_queryCell(a,c,g,b,C,I,z,U){const K=z.seenUids,G=this.boxCells[C];if(G!==null){const ne=this.bboxes;for(const le of G)if(!K.box[le]){K.box[le]=!0;const be=4*le;if(a<=ne[be+2]&&c<=ne[be+3]&&g>=ne[be+0]&&b>=ne[be+1]&&(!U||U(this.boxKeys[le]))){if(z.hitTest)return I.push(!0),!0;I.push({key:this.boxKeys[le],x1:ne[be],y1:ne[be+1],x2:ne[be+2],y2:ne[be+3]})}}}const Q=this.circleCells[C];if(Q!==null){const ne=this.circles;for(const le of Q)if(!K.circle[le]){K.circle[le]=!0;const be=3*le;if(this._circleAndRectCollide(ne[be],ne[be+1],ne[be+2],a,c,g,b)&&(!U||U(this.circleKeys[le]))){if(z.hitTest)return I.push(!0),!0;{const xe=ne[be],Te=ne[be+1],Ee=ne[be+2];I.push({key:this.circleKeys[le],x1:xe-Ee,y1:Te-Ee,x2:xe+Ee,y2:Te+Ee})}}}}}_queryCellCircle(a,c,g,b,C,I,z,U){const K=z.circle,G=z.seenUids,Q=this.boxCells[C];if(Q!==null){const le=this.bboxes;for(const be of Q)if(!G.box[be]){G.box[be]=!0;const xe=4*be;if(this._circleAndRectCollide(K.x,K.y,K.radius,le[xe+0],le[xe+1],le[xe+2],le[xe+3])&&(!U||U(this.boxKeys[be])))return I.push(!0),!0}}const ne=this.circleCells[C];if(ne!==null){const le=this.circles;for(const be of ne)if(!G.circle[be]){G.circle[be]=!0;const xe=3*be;if(this._circlesCollide(le[xe],le[xe+1],le[xe+2],K.x,K.y,K.radius)&&(!U||U(this.circleKeys[be])))return I.push(!0),!0}}}_forEachCell(a,c,g,b,C,I,z,U){const K=this._convertToXCellCoord(a),G=this._convertToYCellCoord(c),Q=this._convertToXCellCoord(g),ne=this._convertToYCellCoord(b);for(let le=K;le<=Q;le++)for(let be=G;be<=ne;be++)if(C.call(this,a,c,g,b,this.xCellCount*be+le,I,z,U))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,c,g,b,C,I){const z=b-a,U=C-c,K=g+I;return K*K>z*z+U*U}_circleAndRectCollide(a,c,g,b,C,I,z){const U=(I-b)/2,K=Math.abs(a-(b+U));if(K>U+g)return!1;const G=(z-C)/2,Q=Math.abs(c-(C+G));if(Q>G+g)return!1;if(K<=U||Q<=G)return!0;const ne=K-U,le=Q-G;return ne*ne+le*le<=g*g}}const dr={unknown:0,flipRequired:1,flipNotRequired:2},ln=Math.tan(85*Math.PI/180);function gr(m,a,c,g,b,C,I){const z=i.a6.mat4.create();if(c)if(C.name==="globe"){const U=i.bj(b,a);i.a6.mat4.multiply(z,z,U)}else{const U=i.a6.mat2.invert([],I);z[0]=U[0],z[1]=U[1],z[4]=U[2],z[5]=U[3],g||i.a6.mat4.rotateZ(z,z,b.angle)}else i.a6.mat4.multiply(z,b.labelPlaneMatrix,m);return z}function yr(m,a,c,g,b,C,I){const z=gr(m,a,c,g,b,C,I);return C.name==="globe"&&c||(z[2]=z[6]=z[10]=z[14]=0),z}function hi(m,a,c,g,b,C,I){if(c){if(C.name==="globe"){const z=gr(m,a,c,g,b,C,I);return i.a6.mat4.invert(z,z),i.a6.mat4.multiply(z,m,z),z}{const z=i.a6.mat4.clone(m),U=i.a6.mat4.identity([]);return U[0]=I[0],U[1]=I[1],U[4]=I[2],U[5]=I[3],i.a6.mat4.multiply(z,z,U),g||i.a6.mat4.rotateZ(z,z,-b.angle),z}}return b.glCoordMatrix}function Mo(m,a,c,g){const b=[m,a,c,1];c?i.a6.vec4.transformMat4(b,b,g):ff(b,b,g);const C=b[3];return b[0]/=C,b[1]/=C,b[2]/=C,b}function Ur(m,a){return Math.min(.5+m/a*.5,1.5)}function Ic(m,a){const c=m[0]/m[3],g=m[1]/m[3];return c>=-a[0]&&c<=a[0]&&g>=-a[1]&&g<=a[1]}function ws(m,a,c,g,b,C,I,z,U,K){const G=c.transform,Q=g?m.textSizeData:m.iconSizeData,ne=i.bk(Q,c.transform.zoom),le=G.projection.name==="globe",be=[256/c.width*2+1,256/c.height*2+1],xe=g?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;xe.clear();let Te=null;le&&(Te=g?m.text.globeExtVertexArray:m.icon.globeExtVertexArray);const Ee=m.lineVertexArray,Oe=g?m.text.placedSymbolArray:m.icon.placedSymbolArray,Ve=c.transform.width/c.transform.height;let He,qe=!1;for(let Xe=0;Xe<Oe.length;Xe++){const Ke=Oe.get(Xe),{numGlyphs:Ye,writingMode:rt}=Ke;if(rt!==i.bl.vertical||qe||He===i.bl.horizontal||(qe=!0),He=rt,(Ke.hidden||rt===i.bl.vertical)&&!qe){Ws(Ye,xe);continue}qe=!1;const vt=new i.P(Ke.tileAnchorX,Ke.tileAnchorY);let{x:st,y:it,z:zt}=G.projection.projectTilePoint(vt.x,vt.y,K.canonical);if(U){const[Jt,In,Wn]=U(vt);st+=Jt,it+=In,zt+=Wn}const jt=[st,it,zt,1];if(i.a6.vec4.transformMat4(jt,jt,a),!Ic(jt,be)){Ws(Ye,xe);continue}const tn=jt[3],fn=Ur(c.transform.getCameraToCenterDistance(G.projection),tn),Sn=i.bm(Q,ne,Ke),Et=I?Sn/fn:Sn*fn,Qt=Mo(st,it,zt,b);if(Qt[3]<=0){Ws(Ye,xe);continue}let Nt={};const en=I?null:U,rn=co(Ke,Et,!1,z,a,b,C,m.glyphOffsetArray,Ee,xe,Te,Qt,vt,Nt,Ve,en,G.projection,K,I);qe=rn.useVertical,en&&rn.needsFlipping&&(Nt={}),(rn.notEnoughRoom||qe||rn.needsFlipping&&co(Ke,Et,!0,z,a,b,C,m.glyphOffsetArray,Ee,xe,Te,Qt,vt,Nt,Ve,en,G.projection,K,I).notEnoughRoom)&&Ws(Ye,xe)}g?(m.text.dynamicLayoutVertexBuffer.updateData(xe),Te&&m.text.globeExtVertexBuffer&&m.text.globeExtVertexBuffer.updateData(Te)):(m.icon.dynamicLayoutVertexBuffer.updateData(xe),Te&&m.icon.globeExtVertexBuffer&&m.icon.globeExtVertexBuffer.updateData(Te))}function du(m,a,c,g,b,C,I,z,U,K,G,Q,ne,le,be,xe){const{lineStartIndex:Te,glyphStartIndex:Ee,segment:Oe}=z,Ve=Ee+z.numGlyphs,He=Te+z.lineLength,qe=a.getoffsetX(Ee),Xe=a.getoffsetX(Ve-1),Ke=fu(m*qe,c,g,b,C,I,Oe,Te,He,U,K,G,Q,ne,!0,le,be,xe);if(!Ke)return null;const Ye=fu(m*Xe,c,g,b,C,I,Oe,Te,He,U,K,G,Q,ne,!0,le,be,xe);return Ye?{first:Ke,last:Ye}:null}function va(m,a,c,g){return m===i.bl.horizontal&&Math.abs(g)>Math.abs(c)?{useVertical:!0}:m===i.bl.vertical?g>0?{needsFlipping:!0}:null:a!==dr.unknown&&function(b,C){return b===0||Math.abs(C/b)>ln}(c,g)?a===dr.flipRequired?{needsFlipping:!0}:null:c<0?{needsFlipping:!0}:null}function co(m,a,c,g,b,C,I,z,U,K,G,Q,ne,le,be,xe,Te,Ee,Oe){const Ve=a/24,He=m.lineOffsetX*Ve,qe=m.lineOffsetY*Ve,{lineStartIndex:Xe,glyphStartIndex:Ke,numGlyphs:Ye,segment:rt,writingMode:vt,flipState:st}=m,it=Xe+m.lineLength,zt=jt=>{if(G){const[Et,Qt,Nt]=jt.up,en=K.length;i.bn(G,en+0,Et,Qt,Nt),i.bn(G,en+1,Et,Qt,Nt),i.bn(G,en+2,Et,Qt,Nt),i.bn(G,en+3,Et,Qt,Nt)}const[tn,fn,Sn]=jt.point;i.bo(K,tn,fn,Sn,jt.angle)};if(Ye>1){const jt=du(Ve,z,He,qe,c,Q,ne,m,U,C,le,xe,!1,Te,Ee,Oe);if(!jt)return{notEnoughRoom:!0};if(g&&!c){let[tn,fn,Sn]=jt.first.point,[Et,Qt,Nt]=jt.last.point;[tn,fn]=Mo(tn,fn,Sn,I),[Et,Qt]=Mo(Et,Qt,Nt,I);const en=va(vt,st,(Et-tn)*be,Qt-fn);if(m.flipState=en&&en.needsFlipping?dr.flipRequired:dr.flipNotRequired,en)return en}zt(jt.first);for(let tn=Ke+1;tn<Ke+Ye-1;tn++){const fn=fu(Ve*z.getoffsetX(tn),He,qe,c,Q,ne,rt,Xe,it,U,C,le,xe,!1,!1,Te,Ee,Oe);if(!fn)return K.length-=4*(tn-Ke),{notEnoughRoom:!0};zt(fn)}zt(jt.last)}else{if(g&&!c){const tn=Mo(ne.x,ne.y,0,b),fn=Xe+rt+1,Sn=new i.P(U.getx(fn),U.gety(fn)),Et=Mo(Sn.x,Sn.y,0,b),Qt=Et[3]>0?Et:hu(ne,Sn,tn,1,b,void 0,Te,Ee.canonical),Nt=va(vt,st,(Qt[0]-tn[0])*be,Qt[1]-tn[1]);if(m.flipState=Nt&&Nt.needsFlipping?dr.flipRequired:dr.flipNotRequired,Nt)return Nt}const jt=fu(Ve*z.getoffsetX(Ke),He,qe,c,Q,ne,rt,Xe,it,U,C,le,xe,!1,!1,Te,Ee,Oe);if(!jt)return{notEnoughRoom:!0};zt(jt)}return{}}function By(m,a,c,g,b){const{x:C,y:I,z}=g.projectTilePoint(m.x,m.y,a);if(!b)return Mo(C,I,z,c);const[U,K,G]=b(m);return Mo(C+U,I+K,z+G,c)}function hu(m,a,c,g,b,C,I,z){const U=By(m.sub(a)._unit()._add(m),z,b,I,C);return i.a6.vec3.sub(U,c,U),i.a6.vec3.normalize(U,U),i.a6.vec3.scaleAndAdd(U,c,U,g)}function fu(m,a,c,g,b,C,I,z,U,K,G,Q,ne,le,be,xe,Te,Ee){const Oe=g?m-a:m+a;let Ve=Oe>0?1:-1,He=0;g&&(Ve*=-1,He=Math.PI),Ve<0&&(He+=Math.PI);let qe=z+I+(Ve>0?0:1)|0,Xe=b,Ke=b,Ye=0,rt=0;const vt=Math.abs(Oe),st=[],it=[];let zt=C,jt=zt;const tn=()=>hu(jt,zt,Ke,vt-Ye+1,G,ne,xe,Te.canonical);for(;Ye+rt<=vt;){if(qe+=Ve,qe<z||qe>=U)return null;if(Ke=Xe,jt=zt,st.push(Ke),le&&it.push(jt),zt=new i.P(K.getx(qe),K.gety(qe)),Xe=Q[qe],!Xe){const In=By(zt,Te.canonical,G,xe,ne);Xe=In[3]>0?Q[qe]=In:tn()}Ye+=rt,rt=i.a6.vec3.distance(Ke,Xe)}be&&ne&&(Q[qe]&&(Xe=tn(),rt=i.a6.vec3.distance(Ke,Xe)),Q[qe]=Xe);const fn=(vt-Ye)/rt,Sn=zt.sub(jt)._mult(fn)._add(jt),Et=i.a6.vec3.sub([],Xe,Ke),Qt=i.a6.vec3.scaleAndAdd([],Ke,Et,fn);let Nt=[0,0,1],en=Et[0],rn=Et[1];if(Ee&&(Nt=xe.upVector(Te.canonical,Sn.x,Sn.y),Nt[0]!==0||Nt[1]!==0||Nt[2]!==1)){const In=[Nt[2],0,-Nt[0]],Wn=i.a6.vec3.cross([],Nt,In);i.a6.vec3.normalize(In,In),i.a6.vec3.normalize(Wn,Wn),en=i.a6.vec3.dot(Et,In),rn=i.a6.vec3.dot(Et,Wn)}if(c){const In=i.a6.vec3.cross([],Nt,Et);i.a6.vec3.normalize(In,In),i.a6.vec3.scaleAndAdd(Qt,Qt,In,c*Ve)}const Jt=He+Math.atan2(rn,en);return st.push(Qt),le&&it.push(Sn),{point:Qt,angle:Jt,path:st,tilePath:it,up:Nt}}function Ws(m,a){const c=a.length,g=c+4*m;a.resize(g),a.float32.fill(-1/0,4*c,4*g)}function ff(m,a,c){const g=a[0],b=a[1];return m[0]=c[0]*g+c[4]*b+c[12],m[1]=c[1]*g+c[5]*b+c[13],m[3]=c[3]*g+c[7]*b+c[15],m}const Wa=100;class da{constructor(a,c,g=new ec(a.width+200,a.height+200,25),b=new ec(a.width+200,a.height+200,25)){this.transform=a,this.grid=g,this.ignoredGrid=b,this.pitchfactor=Math.cos(a._pitch)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+Wa,this.screenBottomBoundary=a.height+Wa,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.fogState=c}placeCollisionBox(a,c,g,b,C,I,z,U){let K=g.projectedAnchorX,G=g.projectedAnchorY,Q=g.projectedAnchorZ;const ne=g.elevation,le=g.tileID,be=a.getProjection();if(ne&&le){const[Xe,Ke,Ye]=be.upVector(le.canonical,g.tileAnchorX,g.tileAnchorY),rt=be.upVectorScale(le.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;K+=Xe*ne*rt,G+=Ke*ne*rt,Q+=Ye*ne*rt}const xe=this.projectAndGetPerspectiveRatio(z,K,G,Q,g.tileID,be.name==="globe"||!!ne||this.transform.pitch>0,be),Te=I*xe.perspectiveRatio,Ee=(g.x1*c+b.x-g.padding)*Te+xe.point.x,Oe=(g.y1*c+b.y-g.padding)*Te+xe.point.y,Ve=(g.x2*c+b.x+g.padding)*Te+xe.point.x,He=(g.y2*c+b.y+g.padding)*Te+xe.point.y,qe=xe.perspectiveRatio<=.55||xe.occluded;return!this.isInsideGrid(Ee,Oe,Ve,He)||!C&&this.grid.hitTest(Ee,Oe,Ve,He,U)||qe?{box:[],offscreen:!1,occluded:xe.occluded}:{box:[Ee,Oe,Ve,He],offscreen:this.isOffscreen(Ee,Oe,Ve,He),occluded:!1}}placeCollisionCircles(a,c,g,b,C,I,z,U,K,G,Q,ne,le,be,xe){const Te=[],Ee=this.transform.elevation,Oe=a.getProjection(),Ve=Ee?Ee.getAtTileOffsetFunc(xe,this.transform.center.lat,this.transform.worldSize,Oe):null,He=new i.P(g.tileAnchorX,g.tileAnchorY);let{x:qe,y:Xe,z:Ke}=Oe.projectTilePoint(He.x,He.y,xe.canonical);if(Ve){const[Sn,Et,Qt]=Ve(He);qe+=Sn,Xe+=Et,Ke+=Qt}const Ye=Oe.name==="globe",rt=this.projectAndGetPerspectiveRatio(z,qe,Xe,Ke,xe,Ye||!!Ee||this.transform.pitch>0,Oe),{perspectiveRatio:vt}=rt,st=(Q?I/vt:I*vt)/i.br,it=Mo(qe,Xe,Ke,U),zt=rt.signedDistanceFromCamera>0?du(st,C,g.lineOffsetX*st,g.lineOffsetY*st,!1,it,He,g,b,U,{},Ee&&!Q?Ve:null,Q&&!!Ee,Oe,xe,Q):null;let jt=!1,tn=!1,fn=!0;if(zt&&!rt.occluded){const Sn=.5*le*vt+be,Et=new i.P(-100,-100),Qt=new i.P(this.screenRightBoundary,this.screenBottomBoundary),Nt=new ua,{first:en,last:rn}=zt,Jt=en.path.length;let In=[];for(let Bn=Jt-1;Bn>=1;Bn--)In.push(en.path[Bn]);for(let Bn=1;Bn<rn.path.length;Bn++)In.push(rn.path[Bn]);const Wn=2.5*Sn;K&&(In=In.map(([Bn,nr,$n],hr)=>(Ve&&!Ye&&($n=Ve(hr<Jt-1?en.tilePath[Jt-1-hr]:rn.tilePath[hr-Jt+2])[2]),Mo(Bn,nr,$n,K))),In.some(Bn=>Bn[3]<=0)&&(In=[]));let Qn=[];if(In.length>0){let Bn=1/0,nr=-1/0,$n=1/0,hr=-1/0;for(const Pr of In)Bn=Math.min(Bn,Pr[0]),$n=Math.min($n,Pr[1]),nr=Math.max(nr,Pr[0]),hr=Math.max(hr,Pr[1]);nr>=Et.x&&Bn<=Qt.x&&hr>=Et.y&&$n<=Qt.y&&(Qn=[In.map(Pr=>new i.P(Pr[0],Pr[1]))],(Bn<Et.x||nr>Qt.x||$n<Et.y||hr>Qt.y)&&(Qn=i.bp(Qn,Et.x,Et.y,Qt.x,Qt.y)))}for(const Bn of Qn){Nt.reset(Bn,.25*Sn);let nr=0;nr=Nt.length<=.5*Sn?1:Math.ceil(Nt.paddedLength/Wn)+1;for(let $n=0;$n<nr;$n++){const hr=$n/Math.max(nr-1,1),Pr=Nt.lerp(hr),Vr=Pr.x+Wa,_i=Pr.y+Wa;Te.push(Vr,_i,Sn,0);const Yr=Vr-Sn,Ti=_i-Sn,ni=Vr+Sn,xi=_i+Sn;if(fn=fn&&this.isOffscreen(Yr,Ti,ni,xi),tn=tn||this.isInsideGrid(Yr,Ti,ni,xi),!c&&this.grid.hitTestCircle(Vr,_i,Sn,ne)&&(jt=!0,!G))return{circles:[],offscreen:!1,collisionDetected:jt,occluded:!1}}}}return{circles:!G&&jt||!tn?[]:Te,offscreen:fn,collisionDetected:jt,occluded:rt.occluded}}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let g=1/0,b=1/0,C=-1/0,I=-1/0;for(const G of a){const Q=new i.P(G.x+Wa,G.y+Wa);g=Math.min(g,Q.x),b=Math.min(b,Q.y),C=Math.max(C,Q.x),I=Math.max(I,Q.y),c.push(Q)}const z=this.grid.query(g,b,C,I).concat(this.ignoredGrid.query(g,b,C,I)),U={},K={};for(const G of z){const Q=G.key;if(U[Q.bucketInstanceId]===void 0&&(U[Q.bucketInstanceId]={}),U[Q.bucketInstanceId][Q.featureIndex])continue;const ne=[new i.P(G.x1,G.y1),new i.P(G.x2,G.y1),new i.P(G.x2,G.y2),new i.P(G.x1,G.y2)];i.bq(c,ne)&&(U[Q.bucketInstanceId][Q.featureIndex]=!0,K[Q.bucketInstanceId]===void 0&&(K[Q.bucketInstanceId]=[]),K[Q.bucketInstanceId].push(Q.featureIndex))}return K}insertCollisionBox(a,c,g,b,C){(c?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:b,collisionGroupID:C},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,c,g,b,C){const I=c?this.ignoredGrid:this.grid,z={bucketInstanceId:g,featureIndex:b,collisionGroupID:C};for(let U=0;U<a.length;U+=4)I.insertCircle(z,a[U],a[U+1],a[U+2])}projectAndGetPerspectiveRatio(a,c,g,b,C,I,z){const U=[c,g,b,1];let K=!1;b||this.transform.pitch>0?(i.a6.vec4.transformMat4(U,U,a),this.fogState&&C&&z.name!=="globe"&&(K=function(ne,le,be,xe,Te,Ee){const Oe=Ee.calculateFogTileMatrix(Te),Ve=[le,be,xe];return i.a6.vec3.transformMat4(Ve,Ve,Oe),kt(ne,i.a6.vec3.length(Ve),Ee.pitch,Ee._fov)}(this.fogState,c,g,b,C.toUnwrapped(),this.transform)>.9)):ff(U,U,a);const G=U[3];return{point:new i.P((U[0]/G+1)/2*this.transform.width+Wa,(-U[1]/G+1)/2*this.transform.height+Wa),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(z)/G*.5,1.5),signedDistanceFromCamera:G,occluded:I&&U[2]>G||K}}isOffscreen(a,c,g,b){return g<Wa||a>=this.screenRightBoundary||b<Wa||c>this.screenBottomBoundary}isInsideGrid(a,c,g,b){return g>=0&&a<this.gridRightBoundary&&b>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const a=i.a6.mat4.identity([]);return i.a6.mat4.translate(a,a,[-100,-100,0]),a}}function ya(m,a,c){const g=a.createTileMatrix(m,m.worldSize,c.toUnwrapped());return i.a6.mat4.multiply(new Float32Array(16),m.projMatrix,g)}function jy(m,a,c){if(a.projection.name===c.projection.name)return m.projMatrix;const g=c.clone();return g.setProjection(a.projection),ya(g,a.getProjection(),m)}function tc(m,a,c){return a.name===c.projection.name?m.projMatrix:ya(c,a,m)}class _o{constructor(a,c,g,b){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?c:-c))):b&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class _a{constructor(a,c,g,b,C,I=!1){this.text=new _o(a?a.text:null,c,g,C),this.icon=new _o(a?a.icon:null,c,b,C),this.clipped=I}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ss{constructor(a,c,g,b=!1){this.text=a,this.icon=c,this.skipFade=g,this.clipped=b}}class Bo{constructor(){this.invProjMatrix=i.a6.mat4.create(),this.viewportMatrix=i.a6.mat4.create(),this.circles=[]}}class Zm{constructor(a,c,g,b,C){this.bucketInstanceId=a,this.featureIndex=c,this.sourceLayerIndex=g,this.bucketIndex=b,this.tileID=C}}class Cs{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){const c=++this.maxGroupID;this.collisionGroups[a]={ID:c,predicate:g=>g.collisionGroupID===c}}return this.collisionGroups[a]}}function pu(m,a,c,g,b){const{horizontalAlign:C,verticalAlign:I}=i.by(m),z=-(C-.5)*a,U=-(I-.5)*c,K=i.bx(m,g);return new i.P(z+K[0]*b,U+K[1]*b)}function Mc(m,a,c,g,b){const C=new i.P(m,a);return c&&C._rotate(g?b:-b),C}class Pc{constructor(a,c,g,b,C,I){this.transform=a.clone(),this.projection=a.projection.name,this.collisionIndex=new da(this.transform,C),this.buildingIndex=I,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=c,this.retainedQueryData={},this.collisionGroups=new Cs(g),this.collisionCircleArrays={},this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(a,c,g,b,C=1){const I=g.getBucket(c),z=g.latestFeatureIndex;if(!I||!z||c.fqid!==I.layerIds[0])return;const U=I.layers[0].layout,K=I.layers[0].paint,G=g.collisionBoxArray,Q=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),ne=g.tileSize/i.ab,le=g.tileID.toUnwrapped();this.transform.setProjection(I.projection);const be=(xe=g.tileID,Te=I.getProjection(),Ee=this.transform,Te.name===this.projection?Ee.calculateProjMatrix(xe.toUnwrapped()):ya(Ee,Te,xe));var xe,Te,Ee;const Oe=U.get("text-pitch-alignment")==="map",Ve=U.get("text-rotation-alignment")==="map";c.compileFilter(c.options);const He=c.dynamicFilter(),qe=c.dynamicFilterNeedsFeature(),Xe=this.transform.calculatePixelsToTileUnitsMatrix(g),Ke=yr(be,g.tileID.canonical,Oe,Ve,this.transform,I.getProjection(),Xe);let Ye=null;if(Oe){const tn=hi(be,g.tileID.canonical,Oe,Ve,this.transform,I.getProjection(),Xe);Ye=i.a6.mat4.multiply([],this.transform.labelPlaneMatrix,tn)}let rt=null;He&&g.latestFeatureIndex&&(rt={unwrappedTileID:le,dynamicFilter:He,dynamicFilterNeedsFeature:qe}),this.retainedQueryData[I.bucketInstanceId]=new Zm(I.bucketInstanceId,z,I.sourceLayerIndex,I.index,g.tileID);const vt=I.layers[0].layout.get("text-size-scale-range"),st=i.ap(C,vt[0],vt[1]),it=I.layers[0].layout.get("icon-size-scale-range"),zt=i.ap(C,it[0],it[1]),jt={bucket:I,layout:U,paint:K,posMatrix:be,textLabelPlaneMatrix:Ke,labelToScreenMatrix:Ye,clippingData:rt,scale:Q,textPixelRatio:ne,holdingForFade:g.holdingForFade(),collisionBoxArray:G,partiallyEvaluatedTextSize:i.bk(I.textSizeData,this.transform.zoom,st),partiallyEvaluatedIconSize:i.bk(I.iconSizeData,this.transform.zoom,zt),collisionGroup:this.collisionGroups.get(I.sourceID),latestFeatureIndex:g.latestFeatureIndex};if(b)for(const tn of I.sortKeyRanges){const{sortKey:fn,symbolInstanceStart:Sn,symbolInstanceEnd:Et}=tn;a.push({sortKey:fn,symbolInstanceStart:Sn,symbolInstanceEnd:Et,parameters:jt})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:I.symbolInstances.length,parameters:jt})}attemptAnchorPlacement(a,c,g,b,C,I,z,U,K,G,Q,ne,le,be,xe,Te,Ee,Oe){const{textOffset0:Ve,textOffset1:He,crossTileID:qe}=ne,Xe=[Ve,He],Ke=pu(a,g,b,Xe,C),Ye=this.collisionIndex.placeCollisionBox(be,C,c,Mc(Ke.x,Ke.y,I,z,this.transform.angle),Q,U,K,G.predicate);if(Te){const rt=be.getSymbolInstanceIconSize(Oe,this.transform.zoom,ne.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(be,rt,Te,Mc(Ke.x,Ke.y,I,z,this.transform.angle),Q,U,K,G.predicate).box.length===0)return}if(Ye.box.length>0){let rt;return this.prevPlacement&&this.prevPlacement.variableOffsets[qe]&&this.prevPlacement.placements[qe]&&this.prevPlacement.placements[qe].text&&(rt=this.prevPlacement.variableOffsets[qe].anchor),this.variableOffsets[qe]={textOffset:Xe,width:g,height:b,anchor:a,textScale:C,prevAnchor:rt},this.markUsedJustification(be,a,ne,xe),be.allowVerticalPlacement&&(this.markUsedOrientation(be,xe,ne),this.placedOrientations[qe]=xe),{shift:Ke,placedGlyphBoxes:Ye}}}placeLayerBucketPart(a,c,g,b,C=1){const{bucket:I,layout:z,paint:U,posMatrix:K,textLabelPlaneMatrix:G,labelToScreenMatrix:Q,clippingData:ne,textPixelRatio:le,holdingForFade:be,collisionBoxArray:xe,partiallyEvaluatedTextSize:Te,partiallyEvaluatedIconSize:Ee,collisionGroup:Oe,latestFeatureIndex:Ve}=a.parameters,He=z.get("text-optional"),qe=z.get("icon-optional"),Xe=z.get("text-allow-overlap"),Ke=z.get("icon-allow-overlap"),Ye=z.get("text-rotation-alignment")==="map",rt=z.get("text-pitch-alignment")==="map",vt=z.get("symbol-z-elevate"),st=U.get("symbol-z-offset"),it=z.get("symbol-elevation-reference")==="sea",zt=z.get("text-size-scale-range"),jt=z.get("icon-size-scale-range"),tn=i.ap(C,zt[0],zt[1]),fn=i.ap(C,jt[0],jt[1]);this.transform.setProjection(I.projection);let Sn=Xe&&(Ke||!I.hasIconData()||qe),Et=Ke&&(Xe||!I.hasTextData()||He);const Qt=!st.isConstant();!I.collisionArrays&&xe&&I.deserializeCollisionBoxes(xe),g&&b&&I.updateCollisionDebugBuffers(this.transform.zoom,xe,tn,fn);const Nt=(en,rn,Jt)=>{const{crossTileID:In,numVerticalGlyphVertices:Wn}=en;let Qn=null;if(ne&&ne.dynamicFilterNeedsFeature||Qt){const Kr=this.retainedQueryData[I.bucketInstanceId];Qn=Ve.loadFeature({featureIndex:en.featureIndex,bucketIndex:Kr.bucketIndex,sourceLayerIndex:Kr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(ne&&!(0,ne.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch},Qn,this.retainedQueryData[I.bucketInstanceId].tileID.canonical,new i.P(en.tileAnchorX,en.tileAnchorY),this.transform.calculateDistanceTileData(ne.unwrappedTileID)))return this.placements[In]=new Ss(!1,!1,!1,!0),void c.add(In);const Bn=st.evaluate(Qn,{});if(c.has(In))return;if(be)return void(this.placements[In]=new Ss(!1,!1,!1));let nr=!1,$n=!1,hr=!0,Pr=!1,Vr=!1,_i=null,Yr={box:null,offscreen:null,occluded:null},Ti={box:null,offscreen:null,occluded:null},ni=null,xi=null,Nr=null,gi=0,fi=0,oi=0;Jt.textFeatureIndex?gi=Jt.textFeatureIndex:en.useRuntimeCollisionCircles&&(gi=en.featureIndex),Jt.verticalTextFeatureIndex&&(fi=Jt.verticalTextFeatureIndex);const zi=Kr=>{Kr.tileID=this.retainedQueryData[I.bucketInstanceId].tileID;const Wr=this.transform.elevation;Kr.elevation=it?Bn:Bn+(Wr?Wr.getAtTileOffset(Kr.tileID,Kr.tileAnchorX,Kr.tileAnchorY):0),Kr.elevation+=en.zOffset},Co=Jt.textBox;if(Co){zi(Co);const Kr=ri=>{let wi=i.bl.horizontal;if(I.allowVerticalPlacement&&!ri&&this.prevPlacement){const oo=this.prevPlacement.placedOrientations[In];oo&&(this.placedOrientations[In]=oo,wi=oo,this.markUsedOrientation(I,wi,en))}return wi},Wr=(ri,wi)=>{if(I.allowVerticalPlacement&&Wn>0&&Jt.verticalTextBox){for(const oo of I.writingModes)if(oo===i.bl.vertical?(Yr=wi(),Ti=Yr):Yr=ri(),Yr&&Yr.box&&Yr.box.length)break}else Yr=ri()};if(z.get("text-variable-anchor")){let ri=z.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[In]){const Li=this.prevPlacement.variableOffsets[In];ri.indexOf(Li.anchor)>0&&(ri=ri.filter(jo=>jo!==Li.anchor),ri.unshift(Li.anchor))}const wi=(Li,jo,Xs)=>{const Da=I.getSymbolInstanceTextSize(Te,en,this.transform.zoom,rn),$a=(Li.x2-Li.x1)*Da+2*Li.padding,cs=(Li.y2-Li.y1)*Da+2*Li.padding,Is=en.hasIconTextFit&&!Ke?jo:null;Is&&zi(Is);let ka={box:[],offscreen:!1,occluded:!1};const El=Xe?2*ri.length:ri.length;for(let us=0;us<El;++us){const si=this.attemptAnchorPlacement(ri[us%ri.length],Li,$a,cs,Da,Ye,rt,le,K,Oe,us>=ri.length,en,rn,I,Xs,Is,Te,Ee);if(si&&(ka=si.placedGlyphBoxes,ka&&ka.box&&ka.box.length)){nr=!0,_i=si.shift;break}}return ka};Wr(()=>wi(Co,Jt.iconBox,i.bl.horizontal),()=>{const Li=Jt.verticalTextBox;return Li&&zi(Li),I.allowVerticalPlacement&&!(Yr&&Yr.box&&Yr.box.length)&&Wn>0&&Li?wi(Li,Jt.verticalIconBox,i.bl.vertical):{box:null,offscreen:null,occluded:null}}),Yr&&(nr=Yr.box,hr=Yr.offscreen,Pr=Yr.occluded);const oo=Kr(!(!Yr||!Yr.box));if(!nr&&this.prevPlacement){const Li=this.prevPlacement.variableOffsets[In];Li&&(this.variableOffsets[In]=Li,this.markUsedJustification(I,Li.anchor,en,oo))}}else{const ri=(wi,oo)=>{const Li=I.getSymbolInstanceTextSize(Te,en,this.transform.zoom,rn,C),jo=this.collisionIndex.placeCollisionBox(I,Li,wi,new i.P(0,0),Xe,le,K,Oe.predicate);return jo&&jo.box&&jo.box.length&&(this.markUsedOrientation(I,oo,en),this.placedOrientations[In]=oo),jo};Wr(()=>ri(Co,i.bl.horizontal),()=>{const wi=Jt.verticalTextBox;return I.allowVerticalPlacement&&Wn>0&&wi?(zi(wi),ri(wi,i.bl.vertical)):{box:null,offscreen:null,occluded:null}}),Kr(!!(Yr&&Yr.box&&Yr.box.length))}}if(ni=Yr,nr=ni&&ni.box&&ni.box.length>0,hr=ni&&ni.offscreen,Pr=ni&&ni.occluded,en.useRuntimeCollisionCircles){const Kr=I.text.placedSymbolArray.get(en.centerJustifiedTextSymbolIndex>=0?en.centerJustifiedTextSymbolIndex:en.verticalPlacedTextSymbolIndex),Wr=i.bm(I.textSizeData,Te,Kr),ri=z.get("text-padding");xi=this.collisionIndex.placeCollisionCircles(I,Xe,Kr,I.lineVertexArray,I.glyphOffsetArray,Wr,K,G,Q,g,rt,Oe.predicate,en.collisionCircleDiameter*Wr/i.br,ri,this.retainedQueryData[I.bucketInstanceId].tileID),nr=Xe||xi.circles.length>0&&!xi.collisionDetected,hr=hr&&xi.offscreen,Pr=xi.occluded}if(Jt.iconFeatureIndex&&(oi=Jt.iconFeatureIndex),Jt.iconBox){const Kr=Wr=>{zi(Wr);const ri=en.hasIconTextFit&&_i?Mc(_i.x,_i.y,Ye,rt,this.transform.angle):new i.P(0,0),wi=I.getSymbolInstanceIconSize(Ee,this.transform.zoom,en.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(I,wi,Wr,ri,Ke,le,K,Oe.predicate)};Ti&&Ti.box&&Ti.box.length&&Jt.verticalIconBox?(Nr=Kr(Jt.verticalIconBox),$n=Nr.box.length>0):(Nr=Kr(Jt.iconBox),$n=Nr.box.length>0),hr=hr&&Nr.offscreen,Vr=Nr.occluded}const Ja=He||en.numHorizontalGlyphVertices===0&&Wn===0,ls=qe||en.numIconVertices===0;if(Ja||ls?ls?Ja||($n=$n&&nr):nr=$n&&nr:$n=nr=$n&&nr,nr&&ni&&ni.box&&this.collisionIndex.insertCollisionBox(ni.box,z.get("text-ignore-placement"),I.bucketInstanceId,Ti&&Ti.box&&fi?fi:gi,Oe.ID),$n&&Nr&&this.collisionIndex.insertCollisionBox(Nr.box,z.get("icon-ignore-placement"),I.bucketInstanceId,oi,Oe.ID),xi&&(nr&&this.collisionIndex.insertCollisionCircles(xi.circles,z.get("text-ignore-placement"),I.bucketInstanceId,gi,Oe.ID),g)){const Kr=I.bucketInstanceId;let Wr=this.collisionCircleArrays[Kr];Wr===void 0&&(Wr=this.collisionCircleArrays[Kr]=new Bo);for(let ri=0;ri<xi.circles.length;ri+=4)Wr.circles.push(xi.circles[ri+0]),Wr.circles.push(xi.circles[ri+1]),Wr.circles.push(xi.circles[ri+2]),Wr.circles.push(xi.collisionDetected?1:0)}const Ro=I.projection.name!=="globe";Sn=Sn&&(Ro||!Pr),Et=Et&&(Ro||!Vr),this.placements[In]=new Ss(nr||Sn,$n||Et,hr||I.justReloaded),c.add(In)};if(vt&&this.buildingIndex&&(this.buildingIndex.updateZOffset(I,this.retainedQueryData[I.bucketInstanceId].tileID),I.updateZOffset()),I.sortFeaturesByY){const en=I.getSortedSymbolIndexes(this.transform.angle);for(let rn=en.length-1;rn>=0;--rn){const Jt=en[rn];Nt(I.symbolInstances.get(Jt),Jt,I.collisionArrays[Jt])}I.hasAnyZOffset&&i.w(`${I.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(I.hasAnyZOffset){const en=I.getSortedIndexesByZOffset();for(let rn=0;rn<en.length;++rn){const Jt=en[rn];Nt(I.symbolInstances.get(Jt),Jt,I.collisionArrays[Jt])}}else for(let en=a.symbolInstanceStart;en<a.symbolInstanceEnd;en++)Nt(I.symbolInstances.get(en),en,I.collisionArrays[en]);if(g&&I.bucketInstanceId in this.collisionCircleArrays){const en=this.collisionCircleArrays[I.bucketInstanceId];i.a6.mat4.invert(en.invProjMatrix,K),en.viewportMatrix=this.collisionIndex.getViewportMatrix()}I.justReloaded=!1}markUsedJustification(a,c,g,b){const{leftJustifiedTextSymbolIndex:C,centerJustifiedTextSymbolIndex:I,rightJustifiedTextSymbolIndex:z,verticalPlacedTextSymbolIndex:U,crossTileID:K}=g,G=i.bw(c),Q=b===i.bl.vertical?U:G==="left"?C:G==="center"?I:G==="right"?z:-1;C>=0&&(a.text.placedSymbolArray.get(C).crossTileID=Q>=0&&C!==Q?0:K),I>=0&&(a.text.placedSymbolArray.get(I).crossTileID=Q>=0&&I!==Q?0:K),z>=0&&(a.text.placedSymbolArray.get(z).crossTileID=Q>=0&&z!==Q?0:K),U>=0&&(a.text.placedSymbolArray.get(U).crossTileID=Q>=0&&U!==Q?0:K)}markUsedOrientation(a,c,g){const b=c===i.bl.horizontal||c===i.bl.horizontalOnly?c:0,C=c===i.bl.vertical?c:0,{leftJustifiedTextSymbolIndex:I,centerJustifiedTextSymbolIndex:z,rightJustifiedTextSymbolIndex:U,verticalPlacedTextSymbolIndex:K}=g,G=a.text.placedSymbolArray;I>=0&&(G.get(I).placedOrientation=b),z>=0&&(G.get(z).placedOrientation=b),U>=0&&(G.get(U).placedOrientation=b),K>=0&&(G.get(K).placedOrientation=C)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let g=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const b=c?c.symbolFadeChange(a):1,C=c?c.opacities:{},I=c?c.variableOffsets:{},z=c?c.placedOrientations:{};for(const U in this.placements){const K=this.placements[U],G=C[U];G?(this.opacities[U]=new _a(G,b,K.text,K.icon,null,K.clipped),g=g||K.text!==G.text.placed||K.icon!==G.icon.placed):(this.opacities[U]=new _a(null,b,K.text,K.icon,K.skipFade,K.clipped),g=g||K.text||K.icon)}for(const U in C){const K=C[U];if(!this.opacities[U]){const G=new _a(K,b,!1,!1);G.isHidden()||(this.opacities[U]=G,g=g||K.text.placed||K.icon.placed)}}for(const U in I)this.variableOffsets[U]||!this.opacities[U]||this.opacities[U].isHidden()||(this.variableOffsets[U]=I[U]);for(const U in z)this.placedOrientations[U]||!this.opacities[U]||this.opacities[U].isHidden()||(this.placedOrientations[U]=z[U]);g?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:a)}updateLayerOpacities(a,c,g,b){const C=new Set;for(const I of c){const z=I.getBucket(a);z&&I.latestFeatureIndex&&a.fqid===z.layerIds[0]&&(this.updateBucketOpacities(z,C,I,I.collisionBoxArray,g,b,I.tileID,a.scope),z.layers[0].layout.get("symbol-z-elevate")&&this.buildingIndex&&(this.buildingIndex.updateZOffset(z,I.tileID),z.updateZOffset()))}}updateBucketOpacities(a,c,g,b,C,I,z,U){a.hasTextData()&&a.text.opacityVertexArray.clear(),a.hasIconData()&&a.icon.opacityVertexArray.clear(),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();const K=a.layers[0].layout,G=a.layers[0].paint,Q=!!a.layers[0].dynamicFilter(),ne=new _a(null,0,!1,!1,!0),le=K.get("text-allow-overlap"),be=K.get("icon-allow-overlap"),xe=K.get("text-variable-anchor"),Te=K.get("text-rotation-alignment")==="map",Ee=K.get("text-pitch-alignment")==="map",Oe=G.get("symbol-z-offset"),Ve=K.get("symbol-elevation-reference")==="sea",He=!Oe.isConstant(),qe=new _a(null,0,le&&(be||!a.hasIconData()||K.get("icon-optional")),be&&(le||!a.hasTextData()||K.get("text-optional")),!0);!a.collisionArrays&&b&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(b);const Xe=(Ye,rt,vt)=>{for(let st=0;st<rt/4;st++)Ye.opacityVertexArray.emplaceBack(vt)};let Ke=0;I&&a.updateReplacement(z,I);for(let Ye=0;Ye<a.symbolInstances.length;Ye++){const rt=a.symbolInstances.get(Ye),{numHorizontalGlyphVertices:vt,numVerticalGlyphVertices:st,crossTileID:it,numIconVertices:zt,tileAnchorX:jt,tileAnchorY:tn}=rt;let fn=null;const Sn=this.retainedQueryData[a.bucketInstanceId];He&&rt&&Sn&&(fn=g.latestFeatureIndex.loadFeature({featureIndex:rt.featureIndex,bucketIndex:Sn.bucketIndex,sourceLayerIndex:Sn.sourceLayerIndex,layoutVertexArrayOffset:0}));const Et=Oe.evaluate(fn,{}),Qt=c.has(it);let Nt=this.opacities[it];Qt?Nt=ne:Nt||(Nt=qe,this.opacities[it]=Nt),c.add(it);const en=vt>0||st>0,rn=zt>0,Jt=this.placedOrientations[it],In=Jt===i.bl.vertical,Wn=Jt===i.bl.horizontal||Jt===i.bl.horizontalOnly;!en&&!rn||Nt.isHidden()||Ke++;let Qn=!1;if((en||rn)&&I)for(const Bn of a.activeReplacements){if(i.bs(Bn,C,i.bt.Symbol,U)||Bn.min.x>jt||jt>Bn.max.x||Bn.min.y>tn||tn>Bn.max.y)continue;const nr=i.bu(jt,tn,z.canonical,Bn.footprintTileId.canonical);if(Qn=i.bv(nr,Bn.footprint),Qn)break}if(en){const Bn=Qn?gu:mu(Nt.text);Xe(a.text,vt,In?gu:Bn),Xe(a.text,st,Wn?gu:Bn);const nr=Nt.text.isHidden(),{leftJustifiedTextSymbolIndex:$n,centerJustifiedTextSymbolIndex:hr,rightJustifiedTextSymbolIndex:Pr,verticalPlacedTextSymbolIndex:Vr}=rt,_i=a.text.placedSymbolArray,Yr=nr||In?1:0;$n>=0&&(_i.get($n).hidden=Yr),hr>=0&&(_i.get(hr).hidden=Yr),Pr>=0&&(_i.get(Pr).hidden=Yr),Vr>=0&&(_i.get(Vr).hidden=nr||Wn?1:0);const Ti=this.variableOffsets[it];Ti&&this.markUsedJustification(a,Ti.anchor,rt,Jt);const ni=this.placedOrientations[it];ni&&(this.markUsedJustification(a,"left",rt,ni),this.markUsedOrientation(a,ni,rt))}if(rn){const Bn=Qn?gu:mu(Nt.icon),{placedIconSymbolIndex:nr,verticalPlacedIconSymbolIndex:$n}=rt,hr=a.icon.placedSymbolArray,Pr=Nt.icon.isHidden()?1:0;nr>=0&&(Xe(a.icon,zt,In?gu:Bn),hr.get(nr).hidden=Pr),$n>=0&&(Xe(a.icon,rt.numVerticalIconVertices,Wn?gu:Bn),hr.get($n).hidden=Pr)}if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){const Bn=a.collisionArrays[Ye];if(Bn){let nr=new i.P(0,0),$n=!0;if(Bn.textBox||Bn.verticalTextBox){if(xe){const Pr=this.variableOffsets[it];Pr?(nr=pu(Pr.anchor,Pr.width,Pr.height,Pr.textOffset,Pr.textScale),Te&&nr._rotate(Ee?this.transform.angle:-this.transform.angle)):$n=!1}Q&&($n=!Nt.clipped),Bn.textBox&&pf(a.textCollisionBox.collisionVertexArray,Nt.text.placed,!$n||In,Et,Ve,nr.x,nr.y),Bn.verticalTextBox&&pf(a.textCollisionBox.collisionVertexArray,Nt.text.placed,!$n||Wn,Et,Ve,nr.x,nr.y)}const hr=$n&&!!(!Wn&&Bn.verticalIconBox);Bn.iconBox&&pf(a.iconCollisionBox.collisionVertexArray,Nt.icon.placed,hr,Et,Ve,rt.hasIconTextFit?nr.x:0,rt.hasIconTextFit?nr.y:0),Bn.verticalIconBox&&pf(a.iconCollisionBox.collisionVertexArray,Nt.icon.placed,!hr,Et,Ve,rt.hasIconTextFit?nr.x:0,rt.hasIconTextFit?nr.y:0)}}}if(a.fullyClipped=Ke===0,a.sortFeatures(this.transform.angle),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.bucketInstanceId in this.collisionCircleArrays){const Ye=this.collisionCircleArrays[a.bucketInstanceId];a.placementInvProjMatrix=Ye.invProjMatrix,a.placementViewportMatrix=Ye.viewportMatrix,a.collisionCircleArray=Ye.circles,delete this.collisionCircleArrays[a.bucketInstanceId]}}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,c){const g=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*g>a}setStale(){this.stale=!0}}function pf(m,a,c,g,b,C,I){m.emplaceBack(a?1:0,c?1:0,C||0,I||0,g,b?1:0),m.emplaceBack(a?1:0,c?1:0,C||0,I||0,g,b?1:0),m.emplaceBack(a?1:0,c?1:0,C||0,I||0,g,b?1:0),m.emplaceBack(a?1:0,c?1:0,C||0,I||0,g,b?1:0)}const pl=Math.pow(2,25),fS=Math.pow(2,24),Vy=Math.pow(2,17),Oa=Math.pow(2,16),pS=Math.pow(2,9),mf=Math.pow(2,8),Hy=Math.pow(2,1);function mu(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;const a=m.placed?1:0,c=Math.floor(127*m.opacity);return c*pl+a*fS+c*Vy+a*Oa+c*pS+a*mf+c*Hy+a}const gu=0;class mS{constructor(a){this._sortAcrossTiles=a.layout.get("symbol-z-order")!=="viewport-y"&&a.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(a,c,g,b,C,I){const z=this._bucketParts;for(;this._currentTileIndex<a.length;)if(c.getBucketParts(z,b,a[this._currentTileIndex],this._sortAcrossTiles,I),this._currentTileIndex++,C())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,z.sort((U,K)=>U.sortKey-K.sortKey));this._currentPartIndex<z.length;){const U=z[this._currentPartIndex];if(c.placeLayerBucketPart(U,this._seenCrossTileIDs,g,U.symbolInstanceStart===0,I),this._currentPartIndex++,C())return!0}return!1}}class Wd{constructor(a,c,g,b,C,I,z,U,K){this.placement=new Pc(a,C,I,z,U,K),this._currentPlacementIndex=c.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(a,c,g,b,C){const I=i.q.now(),z=()=>{const U=i.q.now()-I;return!this._forceFullPlacement&&U>2};for(;this._currentPlacementIndex>=0;){const U=c[a[this._currentPlacementIndex]],K=this.placement.collisionIndex.transform.zoom;if(U.type==="symbol"&&(!U.minzoom||U.minzoom<=K)&&(!U.maxzoom||U.maxzoom>K)){const G=U,Q=G.layout.get("symbol-z-elevate"),ne=G.layout.get("symbol-sort-key").constantOr(1)!==void 0,le=G.layout.get("symbol-z-order"),be=le==="viewport-y"||le==="auto"&&!(le!=="viewport-y"&&ne),xe=G.layout.get("text-allow-overlap")||G.layout.get("icon-allow-overlap")||G.layout.get("text-ignore-placement")||G.layout.get("icon-ignore-placement"),Te=be&&xe,Ee=this._inProgressLayer=this._inProgressLayer||new mS(G),Oe=i.av(U.source,U.scope);if(Ee.continuePlacement(Q||Te?b[Oe]:g[Oe],this.placement,this._showCollisionBoxes,U,z,C))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}const Rc=512/i.ab/2;class gS{constructor(a,c,g){this.tileID=a,this.bucketInstanceId=g,this.index=new i.bz(c.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const b=a.canonical.x*i.ab,C=a.canonical.y*i.ab;for(let I=0;I<c.length;I++){const{key:z,crossTileID:U,tileAnchorX:K,tileAnchorY:G}=c.get(I),Q=Math.floor((b+K)*Rc),ne=Math.floor((C+G)*Rc);this.index.add(Q,ne),this.keys.push(z),this.crossTileIDs.push(U)}this.index.finish()}findMatches(a,c,g){const b=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z),C=Rc/Math.pow(2,c.canonical.z-this.tileID.canonical.z),I=c.canonical.x*i.ab,z=c.canonical.y*i.ab;for(let U=0;U<a.length;U++){const K=a.get(U);if(K.crossTileID)continue;const{key:G,tileAnchorX:Q,tileAnchorY:ne}=K,le=Math.floor((I+Q)*C),be=Math.floor((z+ne)*C),xe=this.index.range(le-b,be-b,le+b,be+b);for(const Te of xe){const Ee=this.crossTileIDs[Te];if(this.keys[Te]===G&&!g.has(Ee)){g.add(Ee),K.crossTileID=Ee;break}}}}}class vu{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Uy{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){const c=Math.round((a-this.lng)/360);if(c!==0)for(const g in this.indexes){const b=this.indexes[g],C={};for(const I in b){const z=b[I];z.tileID=z.tileID.unwrapTo(z.tileID.wrap+c),C[z.tileID.key]=z}this.indexes[g]=C}this.lng=a}addBucket(a,c,g){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let C=0;C<c.symbolInstances.length;C++)c.symbolInstances.get(C).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]=new Set);const b=this.usedCrossTileIDs[a.overscaledZ];for(const C in this.indexes){const I=this.indexes[C];if(Number(C)>a.overscaledZ)for(const z in I){const U=I[z];U.tileID.isChildOf(a)&&U.findMatches(c.symbolInstances,a,b)}else{const z=I[a.scaledTo(Number(C)).key];z&&z.findMatches(c.symbolInstances,a,b)}}for(let C=0;C<c.symbolInstances.length;C++){const I=c.symbolInstances.get(C);I.crossTileID||(I.crossTileID=g.generate(),b.add(I.crossTileID))}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new gS(a,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(a,c){for(const g of c.crossTileIDs)this.usedCrossTileIDs[a].delete(g)}removeStaleBuckets(a){let c=!1;for(const g in this.indexes){const b=this.indexes[g];for(const C in b)a[b[C].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,b[C]),delete b[C],c=!0)}return c}}class gf{constructor(){this.layerIndexes={},this.crossTileIDs=new vu,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,c,g,b){let C=this.layerIndexes[a.fqid];C===void 0&&(C=this.layerIndexes[a.fqid]=new Uy);let I=!1;const z={};b.name!=="globe"&&C.handleWrapJump(g);for(const U of c){const K=U.getBucket(a);K&&a.fqid===K.layerIds[0]&&(K.bucketInstanceId||(K.bucketInstanceId=++this.maxBucketInstanceId),C.addBucket(U.tileID,K,this.crossTileIDs)&&(I=!0),z[K.bucketInstanceId]=!0)}return C.removeStaleBuckets(z)&&(I=!0),I}pruneUnusedLayers(a){const c={};a.forEach(g=>{c[g]=!0});for(const g in this.layerIndexes)c[g]||delete this.layerIndexes[g]}}const Ga=771;class Br{constructor(a,c,g,b){this.blendFunction=a,this.blendColor=c,this.mask=g,this.blendEquation=b}}Br.Replace=[1,0,1,0],Br.disabled=new Br(Br.Replace,i.bA.transparent,[!1,!1,!1,!1]),Br.unblended=new Br(Br.Replace,i.bA.transparent,[!0,!0,!0,!0]),Br.alphaBlended=new Br([1,Ga,1,Ga],i.bA.transparent,[!0,!0,!0,!0]),Br.alphaBlendedNonPremultiplied=new Br([770,Ga,770,Ga],i.bA.transparent,[!0,!0,!0,!0]),Br.multiply=new Br([774,0,774,0],i.bA.transparent,[!0,!0,!0,!0]);class lr{constructor(a,c,g){this.func=a,this.mask=c,this.range=g}}lr.ReadOnly=!1,lr.ReadWrite=!0,lr.disabled=new lr(519,lr.ReadOnly,[0,1]);const Ym=7680;class Ir{constructor(a,c,g,b,C,I){this.test=a,this.ref=c,this.mask=g,this.fail=b,this.depthFail=C,this.pass=I}}Ir.disabled=new Ir({func:519,mask:0},0,0,Ym,Ym,Ym);const Jm=1029,Gd=2305;class _r{constructor(a,c,g){this.enable=a,this.mode=c,this.frontFace=g}}function Qm(m,a){const c=i.bD(m,3);i.a6.mat4.fromQuat(m,a),i.bF(m,3,c)}function vf(m,a){const c=i.a6.quat.identity([]);return i.a6.quat.rotateZ(c,c,-a),i.a6.quat.rotateX(c,c,-m),c}function eg(m,a){const c=[m[0],m[1],0],g=[a[0],a[1],0];if(i.a6.vec3.length(c)>=1e-15){const I=i.a6.vec3.normalize([],c);i.a6.vec3.scale(g,I,i.a6.vec3.dot(g,I)),a[0]=g[0],a[1]=g[1]}const b=i.a6.vec3.cross([],a,m);if(i.a6.vec3.len(b)<1e-15)return null;const C=Math.atan2(-b[1],b[0]);return vf(Math.atan2(Math.sqrt(m[0]*m[0]+m[1]*m[1]),-m[2]),C)}_r.disabled=new _r(!1,Jm,Gd),_r.backCCW=new _r(!0,Jm,Gd),_r.backCW=new _r(!0,Jm,2304),_r.frontCW=new _r(!0,1028,2304),_r.frontCCW=new _r(!0,1028,Gd);class nc{constructor(a,c){this.position=a,this.orientation=c}get position(){return this._position}set position(a){if(a){const c=a instanceof i.a5?a:new i.a5(a[0],a[1],a[2]);this._renderWorldCopies&&(c.x=i.bB(c.x,0,1)),this._position=c}else this._position=null}lookAtPoint(a,c){if(this.orientation=null,!this.position)return;const g=this.position,b=this._elevation?this._elevation.getAtPointOrZero(i.a5.fromLngLat(a)):0,C=i.a5.fromLngLat(a,b),I=[C.x-g.x,C.y-g.y,C.z-g.z];c||(c=[0,0,1]),c[2]=Math.abs(c[2]),this.orientation=eg(I,c)}setPitchBearing(a,c){this.orientation=vf(i.bC(a),i.bC(-c))}}class Oc{constructor(a,c){this._transform=i.a6.mat4.identity([]),this.orientation=c,this.position=a}get mercatorPosition(){const a=this.position;return new i.a5(a[0],a[1],a[2])}get position(){const a=i.bD(this._transform,3);return[a[0],a[1],a[2]]}set position(a){var c;a&&i.bF(this._transform,3,[(c=a)[0],c[1],c[2],1])}get orientation(){return this._orientation}set orientation(a){this._orientation=a||i.a6.quat.identity([]),a&&Qm(this._transform,this._orientation)}getPitchBearing(){const a=this.forward(),c=this.right();return{bearing:Math.atan2(-c[1],c[0]),pitch:Math.atan2(Math.sqrt(a[0]*a[0]+a[1]*a[1]),-a[2])}}setPitchBearing(a,c){this._orientation=vf(a,c),Qm(this._transform,this._orientation)}forward(){const a=i.bD(this._transform,2);return[-a[0],-a[1],-a[2]]}up(){const a=i.bD(this._transform,1);return[-a[0],-a[1],-a[2]]}right(){const a=i.bD(this._transform,0);return[a[0],a[1],a[2]]}getCameraToWorld(a,c){const g=new Float64Array(16);return i.a6.mat4.invert(g,this.getWorldToCamera(a,c)),g}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(a,c,g){const b=this.position;i.a6.vec3.scale(b,b,-a);const C=new Float64Array(16);return i.a6.mat4.fromScaling(C,[g,g,g]),i.a6.mat4.translate(C,C,b),C[10]*=c,C}getWorldToCamera(a,c){const g=new Float64Array(16),b=new Float64Array(4),C=this.position;return i.a6.quat.conjugate(b,this._orientation),i.a6.vec3.scale(C,C,-a),i.a6.mat4.fromQuat(g,b),i.a6.mat4.translate(g,g,C),g[1]*=-1,g[5]*=-1,g[9]*=-1,g[13]*=-1,g[8]*=c,g[9]*=c,g[10]*=c,g[11]*=c,g}getCameraToClipPerspective(a,c,g,b){const C=new Float64Array(16);return i.a6.mat4.perspective(C,a,c,g,b),C}getCameraToClipOrthographic(a,c,g,b,C,I){const z=new Float64Array(16);return i.a6.mat4.ortho(z,a,c,g,b,C,I),z}getDistanceToElevation(a,c=!1){const g=a===0?0:i.bE(a,c?i.aN(this.position[1]):this.position[1]),b=this.forward();return(g-this.position[2])/b[2]}clone(){return new Oc([...this.position],[...this.orientation])}}const ea={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11};class yf{constructor(a=0,c=0,g=0,b=0){if(isNaN(a)||a<0||isNaN(c)||c<0||isNaN(g)||g<0||isNaN(b)||b<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=c,this.left=g,this.right=b}interpolate(a,c,g){return c.top!=null&&a.top!=null&&(this.top=i.aa(a.top,c.top,g)),c.bottom!=null&&a.bottom!=null&&(this.bottom=i.aa(a.bottom,c.bottom,g)),c.left!=null&&a.left!=null&&(this.left=i.aa(a.left,c.left,g)),c.right!=null&&a.right!=null&&(this.right=i.aa(a.right,c.right,g)),this}getCenter(a,c){const g=i.ap((this.left+a-this.right)/2,0,a),b=i.ap((this.top+c-this.bottom)/2,0,c);return new i.P(g,b)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new yf(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const yu=(m,a,c)=>(1-c)*m+c*a,_u=m=>m*m*m*m*m;class _f{constructor(a,c,g,b,C,I,z){this.tileSize=512,this._renderWorldCopies=C===void 0||C,this._minZoom=a||0,this._maxZoom=c||22,this._minPitch=g??0,this._maxPitch=b??60,this.setProjection(I),this.setMaxBounds(z),this.width=0,this.height=0,this._center=new i.bL(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new yf,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new Oc,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1}clone(){const a=new _f(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return a._elevation=this._elevation,a._centerAltitude=this._centerAltitude,a._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,a.tileSize=this.tileSize,a.mercatorFromTransition=this.mercatorFromTransition,a.width=this.width,a.height=this.height,a.cameraElevationReference=this.cameraElevationReference,a._center=this._center,a._setZoom(this.zoom),a._seaLevelZoom=this._seaLevelZoom,a.angle=this.angle,a._fov=this._fov,a._pitch=this._pitch,a._nearZ=this._nearZ,a._farZ=this._farZ,a._averageElevation=this._averageElevation,a._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,a._unmodified=this._unmodified,a._edgeInsets=this._edgeInsets.clone(),a._camera=this._camera.clone(),a._calcMatrices(),a.freezeTileCoverage=this.freezeTileCoverage,a.frustumCorners=this.frustumCorners,a}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<15}get elevation(){return this._elevation}set elevation(a){this._elevation!==a&&(this._elevation=a,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(a,c=!1){const g=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||g)&&this._updateCameraOnTerrain(),(a||g)&&this._constrainCamera(c),this._calcMatrices()}getProjection(){return i.ar(this.projection,["name","center","parallels"])}setProjection(a){this.projectionOptions=a||{name:"mercator"};const c=this.projection?this.getProjection():void 0;this.projection=i.bM(this.projectionOptions);const g=this.getProjection(),b=!i.bi(c,g);return b&&this._calcMatrices(),this.mercatorFromTransition=!1,b}setOrthographicProjectionAtLowPitch(a){return this._orthographicProjectionAtLowPitch!==a&&(this._orthographicProjectionAtLowPitch=a,this._calcMatrices(),!0)}setMercatorFromTransition(){const a=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=i.bM({name:"mercator"});const c=a!==this.projection.name;return c&&this._calcMatrices(),c}get minZoom(){return this._minZoom}set minZoom(a){this._minZoom!==a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))}get maxZoom(){return this._maxZoom}set maxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))}get minPitch(){return this._minPitch}set minPitch(a){this._minPitch!==a&&(this._minPitch=a,this.pitch=Math.max(this.pitch,a))}get maxPitch(){return this._maxPitch}set maxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.pitch=Math.min(this.pitch,a))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const a=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(a))}get cameraWorldSize(){const a=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(a))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return i.bE(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new i.P(this.width,this.height)}get bearing(){return i.bB(this.rotation,-180,180)}set bearing(a){this.rotation=a}get rotation(){return-this.angle/Math.PI*180}set rotation(a){const c=-a*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=i.a6.mat2.create(),i.a6.mat2.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(a){const c=i.ap(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const a=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/a)}set fov(a){a=Math.max(.01,Math.min(60,a)),this._fov!==a&&(this._unmodified=!1,this._fov=i.bC(a),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(a){this._averageElevation=a,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(a){const c=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._setZoom(c),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(a){this._zoom=a,this.scale=this.zoomScale(a),this.tileZoom=Math.floor(a),this.zoomFraction=a-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(a){this._tileCoverLift!==a&&(this._tileCoverLift=a)}_updateCameraOnTerrain(){const a=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,c=this.elevation&&a===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||a===Number.NEGATIVE_INFINITY&&(!c||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const g=this._elevation;c||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&g.exaggeration()&&this._centerAltitudeValidForExaggeration!==g.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*g.exaggeration(),this._centerAltitudeValidForExaggeration=g.exaggeration()):(this._centerAltitude=a||0,this._centerAltitudeValidForExaggeration=g.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const a=this._elevation,c=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],g=this.horizonLineFromTop();let b=0,C=0;for(let I=0;I<c.length;I++){const z=new i.P(c[I][0]*this.width,g+c[I][1]*(this.height-g)),U=a.pointCoordinate(z);if(!U)continue;const K=1/Math.hypot(U[0]-this._camera.position[0],U[1]-this._camera.position[1]);b+=U[3]*K,C+=K}return C===0?NaN:b/C}get center(){return this._center}set center(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const a=this._seaLevelZoom,c=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),g=this.pixelsPerMeter/this.worldSize*c,b=this._mercatorZfromZoom(a),C=this._mercatorZfromZoom(this._maxZoom),I=Math.max(b-g,C);this._setZoom(this._zoomFromMercatorZ(I))}get padding(){return this._edgeInsets.toJSON()}set padding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}computeZoomRelativeTo(a){const c=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,a.toAltitude()));let g;g=a.z<this._camera.position[2]?[c.x,c.y,c.z]:[a.x,a.y,a.z];const b=i.a6.vec3.length(i.a6.vec3.sub([],this._camera.position,g));return i.ap(this._zoomFromMercatorZ(b),this._minZoom,this._maxZoom)}setFreeCameraOptions(a){if(!this.height||!a.position&&!a.orientation)return;this._updateCameraState();let c=!1;if(a.orientation&&!i.a6.quat.exactEquals(a.orientation,this._camera.orientation)&&(c=this._setCameraOrientation(a.orientation)),a.position){const g=[a.position.x,a.position.y,a.position.z];i.a6.vec3.exactEquals(g,this._camera.position)||(this._setCameraPosition(g),c=!0)}c&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const a=this._camera.position,c=new nc;return c.position=new i.a5(a[0],a[1],a[2]),c.orientation=this._camera.orientation,c._elevation=this.elevation,c._renderWorldCopies=this.renderWorldCopies,c}_setCameraOrientation(a){if(!i.a6.quat.length(a))return!1;i.a6.quat.normalize(a,a);const c=i.a6.vec3.transformQuat([],[0,0,-1],a),g=i.a6.vec3.transformQuat([],[0,-1,0],a);if(g[2]<0)return!1;const b=eg(c,g);return!!b&&(this._camera.orientation=b,!0)}_setCameraPosition(a){const c=this.zoomScale(this.minZoom)*this.tileSize,g=this.zoomScale(this.maxZoom)*this.tileSize,b=this.cameraToCenterDistance;a[2]=i.ap(a[2],b/g,b/c),this._camera.position=a}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,c,g){this._unmodified=!1,this._edgeInsets.interpolate(a,c,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(a){const c=(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(a){const c=[new i.bN(0,a)];if(this.renderWorldCopies){const g=this.pointCoordinate(new i.P(0,0)),b=this.pointCoordinate(new i.P(this.width,0)),C=this.pointCoordinate(new i.P(this.width,this.height)),I=this.pointCoordinate(new i.P(0,this.height)),z=Math.floor(Math.min(g.x,b.x,C.x,I.x)),U=Math.floor(Math.max(g.x,b.x,C.x,I.x)),K=1;for(let G=z-K;G<=U+K;G++)G!==0&&c.push(new i.bN(G,a))}return c}isLODDisabled(a){return(!a||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(a,c,g){let b=[];const C=g!==void 0,I=!C;if(I&&this.zoom<c||C&&g[0]===0&&g[1]===0)return b;const z=new Set,U=(G,Q,ne,le,be)=>{const xe=i.c2(Q,G,ne,le,be);z.has(xe)||(b.push(new i.aA(G,Q,ne,le,be)),z.add(xe))};for(let G=0;G<a.length;G++){const Q=a[G];if(I&&Q.canonical.z!==c)continue;const ne=Q.canonical,le=Q.overscaledZ,be=Q.wrap,xe=1<<ne.z,Te=ne.x+1<xe,Ee=ne.x>0,Oe=ne.y+1<xe,Ve=ne.y>0,He=Q.wrap-(Ee?0:1),qe=Q.wrap+(Te?0:1),Xe=Ee?ne.x-1:xe-1,Ke=Te?ne.x+1:0;if(C)g[0]<0?(U(le,qe,ne.z,Ke,ne.y),g[1]<0&&Oe&&(U(le,be,ne.z,ne.x,ne.y+1),U(le,qe,ne.z,Ke,ne.y+1)),g[1]>0&&Ve&&(U(le,be,ne.z,ne.x,ne.y-1),U(le,qe,ne.z,Ke,ne.y-1))):g[0]>0?(U(le,He,ne.z,Xe,ne.y),g[1]<0&&Oe&&(U(le,be,ne.z,ne.x,ne.y+1),U(le,He,ne.z,Xe,ne.y+1)),g[1]>0&&Ve&&(U(le,be,ne.z,ne.x,ne.y-1),U(le,He,ne.z,Xe,ne.y-1))):g[1]<0&&Oe?U(le,be,ne.z,ne.x,ne.y+1):Ve&&U(le,be,ne.z,ne.x,ne.y-1);else{const Ye=Q.visibleQuadrants;1&Ye&&(U(le,He,ne.z,Xe,ne.y),Ve&&(U(le,be,ne.z,ne.x,ne.y-1),U(le,He,ne.z,Xe,ne.y-1))),2&Ye&&(U(le,qe,ne.z,Ke,ne.y),Ve&&(U(le,be,ne.z,ne.x,ne.y-1),U(le,qe,ne.z,Ke,ne.y-1))),4&Ye&&(U(le,He,ne.z,Xe,ne.y),Oe&&(U(le,be,ne.z,ne.x,ne.y+1),U(le,He,ne.z,Xe,ne.y+1))),8&Ye&&(U(le,qe,ne.z,Ke,ne.y),Oe&&(U(le,be,ne.z,ne.x,ne.y+1),U(le,qe,ne.z,Ke,ne.y+1)))}}const K=[];for(const G of b)b.some(Q=>G.isChildOf(Q))||K.push(G);if(b=K.filter(G=>!a.some(Q=>!!(G.overscaledZ<c&&Q.isChildOf(G))||G.equals(Q)||G.isChildOf(Q))),I){const G=1<<c,Q=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ne=[G*Q.x,G*Q.y],le=4,be=le*le;b=b.filter(xe=>{const Te=xe.canonical.x+.5-ne[0],Ee=xe.canonical.y+.5-ne[1];return Te*Te+Ee*Ee<be})}return b}coveringTiles(a){let c=this.coveringZoomLevel(a);const g=c,b=this.elevation&&this.elevation.exaggeration(),C=b&&!a.isTerrainDEM,I=this.projection.name==="mercator";if(a.minzoom!==void 0&&c<a.minzoom)return[];a.maxzoom!==void 0&&c>a.maxzoom&&(c=a.maxzoom);const z=this.locationCoordinate(this.center),U=this.center.lat,K=1<<c,G=[K*z.x,K*z.y,0],Q=this.projection.name==="globe",ne=!Q,le=i.bO.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,c,ne),be=Q?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),xe=K*i.bE(1,this.center.lat),Te=this._camera.position[2]/i.bE(1,this.center.lat),Ee=[K*be.x,K*be.y,Te*(ne?1:xe)],Oe=Q||b,Ve=this.cameraToCenterDistance/a.tileSize*(a.roundZoom?1:.502),He=this.isLODDisabled(!0)?c:0;let qe;if(this._elevation&&a.isTerrainDEM)qe=1e4*this._elevation.exaggeration();else if(this._elevation){const Et=this._elevation.getMinMaxForVisibleTiles();qe=Et?Et.max:this._centerAltitude}else qe=this._centerAltitude;const Xe=a.isTerrainDEM?-qe:this._elevation?this._elevation.getMinElevationBelowMSL():0,Ke=this.projection.isReprojectedInTileSpace?i.bP(this):1,Ye=Et=>{const Nt=new i.a5(Et.x+25e-6,Et.y,Et.z),en=new i.a5(Et.x,Et.y+25e-6,Et.z),rn=Et.toLngLat(),Jt=Nt.toLngLat(),In=en.toLngLat(),Wn=this.locationCoordinate(rn),Qn=this.locationCoordinate(Jt),Bn=this.locationCoordinate(In),nr=Math.hypot(Qn.x-Wn.x,Qn.y-Wn.y),$n=Math.hypot(Bn.x-Wn.x,Bn.y-Wn.y);return Math.sqrt(nr*$n)*Ke/25e-6},rt=Et=>{const Qt=qe,Nt=Xe;return{aabb:i.bS(this,K,0,0,0,Et,Nt,Qt,this.projection),zoom:0,x:0,y:0,minZ:Nt,maxZ:Qt,wrap:Et,fullyVisible:!1}},vt=[];let st=[];const it=c,zt=a.reparseOverscaled?g:c,jt=(Te-this._centerAltitude)*xe,tn=Et=>{if(!this._elevation||!Et.tileID||!I)return;const Qt=this._elevation.getMinMaxForTile(Et.tileID),Nt=Et.aabb;Qt?(Nt.min[2]=Qt.min,Nt.max[2]=Qt.max,Nt.center[2]=(Nt.min[2]+Nt.max[2])/2):(Et.shouldSplit=Sn(Et),Et.shouldSplit||(Nt.min[2]=Nt.max[2]=Nt.center[2]=this._centerAltitude))},fn=(Et,Qt)=>{if(.707*Qt<Et)return 1;const Nt=Qt/Et;return Nt/(1.4144271570014144+(Math.pow(1.1,Nt-1.4144271570014144+1)-1)/(1.1-1)-1)},Sn=Et=>{if(Et.zoom<He)return!0;if(Et.zoom===it)return!1;if(Et.shouldSplit!=null)return Et.shouldSplit;const Qt=Et.aabb.distanceX(Ee),Nt=Et.aabb.distanceY(Ee);let en=jt,rn=1;if(Q){en=Et.aabb.distanceZ(Ee);const $n=Math.pow(2,Et.zoom),hr=i.aN((Et.y+1)/$n),Pr=i.aN(Et.y/$n),Vr=Math.min(Math.max(U,hr),Pr),_i=i.c6(Vr)/i.c6(U);if(rn=Vr===U?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,_i/this._mercatorScaleRatio),this.zoom<=i.c3&&Et.zoom===it-1&&_i>=.9)return!0}else if(C&&(en=Et.aabb.distanceZ(Ee)*xe),this.projection.isReprojectedInTileSpace&&g<=5){const $n=Math.pow(2,Et.zoom),hr=Ye(new i.a5((Et.x+.5)/$n,(Et.y+.5)/$n));rn=hr>.85?1:hr}if(!I){const $n=Math.sqrt(Qt*Qt+Nt*Nt+en*en);let hr=(1<<it-Et.zoom)*Ve*rn;return hr*=fn(Math.max(en,jt),$n),$n<hr}let Jt=Number.MAX_VALUE,In=0;const Wn=Et.aabb.getCorners(),Qn=[];for(const $n of Wn){i.a6.vec3.sub(Qn,$n,Ee),Q||(C?Qn[2]*=xe:Qn[2]=jt);const hr=i.a6.vec3.dot(Qn,this._camera.forward());hr<Jt&&(Jt=hr,In=Math.abs(Qn[2]))}let Bn=(1<<it-Et.zoom)*Ve*rn;if(Bn*=fn(Math.max(In,jt),Jt),Jt<Bn)return!0;const nr=Et.aabb.closestPoint(G);return nr[0]===G[0]&&nr[1]===G[1]};if(this.renderWorldCopies)for(let Et=1;Et<=3;Et++)vt.push(rt(-Et)),vt.push(rt(Et));for(vt.push(rt(0));vt.length>0;){const Et=vt.pop(),Qt=Et.x,Nt=Et.y;let en=Et.fullyVisible;const rn=()=>this.projection.name==="globe"&&(Et.y===0||Et.y===(1<<Et.zoom)-1);if(!en){let Jt=Oe?Et.aabb.intersects(le):Et.aabb.intersectsFlat(le);if(Jt===0&&rn()){const In=new i.bQ(Et.zoom,Qt,Nt);Jt=i.bR(this,K,In,!0).intersects(le)}if(Jt===0)continue;en=Jt===2}if(Et.zoom!==it&&Sn(Et))for(let Jt=0;Jt<4;Jt++){const In=(Qt<<1)+Jt%2,Wn=(Nt<<1)+(Jt>>1),Qn={aabb:I?Et.aabb.quadrant(Jt):i.bS(this,K,Et.zoom+1,In,Wn,Et.wrap,Et.minZ,Et.maxZ,this.projection),zoom:Et.zoom+1,x:In,y:Wn,wrap:Et.wrap,fullyVisible:en,tileID:void 0,shouldSplit:void 0,minZ:Et.minZ,maxZ:Et.maxZ};C&&!Q&&(Qn.tileID=new i.aA(Et.zoom+1===it?zt:Et.zoom+1,Et.wrap,Et.zoom+1,In,Wn),tn(Qn)),vt.push(Qn)}else{const Jt=Et.zoom===it?zt:Et.zoom;if(a.minzoom&&a.minzoom>Jt)continue;let In=0;if(!en){let nr=Oe?Et.aabb.intersectsPrecise(le):Et.aabb.intersectsPreciseFlat(le);if(nr===0&&rn()){const $n=new i.bQ(Et.zoom,Qt,Nt);nr=i.bR(this,K,$n,!0).intersectsPrecise(le)}if(nr===0)continue;if(a.calculateQuadrantVisibility)if(le.containsPoint(Et.aabb.center))In=15;else for(let $n=0;$n<4;$n++)Et.aabb.quadrant($n).intersects(le)!==0&&(In|=1<<$n)}const Wn=G[0]-(.5+Qt+(Et.wrap<<Et.zoom))*(1<<c-Et.zoom),Qn=G[1]-.5-Nt,Bn=Et.tileID?Et.tileID:new i.aA(Jt,Et.wrap,Et.zoom,Qt,Nt);a.calculateQuadrantVisibility&&(Bn.visibleQuadrants=In),st.push({tileID:Bn,distanceSq:Wn*Wn+Qn*Qn})}}if(this.fogCullDistSq){const Et=this.fogCullDistSq,Qt=this.horizonLineFromTop();st=st.filter(Nt=>{const en=[0,0,0,1],rn=[i.ab,i.ab,0,1],Jt=this.calculateFogTileMatrix(Nt.tileID.toUnwrapped());i.a6.vec4.transformMat4(en,en,Jt),i.a6.vec4.transformMat4(rn,rn,Jt);const In=i.a6.vec4.min([],en,rn),Wn=i.a6.vec4.max([],en,rn),Qn=i.bT(In,Wn);if(Qn===0)return!0;let Bn=!1;const nr=this._elevation;if(nr&&Qn>Et&&Qt!==0){const $n=this.calculateProjMatrix(Nt.tileID.toUnwrapped());let hr;a.isTerrainDEM||(hr=nr.getMinMaxForTile(Nt.tileID)),hr||(hr={min:Xe,max:qe});const Pr=i.c4(this.rotation),Vr=[Pr[0]*i.ab,Pr[1]*i.ab,hr.max];i.a6.vec3.transformMat4(Vr,Vr,$n),Bn=(1-Vr[1])*this.height*.5<Qt}return Qn<Et||Bn})}return st.sort((Et,Qt)=>Et.distanceSq-Qt.distanceSq).map(Et=>Et.tileID)}resize(a,c){this.width=a,this.height=c,this.pixelsToGLUnits=[2/a,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(a){return Math.pow(2,a)}scaleZoom(a){return Math.log(a)/Math.LN2}project(a){const c=i.ap(a.lat,-i.bU,i.bU),g=this.projection.project(a.lng,c);return new i.P(g.x*this.worldSize,g.y*this.worldSize)}unproject(a){return this.projection.unproject(a.x/this.worldSize,a.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/i.bE(1,this.center.lat)/this.worldSize}setLocationAtPoint(a,c){let g,b;const C=this.centerPoint;if(this.projection.name==="globe"){const z=this.worldSize;g=(c.x-C.x)/z,b=(c.y-C.y)/z}else{const z=this.pointCoordinate(c),U=this.pointCoordinate(C);g=z.x-U.x,b=z.y-U.y}const I=this.locationCoordinate(a);this.setLocation(new i.a5(I.x-g,I.y-b))}setLocation(a){this.center=this.coordinateLocation(a),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(a){return this.projection.locationPoint(this,a)}locationPoint3D(a){return this.projection.locationPoint(this,a,!0)}pointLocation(a){return this.coordinateLocation(this.pointCoordinate(a))}pointLocation3D(a){return this.coordinateLocation(this.pointCoordinate3D(a))}locationCoordinate(a,c){const g=c?i.bE(c,a.lat):void 0,b=this.projection.project(a.lng,a.lat);return new i.a5(b.x,b.y,g)}coordinateLocation(a){return this.projection.unproject(a.x,a.y)}pointRayIntersection(a,c){const g=c??this._centerAltitude,b=[a.x,a.y,0,1],C=[a.x,a.y,1,1];i.a6.vec4.transformMat4(b,b,this.pixelMatrixInverse),i.a6.vec4.transformMat4(C,C,this.pixelMatrixInverse);const I=C[3];i.a6.vec4.scale(b,b,1/b[3]),i.a6.vec4.scale(C,C,1/I);const z=b[2],U=C[2];return{p0:b,p1:C,t:z===U?0:(g-z)/(U-z)}}screenPointToMercatorRay(a){const c=[a.x,a.y,0,1],g=[a.x,a.y,1,1];return i.a6.vec4.transformMat4(c,c,this.pixelMatrixInverse),i.a6.vec4.transformMat4(g,g,this.pixelMatrixInverse),i.a6.vec4.scale(c,c,1/c[3]),i.a6.vec4.scale(g,g,1/g[3]),c[2]=i.bE(c[2],this._center.lat)*this.worldSize,g[2]=i.bE(g[2],this._center.lat)*this.worldSize,i.a6.vec4.scale(c,c,1/this.worldSize),i.a6.vec4.scale(g,g,1/this.worldSize),new i.aj([c[0],c[1],c[2]],i.a6.vec3.normalize([],i.a6.vec3.sub([],g,c)))}rayIntersectionCoordinate(a){const{p0:c,p1:g,t:b}=a,C=i.bE(c[2],this._center.lat),I=i.bE(g[2],this._center.lat);return new i.a5(i.aa(c[0],g[0],b)/this.worldSize,i.aa(c[1],g[1],b)/this.worldSize,i.aa(C,I,b))}pointCoordinate(a,c=this._centerAltitude){return this.projection.pointCoordinate(this,a.x,a.y,c)}pointCoordinate3D(a){if(!this.elevation)return this.pointCoordinate(a);let c=this.projection.pointCoordinate3D(this,a.x,a.y);if(c)return new i.a5(c[0],c[1],c[2]);let g=0,b=this.horizonLineFromTop();if(a.y>b)return this.pointCoordinate(a);const C=.02*b,I=a.clone();for(let z=0;z<10&&b-g>C;z++){I.y=i.aa(g,b,.66);const U=this.projection.pointCoordinate3D(this,I.x,I.y);U?(b=I.y,c=U):g=I.y}return c?new i.a5(c[0],c[1],c[2]):this.pointCoordinate(a)}isPointAboveHorizon(a){return this.projection.isPointAboveHorizon(this,a)}isPointOnSurface(a){if(a.y<0||a.y>this.height||a.x<0||a.x>this.width)return!1;if(this.elevation||this.zoom>=i.bV)return!this.isPointAboveHorizon(a);const c=this.pointCoordinate(a);return c.y>=0&&c.y<=1}_coordinatePoint(a,c){const g=c&&this.elevation?this.elevation.getAtPointOrZero(a,this._centerAltitude):this._centerAltitude,b=[a.x*this.worldSize,a.y*this.worldSize,g+a.toAltitude(),1];return i.a6.vec4.transformMat4(b,b,this.pixelMatrix),b[3]>0?new i.P(b[0]/b[3],b[1]/b[3]):new i.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:a,left:c}=this._edgeInsets,g=this.height-this._edgeInsets.bottom,b=this.width-this._edgeInsets.right,C=this.pointLocation3D(new i.P(c,a)),I=this.pointLocation3D(new i.P(b,a)),z=this.pointLocation3D(new i.P(b,g)),U=this.pointLocation3D(new i.P(c,g));let K=Math.min(C.lng,I.lng,z.lng,U.lng),G=Math.max(C.lng,I.lng,z.lng,U.lng),Q=Math.min(C.lat,I.lat,z.lat,U.lat),ne=Math.max(C.lat,I.lat,z.lat,U.lat);const le=Math.pow(2,-this.zoom)/16*270,be=this.projection.name==="globe"?1:4,xe=(Te,Ee,Oe,Ve,He)=>{const qe=(Te+Oe)/2,Xe=(Ee+Ve)/2,Ke=new i.P(qe,Xe),{lng:Ye,lat:rt}=this.pointLocation3D(Ke),vt=Math.max(0,K-Ye,Q-rt,Ye-G,rt-ne);K=Math.min(K,Ye),G=Math.max(G,Ye),Q=Math.min(Q,rt),ne=Math.max(ne,rt),(He<be||vt>le)&&(xe(Te,Ee,qe,Xe,He+1),xe(qe,Xe,Oe,Ve,He+1))};if(xe(c,a,b,a,1),xe(b,a,b,g,1),xe(b,g,c,g,1),xe(c,g,c,a,1),this.projection.name==="globe"){const[Te,Ee]=i.bW(this);Te?(ne=90,G=180,K=-180):Ee&&(Q=-90,G=180,K=-180)}return new i.as(new i.bL(K,Q),new i.bL(G,ne))}_getBoundsRectangular(a,c){const{top:g,left:b}=this._edgeInsets,C=this.height-this._edgeInsets.bottom,I=this.width-this._edgeInsets.right,z=new i.P(b,g),U=new i.P(I,g),K=new i.P(I,C),G=new i.P(b,C);let Q=this.pointCoordinate(z,a),ne=this.pointCoordinate(U,a);const le=this.pointCoordinate(K,c),be=this.pointCoordinate(G,c),xe=(Te,Ee)=>(Ee.y-Te.y)/(Ee.x-Te.x);return Q.y>1&&ne.y>=0?Q=new i.a5((1-be.y)/xe(be,Q)+be.x,1):Q.y<0&&ne.y<=1&&(Q=new i.a5(-be.y/xe(be,Q)+be.x,0)),ne.y>1&&Q.y>=0?ne=new i.a5((1-le.y)/xe(le,ne)+le.x,1):ne.y<0&&Q.y<=1&&(ne=new i.a5(-le.y/xe(le,ne)+le.x,0)),new i.as().extend(this.coordinateLocation(Q)).extend(this.coordinateLocation(ne)).extend(this.coordinateLocation(be)).extend(this.coordinateLocation(le))}_getBoundsRectangularTerrain(){const a=this.elevation;if(!a.visibleDemTiles.length||a.isUsingMockSource())return this._getBoundsRectangular(0,0);const c=a.visibleDemTiles.reduce((g,b)=>{if(b.dem){const C=b.dem.tree;g.min=Math.min(g.min,C.minimums[0]),g.max=Math.max(g.max,C.maximums[0])}return g},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(c.min*a.exaggeration(),c.max*a.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(a=!0){const c=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,g=this.height/2-c*(1-this._horizonShift);return a?Math.max(0,g):g}getMaxBounds(){return this.maxBounds}setMaxBounds(a){this.maxBounds=a,this.minLat=-i.bU,this.maxLat=i.bU,this.minLng=-180,this.maxLng=180,a&&(this.minLat=a.getSouth(),this.maxLat=a.getNorth(),this.minLng=a.getWest(),this.maxLng=a.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=i.am(this.minLng)*this.tileSize,this.worldMaxX=i.am(this.maxLng)*this.tileSize,this.worldMinY=i.at(this.maxLat)*this.tileSize,this.worldMaxY=i.at(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(a,c){return this.projection.createTileMatrix(this,c,a)}calculateDistanceTileData(a){const c=a.key,g=this._distanceTileDataCache;if(g[c])return g[c];const b=a.canonical,C=1/this.height,I=this.cameraWorldSize,z=I/this.zoomScale(b.z),U=(b.x+Math.pow(2,b.z)*a.wrap)*z,K=b.y*z,G=this.point;G.x*=I/this.worldSize,G.y*=I/this.worldSize;const Q=this.angle,ne=Math.sin(-Q),le=-Math.cos(-Q);return g[c]={bearing:[ne,le],center:[(G.x-U)*C,(G.y-K)*C],scale:z/i.ab*C},g[c]}calculateFogTileMatrix(a){const c=a.key,g=this._fogTileMatrixCache;if(g[c])return g[c];const b=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,a);return i.a6.mat4.multiply(b,this.worldToFogMatrix,b),g[c]=new Float32Array(b),g[c]}calculateProjMatrix(a,c=!1,g=!1){const b=a.key;let C;if(C=g?this._expandedProjMatrixCache:c?this._alignedProjMatrixCache:this._projMatrixCache,C[b])return C[b];const I=this.calculatePosMatrix(a,this.worldSize);let z;return z=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:g?this.expandedFarZProjMatrix:c?this.alignedProjMatrix:this.projMatrix,i.a6.mat4.multiply(I,z,I),C[b]=new Float32Array(I),C[b]}calculatePixelsToTileUnitsMatrix(a){const c=a.tileID.key,g=this._pixelsToTileUnitsCache;if(g[c])return g[c];const b=i.bX(a,this);return g[c]=b,g[c]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const a=1/this.worldSize,c=i.a6.mat4.fromScaling([],[a,a,a]);return i.a6.mat4.multiply(c,c,this.globeMatrix),c}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const a=this._elevation;this._updateCameraState();const c=i.bE(1,this._center.lat)*this.worldSize,g=this._computeCameraPosition(c),b=this._camera.forward(),C=i.bE(1,this._center.lat);g[2]/=C,b[2]/=C,i.a6.vec3.normalize(b,b);const I=a.raycast(g,b,a.exaggeration());if(I){const z=i.a6.vec3.scaleAndAdd([],g,b,I),U=new i.a5(z[0],z[1],i.bE(z[2],i.aN(z[1]))),K=(U.z+i.a6.vec3.length([U.x-g[0],U.y-g[1],U.z-g[2]*C]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(K),this._centerAltitude=U.toAltitude(),this._center=this.coordinateLocation(U),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(a=!1){if(!this._elevation)return;const c=this._elevation,g=i.bE(1,this._center.lat)*this.worldSize,b=this._computeCameraPosition(g),C=c.getAtPointOrZero(new i.a5(...b)),I=this.pixelsPerMeter/this.worldSize*C,z=this._minimumHeightOverTerrain(),U=b[2]-I;if(U<=z)if(U<0||a){const K=this.locationCoordinate(this._center,this._centerAltitude),G=[b[0],b[1],K.z-b[2]],Q=i.a6.vec3.length(G);G[2]-=(z-U)/this._pixelsPerMercatorPixel;const ne=i.a6.vec3.length(G);if(ne===0)return;i.a6.vec3.scale(G,G,Q/ne*this._pixelsPerMercatorPixel),this._camera.position=[b[0],b[1],K.z*this._pixelsPerMercatorPixel-G[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const a=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||a){const ne=this.center;return ne.lat=i.ap(ne.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!a)&&(ne.lng=i.ap(ne.lng,this.minLng,this.maxLng)),this.center=ne,void(this._constraining=!1)}const c=this._unmodified,{x:g,y:b}=this.point;let C=0,I=g,z=b;const U=this.width/2,K=this.height/2,G=this.worldMinY*this.scale,Q=this.worldMaxY*this.scale;if(b-K<G&&(z=G+K),b+K>Q&&(z=Q-K),Q-G<this.height&&(C=Math.max(C,this.height/(Q-G)),z=(Q+G)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const ne=this.worldMinX*this.scale,le=this.worldMaxX*this.scale,be=this.worldSize/2-(ne+le)/2;I=(g+be+this.worldSize)%this.worldSize-be,I-U<ne&&(I=ne+U),I+U>le&&(I=le-U),le-ne<this.width&&(C=Math.max(C,this.width/(le-ne)),I=(le+ne)/2)}I===g&&z===b||(this.center=this.unproject(new i.P(I,z))),C&&(this.zoom+=this.scaleZoom(C)),this._constrainCamera(),this._unmodified=c,this._constraining=!1}_minZoomForBounds(){let a=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(a=Math.max(a,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),a}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const a=this.centerOffset,c=this.projection.name==="globe",g=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=i.bE(1,this.center.lat)/i.bE(1,i.c5));const b=i.bY(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,b),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const C=this.projection.zAxisUnit==="meters"?g:1,I=this._camera.getWorldToCamera(this.worldSize,C);let z;const U=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(U[8]=2*-a.x/this.width,U[9]=2*a.y/this.height,this.isOrthographic){let rt=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),vt=rt*this.aspect,st=-vt,it=-rt;vt-=a.x,st-=a.x,rt+=a.y,it+=a.y,z=this._camera.getCameraToClipOrthographic(st,vt,it,rt,this._nearZ,this._farZ),((zt,jt,tn,fn)=>{for(let Sn=0;Sn<16;Sn++)zt[Sn]=yu(jt[Sn],tn[Sn],fn)})(z,z,U,_u(this.pitch>=15?1:this.pitch/15))}else z=U;const K=i.a6.mat4.mul([],U,I);let G=i.a6.mat4.mul([],z,I);if(this.projection.isReprojectedInTileSpace){const rt=this.locationCoordinate(this.center),vt=i.a6.mat4.identity([]);i.a6.mat4.translate(vt,vt,[rt.x*this.worldSize,rt.y*this.worldSize,0]),i.a6.mat4.multiply(vt,vt,i.bZ(this)),i.a6.mat4.translate(vt,vt,[-rt.x*this.worldSize,-rt.y*this.worldSize,0]),i.a6.mat4.multiply(G,G,vt),i.a6.mat4.multiply(K,K,vt),this.inverseAdjustmentMatrix=i.b_(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=i.a6.mat4.scale([],G,[this.worldSize,this.worldSize,this.worldSize/C,1]),this.projMatrix=G,this.invProjMatrix=i.a6.mat4.invert(new Float64Array(16),this.projMatrix),c){const rt=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);rt[8]=2*-a.x/this.width,rt[9]=2*a.y/this.height,this.expandedFarZProjMatrix=i.a6.mat4.mul([],rt,I)}else this.expandedFarZProjMatrix=this.projMatrix;const Q=i.a6.mat4.invert([],z);this.frustumCorners=i.b$.fromInvProjectionMatrix(Q,this.horizonLineFromTop(),this.height),this.cameraFrustum=i.bO.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!c);const ne=new Float32Array(16);i.a6.mat4.identity(ne),i.a6.mat4.scale(ne,ne,[1,-1,1]),i.a6.mat4.rotateX(ne,ne,this._pitch),i.a6.mat4.rotateZ(ne,ne,this.angle);const le=i.a6.mat4.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=i.a6.mat4.clone(le);const be=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;le[8]=2*-a.x/this.width,le[9]=2*(a.y+be)/this.height,this.skyboxMatrix=i.a6.mat4.multiply(ne,le,ne);const xe=this.point,Te=xe.x,Ee=xe.y,Oe=this.width%2/2,Ve=this.height%2/2,He=Math.cos(this.angle),qe=Math.sin(this.angle),Xe=Te-Math.round(Te)+He*Oe+qe*Ve,Ke=Ee-Math.round(Ee)+He*Ve+qe*Oe,Ye=new Float64Array(G);if(i.a6.mat4.translate(Ye,Ye,[Xe>.5?Xe-1:Xe,Ke>.5?Ke-1:Ke,0]),this.alignedProjMatrix=Ye,G=i.a6.mat4.create(),i.a6.mat4.scale(G,G,[this.width/2,-this.height/2,1]),i.a6.mat4.translate(G,G,[1,-1,0]),this.labelPlaneMatrix=G,G=i.a6.mat4.create(),i.a6.mat4.scale(G,G,[1,-1,1]),i.a6.mat4.translate(G,G,[-1,-1,0]),i.a6.mat4.scale(G,G,[2/this.width,2/this.height,1]),this.glCoordMatrix=G,this.pixelMatrix=i.a6.mat4.multiply(new Float64Array(16),this.labelPlaneMatrix,K),this._calcFogMatrices(),this._distanceTileDataCache={},G=i.a6.mat4.invert(new Float64Array(16),this.pixelMatrix),!G)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=G,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=i.c0(this);const rt=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=i.a6.vec3.transformMat4(rt,rt,I),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=G;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const a=this.cameraWorldSizeForFog,c=this.cameraPixelsPerMeter,g=this._camera.position,b=1/this.height/this._pixelsPerMercatorPixel,C=[a,a,c];i.a6.vec3.scale(C,C,b),i.a6.vec3.scale(g,g,-1),i.a6.vec3.multiply(g,g,C);const I=i.a6.mat4.create();i.a6.mat4.translate(I,I,g),i.a6.mat4.scale(I,I,C),this.mercatorFogMatrix=I,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(a,c,b)}_computeCameraPosition(a){const c=(a=a||this.pixelsPerMeter)/this.pixelsPerMeter,g=this._camera.forward(),b=this.point,C=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*c-a/this.worldSize*this._centerAltitude;return[b.x/this.worldSize-g[0]*C,b.y/this.worldSize-g[1]*C,a/this.worldSize*this._centerAltitude-g[2]*C]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(a){const c=this._maxCameraBoundsDistance()*Math.cos(this._pitch),g=this._camera.position[2],b=a[2];let C=1;this.projection.wrap&&(this.center=this.center.wrap()),b>0&&(C=Math.min((c-g)/b,1)),this._camera.position=i.a6.vec3.scaleAndAdd([],this._camera.position,a,C),this._updateStateFromCamera()}_updateStateFromCamera(){const a=this._camera.position,c=this._camera.forward(),{pitch:g,bearing:b}=this._camera.getPitchBearing(),C=i.bE(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,I=this._mercatorZfromZoom(this._maxZoom)*Math.cos(i.bC(this._maxPitch)),z=Math.max((a[2]-C)/Math.cos(g),I),U=this._zoomFromMercatorZ(z);i.a6.vec3.scaleAndAdd(a,a,c,z),this._pitch=i.ap(g,i.bC(this.minPitch),i.bC(this.maxPitch)),this.angle=i.bB(b,-Math.PI,Math.PI),this._setZoom(i.ap(U,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new i.a5(a[0],a[1],a[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(a){return Math.pow(2,a)*this.tileSize}_mercatorZfromZoom(a){return this.cameraToCenterDistance/this._worldSizeFromZoom(a)}_minimumHeightOverTerrain(){const a=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(a)}_zoomFromMercatorZ(a){return this.scaleZoom(this.cameraToCenterDistance/(a*this.tileSize))}zoomFromMercatorZAdjusted(a){let c=0,g=i.bV,b=0,C=1/0;for(;g-c>1e-6&&g>c;){const I=c+.5*(g-c),z=this.tileSize*Math.pow(2,I),U=this.getCameraToCenterDistance(this.projection,I,z),K=this.scaleZoom(U/(a*this.tileSize)),G=Math.abs(I-K);G<C&&(C=G,b=I),I<K?c=I:g=I}return b}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(i.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(a,c){const g=Math.min(a.x,c.x),b=Math.max(a.x,c.x),C=Math.min(a.y,c.y),I=Math.max(a.y,c.y);if(C<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const z=[new i.P(g,C),new i.P(b,I),new i.P(g,I),new i.P(b,C)],U=this.renderWorldCopies?-3:0,K=this.renderWorldCopies?4:1;for(const G of z){const Q=this.pointRayIntersection(G);if(Q.t<0)return!0;const ne=this.rayIntersectionCoordinate(Q);if(ne.x<U||ne.y<0||ne.x>K||ne.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+i.c1(this.fovAboveCenter)>88||this.anyCornerOffEdge(new i.P(0,0),new i.P(this.width,this.height))}zoomDeltaToMovement(a,c){const g=i.a6.vec3.length(i.a6.vec3.sub([],this._camera.position,a)),b=this._zoomFromMercatorZ(g)+c;return g-this._mercatorZfromZoom(b)}getCameraPoint(){if(this.projection.name==="globe"){const a=function([c,g,b],C){const I=[c,g,b,1];i.a6.vec4.transformMat4(I,I,C);const z=I[3]=Math.max(I[3],1e-6);return I[0]/=z,I[1]/=z,I[2]/=z,I}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new i.P(a[0],a[1])}{const a=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new i.P(0,a))}}getCameraToCenterDistance(a,c=this.zoom,g=this.worldSize){const b=i.bY(a,c,this.width,this.height,1024),C=a.pixelSpaceConversion(this.center.lat,g,b);let I=.5/Math.tan(.5*this._fov)*this.height*C;return this.isOrthographic&&(I=yu(1,I,_u(this.pitch>=15?1:this.pitch/15))),I}getWorldToCameraMatrix(){const a=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&i.a6.mat4.multiply(a,a,this.globeMatrix),a}getFrustum(a){return i.bO.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,a,this.projection.zAxisUnit==="meters")}}const ml=(m,a)=>{if(a>0&&m.terrain&&i.w("Cutoff is currently disabled on terrain"),a<=0||m.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const c=m.transform,g=Math.max(Math.abs(c._zoom-(m.minCutoffZoom-1)),1),b=c.isLODDisabled(!1)?i.a7(60,45,c.pitch):i.a7(30,15,c.pitch),C=c._farZ-c._nearZ,I=a*c.height,z=((1-(U=b))*c.cameraToCenterDistance+U*(c._farZ+I))*g;var U;return{shouldRenderCutoff:b<1,uniformValues:{u_cutoff_params:[c._nearZ,c._farZ,(z-c._nearZ)/C,(z-I-c._nearZ)/C]}}},eo={cascadeCount:2,normalOffset:3,shadowMapResolution:2048};class tg{constructor(a,c){this.aabb=a,this.lastCascade=c}}class Tn{add(a,c){const g=this.receivers[a.key];g!==void 0?(g.aabb.min[0]=Math.min(g.aabb.min[0],c.min[0]),g.aabb.min[1]=Math.min(g.aabb.min[1],c.min[1]),g.aabb.min[2]=Math.min(g.aabb.min[2],c.min[2]),g.aabb.max[0]=Math.max(g.aabb.max[0],c.max[0]),g.aabb.max[1]=Math.max(g.aabb.max[1],c.max[1]),g.aabb.max[2]=Math.max(g.aabb.max[2],c.max[2])):this.receivers[a.key]=new tg(c,null)}clear(){this.receivers={}}get(a){return this.receivers[a.key]}computeRequiredCascades(a,c,g){const b=i.ca.fromPoints(a.points);let C=0;for(const I in this.receivers){const z=this.receivers[I];if(!z||!b.intersectsAabb(z.aabb))continue;z.aabb.min=b.closestPoint(z.aabb.min),z.aabb.max=b.closestPoint(z.aabb.max);const U=z.aabb.getCorners();for(let K=0;K<g.length;K++){let G=!0;for(const Q of U){const ne=[Q[0]*c,Q[1]*c,Q[2]];if(i.a6.vec3.transformMat4(ne,ne,g[K].matrix),ne[0]<-1||ne[0]>1||ne[1]<-1||ne[1]>1){G=!1;break}}if(z.lastCascade=K,C=Math.max(C,K),G)break}}return C+1}}class Wy{constructor(a){this.painter=a,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new Tn,this._depthMode=new lr(a.context.gl.LEQUAL,lr.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,a.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),a.tp.registerParameter(eo,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),a.tp.registerParameter(eo,["Shadows"],"normalOffset",{min:0,max:10,step:.05}),a.tp.registerParameter(eo,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),a.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const a of this._cascades)a.texture.destroy(),a.framebuffer.destroy();this._cascades=[]}updateShadowParameters(a,c){const g=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!c||!c.properties)return;const b=c.properties.get("shadow-intensity");if(!c.shadowsEnabled()||b<=0||(this._shadowLayerCount=g.style.order.reduce((be,xe)=>{const Te=g.style._mergedLayers[xe];return be+(Te.hasShadowPass()&&!Te.isHidden(a.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const C=g.context,I=eo.shadowMapResolution,z=eo.shadowMapResolution;if(this._cascades.length===0||eo.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let be=0;be<eo.cascadeCount;++be){const xe=g._shadowMapDebug,Te=C.gl,Ee=C.createFramebuffer(I,z,xe,"texture"),Oe=new i.T(C,{width:I,height:z,data:null},Te.DEPTH_COMPONENT16);if(Ee.depthAttachment.set(Oe.texture),xe){const Ve=new i.T(C,{width:I,height:z,data:null},Te.RGBA8);Ee.colorAttachment.set(Ve.texture)}this._cascades.push({framebuffer:Ee,texture:Oe,matrix:[],far:0,boundingSphereRadius:0,frustum:new i.bO,scale:0})}}this.shadowDirection=xf(c);let U=0;if(a.elevation){const be=a.elevation,xe=[1e4,-1e4];be.visibleDemTiles.filter(Te=>Te.dem).forEach(Te=>{const Ee=Te.dem.tree;xe[0]=Math.min(xe[0],Ee.minimums[0]),xe[1]=Math.max(xe[1],Ee.maximums[0])}),xe[0]!==1e4&&(U=(xe[1]-xe[0])*be.exaggeration())}const K=1.5*a.cameraToCenterDistance,G=3*K,Q=new Float64Array(16);for(let be=0;be<this._cascades.length;++be){const xe=this._cascades[be];let Te=a.height/50,Ee=1;eo.cascadeCount===1?Ee=G:be===0?Ee=K:(Te=K,Ee=G);const[Oe,Ve]=wf(a,this.shadowDirection,Te,Ee,eo.shadowMapResolution,U);xe.scale=a.scale,xe.matrix=Oe,xe.boundingSphereRadius=Ve,i.a6.mat4.invert(Q,xe.matrix),xe.frustum=i.bO.fromInvProjectionMatrix(Q,1,0,!0),xe.far=Ee}const ne=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[ne].far,this._cascades[ne].far],this._uniformValues.u_shadow_intensity=b,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/eo.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=eo.shadowMapResolution,this._uniformValues.u_shadowmap_0=ea.ShadowMap0,this._uniformValues.u_shadowmap_1=ea.ShadowMap0+1,this._groundShadowTiles=g.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const le=g.transform.elevation;for(const be of this._groundShadowTiles){let xe={min:0,max:0};if(le){const Te=le.getMinMaxForTile(be);Te&&(xe=Te)}this.addShadowReceiver(be.toUnwrapped(),xe.min,xe.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(a){this._enabled=a}drawShadowPass(a,c){if(!this.enabled)return;const g=this.painter,b=g.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(g.transform.getFrustum(0),g.transform.worldSize,this._cascades),b.viewport.set([0,0,eo.shadowMapResolution,eo.shadowMapResolution]);for(let C=0;C<this._numCascadesToRender;++C){g.currentShadowCascade=C,b.bindFramebuffer.set(this._cascades[C].framebuffer.framebuffer),b.clear({color:i.bA.white,depth:1});for(const I of a.order){const z=a._mergedLayers[I];if(!z.hasShadowPass()||z.isHidden(g.transform.zoom))continue;const U=a.getLayerSourceCache(z),K=U?c[U.id]:void 0;(z.type==="model"||K&&K.length)&&g.renderLayer(g,U,z,K)}}g.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const a=this.painter,c=a.style,g=a.context,b=c.directionalLight,C=c.ambientLight;if(!b||!C)return;const I=[],z=ml(a,a.longestCutoffRange);z.shouldRenderCutoff&&I.push("RENDER_CUTOFF"),I.push("RENDER_SHADOWS","DEPTH_TEXTURE"),this.useNormalOffset&&I.push("NORMAL_OFFSET");const U=bf(c,b,C),K=new lr(g.gl.LEQUAL,lr.ReadOnly,a.depthRangeFor3D);for(const G of this._groundShadowTiles){const Q=G.toUnwrapped(),ne=a.isTileAffectedByFog(G),le=a.getOrCreateProgram("groundShadow",{defines:I,overrideFog:ne});this.setupShadows(Q,le),a.uploadCommonUniforms(g,le,Q,null,z);const be={u_matrix:a.transform.calculateProjMatrix(Q),u_ground_shadow_factor:U};le.draw(a,g.gl.TRIANGLES,K,Ir.disabled,Br.multiply,_r.disabled,be,"ground_shadow",a.tileExtentBuffer,a.quadTriangleIndexBuffer,a.tileExtentSegments,{},a.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?Br.unblended:Br.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(a){const c=this.painter.transform,g=c.calculatePosMatrix(a,c.worldSize);return i.a6.mat4.multiply(g,this._cascades[this.painter.currentShadowCascade].matrix,g),Float32Array.from(g)}calculateShadowPassMatrixFromMatrix(a){return i.a6.mat4.multiply(a,this._cascades[this.painter.currentShadowCascade].matrix,a),Float32Array.from(a)}setupShadows(a,c,g,b=0){if(!this.enabled)return;const C=this.painter.transform,I=this.painter.context,z=I.gl,U=this._uniformValues,K=new Float64Array(16),G=C.calculatePosMatrix(a,C.worldSize);for(let Q=0;Q<this._cascades.length;Q++)i.a6.mat4.multiply(K,this._cascades[Q].matrix,G),U[Q===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(K),I.activeTexture.set(z.TEXTURE0+ea.ShadowMap0+Q),this._cascades[Q].texture.bind(z.NEAREST,z.CLAMP_TO_EDGE);if(this.useNormalOffset=!!g,this.useNormalOffset){const Q=i.c9(a.canonical),ne=2/C.tileSize*i.ab/eo.shadowMapResolution,le=ne*this._cascades[0].boundingSphereRadius,be=ne*this._cascades[this._cascades.length-1].boundingSphereRadius,xe=(g==="vector-tile"?1:3)/Math.pow(2,b-a.canonical.z-(1-C.zoom+Math.floor(C.zoom)));U.u_shadow_normal_offset=[Q,le*xe,be*xe],U.u_shadow_bias=[6e-5,.0012,.012]}else U.u_shadow_bias=[36e-5,.0012,.012];c.setShadowUniformValues(I,U)}setupShadowsFromMatrix(a,c,g=!1){if(!this.enabled)return;const b=this.painter.context,C=b.gl,I=this._uniformValues,z=new Float64Array(16);for(let U=0;U<eo.cascadeCount;U++)i.a6.mat4.multiply(z,this._cascades[U].matrix,a),I[U===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(z),b.activeTexture.set(C.TEXTURE0+ea.ShadowMap0+U),this._cascades[U].texture.bind(C.NEAREST,C.CLAMP_TO_EDGE);if(this.useNormalOffset=g,g){const U=eo.normalOffset;I.u_shadow_normal_offset=[1,U,U],I.u_shadow_bias=[6e-5,.0012,.012]}else I.u_shadow_bias=[36e-5,.0012,.012];c.setShadowUniformValues(b,I)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(a,c,g,b){if(b[2]>=0)return{};const C=function(U,K,G){const Q=G/(1<<U.canonical.z);return new i.ca([U.canonical.x*Q+U.wrap*G,U.canonical.y*Q+U.wrap*G,0],[(U.canonical.x+1)*Q+U.wrap*G,(U.canonical.y+1)*Q+U.wrap*G,K])}(a,c,g).getCorners(),I=c/-b[2];b[0]<0?(i.a6.vec3.add(C[0],C[0],[b[0]*I,0,0]),i.a6.vec3.add(C[3],C[3],[b[0]*I,0,0])):b[0]>0&&(i.a6.vec3.add(C[1],C[1],[b[0]*I,0,0]),i.a6.vec3.add(C[2],C[2],[b[0]*I,0,0])),b[1]<0?(i.a6.vec3.add(C[0],C[0],[0,b[1]*I,0]),i.a6.vec3.add(C[1],C[1],[0,b[1]*I,0])):b[1]>0&&(i.a6.vec3.add(C[2],C[2],[0,b[1]*I,0]),i.a6.vec3.add(C[3],C[3],[0,b[1]*I,0]));const z={};return z.vertices=C,z.planes=[xu(C[1],C[0],C[4]),xu(C[2],C[1],C[5]),xu(C[3],C[2],C[6]),xu(C[0],C[3],C[7])],z}addShadowReceiver(a,c,g){this._receivers.add(a,i.ca.fromTileIdAndHeight(a,c,g))}getMaxCascadeForTile(a){const c=this._receivers.get(a);return c&&c.lastCascade?c.lastCascade:0}}function xu(m,a,c){const g=i.a6.vec3.sub([],c,a),b=i.a6.vec3.sub([],m,a),C=i.a6.vec3.cross([],g,b),I=i.a6.vec3.length(C);return I===0?[0,0,1,0]:(i.a6.vec3.scale(C,C,1/I),[C[0],C[1],C[2],-i.a6.vec3.dot(C,a)])}function xf(m){const a=m.properties.get("direction"),c=i.c8(a.x,a.y,a.z);c[2]=i.ap(c[2],0,75);const g=i.cb([c[0],c[1],c[2]]);return i.a6.vec3.fromValues(g.x,g.y,g.z)}function bf(m,a,c){const g=a.properties.get("color"),b=a.properties.get("intensity"),C=a.properties.get("direction"),I=[C.x,C.y,C.z],z=c.properties.get("color"),U=c.properties.get("intensity"),K=Math.max(i.a6.vec3.dot([0,0,1],I),0),G=[0,0,0];i.a6.vec3.scale(G,z.toRenderColor(m.getLut(a.scope)).toArray01Linear().slice(0,3),U);const Q=[0,0,0];return i.a6.vec3.scale(Q,g.toRenderColor(m.getLut(c.scope)).toArray01Linear().slice(0,3),K*b),i.cc([G[0]>0?G[0]/(G[0]+Q[0]):0,G[1]>0?G[1]/(G[1]+Q[1]):0,G[2]>0?G[2]/(G[2]+Q[2]):0])}function wf(m,a,c,g,b,C){const I=m.zoom,z=m.scale,U=m.worldSize,K=1/U,G=m.aspect,Q=Math.sqrt(1+G*G)*Math.tan(.5*m.fovX),ne=Q*Q,le=g-c,be=g+c;let xe,Te;ne>le/be?(xe=g,Te=g*Q):(xe=.5*be*(1+ne),Te=.5*Math.sqrt(le*le+2*(g*g+c*c)*ne+be*be*ne*ne));const Ee=m.projection.pixelsPerMeter(m.center.lat,U),Oe=m._camera.getCameraToWorldMercator(),Ve=[0,0,-xe*K];i.a6.vec3.transformMat4(Ve,Ve,Oe);let He=Te*K;const qe=m._edgeInsets;if(!(qe.left===0&&qe.top===0&&qe.right===0&&qe.bottom===0||qe.left===qe.right&&qe.top===qe.bottom)){const en=m._camera.getWorldToCamera(m.worldSize,m.projection.zAxisUnit==="meters"?Ee:1),rn=m._camera.getCameraToClipPerspective(m._fov,m.width/m.height,c,g);rn[8]=2*-m.centerOffset.x/m.width,rn[9]=2*m.centerOffset.y/m.height;const Jt=new Float64Array(16);i.a6.mat4.mul(Jt,rn,en);const In=new Float64Array(16);i.a6.mat4.invert(In,Jt);const Wn=i.bO.fromInvProjectionMatrix(In,U,I,!0);for(const Qn of Wn.points){const Bn=((Xe=Qn)[0]/=z,Xe[1]/=z,Xe[2]=i.bE(Xe[2],m._center.lat),Xe);He=Math.max(He,i.a6.vec3.len(i.a6.vec3.subtract([],Ve,Bn)))}}var Xe;He*=b/(b-1);const Ke=Math.acos(a[2]),Ye=Math.atan2(-a[0],-a[1]),rt=new Oc;rt.position=Ve,rt.setPitchBearing(Ke,Ye);const vt=rt.getWorldToCamera(U,Ee),st=He*U,it=Math.min(m._mercatorZfromZoom(17)*U*-2,-2*st),zt=rt.getCameraToClipOrthographic(-st,st,-st,st,it,(st+C*Ee)/a[2]),jt=new Float64Array(16);i.a6.mat4.multiply(jt,zt,vt);const tn=i.a6.vec3.fromValues(Math.floor(1e6*Ve[0])/1e6*U,Math.floor(1e6*Ve[1])/1e6*U,0),fn=.5*b,Sn=[0,0,0];i.a6.vec3.transformMat4(Sn,tn,jt),i.a6.vec3.scale(Sn,Sn,fn);const Et=[Math.floor(Sn[0]),Math.floor(Sn[1]),Math.floor(Sn[2])],Qt=[0,0,0];i.a6.vec3.sub(Qt,Sn,Et),i.a6.vec3.scale(Qt,Qt,-1/fn);const Nt=new Float64Array(16);return i.a6.mat4.identity(Nt),i.a6.mat4.translate(Nt,Nt,Qt),i.a6.mat4.multiply(jt,Nt,jt),[jt,st]}class gl extends i.E{constructor(a){super(),this.requestManager=a,this.models={"":{}},this.numModelsLoading={}}loadModel(a,c){return i.aG(this.requestManager.transformRequest(c,i.R.Model).url).then(g=>{if(!g)return;const b=i.aH(g),C=new i.aI(a,void 0,void 0,b);return C.computeBoundsAndApplyParent(),C}).catch(g=>{if(g&&g.status===404)return null;this.fire(new i.t(new Error(`Could not load model ${a} from ${c}: ${g.message}`)))})}load(a,c){this.models[c]||(this.models[c]={});const g=Object.keys(a);this.numModelsLoading[c]=(this.numModelsLoading[c]||0)+g.length;const b=[];for(const C of g)b.push(this.loadModel(C,a[C]));Promise.allSettled(b).then(C=>{for(let I=0;I<C.length;I++){const{status:z,value:U}=C[I];z==="fulfilled"&&U&&(this.models[c][g[I]]={model:U,numReferences:1})}this.numModelsLoading[c]-=g.length,this.fire(new i.x("data",{dataType:"style"}))}).catch(C=>{this.fire(new i.t(new Error(`Could not load models: ${C.message}`)))})}isLoaded(){for(const a in this.numModelsLoading)if(this.numModelsLoading[a]>0)return!1;return!0}hasModel(a,c){return!!this.getModel(a,c)}getModel(a,c){return this.models[c]||(this.models[c]={}),this.models[c][a]?this.models[c][a].model:void 0}addModel(a,c,g){this.models[g]||(this.models[g]={}),this.hasModel(a,g)&&this.models[g][a].numReferences++,this.load({[a]:this.requestManager.normalizeModelURL(c)},g)}addModels(a,c){this.models[c]||(this.models[c]={});const g={};for(const b in a)this.models[c][b]={},g[b]=this.requestManager.normalizeModelURL(a[b]);this.load(g,c)}addModelsFromBucket(a,c){this.models[c]||(this.models[c]={});const g={};for(const b of a)this.hasModel(b,c)?this.models[c][b].numReferences++:g[b]=this.requestManager.normalizeModelURL(b);this.load(g,c)}removeModel(a,c){if(this.models[c]&&this.models[c][a]&&(this.models[c][a].numReferences--,this.models[c][a].numReferences===0)){const g=this.models[c][a].model;delete this.models[c][a],g.destroy()}}listModels(a){return this.models[a]||(this.models[a]={}),Object.keys(this.models[a])}upload(a,c){this.models[c]||(this.models[c]={});for(const g in this.models[c])this.models[c][g].model&&this.models[c][g].model.upload(a.context)}}const ng=new i.a0({data:new i.a1(i._.colorTheme.data)}),qa=(m,a)=>Ge(m,a&&a.filter(c=>c.identifier!=="source.canvas")),Sf=i.ar(Jn,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection","setCamera","addImport","removeImport","updateImport"]),bu=i.ar(Jn,["setCenter","setZoom","setBearing","setPitch"]),Gy={version:8,layers:[],sources:{}},qy={duration:300,delay:0};class Ka extends i.E{constructor(a,c={}){super(),this.map=a,this.scope=c.scope||"",this.globalId=null,this.fragments=[],this.importDepth=c.importDepth||0,this.importsCache=c.importsCache||new Map,this.resolvedImports=c.resolvedImports||new Set,this.transition=i.l({},qy),this._buildingIndex=new Gn(this),this.crossTileSymbolIndex=new gf,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._mergedLayerSelectors=new Map,this._clipLayerPresent=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=c.styleChanges||new ht,this.dispatcher=c.dispatcher?c.dispatcher:new i.ce(i.cf(),this),c.imageManager?this.imageManager=c.imageManager:(this.imageManager=new St,this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=c.glyphManager?c.glyphManager:new i.cg(a._requestManager,c.localFontFamily?i.ch.all:c.localIdeographFontFamily?i.ch.ideographs:i.ch.none,c.localFontFamily||c.localIdeographFontFamily),c.modelManager?this.modelManager=c.modelManager:(this.modelManager=new gl(a._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null},this._styleColorThemeForScope={},this.options=c.configOptions?c.configOptions:new Map,this._configDependentLayers=c.configDependentLayers?c.configDependentLayers:new Set,this._config=c.config,this._initialConfig=c.initialConfig,this.dispatcher.broadcast("setReferrer",i.ci());const g=this;this._rtlTextPluginCallback=Ka.registerForPluginStateChange(b=>{g.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:b.pluginStatus,pluginURL:b.pluginURL},(C,I)=>{if(i.cj(C),I&&I.every(z=>z))for(const z in g._sourceCaches){const U=g._sourceCaches[z],K=U.getSource().type;K!=="vector"&&K!=="geojson"||U.reload()}})}),this.on("data",b=>{if(b.dataType!=="source"||b.sourceDataType!=="metadata")return;const C=this.getOwnSource(b.sourceId);if(C&&C.vectorLayerIds)for(const I in this._layers){const z=this._layers[I];z.source===C.id&&this._validateLayer(z)}})}load(a){return a?(typeof a=="string"?this.loadURL(a):this.loadJSON(a),this):this}_getGlobalId(a){if(!a)return null;if(typeof a=="string"){if(i.f(a))return a;const c=i.ck(a);if(!c.startsWith("http"))try{return new URL(c,location.href).toString()}catch{return c}return c}return`json://${i.cl(JSON.stringify(a))}`}_diffStyle(a,c,g){this.globalId=this._getGlobalId(a);const b=(C,I)=>{try{I(null,this.setState(C,g))}catch(z){I(z,!1)}};if(typeof a=="string"){const C=this.map._requestManager.normalizeStyleURL(a),I=this.map._requestManager.transformRequest(C,i.R.Style);i.n(I,(z,U)=>{z?this.fire(new i.t(z)):U&&b(U,c)})}else typeof a=="object"&&b(a,c)}loadURL(a,c={}){this.fire(new i.x("dataloading",{dataType:"style"}));const g=typeof c.validate=="boolean"?c.validate:!i.f(a);this.globalId=this._getGlobalId(a),a=this.map._requestManager.normalizeStyleURL(a,c.accessToken),this.resolvedImports.add(a);const b=this.importsCache.get(a);if(b)return this._load(b,g);const C=this.map._requestManager.transformRequest(a,i.R.Style);this._request=i.n(C,(I,z)=>{if(this._request=null,I)this.fire(new i.t(I));else if(z)return this.importsCache.set(a,z),this._load(z,g)})}loadJSON(a,c={}){this.fire(new i.x("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(a),this._request=i.q.frame(()=>{this._request=null,this._load(a,c.validate!==!1)})}loadEmpty(){this.fire(new i.x("dataloading",{dataType:"style"})),this._load(Gy,!1)}_loadImports(a,c,g){if(this.importDepth>=4)return i.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const b=[];for(const C of a){const I=this._createFragmentStyle(C),z=new Promise(G=>{I.once("style.import.load",G),I.once("error",G)}).then(()=>this.mergeAll());if(b.push(z),this.resolvedImports.has(C.url)){I.loadEmpty();continue}const U=C.data||this.importsCache.get(C.url);U?(I.loadJSON(U,{validate:c}),this._isInternalStyle(U)&&(I.globalId=null)):C.url?I.loadURL(C.url,{validate:c}):I.loadEmpty();const K={style:I,id:C.id,config:C.config};if(g){const G=this.fragments.findIndex(({id:Q})=>Q===g);this.fragments=this.fragments.slice(0,G).concat(K).concat(this.fragments.slice(G))}else this.fragments.push(K)}return Promise.allSettled(b)}getImportGlobalIds(a=this,c=new Set){for(const g of a.fragments)g.style.globalId&&c.add(g.style.globalId),this.getImportGlobalIds(g.style,c);return[...c.values()]}_createFragmentStyle(a){const c=this.scope?i.av(a.id,this.scope):a.id;let g;const b=this._initialConfig&&this._initialConfig[c];(a.config||b)&&(g=i.l({},a.config,b));const C=new Ka(this.map,{scope:c,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:g,configOptions:this.options,configDependentLayers:this._configDependentLayers});return C.setEventedParent(this.map,{style:C}),C}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(a){return this.isRootStyle()&&(a.fragment||!!a.schema&&a.fragment!==!1)}_load(a,c){const g=a.schema;if(this._isInternalStyle(a)){const I=i.l({},Gy,{imports:[{id:"basemap",data:a,url:""}]});return void this._load(I,c)}if(this.updateConfig(this._config,g),c&&qa(this,mr(a)))return;this._loaded=!0,this.stylesheet=i.cm(a);const b=()=>{for(const K in a.sources)this.addSource(K,a.sources[K],{validate:!1,isInitialLoad:!0});a.sprite?this._loadSprite(a.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.glyphManager.setURL(a.glyphs,this.scope);const I=wr(this.stylesheet.layers);if(this._order=I.map(K=>K.id),this.stylesheet.light&&i.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const K=this.stylesheet.lights[0];this.light=new Qe(K.properties,K.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new Qe(this.stylesheet.light)),this._layers={};for(const K of I){const G=i.cq(K,this.scope,this._styleColorTheme.lut,this.options);G.configDependencies.size!==0&&this._configDependentLayers.add(G.fqid),G.setEventedParent(this,{layer:{id:G.id}}),this._layers[G.id]=G;const Q=this.getOwnLayerSourceCache(G),ne=!!this.directionalLight&&this.directionalLight.shadowsEnabled();Q&&G.canCastShadows()&&ne&&(Q.castsShadows=!0)}this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const z=this.stylesheet.terrain;z&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(z,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new i.x("data",{dataType:"style"}));const U=this.isRootStyle();a.imports?this._loadImports(a.imports,c).then(()=>{this._reloadImports(),this.fire(new i.x(U?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new i.x(U?"style.load":"style.import.load")))},C=this.stylesheet["color-theme"];if(this._styleColorTheme.colorTheme=C,C){const I=this._evaluateColorThemeData(C);this._loadColorTheme(I).then(()=>{b()}).catch(z=>{i.w(`Couldn't load color theme from the stylesheet: ${z}`),b()})}else this._styleColorTheme.lut=null,b()}isRootStyle(){return this.importDepth===0}mergeAll(){let a,c,g,b,C,I,z,U;const K={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(G=>{if(G.stylesheet){if(G.light!=null&&(a=G.light),G.stylesheet.lights)for(const Q of G.stylesheet.lights)Q.type==="ambient"&&G.ambientLight!=null&&(c=G.ambientLight),Q.type==="directional"&&G.directionalLight!=null&&(g=G.directionalLight);b=this._prioritizeTerrain(b,G.terrain,G.stylesheet.terrain),G.stylesheet.fog&&G.fog!=null&&(C=G.fog),G.stylesheet.camera!=null&&(U=G.stylesheet.camera),G.stylesheet.projection!=null&&(I=G.stylesheet.projection),G.stylesheet.transition!=null&&(z=G.stylesheet.transition),K[G.scope]=G._styleColorTheme}}),this.light=a,this.ambientLight=c,this.directionalLight=g,this.fog=C,this._styleColorThemeForScope=K,b===null?delete this.terrain:this.terrain=b,this.camera=U||{"camera-projection":"perspective"},this.projection=I||{name:"mercator"},this.transition=i.l({},qy,z),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(a){const c=g=>{for(const b of g.fragments)c(b.style);a(g)};c(this)}_prioritizeTerrain(a,c,g){const b=a&&a.drapeRenderMode===0;return g===null?c&&c.drapeRenderMode===0?c:b?a:null:c!=null&&(!a||b||c&&c.drapeRenderMode===1)?c:a}mergeTerrain(){let a;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(c=>{a=this._prioritizeTerrain(a,c.terrain,c.stylesheet.terrain)}),a===null?delete this.terrain:this.terrain=a}mergeProjection(){let a;this.forEachFragmentStyle(c=>{c.stylesheet.projection!=null&&(a=c.stylesheet.projection)}),this.projection=a||{name:"mercator"}}mergeSources(){const a={},c={},g={};this.forEachFragmentStyle(b=>{for(const C in b._sourceCaches){const I=i.av(C,b.scope);a[I]=b._sourceCaches[C]}for(const C in b._otherSourceCaches){const I=i.av(C,b.scope);c[I]=b._otherSourceCaches[C]}for(const C in b._symbolSourceCaches){const I=i.av(C,b.scope);g[I]=b._symbolSourceCaches[C]}}),this._mergedSourceCaches=a,this._mergedOtherSourceCaches=c,this._mergedSymbolSourceCaches=g}mergeLayers(){const a={},c=[],g={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._mergedLayerSelectors.clear(),this.forEachFragmentStyle(C=>{for(const z of C._order){const U=C._layers[z];if(U.type==="slot"){const K=i.cn(z);if(a[K])continue;a[K]=[]}U.slot&&a[U.slot]?a[U.slot].push(U):c.push(U)}const{featuresets:I}=C.stylesheet||{};if(I)for(const z in I){const{selectors:U}=I[z];for(const K of U){const G=C._layers[K.layer],Q=this._mergedLayerSelectors.get(G.fqid)||[];let ne;if(K.properties)for(const le in K.properties){const be=i.M(K.properties[le]);be.result==="success"&&(ne=ne||{},ne[le]=be.value)}Q.push({featuresetId:z,featureNamespace:K.featureNamespace,properties:ne}),this._mergedLayerSelectors.set(G.fqid,Q)}}}),this._mergedOrder=[];const b=(C=[])=>{for(const I of C)if(I.type==="slot"){const z=i.cn(I.id);a[z]&&b(a[z]),this._mergedSlots.push(z)}else{const z=i.av(I.id,I.scope);this._mergedOrder.push(z),g[z]=I,I.is3D()&&(this._has3DLayers=!0),I.type==="circle"&&(this._hasCircleLayers=!0),I.type==="symbol"&&(this._hasSymbolLayers=!0),I.type==="clip"&&(this._clipLayerPresent=!0)}};b(c),this._mergedOrder.sort((C,I)=>{const z=g[C],U=g[I];return z.hasInitialOcclusionOpacityProperties?U.is3D()?1:0:z.is3D()&&U.hasInitialOcclusionOpacityProperties?-1:0}),this._mergedLayers=g,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(a){return this.stylesheet.camera=i.l({},this.stylesheet.camera,a),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(a){return a.data?function(c,g,b){const C=i.l({},g);for(const z of Object.keys(i._.colorTheme))C[z]===void 0&&(C[z]=i._.colorTheme[z].default);const I=new i.$(ng,c,new Map(b));return I.setTransitionOrValue(C,b),I.untransitioned().possiblyEvaluate(new i.a3(0))}(this.scope,a,this.options).get("data"):null}_loadColorTheme(a){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const c=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((g,b)=>{const C="data:image/png;base64,";if(!a||a.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void g();let I=a;I.startsWith(C)||(I=C+I);const z="mapbox-reserved-lut",U=new Image;U.src=I,U.onerror=()=>{this._styleColorTheme.lutLoading=!1,b(new Error("Failed to load image data"))},U.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==c)return void g();this._styleColorTheme.lutLoading=!1;const{width:K,height:G,data:Q}=i.q.getImageData(U);if(G>32)return void b(new Error("The height of the image must be less than or equal to 32 pixels."));if(K!==G*G)return void b(new Error("The width of the image must be equal to the height squared."));this.getImage(z)&&this.removeImage(z),this.addImage(z,{data:new i.r({width:K,height:G},Q),pixelRatio:1,sdf:!1,version:0});const ne=this.imageManager.getImage(z,this.scope);ne?(this._styleColorTheme.lut={image:ne.data,data:a},g()):b(new Error("Missing LUT image."))}})}getLut(a){const c=this._styleColorThemeForScope[a];return c?c.lut:null}setProjection(a){a?this.stylesheet.projection=a:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(a){this._spriteRequest=function(c,g,b){let C,I,z;const U=i.q.devicePixelRatio>1?"@2x":"";let K=i.n(g.transformRequest(g.normalizeSpriteURL(c,U,".json"),i.R.SpriteJSON),(ne,le)=>{K=null,z||(z=ne,C=le,Q())}),G=i.o(g.transformRequest(g.normalizeSpriteURL(c,U,".png"),i.R.SpriteImage),(ne,le)=>{G=null,z||(z=ne,I=le,Q())});function Q(){if(z)b(z);else if(C&&I){const ne=i.q.getImageData(I),le={};for(const be in C){const{width:xe,height:Te,x:Ee,y:Oe,sdf:Ve,pixelRatio:He,stretchX:qe,stretchY:Xe,content:Ke}=C[be],Ye=new i.r({width:xe,height:Te});i.r.copy(ne,Ye,{x:Ee,y:Oe},{x:0,y:0},{width:xe,height:Te},null),le[be]={data:Ye,pixelRatio:He,sdf:Ve,stretchX:qe,stretchY:Xe,content:Ke}}b(null,le)}}return{cancel(){K&&(K.cancel(),K=null),G&&(G.cancel(),G=null)}}}(a,this.map._requestManager,(c,g)=>{if(this._spriteRequest=null,c)this.fire(new i.t(c));else if(g)for(const b in g)this.imageManager.addImage(b,this.scope,g[b]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new i.x("data",{dataType:"style"}))})}_validateLayer(a){const c=this.getOwnSource(a.source);if(!c)return;const g=a.sourceLayer;g&&(c.type==="geojson"||c.vectorLayerIds&&c.vectorLayerIds.indexOf(g)===-1)&&this.fire(new i.t(new Error(`Source layer "${g}" does not exist on source "${c.id}" as specified by style layer "${a.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const a in this._sourceCaches)if(!this._sourceCaches[a].loaded())return!1;if(!this.imageManager.isLoaded()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:a}of this.fragments)if(!a.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((a,c)=>{const g=this.fragments[c];return g&&g.style&&(a.data=g.style.serialize()),a})}_serializeSources(){const a={};for(const c in this._sourceCaches){const g=this._sourceCaches[c].getSource();a[g.id]||(a[g.id]=g.serialize())}return a}_serializeLayers(a){const c=[];for(const g of a){const b=this._layers[g];b&&b.type!=="custom"&&c.push(b.serialize())}return c}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition())return!0;for(const a in this._sourceCaches)if(this._sourceCaches[a].hasTransition())return!0;for(const a in this._layers)if(this._layers[a].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}_getOrder(a){return a?this.order:this._mergedOrder}isLayerDraped(a){return!!this.terrain&&a.isDraped(this.getLayerSourceCache(a))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(a){const c=this.getOwnLayer(a);if(c)return c;this.fire(new i.t(new Error(`The layer '${a}' does not exist in the map's style.`)))}_checkSource(a){const c=this.getOwnSource(a);if(c)return c;this.fire(new i.t(new Error(`The source '${a}' does not exist in the map's style.`)))}precompilePrograms(a,c){const g=this.map.painter;if(g)for(let b=a.minzoom||0;b<(a.maxzoom||25.5);b++){const C=a.getProgramIds();if(C)for(const I of C){const z=a.getDefaultProgramParams(I,c.zoom,this._styleColorTheme.lut);z&&(g.style=this,this.fog&&(g._fogVisible=!0,z.overrideFog=!0,g.getOrCreateProgram(I,z)),g._fogVisible=!1,z.overrideFog=!1,g.getOrCreateProgram(I,z),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(z.overrideRtt=!0,g.getOrCreateProgram(I,z)))}}}update(a){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(a),this.directionalLight&&this.directionalLight.recalculate(a);const c=this.calculateLightsBrightness();a.brightness=c||0,c!==this._brightness&&(this._brightness=c,this.dispatcher.broadcast("setBrightness",c));const g=this._changes.isDirty();let b=!1;if(this._changes.isDirty()){const I=this._changes.getLayerUpdatesByScope();for(const z in I){const{updatedIds:U,removedIds:K}=I[z];(U||K)&&(this._updateWorkerLayers(z,U,K),b=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(a),this.light&&this.light.updateTransitions(a),this.ambientLight&&this.ambientLight.updateTransitions(a),this.directionalLight&&this.directionalLight.updateTransitions(a),this.fog&&this.fog.updateTransitions(a),this._changes.reset()}const C={};for(const I in this._mergedSourceCaches){const z=this._mergedSourceCaches[I];C[I]=z.used,z.used=!1,z.tileCoverLift=0}for(const I of this._mergedOrder){const z=this._mergedLayers[I];if(z.recalculate(a,this._availableImages),!z.isHidden(a.zoom)){const U=this.getLayerSourceCache(z);U&&(U.used=!0,U.tileCoverLift=Math.max(U.tileCoverLift,z.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(z,a)}):this.precompilePrograms(z,a))}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&b&&this.mergeLayers();for(const I in C){const z=this._mergedSourceCaches[I];C[I]!==z.used&&z.getSource().fire(new i.x("data",{sourceDataType:"visibility",dataType:"source",sourceId:z.getSource().id}))}this.light&&this.light.recalculate(a),this.terrain&&this.terrain.recalculate(a),this.fog&&this.fog.recalculate(a),this.z=a.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),g&&this.fire(new i.x("data",{dataType:"style"}))}_updateTilesForChangedImages(){const a=this._changes.getUpdatedImages();if(a.length){for(const c in this._sourceCaches)this._sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],a);this._changes.resetUpdatedImages()}}_updateWorkerLayers(a,c,g){const b=this.getFragmentStyle(a);b&&this.dispatcher.broadcast("updateLayers",{layers:c?b._serializeLayers(c):[],scope:a,removedIds:g||[],options:b.options})}setState(a,c){if(this._checkLoaded(),qa(this,mr(a)))return!1;(a=i.cm(a)).layers=wr(a.layers);const g=function(I,z){if(!I)return[{command:Jn.setStyle,args:[z]}];let U=[];try{if(!i.bi(I.version,z.version))return[{command:Jn.setStyle,args:[z]}];if(i.bi(I.center,z.center)||U.push({command:Jn.setCenter,args:[z.center]}),i.bi(I.zoom,z.zoom)||U.push({command:Jn.setZoom,args:[z.zoom]}),i.bi(I.bearing,z.bearing)||U.push({command:Jn.setBearing,args:[z.bearing]}),i.bi(I.pitch,z.pitch)||U.push({command:Jn.setPitch,args:[z.pitch]}),i.bi(I.sprite,z.sprite)||U.push({command:Jn.setSprite,args:[z.sprite]}),i.bi(I.glyphs,z.glyphs)||U.push({command:Jn.setGlyphs,args:[z.glyphs]}),i.bi(I.imports,z.imports)||function(le=[],be=[],xe){be=be||[];const Te=(le=le||[]).map(Xo),Ee=be.map(Xo),Oe=le.reduce(bs,{}),Ve=be.reduce(bs,{}),He=Te.slice();let qe,Xe,Ke,Ye;for(qe=0,Xe=0;qe<Te.length;qe++)Ke=Te[qe],Ve.hasOwnProperty(Ke)?Xe++:(xe.push({command:Jn.removeImport,args:[Ke]}),He.splice(He.indexOf(Ke,Xe),1));for(qe=0,Xe=0;qe<Ee.length;qe++)Ke=Ee[Ee.length-1-qe],He[He.length-1-qe]!==Ke&&(Oe.hasOwnProperty(Ke)?(xe.push({command:Jn.removeImport,args:[Ke]}),He.splice(He.lastIndexOf(Ke,He.length-Xe),1)):Xe++,Ye=He[He.length-qe],xe.push({command:Jn.addImport,args:[Ve[Ke],Ye]}),He.splice(He.length-qe,0,Ke));for(const rt of be){const vt=Oe[rt.id];vt&&!i.bi(vt,rt)&&xe.push({command:Jn.updateImport,args:[rt.id,rt]})}}(I.imports,z.imports,U),i.bi(I.transition,z.transition)||U.push({command:Jn.setTransition,args:[z.transition]}),i.bi(I.light,z.light)||U.push({command:Jn.setLight,args:[z.light]}),i.bi(I.fog,z.fog)||U.push({command:Jn.setFog,args:[z.fog]}),i.bi(I.projection,z.projection)||U.push({command:Jn.setProjection,args:[z.projection]}),i.bi(I.lights,z.lights)||U.push({command:Jn.setLights,args:[z.lights]}),i.bi(I.camera,z.camera)||U.push({command:Jn.setCamera,args:[z.camera]}),!i.bi(I["color-theme"],z["color-theme"]))return[{command:Jn.setStyle,args:[z]}];const K={},G=[];(function(le,be,xe,Te){let Ee;for(Ee in be=be||{},le=le||{})le.hasOwnProperty(Ee)&&(be.hasOwnProperty(Ee)||Sr(Ee,xe,Te));for(Ee in be){if(!be.hasOwnProperty(Ee))continue;const Oe=be[Ee];le.hasOwnProperty(Ee)?i.bi(le[Ee],Oe)||(le[Ee].type==="geojson"&&Oe.type==="geojson"&&Zn(le,be,Ee)?xe.push({command:Jn.setGeoJSONSourceData,args:[Ee,Oe.data]}):ca(Ee,be,xe,Te)):ti(Ee,be,xe)}})(I.sources,z.sources,G,K);const Q=[];I.layers&&I.layers.forEach(le=>{le.source&&K[le.source]?U.push({command:Jn.removeLayer,args:[le.id]}):Q.push(le)});let ne=I.terrain;ne&&K[ne.source]&&(U.push({command:Jn.setTerrain,args:[void 0]}),ne=void 0),U=U.concat(G),i.bi(ne,z.terrain)||U.push({command:Jn.setTerrain,args:[z.terrain]}),function(le,be,xe){be=be||[];const Te=(le=le||[]).map(Xo),Ee=be.map(Xo),Oe=le.reduce(bs,{}),Ve=be.reduce(bs,{}),He=Te.slice(),qe=Object.create(null);let Xe,Ke,Ye,rt,vt,st,it;for(Xe=0,Ke=0;Xe<Te.length;Xe++)Ye=Te[Xe],Ve.hasOwnProperty(Ye)?Ke++:(xe.push({command:Jn.removeLayer,args:[Ye]}),He.splice(He.indexOf(Ye,Ke),1));for(Xe=0,Ke=0;Xe<Ee.length;Xe++)Ye=Ee[Ee.length-1-Xe],He[He.length-1-Xe]!==Ye&&(Oe.hasOwnProperty(Ye)?(xe.push({command:Jn.removeLayer,args:[Ye]}),He.splice(He.lastIndexOf(Ye,He.length-Ke),1)):Ke++,st=He[He.length-Xe],xe.push({command:Jn.addLayer,args:[Ve[Ye],st]}),He.splice(He.length-Xe,0,Ye),qe[Ye]=!0);for(Xe=0;Xe<Ee.length;Xe++)if(Ye=Ee[Xe],rt=Oe[Ye],vt=Ve[Ye],!qe[Ye]&&!i.bi(rt,vt))if(i.bi(rt.source,vt.source)&&i.bi(rt["source-layer"],vt["source-layer"])&&i.bi(rt.type,vt.type)){for(it in Fo(rt.layout,vt.layout,xe,Ye,null,Jn.setLayoutProperty),Fo(rt.paint,vt.paint,xe,Ye,null,Jn.setPaintProperty),i.bi(rt.slot,vt.slot)||xe.push({command:Jn.setSlot,args:[Ye,vt.slot]}),i.bi(rt.filter,vt.filter)||xe.push({command:Jn.setFilter,args:[Ye,vt.filter]}),i.bi(rt.minzoom,vt.minzoom)&&i.bi(rt.maxzoom,vt.maxzoom)||xe.push({command:Jn.setLayerZoomRange,args:[Ye,vt.minzoom,vt.maxzoom]}),rt)rt.hasOwnProperty(it)&&it!=="layout"&&it!=="paint"&&it!=="filter"&&it!=="metadata"&&it!=="minzoom"&&it!=="maxzoom"&&it!=="slot"&&(it.indexOf("paint.")===0?Fo(rt[it],vt[it],xe,Ye,it.slice(6),Jn.setPaintProperty):i.bi(rt[it],vt[it])||xe.push({command:Jn.setLayerProperty,args:[Ye,it,vt[it]]}));for(it in vt)vt.hasOwnProperty(it)&&!rt.hasOwnProperty(it)&&it!=="layout"&&it!=="paint"&&it!=="filter"&&it!=="metadata"&&it!=="minzoom"&&it!=="maxzoom"&&it!=="slot"&&(it.indexOf("paint.")===0?Fo(rt[it],vt[it],xe,Ye,it.slice(6),Jn.setPaintProperty):i.bi(rt[it],vt[it])||xe.push({command:Jn.setLayerProperty,args:[Ye,it,vt[it]]}))}else xe.push({command:Jn.removeLayer,args:[Ye]}),st=He[He.lastIndexOf(Ye)+1],xe.push({command:Jn.addLayer,args:[vt,st]})}(Q,z.layers,U)}catch(K){console.warn("Unable to compute style diff:",K),U=[{command:Jn.setStyle,args:[z]}]}return U}(this.serialize(),a).filter(I=>!(I.command in bu));if(g.length===0)return!1;const b=g.filter(I=>!(I.command in Sf));if(b.length>0)throw new Error(`Unimplemented: ${b.map(I=>I.command).join(", ")}.`);const C=[];return g.forEach(I=>{C.push(this[I.command].apply(this,I.args))}),c&&Promise.all(C).then(c),this.stylesheet=a,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}addImage(a,c){return this.getImage(a)?this.fire(new i.t(new Error("An image with this name already exists."))):(this.imageManager.addImage(a,this.scope,c),this._afterImageUpdated(a),this)}updateImage(a,c){this.imageManager.updateImage(a,this.scope,c)}getImage(a){return this.imageManager.getImage(a,this.scope)}removeImage(a){return this.getImage(a)?(this.imageManager.removeImage(a,this.scope),this._afterImageUpdated(a),this):this.fire(new i.t(new Error("No image with this name exists.")))}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(this.scope),this._changes.updateImage(a),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.fire(new i.x("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(a,c,g={}){return this._checkLoaded(),this._validate(Ze,`models.${a}`,c,null,g)||(this.modelManager.addModel(a,c,this.scope),this._changes.setDirty()),this}hasModel(a){return this.modelManager.hasModel(a,this.scope)}removeModel(a){return this.hasModel(a)?(this.modelManager.removeModel(a,this.scope),this):this.fire(new i.t(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(a,c,g={}){if(this._checkLoaded(),this.getOwnSource(a)!==void 0)throw new Error(`There is already a source with ID "${a}".`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(pr,`sources.${a}`,c,null,g))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const b=Gr(a,c,this.dispatcher,this);b.scope=this.scope,b.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(b.id),source:b.serialize(),sourceId:b.id}));const C=I=>{const z=(I?"symbol:":"other:")+b.id,U=i.av(z,this.scope),K=this._sourceCaches[z]=new mi(U,b,I);(I?this._symbolSourceCaches:this._otherSourceCaches)[b.id]=K,K.onAdd(this.map)};C(!1),c.type!=="vector"&&c.type!=="geojson"||C(!0),b.onAdd&&b.onAdd(this.map),g.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(a){this._checkLoaded();const c=this.getOwnSource(a);if(!c)throw new Error("There is no source with this ID");for(const b in this._layers)if(this._layers[b].source===a)return this.fire(new i.t(new Error(`Source "${a}" cannot be removed while layer "${b}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===a)return this.fire(new i.t(new Error(`Source "${a}" cannot be removed while terrain is using it.`)));const g=this.getOwnSourceCaches(a);for(const b of g){const C=i.cn(b.id);delete this._sourceCaches[C],this._changes.discardSourceCacheUpdate(b.id),b.fire(new i.x("data",{sourceDataType:"metadata",dataType:"source",sourceId:b.getSource().id})),b.setEventedParent(null),b.clearTiles()}return delete this._otherSourceCaches[a],delete this._symbolSourceCaches[a],this.mergeSources(),c.setEventedParent(null),c.onRemove&&c.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(a,c){this._checkLoaded(),this.getOwnSource(a).setData(c),this._changes.setDirty()}getOwnSource(a){const c=this.getOwnSourceCache(a);return c&&c.getSource()}getOwnSources(){const a=[];for(const c in this._otherSourceCaches){const g=this.getOwnSourceCache(c);g&&a.push(g.getSource())}return a}areTilesLoaded(){const a=this._mergedSourceCaches;for(const c in a){const g=a[c]._tiles;for(const b in g){const C=g[b];if(C.state!=="loaded"&&C.state!=="errored")return!1}}return!0}setLights(a){if(this._checkLoaded(),!a)return delete this.ambientLight,void delete this.directionalLight;const c=this._getTransitionParameters();for(const b of a){if(this._validate(ur,"lights",b))return;switch(b.type){case"ambient":if(this.ambientLight){const C=this.ambientLight;C.set(b),C.updateTransitions(c)}else this.ambientLight=new zn(b,Mn||(Mn=new i.a0({color:new i.a1(i._.properties_light_ambient.color),intensity:new i.a1(i._.properties_light_ambient.intensity)})),this.scope,this.options);break;case"directional":if(this.directionalLight){const C=this.directionalLight;C.set(b),C.updateTransitions(c)}else this.directionalLight=new zn(b,wn||(wn=new i.a0({direction:new i.ad(i._.properties_light_directional.direction),color:new i.a1(i._.properties_light_directional.color),intensity:new i.a1(i._.properties_light_directional.intensity),"cast-shadows":new i.a1(i._.properties_light_directional["cast-shadows"]),"shadow-intensity":new i.a1(i._.properties_light_directional["shadow-intensity"])})),this.scope,this.options)}}const g=new i.a3(this.z||0,c);this.ambientLight&&this.ambientLight.recalculate(g),this.directionalLight&&this.directionalLight.recalculate(g),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const a=this.directionalLight,c=this.ambientLight;if(!a||!c)return;const g=ne=>.2126*(ne[0]<=.03928?ne[0]/12.92:Math.pow((ne[0]+.055)/1.055,2.4))+.7152*(ne[1]<=.03928?ne[1]/12.92:Math.pow((ne[1]+.055)/1.055,2.4))+.0722*(ne[2]<=.03928?ne[2]/12.92:Math.pow((ne[2]+.055)/1.055,2.4)),b=a.properties.get("color").toRenderColor(null).toArray01(),C=a.properties.get("intensity"),I=a.properties.get("direction"),z=1-i.c8(I.x,I.y,I.z)[2]/90,U=g(b)*C*z,K=c.properties.get("color").toRenderColor(null).toArray01(),G=c.properties.get("intensity"),Q=g(K)*G;return Number(((U+Q)/2).toFixed(6))}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const a=[];return this.directionalLight&&a.push(this.directionalLight.get()),this.ambientLight&&a.push(this.ambientLight.get()),a}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(a){if(!a)return this;if(i.aK(a)){const c=i.co(a),g=this.fragments.find(({id:C})=>C===c);if(!g)throw new Error(`Style import '${a}' not found`);const b=i.cn(a);return g.style.getFragmentStyle(b)}{const c=this.fragments.find(({id:g})=>g===a);if(!c)throw new Error(`Style import '${a}' not found`);return c.style}}getFeaturesetDescriptors(a){const c=this.getFragmentStyle(a);if(!c||!c.stylesheet.featuresets)return[];const g=[];for(const b in c.stylesheet.featuresets)g.push({featuresetId:b,importId:c.scope?c.scope:void 0});return g}getFeaturesetLayers(a,c){const g=this.getFragmentStyle(c),b=g.stylesheet.featuresets;if(!b||!b[a])return this.fire(new i.t(new Error(`The featureset '${a}' does not exist in the map's style and cannot be queried.`))),[];const C=[];for(const I of b[a].selectors){const z=g.getOwnLayer(I.layer);z&&C.push(z)}return C}getConfigProperty(a,c){const g=this.getFragmentStyle(a);if(!g)return null;const b=i.av(c,g.scope),C=g.options.get(b),I=C?C.value||C.default:null;return I?I.serialize():null}setConfigProperty(a,c,g){const b=this.getFragmentStyle(a);if(!b)return;const C=b.stylesheet.schema;if(!C||!C[c])return;const I=i.M(g);if(I.result!=="success")return void qa(this,I.value);const z=I.value.expression,U=i.av(c,b.scope),K=b.options.get(U);if(!K)return;let G;const{minValue:Q,maxValue:ne,stepValue:le,type:be,values:xe}=C[c],Te=i.M(C[c].default);Te.result==="success"&&(G=Te.value.expression),G?(this.options.set(U,{...K,value:z,default:G,minValue:Q,maxValue:ne,stepValue:le,type:be,values:xe}),this.updateConfigDependencies(c)):this.fire(new i.t(new Error(`No schema defined for the config option "${c}" in the "${a}" fragment.`)))}getConfig(a){const c=this.getFragmentStyle(a);if(!c)return null;const g=c.stylesheet.schema;if(!g)return null;const b={};for(const C in g){const I=i.av(C,c.scope),z=c.options.get(I),U=z?z.value||z.default:null;b[C]=U?U.serialize():null}return b}setConfig(a,c){const g=this.getFragmentStyle(a);g&&(g.updateConfig(c,g.stylesheet.schema),this.updateConfigDependencies())}getSchema(a){const c=this.getFragmentStyle(a);return c?c.stylesheet.schema:null}setSchema(a,c){const g=this.getFragmentStyle(a);g&&(g.stylesheet.schema=c,g.updateConfig(g._config,c),this.updateConfigDependencies())}updateConfig(a,c){if(this._config=a,a||c)if(c)for(const g in c){let b,C;const I=i.M(c[g].default);if(I.result==="success"&&(b=I.value.expression),a&&a[g]!==void 0){const ne=i.M(a[g]);ne.result==="success"&&(C=ne.value.expression)}const{minValue:z,maxValue:U,stepValue:K,type:G,values:Q}=c[g];if(b){const ne=i.av(g,this.scope);this.options.set(ne,{default:b,value:C,minValue:z,maxValue:U,stepValue:K,type:G,values:Q})}else this.fire(new i.t(new Error(`No schema defined for config option "${g}".`)))}else this.fire(new i.t(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(a){for(const c of this._configDependentLayers){const g=this.getLayer(c);if(g){if(a&&!g.configDependencies.has(a))continue;g.possiblyEvaluateVisibility(),this._updateLayer(g)}}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.forEachFragmentStyle(c=>{if(c._styleColorTheme.colorTheme){const g=c._evaluateColorThemeData(c._styleColorTheme.colorTheme);(!c._styleColorTheme.lut&&g!==""||c._styleColorTheme.lut&&g!==c._styleColorTheme.lut.data)&&c.setColorTheme(c._styleColorTheme.colorTheme)}}),this._changes.setDirty()}addLayer(a,c,g={}){this._checkLoaded();const b=a.id;if(this._layers[b])return void this.fire(new i.t(new Error(`Layer with id "${b}" already exists on this map`)));let C;if(a.type==="custom"){if(qa(this,i.cp(a)))return;C=i.cq(a,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof a.source=="object"&&(this.addSource(b,a.source),a=i.cm(a),a=i.l(a,{source:b})),this._validate(ft,`layers.${b}`,a,{arrayIndex:-1},g))return;C=i.cq(a,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(C),C.setEventedParent(this,{layer:{id:b}})}C.configDependencies.size!==0&&this._configDependentLayers.add(C.fqid);let I=this._order.length;if(c){const G=this._order.indexOf(c);if(G===-1)return void this.fire(new i.t(new Error(`Layer with id "${c}" does not exist on this map.`)));C.slot===this._layers[c].slot?I=G:i.w(`Layer with id "${c}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(I,0,b),this._layerOrderChanged=!0,this._layers[b]=C;const z=this.getOwnLayerSourceCache(C),U=!!this.directionalLight&&this.directionalLight.shadowsEnabled();z&&C.canCastShadows()&&U&&(z.castsShadows=!0);const K=this._changes.getRemovedLayer(C);if(K&&C.source&&z&&C.type!=="custom"){this._changes.discardLayerRemoval(C);const G=i.av(C.source,C.scope);K.type!==C.type?this._changes.updateSourceCache(G,"clear"):(this._changes.updateSourceCache(G,"reload"),z.pause())}this._updateLayer(C),C.onAdd&&C.onAdd(this.map),C.scope=this.scope,this.mergeLayers()}moveLayer(a,c){this._checkLoaded();const g=this._checkLayer(a);if(!g||a===c)return;const b=this._order.indexOf(a);this._order.splice(b,1);let C=this._order.length;if(c){const I=this._order.indexOf(c);if(I===-1)return void this.fire(new i.t(new Error(`Layer with id "${c}" does not exist on this map.`)));g.slot===this._layers[c].slot?C=I:i.w(`Layer with id "${c}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(C,0,a),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(a){this._checkLoaded();const c=this._checkLayer(a);if(!c)return;c.setEventedParent(null);const g=this._order.indexOf(a);this._order.splice(g,1),delete this._layers[a],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(c.fqid),this._changes.removeLayer(c);const b=this.getOwnLayerSourceCache(c);if(b&&b.castsShadows){let C=!1;for(const I in this._layers)if(this._layers[I].source===c.source&&this._layers[I].canCastShadows()){C=!0;break}b.castsShadows=C}c.onRemove&&c.onRemove(this.map),this.mergeLayers()}getOwnLayer(a){return this._layers[a]}hasLayer(a){return a in this._mergedLayers}hasLayerType(a){for(const c in this._layers)if(this._layers[c].type===a)return!0;return!1}setLayerZoomRange(a,c,g){this._checkLoaded();const b=this._checkLayer(a);b&&(b.minzoom===c&&b.maxzoom===g||(c!=null&&(b.minzoom=c),g!=null&&(b.maxzoom=g),this._updateLayer(b)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(a,c){this._checkLoaded();const g=this._checkLayer(a);g&&g.slot!==c&&(g.slot=c,this._updateLayer(g))}setFilter(a,c,g={}){this._checkLoaded();const b=this._checkLayer(a);if(b&&!i.bi(b.filter,c))return c==null?(b.filter=void 0,void this._updateLayer(b)):void(this._validate(ye,`layers.${b.id}.filter`,c,{layerType:b.type},g)||(b.filter=i.cm(c),this._updateLayer(b)))}getFilter(a){const c=this._checkLayer(a);if(c)return i.cm(c.filter)}setLayoutProperty(a,c,g,b={}){this._checkLoaded();const C=this._checkLayer(a);if(C&&!i.bi(C.getLayoutProperty(c),g)){if(g!=null&&(!b||b.validate!==!1)&&qa(C,ke.call(mr,{key:`layers.${a}.layout.${c}`,layerType:C.type,objectKey:c,value:g,styleSpec:i._,style:{glyphs:!0,sprite:!0}})))return;C.setLayoutProperty(c,g),C.configDependencies.size!==0&&this._configDependentLayers.add(C.fqid),this._updateLayer(C)}}getLayoutProperty(a,c){const g=this._checkLayer(a);if(g)return g.getLayoutProperty(c)}setPaintProperty(a,c,g,b={}){this._checkLoaded();const C=this._checkLayer(a);if(!C||i.bi(C.getPaintProperty(c),g)||g!=null&&(!b||b.validate!==!1)&&qa(C,Se.call(mr,{key:`layers.${a}.paint.${c}`,layerType:C.type,objectKey:c,value:g,styleSpec:i._})))return;const I=C.setPaintProperty(c,g);C.configDependencies.size!==0&&this._configDependentLayers.add(C.fqid),I&&this._updateLayer(C),this._changes.updatePaintProperties(C)}getPaintProperty(a,c){const g=this._checkLayer(a);if(g)return g.getPaintProperty(c)}setFeatureState(a,c){this._checkLoaded();const g=a.featureset;if(g){if("featuresetId"in g){const K=this.getFragmentStyle(g.importId),G=K.getFeaturesetLayers(g.featuresetId);for(const{source:Q,sourceLayer:ne}of G)K.setFeatureState({id:a.id,source:Q,sourceLayer:ne},c)}else if("layerId"in g){const K=this.getLayer(g.layerId);this.setFeatureState({id:a.id,source:K.source,sourceLayer:K.sourceLayer},c)}return}const b=a.source,C=a.sourceLayer,I=this._checkSource(b);if(!I)return;const z=I.type;if(z==="geojson"&&C)return void this.fire(new i.t(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(z==="vector"&&!C)return void this.fire(new i.t(new Error("The sourceLayer parameter must be provided for vector source types.")));a.id===void 0&&this.fire(new i.t(new Error("The feature id parameter must be provided.")));const U=this.getOwnSourceCaches(b);for(const K of U)K.setFeatureState(C,a.id,c)}removeFeatureState(a,c){this._checkLoaded();const g=a.featureset;if(g){if("featuresetId"in g){const K=this.getFragmentStyle(g.importId),G=K.getFeaturesetLayers(g.featuresetId);for(const{source:Q,sourceLayer:ne}of G)K.removeFeatureState({id:a.id,source:Q,sourceLayer:ne},c)}else if("layerId"in g){const K=this.getLayer(g.layerId);this.removeFeatureState({id:a.id,source:K.source,sourceLayer:K.sourceLayer},c)}return}const b=a.source,C=this._checkSource(b);if(!C)return;const I=C.type,z=I==="vector"?a.sourceLayer:void 0;if(I==="vector"&&!z)return void this.fire(new i.t(new Error("The sourceLayer parameter must be provided for vector source types.")));if(c&&typeof a.id!="string"&&typeof a.id!="number")return void this.fire(new i.t(new Error("A feature id is required to remove its specific state property.")));const U=this.getOwnSourceCaches(b);for(const K of U)K.removeFeatureState(z,a.id,c)}getFeatureState(a){this._checkLoaded();const c=a.featureset;if(c){let I;if("featuresetId"in c){const z=this.getFragmentStyle(c.importId),U=z.getFeaturesetLayers(c.featuresetId);for(const{source:K,sourceLayer:G}of U){const Q=z.getFeatureState({id:a.id,source:K,sourceLayer:G});if(Q&&!I)I=Q;else if(!i.bi(I,Q))return void this.fire(new i.t(new Error("The same feature id exists in multiple sources in the featureset, but their feature states are not consistent through the sources.")))}}else if("layerId"in a){const z=this.getLayer(c.layerId);I=this.getFeatureState({id:a.id,source:z.source,sourceLayer:z.sourceLayer})}return I}const g=a.source,b=a.sourceLayer,C=this._checkSource(g);if(C){if(C.type!=="vector"||b)return a.id===void 0&&this.fire(new i.t(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(g)[0].getFeatureState(b,a.id);this.fire(new i.t(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(a){return this.stylesheet.transition=i.l({},this.stylesheet.transition,a),this.transition=this.stylesheet.transition,this}getTransition(){return i.l({},this.stylesheet.transition)}serialize(){this._checkLoaded();const a=this.getTerrain(),c=a&&this.terrain&&this.terrain.scope===this.scope?a:this.stylesheet.terrain;return i.cr({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:c,fog:this.stylesheet.fog,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},g=>g!==void 0)}_updateFilteredLayers(a){for(const c of Object.values(this._mergedLayers))a(c)&&this._updateLayer(c)}_updateLayer(a){this._changes.updateLayer(a);const c=this.getLayerSourceCache(a),g=i.av(a.source,a.scope),b=this._changes.getUpdatedSourceCaches();a.source&&!b[g]&&c&&c.getSource().type!=="raster"&&(this._changes.updateSourceCache(g,"reload"),c.pause()),a.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(a){const c=z=>this._mergedLayers[z].is3D(),g=this.order,b={},C=[];for(let z=g.length-1;z>=0;z--){const U=g[z];if(c(U)){b[U]=z;for(const K of a){const G=K[U];if(G)for(const Q of G)C.push(Q)}}}C.sort((z,U)=>U.intersectionZ-z.intersectionZ);const I=[];for(let z=g.length-1;z>=0;z--){const U=g[z];if(c(U))for(let K=C.length-1;K>=0;K--){const G=C[K].feature;if(G.layer&&b[G.layer.id]<z)break;I.push(G),C.pop()}else for(const K of a){const G=K[U];if(G)for(const Q of G)I.push(Q.feature)}}return I}queryRenderedFeatures(a,c,g){c&&!Array.isArray(c)&&c.filter&&this._validate(ye,"queryRenderedFeatures.filter",c.filter,null,c);let b,C=!1;const I=new Set;if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new i.t(new Error("parameters.layers must be an Array."))),[];b=[];for(const G of c.layers){const Q=this._mergedLayers[G];if(!Q)return this.fire(new i.t(new Error(`The layer '${G}' does not exist in the map's style and cannot be queried for features.`))),[];Q.is3D()&&(C=!0),I.add(Q.source),b.push(G)}}else C=this.has3DLayers();const z=this._queryRenderedFeatures(a,g,{layerIds:b,filter:c.filter,has3DLayers:C,includedSources:I}),U=this._flattenAndSortRenderedFeatures(z),K=[];for(const G of U)i.co(G.layer.id)===this.scope&&K.push(G);return K}queryRenderedFeaturesForInteractions(a,c,g){let b=[];for(const{featureset:U,filter:K,radius:G}of c){let Q=!1;const ne=[],le=new Set;if("featuresetId"in U){const xe=this.getFeaturesetLayers(U.featuresetId,U.importId);if(xe.length===0)continue;for(const Te of xe)Te.is3D()&&(Q=!0),le.add(Te.source),ne.push(Te.fqid)}else if("layerId"in U){const xe=this._mergedLayers[U.layerId];if(!xe)return this.fire(new i.t(new Error(`The layer '${U.layerId}' does not exist in the map's style and cannot be queried for features.`))),[];xe.is3D()&&(Q=!0),le.add(xe.source),ne.push(U.layerId)}let be=a;if(G)if(a instanceof i.P||typeof a[0]=="number"){const xe=i.P.convert(a);be=[[xe.x-G,xe.y-G],[xe.x+G,xe.y+G]]}else{const xe=i.P.convert(a[0]),Te=i.P.convert(a[1]);be=[[xe.x-G,xe.y-G],[Te.x+G,Te.y+G]]}b=b.concat(this._queryRenderedFeatures(be,g,{layerIds:ne,filter:K,has3DLayers:Q,includedSources:le}))}const C=this._flattenAndSortRenderedFeatures(b),I=(U,K,G)=>{const Q=U.clone();if(delete Q.layer,Q.featureset=K,G&&G.featureNamespace&&(Q.namespace=G.featureNamespace),G&&G.properties){const ne={},le=this.map.transform.zoom;for(const be of Object.keys(G.properties)){const xe=G.properties[be].evaluate({zoom:le},U._vectorTileFeature,U.state,U.tile,this._availableImages);xe!=null&&(ne[be]=xe)}Q.properties=ne}return Q},z=[];for(const U of C){const K=U.layer.id,G=i.cn(K),Q=i.co(K);for(const{featureset:ne}of c){if("layerId"in ne&&ne.layerId!==K)continue;if("layerId"in ne&&ne.layerId===K){const be=I(U,ne);z.push(be);continue}if("featuresetId"in ne&&(ne.importId!==Q||!this.getFeaturesetLayers(ne.featuresetId,ne.importId).map(be=>be.id).includes(G)))continue;const le=this._mergedLayerSelectors.get(K)||[];for(const be of le){const xe=I(U,ne,be);z.push(xe)}}}return z}_queryRenderedFeatures(a,c,g){const{layerIds:b,filter:C,has3DLayers:I,includedSources:z}=g,U=[],K=_n.createFromScreenPoints(a,c);for(const G in this._mergedSourceCaches){if(!this._mergedSourceCaches[G].getSource())continue;const Q=this._mergedSourceCaches[G].getSource().id;b&&!z.has(Q)||U.push(fo(this._mergedSourceCaches[G],this._mergedLayers,K,C,b||[],this._availableImages,c,I,!!this.map._showQueryGeometry))}return this.placement&&U.push(function(G,Q,ne,le,be,xe,Te,Ee){const Oe={},Ve=Te.queryRenderedSymbols(ne),He=[];for(const qe of Object.keys(Ve).map(Number))He.push(Ee[qe]);He.sort(qi);for(const qe of He){const Xe=qe.featureIndex.lookupSymbolFeatures(Ve[qe.bucketInstanceId],qe.bucketIndex,qe.sourceLayerIndex,le,be,xe,G);for(const Ke in Xe){const Ye=Oe[Ke]=Oe[Ke]||[],rt=Xe[Ke];rt.sort((vt,st)=>{const it=qe.featureSortOrder;if(it){const zt=it.indexOf(vt.featureIndex);return it.indexOf(st.featureIndex)-zt}return st.featureIndex-vt.featureIndex});for(const vt of rt)Ye.push(vt)}}for(const qe in Oe)Oe[qe].forEach(Xe=>{const Ke=Xe.feature,Ye=G[qe],rt=Q(Ye);if(!rt)return;const vt=rt.getFeatureState(Ke.layer["source-layer"],Ke.id);Ke.state=vt,i.aK(Ye.id)||(Ke.source=Ke.layer.source,Ke.layer["source-layer"]&&(Ke.sourceLayer=Ke.layer["source-layer"]))});return Oe}(this._mergedLayers,this.getLayerSourceCache.bind(this),K.screenGeometry,C,b||[],this._availableImages,this.placement.collisionIndex,this.placement.retainedQueryData)),U}querySourceFeatures(a,c){const g=c&&c.filter;g&&this._validate(ye,"querySourceFeatures.filter",g,null,c);let b=[];const C=this.getOwnSourceCaches(a);for(const I of C)b=b.concat(No(I,c));return b}addSourceType(a,c,g){return Ka.getSourceType(a)?g(new Error(`A source type called "${a}" already exists.`)):(Ka.setSourceType(a,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:c.workerSourceURL},g):g(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(a,c,g={}){this._checkLoaded();const b=this.light.getLight();let C=!1;for(const z in a)if(!i.bi(a[z],b[z])){C=!0;break}if(!C)return;const I=this._getTransitionParameters();this.light.setLight(a,c,g),this.light.updateTransitions(I)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=i.q.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&i.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(a,c=1){if(this._checkLoaded(),!a)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),c===0&&delete this.terrain,a===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let g=a;const b=a.source==null;if(c===1){if(this.disableElevatedTerrain)return;if(typeof g.source=="object"){const z="terrain-dem-src";this.addSource(z,g.source),g=i.cm(g),g=i.l(g,{source:z})}const C=i.l({},g),I={};if(this.terrain&&b){C.source=this.terrain.get().source;const z=this.terrain?this.getFragmentStyle(this.terrain.scope):null;z&&(I.style=z.serialize())}if(this._validate(Mr,"terrain",C,I))return}if(!this.terrain||this.terrain.scope!==this.scope&&!b||this.terrain&&c!==this.terrain.drapeRenderMode){if(!g)return;this._createTerrain(g,c),this.fire(new i.x("data",{dataType:"style"}))}else{const C=this.terrain,I=C.get();for(const z of Object.keys(i._.terrain))!g.hasOwnProperty(z)&&i._.terrain[z].default&&(g[z]=i._.terrain[z].default);for(const z in a)if(!i.bi(a[z],I[z])){C.set(a,this.options),this.stylesheet.terrain=a;const U=this._getTransitionParameters({duration:0});C.updateTransitions(U),this.fire(new i.x("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(a){const c=this.fog=new bn(a,this.map.transform,this.scope,this.options);this.stylesheet.fog=c.get();const g=this._getTransitionParameters({duration:0});c.updateTransitions(g)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const a of this.map._markers)a._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(a){if(this._checkLoaded(),!a)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const c=this.fog;if(!i.bi(c.get(),a)){c.set(a,this.options),this.stylesheet.fog=c.get();const g=this._getTransitionParameters({duration:0});c.updateTransitions(g)}}else this._createFog(a);this._markersNeedUpdate=!0}setColorTheme(a){this._checkLoaded();const c=()=>{for(const b in this._layers)this._layers[b].lut=this._styleColorTheme.lut;for(const b in this._sourceCaches)this._sourceCaches[b].clearTiles()};if(this._styleColorTheme.colorTheme=a,!a)return this._styleColorTheme.lut=null,void c();const g=this._evaluateColorThemeData(a);this._loadColorTheme(g).then(()=>{this.fire(new i.x("colorthemeset")),c()}).catch(b=>{i.w(`Couldn't set color theme: ${b}`)})}_getTransitionParameters(a){return{now:i.q.now(),transition:i.l(this.transition,a)}}updateDrapeFirstLayers(){if(!this.terrain)return;const a=[],c=[];for(const g of this._mergedOrder)this.isLayerDraped(this._mergedLayers[g])?a.push(g):c.push(g);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...a),this._drapedFirstOrder.push(...c)}_createTerrain(a,c){const g=this.terrain=new _t(a,c,this.scope,this.options);c===1&&(this.stylesheet.terrain=a),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const b=this._getTransitionParameters({duration:0});g.updateTransitions(b)}_force3DLayerUpdate(){for(const a in this._layers){const c=this._layers[a];c.type==="fill-extrusion"&&this._updateLayer(c)}}_forceSymbolLayerUpdate(){for(const a in this._layers){const c=this._layers[a];c.type==="symbol"&&this._updateLayer(c)}}_validate(a,c,g,b,C={}){if(C&&C.validate===!1)return!1;const I=i.l({},this.serialize());return qa(this,a.call(mr,i.l({key:c,style:I,value:g,styleSpec:i._},b)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),i.cs.off("pluginStateChange",this._rtlTextPluginCallback);for(const a in this._mergedLayers)this._mergedLayers[a].setEventedParent(null);for(const a in this._mergedSourceCaches)this._mergedSourceCaches[a].clearTiles(),this._mergedSourceCaches[a].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(a){const c=this.getSourceCaches(a);for(const g of c)g.clearTiles()}clearSources(){for(const a in this._mergedSourceCaches)this._mergedSourceCaches[a].clearTiles()}reloadSource(a){const c=this.getSourceCaches(a);for(const g of c)g.resume(),g.reload()}reloadSources(){for(const a of this.getSources())a.reload&&a.reload()}updateSources(a){let c;this.directionalLight&&(c=xf(this.directionalLight));for(const g in this._mergedSourceCaches)this._mergedSourceCaches[g].update(a,void 0,void 0,c)}_generateCollisionBoxes(){for(const a in this._sourceCaches){const c=this._sourceCaches[a];c.resume(),c.reload()}}_updatePlacement(a,c,g,b,C,I,z=!1){let U=!1,K=!1;const G={},Q={};for(const ne of this._mergedOrder){const le=this._mergedLayers[ne];if(le.type!=="symbol")continue;const be=i.av(le.source,le.scope);let xe=G[be];if(!xe){const Ee=this.getLayerSourceCache(le);if(!Ee)continue;const Oe=Ee.getRenderableIds(!0).map(Ve=>Ee.getTileByID(Ve));Q[be]=Oe.slice(),xe=G[be]=Oe.sort((Ve,He)=>He.tileID.overscaledZ-Ve.tileID.overscaledZ||(Ve.tileID.isLessThan(He.tileID)?-1:1))}const Te=this.crossTileSymbolIndex.addLayer(le,xe,c.center.lng,c.projection);U=U||Te}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),z=z||this._layerOrderChanged||b===0,this._layerOrderChanged&&this.fire(new i.x("neworder")),(z||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(i.q.now(),c.zoom))&&(this.pauseablePlacement=new Wd(c,this._mergedOrder,z,g,b,C,this.placement,this.fog&&c.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,G,Q,this.map.painter.scaleFactor),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(i.q.now()),K=!0),U&&this.pauseablePlacement.placement.setStale()),K||U){this._buildingIndex.onNewFrame(c.zoom);for(let ne=0;ne<this._mergedOrder.length;ne++){const le=this._mergedLayers[this._mergedOrder[ne]];if(le.type!=="symbol")continue;const be=this.isLayerClipped(le);this.placement.updateLayerOpacities(le,G[i.av(le.source,le.scope)],ne,be?I:null)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(i.q.now())}}_releaseSymbolFadeTiles(){for(const a in this._sourceCaches)this._sourceCaches[a].releaseSymbolFadeTiles()}addImport(a,c){this._checkLoaded();const g=this.stylesheet.imports=this.stylesheet.imports||[];if(g.findIndex(({id:C})=>C===a.id)!==-1)return void this.fire(new i.t(new Error(`Import with id '${a.id}' already exists in the map's style.`)));if(!c)return g.push(a),this._loadImports([a],!0);const b=g.findIndex(({id:C})=>C===c);return b===-1&&this.fire(new i.t(new Error(`Import with id "${c}" does not exist on this map.`))),this.stylesheet.imports=g.slice(0,b).concat(a).concat(g.slice(b)),this._loadImports([a],!0,c)}updateImport(a,c){this._checkLoaded();const g=this.stylesheet.imports||[],b=this.getImportIndex(a);return b===-1?this:typeof c=="string"?(this.setImportUrl(a,c),this):(c.url&&c.url!==g[b].url&&this.setImportUrl(a,c.url),i.bi(c.config,g[b].config)||this.setImportConfig(a,c.config),i.bi(c.data,g[b].data)||this.setImportData(a,c.data),this)}moveImport(a,c){this._checkLoaded();let g=this.stylesheet.imports||[];const b=this.getImportIndex(a);if(b===-1)return this;const C=this.getImportIndex(c);if(C===-1)return this;const I=g[b],z=this.fragments[b];return g=g.filter(({id:U})=>U!==a),this.fragments=this.fragments.filter(({id:U})=>U!==a),this.stylesheet.imports=g.slice(0,C).concat(I).concat(g.slice(C)),this.fragments=this.fragments.slice(0,C).concat(z).concat(this.fragments.slice(C)),this.mergeLayers(),this}setImportUrl(a,c){this._checkLoaded();const g=this.stylesheet.imports||[],b=this.getImportIndex(a);if(b===-1)return this;g[b].url=c;const C=this.fragments[b];return C.style=this._createFragmentStyle(g[b]),C.style.on("style.import.load",()=>this.mergeAll()),C.style.loadURL(c),this}setImportData(a,c){this._checkLoaded();const g=this.getImportIndex(a),b=this.stylesheet.imports||[];return g===-1?this:c?(this.fragments[g].style.setState(c),this._reloadImports(),this):(delete b[g].data,this.setImportUrl(a,b[g].url))}setImportConfig(a,c){this._checkLoaded();const g=this.getImportIndex(a),b=this.stylesheet.imports||[];if(g===-1)return this;c?b[g].config=c:delete b[g].config;const C=this.fragments[g],I=C.style.stylesheet&&C.style.stylesheet.schema;return C.config=c,C.style.updateConfig(c,I),this.updateConfigDependencies(),this}removeImport(a){this._checkLoaded();const c=this.stylesheet.imports||[],g=this.getImportIndex(a);g!==-1&&(c.splice(g,1),this.fragments[g].style._remove(),this.fragments.splice(g,1),this._reloadImports())}getImportIndex(a){const c=(this.stylesheet.imports||[]).findIndex(g=>g.id===a);return c===-1&&this.fire(new i.t(new Error(`Import '${a}' does not exist in the map's style and cannot be updated.`))),c}getLayer(a){return this._mergedLayers[a]}getSources(){const a=[];for(const c in this._mergedOtherSourceCaches){const g=this._mergedOtherSourceCaches[c];g&&a.push(g.getSource())}return a}getSource(a,c){const g=this.getSourceCache(a,c);return g&&g.getSource()}getLayerSource(a){const c=this.getLayerSourceCache(a);return c&&c.getSource()}getSourceCache(a,c){const g=i.av(a,c);return this._mergedOtherSourceCaches[g]}getLayerSourceCache(a){const c=i.av(a.source,a.scope);return a.type==="symbol"?this._mergedSymbolSourceCaches[c]:this._mergedOtherSourceCaches[c]}getSourceCaches(a){if(a==null)return Object.values(this._mergedSourceCaches);const c=[];return this._mergedOtherSourceCaches[a]&&c.push(this._mergedOtherSourceCaches[a]),this._mergedSymbolSourceCaches[a]&&c.push(this._mergedSymbolSourceCaches[a]),c}updateSourceCaches(){const a=this._changes.getUpdatedSourceCaches();for(const c in a){const g=a[c];g==="reload"?this.reloadSource(c):g==="clear"&&this.clearSource(c)}}updateLayers(a){const c=this._changes.getUpdatedPaintProperties();for(const g of c){const b=this.getLayer(g);b&&b.updateTransitions(a)}}getImages(a,c,g){this.imageManager.getImages(c.icons,c.scope,g),this._updateTilesForChangedImages();const b=C=>{C&&C.setDependencies(c.tileID.key,c.type,c.icons)};b(this._otherSourceCaches[c.source]),b(this._symbolSourceCaches[c.source])}getGlyphs(a,c,g){this.glyphManager.getGlyphs(c.stacks,c.scope,g)}getResource(a,c,g){return i.ct(c,g)}getOwnSourceCache(a){return this._otherSourceCaches[a]}getOwnLayerSourceCache(a){return a.type==="symbol"?this._symbolSourceCaches[a.source]:this._otherSourceCaches[a.source]}getOwnSourceCaches(a){const c=[];return this._otherSourceCaches[a]&&c.push(this._otherSourceCaches[a]),this._symbolSourceCaches[a]&&c.push(this._symbolSourceCaches[a]),c}_isSourceCacheLoaded(a){const c=this.getOwnSourceCaches(a);return c.length===0?(this.fire(new i.t(new Error(`There is no source with ID '${a}'`))),!1):c.every(g=>g.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(a,c){if(!this._clipLayerPresent&&a.type!=="fill-extrusion")return!1;const g=a.type==="fill-extrusion"&&a.sourceLayer==="building";if(a.is3D()){if(g||c&&c.type==="batched-model"||a.type==="model")return!0}else if(a.type==="symbol")return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(a=>{a.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Ka.getSourceType=function(m){return Ar[m]},Ka.setSourceType=function(m,a){Ar[m]=a},Ka.registerForPluginStateChange=i.cd;var Ky=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,rg=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec2 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color) {
#ifdef INDICATOR_CUTOUT
float holeMinOpacity=u_indicator_cutout_params.x;float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,ig=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,Cf="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Xy=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif//DEPTH_OCCLUSION`,Zy=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Yy=`highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}
#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {
#ifdef FOG_DITHERING
vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);
#else
return color;
#endif
}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,Jy=`#ifdef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,og=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,Qy=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,qd=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef TEXTURE_GATHER
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return mix(lerpx.x,lerpx.y,f.y);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth));
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const Ef=[];ic(Ky,Ef),ic(ig,Ef),ic(rg,Ef);const Kd={"_prelude_fog.vertex.glsl":Zy,"_prelude_terrain.vertex.glsl":Xy,"_prelude_shadow.vertex.glsl":Qy,"_prelude_fog.fragment.glsl":Yy,"_prelude_shadow.fragment.glsl":qd,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":Jy,"_prelude_raster_particle.glsl":og},wu={};qr("",Xy),qr(Yy,Zy),qr(qd,Qy),qr(Jy,""),qr(og,"");const Xd=qr(rg,ig),Tf=Ky;var rc={background:qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float opacity_t=smoothstep((1.0-blur_positive)*antialiased_blur,blur_positive*antialiased_blur,extrude_length-1.0)-smoothstep(0.0,antialiasblur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:qr("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:qr(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:qr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:qr("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:qr("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:qr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
in float v_height;
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float emissive_strength
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp float emissive_strength
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);v_flat=vec4(linearProduct(color.rgb,vec3(calculate_NdotL(normal))),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:qr(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp vec4 color
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp vec4 color
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;float ele=elevation(pos_nx.xy);float c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);float h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
out highp vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:qr(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0)).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:qr(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:qr(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=out_color.a;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=(border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color.rgb=mix(border_color.rgb*border_color.a*trim_alpha,out_color.rgb,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in float a_z_offset;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset+0.01*step(0.01,a_z_offset),1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 v_uv;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
uniform float u_emissive_strength;
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {color=vec4(0,0,0,0);}}
#endif
#ifdef LINE_JOIN_NONE
float pattern_len=pattern_size/aspect;float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_with_emission_ground(color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in float a_z_offset;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec4 v_uv;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset+0.01*step(0.01,a_z_offset),1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
float a_uv_x=a_packed[0];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef LINE_JOIN_NONE
v_width=floorwidth+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:qr("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:qr("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:qr(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:qr(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;uniform lowp float u_scale_factor;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
in float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
in float is_sdf;in vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];
#ifdef RENDER_TEXT_AND_SYMBOL
if (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}
#endif
#ifdef RENDER_SDF
float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*u_scale_factor*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width*u_scale_factor/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;
#else
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
#endif
out_color*=opacity*fade_opacity;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_auto_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
out float is_sdf;out vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
#pragma mapbox: define lowp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
#pragma mapbox: initialize lowp float z_offset
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_auto_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
#ifdef Z_OFFSET
z+=u_pitch_with_map ? a_auto_z_offset+(u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#else
z+=u_pitch_with_map ? (u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#endif
float occlusion_fade=globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;
#ifdef DEPTH_OCCLUSION
float depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;
#ifdef RENDER_TEXT_AND_SYMBOL
is_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;
#endif
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
}`),terrainRaster:qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:qr("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:qr(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Cf),skyboxGradient:qr(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Cf),skyboxCapture:qr(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(raster.rgb*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:qr(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;
#ifndef NATIVE
c=dither(c,gl_FragCoord.xy+u_temporal_offset);
#endif
glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
highp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:qr(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:qr(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),snowParticle:qr("in highp vec2 uv;in highp float alphaMultiplier;uniform vec4 u_particleColor;uniform vec2 u_simpleShapeParameters;void main() {float t=clamp((length(uv)-u_simpleShapeParameters.x)/(1.0-u_simpleShapeParameters.x),0.0,1.0);float alpha=1.0-pow(t,pow(10.0,u_simpleShapeParameters.y));alpha*=alphaMultiplier;alpha*=u_particleColor.a;vec3 color=u_particleColor.rgb*alpha;glFragColor=vec4(color,alpha) ;HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_snowParticleData;in highp vec4 a_snowParticleDataHorizontalOscillation;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform vec2 u_screenSize;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity;uniform vec3 u_direction;uniform float u_horizontalOscillationRadius; 
uniform float u_horizontalOscillationRate; 
uniform float u_billboardSize;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;out highp vec2 uv;out highp float alphaMultiplier;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos.xyz*=halfBoxSize;pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_snowParticleData.z;float coneAngleHeadingRad=a_snowParticleData.w*radians(360.0);vec3 localZ=normalize(u_direction);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 direction;direction.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.z=cos(coneAnglePichRad);direction=normalize(direction);vec3 simPosLocal=vec3(0,0,0);float velocityScale=(1.0+3.0*a_snowParticleData.y)*u_velocity;simPosLocal+=direction*velocityScale*u_time;float horizontalOscillationRadius=u_horizontalOscillationRadius*a_snowParticleDataHorizontalOscillation.x;float horizontalOscillationAngle=u_horizontalOscillationRate*u_time*(-1.0+2.0*a_snowParticleDataHorizontalOscillation.y);simPosLocal.xy+=horizontalOscillationRadius*vec2(cos(horizontalOscillationAngle),sin(horizontalOscillationAngle));vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);float clipZ=-u_cam_pos.z+pos.z;vec4 posView=u_modelview*vec4(pos,1.0);float size=u_billboardSize;alphaMultiplier=1.0;vec4 posScreen=u_projection*posView;posScreen/=posScreen.w;posScreen.xy=vec2(0.5)+posScreen.xy*0.5;posScreen.xy*=u_screenSize;vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=u_screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-posScreen.xy)/(0.5*u_screenSize));screenDist+=a_snowParticleData.x*u_thinningParticleOffset;float scaleFactorMode=0.0;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);if (a_snowParticleData.x < u_thinningAffectedRatio) {scaleFactorMode=1.0-thinningFadeRatio;alphaMultiplier=thinningFadeRatio;}}vec4 posScreen1=u_projection*vec4(posView.x-size,posView.yzw);posScreen1/=posScreen1.w;vec4 posScreen2=u_projection*vec4(posView.x+size,posView.yzw);posScreen2/=posScreen2.w;posScreen1.xy=vec2(0.5)+posScreen1.xy*0.5;posScreen1.xy*=u_screenSize;posScreen2.xy=vec2(0.5)+posScreen2.xy*0.5;posScreen2.xy*=u_screenSize;float screenLength=length(posScreen1.xy-posScreen2.xy);float screenEpsilon=3.0;float scaleFactor=1.0;if (screenLength < screenEpsilon) {scaleFactor=screenEpsilon/max(screenLength,0.01);scaleFactor=mix(scaleFactor,1.0,scaleFactorMode);}float screenEpsilon2=15.0;if (screenLength > screenEpsilon2) {scaleFactor=screenEpsilon2/max(screenLength,0.01);}size*=scaleFactor;vec2 right=size*vec2(1,0);vec2 up=size*vec2(0,1);posView.xy+=right*a_uv.x;posView.xy+=up*a_uv.y;uv=a_uv;gl_Position=u_projection*posView;}`),rainParticle:qr("in highp vec2 uv;in highp float particleRandomValue;uniform sampler2D u_texScreen;uniform float u_distortionStrength;uniform vec4 u_color;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;uniform float u_shapeDirectionalPower;uniform float u_mode;void main() {vec2 st=uv*0.5+vec2(0.5);vec2 uvm=uv;uvm.y=-1.0+2.0*pow(st.y,u_shapeDirectionalPower);float shape=clamp(1.0-length(uvm),0.0,1.0);float alpha=abs(shape)*u_color.a;vec2 screenSize=vec2(textureSize(u_texScreen,0));vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-gl_FragCoord.xy)/(0.5*screenSize));screenDist+=(0.5+0.5*particleRandomValue)*u_thinningParticleOffset;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;float thinningAlpha=1.0;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);thinningAlpha*=thinningFadeRatio;}vec2 offsetXY=normalize(uvm)*abs(shape);vec2 stScreen=(gl_FragCoord.xy+offsetXY*u_distortionStrength*thinningAlpha)/screenSize;vec3 colorScreen=texture(u_texScreen,stScreen).rgb;alpha*=thinningAlpha;glFragColor=mix(vec4(colorScreen,1.0),vec4(u_color.rgb*alpha,alpha),u_mode);HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_rainParticleData;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity; 
uniform vec2 u_rainDropletSize;uniform vec3 u_rainDirection;out highp vec2 uv;out highp float particleRandomValue;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos*=halfBoxSize; 
pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_rainParticleData.z;float coneAngleHeadingRad=a_rainParticleData.w*radians(360.0);vec3 localZ=normalize(u_rainDirection);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 directionLocal;directionLocal.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.z=cos(coneAnglePichRad);directionLocal=normalize(directionLocal);vec3 directionWorld=localX*directionLocal.x+localY*directionLocal.y+localZ*directionLocal.z;float velocityScale=(1.0+3.0*a_rainParticleData.y)*u_velocity;vec3 simPosLocal=vec3(0,0,0);simPosLocal+=directionLocal*velocityScale*u_time;vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);vec4 posView=u_modelview*vec4(pos,1.0);vec3 directionView=normalize((u_modelview*vec4(directionWorld,0.0)).xyz);vec3 side=cross(directionView,normalize(posView.xyz));posView.xyz+=side*a_uv.x*u_rainDropletSize.x;posView.xyz+=directionView*a_uv.y*u_rainDropletSize.y;uv=a_uv;particleRandomValue=a_rainParticleData.x;gl_Position=u_projection*posView;}`),occlusion:qr("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function ic(m,a){const c=m.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let g of c)if(g=g.trim(),g[0]==="#"&&g.includes("if")&&!g.includes("endif")){g=g.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const b=g.split(" ");for(const C of b)a.includes(C)||a.push(C)}}function qr(m,a){const c=/#include\s+"([^"]+)"/g,g=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let b=a.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);b&&(b=b.map(K=>{const G=K.split(" ");return G[G.length-1]}),b=[...new Set(b)]);const C={},I=[],z=[];if(m=m.replace(c,(K,G)=>(z.push(G),"")),(a=a.replace(c,(K,G)=>(I.push(G),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let U=[...Ef];ic(m,U),ic(a,U);for(const K of[...I,...z])Kd[K]||console.error(`Undefined include: ${K}`),wu[K]||(wu[K]=[],ic(Kd[K],wu[K])),U=[...U,...wu[K]];return{fragmentSource:m=m.replace(g,(K,G,Q,ne,le)=>(C[le]=!0,G==="define"?`
#ifndef HAS_UNIFORM_u_${le}
in ${Q} ${ne} ${le};
#else
uniform ${Q} ${ne} u_${le};
#endif
`:G==="initialize"?`
#ifdef HAS_UNIFORM_u_${le}
    ${Q} ${ne} ${le} = u_${le};
#endif
`:G==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${le}
    in ${Q} ${ne} ${le};
#endif
`:G==="initialize-attribute"?"":void 0)),vertexSource:a=a.replace(g,(K,G,Q,ne,le)=>{const be=ne==="float"?"vec2":ne,xe=le.match(/color/)?"color":be;return G==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${le}
in ${Q} ${ne} a_${le};
#endif
`:C[le]?G==="define"?`
#ifndef HAS_UNIFORM_u_${le}
uniform lowp float u_${le}_t;
in ${Q} ${be} a_${le};
out ${Q} ${ne} ${le};
#else
uniform ${Q} ${ne} u_${le};
#endif
`:G==="initialize"?xe==="vec4"?`
#ifndef HAS_UNIFORM_u_${le}
    ${le} = a_${le};
#else
    ${Q} ${ne} ${le} = u_${le};
#endif
`:`
#ifndef HAS_UNIFORM_u_${le}
    ${le} = unpack_mix_${xe}(a_${le}, u_${le}_t);
#else
    ${Q} ${ne} ${le} = u_${le};
#endif
`:G==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${le}
    in ${Q} ${ne} a_${le};
    out ${Q} ${ne} ${le};
#endif
`:G==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${le}
    ${le} = a_${le};
#endif
`:void 0:G==="define"?`
#ifndef HAS_UNIFORM_u_${le}
uniform lowp float u_${le}_t;
in ${Q} ${be} a_${le};
#else
uniform ${Q} ${ne} u_${le};
#endif
`:G==="define-instanced"?xe==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${le}0;
in vec4 a_${le}1;
in vec4 a_${le}2;
in vec4 a_${le}3;
#else
uniform ${Q} ${ne} u_${le};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${Q} ${be} a_${le};
#else
uniform ${Q} ${ne} u_${le};
#endif
`:G==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${le}
    ${Q} ${ne} ${le} = a_${le};
#endif
`:xe==="vec4"?`
#ifndef HAS_UNIFORM_u_${le}
    ${Q} ${ne} ${le} = a_${le};
#else
    ${Q} ${ne} ${le} = u_${le};
#endif
`:`
#ifndef HAS_UNIFORM_u_${le}
    ${Q} ${ne} ${le} = unpack_mix_${xe}(a_${le}, u_${le}_t);
#else
    ${Q} ${ne} ${le} = u_${le};
#endif
`}),staticAttributes:b,usedDefines:U,vertexIncludes:I,fragmentIncludes:z}}class Su{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(a,c,g,b,C,I,z,U){this.context=a;let K=this.boundPaintVertexBuffers.length!==b.length;for(let Q=0;!K&&Q<b.length;Q++)this.boundPaintVertexBuffers[Q]!==b[Q]&&(K=!0);let G=this.boundDynamicVertexBuffers.length!==z.length;for(let Q=0;!G&&Q<z.length;Q++)this.boundDynamicVertexBuffers[Q]!==z[Q]&&(G=!0);if(!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==g||K||G||this.boundIndexBuffer!==C||this.boundVertexOffset!==I)this.freshBind(c,g,b,C,I,z,U);else{a.bindVertexArrayOES.set(this.vao);for(const Q of z)Q&&(Q.bind(),U&&Q.instanceCount&&Q.setVertexAttribDivisor(a.gl,c,U));C&&C.dynamicDraw&&C.bind()}}freshBind(a,c,g,b,C,I,z){const U=a.numAttributes,K=this.context,G=K.gl;this.vao&&this.destroy(),this.vao=K.gl.createVertexArray(),K.bindVertexArrayOES.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=b,this.boundVertexOffset=C,this.boundDynamicVertexBuffers=I,c.enableAttributes(G,a),c.bind(),c.setVertexAttribPointers(G,a,C);for(const Q of g)Q.enableAttributes(G,a),Q.bind(),Q.setVertexAttribPointers(G,a,C);for(const Q of I)Q&&(Q.enableAttributes(G,a),Q.bind(),Q.setVertexAttribPointers(G,a,C),z&&Q.instanceCount&&Q.setVertexAttribDivisor(G,a,z));b&&b.bind(),K.currentNumAttributes=U}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function Zd(m,a){const c=Math.pow(2,a.canonical.z),g=a.canonical.y;return[new i.a5(0,g/c).toLngLat().lat,new i.a5(0,(g+1)/c).toLngLat().lat]}function If(m,a,c,g,b,C,I){const z=m.context,U=z.gl,K=c.hillshadeFBO;if(!K)return;m.prepareDrawTile();const G=m.isTileAffectedByFog(a),Q=m.getOrCreateProgram("hillshade",{overrideFog:G});z.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,K.colorAttachment.get());const ne=((Te,Ee,Oe,Ve)=>{const He=Oe.paint.get("hillshade-shadow-color"),qe=Oe.paint.get("hillshade-highlight-color"),Xe=Oe.paint.get("hillshade-accent-color"),Ke=Oe.paint.get("hillshade-emissive-strength");let Ye=i.bC(Oe.paint.get("hillshade-illumination-direction"));if(Oe.paint.get("hillshade-illumination-anchor")==="viewport")Ye-=Te.transform.angle;else if(Te.style&&Te.style.enable3dLights()&&Te.style.directionalLight){const vt=Te.style.directionalLight.properties.get("direction"),st=i.c8(vt.x,vt.y,vt.z);Ye=i.bC(st[1])}const rt=!Te.options.moving;return{u_matrix:Ve||Te.transform.calculateProjMatrix(Ee.tileID.toUnwrapped(),rt),u_image:0,u_latrange:Zd(0,Ee.tileID),u_light:[Oe.paint.get("hillshade-exaggeration"),Ye],u_shadow:He.toRenderColor(Oe.lut),u_highlight:qe.toRenderColor(Oe.lut),u_emissive_strength:Ke,u_accent:Xe.toRenderColor(Oe.lut)}})(m,c,g,m.terrain?a.projMatrix:null);m.uploadCommonUniforms(z,Q,a.toUnwrapped());const{tileBoundsBuffer:le,tileBoundsIndexBuffer:be,tileBoundsSegments:xe}=m.getTileBoundsBuffers(c);Q.draw(m,U.TRIANGLES,b,C,I,_r.disabled,ne,g.id,le,be,xe)}function Yd(m,a,c){if(!a.needsDEMTextureUpload)return;const g=m.context,b=g.gl;g.pixelStoreUnpackPremultiplyAlpha.set(!1),a.demTexture=a.demTexture||m.getTileTexture(c.stride);const C=c.getPixels();a.demTexture?a.demTexture.update(C,{premultiply:!1}):a.demTexture=new i.T(g,C,b.R32F,{premultiply:!1}),a.needsDEMTextureUpload=!1}function Cu(m,a,c){const g=m.context,b=g.gl;if(!a.dem)return;const C=a.dem;if(g.activeTexture.set(b.TEXTURE1),Yd(m,a,C),!a.demTexture)return;a.demTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE);const I=C.dim;g.activeTexture.set(b.TEXTURE0);let z=a.hillshadeFBO;if(!z){const ne=new i.T(g,{width:I,height:I,data:null},b.RGBA8);ne.bind(b.LINEAR,b.CLAMP_TO_EDGE),z=a.hillshadeFBO=g.createFramebuffer(I,I,!0,"renderbuffer"),z.colorAttachment.set(ne.texture)}g.bindFramebuffer.set(z.framebuffer),g.viewport.set([0,0,I,I]);const{tileBoundsBuffer:U,tileBoundsIndexBuffer:K,tileBoundsSegments:G}=m.getMercatorTileBoundsBuffers(),Q=[];m.linearFloatFilteringSupported()&&Q.push("TERRAIN_DEM_FLOAT_FORMAT"),m.getOrCreateProgram("hillshadePrepare",{defines:Q}).draw(m,b.TRIANGLES,lr.disabled,Ir.disabled,Br.unblended,_r.disabled,((ne,le)=>{const be=le.stride,xe=i.a6.mat4.create();return i.a6.mat4.ortho(xe,0,i.ab,-i.ab,0,0,1),i.a6.mat4.translate(xe,xe,[0,-i.ab,0]),{u_matrix:xe,u_image:1,u_dimension:[be,be],u_zoom:ne.overscaledZ}})(a.tileID,C),c.id,U,K,G),a.needsHillshadePrepare=!1}class bi{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ag extends bi{getDefault(){return i.bA.transparent}set(a){const c=this.current;(a.r!==c.r||a.g!==c.g||a.b!==c.b||a.a!==c.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class e_ extends bi{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class sg extends bi{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class Mf extends bi{getDefault(){return[!0,!0,!0,!0]}set(a){const c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Jd extends bi{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class t_ extends bi{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class n_ extends bi{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){const c=this.current;(a.func!==c.func||a.ref!==c.ref||a.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class r_ extends bi{getDefault(){const a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){const c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class Eu extends bi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;a?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=a,this.dirty=!1}}class i_ extends bi{getDefault(){return[0,1]}set(a){const c=this.current;(a[0]!==c[0]||a[1]!==c[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class vS extends bi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;a?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=a,this.dirty=!1}}class yS extends bi{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class _S extends bi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;a?c.enable(c.BLEND):c.disable(c.BLEND),this.current=a,this.dirty=!1}}class lg extends bi{getDefault(){const a=this.gl;return[a.ONE,a.ZERO,a.ONE,a.ZERO]}set(a){const c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3]||this.dirty)&&(this.gl.blendFuncSeparate(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class cg extends bi{getDefault(){return i.bA.transparent}set(a){const c=this.current;(a.r!==c.r||a.g!==c.g||a.b!==c.b||a.a!==c.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class ug extends bi{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(a,a),this.current=a,this.dirty=!1)}}class dg extends bi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;a?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=a,this.dirty=!1}}class o_ extends bi{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class a_ extends bi{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}let xS=class extends bi{getDefault(){return null}set(m){(m!==this.current||this.dirty)&&(this.gl.useProgram(m),this.current=m,this.dirty=!1)}};class Qd extends bi{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class eh extends bi{getDefault(){const a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){const c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class s_ extends bi{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class Xa extends bi{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class hg extends bi{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class Pf extends bi{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Rf extends bi{getDefault(){return null}set(a){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class fg extends bi{getDefault(){return null}set(a){this.gl&&(a!==this.current||this.dirty)&&(this.gl.bindVertexArray(a),this.current=a,this.dirty=!1)}}class pg extends bi{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class Of extends bi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class mg extends bi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class th extends bi{constructor(a,c){super(a),this.context=a,this.parent=c}getDefault(){return null}}class Af extends th{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class gg extends th{attachment(){return this.gl.DEPTH_ATTACHMENT}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,this.attachment(),c.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class l_ extends th{attachment(){return this.gl.DEPTH_ATTACHMENT}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,this.attachment(),c.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class Tu extends gg{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const bS=(m,a,c)=>({u_matrix:m,u_image0:0,u_skirt_height:a,u_ground_shadow_factor:c}),c_=(m,a,c,g,b,C,I,z,U,K,G,Q,ne,le,be,xe)=>({u_proj_matrix:Float32Array.from(m),u_globe_matrix:a,u_normalize_matrix:Float32Array.from(g),u_merc_matrix:c,u_zoom_transition:b,u_merc_center:C,u_image0:0,u_frustum_tl:I,u_frustum_tr:z,u_frustum_br:U,u_frustum_bl:K,u_globe_pos:G,u_globe_radius:Q,u_viewport:ne,u_grid_matrix:xe?Float32Array.from(xe):new Float32Array(9),u_skirt_height:le,u_far_z_cutoff:be});function u_(m,a){return m!=null&&a!=null&&!(!m.hasData()||!a.hasData())&&m.demTexture!=null&&a.demTexture!=null&&m.tileID.key!==a.tileID.key}const Iu=new class{constructor(){this.operations={}}newMorphing(m,a,c,g,b){if(m in this.operations){const C=this.operations[m];C.to.tileID.key!==c.tileID.key&&(C.queued=c)}else this.operations[m]={startTime:g,phase:0,duration:b,from:a,to:c,queued:null}}getMorphValuesForProxy(m){if(!(m in this.operations))return null;const a=this.operations[m];return{from:a.from,to:a.to,phase:a.phase}}update(m){for(const a in this.operations){const c=this.operations[a];for(c.phase=(m-c.startTime)/c.duration;c.phase>=1||!this._validOp(c);)if(!this._nextOp(c,m)){delete this.operations[a];break}}}_nextOp(m,a){return!!m.queued&&(m.from=m.to,m.to=m.queued,m.queued=null,m.phase=0,m.startTime=a,!0)}_validOp(m){return m.from.hasData()&&m.to.hasData()}},d_={0:null,1:"TERRAIN_VERTEX_MORPHING"};function h_(m,a,c){if(a===0)return 0;const g=a<1&&c===514?.25/a:1;return 6*Math.pow(1.5,22-m)*Math.max(a,1)*g}function vg(m,a){const c=1<<m.z;return!a&&(m.x===0||m.x===c-1)||m.y===0||m.y===c-1}const nh=m=>({u_matrix:m});function Df(m,a,c,g,b){if(b>0){const C=i.q.now(),I=(C-m.timeAdded)/b,z=a?(C-a.timeAdded)/b:-1,U=c.getSource(),K=g.coveringZoomLevel({tileSize:U.tileSize,roundZoom:U.roundZoom}),G=!a||Math.abs(a.tileID.overscaledZ-K)>Math.abs(m.tileID.overscaledZ-K),Q=G&&m.refreshedUponExpiration?1:i.ap(G?I:1-z,0,1);return m.refreshedUponExpiration&&I>=1&&(m.refreshedUponExpiration=!1),a?{opacity:1,mix:1-Q}:{opacity:Q,mix:0}}return{opacity:1,mix:0}}class Mu extends mi{constructor(a){const c={type:"raster-dem",maxzoom:a.transform.maxZoom},g=new i.ce(i.cf(),null),b=Gr("mock-dem",c,g,a.style);super("mock-dem",b,!1),b.setEventedParent(this),this._sourceLoaded=!0}_loadTile(a,c){a.state="loaded",c(null)}}class f_ extends mi{constructor(a){const c=Gr("proxy",{type:"geojson",maxzoom:a.transform.maxZoom},new i.ce(i.cf(),null),a.style);super("proxy",c,!1),c.setEventedParent(this),this.map=this.getSource().map=a,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(a,c,g){if(a.freezeTileCoverage)return;this.transform=a;const b=a.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((C,I)=>{if(C[I.key]="",!this._tiles[I.key]){const z=new Un(I,this._source.tileSize*I.overscaleFactor(),a.tileZoom);z.state="loaded",this._tiles[I.key]=z}return C},{});for(const C in this._tiles)C in b||(this.freeFBO(C),this._tiles[C].unloadVectorData(),delete this._tiles[C])}freeFBO(a){const c=this.proxyCachedFBO[a];if(c!==void 0){const g=Object.values(c);this.renderCachePool.push(...g),delete this.proxyCachedFBO[a]}}deallocRenderCache(){this.renderCache.forEach(a=>a.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class yg extends i.aA{constructor(a,c,g){super(a.overscaledZ,a.wrap,a.canonical.z,a.canonical.x,a.canonical.y),this.proxyTileKey=c,this.projMatrix=g}}class _g extends i.cE{constructor(a,c){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},a.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),a.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),a.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=a,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[g,b,C]=function(U){const K=new i.a$,G=new i.aP,Q=131;K.reserve(17161),G.reserve(33800);const ne=i.ab/128,le=i.ab+ne/2,be=le+ne;for(let Te=-ne;Te<be;Te+=ne)for(let Ee=-ne;Ee<be;Ee+=ne){const Oe=Ee<0||Ee>le||Te<0||Te>le?24575:0,Ve=i.ap(Math.round(Ee),0,i.ab),He=i.ap(Math.round(Te),0,i.ab);K.emplaceBack(Ve+Oe,He)}const xe=(Te,Ee)=>{const Oe=Ee*Q+Te;G.emplaceBack(Oe+1,Oe,Oe+Q),G.emplaceBack(Oe+Q,Oe+Q+1,Oe+1)};for(let Te=1;Te<129;Te++)for(let Ee=1;Ee<129;Ee++)xe(Ee,Te);return[0,129].forEach(Te=>{for(let Ee=0;Ee<130;Ee++)xe(Ee,Te),xe(Te,Ee)}),[K,G,32768]}(),I=a.context;this.gridBuffer=I.createVertexBuffer(g,i.b1.members),this.gridIndexBuffer=I.createIndexBuffer(b),this.gridSegments=i.b2.simpleSegment(0,0,g.length,b.length),this.gridNoSkirtSegments=i.b2.simpleSegment(0,0,g.length,C),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new f_(c.map),this.orthoMatrix=i.a6.mat4.create(),i.a6.mat4.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,i.ab,0,i.ab,0,1);const z=I.gl;this._overlapStencilMode=new Ir({func:z.GEQUAL,mask:255},0,255,z.KEEP,z.KEEP,z.REPLACE),this._previousZoom=a.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=c,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Mu(c.map),this._pendingGroundEffectLayers=[]}set style(a){a.on("data",this._onStyleDataEvent.bind(this)),this._style=a,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(a,c,g){if(a&&a.terrain){this._style!==a&&(this.style=a,this._evaluationZoom=void 0);const b=a.terrain.properties,C=a.terrain.drapeRenderMode===0,I=a.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=i.q.now();const z=a.terrain&&a.terrain.scope,U=b.get("source"),K=C?this._mockSourceCache:a.getSourceCache(U,z);if(!K)return void i.w(`Couldn't find terrain source "${U}".`);if(this.sourceCache=K,this._attenuationRange=a.terrain.getAttenuationRange(),this._exaggeration=I?this.calculateExaggeration(c):b.get("exaggeration"),!c.projection.requiresDraping&&I&&this._exaggeration===0)return void this._disable();this.enabled=!0;const G=()=>{this.sourceCache.used&&i.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const Q=this.getScaledDemTileSize();this.sourceCache.update(c,Q,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,G(),this._initializing=!0),G(),c.updateElevation(!0,g),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(c),this._emptyDEMTextureDirty=!0,this._previousZoom=c.zoom}else this._disable()}calculateExaggeration(a){if(this._attenuationRange&&a.zoom>=Math.ceil(this._attenuationRange[1]))return this._style.terrain.getExaggeration(a.zoom);const c=this._previousCameraAltitude,g=a.getFreeCameraOptions().position.z/a.pixelsPerMeter*a.worldSize;this._previousCameraAltitude=g;const b=c!=null?g-c:Number.MAX_VALUE;if(Math.abs(b)<2)return this._exaggeration;const C=a.zoom,I=this._style.terrain;if(!this._previousUpdateTimestamp)return I.getExaggeration(C);let z=C-this._previousZoom;const U=this._previousUpdateTimestamp;let K=C;this._evaluationZoom!=null&&(K=this._evaluationZoom,Math.abs(C-K)>.5&&(z=.5*(C-K+z)),z*b<0&&(K+=z)),this._evaluationZoom=K;const G=I.getExaggeration(K),Q=G===I.getExaggeration(Math.max(0,K-.1));if(Q&&Math.abs(G-this._exaggeration)<.01)return G;let ne=Math.min(.1,.00375*(this._updateTimestamp-U));return(Q||G<.1||Math.abs(z)<1e-4)&&(ne=Math.min(.2,4*ne)),i.aa(this._exaggeration,G,ne)}resetTileLookupCache(a){this._findCoveringTileCache[a]={}}attenuationRange(){return this._attenuationRange}getDemUpscale(){return this.proxySourceCache.getSource().tileSize/128}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(a){a.coord&&a.dataType==="source"?this._clearRenderCacheForTile(a.sourceCacheId,a.coord):a.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const a in this._style._mergedSourceCaches)this._style._mergedSourceCaches[a].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(a=>a.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const a=2*this.proxySourceCache.getSource().tileSize;return[a,a]}set useVertexMorphing(a){this._useVertexMorphing=a}updateTileBinding(a){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const c=this.proxySourceCache,g=this.painter.transform;this._initializing&&(this._initializing=g._centerAltitude===0&&this.getAtPointOrZero(i.a5.fromLngLat(g.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const b=this.proxyCoords=c.getIds().map(U=>{const K=c.getTileByID(U).tileID;return K.projMatrix=g.calculateProjMatrix(K.toUnwrapped()),K});(function(U,K){const G=K.transform.pointCoordinate(K.transform.getCameraPoint()),Q=new i.P(G.x,G.y);U.sort((ne,le)=>{if(le.overscaledZ-ne.overscaledZ)return le.overscaledZ-ne.overscaledZ;const be=new i.P(ne.canonical.x+(1<<ne.canonical.z)*ne.wrap,ne.canonical.y),xe=new i.P(le.canonical.x+(1<<le.canonical.z)*le.wrap,le.canonical.y),Te=Q.mult(1<<ne.canonical.z);return Te.x-=.5,Te.y-=.5,Te.distSqr(be)-Te.distSqr(xe)})})(b,this.painter);const C=this.proxyToSource||{};this.proxyToSource={},b.forEach(U=>{this.proxyToSource[U.key]={}}),this.terrainTileForTile={};const I=this._style._mergedSourceCaches;for(const U in I){const K=I[U];if(!K.used||(K!==this.sourceCache&&this.resetTileLookupCache(K.id),this._setupProxiedCoordsForOrtho(K,a[U],C),K.usedForTerrain))continue;const G=a[U];K.getSource().reparseOverscaled&&this._assignTerrainTiles(G)}this.proxiedCoords[c.id]=b.map(U=>new yg(U,U.key,this.orthoMatrix)),this._assignTerrainTiles(b),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(C),this.renderingToTexture=!1;const z={};this._visibleDemTiles=[];for(const U of this.proxyCoords){const K=this.terrainTileForTile[U.key];if(!K)continue;const G=K.tileID.key;G in z||(this._visibleDemTiles.push(K),z[G]=G)}}_assignTerrainTiles(a){this._initializing||a.forEach(c=>{if(this.terrainTileForTile[c.key])return;const g=this._findTileCoveringTileID(c,this.sourceCache);g&&(this.terrainTileForTile[c.key]=g)})}_prepareDEMTextures(){const a=this.painter.context,c=a.gl;for(const g in this.terrainTileForTile){const b=this.terrainTileForTile[g],C=b.dem;!C||b.demTexture&&!b.needsDEMTextureUpload||(a.activeTexture.set(c.TEXTURE1),Yd(this.painter,b,C))}}_prepareDemTileUniforms(a,c,g,b){if(!c||c.demTexture==null)return!1;const C=a.tileID.canonical,I=Math.pow(2,c.tileID.canonical.z-C.z),z=b||"";return g[`u_dem_tl${z}`]=[C.x*I%1,C.y*I%1],g[`u_dem_scale${z}`]=I,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let a=0;const c=this._visibleDemTiles.reduce((g,b)=>{if(!b.dem)return g;const C=b.dem.tree.minimums[0];return C>0&&a++,g+C},0);return a?c/a:0}_updateEmptyDEMTexture(){const a=this.painter.context,c=a.gl;a.activeTexture.set(c.TEXTURE2);const g=this._getLoadedAreaMinimum(),b=new i.cF({width:1,height:1},new Float32Array([g]));this._emptyDEMTextureDirty=!1;let C=this._emptyDEMTexture;return C?C.update(b,{premultiply:!1}):C=this._emptyDEMTexture=new i.T(a,b,c.R32F,{premultiply:!1}),C}setupElevationDraw(a,c,g){const b=this.painter.context,C=b.gl,I={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};I.u_exaggeration=this.exaggeration();let z=null,U=null,K=1;if(g&&g.morphing&&this._useVertexMorphing){const le=g.morphing.srcDemTile,be=g.morphing.dstDemTile;K=g.morphing.phase,le&&be&&(this._prepareDemTileUniforms(a,le,I,"_prev")&&(U=le),this._prepareDemTileUniforms(a,be,I)&&(z=be))}const G=le=>le&&le.demTexture&&this.painter.linearFloatFilteringSupported()?C.LINEAR:C.NEAREST;let Q=null;var ne;if(this.enabled?U&&z?(Q=z.demTexture,b.activeTexture.set(C.TEXTURE4),U.demTexture.bind(G(U),C.CLAMP_TO_EDGE),I.u_dem_lerp=K):(z=this.terrainTileForTile[a.tileID.key],Q=this._prepareDemTileUniforms(a,z,I)?z.demTexture:this.emptyDEMTexture):Q=this.emptyDEMTexture,b.activeTexture.set(C.TEXTURE2),Q&&(I.u_dem_size=(ne=Q).size[0]===1?1:ne.size[0]-2,Q.bind(G(z),C.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(g&&g.useDepthForOcclusion,c,I),g&&g.useMeterToDem&&z){const le=(1<<z.tileID.canonical.z)*i.bE(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;I.u_meter_to_dem=le}if(g&&g.labelPlaneMatrixInv&&(I.u_label_plane_matrix_inv=g.labelPlaneMatrixInv),c.setTerrainUniformValues(b,I),this.painter.transform.projection.name==="globe"){const le=this.globeUniformValues(this.painter.transform,a.tileID.canonical,g&&g.useDenormalizedUpVectorScale);c.setGlobeUniformValues(b,le)}}globeUniformValues(a,c,g){const b=a.projection;return{u_tile_tl_up:b.upVector(c,0,0),u_tile_tr_up:b.upVector(c,i.ab,0),u_tile_br_up:b.upVector(c,i.ab,i.ab),u_tile_bl_up:b.upVector(c,0,i.ab),u_tile_up_scale:g?i.cG(1):b.upVectorScale(c,a.center.lat,a.worldSize).metersToTile}}renderToBackBuffer(a){const c=this.painter,g=this.painter.context;a.length!==0&&(g.bindFramebuffer.set(null),g.viewport.set([0,0,c.width,c.height]),c.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(b,C,I,z,U){if(b.transform.projection.name==="globe")(function(K,G,Q,ne,le){const be=K.context,xe=be.gl;let Te,Ee;const Oe=K.transform,Ve=i.cx(K,be,Oe),He=(zt,jt)=>{if(Ee===jt)return;const tn=[d_[jt],"PROJECTION_GLOBE_VIEW"];Ve&&tn.push("CUSTOM_ANTIALIASING");const fn=K.isTileAffectedByFog(zt);Te=K.getOrCreateProgram("globeRaster",{defines:tn,overrideFog:fn}),Ee=jt},qe=K.colorModeForRenderPass(),Xe=new lr(xe.LEQUAL,lr.ReadWrite,K.depthRangeFor3D);Iu.update(le);const Ke=i.cy(Oe),Ye=[i.am(Oe.center.lng),i.at(Oe.center.lat)],rt=K.globeSharedBuffers,vt=[Oe.width*i.q.devicePixelRatio,Oe.height*i.q.devicePixelRatio],st=Float32Array.from(Oe.globeMatrix),it={useDenormalizedUpVectorScale:!0};{const zt=K.transform,jt=h_(zt.zoom,G.exaggeration(),G.sourceCache._source.tileSize);Ee=-1;const tn=xe.TRIANGLES;for(const fn of ne){const Sn=Q.getTile(fn),Et=Ir.disabled,Qt=G.prevTerrainTileForTile[fn.key],Nt=G.terrainTileForTile[fn.key];u_(Qt,Nt)&&Iu.newMorphing(fn.key,Qt,Nt,le,250),be.activeTexture.set(xe.TEXTURE0),Sn.texture&&Sn.texture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE);const en=Iu.getMorphValuesForProxy(fn.key),rn=en?1:0;en&&i.C(it,{morphing:{srcDemTile:en.from,dstDemTile:en.to,phase:i.cw(en.phase)}});const Jt=i.cz(fn.canonical),In=i.cA(Jt.getCenter().lat),Wn=i.cB(fn.canonical,Jt,In,zt.worldSize/zt._pixelsPerMercatorPixel),Qn=i.b6(i.cC(fn.canonical)),Bn=c_(zt.expandedFarZProjMatrix,st,Ke,Qn,i.a9(zt.zoom),Ye,zt.frustumCorners.TL,zt.frustumCorners.TR,zt.frustumCorners.BR,zt.frustumCorners.BL,zt.globeCenterInViewSpace,zt.globeRadius,vt,jt,zt._farZ,Wn);if(He(fn,rn),Te&&(G.setupElevationDraw(Sn,Te,it),K.uploadCommonUniforms(be,Te,fn.toUnwrapped()),rt)){const[nr,$n,hr]=rt.getGridBuffers(In,jt!==0);Te.draw(K,tn,Xe,Et,qe,_r.backCCW,Bn,"globe_raster",nr,$n,hr)}}}if(rt&&(K.renderDefaultNorthPole||K.renderDefaultSouthPole)){const zt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Ve&&zt.push("CUSTOM_ANTIALIASING"),Te=K.getOrCreateProgram("globeRaster",{defines:zt});for(const jt of ne){const{x:tn,y:fn,z:Sn}=jt.canonical,Et=fn===0,Qt=fn===(1<<Sn)-1,[Nt,en,rn,Jt]=rt.getPoleBuffers(Sn,!1);if(Jt&&(Et||Qt)){const In=Q.getTile(jt);be.activeTexture.set(xe.TEXTURE0),In.texture&&In.texture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE);let Wn=i.cD(Sn,tn,Oe);const Qn=i.b6(i.cC(jt.canonical)),Bn=(nr,$n)=>nr.draw(K,xe.TRIANGLES,Xe,Ir.disabled,qe,_r.disabled,c_(Oe.expandedFarZProjMatrix,Wn,Wn,Qn,0,Ye,Oe.frustumCorners.TL,Oe.frustumCorners.TR,Oe.frustumCorners.BR,Oe.frustumCorners.BL,Oe.globeCenterInViewSpace,Oe.globeRadius,vt,0,Oe._farZ),"globe_pole_raster",$n,rn,Jt);G.setupElevationDraw(In,Te,it),K.uploadCommonUniforms(be,Te,jt.toUnwrapped()),Et&&K.renderDefaultNorthPole&&Bn(Te,Nt),Qt&&K.renderDefaultSouthPole&&(Wn=i.a6.mat4.scale(i.a6.mat4.create(),Wn,[1,-1,1]),Bn(Te,en))}}}})(b,C,I,z,U);else{const K=b.context,G=K.gl;let Q,ne;const le=b.shadowRenderer,be=ml(b,b.longestCutoffRange),xe=qe=>{if(ne===qe)return;const Xe=[];Xe.push(d_[qe]),be.shouldRenderCutoff&&Xe.push("RENDER_CUTOFF"),le&&(Xe.push("RENDER_SHADOWS","DEPTH_TEXTURE"),le.useNormalOffset&&Xe.push("NORMAL_OFFSET")),Q=b.getOrCreateProgram("terrainRaster",{defines:Xe}),ne=qe},Te=b.colorModeForRenderPass(),Ee=new lr(G.LEQUAL,lr.ReadWrite,b.depthRangeFor3D);Iu.update(U);const Oe=b.transform,Ve=h_(Oe.zoom,C.exaggeration(),C.sourceCache._source.tileSize);let He=[0,0,0];if(le){const qe=b.style.directionalLight,Xe=b.style.ambientLight;qe&&Xe&&(He=bf(b.style,qe,Xe))}{ne=-1;const qe=G.TRIANGLES,[Xe,Ke]=[C.gridIndexBuffer,C.gridSegments];for(const Ye of z){const rt=I.getTile(Ye),vt=Ir.disabled,st=C.prevTerrainTileForTile[Ye.key],it=C.terrainTileForTile[Ye.key];u_(st,it)&&Iu.newMorphing(Ye.key,st,it,U,250),K.activeTexture.set(G.TEXTURE0),rt.texture&&rt.texture.bind(G.LINEAR,G.CLAMP_TO_EDGE);const zt=Iu.getMorphValuesForProxy(Ye.key),jt=zt?1:0;let tn;zt&&(tn={morphing:{srcDemTile:zt.from,dstDemTile:zt.to,phase:i.cw(zt.phase)}});const fn=bS(Ye.projMatrix,vg(Ye.canonical,Oe.renderWorldCopies)?Ve/10:Ve,He);if(xe(jt),!Q)continue;C.setupElevationDraw(rt,Q,tn);const Sn=Ye.toUnwrapped();le&&le.setupShadows(Sn,Q),b.uploadCommonUniforms(K,Q,Sn,null,be),Q.draw(b,qe,Ee,vt,Te,_r.backCCW,fn,"terrain_raster",C.gridBuffer,Xe,Ke)}}}}(c,this,this.proxySourceCache,a,this._updateTimestamp),this.renderingToTexture=!0,c.gpuTimingDeferredRenderEnd(),a.splice(0,a.length))}renderBatch(a){if(this._drapedRenderBatches.length===0)return a+1;this.renderingToTexture=!0;const c=this.painter,g=this.painter.context,b=this.proxySourceCache,C=this.proxiedCoords[b.id],I=this._drapedRenderBatches.shift(),z=c.style.order,U=[];let K=0;for(const G of C){const Q=b.getTileByID(G.proxyTileKey),ne=b.proxyCachedFBO[G.key]?b.proxyCachedFBO[G.key][a]:void 0,le=ne!==void 0?b.renderCache[ne]:this.pool[K++],be=ne!==void 0;if(Q.texture=le.tex,be&&!le.dirty){U.push(Q.tileID);continue}let xe;g.bindFramebuffer.set(le.fb.framebuffer),this.renderedToTile=!1,le.dirty&&(g.clear({color:i.bA.transparent,stencil:0}),le.dirty=!1);for(let Te=I.start;Te<=I.end;++Te){const Ee=c.style._mergedLayers[z[Te]];if(Ee.isHidden(c.transform.zoom))continue;const Oe=c.style.getLayerSourceCache(Ee),Ve=Oe?this.proxyToSource[G.key][Oe.id]:[G];if(!Ve)continue;const He=Ve;g.viewport.set([0,0,le.fb.width,le.fb.height]),xe!==(Oe?Oe.id:null)&&(this._setupStencil(le,Ve,Ee,Oe),xe=Oe?Oe.id:null),c.renderLayer(c,Oe,Ee,He)}if(this._drapedRenderBatches.length===0)for(const Te of this._pendingGroundEffectLayers){const Ee=c.style._mergedLayers[z[Te]];if(Ee.isHidden(c.transform.zoom))continue;const Oe=c.style.getLayerSourceCache(Ee),Ve=Oe?this.proxyToSource[G.key][Oe.id]:[G];if(!Ve)continue;const He=Ve;g.viewport.set([0,0,le.fb.width,le.fb.height]),xe!==(Oe?Oe.id:null)&&(this._setupStencil(le,Ve,Ee,Oe),xe=Oe?Oe.id:null),c.renderLayer(c,Oe,Ee,He)}this.renderedToTile?(le.dirty=!0,U.push(Q.tileID)):be||--K,K===5&&(K=0,this.renderToBackBuffer(U))}return this.renderToBackBuffer(U),this.renderingToTexture=!1,g.bindFramebuffer.set(null),g.viewport.set([0,0,c.width,c.height]),I.end+1}postRender(){}isLayerOrderingCorrect(a){const c=a.order.length;let g=-1,b=c;for(let C=0;C<c;++C)this._style.isLayerDraped(a._mergedLayers[a.order[C]])?g=Math.max(g,C):b=Math.min(b,C);return b>g}getMinElevationBelowMSL(){let a=0;return this._visibleDemTiles.filter(c=>c.dem).forEach(c=>{a=Math.min(a,c.dem.tree.minimums[0])}),a===0?a:(a-30)*this._exaggeration}raycast(a,c,g){if(!this._visibleDemTiles)return null;const b=this._visibleDemTiles.filter(C=>C.dem).map(C=>{const I=C.tileID,z=1<<I.overscaledZ,{x:U,y:K}=I.canonical,G=U/z,Q=(U+1)/z,ne=K/z,le=(K+1)/z;return{minx:G,miny:ne,maxx:Q,maxy:le,t:C.dem.tree.raycastRoot(G,ne,Q,le,a,c,g),tile:C}});b.sort((C,I)=>(C.t!==null?C.t:Number.MAX_VALUE)-(I.t!==null?I.t:Number.MAX_VALUE));for(const C of b){if(C.t==null)return null;const I=C.tile.dem.tree.raycast(C.minx,C.miny,C.maxx,C.maxy,a,c,g);if(I!=null)return I}return null}_createFBO(){const a=this.painter.context,c=a.gl,g=this.drapeBufferSize;a.activeTexture.set(c.TEXTURE0);const b=new i.T(a,{width:g[0],height:g[1],data:null},c.RGBA8);b.bind(c.LINEAR,c.CLAMP_TO_EDGE);const C=a.createFramebuffer(g[0],g[1],!0,null);return C.colorAttachment.set(b.texture),C.depthAttachment=new Tu(a,C.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=a.createRenderbuffer(a.gl.DEPTH_STENCIL,g[0],g[1]),this._stencilRef=0,C.depthAttachment.set(this._sharedDepthStencil),a.clear({stencil:0})):C.depthAttachment.set(this._sharedDepthStencil),a.extTextureFilterAnisotropic&&c.texParameterf(c.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax),{fb:C,tex:b,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const a in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[a].hasTransition())return!0;return this._style.order.some(a=>{const c=this._style._mergedLayers[a],g=c.isHidden(this.painter.transform.zoom);return c.type==="hillshade"||c.type==="custom"?!g&&c.shouldRedrape():!g&&c.hasTransition()})}_clearLineLayersFromRenderCache(){let a=!1;for(const g of this._style.getSources())if(g instanceof ei){a=!0;break}if(!a)return;const c={};for(let g=0;g<this._style.order.length;++g){const b=this._style._mergedLayers[this._style.order[g]],C=this._style.getLayerSourceCache(b);if(C&&!c[C.id]&&!b.isHidden(this.painter.transform.zoom)&&b.type==="line"&&b.widthExpression()instanceof i.a4){c[C.id]=!0;for(const I of this.proxyCoords){const z=this.proxyToSource[I.key][C.id];if(z)for(const U of z)this._clearRenderCacheForTile(C.id,U)}}}}_clearRasterLayersFromRenderCache(){let a=!1;for(const g in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[g]._source instanceof Hi){a=!0;break}if(!a)return;const c={};for(let g=0;g<this._style.order.length;++g){const b=this._style._mergedLayers[this._style.order[g]],C=this._style.getLayerSourceCache(b);if(!C||c[C.id]||b.isHidden(this.painter.transform.zoom)||b.type!=="raster")continue;const I=b.paint.get("raster-fade-duration");for(const z of this.proxyCoords){const U=this.proxyToSource[z.key][C.id];if(U)for(const K of U){const G=Df(C.getTile(K),C.findLoadedParent(K,0),C,this.painter.transform,I);(G.opacity!==1||G.mix!==0)&&this._clearRenderCacheForTile(C.id,K)}}}}_setupDrapedRenderBatches(){const a=this._style.order,c=a.length;if(c===0)return;const g=[];this._pendingGroundEffectLayers=[];let b,C=0,I=this._style._mergedLayers[a[C]];for(;!this._style.isLayerDraped(I)&&I.isHidden(this.painter.transform.zoom)&&++C<c;)I=this._style._mergedLayers[a[C]];for(;C<c;++C){const z=this._style._mergedLayers[a[C]];z.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(z)?b===void 0&&(b=C):(z.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(C),b!==void 0&&(g.push({start:b,end:C-1}),b=void 0)))}if(b!==void 0&&g.push({start:b,end:C-1}),g.length!==0){const z=g[g.length-1];this._pendingGroundEffectLayers.every(U=>U>z.end)||i.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=g}_setupRenderCache(a){const c=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,c.renderCache.length>c.renderCachePool.length){const I=Object.values(c.proxyCachedFBO);c.proxyCachedFBO={};for(let z=0;z<I.length;++z){const U=Object.values(I[z]);c.renderCachePool.push(...U)}}return}this._clearRasterLayersFromRenderCache();const g=this.proxyCoords,b=this._tilesDirty;for(let I=g.length-1;I>=0;I--){const z=g[I];if(c.getTileByID(z.key),c.proxyCachedFBO[z.key]!==void 0){const U=a[z.key],K=this.proxyToSource[z.key];let G=0;for(const Q in K){const ne=K[Q],le=U[Q];if(!le||le.length!==ne.length||ne.some((be,xe)=>be!==le[xe]||b[Q]&&b[Q].hasOwnProperty(be.key))){G=-1;break}++G}for(const Q in c.proxyCachedFBO[z.key])c.renderCache[c.proxyCachedFBO[z.key][Q]].dirty=G<0||G!==Object.values(U).length}}const C=[...this._drapedRenderBatches];C.sort((I,z)=>z.end-z.start-(I.end-I.start));for(const I of C)for(const z of g){if(c.proxyCachedFBO[z.key])continue;let U=c.renderCachePool.pop();U===void 0&&c.renderCache.length<50&&(U=c.renderCache.length,c.renderCache.push(this._createFBO())),U!==void 0&&(c.proxyCachedFBO[z.key]={},c.proxyCachedFBO[z.key][I.start]=U,c.renderCache[U].dirty=!0)}this._tilesDirty={}}_setupStencil(a,c,g,b){if(!b||!this._sourceTilesOverlap[b.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const C=this.painter.context,I=C.gl;if(c.length<=1)return void(this._overlapStencilType=!1);let z;if(g.isTileClipped())z=c.length,this._overlapStencilMode.test={func:I.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(c[0].overscaledZ>c[c.length-1].overscaledZ))return void(this._overlapStencilType=!1);z=1,this._overlapStencilMode.test={func:I.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+z>255&&(C.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=z,this._overlapStencilMode.ref=this._stencilRef,g.isTileClipped()&&this._renderTileClippingMasks(c,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(a){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[a.key]),this._overlapStencilMode):Ir.disabled}_renderTileClippingMasks(a,c){const g=this.painter,b=this.painter.context,C=b.gl;g._tileClippingMaskIDs={},b.setColorMode(Br.disabled),b.setDepthMode(lr.disabled);const I=g.getOrCreateProgram("clippingMask");for(const z of a){const U=g._tileClippingMaskIDs[z.key]=--c;I.draw(g,C.TRIANGLES,lr.disabled,new Ir({func:C.ALWAYS,mask:0},U,255,C.KEEP,C.KEEP,C.REPLACE),Br.disabled,_r.disabled,nh(z.projMatrix),"$clipping",g.tileExtentBuffer,g.quadTriangleIndexBuffer,g.tileExtentSegments)}}pointCoordinate(a){const c=this.painter.transform;if(a.x<0||a.x>c.width||a.y<0||a.y>c.height)return null;const g=[a.x,a.y,1,1];i.a6.vec4.transformMat4(g,g,c.pixelMatrixInverse),i.a6.vec4.scale(g,g,1/g[3]),g[0]/=c.worldSize,g[1]/=c.worldSize;const b=c._camera.position,C=i.bE(1,c.center.lat),I=[b[0],b[1],b[2]/C,0],z=i.a6.vec3.subtract([],g.slice(0,3),I);i.a6.vec3.normalize(z,z);const U=this.raycast(I,z,this._exaggeration);return U!==null&&U?(i.a6.vec3.scaleAndAdd(I,I,z,U),I[3]=I[2],I[2]*=C,I):null}_setupProxiedCoordsForOrtho(a,c,g){if(a.getSource()instanceof i.aD)return this._setupProxiedCoordsForImageSource(a,c,g);this._findCoveringTileCache[a.id]=this._findCoveringTileCache[a.id]||{};const b=this.proxiedCoords[a.id]=[],C=this.proxyCoords;for(let U=0;U<C.length;U++){const K=C[U],G=this._findTileCoveringTileID(K,a);if(G){const Q=this._createProxiedId(K,G,g[K.key]&&g[K.key][a.id]);b.push(Q),this.proxyToSource[K.key][a.id]=[Q]}}let I=!1;const z=new Set;for(let U=0;U<c.length;U++){const K=a.getTile(c[U]);if(!K||!K.hasData())continue;const G=this._findTileCoveringTileID(K.tileID,this.proxySourceCache);if(G&&G.tileID.canonical.z!==K.tileID.canonical.z){const Q=this.proxyToSource[G.tileID.key][a.id],ne=this._createProxiedId(G.tileID,K,g[G.tileID.key]&&g[G.tileID.key][a.id]);Q?Q.splice(Q.length-1,0,ne):this.proxyToSource[G.tileID.key][a.id]=[ne];const le=this.proxyToSource[G.tileID.key][a.id];z.has(le)||z.add(le),b.push(ne),I=!0}}if(this._sourceTilesOverlap[a.id]=I,I&&this._debugParams.sortTilesHiZFirst)for(const U of z)U.sort((K,G)=>G.overscaledZ-K.overscaledZ)}_setupProxiedCoordsForImageSource(a,c,g){if(!a.getSource().loaded())return;const b=this.proxiedCoords[a.id]=[],C=this.proxyCoords,I=a.getSource(),z=I.tileID;if(!z)return;const U=new i.P(z.x,z.y)._div(1<<z.z),K=I.coordinates.map(i.a5.fromLngLat).reduce((Q,ne)=>(Q.min.x=Math.min(Q.min.x,ne.x-U.x),Q.min.y=Math.min(Q.min.y,ne.y-U.y),Q.max.x=Math.max(Q.max.x,ne.x-U.x),Q.max.y=Math.max(Q.max.y,ne.y-U.y),Q),{min:new i.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new i.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),G=(Q,ne)=>{const le=Q.wrap+Q.canonical.x/(1<<Q.canonical.z),be=Q.canonical.y/(1<<Q.canonical.z),xe=i.ab/(1<<Q.canonical.z),Te=ne.wrap+ne.canonical.x/(1<<ne.canonical.z),Ee=ne.canonical.y/(1<<ne.canonical.z);return le+xe<Te+K.min.x||le>Te+K.max.x||be+xe<Ee+K.min.y||be>Ee+K.max.y};for(let Q=0;Q<C.length;Q++){const ne=C[Q];for(let le=0;le<c.length;le++){const be=a.getTile(c[le]);if(!be||!be.hasData()||G(ne,be.tileID))continue;const xe=this._createProxiedId(ne,be,g[ne.key]&&g[ne.key][a.id]),Te=this.proxyToSource[ne.key][a.id];Te?Te.push(xe):this.proxyToSource[ne.key][a.id]=[xe],b.push(xe)}}}_createProxiedId(a,c,g){let b=this.orthoMatrix;if(g){const C=g.find(I=>I.key===c.tileID.key);if(C)return C}if(c.tileID.key!==a.key){const C=a.canonical.z-c.tileID.canonical.z;let I,z,U;b=i.a6.mat4.create();const K=c.tileID.wrap-a.wrap<<a.overscaledZ;C>0?(I=i.ab>>C,z=I*((c.tileID.canonical.x<<C)-a.canonical.x+K),U=I*((c.tileID.canonical.y<<C)-a.canonical.y)):(I=i.ab<<-C,z=i.ab*(c.tileID.canonical.x-(a.canonical.x+K<<-C)),U=i.ab*(c.tileID.canonical.y-(a.canonical.y<<-C))),i.a6.mat4.ortho(b,0,I,0,I,0,1),i.a6.mat4.translate(b,b,[z,U,0])}return new yg(c.tileID,a.key,b)}_findTileCoveringTileID(a,c){let g=c.getTile(a);if(g&&g.hasData())return g;const b=this._findCoveringTileCache[c.id],C=b[a.key];if(g=C?c.getTileByID(C):null,g&&g.hasData()||C===null)return g;let I=g?g.tileID:a,z=I.overscaledZ;const U=c.getSource().minzoom,K=[];if(!C){const Q=c.getSource().maxzoom;if(a.canonical.z>=Q){const ne=a.canonical.z-Q;c.getSource().reparseOverscaled?(z=Math.max(a.canonical.z+2,c.transform.tileZoom),I=new i.aA(z,a.wrap,Q,a.canonical.x>>ne,a.canonical.y>>ne)):ne!==0&&(z=Q,I=new i.aA(z,a.wrap,Q,a.canonical.x>>ne,a.canonical.y>>ne))}I.key!==a.key&&(K.push(I.key),g=c.getTile(I))}const G=Q=>{K.forEach(ne=>{b[ne]=Q}),K.length=0};for(z-=1;z>=U&&(!g||!g.hasData());z--){g&&G(g.tileID.key);const Q=I.calculateScaledKey(z);if(g=c.getTileByID(Q),g&&g.hasData())break;const ne=b[Q];if(ne===null)break;ne===void 0?K.push(Q):g=c.getTileByID(ne)}return G(g?g.tileID.key:null),g&&g.hasData()?g:null}findDEMTileFor(a){return this.enabled?this._findTileCoveringTileID(a,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(a,c){let g=this._tilesDirty[a];g||(g=this._tilesDirty[a]={}),g[c.key]=!0}}function xg(m,a,c){const g=function(z,U,K){const G=i.a6.vec3.dot(U,z),Q=i.a6.vec3.dot(K,[.2126,.7152,.0722]),ne=(be,xe,Te)=>(1-Te)*be+Te*xe,le=ne(1-.3*Math.min(Q,1),1,Math.min(G+1,1));return ne(.92,1,Math.asin(i.ap(U[2],-1,1))/Math.PI+.5)*le}(m,[0,0,1],a),b=[0,0,0];i.a6.vec3.scale(b,c.slice(0,3),g);const C=[0,0,0];i.a6.vec3.scale(C,a.slice(0,3),m[2]);const I=[0,0,0];return i.a6.vec3.add(I,b,C),i.cc(I)}const Ac=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],p_=["stars","rain_particle","snow_particle","fillExtrusion","fillExtrusionGroundEffect","model","symbol"];class vl{static cacheKey(a,c,g,b){let C=`${c}${b?b.cacheKey:""}`;for(const I of g)a.usedDefines.includes(I)&&(C+=`/${I}`);return C}constructor(a,c,g,b,C,I){const z=a.gl;this.program=z.createProgram(),this.configuration=b,this.name=c,this.fixedDefines=[...I];const U=b?b.getBinderAttributes():[],K=(g.staticAttributes||[]).concat(U);let G=b?b.defines():[];G=G.concat(I.map(Te=>`#define ${Te}`));const Q=`#version 300 es
`;let ne=Q+G.concat("precision mediump float;",Tf,Xd.fragmentSource).join(`
`);for(const Te of g.fragmentIncludes)ne+=`
${Kd[Te]}`;ne+=`
${g.fragmentSource}`;let le=Q+G.concat("precision highp float;",Tf,Xd.vertexSource).join(`
`);for(const Te of g.vertexIncludes)le+=`
${Kd[Te]}`;le+=`
${g.vertexSource}`;const be=z.createShader(z.FRAGMENT_SHADER);if(z.isContextLost())return void(this.failedToCreate=!0);z.shaderSource(be,ne),z.compileShader(be),z.attachShader(this.program,be);const xe=z.createShader(z.VERTEX_SHADER);if(z.isContextLost())this.failedToCreate=!0;else{z.shaderSource(xe,le),z.compileShader(xe),z.attachShader(this.program,xe),this.attributes={},this.numAttributes=K.length;for(let Te=0;Te<this.numAttributes;Te++)if(K[Te]){const Ee=K[Te].startsWith("a_")?K[Te]:`a_${K[Te]}`;z.bindAttribLocation(this.program,Te,Ee),this.attributes[Ee]=Te}z.linkProgram(this.program),z.deleteShader(xe),z.deleteShader(be),this.fixedUniforms=C(a),this.binderUniforms=b?b.getUniforms(a):[],(I.includes("TERRAIN")||c.indexOf("symbol")!==-1||c.indexOf("circle")!==-1)&&(this.terrainUniforms=(Te=>({u_dem:new i.bK(Te),u_dem_prev:new i.bK(Te),u_dem_tl:new i.bH(Te),u_dem_scale:new i.bJ(Te),u_dem_tl_prev:new i.bH(Te),u_dem_scale_prev:new i.bJ(Te),u_dem_size:new i.bJ(Te),u_dem_lerp:new i.bJ(Te),u_exaggeration:new i.bJ(Te),u_depth:new i.bK(Te),u_depth_size_inv:new i.bH(Te),u_depth_range_unpack:new i.bH(Te),u_occluder_half_size:new i.bJ(Te),u_occlusion_depth_offset:new i.bJ(Te),u_meter_to_dem:new i.bJ(Te),u_label_plane_matrix_inv:new i.bG(Te)}))(a)),I.includes("GLOBE")&&(this.globeUniforms=(Te=>({u_tile_tl_up:new i.bI(Te),u_tile_tr_up:new i.bI(Te),u_tile_br_up:new i.bI(Te),u_tile_bl_up:new i.bI(Te),u_tile_up_scale:new i.bJ(Te)}))(a)),I.includes("FOG")&&(this.fogUniforms=(Te=>({u_fog_matrix:new i.bG(Te),u_fog_range:new i.bH(Te),u_fog_color:new i.c7(Te),u_fog_horizon_blend:new i.bJ(Te),u_fog_vertical_limit:new i.bH(Te),u_fog_temporal_offset:new i.bJ(Te),u_frustum_tl:new i.bI(Te),u_frustum_tr:new i.bI(Te),u_frustum_br:new i.bI(Te),u_frustum_bl:new i.bI(Te),u_globe_pos:new i.bI(Te),u_globe_radius:new i.bJ(Te),u_globe_transition:new i.bJ(Te),u_is_globe:new i.bK(Te),u_viewport:new i.bH(Te)}))(a)),I.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(Te=>({u_cutoff_params:new i.c7(Te)}))(a)),I.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(Te=>({u_lighting_ambient_color:new i.bI(Te),u_lighting_directional_dir:new i.bI(Te),u_lighting_directional_color:new i.bI(Te),u_ground_radiance:new i.bI(Te)}))(a)),I.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(Te=>({u_light_matrix_0:new i.bG(Te),u_light_matrix_1:new i.bG(Te),u_fade_range:new i.bH(Te),u_shadow_normal_offset:new i.bI(Te),u_shadow_intensity:new i.bJ(Te),u_shadow_texel_size:new i.bJ(Te),u_shadow_map_resolution:new i.bJ(Te),u_shadow_direction:new i.bI(Te),u_shadow_bias:new i.bI(Te),u_shadowmap_0:new i.bK(Te),u_shadowmap_1:new i.bK(Te)}))(a))}}setTerrainUniformValues(a,c){if(!this.terrainUniforms)return;const g=this.terrainUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const b in c)g[b]&&g[b].set(this.program,b,c[b])}}setGlobeUniformValues(a,c){if(!this.globeUniforms)return;const g=this.globeUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const b in c)g[b]&&g[b].set(this.program,b,c[b])}}setFogUniformValues(a,c){if(!this.fogUniforms)return;const g=this.fogUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const b in c)g[b].set(this.program,b,c[b])}}setCutoffUniformValues(a,c){if(!this.cutoffUniforms)return;const g=this.cutoffUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const b in c)g[b].set(this.program,b,c[b])}}setLightsUniformValues(a,c){if(!this.lightsUniforms)return;const g=this.lightsUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const b in c)g[b].set(this.program,b,c[b])}}setShadowUniformValues(a,c){if(this.failedToCreate||!this.shadowUniforms)return;const g=this.shadowUniforms;a.program.set(this.program);for(const b in c)g[b].set(this.program,b,c[b])}_drawDebugWireframe(a,c,g,b,C,I,z,U,K,G){const Q=a.options.wireframe;if(Q.terrain===!1&&Q.layers2D===!1&&Q.layers3D===!1)return;const ne=a.context;if(!(!(!Q.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!Q.layers2D||a._terrain&&a._terrain.renderingToTexture||!Ac.includes(this.name))||!(!Q.layers3D||!p_.includes(this.name))))return;const le=ne.gl,be=a.wireframeDebugCache.getLinesFromTrianglesBuffer(a.frameCounter,C,ne);if(!be)return;const xe=[...this.fixedDefines];xe.push("DEBUG_WIREFRAME");const Te=a.getOrCreateProgram(this.name,{config:this.configuration,defines:xe});ne.program.set(Te.program);const Ee=(He,qe,Xe)=>{if(qe[He]&&Xe[He])for(const Ke in qe[He])Xe[He][Ke]&&Xe[He][Ke].set(Xe.program,Ke,qe[He][Ke].current)};K&&K.setUniforms(Te.program,ne,Te.binderUniforms,z,{zoom:U}),Ee("fixedUniforms",this,Te),Ee("terrainUniforms",this,Te),Ee("globeUniforms",this,Te),Ee("fogUniforms",this,Te),Ee("lightsUniforms",this,Te),Ee("shadowUniforms",this,Te),be.bind(),ne.setColorMode(new Br([le.ONE,le.ONE_MINUS_SRC_ALPHA,le.ZERO,le.ONE],i.bA.transparent,[!0,!0,!0,!1])),ne.setDepthMode(new lr(c.func===le.LESS?le.LEQUAL:c.func,lr.ReadOnly,c.range)),ne.setStencilMode(Ir.disabled);const Oe=3*I.primitiveLength*2,Ve=3*I.primitiveOffset*2*2;G&&G>1?le.drawElementsInstanced(le.LINES,Oe,le.UNSIGNED_SHORT,Ve,G):le.drawElements(le.LINES,Oe,le.UNSIGNED_SHORT,Ve),C.bind(),ne.program.set(this.program),ne.setDepthMode(c),ne.setStencilMode(g),ne.setColorMode(b)}checkUniforms(a,c,g){if(this.fixedDefines.includes(c)){for(const b of Object.keys(g))if(!g[b].initialized)throw new Error(`Program '${this.name}', from draw '${a}': uniform ${b} not set but required by ${c} being defined`)}}draw(a,c,g,b,C,I,z,U,K,G,Q,ne,le,be,xe,Te){const Ee=a.context,Oe=Ee.gl;if(this.failedToCreate)return;Ee.program.set(this.program),Ee.setDepthMode(g),Ee.setStencilMode(b),Ee.setColorMode(C),Ee.setCullFace(I);for(const qe of Object.keys(this.fixedUniforms))this.fixedUniforms[qe].set(this.program,qe,z[qe]);be&&be.setUniforms(this.program,Ee,this.binderUniforms,ne,{zoom:le});const Ve={[Oe.POINTS]:1,[Oe.LINES]:2,[Oe.TRIANGLES]:3,[Oe.LINE_STRIP]:1}[c];this.checkUniforms(U,"RENDER_SHADOWS",this.shadowUniforms);const He=Te&&Te>0?1:void 0;for(const qe of Q.get()){const Xe=qe.vaos||(qe.vaos={});(Xe[U]||(Xe[U]=new Su)).bind(Ee,this,K,be?be.getPaintVertexBuffers():[],G,qe.vertexOffset,xe||[],He),Te&&Te>1?Oe.drawElementsInstanced(c,qe.primitiveLength*Ve,Oe.UNSIGNED_SHORT,qe.primitiveOffset*Ve*2,Te):G?Oe.drawElements(c,qe.primitiveLength*Ve,Oe.UNSIGNED_SHORT,qe.primitiveOffset*Ve*2):Oe.drawArrays(c,qe.vertexOffset,qe.vertexLength),c===Oe.TRIANGLES&&G&&this._drawDebugWireframe(a,g,b,C,G,qe,ne,le,be,Te)}}}function $f(m,a){const c=Math.pow(2,a.tileID.overscaledZ),g=a.tileSize*Math.pow(2,m.transform.tileZoom)/c,b=g*(a.tileID.canonical.x+a.tileID.wrap*c),C=g*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture?a.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/i.ak(a,1,m.transform.tileZoom),u_pixel_coord_upper:[b>>16,C>>16],u_pixel_coord_lower:[65535&b,65535&C]}}const Dc={terrain:0,flat:1},m_=i.a6.mat4.create(),bg=(m,a,c,g,b,C,I,z,U,K,G,Q,ne,le,be,xe,Te,Ee)=>{const Oe=a.style.light,Ve=Oe.properties.get("position"),He=[Ve.x,Ve.y,Ve.z],qe=i.a6.mat3.create();Oe.properties.get("anchor")==="viewport"&&(i.a6.mat3.fromRotation(qe,-a.transform.angle),i.a6.vec3.transformMat3(He,He,qe));const Xe=Oe.properties.get("color"),Ke=a.transform,Ye={u_matrix:m,u_lightpos:He,u_lightintensity:Oe.properties.get("intensity"),u_lightcolor:[Xe.r,Xe.g,Xe.b],u_vertical_gradient:+c,u_opacity:g,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:m_,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_height_type:Dc[K],u_base_type:Dc[G],u_ao:b,u_edge_radius:C,u_width_scale:I,u_flood_light_color:be,u_vertical_scale:xe,u_flood_light_intensity:Te,u_ground_shadow_factor:Ee};return Ke.projection.name==="globe"&&(Ye.u_tile_id=[z.canonical.x,z.canonical.y,1<<z.canonical.z],Ye.u_zoom_transition=Q,Ye.u_inv_rot_matrix=le,Ye.u_merc_center=ne,Ye.u_up_dir=Ke.projection.upVector(new i.bQ(0,0,0),ne[0]*i.ab,ne[1]*i.ab),Ye.u_height_lift=U),Ye},wg=(m,a,c,g,b,C)=>({u_matrix:m,u_edge_radius:a,u_width_scale:c,u_vertical_scale:g,u_height_type:Dc[b],u_base_type:Dc[C]}),Sg=(m,a,c,g,b,C,I,z,U,K,G,Q,ne,le,be,xe,Te)=>{const Ee=bg(m,a,c,g,b,C,I,z,K,G,Q,ne,le,be,xe,Te,1,[0,0,0]),Oe={u_height_factor:-Math.pow(2,z.overscaledZ)/U.tileSize/8};return i.l(Ee,$f(a,U),Oe)},g_=(m,a)=>({u_matrix:m,u_emissive_strength:a}),Cg=(m,a,c,g)=>i.l(g_(m,a),$f(c,g)),rh=(m,a,c)=>({u_matrix:m,u_world:c,u_emissive_strength:a}),wS=(m,a,c,g,b)=>i.l(Cg(m,a,c,g),{u_world:b}),SS=(m,a,c,g)=>{const b=i.ab/c.tileSize;return{u_matrix:m,u_camera_to_center_distance:a.getCameraToCenterDistance(g),u_extrude_scale:[a.pixelsToGLUnits[0]/b,a.pixelsToGLUnits[1]/b]}},Eg=(m,a,c=1)=>({u_matrix:m,u_color:a.toRenderColor(null),u_overlay:0,u_overlay_scale:c}),CS=i.a6.mat4.create(),Tg=(m,a,c,g,b,C,I)=>{const z=m.transform,U=z.projection.name==="globe",K=U?i.cI(z.zoom,a.canonical)*z._pixelsPerMercatorPixel:i.ak(c,1,C),G={u_matrix:a.projMatrix,u_extrude_scale:K,u_intensity:I,u_inv_rot_matrix:CS,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(U){G.u_inv_rot_matrix=g,G.u_merc_center=b,G.u_tile_id=[a.canonical.x,a.canonical.y,1<<a.canonical.z],G.u_zoom_transition=i.a9(z.zoom);const Q=b[0]*i.ab,ne=b[1]*i.ab;G.u_up_dir=z.projection.upVector(new i.bQ(0,0,0),Q,ne)}return G};function kf(m,[a,c,g,b],[C,I]){if(C===I)return[0,0,0,0];const z=255*(m-1)/(m*(I-C));return[a*z,c*z,g*z,b*z]}function Pu(m,a,[c,g]){return c===g?0:.5/m+(a-c)*(m-1)/(m*(g-c))}const zf=(m,a,c,g,b,C,I,z,U,K,G,Q,ne,le,be,xe,Te,Ee,Oe,Ve,He)=>({u_matrix:m,u_normalize_matrix:a,u_globe_matrix:c,u_merc_matrix:g,u_grid_matrix:b,u_tl_parent:C,u_scale_parent:K,u_fade_t:G.mix,u_opacity:G.opacity*Q.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:Q.paint.get("raster-brightness-min"),u_brightness_high:Q.paint.get("raster-brightness-max"),u_saturation_factor:i.cJ(Q.paint.get("raster-saturation")),u_contrast_factor:i.cK(Q.paint.get("raster-contrast")),u_spin_weights:ih(Q.paint.get("raster-hue-rotate")),u_perspective_transform:ne,u_raster_elevation:le,u_zoom_transition:I,u_merc_center:z,u_cutoff_params:U,u_colorization_mix:kf(i.cL,xe,Ee),u_colorization_offset:Pu(i.cL,Te,Ee),u_color_ramp:be,u_texture_offset:[Ve/(Oe+2*Ve),Oe/(Oe+2*Ve)],u_texture_res:[Oe+2*Ve,Oe+2*Ve],u_emissive_strength:He});function ih(m){m*=Math.PI/180;const a=Math.sin(m),c=Math.cos(m);return[(2*c+1)/3,(-Math.sqrt(3)*a-c+1)/3,(Math.sqrt(3)*a-c+1)/3]}const $c=.05,Lf=(m,a,c,g,b,C,I,z,U,K,G,Q)=>({u_matrix:m,u_normalize_matrix:a,u_globe_matrix:c,u_merc_matrix:g,u_grid_matrix:b,u_tl_parent:C,u_scale_parent:K,u_fade_t:G.mix,u_opacity:G.opacity,u_image0:0,u_image1:1,u_raster_elevation:Q,u_zoom_transition:I,u_merc_center:z,u_cutoff_params:U}),Nf=(m,a,c,g,b,C,I,z,U,K)=>({u_particle_texture:m,u_particle_texture_side_len:a,u_tile_offset:c,u_velocity:g,u_color_ramp:C,u_velocity_res:b,u_max_speed:I,u_uv_offset:z,u_data_scale:[255*U[0],255*U[1]],u_data_offset:K,u_particle_pos_scale:1.1,u_particle_pos_offset:[$c,$c]}),Ig=(m,a,c,g,b,C,I,z,U,K)=>({u_particle_texture:m,u_particle_texture_side_len:a,u_velocity:c,u_velocity_res:g,u_max_speed:b,u_speed_factor:C,u_reset_rate:I,u_rand_seed:Math.random(),u_uv_offset:z,u_data_scale:[255*U[0],255*U[1]],u_data_offset:K,u_particle_pos_scale:1.1,u_particle_pos_offset:[$c,$c]}),Mg=i.a6.mat4.create(),v_=(m,a,c,g,b,C,I,z,U,K,G,Q,ne,le,be,xe,Te,Ee,Oe,Ve,He,qe)=>{const Xe=b.transform,Ke={u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:Xe.getCameraToCenterDistance(Oe),u_rotate_symbol:+c,u_aspect_ratio:Xe.width/Xe.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:I,u_coord_matrix:z,u_is_text:+K,u_elevation_from_sea:U?1:0,u_pitch_with_map:+g,u_texsize:G,u_texsize_icon:Q,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Mg,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Mg,u_up_vector:[0,-1,0],u_color_adj_mat:Ve,u_icon_transition:He||0,u_gamma_scale:g?b.transform.getCameraToCenterDistance(Oe)*Math.cos(b.terrain?0:b.transform._pitch):1,u_device_pixel_ratio:i.q.devicePixelRatio,u_is_halo:+ne,u_scale_factor:qe||1};return Oe.name==="globe"&&(Ke.u_tile_id=[le.canonical.x,le.canonical.y,1<<le.canonical.z],Ke.u_zoom_transition=be,Ke.u_inv_rot_matrix=Te,Ke.u_merc_center=xe,Ke.u_camera_forward=Xe._camera.forward(),Ke.u_ecef_origin=i.cM(Xe.globeMatrix,le.toUnwrapped()),Ke.u_tile_matrix=Float32Array.from(Xe.globeMatrix),Ke.u_up_vector=Ee),Ke},kc=(m,a,c,g)=>({u_matrix:m,u_emissive_strength:a,u_opacity:c,u_color:g}),oh=(m,a,c,g,b,C,I,z,U)=>i.l(function(K,G,Q,ne,le,be){const{width:xe,height:Te}=ne.imageManager.getPixelSize(G),Ee=Math.pow(2,be.tileID.overscaledZ),Oe=be.tileSize*Math.pow(2,ne.transform.tileZoom)/Ee,Ve=Oe*(be.tileID.canonical.x+be.tileID.wrap*Ee),He=Oe*be.tileID.canonical.y;return{u_image:0,u_pattern_tl:Q.tl,u_pattern_br:Q.br,u_texsize:[xe,Te],u_pattern_size:Q.displaySize,u_pattern_units_to_pixels:le?[ne.transform.width,-1*ne.transform.height]:[1/i.ak(be,1,ne.transform.tileZoom),1/i.ak(be,1,ne.transform.tileZoom)],u_pixel_coord_upper:[Ve>>16,He>>16],u_pixel_coord_lower:[65535&Ve,65535&He]}}(0,C,I,g,z,U),{u_matrix:m,u_emissive_strength:a,u_opacity:c}),Fn=new Float32Array(i.a6.mat4.identity([])),Ff=(m,a,c,g,b,C,I,z,U,K,G,Q,ne,le=[0,0,0],be)=>{const xe=b.style.light,Te=xe.properties.get("position"),Ee=[-Te.x,-Te.y,Te.z],Oe=i.a6.mat3.create();xe.properties.get("anchor")==="viewport"&&(i.a6.mat3.fromRotation(Oe,-b.transform.angle),i.a6.vec3.transformMat3(Ee,Ee,Oe));const Ve=G.alphaMode==="MASK",He=xe.properties.get("color").toRenderColor(null),qe=ne.paint.get("model-ambient-occlusion-intensity"),Xe=ne.paint.get("model-color").constantOr(i.bA.white).toRenderColor(null),Ke=ne.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:m,u_lighting_matrix:a,u_normal_matrix:c,u_node_matrix:g||Fn,u_lightpos:Ee,u_lightintensity:xe.properties.get("intensity"),u_lightcolor:[He.r,He.g,He.b],u_camera_pos:le,u_opacity:C,u_baseTextureIsAlpha:0,u_alphaMask:+Ve,u_alphaCutoff:G.alphaCutoff,u_baseColorFactor:[I.r,I.g,I.b,I.a],u_emissiveFactor:[z[0],z[1],z[2],1],u_metallicFactor:U,u_roughnessFactor:K,u_baseColorTexture:ea.BaseColor,u_metallicRoughnessTexture:ea.MetallicRoughness,u_normalTexture:ea.Normal,u_occlusionTexture:ea.Occlusion,u_emissionTexture:ea.Emission,u_lutTexture:ea.LUT,u_color_mix:[Xe.r,Xe.g,Xe.b,Ke],u_aoIntensity:qe,u_emissive_strength:Q,u_occlusionTextureTransform:be||[0,0,0,0]}},Pg=(m,a=Fn,c=Fn)=>({u_matrix:m,u_instance:a,u_node_matrix:c}),zc={fillExtrusion:m=>({u_matrix:new i.bG(m),u_lightpos:new i.bI(m),u_lightintensity:new i.bJ(m),u_lightcolor:new i.bI(m),u_vertical_gradient:new i.bJ(m),u_opacity:new i.bJ(m),u_edge_radius:new i.bJ(m),u_width_scale:new i.bJ(m),u_ao:new i.bH(m),u_height_type:new i.bK(m),u_base_type:new i.bK(m),u_tile_id:new i.bI(m),u_zoom_transition:new i.bJ(m),u_inv_rot_matrix:new i.bG(m),u_merc_center:new i.bH(m),u_up_dir:new i.bI(m),u_height_lift:new i.bJ(m),u_flood_light_color:new i.bI(m),u_vertical_scale:new i.bJ(m),u_flood_light_intensity:new i.bJ(m),u_ground_shadow_factor:new i.bI(m)}),fillExtrusionDepth:m=>({u_matrix:new i.bG(m),u_edge_radius:new i.bJ(m),u_width_scale:new i.bJ(m),u_vertical_scale:new i.bJ(m),u_height_type:new i.bK(m),u_base_type:new i.bK(m)}),fillExtrusionPattern:m=>({u_matrix:new i.bG(m),u_lightpos:new i.bI(m),u_lightintensity:new i.bJ(m),u_lightcolor:new i.bI(m),u_vertical_gradient:new i.bJ(m),u_height_factor:new i.bJ(m),u_edge_radius:new i.bJ(m),u_width_scale:new i.bJ(m),u_ao:new i.bH(m),u_height_type:new i.bK(m),u_base_type:new i.bK(m),u_tile_id:new i.bI(m),u_zoom_transition:new i.bJ(m),u_inv_rot_matrix:new i.bG(m),u_merc_center:new i.bH(m),u_up_dir:new i.bI(m),u_height_lift:new i.bJ(m),u_image:new i.bK(m),u_texsize:new i.bH(m),u_pixel_coord_upper:new i.bH(m),u_pixel_coord_lower:new i.bH(m),u_tile_units_to_pixels:new i.bJ(m),u_opacity:new i.bJ(m)}),fillExtrusionGroundEffect:m=>({u_matrix:new i.bG(m),u_opacity:new i.bJ(m),u_ao_pass:new i.bJ(m),u_meter_to_tile:new i.bJ(m),u_ao:new i.bH(m),u_flood_light_intensity:new i.bJ(m),u_flood_light_color:new i.bI(m),u_attenuation:new i.bJ(m),u_edge_radius:new i.bJ(m),u_fb:new i.bK(m),u_fb_size:new i.bJ(m),u_dynamic_offset:new i.bJ(m)}),fill:m=>({u_matrix:new i.bG(m),u_emissive_strength:new i.bJ(m)}),fillPattern:m=>({u_matrix:new i.bG(m),u_emissive_strength:new i.bJ(m),u_image:new i.bK(m),u_texsize:new i.bH(m),u_pixel_coord_upper:new i.bH(m),u_pixel_coord_lower:new i.bH(m),u_tile_units_to_pixels:new i.bJ(m)}),fillOutline:m=>({u_matrix:new i.bG(m),u_emissive_strength:new i.bJ(m),u_world:new i.bH(m)}),fillOutlinePattern:m=>({u_matrix:new i.bG(m),u_emissive_strength:new i.bJ(m),u_world:new i.bH(m),u_image:new i.bK(m),u_texsize:new i.bH(m),u_pixel_coord_upper:new i.bH(m),u_pixel_coord_lower:new i.bH(m),u_tile_units_to_pixels:new i.bJ(m)}),circle:i.cN,collisionBox:m=>({u_matrix:new i.bG(m),u_camera_to_center_distance:new i.bJ(m),u_extrude_scale:new i.bH(m)}),collisionCircle:m=>({u_matrix:new i.bG(m),u_inv_matrix:new i.bG(m),u_camera_to_center_distance:new i.bJ(m),u_viewport_size:new i.bH(m)}),debug:m=>({u_color:new i.cu(m),u_matrix:new i.bG(m),u_overlay:new i.bK(m),u_overlay_scale:new i.bJ(m)}),clippingMask:m=>({u_matrix:new i.bG(m)}),heatmap:m=>({u_extrude_scale:new i.bJ(m),u_intensity:new i.bJ(m),u_matrix:new i.bG(m),u_inv_rot_matrix:new i.bG(m),u_merc_center:new i.bH(m),u_tile_id:new i.bI(m),u_zoom_transition:new i.bJ(m),u_up_dir:new i.bI(m)}),heatmapTexture:m=>({u_image:new i.bK(m),u_color_ramp:new i.bK(m),u_opacity:new i.bJ(m)}),hillshade:m=>({u_matrix:new i.bG(m),u_image:new i.bK(m),u_latrange:new i.bH(m),u_light:new i.bH(m),u_shadow:new i.cu(m),u_highlight:new i.cu(m),u_emissive_strength:new i.bJ(m),u_accent:new i.cu(m)}),hillshadePrepare:m=>({u_matrix:new i.bG(m),u_image:new i.bK(m),u_dimension:new i.bH(m),u_zoom:new i.bJ(m)}),line:i.cO,linePattern:i.cP,raster:m=>({u_matrix:new i.bG(m),u_normalize_matrix:new i.bG(m),u_globe_matrix:new i.bG(m),u_merc_matrix:new i.bG(m),u_grid_matrix:new i.cv(m),u_tl_parent:new i.bH(m),u_scale_parent:new i.bJ(m),u_fade_t:new i.bJ(m),u_opacity:new i.bJ(m),u_image0:new i.bK(m),u_image1:new i.bK(m),u_brightness_low:new i.bJ(m),u_brightness_high:new i.bJ(m),u_saturation_factor:new i.bJ(m),u_contrast_factor:new i.bJ(m),u_spin_weights:new i.bI(m),u_perspective_transform:new i.bH(m),u_raster_elevation:new i.bJ(m),u_zoom_transition:new i.bJ(m),u_merc_center:new i.bH(m),u_cutoff_params:new i.c7(m),u_colorization_mix:new i.c7(m),u_colorization_offset:new i.bJ(m),u_color_ramp:new i.bK(m),u_texture_offset:new i.bH(m),u_texture_res:new i.bH(m),u_emissive_strength:new i.bJ(m)}),rasterParticle:m=>({u_matrix:new i.bG(m),u_normalize_matrix:new i.bG(m),u_globe_matrix:new i.bG(m),u_merc_matrix:new i.bG(m),u_grid_matrix:new i.cv(m),u_tl_parent:new i.bH(m),u_scale_parent:new i.bJ(m),u_fade_t:new i.bJ(m),u_opacity:new i.bJ(m),u_image0:new i.bK(m),u_image1:new i.bK(m),u_raster_elevation:new i.bJ(m),u_zoom_transition:new i.bJ(m),u_merc_center:new i.bH(m),u_cutoff_params:new i.c7(m)}),rasterParticleTexture:m=>({u_texture:new i.bK(m),u_opacity:new i.bJ(m)}),rasterParticleDraw:m=>({u_particle_texture:new i.bK(m),u_particle_texture_side_len:new i.bJ(m),u_tile_offset:new i.bH(m),u_velocity:new i.bK(m),u_color_ramp:new i.bK(m),u_velocity_res:new i.bH(m),u_max_speed:new i.bJ(m),u_uv_offset:new i.bH(m),u_data_scale:new i.bH(m),u_data_offset:new i.bJ(m),u_particle_pos_scale:new i.bJ(m),u_particle_pos_offset:new i.bH(m)}),rasterParticleUpdate:m=>({u_particle_texture:new i.bK(m),u_particle_texture_side_len:new i.bJ(m),u_velocity:new i.bK(m),u_velocity_res:new i.bH(m),u_max_speed:new i.bJ(m),u_speed_factor:new i.bJ(m),u_reset_rate:new i.bJ(m),u_rand_seed:new i.bJ(m),u_uv_offset:new i.bH(m),u_data_scale:new i.bH(m),u_data_offset:new i.bJ(m),u_particle_pos_scale:new i.bJ(m),u_particle_pos_offset:new i.bH(m)}),symbol:m=>({u_is_size_zoom_constant:new i.bK(m),u_is_size_feature_constant:new i.bK(m),u_size_t:new i.bJ(m),u_size:new i.bJ(m),u_camera_to_center_distance:new i.bJ(m),u_rotate_symbol:new i.bK(m),u_aspect_ratio:new i.bJ(m),u_fade_change:new i.bJ(m),u_matrix:new i.bG(m),u_label_plane_matrix:new i.bG(m),u_coord_matrix:new i.bG(m),u_is_text:new i.bK(m),u_elevation_from_sea:new i.bK(m),u_pitch_with_map:new i.bK(m),u_texsize:new i.bH(m),u_texsize_icon:new i.bH(m),u_texture:new i.bK(m),u_texture_icon:new i.bK(m),u_gamma_scale:new i.bJ(m),u_device_pixel_ratio:new i.bJ(m),u_tile_id:new i.bI(m),u_zoom_transition:new i.bJ(m),u_inv_rot_matrix:new i.bG(m),u_merc_center:new i.bH(m),u_camera_forward:new i.bI(m),u_tile_matrix:new i.bG(m),u_up_vector:new i.bI(m),u_ecef_origin:new i.bI(m),u_is_halo:new i.bK(m),u_icon_transition:new i.bJ(m),u_color_adj_mat:new i.bG(m),u_scale_factor:new i.bJ(m)}),background:m=>({u_matrix:new i.bG(m),u_emissive_strength:new i.bJ(m),u_opacity:new i.bJ(m),u_color:new i.cu(m)}),backgroundPattern:m=>({u_matrix:new i.bG(m),u_emissive_strength:new i.bJ(m),u_opacity:new i.bJ(m),u_image:new i.bK(m),u_pattern_tl:new i.bH(m),u_pattern_br:new i.bH(m),u_texsize:new i.bH(m),u_pattern_size:new i.bH(m),u_pixel_coord_upper:new i.bH(m),u_pixel_coord_lower:new i.bH(m),u_pattern_units_to_pixels:new i.bH(m)}),terrainRaster:m=>({u_matrix:new i.bG(m),u_image0:new i.bK(m),u_skirt_height:new i.bJ(m),u_ground_shadow_factor:new i.bI(m)}),skybox:m=>({u_matrix:new i.bG(m),u_sun_direction:new i.bI(m),u_cubemap:new i.bK(m),u_opacity:new i.bJ(m),u_temporal_offset:new i.bJ(m)}),skyboxGradient:m=>({u_matrix:new i.bG(m),u_color_ramp:new i.bK(m),u_center_direction:new i.bI(m),u_radius:new i.bJ(m),u_opacity:new i.bJ(m),u_temporal_offset:new i.bJ(m)}),skyboxCapture:m=>({u_matrix_3f:new i.cv(m),u_sun_direction:new i.bI(m),u_sun_intensity:new i.bJ(m),u_color_tint_r:new i.c7(m),u_color_tint_m:new i.c7(m),u_luminance:new i.bJ(m)}),globeRaster:m=>({u_proj_matrix:new i.bG(m),u_globe_matrix:new i.bG(m),u_normalize_matrix:new i.bG(m),u_merc_matrix:new i.bG(m),u_zoom_transition:new i.bJ(m),u_merc_center:new i.bH(m),u_image0:new i.bK(m),u_grid_matrix:new i.cv(m),u_skirt_height:new i.bJ(m),u_far_z_cutoff:new i.bJ(m),u_frustum_tl:new i.bI(m),u_frustum_tr:new i.bI(m),u_frustum_br:new i.bI(m),u_frustum_bl:new i.bI(m),u_globe_pos:new i.bI(m),u_globe_radius:new i.bJ(m),u_viewport:new i.bH(m)}),globeAtmosphere:m=>({u_frustum_tl:new i.bI(m),u_frustum_tr:new i.bI(m),u_frustum_br:new i.bI(m),u_frustum_bl:new i.bI(m),u_horizon:new i.bJ(m),u_transition:new i.bJ(m),u_fadeout_range:new i.bJ(m),u_color:new i.c7(m),u_high_color:new i.c7(m),u_space_color:new i.c7(m),u_temporal_offset:new i.bJ(m),u_horizon_angle:new i.bJ(m)}),model:m=>({u_matrix:new i.bG(m),u_lighting_matrix:new i.bG(m),u_normal_matrix:new i.bG(m),u_node_matrix:new i.bG(m),u_lightpos:new i.bI(m),u_lightintensity:new i.bJ(m),u_lightcolor:new i.bI(m),u_camera_pos:new i.bI(m),u_opacity:new i.bJ(m),u_baseColorFactor:new i.c7(m),u_emissiveFactor:new i.c7(m),u_metallicFactor:new i.bJ(m),u_roughnessFactor:new i.bJ(m),u_baseTextureIsAlpha:new i.bK(m),u_alphaMask:new i.bK(m),u_alphaCutoff:new i.bJ(m),u_baseColorTexture:new i.bK(m),u_metallicRoughnessTexture:new i.bK(m),u_normalTexture:new i.bK(m),u_occlusionTexture:new i.bK(m),u_emissionTexture:new i.bK(m),u_lutTexture:new i.bK(m),u_color_mix:new i.c7(m),u_aoIntensity:new i.bJ(m),u_emissive_strength:new i.bJ(m),u_occlusionTextureTransform:new i.c7(m)}),modelDepth:m=>({u_matrix:new i.bG(m),u_instance:new i.bG(m),u_node_matrix:new i.bG(m)}),groundShadow:m=>({u_matrix:new i.bG(m),u_ground_shadow_factor:new i.bI(m)}),stars:m=>({u_matrix:new i.bG(m),u_up:new i.bI(m),u_right:new i.bI(m),u_intensity_multiplier:new i.bJ(m)}),snowParticle:m=>({u_modelview:new i.bG(m),u_projection:new i.bG(m),u_time:new i.bJ(m),u_cam_pos:new i.bI(m),u_velocityConeAperture:new i.bJ(m),u_velocity:new i.bJ(m),u_horizontalOscillationRadius:new i.bJ(m),u_horizontalOscillationRate:new i.bJ(m),u_boxSize:new i.bJ(m),u_billboardSize:new i.bJ(m),u_simpleShapeParameters:new i.bH(m),u_screenSize:new i.bH(m),u_thinningCenterPos:new i.bH(m),u_thinningShape:new i.bI(m),u_thinningAffectedRatio:new i.bJ(m),u_thinningParticleOffset:new i.bJ(m),u_particleColor:new i.c7(m),u_direction:new i.bI(m)}),rainParticle:m=>({u_modelview:new i.bG(m),u_projection:new i.bG(m),u_time:new i.bJ(m),u_cam_pos:new i.bI(m),u_texScreen:new i.bK(m),u_velocityConeAperture:new i.bJ(m),u_velocity:new i.bJ(m),u_boxSize:new i.bJ(m),u_rainDropletSize:new i.bH(m),u_distortionStrength:new i.bJ(m),u_rainDirection:new i.bI(m),u_color:new i.c7(m),u_screenSize:new i.bH(m),u_thinningCenterPos:new i.bH(m),u_thinningShape:new i.bI(m),u_thinningAffectedRatio:new i.bJ(m),u_thinningParticleOffset:new i.bJ(m),u_shapeDirectionalPower:new i.bJ(m),u_mode:new i.bJ(m)}),occlusion:m=>({u_matrix:new i.bG(m),u_anchorPos:new i.bI(m),u_screenSizePx:new i.bH(m),u_occluderSizePx:new i.bH(m),u_color:new i.c7(m)})};class Aa{constructor(a,c,g,b){this.id=Aa.uniqueIdxCounter,Aa.uniqueIdxCounter++,this.context=a;const C=a.gl;this.buffer=C.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),C.bufferData(C.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||b||c.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){this.id=Aa.uniqueIdxCounter,Aa.uniqueIdxCounter++;const c=this.context.gl;this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}Aa.uniqueIdxCounter=0;const Kn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Rg{constructor(a,c,g,b,C,I){this.length=c.length,this.attributes=g,this.itemSize=c.bytesPerElement,this.dynamicDraw=b,this.instanceCount=I,this.context=a;const z=a.gl;this.buffer=z.createBuffer(),a.bindVertexBuffer.set(this.buffer),z.bufferData(z.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?z.DYNAMIC_DRAW:z.STATIC_DRAW),this.dynamicDraw||C||c.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,c){for(let g=0;g<this.attributes.length;g++){const b=c.attributes[this.attributes[g].name];b!==void 0&&a.enableVertexAttribArray(b)}}setVertexAttribPointers(a,c,g){for(let b=0;b<this.attributes.length;b++){const C=this.attributes[b],I=c.attributes[C.name];I!==void 0&&a.vertexAttribPointer(I,C.components,a[Kn[C.type]],!1,this.itemSize,C.offset+this.itemSize*(g||0))}}setVertexAttribDivisor(a,c,g){for(let b=0;b<this.attributes.length;b++){const C=c.attributes[this.attributes[b].name];C!==void 0&&this.instanceCount&&this.instanceCount>0&&a.vertexAttribDivisor(C,g)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class y_{constructor(a,c,g,b,C){this.context=a,this.width=c,this.height=g;const I=this.framebuffer=a.gl.createFramebuffer();b&&(this.colorAttachment=new Af(a,I)),C&&(this.depthAttachmentType=C,this.depthAttachment=C==="renderbuffer"?new gg(a,I):new l_(a,I))}destroy(){const a=this.context.gl;if(this.colorAttachment){const c=this.colorAttachment.get();c&&a.deleteTexture(c)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const c=this.depthAttachment.get();c&&a.deleteRenderbuffer(c)}else{const c=this.depthAttachment.get();c&&a.deleteTexture(c)}a.deleteFramebuffer(this.framebuffer)}}class ES{constructor(a,c){this.gl=a,this.clearColor=new ag(this),this.clearDepth=new e_(this),this.clearStencil=new sg(this),this.colorMask=new Mf(this),this.depthMask=new Jd(this),this.stencilMask=new t_(this),this.stencilFunc=new n_(this),this.stencilOp=new r_(this),this.stencilTest=new Eu(this),this.depthRange=new i_(this),this.depthTest=new vS(this),this.depthFunc=new yS(this),this.blend=new _S(this),this.blendFunc=new lg(this),this.blendColor=new cg(this),this.blendEquation=new ug(this),this.cullFace=new dg(this),this.cullFaceSide=new o_(this),this.frontFace=new a_(this),this.program=new xS(this),this.activeTexture=new Qd(this),this.viewport=new eh(this),this.bindFramebuffer=new s_(this),this.bindRenderbuffer=new Xa(this),this.bindTexture=new hg(this),this.bindVertexBuffer=new Pf(this),this.bindElementBuffer=new Rf(this),this.bindVertexArrayOES=new fg(this),this.pixelStoreUnpack=new pg(this),this.pixelStoreUnpackPremultiplyAlpha=new Of(this),this.pixelStoreUnpackFlipY=new mg(this),this.options=c?{...c}:{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=a.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=a.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=a.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=a.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=a.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=a.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),this.maxPointSize=a.getParameter(a.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,c,g){return new Aa(this,a,c,g)}createVertexBuffer(a,c,g,b,C){return new Rg(this,a,c,g,b,C)}createRenderbuffer(a,c,g){const b=this.gl,C=b.createRenderbuffer();return this.bindRenderbuffer.set(C),b.renderbufferStorage(b.RENDERBUFFER,a,c,g),this.bindRenderbuffer.set(null),C}createFramebuffer(a,c,g,b){return new y_(this,a,c,g,b)}clear({color:a,depth:c,stencil:g,colorMask:b}){const C=this.gl;let I=0;a&&(I|=C.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set(b||[!0,!0,!0,!0])),c!==void 0&&(I|=C.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),g!==void 0&&(I|=C.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),C.clear(I)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){i.bi(a.blendFunction,Br.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor),a.blendEquation?this.blendEquation.set(a.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(a.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let Ru;function Og(m,a,c,g,b,C,I){const z=m.context,U=z.gl,K=m.transform,G=m.getOrCreateProgram("collisionBox"),Q=[];let ne=0,le=0;for(let He=0;He<g.length;He++){const qe=g[He],Xe=a.getTile(qe),Ke=Xe.getBucket(c);if(!Ke)continue;const Ye=jy(qe,Ke,K);let rt=Ye;b[0]===0&&b[1]===0||(rt=m.translatePosMatrix(Ye,Xe,b,C));const vt=I?Ke.textCollisionBox:Ke.iconCollisionBox,st=Ke.collisionCircleArray;if(st.length>0){const it=i.a6.mat4.create(),zt=rt;i.a6.mat4.mul(it,Ke.placementInvProjMatrix,K.glCoordMatrix),i.a6.mat4.mul(it,it,Ke.placementViewportMatrix),Q.push({circleArray:st,circleOffset:le,transform:zt,invTransform:it,projection:Ke.getProjection()}),ne+=st.length/4,le=ne}vt&&(m.terrain&&m.terrain.setupElevationDraw(Xe,G),G.draw(m,U.LINES,lr.disabled,Ir.disabled,m.colorModeForRenderPass(),_r.disabled,SS(rt,K,Xe,Ke.getProjection()),c.id,vt.layoutVertexBuffer,vt.indexBuffer,vt.segments,null,K.zoom,null,[vt.collisionVertexBuffer,vt.collisionVertexBufferExt]))}if(!I||!Q.length)return;const be=m.getOrCreateProgram("collisionCircle"),xe=new i.cQ;xe.resize(4*ne),xe._trim();let Te=0;for(const He of Q)for(let qe=0;qe<He.circleArray.length/4;qe++){const Xe=4*qe,Ke=He.circleArray[Xe+0],Ye=He.circleArray[Xe+1],rt=He.circleArray[Xe+2],vt=He.circleArray[Xe+3];xe.emplace(Te++,Ke,Ye,rt,vt,0),xe.emplace(Te++,Ke,Ye,rt,vt,1),xe.emplace(Te++,Ke,Ye,rt,vt,2),xe.emplace(Te++,Ke,Ye,rt,vt,3)}(!Ru||Ru.length<2*ne)&&(Ru=function(He){const qe=2*He,Xe=new i.aP;Xe.resize(qe),Xe._trim();for(let Ke=0;Ke<qe;Ke++){const Ye=6*Ke;Xe.uint16[Ye+0]=4*Ke+0,Xe.uint16[Ye+1]=4*Ke+1,Xe.uint16[Ye+2]=4*Ke+2,Xe.uint16[Ye+3]=4*Ke+2,Xe.uint16[Ye+4]=4*Ke+3,Xe.uint16[Ye+5]=4*Ke+0}return Xe}(ne));const Ee=z.createIndexBuffer(Ru,!0),Oe=z.createVertexBuffer(xe,i.cR.members,!0);for(const He of Q){const qe={u_matrix:He.transform,u_inv_matrix:He.invTransform,u_camera_to_center_distance:(Ve=K).getCameraToCenterDistance(He.projection),u_viewport_size:[Ve.width,Ve.height]};be.draw(m,U.TRIANGLES,lr.disabled,Ir.disabled,m.colorModeForRenderPass(),_r.disabled,qe,c.id,Oe,Ee,i.b2.simpleSegment(0,2*He.circleOffset,He.circleArray.length,He.circleArray.length/2),null,K.zoom)}var Ve;Oe.destroy(),Ee.destroy()}const ah=i.a6.mat4.create();function __(m){const a=m._camera.getWorldToCamera(m.worldSize,1),c=i.a6.mat4.multiply([],a,m.globeMatrix);i.a6.mat4.invert(c,c);const g=[0,0,0],b=[0,1,0,0];return i.a6.vec4.transformMat4(b,b,c),g[0]=b[0],g[1]=b[1],g[2]=b[2],i.a6.vec3.normalize(g,g),g}function TS({width:m,height:a,anchor:c,textOffset:g,textScale:b},C){const{horizontalAlign:I,verticalAlign:z}=i.by(c),U=-(I-.5)*m,K=-(z-.5)*a,G=i.bx(c,g);return new i.P((U/b+G[0])*C,(K/b+G[1])*C)}function Ag(m,a,c,g,b,C,I,z,U,K,G){const Q=m.text.placedSymbolArray,ne=m.text.dynamicLayoutVertexArray,le=m.icon.dynamicLayoutVertexArray,be={},xe=m.getProjection(),Te=tc(z,xe,C),Ee=C.elevation,Oe=xe.upVectorScale(z.canonical,C.center.lat,C.worldSize).metersToTile;ne.clear();for(let Ve=0;Ve<Q.length;Ve++){const He=Q.get(Ve),{tileAnchorX:qe,tileAnchorY:Xe,numGlyphs:Ke}=He,Ye=He.hidden||!He.crossTileID||m.allowVerticalPlacement&&!He.placedOrientation?null:g[He.crossTileID];if(Ye){let rt=0,vt=0,st=0;if(Ee){const Nt=Ee?Ee.getAtTileOffset(z,qe,Xe):0,[en,rn,Jt]=xe.upVector(z.canonical,qe,Xe);rt=Nt*en*Oe,vt=Nt*rn*Oe,st=Nt*Jt*Oe}let[it,zt,jt,tn]=Mo(He.projectedAnchorX+rt,He.projectedAnchorY+vt,He.projectedAnchorZ+st,c?Te:I);const fn=Ur(C.getCameraToCenterDistance(xe),tn);let Sn=b.evaluateSizeForFeature(m.textSizeData,K,He)*fn/i.br;c&&(Sn*=m.tilePixelRatio/U);const Et=TS(Ye,Sn);c?({x:it,y:zt,z:jt}=xe.projectTilePoint(qe+Et.x,Xe+Et.y,z.canonical),[it,zt,jt]=Mo(it+rt,zt+vt,jt+st,I)):(a&&Et._rotate(-C.angle),it+=Et.x,zt+=Et.y,jt=0);const Qt=m.allowVerticalPlacement&&He.placedOrientation===i.bl.vertical?Math.PI/2:0;for(let Nt=0;Nt<Ke;Nt++)i.bo(ne,it,zt,jt,Qt);G&&He.associatedIconIndex>=0&&(be[He.associatedIconIndex]={x:it,y:zt,z:jt,angle:Qt})}else Ws(Ke,ne)}if(G){le.clear();const Ve=m.icon.placedSymbolArray;for(let He=0;He<Ve.length;He++){const qe=Ve.get(He),{numGlyphs:Xe}=qe,Ke=be[He];if(qe.hidden||!Ke)Ws(Xe,le);else{const{x:Ye,y:rt,z:vt,angle:st}=Ke;for(let it=0;it<Xe;it++)i.bo(le,Ye,rt,vt,st)}}m.icon.dynamicLayoutVertexBuffer.updateData(le)}m.text.dynamicLayoutVertexBuffer.updateData(ne)}function sh(m,a,c,g,b,C,I={}){const z=c.paint.get("icon-translate"),U=c.paint.get("text-translate"),K=c.paint.get("icon-translate-anchor"),G=c.paint.get("text-translate-anchor"),Q=c.layout.get("icon-rotation-alignment"),ne=c.layout.get("text-rotation-alignment"),le=c.layout.get("icon-pitch-alignment"),be=c.layout.get("text-pitch-alignment"),xe=c.layout.get("icon-keep-upright"),Te=c.layout.get("text-keep-upright"),Ee=c.paint.get("icon-color-saturation"),Oe=c.paint.get("icon-color-contrast"),Ve=c.paint.get("icon-color-brightness-min"),He=c.paint.get("icon-color-brightness-max"),qe=c.layout.get("symbol-elevation-reference")==="sea",Xe=m.context,Ke=Xe.gl,Ye=m.transform,rt=Q==="map",vt=ne==="map",st=le==="map",it=be==="map",zt=c.layout.get("symbol-sort-key").constantOr(1)!==void 0;let jt=!1;const tn=m.depthModeForSublayer(0,lr.ReadOnly),fn=[i.am(Ye.center.lng),i.at(Ye.center.lat)],Sn=c.layout.get("text-variable-anchor"),Et=Ye.projection.name==="globe",Qt=[],Nt=[0,-1,0];for(const en of g){const rn=a.getTile(en),Jt=rn.getBucket(c);if(!Jt||Jt.projection.name==="mercator"&&Et||Jt.fullyClipped)continue;const In=Jt.projection.name==="globe",Wn=In?i.a9(Ye.zoom):0,Qn=tc(en,Jt.getProjection(),Ye),Bn=Ye.calculatePixelsToTileUnitsMatrix(rn),nr=Sn&&Jt.hasTextData(),$n=Jt.hasIconTextFit()&&nr&&Jt.hasIconData(),hr=Jt.getProjection().createInversionMatrix(Ye,en.canonical),Pr=fi=>{Ye.depthOcclusionForSymbolsAndCircles&&(c.hasInitialOcclusionOpacityProperties||m.terrain)&&(fi.push("DEPTH_D24"),fi.push("DEPTH_OCCLUSION"))},Vr=()=>{const fi=rt&&c.layout.get("symbol-placement")!=="point",oi=[];Pr(oi);const zi=fi||$n,Co=c.paint.get("icon-image-cross-fade").constantOr(0);m.terrainRenderModeElevated()&&st&&oi.push("PITCH_WITH_MAP_TERRAIN"),In&&(oi.push("PROJECTION_GLOBE_VIEW"),zi&&oi.push("PROJECTED_POS_ON_VIEWPORT")),Co>0&&oi.push("ICON_TRANSITION"),Jt.icon.zOffsetVertexBuffer&&oi.push("Z_OFFSET"),Ee===0&&Oe===0&&Ve===0&&He===1||oi.push("COLOR_ADJUSTMENT"),Jt.sdfIcons&&oi.push("RENDER_SDF");const Ja=Jt.icon.programConfigurations.get(c.id),ls=m.getOrCreateProgram("symbol",{config:Ja,defines:oi}),Ro=rn.imageAtlasTexture?rn.imageAtlasTexture.size:[0,0],Kr=Jt.iconSizeData,Wr=i.bk(Kr,Ye.zoom),ri=st||Ye.pitch!==0,wi=gr(Qn,rn.tileID.canonical,st,rt,Ye,Jt.getProjection(),Bn),oo=hi(Qn,rn.tileID.canonical,st,rt,Ye,Jt.getProjection(),Bn),Li=m.translatePosMatrix(oo,rn,z,K,!0),jo=m.translatePosMatrix(Qn,rn,z,K),Xs=zi?ah:wi,Da=rt&&!st&&!fi;let $a=Nt;!Et&&!Ye.mercatorFromTransition||rt||($a=__(Ye));const cs=In?$a:Nt,Is=c.getColorAdjustmentMatrix(Ee,Oe,Ve,He),ka=v_(Kr.kind,Wr,Da,st,m,jo,Xs,Li,qe,!1,Ro,[0,0],!0,en,Wn,fn,hr,cs,Jt.getProjection(),Is,Co),El=rn.imageAtlasTexture?rn.imageAtlasTexture:null,us=c.layout.get("icon-size").constantOr(0)!==1||Jt.iconsNeedLinear,si=Jt.sdfIcons||m.options.rotating||m.options.zooming||us||ri?Ke.LINEAR:Ke.NEAREST,Vu=Jt.sdfIcons&&c.paint.get("icon-halo-width").constantOr(1)!==0,tv=m.terrain&&st&&fi?i.a6.mat4.invert(i.a6.mat4.create(),wi):ah;if(fi&&Jt.icon){const Hu=Ye.elevation,nv=Hu?Hu.getAtTileOffsetFunc(en,Ye.center.lat,Ye.worldSize,Jt.getProjection()):null,xh=yr(Qn,rn.tileID.canonical,st,rt,Ye,Jt.getProjection(),Bn);ws(Jt,Qn,m,!1,xh,oo,st,xe,nv,en)}return{program:ls,buffers:Jt.icon,uniformValues:ka,atlasTexture:El,atlasTextureIcon:null,atlasInterpolation:si,atlasInterpolationIcon:null,isSDF:Jt.sdfIcons,hasHalo:Vu,tile:rn,labelPlaneMatrixInv:tv}},_i=()=>{const fi=vt&&c.layout.get("symbol-placement")!=="point",oi=[],zi=fi||Sn||$n;m.terrainRenderModeElevated()&&it&&oi.push("PITCH_WITH_MAP_TERRAIN"),In&&(oi.push("PROJECTION_GLOBE_VIEW"),zi&&oi.push("PROJECTED_POS_ON_VIEWPORT")),Jt.text.zOffsetVertexBuffer&&oi.push("Z_OFFSET"),Jt.iconsInText&&oi.push("RENDER_TEXT_AND_SYMBOL"),oi.push("RENDER_SDF"),Pr(oi);const Co=Jt.text.programConfigurations.get(c.id),Ja=m.getOrCreateProgram("symbol",{config:Co,defines:oi});let ls,Ro=[0,0],Kr=null;const Wr=Jt.textSizeData;Jt.iconsInText&&(Ro=rn.imageAtlasTexture?rn.imageAtlasTexture.size:[0,0],Kr=rn.imageAtlasTexture?rn.imageAtlasTexture:null,ls=it||Ye.pitch!==0||m.options.rotating||m.options.zooming||Wr.kind==="composite"||Wr.kind==="camera"?Ke.LINEAR:Ke.NEAREST);const ri=rn.glyphAtlasTexture?rn.glyphAtlasTexture.size:[0,0],wi=c.layout.get("text-size-scale-range"),oo=i.ap(m.scaleFactor,wi[0],wi[1]),Li=i.bk(Wr,Ye.zoom,oo),jo=gr(Qn,rn.tileID.canonical,it,vt,Ye,Jt.getProjection(),Bn),Xs=hi(Qn,rn.tileID.canonical,it,vt,Ye,Jt.getProjection(),Bn),Da=m.translatePosMatrix(Xs,rn,U,G,!0),$a=m.translatePosMatrix(Qn,rn,U,G),cs=zi?ah:jo,Is=vt&&!it&&!fi;let ka=Nt;!Et&&!Ye.mercatorFromTransition||vt||(ka=__(Ye));const El=v_(Wr.kind,Li,Is,it,m,$a,cs,Da,qe,!0,ri,Ro,!0,en,Wn,fn,hr,In?ka:Nt,Jt.getProjection(),null,null,oo),us=rn.glyphAtlasTexture?rn.glyphAtlasTexture:null,si=Ke.LINEAR,Vu=c.paint.get("text-halo-width").constantOr(1)!==0,tv=m.terrain&&it&&fi?i.a6.mat4.invert(i.a6.mat4.create(),jo):ah;if(fi&&Jt.text){const Hu=Ye.elevation,nv=Hu?Hu.getAtTileOffsetFunc(en,Ye.center.lat,Ye.worldSize,Jt.getProjection()):null,xh=yr(Qn,rn.tileID.canonical,it,vt,Ye,Jt.getProjection(),Bn);ws(Jt,Qn,m,!0,xh,Xs,it,Te,nv,en)}return{program:Ja,buffers:Jt.text,uniformValues:El,atlasTexture:us,atlasTextureIcon:Kr,atlasInterpolation:si,atlasInterpolationIcon:ls,isSDF:!0,hasHalo:Vu,tile:rn,labelPlaneMatrixInv:tv}},Yr=Jt.icon.segments.get().length,Ti=Jt.text.segments.get().length,ni=Yr&&!I.onlyText?Vr():null,xi=Ti&&!I.onlyIcons?_i():null,Nr=c.paint.get("icon-opacity").constantOr(1),gi=c.paint.get("text-opacity").constantOr(1);if(zt&&Jt.canOverlap){jt=!0;const fi=Nr&&!I.onlyText?Jt.icon.segments.get():[],oi=gi&&!I.onlyIcons?Jt.text.segments.get():[];for(const zi of fi)Qt.push({segments:new i.b2([zi]),sortKey:zi.sortKey,state:ni});for(const zi of oi)Qt.push({segments:new i.b2([zi]),sortKey:zi.sortKey,state:xi})}else I.onlyText||Qt.push({segments:Nr?Jt.icon.segments:new i.b2([]),sortKey:0,state:ni}),I.onlyIcons||Qt.push({segments:gi?Jt.text.segments:new i.b2([]),sortKey:0,state:xi})}jt&&Qt.sort((en,rn)=>en.sortKey-rn.sortKey);for(const en of Qt){const rn=en.state;if(rn)if(m.terrain?m.terrain.setupElevationDraw(rn.tile,rn.program,{useDepthForOcclusion:Ye.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:rn.labelPlaneMatrixInv}):m.setupDepthForOcclusion(Ye.depthOcclusionForSymbolsAndCircles,rn.program),Xe.activeTexture.set(Ke.TEXTURE0),rn.atlasTexture&&rn.atlasTexture.bind(rn.atlasInterpolation,Ke.CLAMP_TO_EDGE,!0),rn.atlasTextureIcon&&(Xe.activeTexture.set(Ke.TEXTURE1),rn.atlasTextureIcon&&rn.atlasTextureIcon.bind(rn.atlasInterpolationIcon,Ke.CLAMP_TO_EDGE,!0)),m.uploadCommonLightUniforms(m.context,rn.program),rn.hasHalo){const Jt=rn.uniformValues;Jt.u_is_halo=1,lh(rn.buffers,en.segments,c,m,rn.program,tn,b,C,Jt,2),Jt.u_is_halo=0}else{if(rn.isSDF){const Jt=rn.uniformValues;rn.hasHalo&&(Jt.u_is_halo=1,lh(rn.buffers,en.segments,c,m,rn.program,tn,b,C,Jt,1)),Jt.u_is_halo=0}lh(rn.buffers,en.segments,c,m,rn.program,tn,b,C,rn.uniformValues,1)}}}function lh(m,a,c,g,b,C,I,z,U,K){const G=[m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer,m.iconTransitioningVertexBuffer,m.globeExtVertexBuffer,m.zOffsetVertexBuffer];b.draw(g,g.context.gl.TRIANGLES,C,I,z,_r.disabled,U,c.id,m.layoutVertexBuffer,m.indexBuffer,a,c.paint,g.transform.zoom,m.programConfigurations.get(c.id),G,K)}function Bf(m,a,c,g,b,C,I){const z=m.context.gl,U=c.paint.get("fill-pattern"),K=c.is3D(),G=K?m.stencilModeFor3D():Ir.disabled,Q=U&&U.constantOr(1);let ne,le,be,xe,Te;I?(le=Q&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ne=z.LINES):(le=Q?"fillPattern":"fill",ne=z.TRIANGLES);for(const Ee of g){const Oe=a.getTile(Ee);if(Q&&!Oe.patternsLoaded())continue;const Ve=Oe.getBucket(c);if(!Ve)continue;m.prepareDrawTile();const He=Ve.programConfigurations.get(c.id),qe=m.isTileAffectedByFog(Ee),Xe=m.getOrCreateProgram(le,{config:He,overrideFog:qe});Q&&(m.context.activeTexture.set(z.TEXTURE0),Oe.imageAtlasTexture&&Oe.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),He.updatePaintBuffers());const Ke=U.constantOr(null);if(Ke&&Oe.imageAtlas){const vt=Oe.imageAtlas.patternPositions[Ke.toString()];vt&&He.setConstantPatternPositions(vt)}const Ye=m.translatePosMatrix(Ee.projMatrix,Oe,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor")),rt=c.paint.get("fill-emissive-strength");if(I){xe=Ve.indexBuffer2,Te=Ve.segments2;const vt=m.terrain&&m.terrain.renderingToTexture?m.terrain.drapeBufferSize:[z.drawingBufferWidth,z.drawingBufferHeight];be=le==="fillOutlinePattern"&&Q?wS(Ye,rt,m,Oe,vt):rh(Ye,rt,vt)}else xe=Ve.indexBuffer,Te=Ve.segments,be=Q?Cg(Ye,rt,m,Oe):g_(Ye,rt);m.uploadCommonUniforms(m.context,Xe,Ee.toUnwrapped()),Xe.draw(m,ne,b,K?G:m.stencilModeForClipping(Ee),C,_r.disabled,be,c.id,Ve.layoutVertexBuffer,xe,Te,c.paint,m.transform.zoom,He,void 0)}}function ta(m,a,c,g,b,C,I,z){c.resetLayerRenderingStats(m);const U=m.context,K=U.gl,G=m.transform,Q=c.paint.get("fill-extrusion-pattern"),ne=Q.constantOr(1),le=c.paint.get("fill-extrusion-opacity"),be=m.style.enable3dLights(),xe=c.paint.get(be&&!ne?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),Te=[c.paint.get("fill-extrusion-ambient-occlusion-intensity"),xe],Ee=c.layout.get("fill-extrusion-edge-radius"),Oe=Ee>0&&!c.paint.get("fill-extrusion-rounded-roof"),Ve=Oe?0:Ee,He=G.projection.name==="globe"?i.c_():0,qe=G.projection.name==="globe",Xe=qe?i.a9(G.zoom):0,Ke=[i.am(G.center.lng),i.at(G.center.lat)],Ye=c.paint.get("fill-extrusion-flood-light-color").toRenderColor(c.lut).toArray01().slice(0,3),rt=c.paint.get("fill-extrusion-flood-light-intensity"),vt=c.paint.get("fill-extrusion-vertical-scale"),st=c.paint.get("fill-extrusion-line-width").constantOr(1)!==0,it=c.paint.get("fill-extrusion-height-alignment"),zt=c.paint.get("fill-extrusion-base-alignment"),jt=ml(m,c.paint.get("fill-extrusion-cutoff-fade-range")),tn=[];let fn;qe&&tn.push("PROJECTION_GLOBE_VIEW"),Te[0]>0&&tn.push("FAUX_AO"),Oe&&tn.push("ZERO_ROOF_RADIUS"),z&&tn.push("HAS_CENTROID"),rt>0&&tn.push("FLOOD_LIGHT"),jt.shouldRenderCutoff&&tn.push("RENDER_CUTOFF"),st&&tn.push("RENDER_WALL_MODE");const Sn=m.renderPass==="shadow",Et=m.shadowRenderer,Qt=Sn&&!!Et;m.shadowRenderer&&(m.shadowRenderer.useNormalOffset=!0);let Nt=[0,0,0];if(Et){const Jt=m.style.directionalLight,In=m.style.ambientLight;Jt&&In&&(Nt=bf(m.style,Jt,In)),Sn||(tn.push("RENDER_SHADOWS","DEPTH_TEXTURE"),Et.useNormalOffset&&tn.push("NORMAL_OFFSET")),fn=tn.concat(["SHADOWS_SINGLE_CASCADE"])}const en=Qt?"fillExtrusionDepth":ne?"fillExtrusionPattern":"fillExtrusion",rn=c.getLayerRenderingStats();for(const Jt of g){const In=a.getTile(Jt),Wn=In.getBucket(c);if(!Wn||Wn.projection.name!==G.projection.name)continue;let Qn=!1;Et&&(Qn=Et.getMaxCascadeForTile(Jt.toUnwrapped())===0);const Bn=m.isTileAffectedByFog(Jt),nr=Wn.programConfigurations.get(c.id),$n=m.getOrCreateProgram(en,{config:nr,defines:Qn?fn:tn,overrideFog:Bn});if(m.terrain&&m.terrain.setupElevationDraw(In,$n,{useMeterToDem:!0}),!Wn.centroidVertexBuffer){const ni=$n.attributes.a_centroid_pos;ni!==void 0&&K.vertexAttrib2f(ni,0,0)}!Sn&&Et&&Et.setupShadows(In.tileID.toUnwrapped(),$n,"vector-tile",In.tileID.overscaledZ),ne&&(m.context.activeTexture.set(K.TEXTURE0),In.imageAtlasTexture&&In.imageAtlasTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE),nr.updatePaintBuffers());const hr=Q.constantOr(null);if(hr&&In.imageAtlas){const ni=In.imageAtlas.patternPositions[hr.toString()];ni&&nr.setConstantPatternPositions(ni)}const Pr=c.paint.get("fill-extrusion-vertical-gradient"),Vr=1/Wn.tileToMeter;let _i;if(Sn&&Et){if(b_(In.tileID,Wn,m))continue;const ni=Et.calculateShadowPassMatrixFromTile(In.tileID.toUnwrapped());_i=wg(ni,Ve,Vr,vt,it,zt)}else{const ni=m.translatePosMatrix(Jt.expandedProjMatrix,In,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),xi=G.projection.createInversionMatrix(G,Jt.canonical);_i=ne?Sg(ni,m,Pr,le,Te,Ve,Vr,Jt,In,He,it,zt,Xe,Ke,xi,Ye,vt):bg(ni,m,Pr,le,Te,Ve,Vr,Jt,He,it,zt,Xe,Ke,xi,Ye,vt,rt,Nt)}m.uploadCommonUniforms(U,$n,Jt.toUnwrapped(),null,jt);let Yr=Wn.segments;if(G.projection.name==="mercator"&&!Sn&&(Yr=Wn.getVisibleSegments(In.tileID,m.terrain,m.transform.getFrustum(0)),!Yr.get().length))continue;if(rn)if(Sn)for(const ni of Yr.get())rn.numRenderedVerticesInShadowPass+=ni.primitiveLength;else for(const ni of Yr.get())rn.numRenderedVerticesInTransparentPass+=ni.primitiveLength;const Ti=[];(m.terrain||z)&&Ti.push(Wn.centroidVertexBuffer),qe&&Ti.push(Wn.layoutVertexExtBuffer),st&&Ti.push(Wn.wallVertexBuffer),$n.draw(m,U.gl.TRIANGLES,b,C,I,_r.backCCW,_i,c.id,Wn.layoutVertexBuffer,Wn.indexBuffer,Yr,c.paint,m.transform.zoom,nr,Ti)}m.shadowRenderer&&(m.shadowRenderer.useNormalOffset=!1)}function Za(m,a,c,g,b,C,I,z,U,K,G,Q,ne,le,be,xe,Te,Ee,Oe){const Ve=m.context,He=Ve.gl,qe=m.transform,Xe=m.transform.zoom,Ke=[],Ye=ml(m,c.paint.get("fill-extrusion-cutoff-fade-range"));K==="clear"?(Ke.push("CLEAR_SUBPASS"),Oe&&(Ke.push("CLEAR_FROM_TEXTURE"),Ve.activeTexture.set(He.TEXTURE0),Oe.bind(He.LINEAR,He.CLAMP_TO_EDGE))):K==="sdf"&&Ke.push("SDF_SUBPASS"),Te&&Ke.push("HAS_CENTROID"),Ye.shouldRenderCutoff&&Ke.push("RENDER_CUTOFF");const rt=c.layout.get("fill-extrusion-edge-radius"),vt=(st,it,zt,jt,tn)=>{const fn=it.programConfigurations.get(c.id),Sn=m.isTileAffectedByFog(st),Et=m.getOrCreateProgram("fillExtrusionGroundEffect",{config:fn,defines:Ke,overrideFog:Sn}),Qt=((en,rn,Jt,In,Wn,Qn,Bn,nr,$n,hr,Pr)=>({u_matrix:rn,u_opacity:Jt,u_ao_pass:In?1:0,u_meter_to_tile:Wn,u_ao:Qn,u_flood_light_intensity:Bn,u_flood_light_color:nr,u_attenuation:$n,u_edge_radius:hr,u_fb:0,u_fb_size:Pr,u_dynamic_offset:1}))(0,jt,G,U,tn,[Q,ne*tn],le,be,xe,Xe>=17?0:rt*tn,Oe?Oe.size[0]:0),Nt=[];Te&&Nt.push(it.hiddenByLandmarkVertexBuffer),m.uploadCommonUniforms(Ve,Et,st.toUnwrapped(),null,Ye),Et.draw(m,Ve.gl.TRIANGLES,b,C,I,z,Qt,c.id,it.vertexBuffer,it.indexBuffer,zt,c.paint,Xe,fn,Nt)};for(const st of g){const it=a.getTile(st),zt=it.getBucket(c);if(!zt||zt.projection.name!==qe.projection.name||!zt.groundEffect||zt.groundEffect&&!zt.groundEffect.hasData())continue;const jt=zt.groundEffect,tn=1/zt.tileToMeter;{const fn=m.translatePosMatrix(st.projMatrix,it,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Sn=jt.getDefaultSegment();vt(st,jt,Sn,fn,tn)}if(Ee)for(let fn=0;fn<4;fn++){const Sn=i.c$[fn](st),Et=a.getTile(Sn);if(!Et)continue;const Qt=Et.getBucket(c);if(!Qt||Qt.projection.name!==qe.projection.name||!Qt.groundEffect||Qt.groundEffect&&!Qt.groundEffect.hasData())continue;const Nt=Qt.groundEffect;let en,rn;fn===0?(en=[-i.ab,0,0],rn=1):fn===1?(en=[i.ab,0,0],rn=0):fn===2?(en=[0,-i.ab,0],rn=3):(en=[0,i.ab,0],rn=2);const Jt=Nt.regionSegments[rn];if(!Jt)continue;const In=new Float32Array(16);i.a6.mat4.translate(In,st.projMatrix,en),vt(st,Nt,Jt,m.translatePosMatrix(In,it,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),tn)}}}function x_(m,a,c,g,b,C,I){g.centroidVertexArray.length===0&&g.createCentroidsBuffer();const z=C?C.findDEMTileFor(c):null;if(!(z&&z.dem||I))return;const U=Ee=>new i.P(Math.ceil((Ee+i.d2)*i.d3),0),K=Ee=>{const Oe=a.getSource().minzoom,Ve=qe=>{const Xe=a.getTileByID(qe);if(Xe&&Xe.hasData())return Xe.getBucket(b)},He=[0,-1,1];for(const qe of He){if(Ee.overscaledZ+qe<Oe)continue;const Xe=Ve(Ee.calculateScaledKey(Ee.overscaledZ+qe));if(Xe)return Xe}},G=[0,0,0],Q=(Ee,Oe)=>(G[0]=Math.min(Ee.min.y,Oe.min.y),G[1]=Math.max(Ee.max.y,Oe.max.y),G[2]=i.ab-Oe.min.x>Ee.max.x?Oe.min.x-i.ab:Ee.max.x,G),ne=(Ee,Oe)=>(G[0]=Math.min(Ee.min.x,Oe.min.x),G[1]=Math.max(Ee.max.x,Oe.max.x),G[2]=i.ab-Oe.min.y>Ee.max.y?Oe.min.y-i.ab:Ee.max.y,G),le=[(Ee,Oe)=>Q(Ee,Oe),(Ee,Oe)=>Q(Oe,Ee),(Ee,Oe)=>ne(Ee,Oe),(Ee,Oe)=>ne(Oe,Ee)],be=(Ee,Oe,Ve,He,qe,Xe,Ke)=>{if(!C)return 0;const Ye=[[Xe?Ve:Ee,Xe?Ee:Ve,0],[Xe?Ve:Oe,Xe?Oe:Ve,0]],rt=Ke<0?i.ab+Ke:Ke,vt=[Xe?rt:(Ee+Oe)/2,Xe?(Ee+Oe)/2:rt,0];return Ve===0&&Ke<0||Ve!==0&&Ke>0?C.getForTilePoints(qe,[vt],!0,He):Ye.push(vt),C.getForTilePoints(c,Ye,!0,z),Math.max(Ye[0][2],Ye[1][2],vt[2])/C.exaggeration()};for(let Ee=0;Ee<4;Ee++){const Oe=g.borderFeatureIndices[Ee];if(Oe.length===0)continue;const Ve=i.c$[Ee](c),He=K(Ve);if(!(He&&He instanceof i.d0)||g.borderDoneWithNeighborZ[Ee]===He.canonical.z)continue;He.centroidVertexArray.length===0&&He.createCentroidsBuffer();const qe=C?C.findDEMTileFor(Ve):null;if(!(qe&&qe.dem||I))continue;const Xe=(Ee<2?1:5)-Ee,Ke=He.borderDoneWithNeighborZ[Xe]!==g.canonical.z,Ye=He.borderFeatureIndices[Xe];let rt=0;if(g.canonical.z!==He.canonical.z){for(const vt of Oe)g.showCentroid(g.featuresOnBorder[vt]);if(Ke)for(const vt of Ye)He.showCentroid(He.featuresOnBorder[vt]);g.borderDoneWithNeighborZ[Ee]=He.canonical.z,He.borderDoneWithNeighborZ[Xe]=g.canonical.z}for(const vt of Oe){const st=g.featuresOnBorder[vt],it=g.centroidData[st.centroidDataIndex],zt=st.borders[Ee];let jt;for(;rt<Ye.length;){jt=He.featuresOnBorder[Ye[rt]];const tn=jt.borders[Xe];if(tn[1]>zt[0]+3||tn[0]>zt[0]-3)break;He.showCentroid(jt),rt++}if(jt&&rt<Ye.length){const tn=rt;let fn=0;for(;!(jt.borders[Xe][0]>zt[1]-3)&&(fn++,++rt!==Ye.length);)jt=He.featuresOnBorder[Ye[rt]];jt=He.featuresOnBorder[Ye[tn]];let Sn=!1;if(fn>=1){const Nt=jt.borders[Xe];Math.abs(zt[0]-Nt[0])<3&&Math.abs(zt[1]-Nt[1])<3&&(fn=1,Sn=!0,rt=tn+1)}else if(fn===0){g.showCentroid(st);continue}const Et=He.centroidData[jt.centroidDataIndex];I&&Sn&&(((xe=it).flags|(Te=Et).flags)&i.d1?(xe.flags|=i.d1,Te.flags|=i.d1):(xe.flags&=~i.d1,Te.flags&=~i.d1));const Qt=st.intersectsCount()>1||jt.intersectsCount()>1;if(fn>1)rt=tn,it.centroidXY=Et.centroidXY=new i.P(0,0);else if(qe&&qe.dem&&!Qt){const Nt=le[Ee](it,Et),en=Ee%2?i.ab-1:0,rn=be(Nt[0],Math.min(i.ab-1,Nt[1]),en,qe,Ve,Ee<2,Nt[2]);it.centroidXY=Et.centroidXY=U(rn)}else Qt?it.centroidXY=Et.centroidXY=new i.P(0,0):(it.centroidXY=g.encodeBorderCentroid(st),Et.centroidXY=He.encodeBorderCentroid(jt));g.writeCentroidToBuffer(it),He.writeCentroidToBuffer(Et)}else g.showCentroid(st)}g.borderDoneWithNeighborZ[Ee]=He.canonical.z,He.borderDoneWithNeighborZ[Xe]=g.canonical.z}var xe,Te;(g.needsCentroidUpdate||!g.centroidVertexBuffer&&g.centroidVertexArray.length!==0)&&g.uploadCentroid(m)}const Dg=[1,0,0],$g=[0,1,0],kg=[0,0,1];function b_(m,a,c){const g=c.transform,b=c.shadowRenderer;if(!b)return!0;const C=m.toUnwrapped(),I=g.tileSize*b._cascades[c.currentShadowCascade].scale;let z=a.maxHeight;if(g.elevation){const xe=g.elevation.getMinMaxForTile(m);xe&&(z+=xe.max)}const U=[...b.shadowDirection];U[2]=-U[2];const K=b.computeSimplifiedTileShadowVolume(C,z,I,U);if(!K)return!1;const G=[Dg,$g,kg,U,[U[0],0,U[2]],[0,U[1],U[2]]],Q=g.projection.name==="globe",ne=g.scaleZoom(I),le=i.bO.fromInvProjectionMatrix(g.invProjMatrix,g.worldSize,ne,!Q),be=b.getCurrentCascadeFrustum();return le.intersectsPrecise(K.vertices,K.planes,G)===0||be.intersectsPrecise(K.vertices,K.planes,G)===0}function Ya(m){return[m[0]*i.d4,m[1]*i.d4,m[2]*i.d4,0]}function Zi(m,a,c,g,b,C,I,z,U){const K=g.getSource(),G=c.globeSharedBuffers;if(!G)return;let Q,ne,le;if(a&&(Q=g.getTile(a)),K instanceof i.aD?(ne=K.texture,le=i.cD(0,0,c.transform)):Q&&a&&(ne=Q.texture,le=i.cD(a.canonical.z,a.canonical.x,c.transform)),!ne||!le)return;m||(le=i.a6.mat4.scale(i.a6.mat4.create(),le,[1,-1,1]));const be=c.context,xe=be.gl,Te=b.paint.get("raster-resampling")==="nearest"?xe.NEAREST:xe.LINEAR,Ee=c.colorModeForDrapableLayerRenderPass(C),Oe=I.defines;Oe.push("GLOBE_POLES");const Ve=new lr(xe.LEQUAL,lr.ReadWrite,c.depthRangeFor3D),He=Float32Array.from(c.transform.expandedFarZProjMatrix),qe=Float32Array.from(i.b6(i.cC(new i.bQ(0,0,0))));c.terrain&&c.terrain.prepareDrawTile(),be.activeTexture.set(xe.TEXTURE0),ne.bind(Te,xe.CLAMP_TO_EDGE),be.activeTexture.set(xe.TEXTURE1),ne.bind(Te,xe.CLAMP_TO_EDGE),ne.useMipmap&&be.extTextureFilterAnisotropic&&c.transform.pitch>20&&xe.texParameterf(xe.TEXTURE_2D,be.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,be.extTextureFilterAnisotropicMax);const[Xe,Ke,Ye,rt]=a?G.getPoleBuffers(a.canonical.z,!1):G.getPoleBuffers(0,!0),vt=b.paint.get("raster-elevation");let st;m?(st=Xe,c.renderDefaultNorthPole=vt!==0):(st=Ke,c.renderDefaultSouthPole=vt!==0);const it=Ya(I.mix),zt=((tn,fn,Sn,Et,Qt,Nt,en,rn,Jt,In,Wn,Qn,Bn)=>zf(tn,fn,Sn,new Float32Array(16),new Float32Array(9),[0,0],Et,[0,0],[0,0,0,0],1,{opacity:1,mix:0},Nt,[0,0],rn,2,In,Wn,Qn,1,0,Bn))(He,qe,le,i.a9(c.transform.zoom),0,b,0,vt,0,it,I.offset,I.range,C),jt=c.getOrCreateProgram("raster",{defines:Oe});c.uploadCommonUniforms(be,jt,null),jt.draw(c,xe.TRIANGLES,Ve,U,Ee,z,zt,b.id,st,Ye,rt)}function jf(m){const a=m._nearZ,c=m.projection.farthestPixelDistance(m),g=c-a,b=.2*m.height,C=a+b;return[a,c,(C-b-a)/g,(C-a)/g]}function zg(m,a,c,g){if(m)return a instanceof ir&&m instanceof sr?a.getTextureDescriptor(m,c,!0):{texture:m.texture,mix:Ya(g.mix),offset:g.offset,buffer:0,tileSize:1}}var w_=i.d5([{name:"a_index",type:"Int16",components:1}]);class S_{constructor(a,c,g,b){const C={width:g[0],height:g[1],data:null},I=a.gl;this.targetColorTexture=new i.T(a,C,I.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new i.T(a,C,I.RGBA8,{useMipmap:!1}),this.context=a,this.updateParticleTexture(c,b),this.lastInvalidatedAt=0}updateParticleTexture(a,c){if(this.particleTextureDimension===c.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const g=this.context.gl,b=c.width*c.height;this.particleTexture0=new i.T(this.context,c,g.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new i.T(this.context,c,g.RGBA8,{premultiply:!1,useMipmap:!1});const C=new i.d6;C.reserve(b);for(let I=0;I<b;I++)C.emplaceBack(I);this.particleIndexBuffer=this.context.createVertexBuffer(C,w_.members,!0),this.particleSegment=i.b2.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=c.width}update(a){return!(this.lastInvalidatedAt<a&&(this.lastInvalidatedAt=i.q.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function C_(m,a,c){if(!m)return null;const g=a.getTextureDescriptor(m,c,!0);if(!g)return null;let{texture:b,mix:C,offset:I,tileSize:z,buffer:U,format:K}=g;if(!b||!K)return null;let G=!1;return K==="uint32"&&(G=!0,C[3]=0,C=kf(i.d7,C,[0,c.paint.get("raster-particle-max-speed")]),I=Pu(i.d7,I,[0,c.paint.get("raster-particle-max-speed")])),{texture:b,textureOffset:[U/(z+2*U),z/(z+2*U)],tileSize:z,scalarData:G,scale:C,offset:I,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[K]]}}function IS(m){const a=m._nearZ,c=m.projection.farthestPixelDistance(m),g=c-a,b=.2*m.height,C=a+b;return[a,c,(C-b-a)/g,(C-a)/g]}const Ou=new i.bA(1,0,0,1),Au=new i.bA(0,1,0,1),mn=new i.bA(0,0,1,1),Yn=new i.bA(1,0,1,1),Du=new i.bA(0,1,1,1);function Ri(m,a,c,g,b,C,I){const z=m.context,U=m.transform,K=z.gl,G=U.projection.name==="globe",Q=G?["PROJECTION_GLOBE_VIEW"]:[];let ne=i.a6.mat4.clone(c.projMatrix);if(G&&i.a9(U.zoom)>0){const it=i.b5(c.canonical,U),zt=i.d8(it);ne=i.a6.mat4.multiply(new Float32Array(16),U.globeMatrix,zt),i.a6.mat4.multiply(ne,U.projMatrix,ne)}const le=i.a6.mat4.create();le[12]+=2*b/(i.q.devicePixelRatio*U.width),le[13]+=2*C/(i.q.devicePixelRatio*U.height),i.a6.mat4.multiply(ne,le,ne);const be=m.getOrCreateProgram("debug",{defines:Q}),xe=a.getTileByID(c.key);m.terrain&&m.terrain.setupElevationDraw(xe,be);const Te=lr.disabled,Ee=Ir.disabled,Oe=m.colorModeForRenderPass(),Ve="$debug";z.activeTexture.set(K.TEXTURE0),m.emptyTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE),G?xe._makeGlobeTileDebugBuffers(m.context,U):xe._makeDebugTileBoundsBuffers(m.context,U.projection);const He=xe._tileDebugBuffer||m.debugBuffer,qe=xe._tileDebugIndexBuffer||m.debugIndexBuffer,Xe=xe._tileDebugSegments||m.debugSegments;if(be.draw(m,K.LINE_STRIP,Te,Ee,Oe,_r.disabled,Eg(ne,g),Ve,He,qe,Xe,null,null,null,[xe._globeTileDebugBorderBuffer]),I){const it=xe.latestRawTileData,zt=Math.floor((it&&it.byteLength||0)/1024);let jt=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(jt+=` => ${c.overscaledZ}`),jt+=` ${xe.state}`,jt+=` ${zt}kb`,function(tn,fn){tn.initDebugOverlayCanvas();const Sn=tn.debugOverlayCanvas,Et=tn.context.gl,Qt=tn.debugOverlayCanvas.getContext("2d");Qt.clearRect(0,0,Sn.width,Sn.height),Qt.shadowColor="white",Qt.shadowBlur=2,Qt.lineWidth=1.5,Qt.strokeStyle="white",Qt.textBaseline="top",Qt.font="bold 36px Open Sans, sans-serif",Qt.fillText(fn,5,5),Qt.strokeText(fn,5,5),tn.debugOverlayTexture.update(Sn),tn.debugOverlayTexture.bind(Et.LINEAR,Et.CLAMP_TO_EDGE)}(m,jt)}const Ke=a.getTile(c).tileSize,Ye=512/Math.min(Ke,512)*(c.overscaledZ/U.zoom)*.5,rt=xe._tileDebugTextBuffer||m.debugBuffer,vt=xe._tileDebugTextIndexBuffer||m.quadTriangleIndexBuffer,st=xe._tileDebugTextSegments||m.debugSegments;be.draw(m,K.TRIANGLES,Te,Ee,Br.alphaBlended,_r.disabled,Eg(ne,i.bA.transparent,Ye),Ve,rt,vt,st,null,null,null,[xe._globeTileDebugTextBuffer])}function Ot(m,a,c,g){Lc(m,0,a+c/2,m.transform.width,c,g)}function Lg(m,a,c,g){Lc(m,a-c/2,0,c,m.transform.height,g)}function Lc(m,a,c,g,b,C){const I=m.context,z=I.gl;z.enable(z.SCISSOR_TEST),z.scissor(a*i.q.devicePixelRatio,c*i.q.devicePixelRatio,g*i.q.devicePixelRatio,b*i.q.devicePixelRatio),I.clear({color:C}),z.disable(z.SCISSOR_TEST)}const Ng=i.d5([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Vf}=Ng;function yl(m,a,c,g){m.emplaceBack(a,c,g)}class Fg{constructor(a){this.vertexArray=new i.d9,this.indices=new i.aP,yl(this.vertexArray,-1,-1,1),yl(this.vertexArray,1,-1,1),yl(this.vertexArray,-1,1,1),yl(this.vertexArray,1,1,1),yl(this.vertexArray,-1,-1,-1),yl(this.vertexArray,1,-1,-1),yl(this.vertexArray,-1,1,-1),yl(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=a.createVertexBuffer(this.vertexArray,Vf),this.indexBuffer=a.createIndexBuffer(this.indices),this.segment=i.b2.simpleSegment(0,0,36,12)}}function Es(m,a,c,g,b,C){const I=m.context.gl,z=a.paint.get("sky-atmosphere-color"),U=a.paint.get("sky-atmosphere-halo-color"),K=a.paint.get("sky-atmosphere-sun-intensity"),G=((Q,ne,le,be,xe)=>({u_matrix_3f:Q,u_sun_direction:ne,u_sun_intensity:le,u_color_tint_r:[be.r,be.g,be.b,be.a],u_color_tint_m:[xe.r,xe.g,xe.b,xe.a],u_luminance:5e-5}))(i.a6.mat3.fromMat4(i.a6.mat3.create(),g),b,K,z,U);I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_CUBE_MAP_POSITIVE_X+C,a.skyboxTexture,0),c.draw(m,I.TRIANGLES,lr.disabled,Ir.disabled,Br.unblended,_r.frontCW,G,"skyboxCapture",a.skyboxGeometry.vertexBuffer,a.skyboxGeometry.indexBuffer,a.skyboxGeometry.segment)}const MS=i.d5([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class PS{constructor(a){const c=new i.da;c.emplaceBack(-1,1,1,0,0),c.emplaceBack(1,1,1,1,0),c.emplaceBack(1,-1,1,1,1),c.emplaceBack(-1,-1,1,0,1);const g=new i.aP;g.emplaceBack(0,1,2),g.emplaceBack(2,3,0),this.vertexBuffer=a.createVertexBuffer(c,MS.members),this.indexBuffer=a.createIndexBuffer(g),this.segments=i.b2.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const E_=i.d5([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class Hf{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class Bg{constructor(a){this.colorModeAlphaBlendedWriteRGB=new Br([1,Ga,1,Ga],i.bA.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new Br([1,0,1,0],i.bA.transparent,[!1,!1,!1,!0]),this.params=new Hf,this.updateNeeded=!0,a.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),a.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),a.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),a.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(a){const c=a.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new PS(c);const g=this.params.sizeRange,b=this.params.intensityRange,C=function(G){const Q=i.dd(30),ne=[];for(let le=0;le<G;++le){const be=2*Math.PI*Q(),xe=Math.acos(1-2*Q())-.5*Math.PI;ne.push(i.a6.vec3.fromValues(Math.cos(xe)*Math.cos(be),Math.cos(xe)*Math.sin(be),Math.sin(xe)))}return ne}(this.params.starsCount),I=i.dd(300),z=new i.db,U=new i.aP;let K=0;for(let G=0;G<C.length;++G){const Q=i.a6.vec3.scale([],C[G],200),ne=Math.max(0,1+.01*g*(1*I()-.5)),le=Math.max(0,1+.01*b*(1*I()-.5));z.emplaceBack(Q[0],Q[1],Q[2],-1,-1,ne,le),z.emplaceBack(Q[0],Q[1],Q[2],1,-1,ne,le),z.emplaceBack(Q[0],Q[1],Q[2],1,1,ne,le),z.emplaceBack(Q[0],Q[1],Q[2],-1,1,ne,le),U.emplaceBack(K+0,K+1,K+2),U.emplaceBack(K+0,K+2,K+3),K+=4}this.starsVx=c.createVertexBuffer(z,E_.members),this.starsIdx=c.createIndexBuffer(U),this.starsSegments=i.b2.simpleSegment(0,0,z.length,U.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(a,c){const g=a.context,b=g.gl,C=a.transform,I=new lr(b.LEQUAL,lr.ReadOnly,[0,1]),z=i.a9(C.zoom),U=a.style.getLut(c.scope),K=c.properties.get("color").toRenderColor(U).toArray01(),G=c.properties.get("high-color").toRenderColor(U).toArray01(),Q=c.properties.get("space-color").toRenderColor(U).toArray01PremultipliedAlpha(),ne=5e-4,le=i.dc(c.properties.get("horizon-blend"),0,1,ne,.25),be=i.cx(a,g,C)&&le===ne?C.worldSize/(2*Math.PI*1.025)-1:C.globeRadius,xe=a.frameCounter/1e3%1,Te=i.a6.vec3.length(C.globeCenterInViewSpace),Ee=Math.sqrt(Math.pow(Te,2)-Math.pow(be,2)),Oe=Math.acos(Ee/Te),Ve=He=>{const qe=C.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];He&&qe.push("ALPHA_PASS");const Xe=a.getOrCreateProgram("globeAtmosphere",{defines:qe}),Ke=((rt,vt,st,it,zt,jt,tn,fn,Sn,Et,Qt,Nt)=>({u_frustum_tl:rt,u_frustum_tr:vt,u_frustum_br:st,u_frustum_bl:it,u_horizon:zt,u_transition:jt,u_fadeout_range:tn,u_color:fn,u_high_color:Sn,u_space_color:Et,u_temporal_offset:Qt,u_horizon_angle:Nt}))(C.frustumCorners.TL,C.frustumCorners.TR,C.frustumCorners.BR,C.frustumCorners.BL,C.frustumCorners.horizon,z,le,K,G,Q,xe,Oe);a.uploadCommonUniforms(g,Xe);const Ye=this.atmosphereBuffer;Ye&&Xe.draw(a,b.TRIANGLES,I,Ir.disabled,He?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,_r.backCW,Ke,He?"atmosphere_glow_alpha":"atmosphere_glow",Ye.vertexBuffer,Ye.indexBuffer,Ye.segments)};Ve(!1),Ve(!0)}drawStars(a,c){const g=i.ap(c.properties.get("star-intensity"),0,1);if(g===0)return;const b=a.context,C=b.gl,I=a.transform,z=a.getOrCreateProgram("stars"),U=i.a6.quat.identity([]);i.a6.quat.rotateX(U,U,-I._pitch),i.a6.quat.rotateZ(U,U,-I.angle),i.a6.quat.rotateX(U,U,i.bC(I._center.lat)),i.a6.quat.rotateY(U,U,-i.bC(I._center.lng));const K=i.a6.mat4.fromQuat(new Float32Array(16),U),G=i.a6.mat4.multiply([],I.starsProjMatrix,K),Q=i.a6.mat3.fromMat4([],K),ne=i.a6.mat3.invert([],Q),le=[0,1,0];i.a6.vec3.transformMat3(le,le,ne),i.a6.vec3.scale(le,le,this.params.sizeMultiplier);const be=[1,0,0];i.a6.vec3.transformMat3(be,be,ne),i.a6.vec3.scale(be,be,this.params.sizeMultiplier);const xe=(Te=le,Ee=be,Oe=g,{u_matrix:Float32Array.from(G),u_up:Te,u_right:Ee,u_intensity_multiplier:Oe});var Te,Ee,Oe;a.uploadCommonUniforms(b,z),this.starsVx&&this.starsIdx&&z.draw(a,C.TRIANGLES,lr.disabled,Ir.disabled,this.colorModeAlphaBlendedWriteRGB,_r.disabled,xe,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function jg(m,a){const c=[...m],g=a.cameraWorldSizeForFog/a.worldSize,b=i.a6.mat4.identity([]);return i.a6.mat4.scale(b,b,[g,g,1]),i.a6.mat4.multiply(c,b,c),i.a6.mat4.multiply(c,a.worldToFogMatrix,c),c}function Uf(m,a,c,g,b){const C=c.material,I=g.context,{baseColorTexture:z,metallicRoughnessTexture:U}=C.pbrMetallicRoughness,{normalTexture:K,occlusionTexture:G,emissionTexture:Q}=C;function ne(be,xe,Te){if(be&&(m.push(xe),I.activeTexture.set(I.gl.TEXTURE0+Te),be.gfxTexture)){const{minFilter:Ee,magFilter:Oe,wrapS:Ve,wrapT:He}=be.sampler;be.gfxTexture.bindExtraParam(Ee,Oe,Ve,He)}}ne(z,"HAS_TEXTURE_u_baseColorTexture",ea.BaseColor),ne(U,"HAS_TEXTURE_u_metallicRoughnessTexture",ea.MetallicRoughness),ne(K,"HAS_TEXTURE_u_normalTexture",ea.Normal),ne(G,"HAS_TEXTURE_u_occlusionTexture",ea.Occlusion),ne(Q,"HAS_TEXTURE_u_emissionTexture",ea.Emission),b&&(b.texture||(b.texture=new i.df(g.context,b.image,[b.image.height,b.image.height,b.image.height],I.gl.RGBA8)),I.activeTexture.set(I.gl.TEXTURE0+ea.LUT),b.texture&&b.texture.bind(I.gl.LINEAR,I.gl.CLAMP_TO_EDGE),m.push("APPLY_LUT_ON_GPU")),c.texcoordBuffer&&(m.push("HAS_ATTRIBUTE_a_uv_2f"),a.push(c.texcoordBuffer)),c.colorBuffer&&(m.push(c.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),a.push(c.colorBuffer)),c.normalBuffer&&(m.push("HAS_ATTRIBUTE_a_normal_3f"),a.push(c.normalBuffer)),c.pbrBuffer&&(m.push("HAS_ATTRIBUTE_a_pbr"),m.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),a.push(c.pbrBuffer)),C.alphaMode!=="OPAQUE"&&C.alphaMode!=="MASK"||m.push("UNPREMULT_TEXTURE_IN_SHADER"),C.defined||m.push("DIFFUSE_SHADED"),m.push("USE_STANDARD_DERIVATIVES");const le=g.shadowRenderer;le&&(m.push("RENDER_SHADOWS","DEPTH_TEXTURE"),le.useNormalOffset&&m.push("NORMAL_OFFSET"))}function Nc(m,a,c,g,b,C){const I=c.paint.get("model-opacity"),z=a.context,U=new lr(a.context.gl.LEQUAL,lr.ReadWrite,a.depthRangeFor3D),K=a.transform,G=m.mesh,Q=G.material,ne=Q.pbrMetallicRoughness,le=a.style.fog;let be;be=a.transform.projection.zAxisUnit==="pixels"?[...m.nodeModelMatrix]:i.a6.mat4.multiply([],g.zScaleMatrix,m.nodeModelMatrix),i.a6.mat4.multiply(be,g.negCameraPosMatrix,be);const xe=i.a6.mat4.invert([],be);i.a6.mat4.transpose(xe,xe);const Te=c.paint.get("model-emissive-strength").constantOr(0),Ee=Ff(new Float32Array(m.worldViewProjection),new Float32Array(be),new Float32Array(xe),null,a,I,ne.baseColorFactor.toRenderColor(null),Q.emissiveFactor,ne.metallicFactor,ne.roughnessFactor,Q,Te,c),Oe={defines:[]},Ve=[],He=a.shadowRenderer;He&&(He.useNormalOffset=!1),Uf(Oe.defines,Ve,G,a,c.lut);let qe=null;if(le){const Ye=jg(m.nodeModelMatrix,a.transform);if(qe=new Float32Array(Ye),K.projection.name!=="globe"){const rt=G.aabb.min,vt=G.aabb.max,[st,it]=le.getOpacityForBounds(Ye,rt[0],rt[1],vt[0],vt[1]);Oe.overrideFog=st>=Mt||it>=Mt}}const Xe=ml(a,c.paint.get("model-cutoff-fade-range"));Xe.shouldRenderCutoff&&Oe.defines.push("RENDER_CUTOFF");const Ke=a.getOrCreateProgram("model",Oe);a.uploadCommonUniforms(z,Ke,null,qe,Xe),a.renderPass!=="shadow"&&He&&He.setupShadowsFromMatrix(m.nodeModelMatrix,Ke),Ke.draw(a,z.gl.TRIANGLES,U,b,C,G.material.doubleSided?_r.disabled:_r.backCCW,Ee,c.id,G.vertexBuffer,G.indexBuffer,G.segments,c.paint,a.transform.zoom,void 0,Ve)}function ch(m,a,c,g,b,C,I){let z;z=m.projection.name==="globe"?i.dg(c,m):[...c],i.a6.mat4.multiply(z,z,a.matrix);const U=i.a6.mat4.multiply([],g,z);if(a.meshes)for(const K of a.meshes){if(K.material.alphaMode!=="BLEND"){I.push({mesh:K,depth:0,modelIndex:b,worldViewProjection:U,nodeModelMatrix:z});continue}const G=i.a6.vec3.transformMat4([],K.centroid,U);G[2]>0&&C.push({mesh:K,depth:G[2],modelIndex:b,worldViewProjection:U,nodeModelMatrix:z})}if(a.children)for(const K of a.children)ch(m,K,c,g,b,C,I)}function Wf(m,a,c,g){const b=c.shadowRenderer;if(!b)return;const C=b.getShadowPassDepthMode(),I=b.getShadowPassColorMode(),z=b.calculateShadowPassMatrixFromMatrix(a),U=Pg(z);c.getOrCreateProgram("modelDepth",{defines:c._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(c,c.context.gl.TRIANGLES,C,Ir.disabled,I,_r.backCCW,U,g.id,m.vertexBuffer,m.indexBuffer,m.segments,g.paint,c.transform.zoom,void 0,void 0)}function T_(m,a,c){const g=a.updateZoomBasedPaintProperties(),b=function(C,I,z){let U,K,G,Q=C.terrain?C.terrain.exaggeration():0;if(C.terrain&&Q>0){const ne=C.terrain,le=ne.findDEMTileFor(z);le&&le.dem?U=i.di.create(ne,z,le):Q=0}if(Q===0&&(I.terrainElevationMin=0,I.terrainElevationMax=0),Q===I.validForExaggeration&&(Q===0||U&&U._demTile&&U._demTile.tileID===I.validForDEMTile.id&&U._dem._timestamp===I.validForDEMTile.timestamp))return!1;for(const ne in I.instancesPerModel){const le=I.instancesPerModel[ne];for(let be=0;be<le.instancedDataArray.length;++be){const xe=(U?Q*U.getElevationAt(0|le.instancedDataArray.float32[16*be],0|le.instancedDataArray.float32[16*be+1],!0,!0):0)+le.instancesEvaluatedElevation[be];le.instancedDataArray.float32[16*be+6]=xe,K=K?Math.min(I.terrainElevationMin,xe):xe,G=G?Math.max(I.terrainElevationMax,xe):xe}}return I.terrainElevationMin=K||0,I.terrainElevationMax=G||0,I.validForExaggeration=Q,I.validForDEMTile=U&&U._demTile?{id:U._demTile.tileID,timestamp:U._dem._timestamp}:{id:void 0,timestamp:0},!0}(m,a,c);(g||b)&&(a.uploaded=!1,a.upload(m.context))}const Gs={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new i.ca([0,0,0],[i.ab,i.ab,0])};function xa(m,a){const c=1<<m.canonical.z,g=a.getFreeCameraOptions().position,b=a.elevation,C=m.canonical.x/c,I=(m.canonical.x+1)/c,z=m.canonical.y/c,U=(m.canonical.y+1)/c;let K=a._centerAltitude;if(b){const le=b.getMinMaxForTile(m);le&&le.max>K&&(K=le.max)}const G=i.ap(g.x,C,I)-g.x,Q=i.ap(g.y,z,U)-g.y,ne=i.bE(K,a.center.lat)-g.z;return a._zoomFromMercatorZ(Math.sqrt(G*G+Q*Q+ne*ne))}function I_(m,a,c,g,b,C,I){const z=m.context,U=m.renderPass==="shadow",K=m.shadowRenderer,G=U&&K?K.getShadowPassDepthMode():new lr(z.gl.LEQUAL,lr.ReadWrite,m.depthRangeFor3D),Q=m.isTileAffectedByFog(C);if(c.meshes)for(const ne of c.meshes){const le=["MODEL_POSITION_ON_GPU"],be=[];let xe,Te,Ee;g.instancedDataArray.length>20&&le.push("INSTANCED_ARRAYS");const Oe=ml(m,a.paint.get("model-cutoff-fade-range"));if(Oe.shouldRenderCutoff&&le.push("RENDER_CUTOFF"),U&&K)xe=m.getOrCreateProgram("modelDepth",{defines:le}),Te=Pg(I.shadowTileMatrix,I.shadowTileMatrix,Float32Array.from(c.matrix)),Ee=K.getShadowPassColorMode();else{Uf(le,be,ne,m,a.lut),xe=m.getOrCreateProgram("model",{defines:le,overrideFog:Q});const He=ne.material,qe=He.pbrMetallicRoughness,Xe=a.paint.get("model-opacity"),Ke=a.paint.get("model-emissive-strength").constantOr(0);Te=Ff(C.expandedProjMatrix,Float32Array.from(c.matrix),new Float32Array(16),null,m,Xe,qe.baseColorFactor.toRenderColor(null),He.emissiveFactor,qe.metallicFactor,qe.roughnessFactor,He,Ke,a,b),K&&(I.shadowUniformsInitialized?xe.setShadowUniformValues(z,K.getShadowUniformValues()):(K.setupShadows(C.toUnwrapped(),xe,"model-tile",C.overscaledZ),I.shadowUniformsInitialized=!0)),Ee=Oe.shouldRenderCutoff||Xe<1||He.alphaMode!=="OPAQUE"?Br.alphaBlended:Br.unblended}m.uploadCommonUniforms(z,xe,C.toUnwrapped(),null,Oe);const Ve=ne.material.doubleSided?_r.disabled:_r.backCCW;if(g.instancedDataArray.length>20)be.push(g.instancedDataBuffer),xe.draw(m,z.gl.TRIANGLES,G,Ir.disabled,Ee,Ve,Te,a.id,ne.vertexBuffer,ne.indexBuffer,ne.segments,a.paint,m.transform.zoom,void 0,be,g.instancedDataArray.length);else{const He=U?"u_instance":"u_normal_matrix";for(let qe=0;qe<g.instancedDataArray.length;++qe)Te[He]=new Float32Array(g.instancedDataArray.arrayBuffer,64*qe,16),xe.draw(m,z.gl.TRIANGLES,G,Ir.disabled,Ee,Ve,Te,a.id,ne.vertexBuffer,ne.indexBuffer,ne.segments,a.paint,m.transform.zoom,void 0,be)}}if(c.children)for(const ne of c.children)I_(m,a,ne,g,b,C,I)}const uh=[1,-1,1];function Oi(m,a,c,g){if(!c.modelManager)return!0;const b=c.modelManager;if(!c.shadowRenderer)return!0;const C=c.shadowRenderer,I=a.aabb;let z=!0,U=m.maxHeight;if(U===0){let G=0;for(const Q in m.instancesPerModel){const ne=b.getModel(Q,g);ne?G=Math.max(G,Math.max(Math.max(ne.aabb.max[0],ne.aabb.max[1]),ne.aabb.max[2])):z=!1}U=m.maxScale*G*1.41+m.maxVerticalOffset,z&&(m.maxHeight=U)}I.max[2]=U,I.min[2]+=m.terrainElevationMin,I.max[2]+=m.terrainElevationMax,i.a6.vec3.transformMat4(I.min,I.min,a.tileMatrix),i.a6.vec3.transformMat4(I.max,I.max,a.tileMatrix);const K=I.intersects(C.getCurrentCascadeFrustum());return c.currentShadowCascade===0&&(m.isInsideFirstShadowMapFrustum=K===2),K===0}function Qr(m,a){const c=m.uniformValues.u_cutoff_params[0],g=m.uniformValues.u_cutoff_params[1],b=m.uniformValues.u_cutoff_params[2],C=m.uniformValues.u_cutoff_params[3];return g===c||C===b?1:i.ap(((a-c)/(g-c)-b)/(C-b),0,1)}function M_(m,a,c,g){if(a.pitch<20)return 1;const b=a.getWorldToCameraMatrix();i.a6.mat4.multiply(b,b,m);const C=i.a6.vec4.fromValues(c.min[0],c.min[1],c.min[2],1);let I=i.a6.vec4.transformMat4(i.a6.vec4.create(),C,b),z=I,U=I;C[1]=c.max[1],I=i.a6.vec4.transformMat4(i.a6.vec4.create(),C,b),z=I[1]<z[1]?I:z,U=I[1]>U[1]?I:U,C[0]=c.max[0],I=i.a6.vec4.transformMat4(i.a6.vec4.create(),C,b),z=I[1]<z[1]?I:z,U=I[1]>U[1]?I:U,C[1]=c.min[1],I=i.a6.vec4.transformMat4(i.a6.vec4.create(),C,b),z=I[1]<z[1]?I:z,U=I[1]>U[1]?I:U;const K=i.ap(g[0],0,1),G=100*a.pixelsPerMeter*i.ap(g[1],0,1),Q=i.ap(g[2],0,1),ne=i.a6.vec4.lerp(i.a6.vec4.create(),z,U,K),le=Math.tan(.5*a.fovX),be=-ne[2]*le;if(G===0)return ne[1]<-Math.abs(be)?Q:1;const xe=(-Math.abs(be)-ne[1])/G,Te=(Oe,Ve,He)=>(1-He)*Oe+He*Ve,Ee=i.ap(Te(1,Q,xe),Q,1);return Te(1,Ee,i.ap((a.pitch-20)/20,0,1))}class oc{}class Gf{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(a,c,g){{const Q=this._storage.get(c.id);if(Q)return Q.lastUsedFrameIdx=a,Q.buf}const b=g.gl,C=b.getBufferParameter(b.ELEMENT_ARRAY_BUFFER,b.BUFFER_SIZE),I=new ArrayBuffer(C),z=new Int16Array(I);b.getBufferSubData(b.ELEMENT_ARRAY_BUFFER,0,new Int16Array(I));const U=new i.dk;for(let Q=0;Q<C/2;Q+=3){const ne=z[Q],le=z[Q+1],be=z[Q+2];U.emplaceBack(ne,le),U.emplaceBack(le,be),U.emplaceBack(be,ne)}const K=g.bindVertexArrayOES.current,G=new oc;return G.buf=new Aa(g,U),G.lastUsedFrameIdx=a,this._storage.set(c.id,G),g.bindVertexArrayOES.set(K),G.buf}update(a){for(const[c,g]of this._storage)a-g.lastUsedFrameIdx>30&&(g.buf.destroy(),this._storage.delete(c))}destroy(){for(const[a,c]of this._storage)c.buf.destroy(),this._storage.delete(a)}}class $u{constructor(a){this.occluderSize=30,this.depthOffset=-1e-4,a.registerParameter(this,["Occlusion"],"occluderSize",{min:1,max:100,step:1}),a.registerParameter(this,["Occlusion"],"depthOffset",{min:-.05,max:0,step:1e-5})}}class Vg{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}const dh={symbol:function(m,a,c,g,b){if(m.renderPass!=="translucent")return;const C=Ir.disabled,I=m.colorModeForRenderPass(),z=c.layout.get("text-variable-anchor"),U=c.layout.get("text-size-scale-range"),K=i.ap(m.scaleFactor,U[0],U[1]);z&&function(ne,le,be,xe,Te,Ee,Oe,Ve){const He=le.transform,qe=Te==="map",Xe=Ee==="map";for(const Ke of ne){const Ye=xe.getTile(Ke),rt=Ye.getBucket(be);if(!rt||!rt.text||!rt.text.segments.get().length)continue;const vt=i.bk(rt.textSizeData,He.zoom,Ve),st=tc(Ke,rt.getProjection(),He),it=He.calculatePixelsToTileUnitsMatrix(Ye),zt=gr(st,Ye.tileID.canonical,Xe,qe,He,rt.getProjection(),it),jt=rt.hasIconTextFit()&&rt.hasIconData();if(vt){const tn=Math.pow(2,He.zoom-Ye.tileID.overscaledZ);Ag(rt,qe,Xe,Oe,i.cS,He,zt,Ke,tn,vt,jt)}}}(g,m,c,a,c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),b,K);const G=c.paint.get("icon-opacity").constantOr(1)!==0,Q=c.paint.get("text-opacity").constantOr(1)!==0;c.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(G||Q)?sh(m,a,c,g,C,I):(G&&sh(m,a,c,g,C,I,{onlyIcons:!0}),Q&&sh(m,a,c,g,C,I,{onlyText:!0})),a.map.showCollisionBoxes&&(Og(m,a,c,g,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),!0),Og(m,a,c,g,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),!1))},circle:function(m,a,c,g){if(m.renderPass!=="translucent")return;const b=c.paint.get("circle-opacity"),C=c.paint.get("circle-stroke-width"),I=c.paint.get("circle-stroke-opacity"),z=c.layout.get("circle-sort-key").constantOr(1)!==void 0,U=c.paint.get("circle-emissive-strength");if(b.constantOr(1)===0&&(C.constantOr(1)===0||I.constantOr(1)===0))return;const K=m.context,G=K.gl,Q=m.transform,ne=m.depthModeForSublayer(0,lr.ReadOnly),le=Ir.disabled,be=m.colorModeForDrapableLayerRenderPass(U),xe=Q.projection.name==="globe",Te=[i.am(Q.center.lng),i.at(Q.center.lat)],Ee=[];for(let Ve=0;Ve<g.length;Ve++){const He=g[Ve],qe=a.getTile(He),Xe=qe.getBucket(c);if(!Xe||Xe.projection.name!==Q.projection.name)continue;const Ke=Xe.programConfigurations.get(c.id),Ye=i.cT(c),rt=m.isTileAffectedByFog(He);xe&&Ye.push("PROJECTION_GLOBE_VIEW"),Ye.push("DEPTH_D24"),m.terrain&&Q.depthOcclusionForSymbolsAndCircles&&Ye.push("DEPTH_OCCLUSION");const vt=m.getOrCreateProgram("circle",{config:Ke,defines:Ye,overrideFog:rt}),st=Xe.layoutVertexBuffer,it=Xe.globeExtVertexBuffer,zt=Xe.indexBuffer,jt=Q.projection.createInversionMatrix(Q,He.canonical),tn={programConfiguration:Ke,program:vt,layoutVertexBuffer:st,globeExtVertexBuffer:it,indexBuffer:zt,uniformValues:i.cU(m,He,qe,jt,Te,c),tile:qe};if(z){const fn=Xe.segments.get();for(const Sn of fn)Ee.push({segments:new i.b2([Sn]),sortKey:Sn.sortKey,state:tn})}else Ee.push({segments:Xe.segments,sortKey:0,state:tn})}z&&Ee.sort((Ve,He)=>Ve.sortKey-He.sortKey);const Oe={useDepthForOcclusion:Q.depthOcclusionForSymbolsAndCircles};for(const Ve of Ee){const{programConfiguration:He,program:qe,layoutVertexBuffer:Xe,globeExtVertexBuffer:Ke,indexBuffer:Ye,uniformValues:rt,tile:vt}=Ve.state,st=Ve.segments;m.terrain&&m.terrain.setupElevationDraw(vt,qe,Oe),m.uploadCommonUniforms(K,qe,vt.tileID.toUnwrapped()),qe.draw(m,G.TRIANGLES,ne,le,be,_r.disabled,rt,c.id,Xe,Ye,st,c.paint,Q.zoom,He,[Ke])}},heatmap:function(m,a,c,g){if(c.paint.get("heatmap-opacity")!==0)if(m.renderPass==="offscreen"){const b=m.context,C=b.gl,I=Ir.disabled,z=new Br([C.ONE,C.ONE,C.ONE,C.ONE],i.bA.transparent,[!0,!0,!0,!0]);(function(le,be,xe,Te){const Ee=le.gl,Oe=be.width*Te,Ve=be.height*Te;le.activeTexture.set(Ee.TEXTURE1),le.viewport.set([0,0,Oe,Ve]);let He=xe.heatmapFbo;if(!He||He&&(He.width!==Oe||He.height!==Ve)){He&&He.destroy();const qe=Ee.createTexture();Ee.bindTexture(Ee.TEXTURE_2D,qe),Ee.texParameteri(Ee.TEXTURE_2D,Ee.TEXTURE_WRAP_S,Ee.CLAMP_TO_EDGE),Ee.texParameteri(Ee.TEXTURE_2D,Ee.TEXTURE_WRAP_T,Ee.CLAMP_TO_EDGE),Ee.texParameteri(Ee.TEXTURE_2D,Ee.TEXTURE_MIN_FILTER,Ee.LINEAR),Ee.texParameteri(Ee.TEXTURE_2D,Ee.TEXTURE_MAG_FILTER,Ee.LINEAR),He=xe.heatmapFbo=le.createFramebuffer(Oe,Ve,!0,null),function(Xe,Ke,Ye,rt,vt,st){const it=Xe.gl;it.texImage2D(it.TEXTURE_2D,0,Xe.extRenderToTextureHalfFloat?it.RGBA16F:it.RGBA,vt,st,0,it.RGBA,Xe.extRenderToTextureHalfFloat?it.HALF_FLOAT:it.UNSIGNED_BYTE,null),rt.colorAttachment.set(Ye)}(le,0,qe,He,Oe,Ve)}else Ee.bindTexture(Ee.TEXTURE_2D,He.colorAttachment.get()),le.bindFramebuffer.set(He.framebuffer)})(b,m,c,m.transform.projection.name==="globe"?.5:.25),b.clear({color:i.bA.transparent});const U=m.transform,K=U.projection.name==="globe",G=K?["PROJECTION_GLOBE_VIEW"]:[],Q=K?_r.frontCCW:_r.disabled,ne=[i.am(U.center.lng),i.at(U.center.lat)];for(let le=0;le<g.length;le++){const be=g[le];if(a.hasRenderableParent(be))continue;const xe=a.getTile(be),Te=xe.getBucket(c);if(!Te||Te.projection.name!==U.projection.name)continue;const Ee=m.isTileAffectedByFog(be),Oe=Te.programConfigurations.get(c.id),Ve=m.getOrCreateProgram("heatmap",{config:Oe,defines:G,overrideFog:Ee}),{zoom:He}=m.transform;m.terrain&&m.terrain.setupElevationDraw(xe,Ve),m.uploadCommonUniforms(b,Ve,be.toUnwrapped());const qe=U.projection.createInversionMatrix(U,be.canonical);Ve.draw(m,C.TRIANGLES,lr.disabled,I,z,Q,Tg(m,be,xe,qe,ne,He,c.paint.get("heatmap-intensity")),c.id,Te.layoutVertexBuffer,Te.indexBuffer,Te.segments,c.paint,m.transform.zoom,Oe,K?[Te.globeExtVertexBuffer]:null)}b.viewport.set([0,0,m.width,m.height])}else m.renderPass==="translucent"&&(m.context.setColorMode(m.colorModeForRenderPass()),function(b,C){const I=b.context,z=I.gl,U=C.heatmapFbo;if(!U)return;I.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,U.colorAttachment.get()),I.activeTexture.set(z.TEXTURE1);let K=C.colorRampTexture;K||(K=C.colorRampTexture=new i.T(I,C.colorRamp,z.RGBA8)),K.bind(z.LINEAR,z.CLAMP_TO_EDGE),b.getOrCreateProgram("heatmapTexture").draw(b,z.TRIANGLES,lr.disabled,Ir.disabled,b.colorModeForRenderPass(),_r.disabled,((G,Q,ne,le)=>({u_image:0,u_color_ramp:1,u_opacity:Q.paint.get("heatmap-opacity")}))(0,C),C.id,b.viewportBuffer,b.quadTriangleIndexBuffer,b.viewportSegments,C.paint,b.transform.zoom)}(m,c))},line:function(m,a,c,g){if(m.renderPass!=="translucent")return;const b=c.paint.get("line-opacity"),C=c.paint.get("line-width");if(b.constantOr(1)===0||C.constantOr(1)===0)return;const I=c.paint.get("line-emissive-strength"),z=c.paint.get("line-occlusion-opacity"),U=c.layout.get("line-elevation-reference")==="sea",K=m.context,G=K.gl,Q=!c.isDraped();if(Q&&m.transform.projection.name==="globe")return;const ne=c.layout.get("line-cross-slope"),le=ne!==void 0,be=ne<1,xe=Q?new lr(m.depthOcclusion?G.GREATER:G.LEQUAL,lr.ReadOnly,m.depthRangeFor3D):m.depthModeForSublayer(0,lr.ReadOnly),Te=m.colorModeForDrapableLayerRenderPass(I),Ee=m.terrain&&m.terrain.renderingToTexture,Oe=Ee?1:i.q.devicePixelRatio,Ve=c.paint.get("line-dasharray"),He=Ve.constantOr(1),qe=c.layout.get("line-cap"),Xe=Ve.constantOr(null),Ke=qe.constantOr(null),Ye=c.paint.get("line-pattern"),rt=Ye.constantOr(1),vt=Ye.constantOr(null),st=c.paint.get("line-opacity").constantOr(1);let it=!rt&&st!==1||m.depthOcclusion&&z>0&&z<1;const zt=c.paint.get("line-gradient"),jt=rt?"linePattern":"line",tn=i.cV(c);let fn;if(Ee&&m.terrain&&m.terrain.clipOrMaskOverlapStencilType()&&(it=!1),z!==0&&m.depthOcclusion){const Et=c.paint._values["line-opacity"];Et&&Et.value&&Et.value.kind==="constant"?fn=Et.value:i.w(`Occlusion opacity for layer ${c.id} is supported only when line-opacity isn't data-driven.`)}if(Q&&(m.forceTerrainMode=!0),!Q&&z!==0&&m.terrain&&!Ee)return void i.w(`Occlusion opacity for layer ${c.id} is supported on terrain only if the layer has line-z-offset enabled.`);const Sn=it&&Q?m.stencilModeFor3D():Ir.disabled;Q&&(tn.push("ELEVATED"),le&&tn.push(be?"CROSS_SLOPE_HORIZONTAL":"CROSS_SLOPE_VERTICAL"),U&&tn.push("ELEVATION_REFERENCE_SEA"));for(const Et of g){const Qt=a.getTile(Et);if(rt&&!Qt.patternsLoaded())continue;const Nt=Qt.getBucket(c);if(!Nt)continue;m.prepareDrawTile();const en=Nt.programConfigurations.get(c.id),rn=m.isTileAffectedByFog(Et),Jt=m.getOrCreateProgram(jt,{config:en,defines:tn,overrideFog:rn,overrideRtt:!Q&&void 0});if(vt&&Qt.imageAtlas){const $n=Qt.imageAtlas.patternPositions[vt.toString()];$n&&en.setConstantPatternPositions($n)}if(!rt&&Xe&&Ke&&Qt.lineAtlas){const $n=Qt.lineAtlas.getDash(Xe,Ke);$n&&en.setConstantPatternPositions($n)}let[In,Wn]=c.paint.get("line-trim-offset");(Ke==="round"||Ke==="square")&&In!==Wn&&(In===0&&(In-=1),Wn===1&&(Wn+=1));const Qn=Ee?Et.projMatrix:null,Bn=rt?i.cW(m,Qt,c,Qn,Oe,[In,Wn]):i.cX(m,Qt,c,Qn,Nt.lineClipsArray.length,Oe,[In,Wn]);if(zt){const $n=Nt.gradients[c.id];let hr=$n.texture;if(c.gradientVersion!==$n.version){let Pr=256;if(c.stepInterpolant){const Vr=a.getSource().maxzoom,_i=Et.canonical.z===Vr?Math.ceil(1<<m.transform.maxZoom-Et.canonical.z):1;Pr=i.ap(i.cY(Nt.maxLineLength/i.ab*1024*_i),256,K.maxTextureSize)}$n.gradient=i.cZ({expression:c.gradientExpression(),evaluationKey:"lineProgress",resolution:Pr,image:$n.gradient||void 0,clips:Nt.lineClipsArray}),$n.texture?$n.texture.update($n.gradient):$n.texture=new i.T(K,$n.gradient,G.RGBA8),$n.version=c.gradientVersion,hr=$n.texture}K.activeTexture.set(G.TEXTURE1),hr.bind(c.stepInterpolant?G.NEAREST:G.LINEAR,G.CLAMP_TO_EDGE)}He&&(K.activeTexture.set(G.TEXTURE0),Qt.lineAtlasTexture&&Qt.lineAtlasTexture.bind(G.LINEAR,G.REPEAT),en.updatePaintBuffers()),rt&&(K.activeTexture.set(G.TEXTURE0),Qt.imageAtlasTexture&&Qt.imageAtlasTexture.bind(G.LINEAR,G.CLAMP_TO_EDGE),en.updatePaintBuffers()),Q&&!U&&m.terrain.setupElevationDraw(Qt,Jt),m.uploadCommonUniforms(K,Jt,Et.toUnwrapped());const nr=$n=>{fn!=null&&(fn.value=st*z),Jt.draw(m,G.TRIANGLES,xe,$n,Te,_r.disabled,Bn,c.id,Nt.layoutVertexBuffer,Nt.indexBuffer,Nt.segments,c.paint,m.transform.zoom,en,[Nt.layoutVertexBuffer2,Nt.patternVertexBuffer,Nt.zOffsetVertexBuffer]),fn!=null&&(fn.value=st)};if(it&&!Q){const $n=m.stencilModeForClipping(Et).ref;$n===0&&Ee&&K.clear({stencil:0});const hr={func:G.EQUAL,mask:255};Bn.u_alpha_discard_threshold=.8,nr(new Ir(hr,$n,255,G.KEEP,G.KEEP,G.INVERT)),Bn.u_alpha_discard_threshold=0,nr(new Ir(hr,$n,255,G.KEEP,G.KEEP,G.KEEP))}else it&&Q&&(Bn.u_alpha_discard_threshold=.001),nr(Q?Sn:m.stencilModeForClipping(Et))}Q&&(m.forceTerrainMode=!1),it&&(m.resetStencilClippingMasks(),Ee&&K.clear({stencil:0})),z===0||m.depthOcclusion||Ee||m.layersWithOcclusionOpacity.push(m.currentLayer)},fill:function(m,a,c,g){const b=c.paint.get("fill-color"),C=c.paint.get("fill-opacity"),I=c.is3D(),z=new lr(m.context.gl.LEQUAL,lr.ReadWrite,m.depthRangeFor3D);if(C.constantOr(1)===0)return;const U=c.paint.get("fill-emissive-strength"),K=m.colorModeForDrapableLayerRenderPass(U),G=c.paint.get("fill-pattern"),Q=m.opaquePassEnabledForLayer()&&!G.constantOr(1)&&b.constantOr(i.bA.transparent).a===1&&C.constantOr(0)===1?"opaque":"translucent";if(m.renderPass===Q){const ne=I?z:m.depthModeForSublayer(1,m.renderPass==="opaque"?lr.ReadWrite:lr.ReadOnly);Bf(m,a,c,g,ne,K,!1)}if(!I&&m.renderPass==="translucent"&&c.paint.get("fill-antialias")){const ne=I?z:m.depthModeForSublayer(c.getPaintProperty("fill-outline-color")?2:0,lr.ReadOnly);Bf(m,a,c,g,ne,K,!0)}},"fill-extrusion":function(m,a,c,g){const b=c.paint.get("fill-extrusion-opacity"),C=m.context,I=C.gl,z=m.terrain,U=z&&z.renderingToTexture;if(b===0)return;const K=m.conflationActive&&m.style.isLayerClipped(c,a.getSource()),G=m.style.order.indexOf(c.fqid);if(K&&function(Q,ne,le,be,xe){for(const Te of be){const Ee=ne.getTile(Te).getBucket(le);Ee&&(Ee.updateReplacement(Te,Q.replacementSource,xe),Ee.uploadCentroid(Q.context))}}(m,a,c,g,G),z||K)for(const Q of g){const ne=a.getTile(Q).getBucket(c);ne&&x_(m.context,a,Q,ne,c,z,K)}if(m.renderPass==="shadow"&&m.shadowRenderer){const Q=m.shadowRenderer;if(z&&b<.65&&c._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof i.a4)return;const ne=Q.getShadowPassDepthMode(),le=Q.getShadowPassColorMode();ta(m,a,c,g,ne,Ir.disabled,le,K)}else if(m.renderPass==="translucent"){const Q=!c.paint.get("fill-extrusion-pattern").constantOr(1),ne=c.paint.get("fill-extrusion-color").constantOr(i.bA.white);if(!U&&ne.a!==0){const le=new lr(m.context.gl.LEQUAL,lr.ReadWrite,m.depthRangeFor3D);b===1&&Q?ta(m,a,c,g,le,Ir.disabled,Br.unblended,K):(ta(m,a,c,g,le,Ir.disabled,Br.disabled,K),ta(m,a,c,g,le,m.stencilModeFor3D(),m.colorModeForRenderPass(),K),m.resetStencilClippingMasks())}if(m.style.enable3dLights()&&Q&&(!z&&m.transform.projection.name!=="globe"||U)){const le=c.paint.get("fill-extrusion-opacity"),be=c.paint.get("fill-extrusion-ambient-occlusion-intensity"),xe=c.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),Te=c.paint.get("fill-extrusion-flood-light-intensity"),Ee=c.paint.get("fill-extrusion-flood-light-color").toRenderColor(c.lut).toArray01().slice(0,3),Oe=be>0&&xe>0,Ve=Te>0,He=(Xe,Ke,Ye)=>(1-Ye)*Xe+Ye*Ke,qe=Xe=>{const Ke=m.depthModeForSublayer(1,lr.ReadOnly,I.LEQUAL,!0),Ye=c.paint.get(Xe?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),rt=He(.1,3,Ye),vt=m._showOverdrawInspector;if(!vt){const st=new Ir({func:I.ALWAYS,mask:255},255,255,I.KEEP,I.KEEP,I.REPLACE),it=new Br([I.ONE,I.ONE,I.ONE,I.ONE],i.bA.transparent,[!1,!1,!1,!0],I.MIN);Za(m,a,c,g,Ke,st,it,_r.disabled,Xe,"sdf",le,be,xe,Te,Ee,rt,K,!1)}{const st=vt?Ir.disabled:new Ir({func:I.EQUAL,mask:255},255,255,I.KEEP,I.DECR,I.DECR),it=vt?m.colorModeForRenderPass():new Br([I.ONE_MINUS_DST_ALPHA,I.DST_ALPHA,I.ONE,I.ONE],i.bA.transparent,[!0,!0,!0,!0]);Za(m,a,c,g,Ke,st,it,_r.disabled,Xe,"color",le,be,xe,Te,Ee,rt,K,!1)}};if(U){const Xe=(Ke,Ye,rt)=>{const vt=m.depthModeForSublayer(1,lr.ReadOnly,I.LEQUAL,!1),st=c.paint.get(Ke?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),it=He(.1,3,st);{const zt=new Br([I.ONE,I.ONE,I.ONE,I.ONE],i.bA.transparent,[!1,!1,!1,!0]);Za(m,a,c,g,vt,Ir.disabled,zt,_r.disabled,Ke,"clear",le,be,xe,Te,Ee,it,K,Ye)}{const zt=new Ir({func:I.ALWAYS,mask:255},255,255,I.KEEP,I.KEEP,I.REPLACE),jt=new Br([I.ONE,I.ONE,I.ONE,I.ONE],i.bA.transparent,[!1,!1,!1,!0],I.MIN);Za(m,a,c,g,vt,zt,jt,_r.disabled,Ke,"sdf",le,be,xe,Te,Ee,it,K,Ye)}{const zt=Ke?I.ZERO:I.ONE_MINUS_DST_ALPHA,jt=new Ir({func:I.EQUAL,mask:255},255,255,I.KEEP,I.DECR,I.DECR),tn=new Br([zt,I.DST_ALPHA,I.ONE_MINUS_DST_ALPHA,I.ZERO],i.bA.transparent,[!0,!0,!0,!0]);Za(m,a,c,g,vt,jt,tn,_r.disabled,Ke,"color",le,be,xe,Te,Ee,it,K,Ye)}{const zt=new Br([I.ONE,I.ONE,I.ONE,Ke?I.ZERO:I.ONE],i.bA.transparent,[!1,!1,!1,!0],Ke?I.FUNC_ADD:I.MAX);Za(m,a,c,g,vt,Ir.disabled,zt,_r.disabled,Ke,"clear",le,be,xe,Te,Ee,it,K,Ye,rt)}};if(Oe||Ve){let Ke;if(m.prepareDrawTile(),z){const Ye=z.drapeBufferSize[0],rt=z.drapeBufferSize[1];Ke=z.framebufferCopyTexture,Ke&&(!Ke||Ke.size[0]===Ye&&Ke.size[1]===rt)||(Ke&&Ke.destroy(),Ke=z.framebufferCopyTexture=new i.T(C,new i.r({width:Ye,height:rt}),I.RGBA8)),Ke.bind(I.LINEAR,I.CLAMP_TO_EDGE),I.copyTexSubImage2D(I.TEXTURE_2D,0,0,0,0,0,Ye,rt)}Oe&&Xe(!0,!1,Ke),Ve&&Xe(!1,!0,Ke)}}else Oe&&qe(!0),Ve&&qe(!1),(Oe||Ve)&&m.resetStencilClippingMasks()}}},hillshade:function(m,a,c,g){if(m.renderPass!=="offscreen"&&m.renderPass!=="translucent"||m.style.disableElevatedTerrain)return;const b=m.context,C=m.terrain&&m.terrain.renderingToTexture,[I,z]=m.renderPass!=="translucent"||C?[{},g]:m.stencilConfigForOverlap(g);for(const U of z){const K=a.getTile(U);if(K.needsHillshadePrepare&&m.renderPass==="offscreen")Cu(m,K,c);else if(m.renderPass==="translucent"){const G=m.depthModeForSublayer(0,lr.ReadOnly),Q=c.paint.get("hillshade-emissive-strength"),ne=m.colorModeForDrapableLayerRenderPass(Q),le=C&&m.terrain?m.terrain.stencilModeForRTTOverlap(U):I[U.overscaledZ];If(m,U,K,c,G,le,ne)}}b.viewport.set([0,0,m.width,m.height]),m.resetStencilClippingMasks()},raster:function(m,a,c,g,b,C){if(m.renderPass!=="translucent"||c.paint.get("raster-opacity")===0)return;const I=m.transform.projection.name==="globe",z=c.paint.get("raster-elevation")!==0,U=z&&I;if(m.renderElevatedRasterBackface&&!U)return;const K=m.context,G=K.gl,Q=a.getSource(),ne=function(Xe,Ke,Ye,rt){const vt=Ke.paint.get("raster-color"),st=Xe.type==="raster-array",it=[],zt=Ke.paint.get("raster-resampling"),jt=Ke.paint.get("raster-color-mix");let tn=Ke.paint.get("raster-color-range");const fn=[jt[0],jt[1],jt[2],0],Sn=jt[3];let Et=zt==="nearest"?rt.NEAREST:rt.LINEAR;if(st&&(it.push("RASTER_ARRAY"),vt||it.push("RASTER_COLOR"),zt==="linear"&&it.push("RASTER_ARRAY_LINEAR"),Et=rt.NEAREST,!tn&&Xe.rasterLayers)){const Qt=Xe.rasterLayers.find(({id:Nt})=>Nt===Ke.sourceLayer);Qt&&Qt.fields&&Qt.fields.range&&(tn=Qt.fields.range)}if(tn=tn||[0,1],vt){it.push("RASTER_COLOR"),Ye.activeTexture.set(rt.TEXTURE2),Ke.updateColorRamp(tn);let Qt=Ke.colorRampTexture;Qt||(Qt=Ke.colorRampTexture=new i.T(Ye,Ke.colorRamp,rt.RGBA8)),Qt.bind(rt.LINEAR,rt.CLAMP_TO_EDGE)}return{mix:fn,range:tn,offset:Sn,defines:it,resampling:Et}}(Q,c,K,G);if(Q instanceof i.aD&&!g.length&&!I)return;const le=c.paint.get("raster-emissive-strength"),be=m.colorModeForDrapableLayerRenderPass(le),xe=m.terrain&&m.terrain.renderingToTexture,Te=!m.options.moving,Ee=c.paint.get("raster-resampling")==="nearest"?G.NEAREST:G.LINEAR;if(Q instanceof i.aD&&!g.length&&(Q.onNorthPole||Q.onSouthPole)){const Xe=z?m.stencilModeFor3D():Ir.disabled;return void Zi(!!Q.onNorthPole,null,m,a,c,le,ne,_r.disabled,Xe)}if(!g.length)return;const[Oe,Ve]=Q instanceof i.aD||xe?[{},g]:m.stencilConfigForOverlap(g),He=Ve[Ve.length-1].overscaledZ;U&&ne.defines.push("PROJECTION_GLOBE_VIEW"),z&&ne.defines.push("RENDER_CUTOFF");const qe=(Xe,Ke,Ye)=>{for(const rt of Xe){const vt=rt.toUnwrapped(),st=a.getTile(rt);if(xe&&(!st||!st.hasData()))continue;K.activeTexture.set(G.TEXTURE0);const it=zg(st,Q,c,ne);if(!it||!it.texture)continue;const{texture:zt,mix:jt,offset:tn,tileSize:fn,buffer:Sn}=it;let Et,Qt;xe?(Et=lr.disabled,Qt=rt.projMatrix):z?(Et=new lr(G.LEQUAL,lr.ReadWrite,m.depthRangeFor3D),Qt=I?Float32Array.from(m.transform.expandedFarZProjMatrix):m.transform.calculateProjMatrix(vt,Te)):(Et=m.depthModeForSublayer(rt.overscaledZ-He,c.paint.get("raster-opacity")===1?lr.ReadWrite:lr.ReadOnly,G.LESS),Qt=m.transform.calculateProjMatrix(vt,Te));const Nt=m.terrain&&xe?m.terrain.stencilModeForRTTOverlap(rt):Oe[rt.overscaledZ],en=C?0:c.paint.get("raster-fade-duration");st.registerFadeDuration(en);const rn=a.findLoadedParent(rt,0),Jt=Df(st,rn,a,m.transform,en);let In,Wn;m.terrain&&m.terrain.prepareDrawTile(),K.activeTexture.set(G.TEXTURE0),zt.bind(Ee,G.CLAMP_TO_EDGE),K.activeTexture.set(G.TEXTURE1),rn?(rn.texture&&rn.texture.bind(Ee,G.CLAMP_TO_EDGE),In=Math.pow(2,rn.tileID.overscaledZ-st.tileID.overscaledZ),Wn=[st.tileID.canonical.x*In%1,st.tileID.canonical.y*In%1]):zt.bind(Ee,G.CLAMP_TO_EDGE),zt.useMipmap&&K.extTextureFilterAnisotropic&&m.transform.pitch>20&&G.texParameterf(G.TEXTURE_2D,K.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,K.extTextureFilterAnisotropicMax);const Qn=m.transform;let Bn;const nr=z?jf(Qn):[0,0,0,0];let $n,hr,Pr,Vr,_i,Yr=0;if(U&&Q instanceof i.aD&&Q.coordinates.length>3)$n=Float32Array.from(i.b6(i.cC(new i.bQ(0,0,0)))),hr=Float32Array.from(Qn.globeMatrix),Pr=Float32Array.from(i.cy(Qn)),Vr=[i.am(Qn.center.lng),i.at(Qn.center.lat)],Bn=Q.elevatedGlobePerspectiveTransform,_i=Q.elevatedGlobeGridMatrix||new Float32Array(9);else if(U){const Nr=i.cz(rt.canonical);Yr=i.cA(Nr.getCenter().lat),$n=Float32Array.from(i.b6(i.cC(rt.canonical))),hr=Float32Array.from(Qn.globeMatrix),Pr=Float32Array.from(i.cy(Qn)),Vr=[i.am(Qn.center.lng),i.at(Qn.center.lat)],Bn=[0,0],_i=Float32Array.from(i.cB(rt.canonical,Nr,Yr,Qn.worldSize/Qn._pixelsPerMercatorPixel))}else Bn=Q instanceof i.aD?Q.perspectiveTransform:[0,0],$n=new Float32Array(16),hr=new Float32Array(9),Pr=new Float32Array(16),Vr=[0,0],_i=new Float32Array(9);const Ti=zf(Qt,$n,hr,Pr,_i,Wn||[0,0],i.a9(m.transform.zoom),Vr,nr,In||1,Jt,c,Bn,z?c.paint.get("raster-elevation"):0,2,jt,tn,ne.range,fn,Sn,le),ni=m.isTileAffectedByFog(rt),xi=m.getOrCreateProgram("raster",{defines:ne.defines,overrideFog:ni});if(m.uploadCommonUniforms(K,xi,vt),Q instanceof i.aD){const Nr=Q.elevatedGlobeVertexBuffer,gi=Q.elevatedGlobeIndexBuffer;if(xe||!I)Q.boundsBuffer&&Q.boundsSegments&&xi.draw(m,G.TRIANGLES,Et,Ir.disabled,be,_r.disabled,Ti,c.id,Q.boundsBuffer,m.quadTriangleIndexBuffer,Q.boundsSegments);else if(Nr&&gi){const fi=Qn.zoom<=i.c3?Q.elevatedGlobeSegments:Q.getSegmentsForLongitude(Qn.center.lng);fi&&xi.draw(m,G.TRIANGLES,Et,Ir.disabled,be,Ke,Ti,c.id,Nr,gi,fi)}}else if(U){Et=new lr(G.LEQUAL,lr.ReadOnly,m.depthRangeFor3D);const Nr=m.globeSharedBuffers;if(Nr){const[gi,fi,oi]=Nr.getGridBuffers(Yr,!1);xi.draw(m,G.TRIANGLES,Et,Ye||Nt,m.colorModeForRenderPass(),Ke,Ti,c.id,gi,fi,oi)}}else{const{tileBoundsBuffer:Nr,tileBoundsIndexBuffer:gi,tileBoundsSegments:fi}=m.getTileBoundsBuffers(st);xi.draw(m,G.TRIANGLES,Et,Nt,be,_r.disabled,Ti,c.id,Nr,gi,fi)}}if(!(Q instanceof i.aD)&&U)for(const rt of Xe){const vt=rt.canonical.y===(1<<rt.canonical.z)-1;rt.canonical.y===0&&Zi(!0,rt,m,a,c,le,ne,Ke,Ye||Ir.disabled),vt&&Zi(!1,rt,m,a,c,le,ne,Ke===_r.frontCW?_r.backCW:_r.frontCW,Ye||Ir.disabled)}};U?qe(Ve,m.renderElevatedRasterBackface?_r.backCW:_r.frontCW,m.stencilModeFor3D()):qe(Ve,_r.disabled,void 0),m.resetStencilClippingMasks()},"raster-particle":function(m,a,c,g,b,C){m.renderPass==="offscreen"&&function(I,z,U,K){if(!K.length)return;const G=I.context,Q=G.gl,ne=z.getSource();if(!(ne instanceof ir))return;const le=Math.ceil(Math.sqrt(U.paint.get("raster-particle-count")));let be=U.particlePositionRGBAImage;if(!be||be.width!==le){const Ve=function(He){const qe=He*He,Xe=new Uint8Array(4*qe),Ke=function(rt){return rt|=0,rt=Math.imul(2747636419^rt,2654435769),rt=Math.imul(rt^rt>>>16,2654435769),((rt=Math.imul(rt^rt>>>16,2654435769))>>>0)/4294967296},Ye=1/1.1;for(let rt=0;rt<qe;rt++){const vt=Ye*(Ke(2*rt+0)+$c),st=Ye*(Ke(2*rt+1)+$c),it=255*vt%1,zt=255*st%1,jt=it,tn=st-zt/255,fn=zt;Xe[4*rt+0]=255*(vt-it/255),Xe[4*rt+1]=255*jt,Xe[4*rt+2]=255*tn,Xe[4*rt+3]=255*fn}return Xe}(le);be=U.particlePositionRGBAImage=new i.r({width:le,height:le},Ve)}let xe=U.particleFramebuffer;xe?xe.width!==le&&(xe.destroy(),xe=U.particleFramebuffer=G.createFramebuffer(le,le,!0,null)):xe=U.particleFramebuffer=G.createFramebuffer(le,le,!0,null);const Te=[];for(const Ve of K){const He=z.getTile(Ve);if(!(He instanceof sr))continue;const qe=C_(He,ne,U);if(!qe)continue;const Xe=[He.tileSize,He.tileSize];let Ke=U.tileFramebuffer;Ke||(Ke=U.tileFramebuffer=G.createFramebuffer(Xe[0],Xe[1],!0,null));let Ye=He.rasterParticleState;Ye||(Ye=He.rasterParticleState=new S_(G,Ve,Xe,be));const rt=Ye.update(U.lastInvalidatedAt);Ye.particleTextureDimension!==le&&Ye.updateParticleTexture(Ve,be);const vt=Ye.targetColorTexture;Ye.targetColorTexture=Ye.backgroundColorTexture,Ye.backgroundColorTexture=vt;const st=Ye.particleTexture0;Ye.particleTexture0=Ye.particleTexture1,Ye.particleTexture1=st,Te.push([Ve,qe,Ye,rt])}if(Te.length===0)return;const Ee=i.q.now(),Oe=U.previousDrawTimestamp?.001*(Ee-U.previousDrawTimestamp):.0167;if(U.previousDrawTimestamp=Ee,U.hasColorMap()){G.activeTexture.set(Q.TEXTURE0+2);let Ve=U.colorRampTexture;Ve||(Ve=U.colorRampTexture=new i.T(G,U.colorRamp,Q.RGBA8)),Ve.bind(Q.LINEAR,Q.CLAMP_TO_EDGE)}G.bindFramebuffer.set(U.tileFramebuffer.framebuffer),function(Ve,He,qe){const Xe=Ve.context,Ke=Xe.gl,Ye=He.tileFramebuffer;Xe.activeTexture.set(Ke.TEXTURE0);const rt={u_texture:0,u_opacity:1.05*(st=He.paint.get("raster-particle-fade-opacity-factor"))/(st+.05)},vt=Ve.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var st;for(const it of qe){const[,,zt,jt]=it;Ye.colorAttachment.set(zt.targetColorTexture.texture),Xe.viewport.set([0,0,Ye.width,Ye.height]),Xe.clear({color:i.bA.transparent}),jt&&(zt.backgroundColorTexture.bind(Ke.NEAREST,Ke.CLAMP_TO_EDGE),vt.draw(Ve,Ke.TRIANGLES,lr.disabled,Ir.disabled,Br.alphaBlended,_r.disabled,rt,He.id,Ve.viewportBuffer,Ve.quadTriangleIndexBuffer,Ve.viewportSegments))}}(I,U,Te),function(Ve,He,qe,Xe){const Ke=Ve.context,Ye=Ke.gl,rt=qe.tileFramebuffer,vt=Ve.transform.projection.name==="globe",st=qe.paint.get("raster-particle-max-speed");for(const it of Xe){const[zt,jt,tn]=it;Ke.activeTexture.set(Ye.TEXTURE0+0),jt.texture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE),rt.colorAttachment.set(tn.targetColorTexture.texture);const fn=Ve.getOrCreateProgram("rasterParticleDraw",{defines:jt.defines,overrideFog:!1});Ke.activeTexture.set(Ye.TEXTURE0+1);const Sn=jt.scalarData?[]:[0,1,2,3].map(Nt=>i.c$[Nt](zt));Sn.push(zt);const Et=zt.canonical.x,Qt=zt.canonical.y;for(const Nt of Sn){const en=He.getTile(vt?Nt.wrapped():Nt);if(!en)continue;const rn=en.rasterParticleState;if(!rn)continue;const Jt=Nt.canonical.x+(1<<Nt.canonical.z)*(Nt.wrap-zt.wrap),In=Nt.canonical.y;rn.particleTexture0.bind(Ye.NEAREST,Ye.CLAMP_TO_EDGE);const Wn=Nf(1,rn.particleTexture0.size[0],[Jt-Et,In-Qt],0,jt.texture.size,2,st,jt.textureOffset,jt.scale,jt.offset);fn.draw(Ve,Ye.POINTS,lr.disabled,Ir.disabled,Br.alphaBlended,_r.disabled,Wn,qe.id,rn.particleIndexBuffer,void 0,rn.particleSegment)}}}(I,z,U,Te),G.bindFramebuffer.set(U.particleFramebuffer.framebuffer),function(Ve,He,qe,Xe){const Ke=Ve.context,Ye=Ke.gl,rt=He.paint.get("raster-particle-max-speed"),vt=Xe*He.paint.get("raster-particle-speed-factor")*.15,st=function(zt){return Math.pow(zt,6)}(.01+1*He.paint.get("raster-particle-reset-rate-factor")),it=He.particleFramebuffer;Ke.viewport.set([0,0,it.width,it.height]);for(const zt of qe){const[,jt,tn]=zt;Ke.activeTexture.set(Ye.TEXTURE0+0),jt.texture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE),Ke.activeTexture.set(Ye.TEXTURE0+1);const fn=tn.particleTexture0;fn.bind(Ye.NEAREST,Ye.CLAMP_TO_EDGE);const Sn=Ig(1,fn.size[0],0,jt.texture.size,rt,vt,st,jt.textureOffset,jt.scale,jt.offset);it.colorAttachment.set(tn.particleTexture1.texture),Ke.clear({color:i.bA.transparent}),Ve.getOrCreateProgram("rasterParticleUpdate",{defines:jt.defines}).draw(Ve,Ye.TRIANGLES,lr.disabled,Ir.disabled,Br.unblended,_r.disabled,Sn,He.id,Ve.viewportBuffer,Ve.quadTriangleIndexBuffer,Ve.viewportSegments)}}(I,U,Te,Oe)}(m,a,c,g),m.renderPass==="translucent"&&(function(I,z,U,K,G){const Q=I.context,ne=Q.gl,le=z.getSource().tileSize,be=5*(1-i.a7(i.bV,i.bV+1,I.transform.zoom))*le+U.paint.get("raster-particle-elevation"),xe=!I.options.moving,Te=I.transform.projection.name==="globe";if(!K.length)return;const[Ee,Oe]=I.stencilConfigForOverlap(K),Ve=[];Te&&Ve.push("PROJECTION_GLOBE_VIEW");const He=I.stencilModeFor3D();for(const qe of Oe){const Xe=qe.toUnwrapped(),Ke=z.getTile(qe);if(!Ke.rasterParticleState)continue;const Ye=Ke.rasterParticleState,rt=100;Ke.registerFadeDuration(rt);const vt=z.findLoadedParent(qe,0),st=Df(Ke,vt,z,I.transform,rt);let it,zt;I.terrain&&I.terrain.prepareDrawTile(),Q.activeTexture.set(ne.TEXTURE0),Ye.targetColorTexture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE),Q.activeTexture.set(ne.TEXTURE1),vt&&vt.rasterParticleState?(vt.rasterParticleState.targetColorTexture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE),it=Math.pow(2,vt.tileID.overscaledZ-Ke.tileID.overscaledZ),zt=[Ke.tileID.canonical.x*it%1,Ke.tileID.canonical.y*it%1]):Ye.targetColorTexture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE);const jt=Te?Float32Array.from(I.transform.expandedFarZProjMatrix):I.transform.calculateProjMatrix(Xe,xe),tn=I.transform,fn=IS(tn),Sn=i.cz(qe.canonical),Et=i.cA(Sn.getCenter().lat);let Qt,Nt,en,rn,Jt;Te?(Qt=Float32Array.from(i.b6(i.cC(qe.canonical))),Nt=Float32Array.from(tn.globeMatrix),en=Float32Array.from(i.cy(tn)),rn=[i.am(tn.center.lng),i.at(tn.center.lat)],Jt=Float32Array.from(i.cB(qe.canonical,Sn,Et,tn.worldSize/tn._pixelsPerMercatorPixel))):(Qt=new Float32Array(16),Nt=new Float32Array(9),en=new Float32Array(16),rn=[0,0],Jt=new Float32Array(9));const In=Lf(jt,Qt,Nt,en,Jt,zt||[0,0],i.a9(I.transform.zoom),rn,fn,it||1,st,be),Wn=I.isTileAffectedByFog(qe),Qn=I.getOrCreateProgram("rasterParticle",{defines:Ve,overrideFog:Wn});if(I.uploadCommonUniforms(Q,Qn,Xe),Te){const Bn=new lr(ne.LEQUAL,lr.ReadOnly,I.depthRangeFor3D),nr=0,$n=I.globeSharedBuffers;if($n){const[hr,Pr,Vr]=$n.getGridBuffers(Et,nr!==0);Qn.draw(I,ne.TRIANGLES,Bn,He,Br.alphaBlended,I.renderElevatedRasterBackface?_r.frontCCW:_r.backCCW,In,U.id,hr,Pr,Vr)}}else{const Bn=I.depthModeForSublayer(0,lr.ReadOnly),nr=Ee[qe.overscaledZ],{tileBoundsBuffer:$n,tileBoundsIndexBuffer:hr,tileBoundsSegments:Pr}=I.getTileBoundsBuffers(Ke);Qn.draw(I,ne.TRIANGLES,Bn,nr,Br.alphaBlended,_r.disabled,In,U.id,$n,hr,Pr)}}I.resetStencilClippingMasks()}(m,a,c,g),m.style.map.triggerRepaint())},background:function(m,a,c,g){const b=c.paint.get("background-color"),C=c.paint.get("background-opacity"),I=c.paint.get("background-emissive-strength"),z=c.paint.get("background-pitch-alignment")==="viewport";if(C===0)return;const U=m.context,K=U.gl,G=m.transform,Q=G.tileSize,ne=c.paint.get("background-pattern");let le;if(ne!==void 0&&(ne===null||(le=m.imageManager.getPattern(ne.toString(),c.scope,m.style.getLut(c.scope)),!le)))return;const be=!ne&&b.a===1&&C===1&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass!==be)return;const xe=Ir.disabled,Te=m.depthModeForSublayer(0,be==="opaque"?lr.ReadWrite:lr.ReadOnly),Ee=m.colorModeForDrapableLayerRenderPass(I),Oe=ne?"backgroundPattern":"background";let Ve,He=g;if(He||(Ve=m.getBackgroundTiles(),He=Object.values(Ve).map(qe=>qe.tileID)),ne&&(U.activeTexture.set(K.TEXTURE0),m.imageManager.bind(m.context,c.scope)),z){const qe=m.getOrCreateProgram(Oe,{overrideFog:!1,overrideRtt:!0}),Xe=new Float32Array(i.a6.mat4.identity([])),Ke=new i.aA(0,0,0,0,0),Ye=ne?oh(Xe,I,C,m,0,c.scope,le,z,{tileID:Ke,tileSize:Q}):kc(Xe,I,C,b.toRenderColor(c.lut));qe.draw(m,K.TRIANGLES,Te,xe,Ee,_r.disabled,Ye,c.id,m.viewportBuffer,m.quadTriangleIndexBuffer,m.viewportSegments)}else for(const qe of He){const Xe=m.isTileAffectedByFog(qe),Ke=m.getOrCreateProgram(Oe,{overrideFog:Xe}),Ye=qe.toUnwrapped(),rt=g?qe.projMatrix:m.transform.calculateProjMatrix(Ye);m.prepareDrawTile();const vt=a?a.getTile(qe):Ve?Ve[qe.key]:new Un(qe,Q,G.zoom,m),st=ne?oh(rt,I,C,m,0,c.scope,le,z,{tileID:qe,tileSize:Q}):kc(rt,I,C,b.toRenderColor(c.lut));m.uploadCommonUniforms(U,Ke,Ye);const{tileBoundsBuffer:it,tileBoundsIndexBuffer:zt,tileBoundsSegments:jt}=m.getTileBoundsBuffers(vt);Ke.draw(m,K.TRIANGLES,Te,xe,Ee,_r.disabled,st,c.id,it,zt,jt)}},sky:function(m,a,c){const g=m._atmosphere?i.a9(m.transform.zoom):1,b=c.paint.get("sky-opacity")*g;if(b===0)return;const C=m.context,I=c.paint.get("sky-type"),z=new lr(C.gl.LEQUAL,lr.ReadOnly,[0,1]),U=m.frameCounter/1e3%1;I==="atmosphere"?m.renderPass==="offscreen"?c.needsSkyboxCapture(m)&&(function(K,G,Q,ne){const le=K.context,be=le.gl;let xe=G.skyboxFbo;if(!xe){xe=G.skyboxFbo=le.createFramebuffer(32,32,!0,null),G.skyboxGeometry=new Fg(le),G.skyboxTexture=le.gl.createTexture(),be.bindTexture(be.TEXTURE_CUBE_MAP,G.skyboxTexture),be.texParameteri(be.TEXTURE_CUBE_MAP,be.TEXTURE_WRAP_S,be.CLAMP_TO_EDGE),be.texParameteri(be.TEXTURE_CUBE_MAP,be.TEXTURE_WRAP_T,be.CLAMP_TO_EDGE),be.texParameteri(be.TEXTURE_CUBE_MAP,be.TEXTURE_MIN_FILTER,be.LINEAR),be.texParameteri(be.TEXTURE_CUBE_MAP,be.TEXTURE_MAG_FILTER,be.LINEAR);for(let Ve=0;Ve<6;++Ve)be.texImage2D(be.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,0,be.RGBA,32,32,0,be.RGBA,be.UNSIGNED_BYTE,null)}le.bindFramebuffer.set(xe.framebuffer),le.viewport.set([0,0,32,32]);const Te=G.getCenter(K,!0),Ee=K.getOrCreateProgram("skyboxCapture"),Oe=new Float64Array(16);i.a6.mat4.identity(Oe),i.a6.mat4.rotateY(Oe,Oe,.5*-Math.PI),Es(K,G,Ee,Oe,Te,0),i.a6.mat4.identity(Oe),i.a6.mat4.rotateY(Oe,Oe,.5*Math.PI),Es(K,G,Ee,Oe,Te,1),i.a6.mat4.identity(Oe),i.a6.mat4.rotateX(Oe,Oe,.5*-Math.PI),Es(K,G,Ee,Oe,Te,2),i.a6.mat4.identity(Oe),i.a6.mat4.rotateX(Oe,Oe,.5*Math.PI),Es(K,G,Ee,Oe,Te,3),i.a6.mat4.identity(Oe),Es(K,G,Ee,Oe,Te,4),i.a6.mat4.identity(Oe),i.a6.mat4.rotateY(Oe,Oe,Math.PI),Es(K,G,Ee,Oe,Te,5),le.viewport.set([0,0,K.width,K.height])}(m,c),c.markSkyboxValid(m)):m.renderPass==="sky"&&function(K,G,Q,ne,le){const be=K.context,xe=be.gl,Te=K.transform,Ee=K.getOrCreateProgram("skybox");be.activeTexture.set(xe.TEXTURE0),xe.bindTexture(xe.TEXTURE_CUBE_MAP,G.skyboxTexture);const Oe=((Ve,He,qe,Xe,Ke)=>({u_matrix:Ve,u_sun_direction:He,u_cubemap:0,u_opacity:Xe,u_temporal_offset:Ke}))(Te.skyboxMatrix,G.getCenter(K,!1),0,ne,le);K.uploadCommonUniforms(be,Ee),Ee.draw(K,xe.TRIANGLES,Q,Ir.disabled,K.colorModeForRenderPass(),_r.backCW,Oe,"skybox",G.skyboxGeometry.vertexBuffer,G.skyboxGeometry.indexBuffer,G.skyboxGeometry.segment)}(m,c,z,b,U):I==="gradient"&&m.renderPass==="sky"&&function(K,G,Q,ne,le){const be=K.context,xe=be.gl,Te=K.transform,Ee=K.getOrCreateProgram("skyboxGradient");G.skyboxGeometry||(G.skyboxGeometry=new Fg(be)),be.activeTexture.set(xe.TEXTURE0);let Oe=G.colorRampTexture;Oe||(Oe=G.colorRampTexture=new i.T(be,G.colorRamp,xe.RGBA8)),Oe.bind(xe.LINEAR,xe.CLAMP_TO_EDGE);const Ve=((He,qe,Xe,Ke,Ye)=>({u_matrix:He,u_color_ramp:0,u_center_direction:qe,u_radius:i.bC(Xe),u_opacity:Ke,u_temporal_offset:Ye}))(Te.skyboxMatrix,G.getCenter(K,!1),G.paint.get("sky-gradient-radius"),ne,le);K.uploadCommonUniforms(be,Ee),Ee.draw(K,xe.TRIANGLES,Q,Ir.disabled,K.colorModeForRenderPass(),_r.backCW,Ve,"skyboxGradient",G.skyboxGeometry.vertexBuffer,G.skyboxGeometry.indexBuffer,G.skyboxGeometry.segment)}(m,c,z,b,U)},debug:function(m,a,c,g,b,C){for(let I=0;I<c.length;I++)if(b){const K=new i.bA(g.r*.8,g.g*.8,g.b*.8,1);Ri(m,a,c[I],g,-1,-1,C),Ri(m,a,c[I],g,-1,1,C),Ri(m,a,c[I],g,1,1,C),Ri(m,a,c[I],g,1,-1,C),Ri(m,a,c[I],K,0,0,C)}else Ri(m,a,c[I],g,0,0,C)},custom:function(m,a,c,g){const b=m.context,C=c.implementation;if(!m.transform.projection.unsupportedLayers||!m.transform.projection.unsupportedLayers.includes("custom")||m.terrain&&(m.terrain.renderingToTexture||m.renderPass==="offscreen")&&c.isDraped(a)){if(m.renderPass==="offscreen"){const I=C.prerender;if(I){if(m.setCustomLayerDefaults(),b.setColorMode(m.colorModeForRenderPass()),m.transform.projection.name==="globe"){const z=m.transform.pointMerc;I.call(C,b.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),i.a9(m.transform.zoom),[z.x,z.y],m.transform.pixelsPerMeterRatio)}else I.call(C,b.gl,m.transform.customLayerMatrix());b.setDirty(),m.setBaseState()}}else if(m.renderPass==="translucent"){if(m.terrain&&m.terrain.renderingToTexture){const z=C.renderToTile;if(z){const U=g[0].canonical,K=new i.a5(U.x+g[0].wrap*(1<<U.z),U.y,U.z);b.setDepthMode(lr.disabled),b.setStencilMode(Ir.disabled),b.setColorMode(m.colorModeForRenderPass()),m.setCustomLayerDefaults(),z.call(C,b.gl,K),b.setDirty(),m.setBaseState()}return}m.setCustomLayerDefaults(),b.setColorMode(m.colorModeForRenderPass()),b.setStencilMode(Ir.disabled);const I=C.renderingMode==="3d"?new lr(m.context.gl.LEQUAL,lr.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,lr.ReadOnly);if(b.setDepthMode(I),m.transform.projection.name==="globe"){const z=m.transform.pointMerc;C.render(b.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),i.a9(m.transform.zoom),[z.x,z.y],m.transform.pixelsPerMeterRatio)}else C.render(b.gl,m.transform.customLayerMatrix());b.setDirty(),m.setBaseState(),b.bindFramebuffer.set(null)}}else i.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(m,a,c,g){if(m.renderPass==="opaque")return;const b=c.paint.get("model-opacity");if(b===0)return;const C=c.paint.get("model-cast-shadows");if(m.renderPass==="shadow"&&(!C||m.terrain&&b<.65&&c._transitionablePaint._values["model-opacity"].value.expression instanceof i.a4))return;const I=m.shadowRenderer,z=c.paint.get("model-receive-shadows");I&&(I.useNormalOffset=!0,z||(I.enabled=!1));const U=()=>{I&&(I.useNormalOffset=!0,z||(I.enabled=!0))},K=a.getSource();if(m.renderPass==="light-beam"&&K.type!=="batched-model")return;if(K.type==="vector"||K.type==="geojson")return function(Ee,Oe,Ve,He,qe){const Xe=Ee.transform;if(Xe.projection.name!=="mercator")return void i.w(`Drawing 3D models for ${Xe.projection.name} projection is not yet implemented`);const Ke=Xe.getFreeCameraOptions().position;if(!Ee.modelManager)return;const Ye=Ee.modelManager;Ve.modelManager=Ye;const rt=Ee.shadowRenderer;if(!Ve._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const vt=Ve._unevaluatedLayout._values["model-id"],st={...Ve.layout.get("model-id").parameters},it=Ee.style.order.indexOf(Ve.fqid);for(const zt of He){const jt=Oe.getTile(zt).getBucket(Ve);if(!jt||jt.projection.name!==Xe.projection.name)continue;const tn=jt.getModelUris();tn&&!jt.modelsRequested&&(Ye.addModelsFromBucket(tn,qe),jt.modelsRequested=!0);const fn=xa(zt,Xe);st.zoom=fn;const Sn=vt.possiblyEvaluate(st);if(T_(Ee,jt,zt),Gs.shadowUniformsInitialized=!1,Gs.useSingleShadowCascade=!!rt&&rt.getMaxCascadeForTile(zt.toUnwrapped())===0,Ee.renderPass==="shadow"&&rt){if(Ee.currentShadowCascade===1&&jt.isInsideFirstShadowMapFrustum)continue;const Nt=Xe.calculatePosMatrix(zt.toUnwrapped(),Xe.worldSize);if(Gs.tileMatrix.set(Nt),Gs.shadowTileMatrix=Float32Array.from(rt.calculateShadowPassMatrixFromMatrix(Nt)),Gs.aabb.min.fill(0),Gs.aabb.max[0]=Gs.aabb.max[1]=i.ab,Gs.aabb.max[2]=0,Oi(jt,Gs,Ee,Ve.scope))continue}const Et=1<<zt.canonical.z,Qt=[((Ke.x-zt.wrap)*Et-zt.canonical.x)*i.ab,(Ke.y*Et-zt.canonical.y)*i.ab,Ke.z*Et*i.ab];Ee.conflationActive&&Object.keys(jt.instancesPerModel).length>0&&Ee.style.isLayerClipped(Ve,Oe.getSource())&&jt.updateReplacement(zt,Ee.replacementSource,it,qe)&&(jt.uploaded=!1,jt.upload(Ee.context));for(let Nt in jt.instancesPerModel){const en=jt.instancesPerModel[Nt];en.features.length>0&&(Nt=Sn.evaluate(en.features[0].feature,{}));const rn=Ye.getModel(Nt,qe);if(rn&&rn.uploaded)for(const Jt of rn.nodes)I_(Ee,Ve,Jt,en,Qt,zt,Gs)}}}(m,a,c,g,K.type==="vector"?c.scope:""),void U();if(!K.loaded())return;if(K.type==="batched-model")return function(Ee,Oe,Ve,He){Ve.resetLayerRenderingStats(Ee);const qe=Ee.context,Xe=Ee.transform,Ke=Ee.style.fog,Ye=Ee.shadowRenderer;if(Xe.projection.name!=="mercator")return void i.w(`Drawing 3D landmark models for ${Xe.projection.name} projection is not yet implemented`);const rt=Ee.transform.getFreeCameraOptions().position,vt=i.a6.vec3.scale([],[rt.x,rt.y,rt.z],Ee.transform.worldSize),st=i.a6.vec3.negate([],vt),it=i.a6.mat4.identity([]),zt=i.de(Xe.center.lat,Xe.zoom),jt=i.a6.mat4.fromScaling([],[1,1,1/zt]);i.a6.mat4.translate(it,it,st);const tn=Ve.paint.get("model-opacity"),fn=new lr(qe.gl.LEQUAL,lr.ReadWrite,Ee.depthRangeFor3D),Sn=new lr(qe.gl.LEQUAL,lr.ReadOnly,Ee.depthRangeFor3D),Et=new i.ca([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),Qt=Ee.renderPass==="shadow",Nt=Qt&&Ye?Ye.getCurrentCascadeFrustum():Xe.getFrustum(Xe.scaleZoom(Xe.worldSize)),en=Ve.paint.get("model-front-cutoff"),rn=en[2]<1,Jt=ml(Ee,Ve.paint.get("model-cutoff-fade-range")),In=Ve.getLayerRenderingStats();(function(Wn,Qn,Bn,nr){const $n=Wn.terrain?Wn.terrain.exaggeration():0,hr=Wn.transform.zoom;for(const Pr of nr){const Vr=Qn.getTile(Pr).getBucket(Bn);Vr&&(Wn.conflationActive&&Vr.updateReplacement(Pr,Wn.replacementSource),Vr.evaluateScale(Wn,Bn),Wn.terrain&&$n>0&&Vr.elevationUpdate(Wn.terrain,$n,Pr,Bn.source),Vr.needsReEvaluation(Wn,hr,Bn)&&Vr.evaluate(Bn))}})(Ee,Oe,Ve,He),function(){let Wn,Qn,Bn;rn?(Wn=He.length-1,Qn=-1,Bn=-1):(Wn=0,Qn=He.length,Bn=1);const nr=new Float64Array(16),$n=i.a6.vec3.create(),hr=new i.P(0,0);for(let Pr=Wn;Pr!==Qn;Pr+=Bn){const Vr=He[Pr],_i=Oe.getTile(Vr).getBucket(Ve);if(!_i||!_i.uploaded)continue;let Yr=!1;Ye&&(Yr=Ye.getMaxCascadeForTile(Vr.toUnwrapped())===0);const Ti=Xe.calculatePosMatrix(Vr.toUnwrapped(),Xe.worldSize),ni=_i.modelTraits;!Qt&&rn&&(i.a6.mat4.invert(nr,Ti),i.a6.vec3.transformMat4($n,vt,nr),hr.x=$n[0],hr.y=$n[1]);const xi=[];for(const Nr of _i.getNodesInfo()){if(Nr.hiddenByReplacement||!Nr.node.meshes)continue;const gi=Nr.node;let fi=0;Ee.terrain&&gi.elevation&&(fi=gi.elevation*Ee.terrain.exaggeration());const oi=(()=>{const oo=Nr.aabb;return Et.min=[...oo.min],Et.max=[...oo.max],Et.min[2]+=fi,Et.max[2]+=fi,i.a6.vec3.transformMat4(Et.min,Et.min,Ti),i.a6.vec3.transformMat4(Et.max,Et.max,Ti),Et})(),zi=Nr.evaluatedScale;if(zi[0]<=1&&zi[1]<=1&&zi[2]<=1&&oi.intersects(Nt)===0)continue;if(!Qt&&rn){const oo=.16666666666666666;Nr.cameraCollisionOpacity=vt[0]>oi.min[0]&&vt[0]<oi.max[0]&&vt[1]>oi.min[1]&&vt[1]<oi.max[1]&&vt[2]*zt<oi.max[2]&&gi.footprint&&i.bv(hr,gi.footprint)?Math.max(Nr.cameraCollisionOpacity-oo,0):Math.min(1,Nr.cameraCollisionOpacity+oo)}const Co=[...Ti],Ja=gi.anchor?gi.anchor[0]:0,ls=gi.anchor?gi.anchor[1]:0;i.a6.mat4.translate(Co,Co,[Ja*(zi[0]-1),ls*(zi[1]-1),fi]),i.a6.vec3.exactEquals(zi,i.dh)||i.a6.mat4.scale(Co,Co,zi);const Ro=i.a6.mat4.multiply([],Co,gi.matrix),Kr=i.a6.mat4.multiply([],Xe.expandedFarZProjMatrix,Ro),Wr=i.a6.mat4.multiply([],Xe.expandedFarZProjMatrix,Co),ri=i.a6.vec4.transformMat4([],[Ja,ls,fi,1],Kr)[2];gi.hidden=!1;let wi=tn;Qt||(rn&&(wi*=Nr.cameraCollisionOpacity,wi*=M_(Co,Xe,Nr.aabb,en)),wi*=Qr(Jt,ri)),wi!==0?xi.push({nodeInfo:Nr,depth:ri,opacity:wi,wvpForNode:Kr,wvpForTile:Wr,nodeModelMatrix:Ro,tileModelMatrix:Co}):gi.hidden=!0}Qt||xi.sort((Nr,gi)=>!rn||Nr.opacity===1&&gi.opacity===1?Nr.depth<gi.depth?-1:1:Nr.opacity===1?-1:gi.opacity===1?1:Nr.depth>gi.depth?-1:1);for(const Nr of xi){const gi=Nr.nodeInfo,fi=gi.node;let oi=i.a6.mat4.multiply([],jt,Nr.tileModelMatrix);i.a6.mat4.multiply(oi,it,oi);const zi=i.a6.mat4.invert([],oi);i.a6.mat4.transpose(zi,zi),i.a6.mat4.scale(zi,zi,uh),oi=i.a6.mat4.multiply(oi,oi,fi.matrix);const Co=Ee.renderPass==="light-beam",Ja=ni&i.dj.HasMapboxMeshFeatures,ls=Ja?0:gi.evaluatedRMEA[0][2];for(let Ro=0;Ro<fi.meshes.length;++Ro){const Kr=fi.meshes[Ro],Wr=Ro===fi.lightMeshIndex;let ri=Nr.wvpForNode;if(Wr){if(!Co&&!Ee.terrain&&Ee.shadowRenderer){Ee.currentLayer<Ee.firstLightBeamLayer&&(Ee.firstLightBeamLayer=Ee.currentLayer);continue}ri=Nr.wvpForTile}else if(Co)continue;const wi={defines:[]},oo=[];if(!Qt&&Ye&&(Ye.useNormalOffset=!!Kr.normalBuffer),Uf(wi.defines,oo,Kr,Ee,Ve.lut),Ja||wi.defines.push("DIFFUSE_SHADED"),Yr&&wi.defines.push("SHADOWS_SINGLE_CASCADE"),In&&(Qt?In.numRenderedVerticesInShadowPass+=Kr.vertexArray.length:In.numRenderedVerticesInTransparentPass+=Kr.vertexArray.length),Qt){Wf(Kr,Nr.nodeModelMatrix,Ee,Ve);continue}let Li=null;if(Ke){const Is=jg(Nr.nodeModelMatrix,Ee.transform);if(Li=new Float32Array(Is),Xe.projection.name!=="globe"){const ka=Kr.aabb.min,El=Kr.aabb.max,[us,si]=Ke.getOpacityForBounds(Is,ka[0],ka[1],El[0],El[1]);wi.overrideFog=us>=Mt||si>=Mt}}const jo=Kr.material;let Xs;jo.occlusionTexture&&jo.occlusionTexture.offsetScale&&(Xs=jo.occlusionTexture.offsetScale,wi.defines.push("OCCLUSION_TEXTURE_TRANSFORM"));const Da=Ee.getOrCreateProgram("model",wi);!Qt&&Ye&&Ye.setupShadowsFromMatrix(Nr.tileModelMatrix,Da,Ye.useNormalOffset),Ee.uploadCommonUniforms(qe,Da,null,Li);const $a=jo.pbrMetallicRoughness;$a.metallicFactor=.9,$a.roughnessFactor=.5;const cs=Ff(new Float32Array(ri),new Float32Array(oi),new Float32Array(zi),new Float32Array(fi.matrix),Ee,Nr.opacity,$a.baseColorFactor.toRenderColor(null),jo.emissiveFactor,$a.metallicFactor,$a.roughnessFactor,jo,ls,Ve,[0,0,0],Xs);!Wr&&(gi.hasTranslucentParts||Nr.opacity<1)&&Da.draw(Ee,qe.gl.TRIANGLES,fn,Ir.disabled,Br.disabled,_r.backCCW,cs,Ve.id,Kr.vertexBuffer,Kr.indexBuffer,Kr.segments,Ve.paint,Ee.transform.zoom,void 0,oo),Da.draw(Ee,qe.gl.TRIANGLES,Wr?Sn:fn,Ir.disabled,Wr||Nr.opacity<1||gi.hasTranslucentParts?Br.alphaBlended:Br.unblended,_r.backCCW,cs,Ve.id,Kr.vertexBuffer,Kr.indexBuffer,Kr.segments,Ve.paint,Ee.transform.zoom,void 0,oo)}}}}()}(m,a,c,g),void U();if(K.type!=="model")return;const G=K.getModels(),Q=[],ne=m.transform.getFreeCameraOptions().position,le=i.a6.vec3.scale([],[ne.x,ne.y,ne.z],m.transform.worldSize);i.a6.vec3.negate(le,le);const be=[],xe=[];let Te=0;for(const Ee of G){const Oe=c.paint.get("model-rotation").constantOr(null),Ve=c.paint.get("model-scale").constantOr(null),He=c.paint.get("model-translation").constantOr(null);Ee.computeModelMatrix(m,Oe,Ve,He,!0,!0,!1);const qe=i.a6.mat4.identity([]),Xe=i.de(Ee.position.lat,m.transform.zoom),Ke=i.a6.mat4.fromScaling([],[1,1,1/Xe]);i.a6.mat4.translate(qe,qe,le),Q.push({zScaleMatrix:Ke,negCameraPosMatrix:qe});for(const Ye of Ee.nodes)ch(m.transform,Ye,Ee.matrix,m.transform.expandedFarZProjMatrix,Te,be,xe);Te++}if(be.sort((Ee,Oe)=>Oe.depth-Ee.depth),m.renderPass!=="shadow"){if(b===1)for(const Ee of xe)Nc(Ee,m,c,Q[Ee.modelIndex],Ir.disabled,m.colorModeForRenderPass());else{for(const Ee of xe)Nc(Ee,m,c,Q[Ee.modelIndex],Ir.disabled,Br.disabled);for(const Ee of xe)Nc(Ee,m,c,Q[Ee.modelIndex],m.stencilModeFor3D(),m.colorModeForRenderPass());m.resetStencilClippingMasks()}for(const Ee of be)Nc(Ee,m,c,Q[Ee.modelIndex],Ir.disabled,m.colorModeForRenderPass());U()}else{for(const Ee of xe)Wf(Ee.mesh,Ee.nodeModelMatrix,m,c);for(const Ee of be)Wf(Ee.mesh,Ee.nodeModelMatrix,m,c);U()}}},_l={model:function(m,a,c){const g=a.getSource();if(!g.loaded())return;if(g.type==="vector"||g.type==="geojson")return void(c.modelManager&&c.modelManager.upload(c,g.type==="vector"?m.scope:""));if(g.type==="batched-model"||g.type!=="model")return;const b=g.getModels();for(const C of b)C.upload(c.context)},raster:function(m,a,c){const g=a.getSource();if(!(g instanceof ir&&g.loaded()))return;const b=m.sourceLayer||g.rasterLayerIds&&g.rasterLayerIds[0];if(!b)return;const C=m.paint.get("raster-array-band")||g.getInitialBand(b);if(C==null)return;const I=a.getIds().map(z=>a.getTileByID(z));for(const z of I)z.updateNeeded(b,C)&&g.prepareTile(z,b,C)},"raster-particle":function(m,a,c){const g=a.getSource();if(!(g instanceof ir&&g.loaded()))return;const b=m.sourceLayer||g.rasterLayerIds&&g.rasterLayerIds[0];if(!b)return;const C=m.paint.get("raster-particle-array-band")||g.getInitialBand(b);if(C==null)return;const I=a.getIds().map(z=>a.getTileByID(z));for(const z of I)z.updateNeeded(b,C)&&g.prepareTile(z,b,C)}};class ac{constructor(a,c,g,b,C){this.context=new ES(a,c),this.transform=g,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=C,this._timeStamp=i.q.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={forceEnablePrecipitation:!1,showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const I=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","raster-particle","hillshade","model","background","sky"];for(const U of I)this._debugParams.enabledLayers[U]=!0;C.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),C.registerParameter(this._debugParams,["Precipitation"],"forceEnablePrecipitation"),C.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),C.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),C.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),C.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const U of I)C.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],U);this.occlusionParams=new $u(C),this.setup(),this.numSublayers=mi.maxUnderzooming+mi.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new i.dl,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new Wy(this),this._wireframeDebugCache=new Gf,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const z=new i.r({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new i.T(this.context,z,a.RGBA8),this._clippingActiveLastFrame=!1,this.scaleFactor=b}updateTerrain(a,c){const g=!!a&&!!a.terrain&&this.transform.projection.supportsTerrain;if(!(g||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new _g(this,a));const b=this._terrain;this.transform.elevation=g?b:null,b.update(a,this.transform,c),this.transform.elevation&&!b.enabled&&(this.transform.elevation=null)}_updateFog(a){const c=a.fog;if(!c||this.transform.projection.name==="globe"||c.getOpacity(this.transform.pitch)<1||c.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[g,b]=c.getFovAdjustedRange(this.transform._fov);if(g>b)return void(this.transform.fogCullDistSq=null);const C=g+.78*(b-g);this.transform.fogCullDistSq=C*C}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(a){a&&!this._terrain&&(this._terrain=new _g(this,this.style)),this._forceTerrainMode=a}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(a,c){if(this.width=a*i.q.devicePixelRatio,this.height=c*i.q.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style.order)this.style._mergedLayers[g].resize()}setup(){const a=this.context,c=new i.a$;c.emplaceBack(0,0),c.emplaceBack(i.ab,0),c.emplaceBack(0,i.ab),c.emplaceBack(i.ab,i.ab),this.tileExtentBuffer=a.createVertexBuffer(c,i.b1.members),this.tileExtentSegments=i.b2.simpleSegment(0,0,4,2);const g=new i.a$;g.emplaceBack(0,0),g.emplaceBack(i.ab,0),g.emplaceBack(0,i.ab),g.emplaceBack(i.ab,i.ab),this.debugBuffer=a.createVertexBuffer(g,i.b1.members),this.debugSegments=i.b2.simpleSegment(0,0,4,5);const b=new i.a$;b.emplaceBack(-1,-1),b.emplaceBack(1,-1),b.emplaceBack(-1,1),b.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(b,i.b1.members),this.viewportSegments=i.b2.simpleSegment(0,0,4,2);const C=new i.aO;C.emplaceBack(0,0,0,0),C.emplaceBack(i.ab,0,i.ab,0),C.emplaceBack(0,i.ab,0,i.ab),C.emplaceBack(i.ab,i.ab,i.ab,i.ab),this.mercatorBoundsBuffer=a.createVertexBuffer(C,i.b4.members),this.mercatorBoundsSegments=i.b2.simpleSegment(0,0,4,2);const I=new i.aP;I.emplaceBack(0,1,2),I.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(I);const z=new i.b0;for(const K of[0,1,3,2,0])z.emplaceBack(K);this.debugIndexBuffer=a.createIndexBuffer(z),this.emptyTexture=new i.T(a,new i.r({width:1,height:1},Uint8Array.of(0,0,0,0)),a.gl.RGBA8),this.identityMat=i.a6.mat4.create();const U=this.context.gl;this.stencilClearMode=new Ir({func:U.ALWAYS,mask:0},0,255,U.ZERO,U.ZERO,U.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(a){return a._makeTileBoundsBuffers(this.context,this.transform.projection),a._tileBoundsBuffer?{tileBoundsBuffer:a._tileBoundsBuffer,tileBoundsIndexBuffer:a._tileBoundsIndexBuffer,tileBoundsSegments:a._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const a=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,a.TRIANGLES,lr.disabled,this.stencilClearMode,Br.disabled,_r.disabled,nh(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(a,c,g){if(!c||this.currentStencilSource===c.id||!a.isTileClipped()||!g||g.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let z=!1;for(const U of g)if(this._tileClippingMaskIDs[U.key]===void 0){z=!0;break}if(!z)return}this.currentStencilSource=c.id;const b=this.context,C=b.gl;this.nextStencilID+g.length>256&&this.clearStencil(),b.setColorMode(Br.disabled),b.setDepthMode(lr.disabled);const I=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const z of g){const U=c.getTile(z),K=this._tileClippingMaskIDs[z.key]=this.nextStencilID++,{tileBoundsBuffer:G,tileBoundsIndexBuffer:Q,tileBoundsSegments:ne}=this.getTileBoundsBuffers(U);I.draw(this,C.TRIANGLES,lr.disabled,new Ir({func:C.ALWAYS,mask:0},K,255,C.KEEP,C.KEEP,C.REPLACE),Br.disabled,_r.disabled,nh(z.projMatrix),"$clipping",G,Q,ne)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const a=this.nextStencilID++,c=this.context.gl;return new Ir({func:c.NOTEQUAL,mask:255},a,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(a){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(a);const c=this.context.gl;return new Ir({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(a){const c=this.context.gl,g=a.sort((I,z)=>z.overscaledZ-I.overscaledZ),b=g[g.length-1].overscaledZ,C=g[0].overscaledZ-b+1;if(C>1){this.currentStencilSource=void 0,this.nextStencilID+C>256&&this.clearStencil();const I={};for(let z=0;z<C;z++)I[z+b]=new Ir({func:c.GEQUAL,mask:255},z+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=C,[I,g]}return[{[b]:Ir.disabled},g]}colorModeForRenderPass(){const a=this.context.gl;return this._showOverdrawInspector?new Br([a.CONSTANT_COLOR,a.ONE,a.CONSTANT_COLOR,a.ONE],new i.bA(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Br.unblended:Br.alphaBlended}colorModeForDrapableLayerRenderPass(a){const c=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new Br([c.ONE,c.ONE_MINUS_SRC_ALPHA,c.CONSTANT_ALPHA,c.ONE_MINUS_SRC_ALPHA],new i.bA(0,0,0,a===void 0?0:a),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(a,c,g,b=!1){if(this.depthOcclusion)return new lr(this.context.gl.GREATER,lr.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!b)return lr.disabled;const C=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new lr(g||this.context.gl.LEQUAL,c,[C,C])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const a=this.context.gl,c=Math.ceil(this.width),g=Math.ceil(this.height),b=this.context.bindFramebuffer.get(),C=a.getParameter(a.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===c&&this.depthFBO.height===g||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),c!==0&&g!==0&&(this.depthFBO=new y_(this.context,c,g,!1,"texture"),this.depthTexture=new i.T(this.context,{width:c,height:g,data:null},a.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(b),a.bindTexture(a.TEXTURE_2D,C),this.depthFBO&&(a.bindFramebuffer(a.READ_FRAMEBUFFER,null),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),a.blitFramebuffer(0,0,c,g,0,0,c,g,a.DEPTH_BUFFER_BIT,a.NEAREST),a.bindFramebuffer(a.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((a,c)=>a+c/this._fpsHistory.length,0))}render(a,c){const g=i.q.now();this._dt=g-this._timeStamp,this._timeStamp=g,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=a.map.repaint,this.style=a,this.options=c;const b=this.style._mergedLayers,C=this.style._getOrder(!(!this.terrain||!this.terrain.enabled)).filter(st=>{const it=b[st];return!(it.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[it.type]});let I=!1,z=!1;for(const st of C){const it=b[st];it.type==="circle"&&(I=!0),it.type==="symbol"&&(it.hasInitialOcclusionOpacityProperties?z=!0:I=!0)}const U=C.map(st=>b[st]),K=this.style._mergedSourceCaches;this.imageManager=a.imageManager,this.modelManager=a.modelManager,this.symbolFadeChange=a.placement.symbolFadeChange(i.q.now()),this.imageManager.beginFrame();let G=0,Q=!1;for(const st in K){const it=K[st];it.used&&(it.prepare(this.context),it.getSource().usedInConflation&&++G)}let ne=!1;for(const st of U)st.isHidden(this.transform.zoom)||(st.type==="clip"&&(ne=!0),this.prepareLayer(st));const le={},be={},xe={},Te={},Ee={};for(const st in K){const it=K[st];le[st]=it.getVisibleCoordinates(),be[st]=le[st].slice().reverse(),xe[st]=it.getVisibleCoordinates(!0).reverse(),Te[st]=it.getShadowCasterCoordinates(),Ee[st]=it.sortCoordinatesByDistance(le[st])}const Oe=st=>{const it=this.style.getLayerSourceCache(st);return it&&it.used?it.getSource():null};if(G||ne||this._clippingActiveLastFrame){const st=[],it=[];let zt=0;for(const jt of U)this.isSourceForClippingOrConflation(jt,Oe(jt))&&(st.push(jt),it.push(zt)),zt++;if(st&&(ne||st.length>1)||this._clippingActiveLastFrame){ne=!1;const jt=[];for(let tn=0;tn<st.length;tn++){const fn=st[tn],Sn=it[tn],Et=this.style.getLayerSourceCache(fn);if(!Et||!Et.used||!Et.getSource().usedInConflation&&fn.type!=="clip")continue;let Qt=i.dn,Nt=i.bt.None;const en=[];let rn=!0;if(fn.type==="clip"){Qt=Sn;for(const Jt of fn.layout.get("clip-layer-types"))Nt|=Jt==="model"?i.bt.Model:Jt==="symbol"?i.bt.Symbol:i.bt.FillExtrusion;for(const Jt of fn.layout.get("clip-layer-scope"))en.push(Jt);fn.isHidden(this.transform.zoom)?rn=!1:ne=!0}rn&&jt.push({layer:fn.fqid,cache:Et,order:Qt,clipMask:Nt,clipScope:en})}this.replacementSource.setSources(jt),Q=!0}}this._clippingActiveLastFrame=ne,Q||this.replacementSource.clear(),this.conflationActive=Q,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let st=0;st<U.length;st++){const it=U[st],zt=it.cutoffRange();if(this.longestCutoffRange=Math.max(zt,this.longestCutoffRange),zt>0){const jt=Oe(it);jt&&(this.minCutoffZoom=Math.max(jt.minzoom,this.minCutoffZoom)),it.minzoom&&(this.minCutoffZoom=Math.max(it.minzoom,this.minCutoffZoom))}it.is3D()&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=st),this._lastOcclusionLayer=st)}const Ve=this.style&&this.style.fog;Ve?(this._fogVisible=Ve.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=Ve.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(xe),this.opaquePassCutoff=0);const He=this._shadowRenderer;if(He){He.updateShadowParameters(this.transform,this.style.directionalLight);for(const st in K)for(const it of le[st]){let zt={min:0,max:0};this.terrain&&(zt=this.terrain.getMinMaxForTile(it)||zt),He.addShadowReceiver(it.toUnwrapped(),zt.min,zt.max)}}if(this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new i.dm(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new Bg(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),!mt.has(this.context.gl))return;this.renderPass="offscreen";for(const st of U){const it=a.getLayerSourceCache(st);if(!st.hasOffscreenPass()||st.isHidden(this.transform.zoom))continue;const zt=it?be[it.id]:void 0;(st.type==="custom"||st.type==="raster"||st.type==="raster-particle"||st.isSky()||zt&&zt.length)&&this.renderLayer(this,it,st,zt)}this.depthRangeFor3D=[0,1-(U.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,Te)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const qe=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),Xe=(()=>{if(c.showOverdrawInspector)return i.bA.black;const st=this.style.fog;if(st&&this.transform.projection.supportsFog){const it=this.style.getLut(st.scope);if(!qe){const zt=st.properties.get("color").toRenderColor(it).toArray01();return new i.bA(...zt)}if(qe){const zt=st.properties.get("space-color").toRenderColor(it).toArray01();return new i.bA(...zt)}}return i.bA.transparent})();if(this.context.clear({color:Xe,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&qe&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=C.length-1;this.currentLayer>=0;this.currentLayer--){const st=U[this.currentLayer],it=a.getLayerSourceCache(st);if(st.isSky())continue;const zt=it?(st.is3D()?Ee:be)[it.id]:void 0;this._renderTileClippingMasks(st,it,zt),this.renderLayer(this,it,st,zt)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&qe&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||i.a9(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<C.length;this.currentLayer++){const st=U[this.currentLayer],it=a.getLayerSourceCache(st);st.isSky()&&this.renderLayer(this,it,st,it?be[it.id]:void 0)}function Ke(st,it){let zt;return it&&(zt=(st.type==="symbol"?xe:st.is3D()?Ee:be)[it.id]),zt}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<C.length;){const st=U[this.currentLayer];if(st.type==="raster"||st.type==="raster-particle"){const it=a.getLayerSourceCache(st);this.renderLayer(this,it,st,Ke(st,it))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let Ye=0;He&&(Ye=He.getShadowCastingLayerCount());let rt=!1,vt=-1;for(let st=0;st<C.length;++st){const it=U[st];it.isHidden(this.transform.zoom)||it.is3D()&&(vt=st)}for(z&&vt===-1&&(I=!0);this.currentLayer<C.length;){const st=U[this.currentLayer],it=a.getLayerSourceCache(st);if(st.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(st)){if(st.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(I&&!rt&&this.terrain&&!this.transform.isOrthographic&&(rt=!0,this.blitDepth()),z&&vt!==-1&&this.currentLayer===vt+1&&!this.transform.isOrthographic&&this.blitDepth(),st.is3D()||this.terrain||this._renderTileClippingMasks(st,it,it?le[it.id]:void 0),this.renderLayer(this,it,st,Ke(st,it)),!this.terrain&&He&&Ye>0&&st.hasShadowPass()&&--Ye==0&&(He.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const zt=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=zt;this.currentLayer++){const jt=U[this.currentLayer];if(!jt.hasLightBeamPass())continue;const tn=a.getLayerSourceCache(jt);this.renderLayer(this,tn,jt,tn?be[tn.id]:void 0)}this.currentLayer=zt,this.renderPass="translucent"}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const zt=this.currentLayer;this.depthOcclusion=!0;for(const jt of this.layersWithOcclusionOpacity){this.currentLayer=jt;const tn=U[this.currentLayer],fn=a.getLayerSourceCache(tn),Sn=fn?be[fn.id]:void 0;tn.is3D()||this.terrain||this._renderTileClippingMasks(tn,fn,fn?le[fn.id]:void 0),this.renderLayer(this,fn,tn,Sn)}this.depthOcclusion=!1,this.currentLayer=zt,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let st=null;U.forEach(it=>{const zt=a.getLayerSourceCache(it);zt&&!it.isHidden(this.transform.zoom)&&zt.getVisibleCoordinates().length&&(!st||st.getSource().maxzoom<zt.getSource().maxzoom)&&(st=zt)}),st&&this.options.showTileBoundaries&&dh.debug(this,st,st.getVisibleCoordinates(),i.bA.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&dh.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new i.bA(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(st){const it=st.transform.padding;Ot(st,st.transform.height-(it.top||0),3,Ou),Ot(st,it.bottom||0,3,Au),Lg(st,it.left||0,3,mn),Lg(st,st.transform.width-(it.right||0),3,Yn);const zt=st.transform.centerPoint;(function(jt,tn,fn,Sn){Lc(jt,tn-1,fn-10,2,20,Sn),Lc(jt,tn-10,fn-1,20,2,Sn)})(st,zt.x,st.transform.height-zt.y,Du)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),Q||(this.conflationActive=!1)}prepareLayer(a){this.gpuTimingStart(a);const{unsupportedLayers:c}=this.transform.projection,g=!c||!c.includes(a.type);if(_l[a.type]&&(g||this.terrain&&a.type==="custom")){const b=this.style.getLayerSourceCache(a);_l[a.type](a,b,this)}this.gpuTimingEnd()}renderLayer(a,c,g,b){g.isHidden(this.transform.zoom)||(g.type==="background"||g.type==="sky"||g.type==="custom"||g.type==="model"||g.type==="raster"||g.type==="raster-particle"||b&&b.length)&&(this.id=g.id,this.gpuTimingStart(g),a.transform.projection.unsupportedLayers&&a.transform.projection.unsupportedLayers.includes(g.type)&&(!a.terrain||g.type!=="custom")||g.type==="clip"||dh[g.type](a,c,g,b,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(a){if(!this.options.gpuTiming)return;const c=this.context.extTimerQuery,g=this.context.gl;let b=this.gpuTimers[a.id];b||(b=this.gpuTimers[a.id]={calls:0,cpuTime:0,query:g.createQuery()}),b.calls++,g.beginQuery(c.TIME_ELAPSED_EXT,b.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const a=this.context.extTimerQuery,c=this.context.gl,g=c.createQuery();this.deferredRenderGpuTimeQueries.push(g),c.beginQuery(a.TIME_ELAPSED_EXT,g)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const a=this.gpuTimers;return this.gpuTimers={},a}collectDeferredRenderGpuQueries(){const a=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],a}queryGpuTimers(a){const c={};for(const g in a){const b=a[g],C=this.context.extTimerQuery,I=C.getQueryParameter(b.query,this.context.gl.QUERY_RESULT)/1e6;C.deleteQueryEXT(b.query),c[g]=I}return c}queryGpuTimeDeferredRender(a){if(!this.options.gpuTimingDeferredRender)return 0;const c=this.context.gl;let g=0;for(const b of a)g+=c.getQueryParameter(b,c.QUERY_RESULT)/1e6,c.deleteQuery(b);return g}translatePosMatrix(a,c,g,b,C){if(!g[0]&&!g[1])return a;const I=C?b==="map"?this.transform.angle:0:b==="viewport"?-this.transform.angle:0;if(I){const K=Math.sin(I),G=Math.cos(I);g=[g[0]*G-g[1]*K,g[0]*K+g[1]*G]}const z=[C?g[0]:i.ak(c,g[0],this.transform.zoom),C?g[1]:i.ak(c,g[1],this.transform.zoom),0],U=new Float32Array(16);return i.a6.mat4.translate(U,a,z),U}saveTileTexture(a){const c=a.size[0],g=this._tileTextures[c];g?g.push(a):this._tileTextures[c]=[a]}getTileTexture(a){const c=this._tileTextures[a];return c&&c.length>0?c.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(a,c,g){const b=g===void 0?this.terrain&&this.terrain.renderingToTexture:g,C=[];return this.style&&this.style.enable3dLights()&&(a==="globeRaster"||a==="terrainRaster"?(C.push("LIGHTING_3D_MODE"),C.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):b||C.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"&&(this._shadowMapDebug||C.push("DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(C.push("TERRAIN"),this.linearFloatFilteringSupported()&&C.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&C.push("GLOBE"),!this._fogVisible||b||c!==void 0&&!c||C.push("FOG","FOG_DITHERING"),b&&C.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&C.push("OVERDRAW_INSPECTOR"),C}getOrCreateProgram(a,c){this.cache=this.cache||{};const g=c&&c.defines||[],b=c&&c.config,C=this.currentGlobalDefines(a,c&&c.overrideFog,c&&c.overrideRtt).concat(g),I=vl.cacheKey(rc[a],a,C,b);return this.cache[I]||(this.cache[I]=new vl(this.context,a,rc[a],b,zc[a],C)),this.cache[I]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new i.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(a,c){if(this.style.enable3dLights()){const g=this.style.directionalLight,b=this.style.ambientLight;if(g&&b){const C=((I,z,U)=>{const K=I.properties.get("direction"),G=I.properties.get("color").toRenderColor(U.getLut(I.scope)).toArray01(),Q=I.properties.get("intensity"),ne=z.properties.get("color").toRenderColor(U.getLut(z.scope)).toArray01(),le=z.properties.get("intensity"),be=[K.x,K.y,K.z],xe=i.cH(ne,le),Te=i.cH(G,Q);return{u_lighting_ambient_color:xe,u_lighting_directional_dir:be,u_lighting_directional_color:Te,u_ground_radiance:xg(be,Te,xe)}})(g,b,this.style);c.setLightsUniformValues(a,C)}}}uploadCommonUniforms(a,c,g,b,C){if(this.uploadCommonLightUniforms(a,c),this.terrain&&this.terrain.renderingToTexture)return;const I=this.style.fog;if(I){const z=I.getOpacity(this.transform.pitch),U=((K,G,Q,ne,le,be,xe,Te,Ee,Oe,Ve,He)=>{const qe=K.transform,Xe=G.properties.get("color").toRenderColor(K.style.getLut(G.scope)).toArray01();Xe[3]=ne;const Ke=K.frameCounter/1e3%1,[Ye,rt]=G.properties.get("vertical-range");return{u_fog_matrix:Q?qe.calculateFogTileMatrix(Q):He||K.identityMat,u_fog_range:G.getFovAdjustedRange(qe._fov),u_fog_color:Xe,u_fog_horizon_blend:G.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(Ye,rt),rt],u_fog_temporal_offset:Ke,u_frustum_tl:le,u_frustum_tr:be,u_frustum_br:xe,u_frustum_bl:Te,u_globe_pos:Ee,u_globe_radius:Oe,u_viewport:Ve,u_globe_transition:i.a9(qe.zoom),u_is_globe:+(qe.projection.name==="globe")}})(this,I,g,z,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*i.q.devicePixelRatio,this.transform.height*i.q.devicePixelRatio],b);c.setFogUniformValues(a,U)}C&&c.setCutoffUniformValues(a,C.uniformValues)}setTileLoadedFlag(a){this.tileLoaded=a}saveCanvasCopy(){const a=this.canvasCopy();a&&(this.frameCopies.push(a),this.tileLoaded=!1)}canvasCopy(){const a=this.context.gl,c=a.createTexture();return a.bindTexture(a.TEXTURE_2D,c),a.copyTexImage2D(a.TEXTURE_2D,0,a.RGBA,0,0,a.drawingBufferWidth,a.drawingBufferHeight,0),c}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const a=this.style&&this.style.fog;return!!a&&a.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const a=this._backgroundTiles,c=this._backgroundTiles={},g=this.transform.coveringTiles({tileSize:512});for(const b of g)c[b.key]=a[b.key]||new Un(b,512,this.transform.tileZoom,this);return c}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(a,c){return!(!a.is3D()||a.type!=="clip"&&(a.minzoom&&a.minzoom>this.transform.zoom||(this.style._clipLayerPresent||a.sourceLayer!=="building")&&(!c||c.type!=="batched-model")))}isTileAffectedByFog(a){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let c=this._cachedTileFogOpacities[a.key];return c||(this._cachedTileFogOpacities[a.key]=c=this.style.fog.getOpacityForTile(a)),c[0]>=Mt||c[1]>=Mt}setupDepthForOcclusion(a,c,g){const b=this.context,C=b.gl,I=!!g;var z;g||(g={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),b.activeTexture.set(C.TEXTURE3),a&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE),g.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],g.u_depth_range_unpack=[2/((z=this.depthRangeFor3D)[1]-z[0]),-1-2*z[0]/(z[1]-z[0])],g.u_occluder_half_size=.5*this.occlusionParams.occluderSize,g.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE),b.activeTexture.set(C.TEXTURE0),I||c.setTerrainUniformValues(b,g)}}function xl(m,a){let c=!1,g=null;const b=()=>{g=null,c&&(m(),g=setTimeout(b,a),c=!1)};return()=>(c=!0,g||b(),g)}class qf{constructor(a){this._hashName=a&&encodeURIComponent(a),i.aJ(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=xl(this._updateHashUnthrottled.bind(this),300)}addTo(a){return this._map=a,window.addEventListener("hashchange",this._onHashChange,!1),a.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const a=this._map;if(!a)return"";const c=hh(a);if(this._hashName){const g=this._hashName;let b=!1;const C=location.hash.slice(1).split("&").map(I=>{const z=I.split("=")[0];return z===g?(b=!0,`${z}=${c}`):I}).filter(I=>I);return b||C.push(`${g}=${c}`),`#${C.join("&")}`}return`#${c}`}_getCurrentHash(){const a=location.hash.replace("#","");if(this._hashName){let c;return a.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(c=g)}),(c&&c[1]||"").split("/")}return a.split("/")}_onHashChange(){const a=this._map;if(!a)return!1;const c=this._getCurrentHash();if(c.length>=3&&!c.some(g=>isNaN(g))){const g=a.dragRotate.isEnabled()&&a.touchZoomRotate.isEnabled()?+(c[3]||0):a.getBearing();return a.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:g,pitch:+(c[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function hh(m,a){const c=m.getCenter(),g=Math.round(100*m.getZoom())/100,b=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),C=Math.pow(10,b),I=Math.round(c.lng*C)/C,z=Math.round(c.lat*C)/C,U=m.getBearing(),K=m.getPitch();let G=a?`/${I}/${z}/${g}`:`${g}/${z}/${I}`;return(U||K)&&(G+="/"+Math.round(10*U)/10),K&&(G+=`/${Math.round(K)}`),G}const ku={linearity:.3,easing:i.dp(0,0,.3,1)},Hg=i.l({deceleration:2500,maxSpeed:1400},ku),Ug=i.l({deceleration:20,maxSpeed:1400},ku),sc=i.l({deceleration:1e3,maxSpeed:360},ku),Wg=i.l({deceleration:1e3,maxSpeed:90},ku);class Kf{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:i.q.now(),settings:a})}_drainInertiaBuffer(){const a=this._inertiaBuffer,c=i.q.now();for(;a.length>0&&c-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const c={zoom:0,bearing:0,pitch:0,pan:new i.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:C}of this._inertiaBuffer)c.zoom+=C.zoomDelta||0,c.bearing+=C.bearingDelta||0,c.pitch+=C.pitchDelta||0,C.panDelta&&c.pan._add(C.panDelta),C.around&&(c.around=C.around),C.pinchAround&&(c.pinchAround=C.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,b={};if(c.pan.mag()){const C=Lu(c.pan.mag(),g,i.l({},Hg,a||{}));b.offset=c.pan.mult(C.amount/c.pan.mag()),b.center=this._map.transform.center,zu(b,C)}if(c.zoom){const C=Lu(c.zoom,g,Ug);b.zoom=this._map.transform.zoom+C.amount,zu(b,C)}if(c.bearing){const C=Lu(c.bearing,g,sc);b.bearing=this._map.transform.bearing+i.ap(C.amount,-179,179),zu(b,C)}if(c.pitch){const C=Lu(c.pitch,g,Wg);b.pitch=this._map.transform.pitch+C.amount,zu(b,C)}if(b.zoom||b.bearing){const C=c.pinchAround===void 0?c.around:c.pinchAround;b.around=C?this._map.unproject(C):this._map.getCenter()}return this.clear(),b.noMoveStart=!0,b}}function zu(m,a){(!m.duration||m.duration<a.duration)&&(m.duration=a.duration,m.easing=a.easing)}function Lu(m,a,c){const{maxSpeed:g,linearity:b,deceleration:C}=c,I=i.ap(m*b/(a/1e3),-g,g),z=Math.abs(I)/(C*b);return{easing:c.easing,duration:1e3*z,amount:I*(z/2)}}class ji extends i.x{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,c,g,b={}){const C=re(c.getCanvasContainer(),g),I=c.unproject(C);super(a,i.l({point:C,lngLat:I,originalEvent:g},b)),this._defaultPrevented=!1,this.target=c}}class Nu extends i.x{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,c,g){const b=a==="touchend"?g.changedTouches:g.touches,C=se(c.getCanvasContainer(),b),I=C.map(U=>c.unproject(U)),z=C.reduce((U,K,G,Q)=>U.add(K.div(Q.length)),new i.P(0,0));super(a,{points:C,point:z,lngLats:I,lngLat:c.unproject(z),originalEvent:g}),this._defaultPrevented=!1}}class Gg extends i.x{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,c){super("wheel",{originalEvent:c}),this._defaultPrevented=!1}}class Fu{constructor(a,c){this._map=a,this._clickTolerance=c.clickTolerance}reset(){this._mousedownPos=void 0}wheel(a){return this._firePreventable(new Gg(this._map,a))}mousedown(a,c){return this._mousedownPos=c,this._firePreventable(new ji(a.type,this._map,a))}mouseup(a){this._map.fire(new ji(a.type,this._map,a))}preclick(a){const c=i.l({},a);c.type="preclick",this._map.fire(new ji(c.type,this._map,c))}click(a,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||(this.preclick(a),this._map.fire(new ji(a.type,this._map,a)))}dblclick(a){return this._firePreventable(new ji(a.type,this._map,a))}mouseover(a){this._map.fire(new ji(a.type,this._map,a))}mouseout(a){this._map.fire(new ji(a.type,this._map,a))}touchstart(a){return this._firePreventable(new Nu(a.type,this._map,a))}touchmove(a){this._map.fire(new Nu(a.type,this._map,a))}touchend(a){this._map.fire(new Nu(a.type,this._map,a))}touchcancel(a){this._map.fire(new Nu(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Fc{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(a){this._map.fire(new ji(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ji("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._map.fire(new ji(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class qg{constructor(a,c){this._map=a,this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,c){this.isEnabled()&&a.shiftKey&&a.button===0&&(X(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(a,c){if(!this._active)return;const g=c,b=this._startPos,C=this._lastPos;if(!b||!C||C.equals(g)||!this._box&&g.dist(b)<this._clickTolerance)return;this._lastPos=g,this._box||(this._box=V("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",a));const I=Math.min(b.x,g.x),z=Math.max(b.x,g.x),U=Math.min(b.y,g.y),K=Math.max(b.y,g.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${I}px,${U}px)`,this._box.style.width=z-I+"px",this._box.style.height=K-U+"px")})}mouseupWindow(a,c){if(!this._active)return;const g=this._startPos,b=c;if(g&&a.button===0){if(this.reset(),Y(),g.x!==b.x||g.y!==b.y)return this._map.fire(new i.x("boxzoomend",{originalEvent:a})),{cameraAnimation:C=>C.fitScreenCoordinates(g,b,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",a)}}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",a))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),ee(),delete this._startPos,delete this._lastPos}_fireEvent(a,c){return this._map.fire(new i.x(a,{originalEvent:c}))}}function Xf(m,a){const c={};for(let g=0;g<m.length;g++)c[m[g].identifier]=a[g];return c}class P_{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(a,c,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=a.timeStamp),g.length===this.numTouches&&(this.centroid=function(b){const C=new i.P(0,0);for(const I of b)C._add(I);return C.div(b.length)}(c),this.touches=Xf(g,c)))}touchmove(a,c,g){if(this.aborted||!this.centroid)return;const b=Xf(g,c);for(const C in this.touches){const I=b[C];(!I||I.dist(this.touches[C])>30)&&(this.aborted=!0)}}touchend(a,c,g){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){const b=!this.aborted&&this.centroid;if(this.reset(),b)return b}}}class fh{constructor(a){this.singleTap=new P_(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(a,c,g){this.singleTap.touchstart(a,c,g)}touchmove(a,c,g){this.singleTap.touchmove(a,c,g)}touchend(a,c,g){const b=this.singleTap.touchend(a,c,g);if(b){const C=a.timeStamp-this.lastTime<500,I=!this.lastTap||this.lastTap.dist(b)<30;if(C&&I||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=b,this.count===this.numTaps)return this.reset(),b}}}class Kg{constructor(){this._zoomIn=new fh({numTouches:1,numTaps:2}),this._zoomOut=new fh({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,c,g){this._zoomIn.touchstart(a,c,g),this._zoomOut.touchstart(a,c,g)}touchmove(a,c,g){this._zoomIn.touchmove(a,c,g),this._zoomOut.touchmove(a,c,g)}touchend(a,c,g){const b=this._zoomIn.touchend(a,c,g),C=this._zoomOut.touchend(a,c,g);return b?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:I.getZoom()+1,around:I.unproject(b)},{originalEvent:a})}):C?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:I.getZoom()-1,around:I.unproject(C)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const ph={0:1,2:2};class mh{constructor(a){this.reset(),this._clickTolerance=a.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(a,c){return!1}_move(a,c){return{}}mousedown(a,c){if(this._lastPoint)return;const g=ae(a);this._correctButton(a,g)&&(this._lastPoint=c,this._eventButton=g)}mousemoveWindow(a,c){const g=this._lastPoint;if(g){if(a.preventDefault(),this._eventButton!=null&&function(b,C){const I=ph[C];return b.buttons===void 0||(b.buttons&I)!==I}(a,this._eventButton))this.reset();else if(this._moved||!(c.dist(g)<this._clickTolerance))return this._moved=!0,this._lastPoint=c,this._move(g,c)}}mouseupWindow(a){this._lastPoint&&ae(a)===this._eventButton&&(this._moved&&Y(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Zf extends mh{mousedown(a,c){super.mousedown(a,c),this._lastPoint&&(this._active=!0)}_correctButton(a,c){return c===0&&!a.ctrlKey}_move(a,c){return{around:c,panDelta:c.sub(a)}}}class Yf extends mh{_correctButton(a,c){return c===0&&a.ctrlKey||c===2}_move(a,c){const g=.8*(c.x-a.x);if(g)return this._active=!0,{bearingDelta:g}}contextmenu(a){a.preventDefault()}}class Jf extends mh{_correctButton(a,c){return c===0&&a.ctrlKey||c===2}_move(a,c){const g=-.5*(c.y-a.y);if(g)return this._active=!0,{pitchDelta:g}}contextmenu(a){a.preventDefault()}}class R_{constructor(a,c){this._map=a,this._el=a.getCanvasContainer(),this._minTouches=1,this._clickTolerance=c.clickTolerance||1,this.reset(),i.aJ(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new i.P(0,0)}touchstart(a,c,g){return this._calculateTransform(a,c,g)}touchmove(a,c,g){if(this._active&&!(g.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(g.length===1&&!i.dq())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return a.cancelable&&a.preventDefault(),this._calculateTransform(a,c,g)}}touchend(a,c,g){this._calculateTransform(a,c,g),this._active&&g.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,c,g){g.length>0&&(this._active=!0);const b=Xf(g,c),C=new i.P(0,0),I=new i.P(0,0);let z=0;for(const K in b){const G=b[K],Q=this._touches[K];Q&&(C._add(G),I._add(G.sub(Q)),z++,b[K]=G)}if(this._touches=b,z<this._minTouches||!I.mag())return;const U=I.div(z);return this._sum._add(U),this._sum.mag()<this._clickTolerance?void 0:{around:C.div(z),panDelta:U}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=V("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class Qf{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(a){}_move(a,c,g){return{}}touchstart(a,c,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([c[0],c[1]]))}touchmove(a,c,g){const b=this._firstTwoTouches;if(!b)return;a.preventDefault();const[C,I]=b,z=gh(g,c,C),U=gh(g,c,I);if(!z||!U)return;const K=this._aroundCenter?null:z.add(U).div(2);return this._move([z,U],K,a)}touchend(a,c,g){if(!this._firstTwoTouches)return;const[b,C]=this._firstTwoTouches,I=gh(g,c,b),z=gh(g,c,C);I&&z||(this._active&&Y(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function gh(m,a,c){for(let g=0;g<m.length;g++)if(m[g].identifier===c)return a[g]}function Xg(m,a){return Math.log(m/a)/Math.LN2}class O_ extends Qf{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,c){const g=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(Xg(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Xg(this._distance,g),pinchAround:c}}}function Zg(m,a){return 180*m.angleWith(a)/Math.PI}class A_ extends Qf{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,c){const g=this._vector;if(this._vector=a[0].sub(a[1]),g&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Zg(this._vector,g),pinchAround:c}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());const c=25/(Math.PI*this._minDiameter)*360,g=this._startVector;if(!g)return!1;const b=Zg(a,g);return Math.abs(b)<c}}function ep(m){return Math.abs(m.y)>Math.abs(m.x)}class D_ extends Qf{constructor(a){super(),this._map=a}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(a){this._lastPoints=a,ep(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,c,g){const b=this._lastPoints;if(!b)return;const C=a[0].sub(b[0]),I=a[1].sub(b[1]);return this._map._cooperativeGestures&&!i.dq()&&g.touches.length<3||(this._valid=this.gestureBeginsVertically(C,I,g.timeStamp),!this._valid)?void 0:(this._lastPoints=a,this._active=!0,{pitchDelta:(C.y+I.y)/2*-.5})}gestureBeginsVertically(a,c,g){if(this._valid!==void 0)return this._valid;const b=a.mag()>=2,C=c.mag()>=2;if(!b&&!C)return;if(!b||!C)return this._firstMove==null&&(this._firstMove=g),g-this._firstMove<100&&void 0;const I=a.y>0==c.y>0;return ep(a)&&ep(c)&&I}}const $_={panStep:100,bearingStep:15,pitchStep:10};class k_{constructor(){const a=$_;this._panStep=a.panStep,this._bearingStep=a.bearingStep,this._pitchStep=a.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let c=0,g=0,b=0,C=0,I=0;switch(a.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:a.shiftKey?g=-1:(a.preventDefault(),C=-1);break;case 39:a.shiftKey?g=1:(a.preventDefault(),C=1);break;case 38:a.shiftKey?b=1:(a.preventDefault(),I=-1);break;case 40:a.shiftKey?b=-1:(a.preventDefault(),I=1);break;default:return}return this._rotationDisabled&&(g=0,b=0),{cameraAnimation:z=>{const U=z.getZoom();z.easeTo({duration:300,easeId:"keyboardHandler",easing:z_,zoom:c?Math.round(U)+c*(a.shiftKey?2:1):U,bearing:z.getBearing()+g*this._bearingStep,pitch:z.getPitch()+b*this._pitchStep,offset:[-C*this._panStep,-I*this._panStep],center:z.getCenter()},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function z_(m){return m*(2-m)}const Yg=4.000244140625,RS=1/450;class OS{constructor(a,c){this._map=a,this._el=a.getCanvasContainer(),this._handler=c,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=RS,i.aJ(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(a){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(a.ctrlKey||a.metaKey||this.isZooming()||i.dq()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let c=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY;const g=i.q.now(),b=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,c!==0&&c%Yg==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":b>400?(this._type=null,this._lastValue=c,this._timeout=window.setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(b*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),a.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=a,this._delta-=c,this._active||this._start(a)),a.preventDefault()}_onTimeout(a){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(a)}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=re(this._el,a);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:c,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const a=this._map.transform;this._type==="wheel"&&a.projection.wrap&&(a._center.lng>=180||a._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const c=()=>a._terrainEnabled()&&this._aroundCoord?a.computeZoomRelativeTo(this._aroundCoord):a.zoom;if(this._delta!==0){const K=this._type==="wheel"&&Math.abs(this._delta)>Yg?this._wheelZoomRate:this._defaultZoomRate;let G=2/(1+Math.exp(-Math.abs(this._delta*K)));this._delta<0&&G!==0&&(G=1/G);const Q=c(),ne=Math.pow(2,Q),le=typeof this._targetZoom=="number"?a.zoomScale(this._targetZoom):ne;this._targetZoom=Math.min(a.maxZoom,Math.max(a.minZoom,a.scaleZoom(le*G))),this._type==="wheel"&&(this._startZoom=Q,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const g=typeof this._targetZoom=="number"?this._targetZoom:c(),b=this._startZoom,C=this._easing;let I,z=!1;if(this._type==="wheel"&&b&&C){const K=Math.min((i.q.now()-this._lastWheelEventTime)/200,1),G=C(K);I=i.aa(b,g,G),K<1?this._frameId||(this._frameId=!0):z=!0}else I=g,z=!0;this._active=!0,z&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let U=I-c();return U*this._lastDelta<0&&(U=0),{noInertia:!0,needsRenderFrame:!z,zoomDelta:U,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let c=i.dr;if(this._prevEase){const g=this._prevEase,b=(i.q.now()-g.start)/g.duration,C=g.easing(b+.01)-g.easing(b),I=.27/Math.sqrt(C*C+1e-4)*.01,z=Math.sqrt(.0729-I*I);c=i.dp(I,z,.25,1)}return this._prevEase={start:i.q.now(),duration:a,easing:c},c}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=V("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class io{constructor(a,c){this._clickZoom=a,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class L_{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(a,c){return a.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:g.getZoom()+(a.shiftKey?-1:1),around:g.unproject(c)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class AS{constructor(){this._tap=new fh({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(a,c,g){this._swipePoint||(this._tapTime&&a.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?g.length>0&&(this._swipePoint=c[0],this._swipeTouch=g[0].identifier):this._tap.touchstart(a,c,g))}touchmove(a,c,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const b=c[0],C=b.y-this._swipePoint.y;return this._swipePoint=b,a.preventDefault(),this._active=!0,{zoomDelta:C/128}}}else this._tap.touchmove(a,c,g)}touchend(a,c,g){this._tapTime?this._swipePoint&&g.length===0&&this.reset():this._tap.touchend(a,c,g)&&(this._tapTime=a.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class DS{constructor(a,c,g){this._el=a,this._mousePan=c,this._touchPan=g}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class vh{constructor(a,c,g){this._pitchWithRotate=a.pitchWithRotate,this._mouseRotate=c,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class N_{constructor(a,c,g,b){this._el=a,this._touchZoom=c,this._touchRotate=g,this._tapDragZoom=b,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Bu=m=>m.zoom||m.drag||m.pitch||m.rotate;class tp extends i.x{}class bl{constructor(){this.constants=[1,1,.01],this.radius=0}setup(a,c){const g=i.a6.vec3.sub([],c,a);this.radius=i.a6.vec3.length(g[2]<0?i.a6.vec3.div([],g,this.constants):[g[0],g[1],0])}projectRay(a){i.a6.vec3.div(a,a,this.constants),i.a6.vec3.normalize(a,a),i.a6.vec3.mul(a,a,this.constants);const c=i.a6.vec3.scale([],a,this.radius);if(c[2]>0){const g=i.a6.vec3.scale([],[0,0,1],i.a6.vec3.dot(c,[0,0,1])),b=i.a6.vec3.scale([],i.a6.vec3.normalize([],[c[0],c[1],0]),this.radius),C=i.a6.vec3.add([],c,i.a6.vec3.scale([],i.a6.vec3.sub([],i.a6.vec3.add([],b,g),c),2));c[0]=C[0],c[1]=C[1]}return c}}function Bc(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}class Po{constructor(a,c){this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Kf(a),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new bl,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(c),i.aJ(["handleEvent","handleWindowEvent"],this);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[window,"blur",void 0]];for(const[b,C,I]of this._listeners){const z=b===document?this.handleWindowEvent:this.handleEvent;b.addEventListener(C,z,I)}}destroy(){for(const[a,c,g]of this._listeners){const b=a===document?this.handleWindowEvent:this.handleEvent;a.removeEventListener(c,b,g)}}_addDefaultHandlers(a){const c=this._map,g=c.getCanvasContainer();this._add("mapEvent",new Fu(c,a));const b=c.boxZoom=new qg(c,a);this._add("boxZoom",b);const C=new Kg,I=new L_;c.doubleClickZoom=new io(I,C),this._add("tapZoom",C),this._add("clickZoom",I);const z=new AS;this._add("tapDragZoom",z);const U=c.touchPitch=new D_(c);this._add("touchPitch",U);const K=new Yf(a),G=new Jf(a);c.dragRotate=new vh(a,K,G),this._add("mouseRotate",K,["mousePitch"]),this._add("mousePitch",G,["mouseRotate"]);const Q=new Zf(a),ne=new R_(c,a);c.dragPan=new DS(g,Q,ne),this._add("mousePan",Q),this._add("touchPan",ne,["touchZoom","touchRotate"]);const le=new A_,be=new O_;c.touchZoomRotate=new N_(g,be,le,z),this._add("touchRotate",le,["touchPan","touchZoom"]),this._add("touchZoom",be,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Fc(c));const xe=c.scrollZoom=new OS(c,this);this._add("scrollZoom",xe,["mousePan"]);const Te=c.keyboard=new k_;this._add("keyboard",Te);for(const Ee of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])a.interactive&&a[Ee]&&c[Ee].enable(a[Ee])}_add(a,c,g){this._handlers.push({handlerName:a,handler:c,allowed:g}),this._handlersById[a]=c}stop(a){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Bu(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(a,c,g){for(const b in a)if(b!==g&&(!c||c.indexOf(b)<0))return!0;return!1}handleWindowEvent(a){this.handleEvent(a,`${a.type}Window`)}_getMapTouches(a){const c=[];for(const g of a)this._el.contains(g.target)&&c.push(g);return c}handleEvent(a,c){this._updatingCamera=!0;const g=a.type==="renderFrame",b=g?void 0:a,C={needsRenderFrame:!1},I={},z={},U=a.touches?this._getMapTouches(a.touches):void 0,K=U?se(this._el,U):g?void 0:re(this._el,a);for(const{handlerName:ne,handler:le,allowed:be}of this._handlers){if(!le.isEnabled())continue;let xe;this._blockedByActive(z,be,ne)?le.reset():le[c||a.type]&&(xe=le[c||a.type](a,K,U),this.mergeHandlerResult(C,I,xe,ne,b),xe&&xe.needsRenderFrame&&this._triggerRenderFrame()),(xe||le.isActive())&&(z[ne]=le)}const G={};for(const ne in this._previousActiveHandlers)z[ne]||(G[ne]=b);this._previousActiveHandlers=z,(Object.keys(G).length||Bc(C))&&(this._changes.push([C,I,G]),this._triggerRenderFrame()),(Object.keys(z).length||Bc(C))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Q}=C;Q&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Q(this._map))}mergeHandlerResult(a,c,g,b,C){if(!g)return;i.l(a,g);const I={handlerName:b,originalEvent:g.originalEvent||C};g.zoomDelta!==void 0&&(c.zoom=I),g.panDelta!==void 0&&(c.drag=I),g.pitchDelta!==void 0&&(c.pitch=I),g.bearingDelta!==void 0&&(c.rotate=I)}_applyChanges(){const a={},c={},g={};for(const[b,C,I]of this._changes)b.panDelta&&(a.panDelta=(a.panDelta||new i.P(0,0))._add(b.panDelta)),b.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+b.zoomDelta),b.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+b.bearingDelta),b.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+b.pitchDelta),b.around!==void 0&&(a.around=b.around),b.aroundCoord!==void 0&&(a.aroundCoord=b.aroundCoord),b.pinchAround!==void 0&&(a.pinchAround=b.pinchAround),b.noInertia&&(a.noInertia=b.noInertia),i.l(c,C),i.l(g,I);this._updateMapTransform(a,c,g),this._changes=[]}_updateMapTransform(a,c,g){const b=this._map,C=b.transform,I=Oe=>[Oe.x,Oe.y,Oe.z];if((Oe=>{const Ve=this._eventsInProgress.drag;return Ve&&!this._handlersById[Ve.handlerName].isActive()})()&&!Bc(a)){const Oe=C.zoom;C.cameraElevationReference="sea",this._originalZoom!=null&&C._orthographicProjectionAtLowPitch&&C.projection.name!=="globe"&&C.pitch===0?(C.cameraElevationReference="ground",C.zoom=this._originalZoom):(C.recenterOnTerrain(),C.cameraElevationReference="ground"),Oe!==C.zoom&&this._map._update(!0)}if(C._isCameraConstrained&&b._stop(!0),!Bc(a))return void this._fireEvents(c,g,!0);let{panDelta:z,zoomDelta:U,bearingDelta:K,pitchDelta:G,around:Q,aroundCoord:ne,pinchAround:le}=a;C._isCameraConstrained&&(U>0&&(U=0),C._isCameraConstrained=!1),le!==void 0&&(Q=le),(U||(Oe=>c[Oe]&&!this._eventsInProgress[Oe])("drag"))&&Q&&(this._dragOrigin=I(C.pointCoordinate3D(Q)),this._originalZoom=C.zoom,this._trackingEllipsoid.setup(C._camera.position,this._dragOrigin)),C.cameraElevationReference="sea",b._stop(!0),Q=Q||b.transform.centerPoint,K&&(C.bearing+=K),G&&(C.pitch+=G),C._updateCameraState();const be=[0,0,0];if(z)if(C.projection.name==="mercator"){const Oe=this._trackingEllipsoid.projectRay(C.screenPointToMercatorRay(Q).dir),Ve=this._trackingEllipsoid.projectRay(C.screenPointToMercatorRay(Q.sub(z)).dir);be[0]=Ve[0]-Oe[0],be[1]=Ve[1]-Oe[1]}else{const Oe=C.pointCoordinate(Q);if(C.projection.name==="globe"){z=z.rotate(-C.angle);const Ve=C._pixelsPerMercatorPixel/C.worldSize;be[0]=-z.x*i.ds(i.aN(Oe.y))*Ve,be[1]=-z.y*i.ds(C.center.lat)*Ve}else{const Ve=C.pointCoordinate(Q.sub(z));Oe&&Ve&&(be[0]=Ve.x-Oe.x,be[1]=Ve.y-Oe.y)}}const xe=C.zoom,Te=[0,0,0];if(U){const Oe=I(ne||C.pointCoordinate3D(Q)),Ve={dir:i.a6.vec3.normalize([],i.a6.vec3.sub([],Oe,C._camera.position))};if(Ve.dir[2]<0){const He=C.zoomDeltaToMovement(Oe,U);i.a6.vec3.scale(Te,Ve.dir,He)}}const Ee=i.a6.vec3.add(be,be,Te);C._translateCameraConstrained(Ee),U&&Math.abs(C.zoom-xe)>1e-4&&C.recenterOnTerrain(),C.cameraElevationReference="ground",this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(c,g,!0)}_fireEvents(a,c,g){const b=Bu(this._eventsInProgress),C=Bu(a),I={};for(const G in a){const{originalEvent:Q}=a[G];this._eventsInProgress[G]||(I[`${G}start`]=Q),this._eventsInProgress[G]=a[G]}!b&&C&&this._fireEvent("movestart",C.originalEvent);for(const G in I)this._fireEvent(G,I[G]);C&&this._fireEvent("move",C.originalEvent);for(const G in a){const{originalEvent:Q}=a[G];this._fireEvent(G,Q)}const z={};let U;for(const G in this._eventsInProgress){const{handlerName:Q,originalEvent:ne}=this._eventsInProgress[G];this._handlersById[Q].isActive()||(delete this._eventsInProgress[G],U=c[Q]||ne,z[`${G}end`]=U)}for(const G in z)this._fireEvent(G,z[G]);const K=Bu(this._eventsInProgress);if(g&&(b||C)&&!K){this._updatingCamera=!0;const G=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Q=ne=>ne!==0&&-this._bearingSnap<ne&&ne<this._bearingSnap;G?(Q(G.bearing||this._map.getBearing())&&(G.bearing=0),this._map.easeTo(G,{originalEvent:U})):(this._map.fire(new i.x("moveend",{originalEvent:U})),Q(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(a,c){this._map.fire(new i.x(a,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{this._frameId=void 0,this.handleEvent(new tp("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const qs="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Jg extends i.E{constructor(a,c){super(),this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=c.bearingSnap,this._respectPrefersReducedMotion=c.respectPrefersReducedMotion!==!1,i.aJ(["_renderFrameCallback"],this)}getCenter(){return new i.bL(this.transform.center.lng,this.transform.center.lat)}setCenter(a,c){return this.jumpTo({center:a},c)}panBy(a,c,g){return a=i.P.convert(a).mult(-1),this.panTo(this.transform.center,i.l({offset:a},c),g)}panTo(a,c,g){return this.easeTo(i.l({center:a},c),g)}getZoom(){return this.transform.zoom}setZoom(a,c){return this.jumpTo({zoom:a},c),this}zoomTo(a,c,g){return this.easeTo(i.l({zoom:a},c),g)}zoomIn(a,c){return this.zoomTo(this.getZoom()+1,a,c),this}zoomOut(a,c){return this.zoomTo(this.getZoom()-1,a,c),this}getBearing(){return this.transform.bearing}setBearing(a,c){return this.jumpTo({bearing:a},c),this}getPadding(){return this.transform.padding}setPadding(a,c){return this.jumpTo({padding:a},c),this}rotateTo(a,c,g){return this.easeTo(i.l({bearing:a},c),g)}resetNorth(a,c){return this.rotateTo(0,i.l({duration:1e3},a),c),this}resetNorthPitch(a,c){return this.easeTo(i.l({bearing:0,pitch:0,duration:1e3},a),c),this}snapToNorth(a,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,c):this}getPitch(){return this.transform.pitch}setPitch(a,c){return this.jumpTo({pitch:a},c),this}cameraForBounds(a,c){a=i.as.convert(a);const g=c&&c.bearing||0,b=c&&c.pitch||0,C=a.getNorthWest(),I=a.getSouthEast();return this._cameraForBounds(this.transform,C,I,g,b,c)}_extendPadding(a){const c={top:0,right:0,bottom:0,left:0};return a==null?i.l({},c,this.transform.padding):typeof a=="number"?{top:a,bottom:a,right:a,left:a}:i.l({},c,a)}_extendCameraOptions(a){return(a=i.l({offset:[0,0],maxZoom:this.transform.maxZoom},a)).padding=this._extendPadding(a.padding),a}_minimumAABBFrustumDistance(a,c){const g=c.max[0]-c.min[0],b=c.max[1]-c.min[1];return g/b>a.aspect?g/(2*Math.tan(.5*a.fovX)*a.aspect):b/(2*Math.tan(.5*a.fovY)*a.aspect)}_cameraForBoundsOnGlobe(a,c,g,b,C,I){const z=a.clone(),U=this._extendCameraOptions(I);z.bearing=b,z.pitch=C;const K=i.bL.convert(c),G=i.bL.convert(g),Q=.5*(K.lat+G.lat),ne=.5*(K.lng+G.lng),le=i.dt(Q,ne),be=i.a6.vec3.normalize([],le),xe=i.a6.vec3.normalize([],i.a6.vec3.cross([],be,[0,1,0])),Te=i.a6.vec3.cross([],xe,be),Ee=[xe[0],xe[1],xe[2],0,Te[0],Te[1],Te[2],0,be[0],be[1],be[2],0,0,0,0,1],Oe=[le,i.dt(K.lat,K.lng),i.dt(G.lat,K.lng),i.dt(G.lat,G.lng),i.dt(K.lat,G.lng),i.dt(Q,K.lng),i.dt(Q,G.lng),i.dt(K.lat,ne),i.dt(G.lat,ne)];let Ve=i.ca.fromPoints(Oe.map(Nt=>[i.a6.vec3.dot(xe,Nt),i.a6.vec3.dot(Te,Nt),i.a6.vec3.dot(be,Nt)]));const He=i.a6.vec3.transformMat4([],Ve.center,Ee);i.a6.vec3.squaredLength(He)===0&&i.a6.vec3.set(He,0,0,1),i.a6.vec3.normalize(He,He),i.a6.vec3.scale(He,He,i.aq),z.center=i.du(He);const qe=z.getWorldToCameraMatrix(),Xe=i.a6.mat4.invert(new Float64Array(16),qe);Ve=i.ca.applyTransform(Ve,i.a6.mat4.multiply([],qe,Ee));const Ke=this._extendAABB(Ve,z,U,b);if(!Ke)return void i.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Ve=Ke,i.a6.vec3.transformMat4(He,He,qe);const Ye=.5*(Ve.max[2]-Ve.min[2]),rt=this._minimumAABBFrustumDistance(z,Ve),vt=i.a6.vec3.scale([],[0,0,1],Ye),st=i.a6.vec3.add(vt,He,vt),it=rt+(z.pitch===0?0:i.a6.vec3.distance(He,st)),zt=z.globeCenterInViewSpace,jt=i.a6.vec3.sub([],He,[zt[0],zt[1],zt[2]]);i.a6.vec3.normalize(jt,jt),i.a6.vec3.scale(jt,jt,it);const tn=i.a6.vec3.add([],He,jt);i.a6.vec3.transformMat4(tn,tn,Xe);const fn=i.dw/i.aq,Sn=i.a6.vec3.length(tn),Et=i.bE(Math.max(Sn*fn-i.dw,Number.EPSILON),0),Qt=Math.min(z.zoomFromMercatorZAdjusted(Et),U.maxZoom);return Qt>.5*(i.c3+i.bV)?(z.setProjection({name:"mercator"}),z.zoom=Qt,this._cameraForBounds(z,c,g,b,C,I)):{center:z.center,zoom:Qt,bearing:b,pitch:C}}_extendAABB(a,c,g,b){const C=.5*((g.padding.left||0)+(g.padding.right||0)),I=.5*((g.padding.top||0)+(g.padding.bottom||0)),z=I,U=C,K=C,G=I,Q=c.width-(U+K),ne=c.height-(z+G),le=i.a6.vec3.sub([],a.max,a.min),be=Math.min(Q/le[0],ne/le[1]),xe=Math.min(c.scaleZoom(c.scale*be),g.maxZoom);if(isNaN(xe))return null;const Te=c.scale/c.zoomScale(xe),Ee=new i.ca([a.min[0]-U*Te,a.min[1]-G*Te,a.min[2]],[a.max[0]+K*Te,a.max[1]+z*Te,a.max[2]]),Oe=(typeof g.offset.x=="number"&&typeof g.offset.y=="number"?new i.P(g.offset.x,g.offset.y):i.P.convert(g.offset)).rotate(-i.bC(b));return Ee.center[0]-=Oe.x*Te,Ee.center[1]+=Oe.y*Te,Ee}queryTerrainElevation(a,c){const g=this.transform.elevation;return g?(c=i.l({},{exaggerated:!0},c),g.getAtPoint(i.a5.fromLngLat(a),null,c.exaggerated)):null}_cameraForBounds(a,c,g,b,C,I){if(a.projection.name==="globe")return this._cameraForBoundsOnGlobe(a,c,g,b,C,I);const z=a.clone(),U=this._extendCameraOptions(I);z.bearing=b,z.pitch=C;const K=i.bL.convert(c),G=i.bL.convert(g),Q=new i.bL(K.lng,G.lat),ne=new i.bL(G.lng,K.lat),le=z.project(K),be=z.project(G),xe=this.queryTerrainElevation(K),Te=this.queryTerrainElevation(G),Ee=this.queryTerrainElevation(Q),Oe=this.queryTerrainElevation(ne),Ve=[[le.x,le.y,Math.min(xe||0,Te||0,Ee||0,Oe||0)],[be.x,be.y,Math.max(xe||0,Te||0,Ee||0,Oe||0)]];let He=i.ca.fromPoints(Ve);const qe=z.getWorldToCameraMatrix(),Xe=i.a6.mat4.invert(new Float64Array(16),qe);He=i.ca.applyTransform(He,qe);const Ke=this._extendAABB(He,z,U,b);if(!Ke)return void i.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");He=Ke;const Ye=.5*i.a6.vec3.sub([],He.max,He.min)[2],rt=this._minimumAABBFrustumDistance(z,He),vt=[0,0,1,0];i.a6.vec4.transformMat4(vt,vt,qe),i.a6.vec4.normalize(vt,vt);const st=i.a6.vec3.scale([],vt,rt+Ye),it=i.a6.vec3.add([],He.center,st);i.a6.vec3.transformMat4(He.center,He.center,Xe),i.a6.vec3.transformMat4(it,it,Xe);const zt=z.unproject(new i.P(He.center[0],He.center[1])),jt=i.dv(z.projection,zt),tn=Math.pow(2,jt),fn=Math.min(z._zoomFromMercatorZ(it[2]*z.pixelsPerMeter*tn/z.worldSize),U.maxZoom);return z.mercatorFromTransition&&fn<.5*(i.c3+i.bV)?(z.setProjection({name:"globe"}),z.zoom=fn,this._cameraForBounds(z,c,g,b,C,I)):{center:zt,zoom:fn,bearing:b,pitch:C}}fitBounds(a,c,g){const b=this.cameraForBounds(a,c);return this._fitInternal(b,c,g)}fitScreenCoordinates(a,c,g,b,C){const I=i.P.convert(a),z=i.P.convert(c),U=new i.P(Math.min(I.x,z.x),Math.min(I.y,z.y)),K=new i.P(Math.max(I.x,z.x),Math.max(I.y,z.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(I,z))return this;const G=this.transform.pointLocation3D(U),Q=this.transform.pointLocation3D(K),ne=this.transform.pointLocation3D(new i.P(U.x,K.y)),le=this.transform.pointLocation3D(new i.P(K.x,U.y)),be=[Math.min(G.lng,Q.lng,ne.lng,le.lng),Math.min(G.lat,Q.lat,ne.lat,le.lat)],xe=[Math.max(G.lng,Q.lng,ne.lng,le.lng),Math.max(G.lat,Q.lat,ne.lat,le.lat)],Te=b&&b.pitch?b.pitch:this.getPitch(),Ee=this._cameraForBounds(this.transform,be,xe,g,Te,b);return this._fitInternal(Ee,b,C)}_fitInternal(a,c,g){return a?(c=i.l(a,c)).linear?this.easeTo(c,g):this.flyTo(c,g):this}jumpTo(a,c){this.stop();const g=a.preloadOnly?this.transform.clone():this.transform;let b=!1,C=!1,I=!1;"zoom"in a&&g.zoom!==+a.zoom&&(b=!0,g.zoom=+a.zoom),a.center!==void 0&&(g.center=i.bL.convert(a.center)),"bearing"in a&&g.bearing!==+a.bearing&&(C=!0,g.bearing=+a.bearing),"pitch"in a&&g.pitch!==+a.pitch&&(I=!0,g.pitch=+a.pitch);const z=typeof a.padding=="number"?this._extendPadding(a.padding):a.padding;if(a.padding!=null&&!g.isPaddingEqual(z))if(a.retainPadding===!1){const U=g.clone();U.padding=z,g.setLocationAtPoint(g.center,U.centerPoint)}else g.padding=z;return a.preloadOnly?(this._preloadTiles(g),this):(this.fire(new i.x("movestart",c)).fire(new i.x("move",c)),b&&this.fire(new i.x("zoomstart",c)).fire(new i.x("zoom",c)).fire(new i.x("zoomend",c)),C&&this.fire(new i.x("rotatestart",c)).fire(new i.x("rotate",c)).fire(new i.x("rotateend",c)),I&&this.fire(new i.x("pitchstart",c)).fire(new i.x("pitch",c)).fire(new i.x("pitchend",c)),this.fire(new i.x("moveend",c)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||i.w(qs),this.transform.getFreeCameraOptions()}setFreeCameraOptions(a,c){const g=this.transform;if(!g.projection.supportsFreeCamera)return i.w(qs),this;this.stop();const b=g.zoom,C=g.pitch,I=g.bearing;g.setFreeCameraOptions(a);const z=b!==g.zoom,U=C!==g.pitch,K=I!==g.bearing;return this.fire(new i.x("movestart",c)).fire(new i.x("move",c)),z&&this.fire(new i.x("zoomstart",c)).fire(new i.x("zoom",c)).fire(new i.x("zoomend",c)),K&&this.fire(new i.x("rotatestart",c)).fire(new i.x("rotate",c)).fire(new i.x("rotateend",c)),U&&this.fire(new i.x("pitchstart",c)).fire(new i.x("pitch",c)).fire(new i.x("pitchend",c)),this.fire(new i.x("moveend",c)),this}easeTo(a,c){this._stop(!1,a.easeId),((a=i.l({offset:[0,0],duration:500,easing:i.dr},a)).animate===!1||this._prefersReducedMotion(a))&&(a.duration=0);const g=this.transform,b=this.getZoom(),C=this.getBearing(),I=this.getPitch(),z=this.getPadding(),U="zoom"in a?+a.zoom:b,K="bearing"in a?this._normalizeBearing(a.bearing,C):C,G="pitch"in a?+a.pitch:I,Q=this._extendPadding(a.padding),ne=i.P.convert(a.offset);let le,be,xe;if(g.projection.name==="globe"){const vt=i.a5.fromLngLat(g.center),st=ne.rotate(-g.angle);vt.x+=st.x/g.worldSize,vt.y+=st.y/g.worldSize;const it=vt.toLngLat(),zt=i.bL.convert(a.center||it);this._normalizeCenter(zt),le=g.centerPoint.add(st),be=new i.P(vt.x,vt.y).mult(g.worldSize),xe=new i.P(i.am(zt.lng),i.at(zt.lat)).mult(g.worldSize).sub(be)}else{le=g.centerPoint.add(ne);const vt=g.pointLocation(le),st=i.bL.convert(a.center||vt);this._normalizeCenter(st),be=g.project(vt),xe=g.project(st).sub(be)}const Te=g.zoomScale(U-b);let Ee,Oe;a.around&&(Ee=i.bL.convert(a.around),Oe=g.locationPoint(Ee));const Ve=this._zooming||U!==b,He=this._rotating||C!==K,qe=this._pitching||G!==I,Xe=!g.isPaddingEqual(Q),Ke=a.retainPadding===!1?g.clone():g,Ye=vt=>st=>{if(Ve&&(vt.zoom=i.aa(b,U,st)),He&&(vt.bearing=i.aa(C,K,st)),qe&&(vt.pitch=i.aa(I,G,st)),Xe&&(Ke.interpolatePadding(z,Q,st),le=Ke.centerPoint.add(ne)),Ee)vt.setLocationAtPoint(Ee,Oe);else{const it=vt.zoomScale(vt.zoom-b),zt=U>b?Math.min(2,Te):Math.max(.5,Te),jt=Math.pow(zt,1-st),tn=vt.unproject(be.add(xe.mult(st*jt)).mult(it));vt.setLocationAtPoint(vt.renderWorldCopies?tn.wrap():tn,le)}return a.preloadOnly||this._fireMoveEvents(c),vt};if(a.preloadOnly){const vt=this._emulate(Ye,a.duration,g);return this._preloadTiles(vt),this}const rt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Ve,this._rotating=He,this._pitching=qe,this._padding=Xe,this._easeId=a.easeId,this._prepareEase(c,a.noMoveStart,rt),this._ease(Ye(g),vt=>{g.cameraElevationReference==="sea"&&g.recenterOnTerrain(),this._afterEase(c,vt)},a),this}_prepareEase(a,c,g={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),c||g.moving||this.fire(new i.x("movestart",a)),this._zooming&&!g.zooming&&this.fire(new i.x("zoomstart",a)),this._rotating&&!g.rotating&&this.fire(new i.x("rotatestart",a)),this._pitching&&!g.pitching&&this.fire(new i.x("pitchstart",a))}_fireMoveEvents(a){this.fire(new i.x("move",a)),this._zooming&&this.fire(new i.x("zoom",a)),this._rotating&&this.fire(new i.x("rotate",a)),this._pitching&&this.fire(new i.x("pitch",a))}_afterEase(a,c){if(this._easeId&&c&&this._easeId===c)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const g=this._zooming,b=this._rotating,C=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new i.x("zoomend",a)),b&&this.fire(new i.x("rotateend",a)),C&&this.fire(new i.x("pitchend",a)),this.fire(new i.x("moveend",a))}flyTo(a,c){if(this._prefersReducedMotion(a)){const Nt=i.ar(a,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(Nt,c)}this.stop(),a=i.l({offset:[0,0],speed:1.2,curve:1.42,easing:i.dr},a);const g=this.transform,b=this.getZoom(),C=this.getBearing(),I=this.getPitch(),z=this.getPadding(),U="zoom"in a?i.ap(+a.zoom,g.minZoom,g.maxZoom):b,K="bearing"in a?this._normalizeBearing(a.bearing,C):C,G="pitch"in a?+a.pitch:I,Q=this._extendPadding(a.padding),ne=g.zoomScale(U-b),le=i.P.convert(a.offset);let be=g.centerPoint.add(le);const xe=g.pointLocation(be),Te=i.bL.convert(a.center||xe);this._normalizeCenter(Te);const Ee=g.project(xe),Oe=g.project(Te).sub(Ee);let Ve=a.curve;const He=Math.max(g.width,g.height),qe=He/ne,Xe=Oe.mag();if("minZoom"in a){const Nt=i.ap(Math.min(a.minZoom,b,U),g.minZoom,g.maxZoom),en=He/g.zoomScale(Nt-b);Ve=Math.sqrt(en/Xe*2)}const Ke=Ve*Ve;function Ye(Nt){const en=(qe*qe-He*He+(Nt?-1:1)*Ke*Ke*Xe*Xe)/(2*(Nt?qe:He)*Ke*Xe);return Math.log(Math.sqrt(en*en+1)-en)}function rt(Nt){return(Math.exp(Nt)-Math.exp(-Nt))/2}function vt(Nt){return(Math.exp(Nt)+Math.exp(-Nt))/2}const st=Ye(0);let it=function(Nt){return vt(st)/vt(st+Ve*Nt)},zt=function(Nt){return He*((vt(st)*(rt(en=st+Ve*Nt)/vt(en))-rt(st))/Ke)/Xe;var en},jt=(Ye(1)-st)/Ve;if(Math.abs(Xe)<1e-6||!isFinite(jt)){if(Math.abs(He-qe)<1e-6)return this.easeTo(a,c);const Nt=qe<He?-1:1;jt=Math.abs(Math.log(qe/He))/Ve,zt=function(){return 0},it=function(en){return Math.exp(Nt*Ve*en)}}a.duration="duration"in a?+a.duration:1e3*jt/("screenSpeed"in a?+a.screenSpeed/Ve:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0);const tn=C!==K,fn=G!==I,Sn=!g.isPaddingEqual(Q),Et=a.retainPadding===!1?g.clone():g,Qt=Nt=>en=>{const rn=en*jt,Jt=1/it(rn);Nt.zoom=en===1?U:b+Nt.scaleZoom(Jt),tn&&(Nt.bearing=i.aa(C,K,en)),fn&&(Nt.pitch=i.aa(I,G,en)),Sn&&(Et.interpolatePadding(z,Q,en),be=Et.centerPoint.add(le));const In=en===1?Te:Nt.unproject(Ee.add(Oe.mult(zt(rn))).mult(Jt));return Nt.setLocationAtPoint(Nt.renderWorldCopies?In.wrap():In,be),Nt._updateCameraOnTerrain(),a.preloadOnly||this._fireMoveEvents(c),Nt};if(a.preloadOnly){const Nt=this._emulate(Qt,a.duration,g);return this._preloadTiles(Nt),this}return this._zooming=!0,this._rotating=tn,this._pitching=fn,this._padding=Sn,this._prepareEase(c,!1),this._ease(Qt(g),()=>this._afterEase(c),a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(a){}_cancelRenderFrame(a){}_stop(a,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const g=this._onEaseEnd;this._onEaseEnd=void 0,g.call(this,c)}if(!a){const g=this.handlers;g&&g.stop(!1)}return this}_ease(a,c,g){g.animate===!1||g.duration===0?(a(1),c()):(this._easeStart=i.q.now(),this._easeOptions=g,this._onEaseFrame=a,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const a=Math.min((i.q.now()-this._easeStart)/this._easeOptions.duration,1),c=this._onEaseFrame;c&&c(this._easeOptions.easing(a)),a<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(a,c){a=i.bB(a,-180,180);const g=Math.abs(a-c);return Math.abs(a-360-c)<g&&(a-=360),Math.abs(a+360-c)<g&&(a+=360),a}_normalizeCenter(a){const c=this.transform;if(c.maxBounds||c.projection.name!=="globe"&&!c.renderWorldCopies)return;const g=a.lng-c.center.lng;a.lng+=g>180?-360:g<-180?360:0}_prefersReducedMotion(a){return this._respectPrefersReducedMotion&&i.q.prefersReducedMotion&&!(a&&a.essential)}_emulate(a,c,g){const b=Math.ceil(15*c/1e3),C=[],I=a(g.clone());for(let z=0;z<=b;z++){const U=I(z/b);C.push(U.clone())}return C}_preloadTiles(a,c){}}class np{constructor(a={}){this.options=a,i.aJ(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(a){const c=this.options&&this.options.compact,g=a._getUIString("AttributionControl.ToggleAttribution");this._map=a,this._container=V("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=V("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",g);const b=V("span","mapboxgl-ctrl-icon",this._compactButton);return b.setAttribute("aria-hidden","true"),b.setAttribute("title",g),this._innerContainer=V("div","mapboxgl-ctrl-attrib-inner",this._container),c&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),c===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let a=this._editLink;a||(a=this._editLink=this._container.querySelector(".mapbox-improve-map"));const c=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||i.e.ACCESS_TOKEN}];if(a){const g=c.reduce((b,C,I)=>(C.value&&(b+=`${C.key}=${C.value}${I<c.length-1?"&":""}`),b),"?");a.href=`${i.e.FEEDBACK_URL}/${g}#${hh(this._map,!0)}`,a.rel="noopener nofollow"}}_updateData(a){!a||a.sourceDataType!=="metadata"&&a.sourceDataType!=="visibility"&&a.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let a=[];if(this._map.style.stylesheet){const b=this._map.style.stylesheet;this.styleOwner=b.owner,this.styleId=b.id}const c=this._map.style._mergedSourceCaches;for(const b in c){const C=c[b];if(C.used){const I=C.getSource();I.attribution&&a.indexOf(I.attribution)<0&&a.push(I.attribution)}}a.sort((b,C)=>b.length-C.length),a=a.filter((b,C)=>{for(let I=C+1;I<a.length;I++)if(a[I].indexOf(b)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=[...this.options.customAttribution,...a]:a.unshift(this.options.customAttribution));const g=a.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,a.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Qg{constructor(){i.aJ(["_updateLogo","_updateCompact"],this)}onAdd(a){this._map=a,this._container=V("div","mapboxgl-ctrl");const c=V("a","mapboxgl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://www.mapbox.com/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(a){a&&a.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const a=this._map.style._sourceCaches;if(Object.entries(a).length===0)return!0;for(const c in a){const g=a[c].getSource();if(g.hasOwnProperty("mapbox_logo")&&!g.mapbox_logo)return!1}return!0}_updateCompact(){const a=this._container.children;if(a.length){const c=a[0];this._map.getCanvasContainer().offsetWidth<250?c.classList.add("mapboxgl-compact"):c.classList.remove("mapboxgl-compact")}}}class F_{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){const c=++this._id;return this._queue.push({callback:a,id:c,cancelled:!1}),c}remove(a){const c=this._currentlyRunning,g=c?this._queue.concat(c):this._queue;for(const b of g)if(b.id===a)return void(b.cancelled=!0)}run(a=0){const c=this._currentlyRunning=this._queue;this._queue=[];for(const g of c)if(!g.cancelled&&(g.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class yh{constructor(a){this.jumpTo(a)}getValue(a){if(a<=this._startTime)return this._start;if(a>=this._endTime)return this._end;const c=i.cw((a-this._startTime)/(this._endTime-this._startTime));return this._start*(1-c)+this._end*c}isEasing(a){return a>=this._startTime&&a<=this._endTime}jumpTo(a){this._startTime=-1/0,this._endTime=-1/0,this._start=a,this._end=a}easeTo(a,c,g){this._start=this.getValue(c),this._end=a,this._startTime=c,this._endTime=c+g}}const $S={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},B_=["mouseenter","mouseover","mouseleave","mouseout"];class rp extends i.x{constructor(a,c,g,b){const{point:C,lngLat:I,originalEvent:z,target:U}=a;super(a.type,{point:C,lngLat:I,originalEvent:z,target:U}),this.preventDefault=()=>{a.preventDefault()},this.id=c,this.interaction=g,this.feature=b}}class ev{constructor(a){this.map=a,this.interactionsByType=new Map,this.typeById=new Map,this.filters=new Map,this.handleType=this.handleType.bind(this)}add(a,c){if(this.typeById.has(a))throw new Error(`Interaction id "${a}" already exists.`);const{type:g,filter:b}=c;if(b){const I=i.M(b,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(I.result==="error")throw new Error(I.value.map(z=>`${z.key}: ${z.message}`).join(", "));this.filters.set(a,I.value)}const C=this.interactionsByType.get(g)||new Map;C.size===0&&(B_.includes(g)?this.map.on(g,c.featureset,this.handleType):this.map.on(g,this.handleType),this.interactionsByType.set(g,C)),C.set(a,c),this.typeById.set(a,g)}remove(a){const c=this.typeById.get(a);if(!c)return;this.typeById.delete(a),this.filters.delete(a);const g=this.interactionsByType.get(c);g&&(g.delete(a),g.size===0&&this.map.off(c,this.handleType))}handleType(a){const c=this.interactionsByType.get(a.type),g=Array.from(c).reverse(),b=[];for(const[,z]of g)z.featureset&&b.push({featureset:z.featureset,filter:z.filter,radius:z.radius});let C=this.map.style.queryRenderedFeaturesForInteractions(a.point,b,this.map.transform);!C.length&&B_.includes(a.type)&&(C=[null]);let I=!1;for(const z of C){for(const[U,K]of g){const{handler:G,featureset:Q}=K;if(Q&&(z==null||i.bi(z.featureset,Q))&&G(new rp(a,U,K,z))!==!1){I=!0;break}}if(I)break}if(!I)for(const[z,U]of g){const{handler:K,featureset:G}=U;if(!G&&K(new rp(a,z,U,null))!==!1)break}}}function _h(m,a){if(Array.isArray(m)&&Array.isArray(a)){const c=new Set(m),g=new Set(a);return c.size===g.size&&m.every(b=>g.has(b))}return i.bi(m,a)}const ju={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0,scaleFactor:1},wl={showCompass:!0,showZoom:!0,visualizePitch:!1};class Ts{constructor(a,c,g=!1){this._clickTolerance=10,this.element=c,this.mouseRotate=new Yf({clickTolerance:a.dragRotate._mouseRotate._clickTolerance}),this.map=a,g&&(this.mousePitch=new Jf({clickTolerance:a.dragRotate._mousePitch._clickTolerance})),i.aJ(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),c.addEventListener("mousedown",this.mousedown),c.addEventListener("touchstart",this.touchstart,{passive:!1}),c.addEventListener("touchmove",this.touchmove),c.addEventListener("touchend",this.touchend),c.addEventListener("touchcancel",this.reset)}down(a,c){this.mouseRotate.mousedown(a,c),this.mousePitch&&this.mousePitch.mousedown(a,c),X()}move(a,c){const g=this.map,b=this.mouseRotate.mousemoveWindow(a,c),C=b&&b.bearingDelta;if(C&&g.setBearing(g.getBearing()+C),this.mousePitch){const I=this.mousePitch.mousemoveWindow(a,c),z=I&&I.pitchDelta;z&&g.setPitch(g.getPitch()+z)}}off(){const a=this.element;a.removeEventListener("mousedown",this.mousedown),a.removeEventListener("touchstart",this.touchstart,{passive:!1}),a.removeEventListener("touchmove",this.touchmove),a.removeEventListener("touchend",this.touchend),a.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){ee(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(a){this.down(i.l({},a,{ctrlKey:!0,preventDefault:()=>a.preventDefault()}),re(this.element,a)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(a){this.move(a,re(this.element,a))}mouseup(a){this.mouseRotate.mouseupWindow(a),this.mousePitch&&this.mousePitch.mouseupWindow(a),this.offTemp()}touchstart(a){a.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=se(this.element,a.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>a.preventDefault()},this._startPos))}touchmove(a){a.targetTouches.length!==1?this.reset():(this._lastPos=se(this.element,a.targetTouches)[0],this.move({preventDefault:()=>a.preventDefault()},this._lastPos))}touchend(a){a.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Sl(m,a,c){if(m=new i.bL(m.lng,m.lat),a){const g=new i.bL(m.lng-360,m.lat),b=new i.bL(m.lng+360,m.lat),C=360*Math.ceil(Math.abs(m.lng-c.center.lng)/360),I=c.locationPoint(m).distSqr(a),z=a.x<0||a.y<0||a.x>c.width||a.y>c.height;c.locationPoint(g).distSqr(a)<I&&(z||Math.abs(g.lng-c.center.lng)<C)?m=g:c.locationPoint(b).distSqr(a)<I&&(z||Math.abs(b.lng-c.center.lng)<C)&&(m=b)}for(;Math.abs(m.lng-c.center.lng)>180;){const g=c.locationPoint(m);if(g.x>=0&&g.y>=0&&g.x<=c.width&&g.y<=c.height)break;m.lng>c.center.lng?m.lng-=360:m.lng+=360}return m}const Cl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Ks extends i.E{constructor(a,c){if(super(),(a instanceof HTMLElement||c)&&(a=i.l({element:a},c)),i.aJ(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=a&&a.occludedOpacity||.2,a&&a.element)this._element=a.element,this._offset=i.P.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=V("div");const C=41,I=27,z=B("svg",{display:"block",height:C*this._scale+"px",width:I*this._scale+"px",viewBox:`0 0 ${I} ${C}`},this._element),U=B("radialGradient",{id:"shadowGradient"},B("defs",{},z));B("stop",{offset:"10%","stop-opacity":.4},U),B("stop",{offset:"100%","stop-opacity":.05},U),B("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},z),B("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},z),B("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},z),B("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},z),this._offset=i.P.convert(a&&a.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",C=>{C.preventDefault()}),this._element.addEventListener("mousedown",C=>{C.preventDefault()});const g=this._element.classList;for(const C in Cl)g.remove(`mapboxgl-marker-anchor-${C}`);g.add(`mapboxgl-marker-anchor-${this._anchor}`);const b=a&&a.className?a.className.trim().split(/\s+/):[];g.add(...b),this._popup=null}addTo(a){return a===this._map||(this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._updateMoving),a.on("moveend",this._update),a.on("remove",this._clearFadeTimer),a._addMarker(this),this.setDraggable(this._draggable),this._update(),a.on("click",this._onMapClick)),this}remove(){const a=this._map;return a&&(a.off("click",this._onMapClick),a.off("move",this._updateMoving),a.off("moveend",this._update),a.off("mousedown",this._addDragHandler),a.off("touchstart",this._addDragHandler),a.off("mouseup",this._onUp),a.off("touchend",this._onUp),a.off("mousemove",this._onMove),a.off("touchmove",this._onMove),a.off("remove",this._clearFadeTimer),a._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=i.bL.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){const b=Math.sqrt(Math.pow(13.5,2)/2);a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[b,-1*(38.1-13.5+b)],"bottom-right":[-b,-1*(38.1-13.5+b)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,a._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(a){const c=a.code,g=a.charCode||a.keyCode;c!=="Space"&&c!=="Enter"&&g!==32&&g!==13||this.togglePopup()}_onMapClick(a){const c=a.originalEvent.target,g=this._element;this._popup&&(c===g||g.contains(c))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const a=this._popup;return a?(a.isOpen()?(a.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(a.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const a=this._map,c=this._pos;if(!a||!c)return!1;const g=a.unproject(c),b=a.getFreeCameraOptions();if(!b.position)return!1;const C=b.position.toLngLat();return C.distanceTo(g)<.9*C.distanceTo(this._lngLat)}_evaluateOpacity(){const a=this._map;if(!a)return;const c=this._pos;if(!c||c.x<0||c.x>a.transform.width||c.y<0||c.y>a.transform.height)return void this._clearFadeTimer();const g=a.unproject(c);let b;a._showingGlobe()&&i.dz(a.transform,this._lngLat)?b=0:(b=1-a._queryFogOpacity(g),a.transform._terrainEnabled()&&a.getTerrain()&&this._behindTerrain()&&(b*=this._occludedOpacity)),this._element.style.opacity=`${b}`,this._element.style.pointerEvents=b>0?"auto":"none",this._popup&&this._popup._setOpacity(b),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const a=this._pos;if(!a||!this._map)return;const c=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${a.x}px,${a.y}px)
            ${Cl[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${c.x}px,${c.y}px)
        `}_calculateXYTransform(){const a=this._pos,c=this._map,g=this.getPitchAlignment();if(!c||!a||g!=="map")return"";if(!c._showingGlobe()){const U=c.getPitch();return U?`rotateX(${U}deg)`:""}const b=i.c1(i.dA(c.transform,this._lngLat)),C=a.sub(i.dB(c.transform)),I=Math.abs(C.x)+Math.abs(C.y);if(I===0)return"";const z=b/I;return`rotateX(${-C.y*z}deg) rotateY(${C.x*z}deg)`}_calculateZTransform(){const a=this._pos,c=this._map;if(!c||!a)return"";let g=0;const b=this.getRotationAlignment();if(b==="map")if(c._showingGlobe()){const C=c.project(new i.bL(this._lngLat.lng,this._lngLat.lat+.001)),I=c.project(new i.bL(this._lngLat.lng,this._lngLat.lat-.001)).sub(C);g=i.c1(Math.atan2(I.y,I.x))-90}else g=-c.getBearing();else if(b==="horizon"){const C=i.a7(4,6,c.getZoom()),I=i.dB(c.transform);I.y+=C*c.transform.height;const z=a.sub(I),U=i.c1(Math.atan2(z.y,z.x));g=(U>90?U-270:U+90)*(1-C)}return g+=this._rotation,g?`rotateZ(${g}deg)`:""}_update(a){cancelAnimationFrame(this._updateFrameId);const c=this._map;c&&(c.transform.renderWorldCopies&&(this._lngLat=Sl(this._lngLat,this._pos,c.transform)),this._pos=c.project(this._lngLat),a===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),c._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(c._showingGlobe()||c.getTerrain()||c.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(a){return this._offset=i.P.convert(a),this._update(),this}addClassName(a){return this._element.classList.add(a),this}removeClassName(a){return this._element.classList.remove(a),this}toggleClassName(a){return this._element.classList.toggle(a)}_onMove(a){const c=this._map;if(!c)return;const g=this._pointerdownPos,b=this._positionDelta;if(g&&b){if(!this._isDragging){const C=this._clickTolerance||c._clickTolerance;if(a.point.dist(g)<C)return;this._isDragging=!0}this._pos=a.point.sub(b),this._lngLat=c.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new i.x("dragstart"))),this.fire(new i.x("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const a=this._map;a&&(a.off("mousemove",this._onMove),a.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new i.x("dragend")),this._state="inactive"}_addDragHandler(a){const c=this._map,g=this._pos;c&&g&&this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(g),this._pointerdownPos=a.point,this._state="pending",c.on("mousemove",this._onMove),c.on("touchmove",this._onMove),c.once("mouseup",this._onUp),c.once("touchend",this._onUp))}setDraggable(a){this._draggable=!!a;const c=this._map;return c&&(a?(c.on("mousedown",this._addDragHandler),c.on("touchstart",this._addDragHandler)):(c.off("mousedown",this._addDragHandler),c.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(a){return this._occludedOpacity=a||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const kS={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},zS={maxWidth:100,unit:"metric"},LS={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},NS={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},j_=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function na(m=new i.P(0,0),a="bottom"){if(typeof m=="number"){const c=Math.round(Math.sqrt(.5*Math.pow(m,2)));switch(a){case"top":return new i.P(0,m);case"top-left":return new i.P(c,c);case"top-right":return new i.P(-c,c);case"bottom":return new i.P(0,-m);case"bottom-left":return new i.P(c,-c);case"bottom-right":return new i.P(-c,-c);case"left":return new i.P(m,0);case"right":return new i.P(-m,0)}return new i.P(0,0)}return m instanceof i.P||Array.isArray(m)?i.P.convert(m):i.P.convert(m[a]||[0,0])}return{version:x,supported:N.supported,setRTLTextPlugin:i.dC,getRTLTextPluginStatus:i.dD,Map:class extends Jg{constructor(m){T.mark(S.create);const a=m;if((m=i.l({},ju,m)).minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(m.antialias&&i.dx(window)&&(m.antialias=!1,i.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new _f(m.minZoom,m.maxZoom,m.minPitch,m.maxPitch,m.renderWorldCopies),m),this._repaint=!!m.repaint,this._interactive=m.interactive,this._minTileCacheSize=m.minTileCacheSize,this._maxTileCacheSize=m.maxTileCacheSize,this._failIfMajorPerformanceCaveat=m.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=m.preserveDrawingBuffer,this._antialias=m.antialias,this._trackResize=m.trackResize,this._bearingSnap=m.bearingSnap,this._refreshExpiredTiles=m.refreshExpiredTiles,this._fadeDuration=m.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=m.crossSourceCollisions,this._collectResourceTiming=m.collectResourceTiming,this._language=this._parseLanguage(m.language),this._worldview=m.worldview,this._renderTaskQueue=new F_,this._domRenderTaskQueue=new F_,this._controls=[],this._markers=[],this._popups=[],this._mapId=i.aQ(),this._locale=i.l({},$S,m.locale),this._clickTolerance=m.clickTolerance,this._cooperativeGestures=m.cooperativeGestures,this._performanceMetricsCollection=m.performanceMetricsCollection,this._tessellationStep=m.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=m.precompilePrograms,this._scaleFactorChanged=!1,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new yh(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._scaleFactor=m.scaleFactor,this._requestManager=new ge(m.transformRequest,m.accessToken,m.testMode),this._silenceAuthErrors=!!m.testMode,this._contextCreateOptions=m.contextCreateOptions?{...m.contextCreateOptions}:{},typeof m.container=="string"){const c=document.getElementById(m.container);if(!c)throw new Error(`Container '${m.container.toString()}' not found.`);this._container=c}else{if(!(m.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(this._container.childNodes.length>0&&i.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),m.maxBounds&&this.setMaxBounds(m.maxBounds),i.aJ(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new Vg),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._tp.registerParameter(this,["Scaling"],"_scaleFactor",{min:.1,max:10,step:.1},()=>{this.setScaleFactor(this._scaleFactor)}),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new Po(this,m),this._localFontFamily=m.localFontFamily,this._localIdeographFontFamily=m.localIdeographFontFamily,(m.style||!m.testMode)&&this.setStyle(m.style||i.e.DEFAULT_STYLE,{config:m.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),m.projection&&this.setProjection(m.projection),m.hash&&(this._hash=new qf(typeof m.hash=="string"&&m.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){a.center==null&&a.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch});const c=m.bounds;c&&(this.resize(),this.fitBounds(c,i.l({},m.fitBoundsOptions,{duration:0})))}this.resize(),m.attributionControl&&this.addControl(new np({customAttribution:m.customAttribution})),this._logoControl=new Qg,this.addControl(this._logoControl,m.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new i.x(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new i.x(`${c.dataType}dataloading`,c))}),this._interactions=new ev(this)}_getMapId(){return this._mapId}addControl(m,a){if(a===void 0&&(a=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new i.t(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=m.onAdd(this);this._controls.push(m);const g=this._controlPositions[a];return a.indexOf("bottom")!==-1?g.insertBefore(c,g.firstChild):g.appendChild(c),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new i.t(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const a=this._controls.indexOf(m);return a>-1&&this._controls.splice(a,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(m){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const a=!this._moving;return a&&this.fire(new i.x("movestart",m)).fire(new i.x("move",m)),this.fire(new i.x("resize",m)),a&&this.fire(new i.x("moveend",m)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(m){return this.transform.setMaxBounds(i.as.convert(m)),this._update()}setMinZoom(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m?this.setZoom(m):this.fire(new i.x("zoomstart")).fire(new i.x("zoom")).fire(new i.x("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m??22)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m?this.setZoom(m):this.fire(new i.x("zoomstart")).fire(new i.x("zoom")).fire(new i.x("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m?this.setPitch(m):this.fire(new i.x("pitchstart")).fire(new i.x("pitch")).fire(new i.x("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m?this.setPitch(m):this.fire(new i.x("pitchstart")).fire(new i.x("pitch")).fire(new i.x("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getScaleFactor(){return this._scaleFactor}setScaleFactor(m){return this._scaleFactor=m,this.painter.scaleFactor=m,this._tp.refreshUI(),this._scaleFactorChanged=!0,this.style._updateFilteredLayers(a=>a.type==="symbol"),this._update(!0),this}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.renderWorldCopies=m,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(m){return m==="auto"?navigator.language:Array.isArray(m)?m.length===0?void 0:m.map(a=>a==="auto"?navigator.language:a):m}setLanguage(m){const a=this._parseLanguage(m);if(!this.style||a===this._language)return this;this._language=a,this.style.reloadSources();for(const c of this._controls)c._setLanguage&&c._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(m){return this.style&&m!==this._worldview?(this._worldview=m,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(m){return this._lazyInitEmptyStyle(),m?typeof m=="string"&&(m={name:m}):m=null,this._useExplicitProjection=!!m,this._prioritizeAndUpdateProjection(m,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const m=this.transform,a=m.projection.name;let c;a==="globe"&&m.zoom>=i.bV?(m.setMercatorFromTransition(),c=!0):a==="mercator"&&m.zoom<i.bV&&(m.setProjection({name:"globe"}),c=!0),c&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(m,a){return this._updateProjection(m||a||{name:"mercator"})}_updateProjection(m){let a;return a=m.name==="globe"&&this.transform.zoom>=i.bV?this.transform.setMercatorFromTransition():this.transform.setProjection(m),this.style.applyProjectionUpdate(),a&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(m){return this.transform.locationPoint3D(i.bL.convert(m))}unproject(m){return this.transform.pointLocation3D(i.P.convert(m))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(m,a,c){const g=b=>{let C=[];if(Array.isArray(a)){const I=a.filter(z=>this.getLayer(z));C=I.length?this.queryRenderedFeatures(b,{layers:I}):[]}else C=this.queryRenderedFeatures(b,{featureset:a});return C};if(m==="mouseenter"||m==="mouseover"){let b=!1;return{listener:c,targets:a,delegates:{mousemove:I=>{const z=g(I.point);z.length?b||(b=!0,c.call(this,new ji(m,this,I.originalEvent,{features:z}))):b=!1},mouseout:()=>{b=!1}}}}if(m==="mouseleave"||m==="mouseout"){let b=!1;return{listener:c,targets:a,delegates:{mousemove:z=>{g(z.point).length?b=!0:b&&(b=!1,c.call(this,new ji(m,this,z.originalEvent)))},mouseout:z=>{b&&(b=!1,c.call(this,new ji(m,this,z.originalEvent)))}}}}{const b=C=>{const I=g(C.point);I.length&&(C.features=I,c.call(this,C),delete C.features)};return{listener:c,targets:a,delegates:{[m]:b}}}}on(m,a,c){if(typeof a=="function"||c===void 0)return super.on(m,a);if(typeof a=="string"&&(a=[a]),!this._areTargetsValid(a))return this;const g=this._createDelegatedListener(m,a,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(g);for(const b in g.delegates)this.on(b,g.delegates[b]);return this}once(m,a,c){if(typeof a=="function"||c===void 0)return super.once(m,a);if(typeof a=="string"&&(a=[a]),!this._areTargetsValid(a))return this;const g=this._createDelegatedListener(m,a,c);for(const b in g.delegates)this.once(b,g.delegates[b]);return this}off(m,a,c){if(typeof a=="function"||c===void 0)return super.off(m,a);if(typeof a=="string"&&(a=[a]),!this._areTargetsValid(a))return this;const g=this._delegatedListeners?this._delegatedListeners[m]:void 0;return g&&(b=>{for(let C=0;C<b.length;C++){const I=b[C];if(I.listener===c&&_h(I.targets,a)){for(const z in I.delegates)this.off(z,I.delegates[z]);return b.splice(C,1),this}}})(g),this}queryRenderedFeatures(m,a){if(!this.style)return[];if(a!==void 0||m===void 0||m instanceof i.P||Array.isArray(m)||(a=m,m=void 0),m=m||[[0,0],[this.transform.width,this.transform.height]],"featureset"in(a=a||{}))return this._isFeaturesetDescriptorValid(a.featureset)?this.style.queryRenderedFeaturesForInteractions(m,[a],this.transform):[];if(a.layers&&Array.isArray(a.layers)){for(const c of a.layers)if(!this._isValidId(c))return[]}return this.style.queryRenderedFeatures(m,a,this.transform)}querySourceFeatures(m,a){return!m||typeof m=="string"&&!this._isValidId(m)?[]:this.style.querySourceFeatures(m,a)}isPointOnSurface(m){const{name:a}=this.transform.projection;return a!=="globe"&&a!=="mercator"&&i.w(`${a} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(i.P.convert(m))}addInteraction(m,a){return this._interactions.add(m,a),this}removeInteraction(m){return this._interactions.remove(m),this}setStyle(m,a){return a=i.l({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},a),this.style&&m&&a.diff!==!1&&a.localFontFamily===this._localFontFamily&&a.localIdeographFontFamily===this._localIdeographFontFamily&&!a.config?(this.style._diffStyle(m,(c,g)=>{c?(i.w(`Unable to perform style diff: ${String(c.message||c.error||c)}. Rebuilding the style from scratch.`),this._updateStyle(m,a)):g&&this._update(!0)},()=>{this._postStyleLoadEvent()}),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._localFontFamily=a.localFontFamily,this._updateStyle(m,a))}_getUIString(m){const a=this._locale[m];if(a==null)throw new Error(`Missing UI string '${m}'`);return a}_updateStyle(m,a){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),m){const c=i.l({},a);a&&a.config&&(c.initialConfig=a.config,delete c.config),this.style=new Ka(this,c).load(m),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Ka(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(i.w("There is no style added to the map."),!1)}_isValidId(m){return m==null?(this.fire(new i.t(new Error("IDs can't be empty."))),!1):!i.aK(m)||(this.fire(new i.t(new Error(`IDs can't contain special symbols: "${m}".`))),!1)}_isFeaturesetDescriptorValid(m){return"featuresetId"in m?this._isValidId(m.featuresetId):"layerId"in m&&this._isValidId(m.layerId)}_areTargetsValid(m){if(Array.isArray(m)){for(const a of m)if(!this._isValidId(a))return!1;return!0}return this._isFeaturesetDescriptorValid(m)}addSource(m,a){return this._isValidId(m)?(this._lazyInitEmptyStyle(),this.style.addSource(m,a),this._update(!0)):this}isSourceLoaded(m){return!!this._isValidId(m)&&!!this.style&&this.style._isSourceCacheLoaded(m)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(m,a,c){this._lazyInitEmptyStyle(),this.style.addSourceType(m,a,c)}removeSource(m){return this._isValidId(m)?(this.style.removeSource(m),this._updateTerrain(),this._update(!0)):this}getSource(m){return this._isValidId(m)?this.style.getOwnSource(m):null}addImage(m,a,{pixelRatio:c=1,sdf:g=!1,stretchX:b,stretchY:C,content:I}={}){if(this._lazyInitEmptyStyle(),a instanceof HTMLImageElement||ImageBitmap&&a instanceof ImageBitmap){const{width:z,height:U,data:K}=i.q.getImageData(a);this.style.addImage(m,{data:new i.r({width:z,height:U},K),pixelRatio:c,stretchX:b,stretchY:C,content:I,sdf:g,version:0})}else if(a.width===void 0||a.height===void 0)this.fire(new i.t(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:z,height:U}=a,K=a;this.style.addImage(m,{data:new i.r({width:z,height:U},new Uint8Array(K.data)),pixelRatio:c,stretchX:b,stretchY:C,content:I,sdf:g,version:0,userImage:K}),K.onAdd&&K.onAdd(this,m)}}updateImage(m,a){this._lazyInitEmptyStyle();const c=this.style.getImage(m);if(!c)return void this.fire(new i.t(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=a instanceof HTMLImageElement||ImageBitmap&&a instanceof ImageBitmap?i.q.getImageData(a):a,{width:b,height:C,data:I}=g;if(b===void 0||C===void 0)return void this.fire(new i.t(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(b!==c.data.width||C!==c.data.height)return void this.fire(new i.t(new Error(`The width and height of the updated image (${b}, ${C})
                must be that same as the previous version of the image
                (${c.data.width}, ${c.data.height})`)));const z=!(a instanceof HTMLImageElement||ImageBitmap&&a instanceof ImageBitmap);c.data.replace(I,z),this.style.updateImage(m,c)}hasImage(m){return m?!!this.style&&!!this.style.getImage(m):(this.fire(new i.t(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m,a){i.o(this._requestManager.transformRequest(m,i.R.Image),(c,g)=>{a(c,g instanceof HTMLImageElement?i.q.getImageData(g):g)})}listImages(){return this.style.listImages()}addModel(m,a){this._lazyInitEmptyStyle(),this.style.addModel(m,a)}hasModel(m){return m?this.style.hasModel(m):(this.fire(new i.t(new Error("Missing required model id"))),!1)}removeModel(m){this.style.removeModel(m)}listModels(){return this.style.listModels()}addLayer(m,a){return this._isValidId(m.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(m,a),this._update(!0)):this}getSlot(m){const a=this.getLayer(m);return a&&a.slot||null}setSlot(m,a){return this.style.setSlot(m,a),this.style.mergeLayers(),this._update(!0)}addImport(m,a){return this.style.addImport(m,a),this}updateImport(m,a){return typeof a!="string"&&a.id!==m?(this.removeImport(m),this.addImport(a)):(this.style.updateImport(m,a),this._update(!0))}removeImport(m){return this.style.removeImport(m),this}moveImport(m,a){return this.style.moveImport(m,a),this._update(!0)}moveLayer(m,a){return this._isValidId(m)?(this.style.moveLayer(m,a),this._update(!0)):this}removeLayer(m){return this._isValidId(m)?(this.style.removeLayer(m),this._update(!0)):this}getLayer(m){if(!this._isValidId(m))return null;const a=this.style.getOwnLayer(m);return a?a.type==="custom"?a.implementation:a.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(m,a,c){return this._isValidId(m)?(this.style.setLayerZoomRange(m,a,c),this._update(!0)):this}setFilter(m,a,c={}){return this._isValidId(m)?(this.style.setFilter(m,a,c),this._update(!0)):this}getFilter(m){return this._isValidId(m)?this.style.getFilter(m):null}setPaintProperty(m,a,c,g={}){return this._isValidId(m)?(this.style.setPaintProperty(m,a,c,g),this._update(!0)):this}getPaintProperty(m,a){return this._isValidId(m)?this.style.getPaintProperty(m,a):null}setLayoutProperty(m,a,c,g={}){return this._isValidId(m)?(this.style.setLayoutProperty(m,a,c,g),this._update(!0)):this}getLayoutProperty(m,a){return this._isValidId(m)?this.style.getLayoutProperty(m,a):null}getSchema(m){return this.style.getSchema(m)}setSchema(m,a){return this.style.setSchema(m,a),this._update(!0)}getConfig(m){return this.style.getConfig(m)}setConfig(m,a){return this.style.setConfig(m,a),this._update(!0)}getConfigProperty(m,a){return this.style.getConfigProperty(m,a)}setConfigProperty(m,a,c){return this.style.setConfigProperty(m,a,c),this._update(!0)}getFeaturesetDescriptors(m){return this.style.getFeaturesetDescriptors(m)}setLights(m){if(this._lazyInitEmptyStyle(),m&&m.length===1&&m[0].type==="flat"){const a=m[0];a.properties?this.style.setFlatLight(a.properties,a.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(m),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const m=this.style.getLights()||[];return m.length===0&&m.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),m}setLight(m,a={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:m}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(m){return this._lazyInitEmptyStyle(),!m&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(m),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(m){return this._lazyInitEmptyStyle(),this.style.setFog(m),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setColorTheme(m){return this._lazyInitEmptyStyle(),this.style.setColorTheme(m),this._update(!0)}setCamera(m){return this.style.setCamera(m),this._triggerCameraUpdate(m)}_triggerCameraUpdate(m){return this._update(this.transform.setOrthographicProjectionAtLowPitch(m["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(m){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(i.bL.convert(m),this.transform):0}setFeatureState(m,a){return m.source&&!this._isValidId(m.source)?this:(this.style.setFeatureState(m,a),this._update())}removeFeatureState(m,a){return m.source&&!this._isValidId(m.source)?this:(this.style.removeFeatureState(m,a),this._update())}getFeatureState(m){return m.source&&!this._isValidId(m.source)?null:this.style.getFeatureState(m)}_updateContainerDimensions(){if(!this._container)return;const m=this._container.getBoundingClientRect().width||400,a=this._container.getBoundingClientRect().height||300;let c,g,b,C=this._container;for(;C&&(!g||!b);){const I=window.getComputedStyle(C).transform;I&&I!=="none"&&(c=I.match(/matrix.*\((.+)\)/)[1].split(", "),c[0]&&c[0]!=="0"&&c[0]!=="1"&&(g=c[0]),c[3]&&c[3]!=="0"&&c[3]!=="1"&&(b=c[3])),C=C.parentElement}this._containerWidth=g?Math.abs(m/g):m,this._containerHeight=b?Math.abs(a/b):a}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&i.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const m=this._container;m.classList.add("mapboxgl-map"),(this._missingCSSCanary=V("div","mapboxgl-canary",m)).style.visibility="hidden",this._detectMissingCSS();const a=this._canvasContainer=V("div","mapboxgl-canvas-container",m);this._canvas=V("canvas","mapboxgl-canvas",a),this._interactive&&(a.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const c=this._controlContainer=V("div","mapboxgl-control-container",m),g=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach(b=>{g[b]=V("div",`mapboxgl-ctrl-${b}`,c)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,a){const c=i.q.devicePixelRatio||1;this._canvas.width=c*Math.ceil(m),this._canvas.height=c*Math.ceil(a),this._canvas.style.width=`${m}px`,this._canvas.style.height=`${a}px`}_addMarker(m){this._markers.push(m)}_removeMarker(m){const a=this._markers.indexOf(m);a!==-1&&this._markers.splice(a,1)}_addPopup(m){this._popups.push(m)}_removePopup(m){const a=this._popups.indexOf(m);a!==-1&&this._popups.splice(a,1)}_setupPainter(){const m=i.l({},N.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),a=this._canvas.getContext("webgl2",m);a?(dt(a,!0),this.painter=new ac(a,this._contextCreateOptions,this.transform,this._scaleFactor,this._tp),this.on("data",c=>{c.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),i.m.testSupport(a)):this.fire(new i.t(new Error("Failed to initialize WebGL")))}_contextLost(m){m.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new i.x("webglcontextlost",{originalEvent:m}))}_contextRestored(m){this._setupPainter(),this.resize(),this._update(),this.fire(new i.x("webglcontextrestored",{originalEvent:m}))}_onMapScroll(m){if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(m){return this.style?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_requestDomTask(m){!this.loaded()||this.loaded()&&!this.isMoving()?m():this._domRenderTaskQueue.add(m)}_render(m){let a;this.fire(new i.x("renderstart")),++this._frameId;const c=this.painter.context.extTimerQuery,g=i.q.now(),b=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(a=b.createQuery(),b.beginQuery(c.TIME_ELAPSED_EXT,a)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(m),this._domRenderTaskQueue.run(m),this._removed)return;this._updateProjectionTransition();const C=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const K=this.transform.zoom,G=this.transform.pitch,Q=i.q.now(),ne=new i.a3(K,{now:Q,fadeDuration:C,pitch:G,transition:this.style.transition});this.style.update(ne)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let I=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),I=this._updateAverageElevation(g),this.style.updateSources(this.transform),this._forceMarkerAndPopupUpdate()):I=this._updateAverageElevation(g);const z=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,C,this._crossSourceCollisions,this.painter.replacementSource,this._scaleFactorChanged);if(this._scaleFactorChanged&&(this._scaleFactorChanged=!1),z&&(this._placementDirty=z.needsRerender),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:C,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new i.x("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,T.mark(S.load),this.fire(new i.x("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),a){const K=i.q.now()-g;b.endQuery(c.TIME_ELAPSED_EXT),setTimeout(()=>{const G=b.getQueryParameter(a,b.QUERY_RESULT)/1e6;b.deleteQuery(a),this.fire(new i.x("gpu-timing-frame",{cpuTime:K,gpuTime:G}))},50)}if(this.listens("gpu-timing-layer")){const K=this.painter.collectGpuTimers();setTimeout(()=>{const G=this.painter.queryGpuTimers(K);this.fire(new i.x("gpu-timing-layer",{layerTimes:G}))},50)}if(this.listens("gpu-timing-deferred-render")){const K=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const G=this.painter.queryGpuTimeDeferredRender(K);this.fire(new i.x("gpu-timing-deferred-render",{gpuTime:G}))},50)}const U=this._sourcesDirty||this._styleDirty||this._placementDirty||I;if(U||this._repaint)this.triggerRepaint();else{const K=this.idle();if(K&&(I=this._updateAverageElevation(g,!0)),I)this.triggerRepaint();else if(this._triggerFrame(!1),K&&(this.fire(new i.x("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const G=this._calculateSpeedIndex();this.fire(new i.x("speedindexcompleted",{speedIndex:G})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||U||(this._fullyLoaded=!0,T.mark(S.fullLoad),this._performanceMetricsCollection&&gt(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(m){for(const a of this._markers)m&&!this.getRenderWorldCopies()&&(a._lngLat=a._lngLat.wrap()),a._update();for(const a of this._popups)!m||this.getRenderWorldCopies()||a._trackPointer||(a._lngLat=a._lngLat.wrap()),a._update()}_updateAverageElevation(m,a=!1){const c=b=>(this.transform.averageElevation=b,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&c(0);const g=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(g||(a||m-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(m)){const b=this.transform.averageElevation;let C=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(C)?C=0:this._averageElevationLastSampledAt=m;const I=Math.abs(b-C);if(I>1){if(this._isInitialLoad||g)return this._averageElevation.jumpTo(C),c(C);this._averageElevation.easeTo(C,m,300)}else if(I>1e-4)return this._averageElevation.jumpTo(C),c(C)}return!!this._averageElevation.isEasing(m)&&c(this._averageElevation.getValue(m))}_authenticate(){Pe(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,m=>{if(m&&(m.message===we||m.status===401)){const a=this.painter.context.gl;dt(a,!1),this._logoControl instanceof Qg&&this._logoControl._updateLogo(),a&&a.clear(a.DEPTH_BUFFER_BIT|a.COLOR_BUFFER_BIT|a.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new i.t(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),ze(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&yt(this._requestManager._customAccessToken,{map:this,skuToken:this._requestManager._skuToken,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const m=this._isDragging();this.painter.updateTerrain(this.style,m)}_calculateSpeedIndex(){const m=this.painter.canvasCopy(),a=this.painter.getCanvasCopiesAndTimestamps();a.timeStamps.push(performance.now());const c=this.painter.context.gl,g=c.createFramebuffer();function b(C){c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,C,0);const I=new Uint8Array(c.drawingBufferWidth*c.drawingBufferHeight*4);return c.readPixels(0,0,c.drawingBufferWidth,c.drawingBufferHeight,c.RGBA,c.UNSIGNED_BYTE,I),I}return c.bindFramebuffer(c.FRAMEBUFFER,g),this._canvasPixelComparison(b(m),a.canvasCopies.map(b),a.timeStamps)}_canvasPixelComparison(m,a,c){let g=c[1]-c[0];const b=m.length/4;for(let C=0;C<a.length;C++){const I=a[C];let z=0;for(let U=0;U<I.length;U+=4)I[U]===m[U]&&I[U+1]===m[U+1]&&I[U+2]===m[U+2]&&I[U+3]===m[U+3]&&(z+=1);g+=(c[C+2]-c[C+1])*(1-z/b)}return g}remove(){this._hash&&this._hash.remove();for(const a of this._controls)a.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const m=this.painter.context.gl.getExtension("WEBGL_lose_context");m&&m.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),mt.delete(this.painter.context.gl),wt.remove(),$e.remove(),this._removed=!0,this.fire(new i.x("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(m){this._renderNextFrame=this._renderNextFrame||m,this.style&&!this._frame&&(this._frame=i.q.frame(a=>{const c=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,c&&this._render(a)}))}_preloadTiles(m){const a=this.style?this.style.getSourceCaches():[];return i.bg(a,(c,g)=>c._preloadTiles(m,g),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(m){this._trackResize&&this.resize({originalEvent:m})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(m){this._showParseStatus!==m&&(this._showParseStatus=m,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(m){this._showTerrainWireframe!==m&&(this._showTerrainWireframe=m,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(m){this._showLayers2DWireframe!==m&&(this._showLayers2DWireframe=m,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(m){this._showLayers3DWireframe!==m&&(this._showLayers3DWireframe=m,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(m){this._speedIndexTiming!==m&&(this._speedIndexTiming=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,this._tp.refreshUI(),m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(m){this._showTileAABBs!==m&&(this._showTileAABBs=m,this._tp.refreshUI(),m&&this._update())}_setCacheLimits(m,a){i.dy(m,a)}get version(){return x}},NavigationControl:class{constructor(m={}){this.options=i.l({},wl,m),this._container=V("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(i.aJ(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",a=>{this._map&&this._map.zoomIn({},{originalEvent:a})}),V("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",a=>{this._map&&this._map.zoomOut({},{originalEvent:a})}),V("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(i.aJ(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",a=>{const c=this._map;c&&(this.options.visualizePitch?c.resetNorthPitch({},{originalEvent:a}):c.resetNorth({},{originalEvent:a}))}),this._compassIcon=V("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const m=this._map;if(!m)return;const a=m.getZoom(),c=a===m.getMaxZoom(),g=a===m.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())}_rotateCompassArrow(){const m=this._map;if(!m)return;const a=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(m.transform.pitch*(Math.PI/180)),.5)}) rotateX(${m.transform.pitch}deg) rotateZ(${m.transform.angle*(180/Math.PI)}deg)`:`rotate(${m.transform.angle*(180/Math.PI)}deg)`;m._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=a)})}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),m.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&m.on("pitch",this._rotateCompassArrow),m.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ts(m,this._compass,this.options.visualizePitch)),this._container}onRemove(){const m=this._map;m&&(this._container.remove(),this.options.showZoom&&m.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&m.off("pitch",this._rotateCompassArrow),m.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(m,a){const c=V("button",m,this._container);return c.type="button",c.addEventListener("click",a),c}_setButtonTitle(m,a){if(!this._map)return;const c=this._map._getUIString(`NavigationControl.${a}`);m.setAttribute("aria-label",c),m.firstElementChild&&m.firstElementChild.setAttribute("title",c)}},GeolocateControl:class extends i.E{constructor(m={}){super();const a=navigator.geolocation;this.options=i.l({geolocation:a},kS,m),i.aJ(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=xl(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(m){return this._map=m,this._container=V("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(m){const a=(c=!!this.options.geolocation)=>{this._supportsGeolocation=c,m(c)};this._supportsGeolocation!==void 0?m(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(c=>a(c.state!=="denied")).catch(()=>a()):a()}_isOutOfMapMaxBounds(m){const a=this._map.getMaxBounds(),c=m.coords;return!!a&&(c.longitude<a.getWest()||c.longitude>a.getEast()||c.latitude<a.getSouth()||c.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(m){if(this._map){if(this._isOutOfMapMaxBounds(m))return this._setErrorState(),this.fire(new i.x("outofmaxbounds",m)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=m,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(m),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(m),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new i.x("geolocate",m)),this._finish()}}_updateCamera(m){const a=new i.bL(m.coords.longitude,m.coords.latitude),c=m.coords.accuracy,g=this._map.getBearing(),b=i.l({bearing:g},this.options.fitBoundsOptions);this._map.fitBounds(a.toBounds(c),b,{geolocateSource:!0})}_updateMarker(m){if(m){const a=new i.bL(m.coords.longitude,m.coords.latitude);this._accuracyCircleMarker.setLngLat(a).addTo(this._map),this._userLocationDotMarker.setLngLat(a).addTo(this._map),this._accuracy=m.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const m=this._map.transform,a=i.bE(1,m._center.lat)*m.worldSize,c=Math.ceil(2*this._accuracy*a);this._circleElement.style.width=`${c}px`,this._circleElement.style.height=`${c}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(m){if(this._map){if(this.options.trackUserLocation)if(m.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",a),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",a),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(m.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new i.x("error",m)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(m){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",a=>a.preventDefault()),this._geolocateButton=V("button","mapboxgl-ctrl-geolocate",this._container),V("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",m===!1){i.w("Geolocation support is not available so the GeolocateControl will be disabled.");const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",a),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",a)}else{const a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",a),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=V("div","mapboxgl-user-location"),this._dotElement.appendChild(V("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(V("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Ks({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=V("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ks({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",a=>{a.geolocateSource||this._watchState!=="ACTIVE_LOCK"||a.originalEvent&&a.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new i.x("trackuserlocationend")))})}}_onDeviceOrientation(m){this._userLocationDotMarker&&(m.webkitCompassHeading?this._heading=m.webkitCompassHeading:m.absolute===!0&&(this._heading=-1*m.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return i.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new i.x("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new i.x("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new i.x("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let m;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(m={maximumAge:6e5,timeout:0},this._noTimeout=!0):(m=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,m),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const m=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(a=>{a==="granted"&&m()}).catch(console.error):m()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:np,ScaleControl:class{constructor(m={}){this.options=i.l({},zS,m),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),i.aJ(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const m=this.options.maxWidth||100,a=this._map,c=a._containerHeight/2,g=a._containerWidth/2-m/2,b=a.unproject([g,c]),C=a.unproject([g+m,c]),I=b.distanceTo(C);if(this.options.unit==="imperial"){const z=3.2808*I;z>5280?this._setScale(m,z/5280,"mile"):this._setScale(m,z,"foot")}else this.options.unit==="nautical"?this._setScale(m,I/1852,"nautical-mile"):I>=1e3?this._setScale(m,I/1e3,"kilometer"):this._setScale(m,I,"meter")}_setScale(m,a,c){this._map._requestDomTask(()=>{const g=function(C){const I=Math.pow(10,`${Math.floor(C)}`.length-1);let z=C/I;return z=z>=10?10:z>=5?5:z>=3?3:z>=2?2:z>=1?1:function(U){const K=Math.pow(10,Math.ceil(-Math.log(U)/Math.LN10));return Math.round(U*K)/K}(z),I*z}(a),b=g/a;this._container.innerHTML=this._isNumberFormatSupported&&c!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:c}).format(g):`${g}&nbsp;${LS[c]}`,this._container.style.width=m*b+"px"})}onAdd(m){return this._map=m,this._language=m.getLanguage(),this._container=V("div","mapboxgl-ctrl mapboxgl-ctrl-scale",m.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(m){this._language=m,this._update()}setUnit(m){this.options.unit=m,this._update()}},FullscreenControl:class{constructor(m={}){this._fullscreen=!1,m&&m.container&&(m.container instanceof HTMLElement?this._container=m.container:i.w("Full screen control 'container' must be a DOM element.")),i.aJ(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=V("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",i.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const m=this._fullscreenButton=V("button","mapboxgl-ctrl-fullscreen",this._controlContainer);V("span","mapboxgl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",m)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends i.E{constructor(m){super(),this.options=i.l(Object.create(NS),m),i.aJ(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(m&&m.className?m.className.trim().split(/\s+/):[])}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&m.on("preclick",this._onClose),this.options.closeOnMove&&m.on("move",this._onClose),m.on("remove",this.remove),this._update(),m._addPopup(this),this._focusFirstElement(),this._trackPointer?(m.on("mousemove",this._onMouseEvent),m.on("mouseup",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")):m.on("move",this._update),this.fire(new i.x("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const m=this._map;return m&&(m.off("move",this._update),m.off("move",this._onClose),m.off("preclick",this._onClose),m.off("click",this._onClose),m.off("remove",this.remove),m.off("mousemove",this._onMouseEvent),m.off("mouseup",this._onMouseEvent),m.off("drag",this._onMouseEvent),m._canvasContainer&&m._canvasContainer.classList.remove("mapboxgl-track-pointer"),m._removePopup(this),this._map=void 0),this.fire(new i.x("close")),this}getLngLat(){return this._lngLat}setLngLat(m){this._lngLat=i.bL.convert(m),this._pos=null,this._trackPointer=!1,this._update();const a=this._map;return a&&(a.on("move",this._update),a.off("mousemove",this._onMouseEvent),a._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const m=this._map;return m&&(m.off("move",this._update),m.on("mousemove",this._onMouseEvent),m.on("drag",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(document.createTextNode(m))}setHTML(m){const a=document.createDocumentFragment(),c=document.createElement("body");let g;for(c.innerHTML=m;g=c.firstChild,g;)a.appendChild(g);return this.setDOMContent(a)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){let a=this._content;if(a)for(;a.hasChildNodes();)a.firstChild&&a.removeChild(a.firstChild);else a=this._content=V("div","mapboxgl-popup-content",this._container||void 0);if(a.appendChild(m),this.options.closeButton){const c=this._closeButton=V("button","mapboxgl-popup-close-button",a);c.type="button",c.setAttribute("aria-label","Close popup"),c.setAttribute("aria-hidden","true"),c.innerHTML="&#215;",c.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(m){return this._classList.add(m),this._updateClassList(),this}removeClassName(m){return this._classList.delete(m),this._updateClassList(),this}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){let a;return this._classList.delete(m)?a=!1:(this._classList.add(m),a=!0),this._updateClassList(),a}_onMouseEvent(m){this._update(m.point)}_getAnchor(m){if(this.options.anchor)return this.options.anchor;const a=this._map,c=this._container,g=this._pos;if(!a||!c||!g)return"bottom";const b=c.offsetWidth,C=c.offsetHeight,I=g.x<b/2,z=g.x>a.transform.width-b/2;if(g.y+m<C)return I?"top-left":z?"top-right":"top";if(g.y>a.transform.height-C){if(I)return"bottom-left";if(z)return"bottom-right"}return I?"left":z?"right":"bottom"}_updateClassList(){const m=this._container;if(!m)return;const a=[...this._classList];a.push("mapboxgl-popup"),this._anchor&&a.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&a.push("mapboxgl-popup-track-pointer"),m.className=a.join(" ")}_update(m){const a=this._map,c=this._content;if(!a||!this._lngLat&&!this._trackPointer||!c)return;let g=this._container;if(g||(g=this._container=V("div","mapboxgl-popup",a.getContainer()),this._tip=V("div","mapboxgl-popup-tip",g),g.appendChild(c)),this.options.maxWidth&&g.style.maxWidth!==this.options.maxWidth&&(g.style.maxWidth=this.options.maxWidth),a.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Sl(this._lngLat,this._pos,a.transform)),!this._trackPointer||m){const b=this._pos=this._trackPointer&&m instanceof i.P?m:a.project(this._lngLat),C=na(this.options.offset),I=this._anchor=this._getAnchor(C.y),z=na(this.options.offset,I),U=b.add(z).round();a._requestDomTask(()=>{this._container&&I&&(this._container.style.transform=`${Cl[I]} translate(${U.x}px,${U.y}px)`)})}if(!this._marker&&a._showingGlobe()){const b=i.dz(a.transform,this._lngLat)?0:1;this._setOpacity(b)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const m=this._container.querySelector(j_);m&&m.focus()}_onClose(){this.remove()}_setOpacity(m){this._container&&(this._container.style.opacity=`${m}`),this._content&&(this._content.style.pointerEvents=m?"auto":"none")}},Marker:Ks,Style:Ka,LngLat:i.bL,LngLatBounds:i.as,Point:i.P,MercatorCoordinate:i.a5,FreeCameraOptions:nc,Evented:i.E,config:i.e,prewarm:i.dE,clearPrewarmedResources:i.dF,get accessToken(){return i.e.ACCESS_TOKEN},set accessToken(m){i.e.ACCESS_TOKEN=m},get baseApiUrl(){return i.e.API_URL},set baseApiUrl(m){i.e.API_URL=m},get workerCount(){return i.dG.workerCount},set workerCount(m){i.dG.workerCount=m},get maxParallelImageRequests(){return i.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(m){i.e.MAX_PARALLEL_IMAGE_REQUESTS=m},clearStorage(m){i.dH(m)},get workerUrl(){return i.dI.workerUrl},set workerUrl(m){i.dI.workerUrl=m},get workerClass(){return i.dI.workerClass},set workerClass(m){i.dI.workerClass=m},get workerParams(){return i.dI.workerParams},set workerParams(m){i.dI.workerParams=m},get dracoUrl(){return i.dJ()},set dracoUrl(m){i.dK(m)},get meshoptUrl(){return i.dL()},set meshoptUrl(m){i.dM(m)},setNow:i.q.setNow,restoreNow:i.q.restoreNow}});var p=s;return p})})(X8);var l0e=X8.exports;const Zc=hl(l0e),To={"form-container":"_form-container_e0mkt_3","complaint-form":"_complaint-form_e0mkt_25","form-group":"_form-group_e0mkt_37","form-select":"_form-select_e0mkt_61","form-textarea":"_form-textarea_e0mkt_77","location-group":"_location-group_e0mkt_95","location-input":"_location-input_e0mkt_119","map-container":"_map-container_e0mkt_131","map-image":"_map-image_e0mkt_145","form-input":"_form-input_e0mkt_157","date-input":"_date-input_e0mkt_169","time-input":"_time-input_e0mkt_177","notification-options":"_notification-options_e0mkt_185","radio-label":"_radio-label_e0mkt_195","submit-button":"_submit-button_e0mkt_221","checkbox-anonymous-complaint":"_checkbox-anonymous-complaint_e0mkt_289"},Y8=()=>{const e=()=>{window.history.back()};return he.jsx("div",{style:{display:"flex",justifyContent:"center",width:"100%"},children:he.jsx(Di,{type:"link",icon:he.jsx(ehe,{}),onClick:e,style:{fontSize:"16px",color:"black",width:"50%"},children:"Atrás"})})},c0e="pk.eyJ1IjoicmVjaW5vcyIsImEiOiJjbTNuMDBrcmYwNmc1MnNweWM3ejJwaXZlIn0.CXW_tWFPWeZuooqOyfn4RQ",JL="https://safeplace.site/api";Zc.accessToken=c0e;const u0e=()=>{const{id:e}=_F(),t=ql(),[n,r]=_.useState(!1),[s,d]=_.useState(""),[p,i]=_.useState(""),[x,S]=_.useState(""),[T,M]=_.useState(""),[$,L]=_.useState(""),[N,V]=_.useState(""),[B,j]=_.useState(null),[H,W]=_.useState(""),X=_.useRef(null),ee=_.useRef(null),J=_.useRef(null);_.useEffect(()=>{(async()=>{if(e)try{const ae=(await $i.get(`${JL}/user-form/${e}`)).data;if(r(ae.isAnonymous||!1),d(ae.complaintType||""),S(ae.specificOtherComplaintType||""),i(ae.status||""),L(ae.description||""),V(Wo(ae.date).format("YYYY-MM-DD")||""),M(Wo(ae.time,"HH:mm").format("HH:mm")),j(ae.location||null),W(ae.locationDescription||"error"),ae.location&&ee.current){const{lat:ce,lng:Ce}=ae.location;J.current=new Zc.Marker().setLngLat([Ce,ce]).addTo(ee.current),ee.current.setCenter([Ce,ce])}}catch(se){console.error("Error cargando la denuncia:",se),Vi.error("No se pudo cargar la denuncia.")}})()},[e]),_.useEffect(()=>{ee.current||(ee.current=new Zc.Map({container:X.current,style:"mapbox://styles/mapbox/streets-v12",center:[-89.218191,13.69294],zoom:12}),ee.current.addControl(new Zc.NavigationControl),ee.current.on("click",re=>{const{lng:se,lat:ae}=re.lngLat;J.current&&J.current.remove(),J.current=new Zc.Marker().setLngLat([se,ae]).addTo(ee.current),j({lat:ae.toFixed(5),lng:se.toFixed(5)})}))},[]);const Y=async re=>{if(re.preventDefault(),!s){alert("Por favor, seleccione un tipo de denuncia.");return}if(s==="otro"&&!x.trim()){alert("Por favor, especifique el tipo de denuncia.");return}if(!$.trim()){alert("Por favor, escriba una descripción.");return}if(!N){alert("Por favor, seleccione una fecha.");return}if(!B){alert("Por favor, seleccione una ubicación en el mapa.");return}try{const se={isAnonymous:n,complaintType:s,specificOtherComplaintType:x,status:p,description:$,locationDescription:H,date:N,time:T,location:B};await $i.put(`${JL}/user-form/${e}`,se),Vi.success("Denuncia actualizada exitosamente"),t("/admin-dashboard")}catch(se){console.error("Error al actualizar la denuncia:",se),Vi.error("Error al actualizar la denuncia.")}};return he.jsx("div",{className:To["form-container"],children:he.jsxs("form",{className:To["complaint-form"],onSubmit:Y,children:[he.jsx(Y8,{}),he.jsx("div",{className:To["form-group"],children:he.jsxs("label",{children:[he.jsx("input",{type:"checkbox",checked:n,onChange:re=>r(re.target.checked)}),"Denuncia Anónima"]})}),he.jsxs("div",{className:To["form-group"],children:[he.jsx("label",{children:"Tipo de denuncia:"}),he.jsxs("select",{className:To["form-select"],value:s,onChange:re=>d(re.target.value),children:[he.jsx("option",{value:"Acoso",children:"Acoso"}),he.jsx("option",{value:"Discriminacion",children:"Discriminación"}),he.jsx("option",{value:"Violencia",children:"Violencia"}),he.jsx("option",{value:"Corrupcion y fraude",children:"Corrupción y fraude"}),he.jsx("option",{value:"Incumplimiento de normativas",children:"Incumplimiento de normativas"}),he.jsx("option",{value:"Abuso y maltrato",children:"Abuso y maltrato"}),he.jsx("option",{value:"Contenido prohibido",children:"Contenido prohibido"}),he.jsx("option",{value:"Crimen",children:"Crimen"}),he.jsx("option",{value:"Drogas",children:"Drogas"}),he.jsx("option",{value:"Terrorismo",children:"Terrorismo"}),he.jsx("option",{value:"otro",children:"Otro"})]}),s==="otro"&&he.jsx("input",{className:To["form-textarea"],type:"text",placeholder:"Especifique el tipo de denuncia",value:x,onChange:re=>S(re.target.value)})]}),he.jsxs("div",{className:To["form-group"],children:[he.jsx("label",{children:"Estatus de la denuncia:"}),he.jsxs("select",{className:To["form-select"],value:p,onChange:re=>i(re.target.value),children:[he.jsx("option",{value:"Pendiente",children:"Pendiente"}),he.jsx("option",{value:"En proceso",children:"En proceso"}),he.jsx("option",{value:"Resuelto",children:"Resuelto"})]})]}),he.jsxs("div",{className:To["form-group"],children:[he.jsx("label",{children:"Descripción:"}),he.jsx("textarea",{className:To["form-textarea"],placeholder:"Descripción",value:$,onChange:re=>L(re.target.value)})]}),he.jsxs("div",{className:`${To["form-group"]} ${To["location-group"]}`,children:[he.jsxs("div",{className:To["location-input"],children:[he.jsx("label",{children:"Ubicación:"}),he.jsx("textarea",{className:To["form-textarea"],value:B?`Lat: ${B.lat}, Lng: ${B.lng}`:"Seleccione una ubicación en el mapa",readOnly:!0}),he.jsx("textarea",{className:To["form-textarea"],placeholder:"Ubicación descripción",value:H,onChange:re=>W(re.target.value)})]}),he.jsxs("div",{className:To["form-group"],children:[he.jsx("label",{children:"Mapa:"}),he.jsx("div",{ref:X,className:To["map-container"]})]})]}),he.jsxs("div",{className:To["form-group"],children:[he.jsx("label",{children:"Fecha:"}),he.jsx("input",{type:"date",className:`${To["form-input"]} ${To["date-input"]}`,value:N,onChange:re=>V(re.target.value)})]}),he.jsxs("div",{className:To["form-group"],children:[he.jsx("label",{children:"Hora:"}),he.jsx(Wm,{className:To["time-input"],format:"HH:mm",placeholder:"Seleccionar Hora",value:Wo(T,"HH:mm"),onChange:re=>M(re.target.value)})]}),he.jsx("div",{className:To["form-group"],children:he.jsx("button",{type:"submit",className:To["submit-button"],children:"Guardar Cambios"})})]})})},d0e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgCAYAAACLz2ctAAAHrElEQVR4Xu3djXEbNxCGYbkDpwIrFUTpgKkgTgWhK7BSgZMKrFRgdRC7gqgDKxWYHSQlBDtDThSPSCwWP7vAvTdzI3pucQC+e3zUHX/04oqFBBwTeOHYN12TwBUAQeCaAABd46dzAGLANQEAusZP5wDEgGsCAHSNn84BiAHXBADoGj+dAxADrgkA0DV+OgcgBlwTiATwZUpin9ZXx0Tk36suf6WJ3a06uZJ5RQC4SwN+n9brtK6M7uvj8gsIr1zfjCDY3qX1tuR/zGK1m0fodQYUfB/S+noxUJbpbBqhF8A/wPc/q5tF6AHw1+NTr+VssXKbTSIcDVAuND5v7GKj5D/N5hCOBsjZL89xUwhHA/xyvN2SPwzbrtgMwpEA5elXALLoEtgEwpEAb46//+nip0oSWB7hSIC7FOifSleHVPe7sjZq2XdpYPsGg1sa4UiActNZ7v9plsdU9L2mMHBNyXxz01gWIQBzh96+vSXAZZ+OAWgHlmvZGuCSCAGYY2Tf3gPgcggBaAeWa9kL4FIIAZhjZN/eE+AyCAFoB5Zr2RvgEggBmGNk3z4C4PQIAWgHlms5CuDUCAGYY2TfPhLgtAgBaAeWazka4JQIAZhjZN/uAXA6hAC0A8u19AI4FUIA5hjZt3sCnAYhAO3Aci29AU6BEIA5RvbtEQCGRwhAO7BcyygAQyMEYI6RfXskgGERAtAOLNcyGsCQCAGYY2TfHhFgOIQAtAPLtYwKMBRCAOYY2bdHBhgGIQDtwHItowMMgRCAOUb27TMAdEcIQDuwXMtZALoiBGCOkX37TADdEALQDizXcjaALggBmGNk3z4jwOEIAWgHlms5K0CZ1w9pfchNsMV2ALZI8fl9zAzwTZrSfb9o/tszAPulDEBFtgBUhGQsAaAiOAAqQjKWAFARHAAVIRlLAKgIDoCKkIwlAFQEB0BFSIuUyPdz75Rz4So4BTX7d0Qrj/WwMgCmqLf0JeXDZCk7AiAAlVT6lAEQgH1kKfcKQAAqqfQpAyAA+8hS7hWAAFRS6VMGQAD2kaXcKwABqKTSpwyAAOwjS7lXAAJQSaVPGQAB2EeWcq/yKtROWSt/HvZeWVtVxpsRquKjcW0CAKxNkPZVCQCwKj4a1yYAwNoEaV+VAACr4qNxbQIArE2Q9lUJALAqPhrXJgDA2gRpX5UAAKvio3FtAgCsTZD2VQkAsCo+GtcmAMDaBGlflQAAq+KjcW0CAKxNcO32L9P0rtMqPx96TBWAPVKde583afg/p3X3BN9pRof04DGtvx1/Vs8UgNURLrMDOcu9S+v+eMbLTewuFcj7BqsWAFbFt0xjwfchrfKNXiWLnA3li4zkp2kBoCm2pRpZ8Z1C+Cc9kC81NyEE4FKWiidTi68aIQCLj9kyDVrhq0IIwGU8FU2kNT4zQgAWHbclinvhMyEE4BKm1JPoja8YIQDVx276wlH4niKUr1k+XEoOgNO7Uk1gNL7ToOTWzMXv+gag6vhNXeSF7xTaT+nBx3MJAnBqW9nBe+OTAQo+QfjsAsDsMZy2IAI+CU9eKfkGgNM6Mg08Cr7T4L89dzHCGdB0fEM3ioZPwpLXih+eSw2AoS0VDy4iPpnE2QsRABYf47ANouKTwHgKDsumzcAi47t4L5AzYBsAnnuJjE9yuU+rvGn12QWAnnTq+46O7+IFiGwEYD0Crz3MgC/7uREAevGp63cGfPK7n9x+kRvRZxcA1kHwaF2DTz5O+Tatso+ei+CTWy+HXCcAzCUUa3sNPrkQuE/rdVo/d0SoxsfvgLFw5UbTAt+pj14Ii/ABMHfI42wXfPKXjm4KhyS/f537ozOtERbjA2Dh0XQq74Gv9ZnQhA+ATqIKuu2JrxVCMz4AFkhwKB2B7zSt2/TgvWGOVfgAaEh8UJOR+PZHfKW3ZqrxAXCQpsJuNoMPgIUyBpRvCh8AB4gq6KIGn9xk/ljQ1y7Vyt8PdnnafTpOXgkpOGodSzeJjzNgR1EFu94sPgAWKOlUuml8AOykSrnbzeMDoFJKh7IZ8B3SvOX9fPKz28JFSLdoL+5YvhB8X9i1vLGg9GpX3rwgb2Iovdodgo8zYKGAhuWlAJfEB8CGogp3VQJwWXwALFTTsFwLcGl8AGwoqnBXWoDyZtK7gn2H/53v67lwEVJwdBuWagGePseh6Xo6fJwBNYe1T01rgFPiA2AfXJq9tgQ4LT4Aaqj0qWkFcGp8kQHK1Z98iHqm5T4NVsatWVoAnB7faIASmHwgetXl7LeAPjNhLUBB/elMYLKPsK9waA/yyKtgCetv7cAmrOsBsGUMh7Sz7q/tlg54JEAZ25e0XpcOcpL6yABD4hv9FCz9yUf/bicBVTrMqADD4vMAuPLTcESAofF5AFz5LBgNYHh8XgClX3mP2q70OS54fSSAU+DzBGh9R3Bkg1EAToPPE+AJkvZ+WGR4p7FFADgVvggAZQzyVCxXx3KjeubFG+B0+KIAPKG7Tg9ep/VVWuXxbIu8dPioHPQ+1f2orNWWyXsHBeFUy+gb0VOFw2D7JwDA/hnTw4UEAAgP1wQA6Bo/nQMQA64JANA1fjoHIAZcEwCga/x0DkAMuCYAQNf46RyAGHBNAICu8dM5ADHgmsC/Z6Fev4hyw3sAAAAASUVORK5CYII=",{Title:h0e,Text:f0e}=Gl,p0e=()=>{const{id:e}=_F(),[t,n]=_.useState(null);return _.useEffect(()=>{(async()=>{try{const s=await $i.get(`https://safeplace.site/api/user-form/${e}`);n(s.data)}catch{Vi.error("Error al cargar la denuncia")}})()},[e]),he.jsx(Fm,{className:"review-complaint-panel",bordered:!0,children:he.jsxs("div",{className:"review-complaint-container",children:[he.jsx("img",{src:d0e,alt:"complaintDetailsImg",className:"complaint-details-image"}),he.jsxs("div",{className:"review-complaint-content",children:[he.jsx(h0e,{level:3,children:"Ver o editar denuncia"}),he.jsxs(f0e,{style:{fontFamily:"Arial"},children:["Denuncia ID: ",e]})]})]})})},kE=()=>he.jsx(he.Fragment,{children:he.jsxs("main",{children:[he.jsx("div",{className:"review-panel-description",children:he.jsx(p0e,{})}),he.jsx("div",{className:"review-complaint-form",children:he.jsx(u0e,{})})]})}),m0e={"user-dashboard-buttons":"_user-dashboard-buttons_11m31_1"},g0e=()=>he.jsx(Fm,{style:{width:"100%",padding:"16px",backgroundColor:"white"},children:he.jsxs(Fle,{justify:"space-between",align:"middle",children:[he.jsx(Bz,{children:he.jsx("h2",{style:{fontSize:"2em"},children:"Mis denuncias"})}),he.jsx("div",{className:m0e["user-dashboard-buttons"],children:he.jsxs(Bz,{children:[he.jsx(Ba,{to:"/user-form/",children:he.jsx(Di,{type:"primary",children:"Realizar Denuncia"})}),he.jsx(Ba,{to:"/blog",children:he.jsx(Di,{type:"primary",style:{marginLeft:"1rem"},children:"Blog denuncias públicas"})})]})})]})}),{Search:v0e}=uu,{RangePicker:y0e}=Ud,{Option:wa}=Ta,_0e=()=>{const[e,t]=_.useState([]),[n,r]=_.useState([]),[s,d]=_.useState(""),[p,i]=_.useState(null),[x,S]=_.useState(null),[T,M]=_.useState(null),[$,L]=_.useState([]),{user:N}=_.useContext(_c),V=ql();_.useEffect(()=>{const Y=async()=>{try{const ae=(await $i.get("https://safeplace.site/api/user-form")).data.filter(ce=>ce.userId===N.id).map(ce=>({key:ce._id,id:ce._id,description:ce.description,type:ce.complaintType,status:ce.status,date:Wo(ce.date).format("YYYY-MM-DD"),time:ce.time}));t(ae),r(ae)}catch(re){console.error("Error al obtener las quejas:",re),Vi.error("Error al  obtener las denuncias")}};N!=null&&N.id&&Y()},[N==null?void 0:N.id]);const B=()=>{let Y=[...e];if(s&&(Y=Y.filter(re=>re.id.includes(s)||re.description.toLowerCase().includes(s.toLowerCase()))),p){const[re,se]=p;Y=Y.filter(ae=>{const ce=new Date(ae.date);return ce>=re&&ce<=se})}x&&(Y=Y.filter(re=>re.type===x)),T&&(Y=Y.filter(re=>re.status===T)),r(Y)},j=()=>{d(""),i(null),S(null),M(null),r(e)},H=async()=>{try{await Promise.all($.map(re=>$i.delete(`https://safeplace.site/api/user-form/${re}`))),Vi.success("Denuncias eliminadas exitosamente");const Y=e.filter(re=>!$.includes(re.key));t(Y),r(Y),L([])}catch{Vi.error("Error al eliminar las denuncias")}},W=async Y=>{try{await $i.delete(`https://safeplace.site/api/user-form/${Y}`),Vi.success("Denuncia eliminada exitosamente");const re=e.filter(se=>se.id!==Y);t(re),r(re)}catch{Vi.error("Error al eliminar la denuncia")}},X=Y=>{V(`/review-complaint/${Y}`)},ee=async(Y,re)=>{try{await $i.put(`https://safeplace.site/api/user-form/${Y}`,{status:re}),Vi.success("Estado actualizado exitosamente");const se=e.map(ae=>ae.id===Y?{...ae,status:re}:ae);t(se),r(se)}catch{Vi.error("Error al actualizar el estado")}},J=[{title:"ID",dataIndex:"id",key:"id"},{title:"Descripción",dataIndex:"description",key:"description"},{title:"Fecha",dataIndex:"date",key:"date"},{title:"Hora",dataIndex:"time",key:"time"},{title:"Tipo",dataIndex:"type",key:"type"},{title:"Estado",dataIndex:"status",key:"status",render:(Y,re)=>he.jsx(wm,{title:"¿Estás seguro de que deseas actualizar el estado?",onConfirm:()=>ee(re.id,re.status),onCancel:()=>Vi.info("Cancelado"),okText:"Sí",cancelText:"No",children:he.jsxs(Ta,{defaultValue:re.status,style:{width:180},virtual:!1,onChange:se=>{re.status=se,r([...n])},children:[he.jsx(wa,{value:"Pendiente",children:"Pendiente"}),he.jsx(wa,{value:"Resuelto",children:"Resuelto"}),he.jsx(wa,{value:"En proceso",children:"En proceso"})]})})},{title:"Acciones",key:"actions",render:(Y,re)=>he.jsxs(Ec,{children:[he.jsx(Ba,{to:`/review-complaint/${re.id}`,children:he.jsx(Di,{type:"link",icon:he.jsx(uR,{}),onClick:()=>X(re.id),children:"Ver o Editar"})}),he.jsx(wm,{title:"¿Estás seguro de eliminar esta denuncia?",onConfirm:()=>W(re.id),onCancel:()=>Vi.info("Eliminación cancelada"),okText:"Sí",cancelText:"No",children:he.jsx(Di,{type:"link",icon:he.jsx(cR,{}),danger:!0,children:"Eliminar"})})]})}];return he.jsx("div",{style:{padding:20,display:"flex",justifyContent:"center"},children:he.jsxs("div",{style:{width:"100vw",backgroundColor:"#fff",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",borderRadius:"10px"},children:[he.jsxs(Ec,{style:{marginBottom:0,alignItems:"center",padding:"10px 20px",backgroundColor:"#fff",borderBottom:"1px solid #f0f0f0",borderRadius:"10px 10px 0 0"},align:"center",children:[he.jsx(v0e,{placeholder:"Buscar por ID o descripción",value:s,onChange:Y=>d(Y.target.value),onSearch:()=>{let Y=[...e];s.match(/^[a-fA-F0-9]{24}$/)?Y=Y.filter(re=>re.id===s):Y=Y.filter(re=>re.description.toLowerCase().includes(s.toLowerCase())),r(Y)},style:{margin:0,width:450,backgroundColor:"#fff"}}),he.jsx(y0e,{value:p,onChange:Y=>i(Y),style:{width:250,backgroundColor:"#fff"}}),he.jsxs(Ta,{value:x,style:{width:180,backgroundColor:"#fff"},onChange:Y=>S(Y),placeholder:"Tipo denuncia",virtual:!1,children:[he.jsx(wa,{value:"Acoso",children:"Acoso"}),he.jsx(wa,{value:"Discriminacion",children:"Discriminación"}),he.jsx(wa,{value:"Violencia",children:"Violencia"}),he.jsx(wa,{value:"Corrupción y fraude",children:"Corrupción y fraude"}),he.jsx(wa,{value:"Incumplimiento de normativas",children:"Incumplimiento de normativas"}),he.jsx(wa,{value:"Abuso y maltrato",children:"Abuso y maltrato"}),he.jsx(wa,{value:"Contenido prohibido",children:"Contenido prohibido"}),he.jsx(wa,{value:"Crimen",children:"Crimen"}),he.jsx(wa,{value:"Drogas",children:"Drogas"}),he.jsx(wa,{value:"Terrorismo",children:"Terrorismo"}),he.jsx(wa,{value:"otro",children:"Otro"})]}),he.jsxs(Ta,{value:T,style:{width:180,backgroundColor:"#fff"},onChange:Y=>M(Y),placeholder:"Estado",children:[he.jsx(wa,{value:"Pendiente",children:"Pendiente"}),he.jsx(wa,{value:"Resuelto",children:"Resuelto"}),he.jsx(wa,{value:"En proceso",children:"En proceso"})]}),he.jsx(Di,{type:"primary",onClick:B,children:"Filtrar"}),he.jsx(Di,{onClick:j,children:"Reset"}),he.jsx(Di,{type:"primary",onClick:H,disabled:$.length===0,children:"Eliminar"}),he.jsx(Di,{type:"default",icon:he.jsx(zV,{}),onClick:j})]}),he.jsx(Jl,{rowSelection:{selectedRowKeys:$,onChange:L},columns:J,dataSource:n,pagination:{pageSize:9,showSizeChanger:!0,pageSizeOptions:["9","10","20","50"]},style:{borderRadius:"0 0 10px 10px",paddingRight:"10px",paddingLeft:"10px"}})]})})},x0e=()=>he.jsx(he.Fragment,{children:he.jsxs("main",{children:[he.jsx("div",{className:"user-panel-description",children:he.jsx(g0e,{})}),he.jsx("div",{className:"user-complaint-table",children:he.jsx(_0e,{})})]})}),{Text:b0e,Title:w0e}=Gl,TR=({visible:e,onClose:t})=>he.jsx(Us,{visible:e,onCancel:t,footer:null,centered:!0,closable:!1,bodyStyle:{textAlign:"center",padding:"24px"},children:he.jsxs(Ec,{direction:"vertical",size:"large",style:{textAlign:"center"},children:[he.jsx($V,{style:{fontSize:48,color:"green"}}),he.jsx(w0e,{level:3,children:"¡Éxito!"}),he.jsx(b0e,{type:"secondary",children:"La operación se completó correctamente."}),he.jsx(Di,{type:"primary",onClick:t,children:"Hecho"})]})}),Ao={"form-container":"_form-container_mm5tq_3","complaint-form":"_complaint-form_mm5tq_25","form-group":"_form-group_mm5tq_37","form-select":"_form-select_mm5tq_61","form-textarea":"_form-textarea_mm5tq_77","location-group":"_location-group_mm5tq_95","location-input":"_location-input_mm5tq_119","map-container":"_map-container_mm5tq_131","map-image":"_map-image_mm5tq_147","form-input":"_form-input_mm5tq_159","date-input":"_date-input_mm5tq_171","time-input":"_time-input_mm5tq_179","notification-options":"_notification-options_mm5tq_187","radio-label":"_radio-label_mm5tq_197","submit-button":"_submit-button_mm5tq_223","checkbox-anonymous-complaint":"_checkbox-anonymous-complaint_mm5tq_291"};Zc.accessToken="pk.eyJ1IjoicmVjaW5vcyIsImEiOiJjbTNuMDBrcmYwNmc1MnNweWM3ejJwaXZlIn0.CXW_tWFPWeZuooqOyfn4RQ";const S0e=()=>{const[e,t]=_.useState(!1),[n,r]=_.useState(""),[s,d]=_.useState(""),[p,i]=_.useState(null),[x,S]=_.useState(""),[T,M]=_.useState(""),[$,L]=_.useState(null),[N,V]=_.useState(""),B=_.useRef(null),j=_.useRef(null),H=_.useRef(null),[W,X]=_.useState(!1),[ee,J]=_.useState(!1),{user:Y}=_.useContext(_c),re=()=>{X(!1)},se=()=>{J(!1)};_.useEffect(()=>{j.current||(j.current=new Zc.Map({container:B.current,style:"mapbox://styles/mapbox/streets-v12",center:[-89.218191,13.69294],zoom:12}),j.current.addControl(new Zc.NavigationControl),j.current.on("click",ce=>{const{lng:Ce,lat:we}=ce.lngLat;H.current&&H.current.remove(),H.current=new Zc.Marker().setLngLat([Ce,we]).addTo(j.current),L({lat:we.toFixed(5),lng:Ce.toFixed(5)})}))},[]);const ae=async ce=>{if(ce.preventDefault(),!n){alert("Por favor, seleccione un tipo de denuncia.");return}if(n==="otro"&&!s.trim()){alert("Por favor, especifique el tipo de denuncia.");return}if(!x.trim()){alert("Por favor, escriba una descripción.");return}if(!T){alert("Por favor, seleccione una fecha.");return}if(!p){alert("Por favor, seleccione una hora.");return}if(!$){alert("Por favor, seleccione una ubicación en el mapa.");return}const Ce={userId:Y.id,isAnonymous:e,complaintType:n,specificOtherComplaintType:n==="otro"?s:"",description:x,location:$,locationDescription:N,date:T,time:p};console.log("Formulario enviado:",Ce);try{const we=await $i.post("https://safeplace.site/api/user-form",Ce);X(!0)}catch(we){console.error("Error enviando el formulario:",we),J(!0)}};return he.jsxs("div",{className:Ao["form-container"],children:[he.jsxs("form",{className:Ao["complaint-form"],onSubmit:ae,children:[he.jsx(Y8,{}),he.jsxs("div",{className:Ao["form-group"],children:[he.jsx("label",{children:"Marque si su denuncia es anónima"}),he.jsxs("label",{className:Ao["anonymous-complaint-txt"],children:[he.jsx("input",{className:Ao["checkbox-anonymous-complaint"],type:"checkbox",checked:e,onChange:ce=>t(ce.target.checked)}),"Denuncia Anónima"]})]}),he.jsxs("div",{className:Ao["form-group"],children:[he.jsx("label",{children:"Tipo denuncia:"}),he.jsxs("select",{className:Ao["form-select"],value:n,onChange:ce=>r(ce.target.value),children:[he.jsx("option",{value:"",disabled:!0,children:"Tipo denuncia"}),he.jsx("option",{value:"Acoso",children:"Acoso"}),he.jsx("option",{value:"Discriminacion",children:"Discriminación"}),he.jsx("option",{value:"Violencia",children:"Violencia"}),he.jsx("option",{value:"Corrupcion y fraude",children:"Corrupción y fraude"}),he.jsx("option",{value:"Incumplimiento de normativas",children:"Incumplimiento de normativas"}),he.jsx("option",{value:"Abuso y maltrato",children:"Abuso y maltrato"}),he.jsx("option",{value:"Contenido prohibido",children:"Contenido prohibido"}),he.jsx("option",{value:"Crimen",children:"Crimen"}),he.jsx("option",{value:"Drogas",children:"Drogas"}),he.jsx("option",{value:"Terrorismo",children:"Terrorismo"}),he.jsx("option",{value:"otro",children:"Otro"})]}),n==="otro"&&he.jsx("input",{type:"text",className:Ao["form-textarea"],placeholder:"Especifique el tipo de denuncia",value:s,onChange:ce=>d(ce.target.value)})]}),he.jsxs("div",{className:Ao["form-group"],children:[he.jsx("label",{children:"Descripción:"}),he.jsx("textarea",{className:Ao["form-textarea"],placeholder:"Descripción",value:x,onChange:ce=>S(ce.target.value)})]}),he.jsxs("div",{className:`${Ao["form-group"]} ${Ao["location-group"]}`,children:[he.jsxs("div",{className:Ao["location-input"],children:[he.jsx("label",{children:"Ubicación:"}),he.jsx("textarea",{className:Ao["form-textarea"],value:$?`Lat: ${$.lat}, Lng: ${$.lng}`:"Seleccione una ubicación en el mapa",readOnly:!0}),he.jsx("textarea",{className:Ao["form-textarea"],placeholder:"Ubicación descripción",value:N,onChange:ce=>V(ce.target.value)})]}),he.jsx("div",{className:Ao["map-container"],ref:B,style:{height:"300px",border:"1px solid #ccc"}})]}),he.jsxs("div",{className:Ao["form-group"],children:[he.jsx("label",{children:"Fecha:"}),he.jsx("input",{type:"date",className:`${Ao["form-input"]} ${Ao["date-input"]}`,value:T,onChange:ce=>M(ce.target.value)})]}),he.jsxs("div",{className:Ao["form-group"],children:[he.jsx("label",{children:"Hora:"}),he.jsx(Wm,{className:Ao["time-input"],format:"HH:mm",placeholder:"Seleccionar Hora",onChange:(ce,Ce)=>i(Ce)})]}),he.jsx("div",{className:Ao["form-group"],children:he.jsx("button",{type:"submit",className:Ao["submit-button"],children:"Enviar"})})]}),he.jsx(TR,{visible:W,onClose:re}),he.jsx(Xm,{visible:ee,onClose:se})]})},C0e=()=>he.jsx(he.Fragment,{children:he.jsxs("div",{className:"warning",children:[he.jsxs("div",{className:"warning-header",children:[he.jsx(bve,{size:"50px",className:"file-icon"}),he.jsx("p",{children:"Denuncia"})]}),he.jsx("div",{className:"warning-body",children:he.jsx("p",{children:"Las denuncias son serias y fundamentadas. Por favor, asegúrate de que toda la información proporcionada sea verídica. Las denuncias falsas no serán toleradas."})})]})}),E0e=()=>he.jsxs(he.Fragment,{children:[he.jsx("header",{children:he.jsx(C0e,{})}),he.jsx("main",{children:he.jsx(S0e,{})})]}),gb=({allowedRoles:e})=>{const{token:t,user:n,loading:r}=_.useContext(_c),[s,d]=_.useState(!0);if(_.useEffect(()=>{r||d(!1)},[r]),r||s)return he.jsx("div",{children:"Loading..."});if(!t)return Vi.error("Sin token adecuado para acceder."),he.jsx(a0,{to:"/signin",replace:!0});if(e&&!e.includes(n==null?void 0:n.role))switch(n==null?void 0:n.role){case"company":return he.jsx(a0,{to:"/admin-dashboard",replace:!0});case"user":return he.jsx(a0,{to:"/user-dashboard",replace:!0});default:return he.jsx(a0,{to:"/",replace:!0})}return he.jsx(GG,{})},T0e=()=>{const[e,t]=_.useState(""),[n,r]=_.useState(!1),[s,d]=_.useState(""),[p,i]=_.useState(!1),x=ql(),S=L=>{t(L.target.value)},T=async L=>{L.preventDefault();try{const V=await fetch("https://safeplace.site/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(!V.ok){const j=await V.json();d(j.message),r(!0);return}const B=await V.json();console.log("Password recovery email sent:",B),d("Se ha enviado un correo para recuperar la contraseña."),i(!0)}catch(N){console.error("Error:",N),d("Error al enviar el correo de recuperación."),r(!0)}},M=()=>{r(!1)},$=()=>{i(!1),x("/")};return he.jsx("main",{children:he.jsx("div",{className:"safe-place-container",children:he.jsxs("div",{className:"login-form",children:[he.jsx("h1",{children:"SafePlace"}),he.jsx("div",{className:"icon-container",children:he.jsx("img",{src:"logo.png",alt:"SafePlace Icon"})}),he.jsx("h2",{children:"Sistema de Denuncias"}),he.jsx("p",{className:"subtitle",children:"Denuncia fácil, acción inmediata."}),he.jsx("div",{className:"tabs",children:he.jsx("button",{className:"tab-active",children:"Reestablecer Contraseña"})}),he.jsxs("form",{onSubmit:T,children:[he.jsx("div",{className:"form-group",children:he.jsx("input",{type:"email",name:"email",placeholder:"Email",className:"form-input",value:e,onChange:S})}),he.jsx("button",{type:"submit",className:"submit-button",children:"Enviar"})]}),he.jsx(Xm,{visible:n,onClose:M,message:s}),he.jsx(TR,{visible:p,onClose:$,message:s})]})})})},I0e=()=>{const[e,t]=_.useState({newPassword:"",confirmPassword:""}),[n,r]=_.useState(!1),[s,d]=_.useState(""),[p,i]=_.useState(!1),x=ql(),S=of(),M=new URLSearchParams(S.search).get("token"),$=B=>{const{name:j,value:H}=B.target;t(W=>({...W,[j]:H}))},L=async B=>{if(B.preventDefault(),e.newPassword!==e.confirmPassword?(d("Las contraseñas no coinciden"),r(!0),!1):!0){const H="https://safeplace.site/api";try{const W=await fetch(`${H}/auth/reset-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({resetToken:M,newPassword:e.newPassword})});if(!W.ok){const ee=await W.json();d(ee.message),r(!0);return}const X=await W.json();d("La contraseña se ha reestablecido correctamente."),i(!0)}catch{d("Error al reestablecer la contraseña"),r(!0)}}},N=()=>{r(!1)},V=()=>{i(!1),x("/")};return he.jsx("main",{children:he.jsx("div",{className:"safe-place-container",children:he.jsxs("div",{className:"login-form",children:[he.jsx("h1",{children:"SafePlace"}),he.jsx("div",{className:"icon-container",children:he.jsx("img",{src:"logo.png",alt:"SafePlace Icon"})}),he.jsx("h2",{children:"Sistema de Denuncias"}),he.jsx("p",{className:"subtitle",children:"Denuncia fácil, acción inmediata."}),he.jsx("div",{className:"tabs",children:he.jsx("button",{className:"tab-active",children:"Reestablecer Contraseña"})}),he.jsxs("form",{onSubmit:L,children:[he.jsx("div",{className:"form-group",children:he.jsx("input",{type:"text",name:"newPassword",placeholder:"Nueva contraseña",className:"form-input",value:e.newPassword,onChange:$})}),he.jsx("div",{className:"form-group",children:he.jsx("input",{type:"text",name:"confirmPassword",placeholder:"Corfirmar nueva contraseña",className:"form-input",value:e.confirmPassword,onChange:$})}),he.jsx("button",{type:"submit",className:"submit-button",children:"Enviar"})]}),he.jsx(Xm,{visible:n,onClose:N,message:s}),he.jsx(TR,{visible:p,onClose:V,message:s})]})})})},M0e=()=>{const[e,t]=_.useState([]),[n,r]=_.useState([]),[s,d]=_.useState(""),[p,i]=_.useState([]);_.useEffect(()=>{(async()=>{try{const V=(await $i.get("https://safeplace.site/api/users")).data.map(B=>{var j,H,W;return{key:((j=B._id)==null?void 0:j.$oid)||B._id,id:((H=B._id)==null?void 0:H.$oid)||B._id,name:`${B.firstname} ${B.lastname}`,email:B.email,role:B.role,createdAt:Wo(((W=B.createdAt)==null?void 0:W.$date)||B.createdAt).format("YYYY-MM-DD")}});t(V),r(V)}catch(N){console.error("Error fetching users:",N),Vi.error("Error al obtener los usuarios.")}})()},[]);const x=()=>{const L=e.filter(N=>N.name.toLowerCase().includes(s.toLowerCase())||N.email.toLowerCase().includes(s.toLowerCase()));r(L)},S=()=>{d(""),r(e)},T=async L=>{try{await $i.delete(`https://safeplace.site/api/users/delete/${L}`),Vi.success("Usuario eliminado exitosamente");const N=e.filter(V=>V.id!==L);t(N),r(N)}catch(N){console.error("Error deleting user:",N),Vi.error("Error al eliminar el usuario")}},M=async()=>{try{await Promise.all(p.map(N=>$i.delete(`https://safeplace.site/api/users/delete/${N}`))),Vi.success("Usuarios eliminados exitosamente");const L=e.filter(N=>!p.includes(N.id));t(L),r(L),i([])}catch(L){console.error("Error deleting selected users:",L),Vi.error("Error al eliminar los usuarios seleccionados")}},$=[{title:"ID",dataIndex:"id",key:"id"},{title:"Nombre",dataIndex:"name",key:"name"},{title:"Correo",dataIndex:"email",key:"email"},{title:"Rol",dataIndex:"role",key:"role"},{title:"Fecha de Creación",dataIndex:"createdAt",key:"createdAt"},{title:"Acciones",key:"actions",render:(L,N)=>he.jsx(wm,{title:"¿Estás seguro de eliminar este usuario?",onConfirm:()=>T(N.id),onCancel:()=>Vi.info("Eliminación cancelada"),okText:"Sí",cancelText:"No",children:he.jsx(Di,{type:"link",icon:he.jsx(cR,{}),danger:!0,children:"Eliminar"})})}];return he.jsx("div",{style:{padding:20,display:"flex",justifyContent:"center"},children:he.jsxs("div",{style:{width:"100vw",backgroundColor:"#fff",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",borderRadius:"10px"},children:[he.jsxs(Ec,{style:{marginBottom:0,alignItems:"center",padding:"10px 20px",backgroundColor:"#fff",borderBottom:"1px solid #f0f0f0",borderRadius:"10px 10px 0 0"},align:"center",children:[he.jsx(uu,{placeholder:"Buscar por nombre o correo",value:s,onChange:L=>d(L.target.value),onPressEnter:x,style:{width:450,backgroundColor:"#fff"}}),he.jsx(Di,{type:"primary",onClick:x,children:"Buscar"}),he.jsx(Di,{onClick:S,children:"Reset"}),he.jsx(Di,{type:"primary",onClick:M,disabled:p.length===0,children:"Eliminar seleccionados"})]}),he.jsx(Jl,{columns:$,dataSource:n,rowSelection:{selectedRowKeys:p,onChange:i},pagination:{pageSize:10,showSizeChanger:!0,pageSizeOptions:["10","20","50"]},style:{borderRadius:"0 0 10px 10px",paddingRight:"10px",paddingLeft:"10px"}})]})})},P0e=()=>he.jsx(Fm,{style:{width:"100%",height:"40px",display:"flex",alignItems:"center"},children:he.jsx("h2",{children:"Usuarios"})}),R0e=()=>he.jsx(he.Fragment,{children:he.jsxs("main",{children:[he.jsx("div",{className:"UserPanelDescription",children:he.jsx(P0e,{})}),he.jsx("div",{className:"UserTable",children:he.jsx(M0e,{})}),he.jsx("div",{className:"AdminPanelDescription",children:he.jsx(y8,{})}),he.jsx("div",{className:"ComplaintTable",children:he.jsx(U8,{})})]})});function O0e(){const e=of();return e.pathname==="/"||e.pathname==="/register-company"||e.pathname==="/register-user"||e.pathname==="/signin"||e.pathname==="/blog"||e.pathname==="/forgot-password"||e.pathname==="/reset-password"?null:he.jsx(v8,{})}function A0e(){const{token:e,isLoading:t}=_.useContext(_c);return t?he.jsx("div",{children:"Loading..."}):he.jsxs(tq,{children:[he.jsx(O0e,{}),he.jsxs(KG,{children:[he.jsx(Ho,{path:"/",element:he.jsx(Vve,{})}),he.jsx(Ho,{path:"/blog",element:he.jsx(Rve,{})}),he.jsx(Ho,{path:"/signin",element:he.jsx(Wve,{})}),he.jsx(Ho,{path:"/forgot-password",element:he.jsx(T0e,{})}),he.jsx(Ho,{path:"/reset-password",element:he.jsx(I0e,{})}),he.jsx(Ho,{path:"/register-company",element:he.jsx(e0e,{})}),he.jsx(Ho,{path:"/register-user",element:he.jsx(s0e,{})}),he.jsx(Ho,{path:"/user-form",element:he.jsx(E0e,{})}),he.jsx(Ho,{path:"/review-complaint/:id",element:he.jsx(kE,{})}),he.jsx(Ho,{element:he.jsx(gb,{}),children:he.jsx(Ho,{path:"/profile",element:he.jsx(Kve,{})})}),he.jsxs(Ho,{element:he.jsx(gb,{allowedRoles:["company"]}),children:[he.jsx(Ho,{path:"/admin-dashboard",element:he.jsx(vve,{})}),he.jsx(Ho,{path:"/review-complaint",element:he.jsx(kE,{})})]}),he.jsxs(Ho,{element:he.jsx(gb,{allowedRoles:["admin"]}),children:[he.jsx(Ho,{path:"/admin",element:he.jsx(R0e,{})}),he.jsx(Ho,{path:"/review-complaint",element:he.jsx(kE,{})})]}),he.jsx(Ho,{element:he.jsx(gb,{allowedRoles:["user"]}),children:he.jsx(Ho,{path:"/user-dashboard",element:he.jsx(x0e,{})})}),he.jsx(Ho,{path:"*",element:he.jsx(a0,{to:"/",replace:!0})})]})]})}hF(document.getElementById("root")).render(he.jsx(_.StrictMode,{children:he.jsx(oq,{children:he.jsx(A0e,{})})}));
